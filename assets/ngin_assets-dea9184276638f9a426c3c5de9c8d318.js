/*!
 * pixi.js - v4.5.6
 * Compiled Wed, 20 Sep 2017 15:08:21 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
!(function (e) {
  if ("object" == typeof exports && "undefined" != typeof module)
    module.exports = e();
  else if ("function" == typeof define && define.amd) define([], e);
  else {
    var t;
    (t =
      "undefined" != typeof window
        ? window
        : "undefined" != typeof global
        ? global
        : "undefined" != typeof self
        ? self
        : this),
      (t.PIXI = e());
  }
})(function () {
  var e;
  return (function t(e, n, i) {
    function r(o, a) {
      if (!n[o]) {
        if (!e[o]) {
          var l = "function" == typeof require && require;
          if (!a && l) return l(o, !0);
          if (s) return s(o, !0);
          var c = new Error("Cannot find module '" + o + "'");
          throw ((c.code = "MODULE_NOT_FOUND"), c);
        }
        var u = (n[o] = { exports: {} });
        e[o][0].call(
          u.exports,
          function (t) {
            var n = e[o][1][t];
            return r(n || t);
          },
          u,
          u.exports,
          t,
          e,
          n,
          i
        );
      }
      return n[o].exports;
    }
    for (
      var s = "function" == typeof require && require, o = 0;
      o < i.length;
      o++
    )
      r(i[o]);
    return r;
  })(
    {
      1: [
        function (e, t, n) {
          "use strict";
          "use restrict";
          function i(e) {
            var t = 32;
            return (
              (e &= -e),
              e && t--,
              65535 & e && (t -= 16),
              16711935 & e && (t -= 8),
              252645135 & e && (t -= 4),
              858993459 & e && (t -= 2),
              1431655765 & e && (t -= 1),
              t
            );
          }
          (n.INT_BITS = 32),
            (n.INT_MAX = 2147483647),
            (n.INT_MIN = -1 << 31),
            (n.sign = function (e) {
              return (e > 0) - (0 > e);
            }),
            (n.abs = function (e) {
              var t = e >> 31;
              return (e ^ t) - t;
            }),
            (n.min = function (e, t) {
              return t ^ ((e ^ t) & -(t > e));
            }),
            (n.max = function (e, t) {
              return e ^ ((e ^ t) & -(t > e));
            }),
            (n.isPow2 = function (e) {
              return !(e & (e - 1) || !e);
            }),
            (n.log2 = function (e) {
              var t, n;
              return (
                (t = (e > 65535) << 4),
                (e >>>= t),
                (n = (e > 255) << 3),
                (e >>>= n),
                (t |= n),
                (n = (e > 15) << 2),
                (e >>>= n),
                (t |= n),
                (n = (e > 3) << 1),
                (e >>>= n),
                (t |= n) | (e >> 1)
              );
            }),
            (n.log10 = function (e) {
              return e >= 1e9
                ? 9
                : e >= 1e8
                ? 8
                : e >= 1e7
                ? 7
                : e >= 1e6
                ? 6
                : e >= 1e5
                ? 5
                : e >= 1e4
                ? 4
                : e >= 1e3
                ? 3
                : e >= 100
                ? 2
                : e >= 10
                ? 1
                : 0;
            }),
            (n.popCount = function (e) {
              return (
                (e -= (e >>> 1) & 1431655765),
                (16843009 *
                  (((e = (858993459 & e) + ((e >>> 2) & 858993459)) +
                    (e >>> 4)) &
                    252645135)) >>>
                  24
              );
            }),
            (n.countTrailingZeros = i),
            (n.nextPow2 = function (e) {
              return (
                (e += 0 === e),
                --e,
                (e |= e >>> 1),
                (e |= e >>> 2),
                (e |= e >>> 4),
                (e |= e >>> 8),
                (e |= e >>> 16) + 1
              );
            }),
            (n.prevPow2 = function (e) {
              return (
                (e |= e >>> 1),
                (e |= e >>> 2),
                (e |= e >>> 4),
                (e |= e >>> 8),
                (e |= e >>> 16) - (e >>> 1)
              );
            }),
            (n.parity = function (e) {
              return (
                (e ^= e >>> 16),
                (e ^= e >>> 8),
                (e ^= e >>> 4),
                (27030 >>> (e &= 15)) & 1
              );
            });
          var r = new Array(256);
          !(function (e) {
            for (var t = 0; 256 > t; ++t) {
              var n = t,
                i = t,
                r = 7;
              for (n >>>= 1; n; n >>>= 1) (i <<= 1), (i |= 1 & n), --r;
              e[t] = (i << r) & 255;
            }
          })(r),
            (n.reverse = function (e) {
              return (
                (r[255 & e] << 24) |
                (r[(e >>> 8) & 255] << 16) |
                (r[(e >>> 16) & 255] << 8) |
                r[(e >>> 24) & 255]
              );
            }),
            (n.interleave2 = function (e, t) {
              return (
                (e &= 65535),
                (e = 16711935 & (e | (e << 8))),
                (e = 252645135 & (e | (e << 4))),
                (e = 858993459 & (e | (e << 2))),
                (e = 1431655765 & (e | (e << 1))),
                (t &= 65535),
                (t = 16711935 & (t | (t << 8))),
                (t = 252645135 & (t | (t << 4))),
                (t = 858993459 & (t | (t << 2))),
                (t = 1431655765 & (t | (t << 1))),
                e | (t << 1)
              );
            }),
            (n.deinterleave2 = function (e, t) {
              return (
                (e = (e >>> t) & 1431655765),
                (e = 858993459 & (e | (e >>> 1))),
                (e = 252645135 & (e | (e >>> 2))),
                (e = 16711935 & (e | (e >>> 4))),
                ((e = 65535 & (e | (e >>> 16))) << 16) >> 16
              );
            }),
            (n.interleave3 = function (e, t, n) {
              return (
                (e &= 1023),
                (e = 4278190335 & (e | (e << 16))),
                (e = 251719695 & (e | (e << 8))),
                (e = 3272356035 & (e | (e << 4))),
                (e = 1227133513 & (e | (e << 2))),
                (t &= 1023),
                (t = 4278190335 & (t | (t << 16))),
                (t = 251719695 & (t | (t << 8))),
                (t = 3272356035 & (t | (t << 4))),
                (t = 1227133513 & (t | (t << 2))),
                (e |= t << 1),
                (n &= 1023),
                (n = 4278190335 & (n | (n << 16))),
                (n = 251719695 & (n | (n << 8))),
                (n = 3272356035 & (n | (n << 4))),
                (n = 1227133513 & (n | (n << 2))),
                e | (n << 2)
              );
            }),
            (n.deinterleave3 = function (e, t) {
              return (
                (e = (e >>> t) & 1227133513),
                (e = 3272356035 & (e | (e >>> 2))),
                (e = 251719695 & (e | (e >>> 4))),
                (e = 4278190335 & (e | (e >>> 8))),
                ((e = 1023 & (e | (e >>> 16))) << 22) >> 22
              );
            }),
            (n.nextCombination = function (e) {
              var t = e | (e - 1);
              return (t + 1) | (((~t & -~t) - 1) >>> (i(e) + 1));
            });
        },
        {},
      ],
      2: [
        function (e, t) {
          "use strict";
          function n(e, t, n) {
            n = n || 2;
            var r = t && t.length,
              o = r ? t[0] * n : e.length,
              a = i(e, 0, o, n, !0),
              l = [];
            if (!a) return l;
            var c, h, d, p, f, m, g;
            if ((r && (a = u(e, t, a, n)), e.length > 80 * n)) {
              (c = d = e[0]), (h = p = e[1]);
              for (var v = n; o > v; v += n)
                (f = e[v]),
                  (m = e[v + 1]),
                  c > f && (c = f),
                  h > m && (h = m),
                  f > d && (d = f),
                  m > p && (p = m);
              g = Math.max(d - c, p - h);
            }
            return s(a, l, n, c, h, g), l;
          }
          function i(e, t, n, i, r) {
            var s, o;
            if (r === A(e, t, n, i) > 0)
              for (s = t; n > s; s += i) o = k(s, e[s], e[s + 1], o);
            else for (s = n - i; s >= t; s -= i) o = k(s, e[s], e[s + 1], o);
            return o && w(o, o.next) && (P(o), (o = o.next)), o;
          }
          function r(e, t) {
            if (!e) return e;
            t || (t = e);
            var n,
              i = e;
            do
              if (
                ((n = !1),
                i.steiner || (!w(i, i.next) && 0 !== b(i.prev, i, i.next)))
              )
                i = i.next;
              else {
                if ((P(i), (i = t = i.prev) === i.next)) return null;
                n = !0;
              }
            while (n || i !== t);
            return t;
          }
          function s(e, t, n, i, u, h, d) {
            if (e) {
              !d && h && f(e, i, u, h);
              for (var p, m, g = e; e.prev !== e.next; )
                if (((p = e.prev), (m = e.next), h ? a(e, i, u, h) : o(e)))
                  t.push(p.i / n),
                    t.push(e.i / n),
                    t.push(m.i / n),
                    P(e),
                    (e = m.next),
                    (g = m.next);
                else if ((e = m) === g) {
                  d
                    ? 1 === d
                      ? ((e = l(e, t, n)), s(e, t, n, i, u, h, 2))
                      : 2 === d && c(e, t, n, i, u, h)
                    : s(r(e), t, n, i, u, h, 1);
                  break;
                }
            }
          }
          function o(e) {
            var t = e.prev,
              n = e,
              i = e.next;
            if (b(t, n, i) >= 0) return !1;
            for (var r = e.next.next; r !== e.prev; ) {
              if (
                _(t.x, t.y, n.x, n.y, i.x, i.y, r.x, r.y) &&
                b(r.prev, r, r.next) >= 0
              )
                return !1;
              r = r.next;
            }
            return !0;
          }
          function a(e, t, n, i) {
            var r = e.prev,
              s = e,
              o = e.next;
            if (b(r, s, o) >= 0) return !1;
            for (
              var a =
                  r.x < s.x ? (r.x < o.x ? r.x : o.x) : s.x < o.x ? s.x : o.x,
                l = r.y < s.y ? (r.y < o.y ? r.y : o.y) : s.y < o.y ? s.y : o.y,
                c = r.x > s.x ? (r.x > o.x ? r.x : o.x) : s.x > o.x ? s.x : o.x,
                u = r.y > s.y ? (r.y > o.y ? r.y : o.y) : s.y > o.y ? s.y : o.y,
                h = g(a, l, t, n, i),
                d = g(c, u, t, n, i),
                p = e.nextZ;
              p && p.z <= d;

            ) {
              if (
                p !== e.prev &&
                p !== e.next &&
                _(r.x, r.y, s.x, s.y, o.x, o.y, p.x, p.y) &&
                b(p.prev, p, p.next) >= 0
              )
                return !1;
              p = p.nextZ;
            }
            for (p = e.prevZ; p && p.z >= h; ) {
              if (
                p !== e.prev &&
                p !== e.next &&
                _(r.x, r.y, s.x, s.y, o.x, o.y, p.x, p.y) &&
                b(p.prev, p, p.next) >= 0
              )
                return !1;
              p = p.prevZ;
            }
            return !0;
          }
          function l(e, t, n) {
            var i = e;
            do {
              var r = i.prev,
                s = i.next.next;
              !w(r, s) &&
                x(r, i, i.next, s) &&
                T(r, s) &&
                T(s, r) &&
                (t.push(r.i / n),
                t.push(i.i / n),
                t.push(s.i / n),
                P(i),
                P(i.next),
                (i = e = s)),
                (i = i.next);
            } while (i !== e);
            return i;
          }
          function c(e, t, n, i, o, a) {
            var l = e;
            do {
              for (var c = l.next.next; c !== l.prev; ) {
                if (l.i !== c.i && y(l, c)) {
                  var u = E(l, c);
                  return (
                    (l = r(l, l.next)),
                    (u = r(u, u.next)),
                    s(l, t, n, i, o, a),
                    void s(u, t, n, i, o, a)
                  );
                }
                c = c.next;
              }
              l = l.next;
            } while (l !== e);
          }
          function u(e, t, n, s) {
            var o,
              a,
              l,
              c,
              u,
              p = [];
            for (o = 0, a = t.length; a > o; o++)
              (l = t[o] * s),
                (c = a - 1 > o ? t[o + 1] * s : e.length),
                (u = i(e, l, c, s, !1)),
                u === u.next && (u.steiner = !0),
                p.push(v(u));
            for (p.sort(h), o = 0; o < p.length; o++)
              d(p[o], n), (n = r(n, n.next));
            return n;
          }
          function h(e, t) {
            return e.x - t.x;
          }
          function d(e, t) {
            if ((t = p(e, t))) {
              var n = E(t, e);
              r(n, n.next);
            }
          }
          function p(e, t) {
            var n,
              i = t,
              r = e.x,
              s = e.y,
              o = -1 / 0;
            do {
              if (s <= i.y && s >= i.next.y) {
                var a = i.x + ((s - i.y) * (i.next.x - i.x)) / (i.next.y - i.y);
                if (r >= a && a > o) {
                  if (((o = a), a === r)) {
                    if (s === i.y) return i;
                    if (s === i.next.y) return i.next;
                  }
                  n = i.x < i.next.x ? i : i.next;
                }
              }
              i = i.next;
            } while (i !== t);
            if (!n) return null;
            if (r === o) return n.prev;
            var l,
              c = n,
              u = n.x,
              h = n.y,
              d = 1 / 0;
            for (i = n.next; i !== c; )
              r >= i.x &&
                i.x >= u &&
                _(h > s ? r : o, s, u, h, h > s ? o : r, s, i.x, i.y) &&
                ((l = Math.abs(s - i.y) / (r - i.x)) < d ||
                  (l === d && i.x > n.x)) &&
                T(i, e) &&
                ((n = i), (d = l)),
                (i = i.next);
            return n;
          }
          function f(e, t, n, i) {
            var r = e;
            do
              null === r.z && (r.z = g(r.x, r.y, t, n, i)),
                (r.prevZ = r.prev),
                (r.nextZ = r.next),
                (r = r.next);
            while (r !== e);
            (r.prevZ.nextZ = null), (r.prevZ = null), m(r);
          }
          function m(e) {
            var t,
              n,
              i,
              r,
              s,
              o,
              a,
              l,
              c = 1;
            do {
              for (n = e, e = null, s = null, o = 0; n; ) {
                for (
                  o++, i = n, a = 0, t = 0;
                  c > t && (a++, (i = i.nextZ));
                  t++
                );
                for (l = c; a > 0 || (l > 0 && i); )
                  0 === a
                    ? ((r = i), (i = i.nextZ), l--)
                    : 0 !== l && i
                    ? n.z <= i.z
                      ? ((r = n), (n = n.nextZ), a--)
                      : ((r = i), (i = i.nextZ), l--)
                    : ((r = n), (n = n.nextZ), a--),
                    s ? (s.nextZ = r) : (e = r),
                    (r.prevZ = s),
                    (s = r);
                n = i;
              }
              (s.nextZ = null), (c *= 2);
            } while (o > 1);
            return e;
          }
          function g(e, t, n, i, r) {
            return (
              (e = (32767 * (e - n)) / r),
              (t = (32767 * (t - i)) / r),
              (e = 16711935 & (e | (e << 8))),
              (e = 252645135 & (e | (e << 4))),
              (e = 858993459 & (e | (e << 2))),
              (e = 1431655765 & (e | (e << 1))),
              (t = 16711935 & (t | (t << 8))),
              (t = 252645135 & (t | (t << 4))),
              (t = 858993459 & (t | (t << 2))),
              (t = 1431655765 & (t | (t << 1))),
              e | (t << 1)
            );
          }
          function v(e) {
            var t = e,
              n = e;
            do t.x < n.x && (n = t), (t = t.next);
            while (t !== e);
            return n;
          }
          function _(e, t, n, i, r, s, o, a) {
            return (
              (r - o) * (t - a) - (e - o) * (s - a) >= 0 &&
              (e - o) * (i - a) - (n - o) * (t - a) >= 0 &&
              (n - o) * (s - a) - (r - o) * (i - a) >= 0
            );
          }
          function y(e, t) {
            return (
              e.next.i !== t.i &&
              e.prev.i !== t.i &&
              !C(e, t) &&
              T(e, t) &&
              T(t, e) &&
              S(e, t)
            );
          }
          function b(e, t, n) {
            return (t.y - e.y) * (n.x - t.x) - (t.x - e.x) * (n.y - t.y);
          }
          function w(e, t) {
            return e.x === t.x && e.y === t.y;
          }
          function x(e, t, n, i) {
            return (
              !!((w(e, t) && w(n, i)) || (w(e, i) && w(n, t))) ||
              (b(e, t, n) > 0 != b(e, t, i) > 0 &&
                b(n, i, e) > 0 != b(n, i, t) > 0)
            );
          }
          function C(e, t) {
            var n = e;
            do {
              if (
                n.i !== e.i &&
                n.next.i !== e.i &&
                n.i !== t.i &&
                n.next.i !== t.i &&
                x(n, n.next, e, t)
              )
                return !0;
              n = n.next;
            } while (n !== e);
            return !1;
          }
          function T(e, t) {
            return b(e.prev, e, e.next) < 0
              ? b(e, t, e.next) >= 0 && b(e, e.prev, t) >= 0
              : b(e, t, e.prev) < 0 || b(e, e.next, t) < 0;
          }
          function S(e, t) {
            var n = e,
              i = !1,
              r = (e.x + t.x) / 2,
              s = (e.y + t.y) / 2;
            do
              n.y > s != n.next.y > s &&
                r < ((n.next.x - n.x) * (s - n.y)) / (n.next.y - n.y) + n.x &&
                (i = !i),
                (n = n.next);
            while (n !== e);
            return i;
          }
          function E(e, t) {
            var n = new I(e.i, e.x, e.y),
              i = new I(t.i, t.x, t.y),
              r = e.next,
              s = t.prev;
            return (
              (e.next = t),
              (t.prev = e),
              (n.next = r),
              (r.prev = n),
              (i.next = n),
              (n.prev = i),
              (s.next = i),
              (i.prev = s),
              i
            );
          }
          function k(e, t, n, i) {
            var r = new I(e, t, n);
            return (
              i
                ? ((r.next = i.next),
                  (r.prev = i),
                  (i.next.prev = r),
                  (i.next = r))
                : ((r.prev = r), (r.next = r)),
              r
            );
          }
          function P(e) {
            (e.next.prev = e.prev),
              (e.prev.next = e.next),
              e.prevZ && (e.prevZ.nextZ = e.nextZ),
              e.nextZ && (e.nextZ.prevZ = e.prevZ);
          }
          function I(e, t, n) {
            (this.i = e),
              (this.x = t),
              (this.y = n),
              (this.prev = null),
              (this.next = null),
              (this.z = null),
              (this.prevZ = null),
              (this.nextZ = null),
              (this.steiner = !1);
          }
          function A(e, t, n, i) {
            for (var r = 0, s = t, o = n - i; n > s; s += i)
              (r += (e[o] - e[s]) * (e[s + 1] + e[o + 1])), (o = s);
            return r;
          }
          (t.exports = n),
            (n.deviation = function (e, t, n, i) {
              var r = t && t.length,
                s = r ? t[0] * n : e.length,
                o = Math.abs(A(e, 0, s, n));
              if (r)
                for (var a = 0, l = t.length; l > a; a++) {
                  var c = t[a] * n,
                    u = l - 1 > a ? t[a + 1] * n : e.length;
                  o -= Math.abs(A(e, c, u, n));
                }
              var h = 0;
              for (a = 0; a < i.length; a += 3) {
                var d = i[a] * n,
                  p = i[a + 1] * n,
                  f = i[a + 2] * n;
                h += Math.abs(
                  (e[d] - e[f]) * (e[p + 1] - e[d + 1]) -
                    (e[d] - e[p]) * (e[f + 1] - e[d + 1])
                );
              }
              return 0 === o && 0 === h ? 0 : Math.abs((h - o) / o);
            }),
            (n.flatten = function (e) {
              for (
                var t = e[0][0].length,
                  n = { vertices: [], holes: [], dimensions: t },
                  i = 0,
                  r = 0;
                r < e.length;
                r++
              ) {
                for (var s = 0; s < e[r].length; s++)
                  for (var o = 0; t > o; o++) n.vertices.push(e[r][s][o]);
                r > 0 && ((i += e[r - 1].length), n.holes.push(i));
              }
              return n;
            });
        },
        {},
      ],
      3: [
        function (e, t) {
          "use strict";
          function n() {}
          function i(e, t, n) {
            (this.fn = e), (this.context = t), (this.once = n || !1);
          }
          function r() {
            (this._events = new n()), (this._eventsCount = 0);
          }
          var s = Object.prototype.hasOwnProperty,
            o = "~";
          Object.create &&
            ((n.prototype = Object.create(null)),
            new n().__proto__ || (o = !1)),
            (r.prototype.eventNames = function () {
              var e,
                t,
                n = [];
              if (0 === this._eventsCount) return n;
              for (t in (e = this._events))
                s.call(e, t) && n.push(o ? t.slice(1) : t);
              return Object.getOwnPropertySymbols
                ? n.concat(Object.getOwnPropertySymbols(e))
                : n;
            }),
            (r.prototype.listeners = function (e, t) {
              var n = o ? o + e : e,
                i = this._events[n];
              if (t) return !!i;
              if (!i) return [];
              if (i.fn) return [i.fn];
              for (var r = 0, s = i.length, a = new Array(s); s > r; r++)
                a[r] = i[r].fn;
              return a;
            }),
            (r.prototype.emit = function (e, t, n, i, r, s) {
              var a = o ? o + e : e;
              if (!this._events[a]) return !1;
              var l,
                c,
                u = this._events[a],
                h = arguments.length;
              if (u.fn) {
                switch (
                  (u.once && this.removeListener(e, u.fn, void 0, !0), h)
                ) {
                  case 1:
                    return u.fn.call(u.context), !0;
                  case 2:
                    return u.fn.call(u.context, t), !0;
                  case 3:
                    return u.fn.call(u.context, t, n), !0;
                  case 4:
                    return u.fn.call(u.context, t, n, i), !0;
                  case 5:
                    return u.fn.call(u.context, t, n, i, r), !0;
                  case 6:
                    return u.fn.call(u.context, t, n, i, r, s), !0;
                }
                for (c = 1, l = new Array(h - 1); h > c; c++)
                  l[c - 1] = arguments[c];
                u.fn.apply(u.context, l);
              } else {
                var d,
                  p = u.length;
                for (c = 0; p > c; c++)
                  switch (
                    (u[c].once && this.removeListener(e, u[c].fn, void 0, !0),
                    h)
                  ) {
                    case 1:
                      u[c].fn.call(u[c].context);
                      break;
                    case 2:
                      u[c].fn.call(u[c].context, t);
                      break;
                    case 3:
                      u[c].fn.call(u[c].context, t, n);
                      break;
                    case 4:
                      u[c].fn.call(u[c].context, t, n, i);
                      break;
                    default:
                      if (!l)
                        for (d = 1, l = new Array(h - 1); h > d; d++)
                          l[d - 1] = arguments[d];
                      u[c].fn.apply(u[c].context, l);
                  }
              }
              return !0;
            }),
            (r.prototype.on = function (e, t, n) {
              var r = new i(t, n || this),
                s = o ? o + e : e;
              return (
                this._events[s]
                  ? this._events[s].fn
                    ? (this._events[s] = [this._events[s], r])
                    : this._events[s].push(r)
                  : ((this._events[s] = r), this._eventsCount++),
                this
              );
            }),
            (r.prototype.once = function (e, t, n) {
              var r = new i(t, n || this, !0),
                s = o ? o + e : e;
              return (
                this._events[s]
                  ? this._events[s].fn
                    ? (this._events[s] = [this._events[s], r])
                    : this._events[s].push(r)
                  : ((this._events[s] = r), this._eventsCount++),
                this
              );
            }),
            (r.prototype.removeListener = function (e, t, i, r) {
              var s = o ? o + e : e;
              if (!this._events[s]) return this;
              if (!t)
                return (
                  0 == --this._eventsCount
                    ? (this._events = new n())
                    : delete this._events[s],
                  this
                );
              var a = this._events[s];
              if (a.fn)
                a.fn !== t ||
                  (r && !a.once) ||
                  (i && a.context !== i) ||
                  (0 == --this._eventsCount
                    ? (this._events = new n())
                    : delete this._events[s]);
              else {
                for (var l = 0, c = [], u = a.length; u > l; l++)
                  (a[l].fn !== t ||
                    (r && !a[l].once) ||
                    (i && a[l].context !== i)) &&
                    c.push(a[l]);
                c.length
                  ? (this._events[s] = 1 === c.length ? c[0] : c)
                  : 0 == --this._eventsCount
                  ? (this._events = new n())
                  : delete this._events[s];
              }
              return this;
            }),
            (r.prototype.removeAllListeners = function (e) {
              var t;
              return (
                e
                  ? ((t = o ? o + e : e),
                    this._events[t] &&
                      (0 == --this._eventsCount
                        ? (this._events = new n())
                        : delete this._events[t]))
                  : ((this._events = new n()), (this._eventsCount = 0)),
                this
              );
            }),
            (r.prototype.off = r.prototype.removeListener),
            (r.prototype.addListener = r.prototype.on),
            (r.prototype.setMaxListeners = function () {
              return this;
            }),
            (r.prefixed = o),
            (r.EventEmitter = r),
            void 0 !== t && (t.exports = r);
        },
        {},
      ],
      4: [
        function (t, n) {
          !(function (t) {
            var i = /iPhone/i,
              r = /iPod/i,
              s = /iPad/i,
              o = /(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,
              a = /Android/i,
              l = /(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,
              c =
                /(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,
              u = /Windows Phone/i,
              h = /(?=.*\bWindows\b)(?=.*\bARM\b)/i,
              d = /BlackBerry/i,
              p = /BB10/i,
              f = /Opera Mini/i,
              m = /(CriOS|Chrome)(?=.*\bMobile\b)/i,
              g = /(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,
              v = new RegExp(
                "(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)",
                "i"
              ),
              _ = function (e, t) {
                return e.test(t);
              },
              y = function (e) {
                var t = e || navigator.userAgent,
                  n = t.split("[FBAN");
                return (
                  void 0 !== n[1] && (t = n[0]),
                  (n = t.split("Twitter")),
                  void 0 !== n[1] && (t = n[0]),
                  (this.apple = {
                    phone: _(i, t),
                    ipod: _(r, t),
                    tablet: !_(i, t) && _(s, t),
                    device: _(i, t) || _(r, t) || _(s, t),
                  }),
                  (this.amazon = {
                    phone: _(l, t),
                    tablet: !_(l, t) && _(c, t),
                    device: _(l, t) || _(c, t),
                  }),
                  (this.android = {
                    phone: _(l, t) || _(o, t),
                    tablet: !_(l, t) && !_(o, t) && (_(c, t) || _(a, t)),
                    device: _(l, t) || _(c, t) || _(o, t) || _(a, t),
                  }),
                  (this.windows = {
                    phone: _(u, t),
                    tablet: _(h, t),
                    device: _(u, t) || _(h, t),
                  }),
                  (this.other = {
                    blackberry: _(d, t),
                    blackberry10: _(p, t),
                    opera: _(f, t),
                    firefox: _(g, t),
                    chrome: _(m, t),
                    device: _(d, t) || _(p, t) || _(f, t) || _(g, t) || _(m, t),
                  }),
                  (this.seven_inch = _(v, t)),
                  (this.any =
                    this.apple.device ||
                    this.android.device ||
                    this.windows.device ||
                    this.other.device ||
                    this.seven_inch),
                  (this.phone =
                    this.apple.phone ||
                    this.android.phone ||
                    this.windows.phone),
                  (this.tablet =
                    this.apple.tablet ||
                    this.android.tablet ||
                    this.windows.tablet),
                  "undefined" == typeof window ? this : void 0
                );
              },
              b = function () {
                var e = new y();
                return (e.Class = y), e;
              };
            void 0 !== n && n.exports && "undefined" == typeof window
              ? (n.exports = y)
              : void 0 !== n && n.exports && "undefined" != typeof window
              ? (n.exports = b())
              : "function" == typeof e && e.amd
              ? e("isMobile", [], (t.isMobile = b()))
              : (t.isMobile = b());
          })(this);
        },
        {},
      ],
      5: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            return (
              e._head
                ? ((e._tail._next = t), (t._prev = e._tail), (e._tail = t))
                : ((e._head = t), (e._tail = t)),
              (t._owner = e),
              t
            );
          }
          Object.defineProperty(n, "__esModule", { value: !0 });
          var s = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            o = (function () {
              function e(t, n, r) {
                void 0 === n && (n = !1),
                  i(this, e),
                  (this._fn = t),
                  (this._once = n),
                  (this._thisArg = r),
                  (this._next = this._prev = this._owner = null);
              }
              return (
                s(e, [
                  {
                    key: "detach",
                    value: function () {
                      return (
                        null !== this._owner && (this._owner.detach(this), !0)
                      );
                    },
                  },
                ]),
                e
              );
            })(),
            a = (function () {
              function e() {
                i(this, e), (this._head = this._tail = void 0);
              }
              return (
                s(e, [
                  {
                    key: "handlers",
                    value: function () {
                      var e =
                          !(arguments.length <= 0 || void 0 === arguments[0]) &&
                          arguments[0],
                        t = this._head;
                      if (e) return !!t;
                      for (var n = []; t; ) n.push(t), (t = t._next);
                      return n;
                    },
                  },
                  {
                    key: "has",
                    value: function (e) {
                      if (!(e instanceof o))
                        throw new Error(
                          "MiniSignal#has(): First arg must be a MiniSignalBinding object."
                        );
                      return e._owner === this;
                    },
                  },
                  {
                    key: "dispatch",
                    value: function () {
                      var e = this._head;
                      if (!e) return !1;
                      for (; e; )
                        e._once && this.detach(e),
                          e._fn.apply(e._thisArg, arguments),
                          (e = e._next);
                      return !0;
                    },
                  },
                  {
                    key: "add",
                    value: function (e) {
                      var t =
                        arguments.length <= 1 || void 0 === arguments[1]
                          ? null
                          : arguments[1];
                      if ("function" != typeof e)
                        throw new Error(
                          "MiniSignal#add(): First arg must be a Function."
                        );
                      return r(this, new o(e, !1, t));
                    },
                  },
                  {
                    key: "once",
                    value: function (e) {
                      var t =
                        arguments.length <= 1 || void 0 === arguments[1]
                          ? null
                          : arguments[1];
                      if ("function" != typeof e)
                        throw new Error(
                          "MiniSignal#once(): First arg must be a Function."
                        );
                      return r(this, new o(e, !0, t));
                    },
                  },
                  {
                    key: "detach",
                    value: function (e) {
                      if (!(e instanceof o))
                        throw new Error(
                          "MiniSignal#detach(): First arg must be a MiniSignalBinding object."
                        );
                      return e._owner !== this
                        ? this
                        : (e._prev && (e._prev._next = e._next),
                          e._next && (e._next._prev = e._prev),
                          e === this._head
                            ? ((this._head = e._next),
                              null === e._next && (this._tail = null))
                            : e === this._tail &&
                              ((this._tail = e._prev),
                              (this._tail._next = null)),
                          (e._owner = null),
                          this);
                    },
                  },
                  {
                    key: "detachAll",
                    value: function () {
                      var e = this._head;
                      if (!e) return this;
                      for (this._head = this._tail = null; e; )
                        (e._owner = null), (e = e._next);
                      return this;
                    },
                  },
                ]),
                e
              );
            })();
          (a.MiniSignalBinding = o),
            (n["default"] = a),
            (t.exports = n["default"]);
        },
        {},
      ],
      6: [
        function (e, t) {
          "use strict";
          function n(e) {
            if (null === e || void 0 === e)
              throw new TypeError(
                "Object.assign cannot be called with null or undefined"
              );
            return Object(e);
          }
          var i = Object.getOwnPropertySymbols,
            r = Object.prototype.hasOwnProperty,
            s = Object.prototype.propertyIsEnumerable;
          t.exports = (function () {
            try {
              if (!Object.assign) return !1;
              var e = new String("abc");
              if (((e[5] = "de"), "5" === Object.getOwnPropertyNames(e)[0]))
                return !1;
              for (var t = {}, n = 0; 10 > n; n++)
                t["_" + String.fromCharCode(n)] = n;
              if (
                "0123456789" !==
                Object.getOwnPropertyNames(t)
                  .map(function (e) {
                    return t[e];
                  })
                  .join("")
              )
                return !1;
              var i = {};
              return (
                "abcdefghijklmnopqrst".split("").forEach(function (e) {
                  i[e] = e;
                }),
                "abcdefghijklmnopqrst" ===
                  Object.keys(Object.assign({}, i)).join("")
              );
            } catch (e) {
              return !1;
            }
          })()
            ? Object.assign
            : function (e) {
                for (var t, o, a = n(e), l = 1; l < arguments.length; l++) {
                  t = Object(arguments[l]);
                  for (var c in t) r.call(t, c) && (a[c] = t[c]);
                  if (i) {
                    o = i(t);
                    for (var u = 0; u < o.length; u++)
                      s.call(t, o[u]) && (a[o[u]] = t[o[u]]);
                  }
                }
                return a;
              };
        },
        {},
      ],
      7: [
        function (e, t) {
          "use strict";
          t.exports = function (e, t) {
            t = t || {};
            for (
              var n = {
                  key: [
                    "source",
                    "protocol",
                    "authority",
                    "userInfo",
                    "user",
                    "password",
                    "host",
                    "port",
                    "relative",
                    "path",
                    "directory",
                    "file",
                    "query",
                    "anchor",
                  ],
                  q: { name: "queryKey", parser: /(?:^|&)([^&=]*)=?([^&]*)/g },
                  parser: {
                    strict:
                      /^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
                    loose:
                      /^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,
                  },
                },
                i = n.parser[t.strictMode ? "strict" : "loose"].exec(e),
                r = {},
                s = 14;
              s--;

            )
              r[n.key[s]] = i[s] || "";
            return (
              (r[n.q.name] = {}),
              r[n.key[12]].replace(n.q.parser, function (e, t, i) {
                t && (r[n.q.name][t] = i);
              }),
              r
            );
          };
        },
        {},
      ],
      8: [
        function (e, t, n) {
          (function (e) {
            function t(e, t) {
              for (var n = 0, i = e.length - 1; i >= 0; i--) {
                var r = e[i];
                "." === r
                  ? e.splice(i, 1)
                  : ".." === r
                  ? (e.splice(i, 1), n++)
                  : n && (e.splice(i, 1), n--);
              }
              if (t) for (; n--; n) e.unshift("..");
              return e;
            }
            function i(e, t) {
              if (e.filter) return e.filter(t);
              for (var n = [], i = 0; i < e.length; i++)
                t(e[i], i, e) && n.push(e[i]);
              return n;
            }
            var r =
                /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,
              s = function (e) {
                return r.exec(e).slice(1);
              };
            (n.resolve = function () {
              for (
                var n = "", r = !1, s = arguments.length - 1;
                s >= -1 && !r;
                s--
              ) {
                var o = s >= 0 ? arguments[s] : e.cwd();
                if ("string" != typeof o)
                  throw new TypeError(
                    "Arguments to path.resolve must be strings"
                  );
                o && ((n = o + "/" + n), (r = "/" === o.charAt(0)));
              }
              return (
                (n = t(
                  i(n.split("/"), function (e) {
                    return !!e;
                  }),
                  !r
                ).join("/")),
                (r ? "/" : "") + n || "."
              );
            }),
              (n.normalize = function (e) {
                var r = n.isAbsolute(e),
                  s = "/" === o(e, -1);
                return (
                  (e = t(
                    i(e.split("/"), function (e) {
                      return !!e;
                    }),
                    !r
                  ).join("/")),
                  e || r || (e = "."),
                  e && s && (e += "/"),
                  (r ? "/" : "") + e
                );
              }),
              (n.isAbsolute = function (e) {
                return "/" === e.charAt(0);
              }),
              (n.join = function () {
                var e = Array.prototype.slice.call(arguments, 0);
                return n.normalize(
                  i(e, function (e) {
                    if ("string" != typeof e)
                      throw new TypeError(
                        "Arguments to path.join must be strings"
                      );
                    return e;
                  }).join("/")
                );
              }),
              (n.relative = function (e, t) {
                function i(e) {
                  for (var t = 0; t < e.length && "" === e[t]; t++);
                  for (var n = e.length - 1; n >= 0 && "" === e[n]; n--);
                  return t > n ? [] : e.slice(t, n - t + 1);
                }
                (e = n.resolve(e).substr(1)), (t = n.resolve(t).substr(1));
                for (
                  var r = i(e.split("/")),
                    s = i(t.split("/")),
                    o = Math.min(r.length, s.length),
                    a = o,
                    l = 0;
                  o > l;
                  l++
                )
                  if (r[l] !== s[l]) {
                    a = l;
                    break;
                  }
                for (var c = [], l = a; l < r.length; l++) c.push("..");
                return (c = c.concat(s.slice(a))), c.join("/");
              }),
              (n.sep = "/"),
              (n.delimiter = ":"),
              (n.dirname = function (e) {
                var t = s(e),
                  n = t[0],
                  i = t[1];
                return n || i
                  ? (i && (i = i.substr(0, i.length - 1)), n + i)
                  : ".";
              }),
              (n.basename = function (e, t) {
                var n = s(e)[2];
                return (
                  t &&
                    n.substr(-1 * t.length) === t &&
                    (n = n.substr(0, n.length - t.length)),
                  n
                );
              }),
              (n.extname = function (e) {
                return s(e)[3];
              });
            var o =
              "b" === "ab".substr(-1)
                ? function (e, t, n) {
                    return e.substr(t, n);
                  }
                : function (e, t, n) {
                    return 0 > t && (t = e.length + t), e.substr(t, n);
                  };
          }.call(this, e("_process")));
        },
        { _process: 26 },
      ],
      9: [
        function (e, t) {
          var n = new ArrayBuffer(0),
            i = function (e, t, i, r) {
              (this.gl = e),
                (this.buffer = e.createBuffer()),
                (this.type = t || e.ARRAY_BUFFER),
                (this.drawType = r || e.STATIC_DRAW),
                (this.data = n),
                i && this.upload(i),
                (this._updateID = 0);
            };
          (i.prototype.upload = function (e, t, n) {
            n || this.bind();
            var i = this.gl;
            (e = e || this.data),
              (t = t || 0),
              this.data.byteLength >= e.byteLength
                ? i.bufferSubData(this.type, t, e)
                : i.bufferData(this.type, e, this.drawType),
              (this.data = e);
          }),
            (i.prototype.bind = function () {
              this.gl.bindBuffer(this.type, this.buffer);
            }),
            (i.createVertexBuffer = function (e, t, n) {
              return new i(e, e.ARRAY_BUFFER, t, n);
            }),
            (i.createIndexBuffer = function (e, t, n) {
              return new i(e, e.ELEMENT_ARRAY_BUFFER, t, n);
            }),
            (i.create = function (e, t, n, r) {
              return new i(e, t, n, r);
            }),
            (i.prototype.destroy = function () {
              this.gl.deleteBuffer(this.buffer);
            }),
            (t.exports = i);
        },
        {},
      ],
      10: [
        function (e, t) {
          var n = e("./GLTexture"),
            i = function (e, t, n) {
              (this.gl = e),
                (this.framebuffer = e.createFramebuffer()),
                (this.stencil = null),
                (this.texture = null),
                (this.width = t || 100),
                (this.height = n || 100);
            };
          (i.prototype.enableTexture = function (e) {
            var t = this.gl;
            (this.texture = e || new n(t)),
              this.texture.bind(),
              this.bind(),
              t.framebufferTexture2D(
                t.FRAMEBUFFER,
                t.COLOR_ATTACHMENT0,
                t.TEXTURE_2D,
                this.texture.texture,
                0
              );
          }),
            (i.prototype.enableStencil = function () {
              if (!this.stencil) {
                var e = this.gl;
                (this.stencil = e.createRenderbuffer()),
                  e.bindRenderbuffer(e.RENDERBUFFER, this.stencil),
                  e.framebufferRenderbuffer(
                    e.FRAMEBUFFER,
                    e.DEPTH_STENCIL_ATTACHMENT,
                    e.RENDERBUFFER,
                    this.stencil
                  ),
                  e.renderbufferStorage(
                    e.RENDERBUFFER,
                    e.DEPTH_STENCIL,
                    this.width,
                    this.height
                  );
              }
            }),
            (i.prototype.clear = function (e, t, n, i) {
              this.bind();
              var r = this.gl;
              r.clearColor(e, t, n, i),
                r.clear(r.COLOR_BUFFER_BIT | r.DEPTH_BUFFER_BIT);
            }),
            (i.prototype.bind = function () {
              var e = this.gl;
              e.bindFramebuffer(e.FRAMEBUFFER, this.framebuffer);
            }),
            (i.prototype.unbind = function () {
              var e = this.gl;
              e.bindFramebuffer(e.FRAMEBUFFER, null);
            }),
            (i.prototype.resize = function (e, t) {
              var n = this.gl;
              (this.width = e),
                (this.height = t),
                this.texture && this.texture.uploadData(null, e, t),
                this.stencil &&
                  (n.bindRenderbuffer(n.RENDERBUFFER, this.stencil),
                  n.renderbufferStorage(n.RENDERBUFFER, n.DEPTH_STENCIL, e, t));
            }),
            (i.prototype.destroy = function () {
              var e = this.gl;
              this.texture && this.texture.destroy(),
                e.deleteFramebuffer(this.framebuffer),
                (this.gl = null),
                (this.stencil = null),
                (this.texture = null);
            }),
            (i.createRGBA = function (e, t, r) {
              var s = n.fromData(e, null, t, r);
              s.enableNearestScaling(), s.enableWrapClamp();
              var o = new i(e, t, r);
              return o.enableTexture(s), o.unbind(), o;
            }),
            (i.createFloat32 = function (e, t, r, s) {
              var o = new n.fromData(e, s, t, r);
              o.enableNearestScaling(), o.enableWrapClamp();
              var a = new i(e, t, r);
              return a.enableTexture(o), a.unbind(), a;
            }),
            (t.exports = i);
        },
        { "./GLTexture": 12 },
      ],
      11: [
        function (e, t) {
          var n = e("./shader/compileProgram"),
            i = e("./shader/extractAttributes"),
            r = e("./shader/extractUniforms"),
            s = e("./shader/setPrecision"),
            o = e("./shader/generateUniformAccessObject"),
            a = function (e, t, a, l, c) {
              (this.gl = e),
                l && ((t = s(t, l)), (a = s(a, l))),
                (this.program = n(e, t, a, c)),
                (this.attributes = i(e, this.program)),
                (this.uniformData = r(e, this.program)),
                (this.uniforms = o(e, this.uniformData));
            };
          (a.prototype.bind = function () {
            this.gl.useProgram(this.program);
          }),
            (a.prototype.destroy = function () {
              (this.attributes = null),
                (this.uniformData = null),
                (this.uniforms = null),
                this.gl.deleteProgram(this.program);
            }),
            (t.exports = a);
        },
        {
          "./shader/compileProgram": 17,
          "./shader/extractAttributes": 19,
          "./shader/extractUniforms": 20,
          "./shader/generateUniformAccessObject": 21,
          "./shader/setPrecision": 25,
        },
      ],
      12: [
        function (e, t) {
          var n = function (e, t, n, i, r) {
            (this.gl = e),
              (this.texture = e.createTexture()),
              (this.mipmap = !1),
              (this.premultiplyAlpha = !1),
              (this.width = t || -1),
              (this.height = n || -1),
              (this.format = i || e.RGBA),
              (this.type = r || e.UNSIGNED_BYTE);
          };
          n.prototype.upload = function (e) {
            this.bind();
            var t = this.gl;
            t.pixelStorei(
              t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
              this.premultiplyAlpha
            );
            var n = e.videoWidth || e.width,
              i = e.videoHeight || e.height;
            i !== this.height || n !== this.width
              ? t.texImage2D(
                  t.TEXTURE_2D,
                  0,
                  this.format,
                  this.format,
                  this.type,
                  e
                )
              : t.texSubImage2D(
                  t.TEXTURE_2D,
                  0,
                  0,
                  0,
                  this.format,
                  this.type,
                  e
                ),
              (this.width = n),
              (this.height = i);
          };
          var i = !1;
          (n.prototype.uploadData = function (e, t, n) {
            this.bind();
            var r = this.gl;
            if (e instanceof Float32Array) {
              if (!i) {
                if (!r.getExtension("OES_texture_float"))
                  throw new Error("floating point textures not available");
                i = !0;
              }
              this.type = r.FLOAT;
            } else this.type = this.type || r.UNSIGNED_BYTE;
            r.pixelStorei(
              r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
              this.premultiplyAlpha
            ),
              t !== this.width || n !== this.height
                ? r.texImage2D(
                    r.TEXTURE_2D,
                    0,
                    this.format,
                    t,
                    n,
                    0,
                    this.format,
                    this.type,
                    e || null
                  )
                : r.texSubImage2D(
                    r.TEXTURE_2D,
                    0,
                    0,
                    0,
                    t,
                    n,
                    this.format,
                    this.type,
                    e || null
                  ),
              (this.width = t),
              (this.height = n);
          }),
            (n.prototype.bind = function (e) {
              var t = this.gl;
              void 0 !== e && t.activeTexture(t.TEXTURE0 + e),
                t.bindTexture(t.TEXTURE_2D, this.texture);
            }),
            (n.prototype.unbind = function () {
              var e = this.gl;
              e.bindTexture(e.TEXTURE_2D, null);
            }),
            (n.prototype.minFilter = function (e) {
              var t = this.gl;
              this.bind(),
                this.mipmap
                  ? t.texParameteri(
                      t.TEXTURE_2D,
                      t.TEXTURE_MIN_FILTER,
                      e ? t.LINEAR_MIPMAP_LINEAR : t.NEAREST_MIPMAP_NEAREST
                    )
                  : t.texParameteri(
                      t.TEXTURE_2D,
                      t.TEXTURE_MIN_FILTER,
                      e ? t.LINEAR : t.NEAREST
                    );
            }),
            (n.prototype.magFilter = function (e) {
              var t = this.gl;
              this.bind(),
                t.texParameteri(
                  t.TEXTURE_2D,
                  t.TEXTURE_MAG_FILTER,
                  e ? t.LINEAR : t.NEAREST
                );
            }),
            (n.prototype.enableMipmap = function () {
              var e = this.gl;
              this.bind(), (this.mipmap = !0), e.generateMipmap(e.TEXTURE_2D);
            }),
            (n.prototype.enableLinearScaling = function () {
              this.minFilter(!0), this.magFilter(!0);
            }),
            (n.prototype.enableNearestScaling = function () {
              this.minFilter(!1), this.magFilter(!1);
            }),
            (n.prototype.enableWrapClamp = function () {
              var e = this.gl;
              this.bind(),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_S,
                  e.CLAMP_TO_EDGE
                ),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_T,
                  e.CLAMP_TO_EDGE
                );
            }),
            (n.prototype.enableWrapRepeat = function () {
              var e = this.gl;
              this.bind(),
                e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.REPEAT),
                e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.REPEAT);
            }),
            (n.prototype.enableWrapMirrorRepeat = function () {
              var e = this.gl;
              this.bind(),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_S,
                  e.MIRRORED_REPEAT
                ),
                e.texParameteri(
                  e.TEXTURE_2D,
                  e.TEXTURE_WRAP_T,
                  e.MIRRORED_REPEAT
                );
            }),
            (n.prototype.destroy = function () {
              this.gl.deleteTexture(this.texture);
            }),
            (n.fromSource = function (e, t, i) {
              var r = new n(e);
              return (r.premultiplyAlpha = i || !1), r.upload(t), r;
            }),
            (n.fromData = function (e, t, i, r) {
              var s = new n(e);
              return s.uploadData(t, i, r), s;
            }),
            (t.exports = n);
        },
        {},
      ],
      13: [
        function (e, t) {
          function n(e, t) {
            if (
              ((this.nativeVaoExtension = null),
              n.FORCE_NATIVE ||
                (this.nativeVaoExtension =
                  e.getExtension("OES_vertex_array_object") ||
                  e.getExtension("MOZ_OES_vertex_array_object") ||
                  e.getExtension("WEBKIT_OES_vertex_array_object")),
              (this.nativeState = t),
              this.nativeVaoExtension)
            ) {
              this.nativeVao = this.nativeVaoExtension.createVertexArrayOES();
              var i = e.getParameter(e.MAX_VERTEX_ATTRIBS);
              this.nativeState = {
                tempAttribState: new Array(i),
                attribState: new Array(i),
              };
            }
            (this.gl = e),
              (this.attributes = []),
              (this.indexBuffer = null),
              (this.dirty = !1);
          }
          var i = e("./setVertexAttribArrays");
          (n.prototype.constructor = n),
            (t.exports = n),
            (n.FORCE_NATIVE = !1),
            (n.prototype.bind = function () {
              return (
                this.nativeVao
                  ? (this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),
                    this.dirty && ((this.dirty = !1), this.activate()))
                  : this.activate(),
                this
              );
            }),
            (n.prototype.unbind = function () {
              return (
                this.nativeVao &&
                  this.nativeVaoExtension.bindVertexArrayOES(null),
                this
              );
            }),
            (n.prototype.activate = function () {
              for (
                var e = this.gl, t = null, n = 0;
                n < this.attributes.length;
                n++
              ) {
                var r = this.attributes[n];
                t !== r.buffer && (r.buffer.bind(), (t = r.buffer)),
                  e.vertexAttribPointer(
                    r.attribute.location,
                    r.attribute.size,
                    r.type || e.FLOAT,
                    r.normalized || !1,
                    r.stride || 0,
                    r.start || 0
                  );
              }
              return (
                i(e, this.attributes, this.nativeState),
                this.indexBuffer && this.indexBuffer.bind(),
                this
              );
            }),
            (n.prototype.addAttribute = function (e, t, n, i, r, s) {
              return (
                this.attributes.push({
                  buffer: e,
                  attribute: t,
                  location: t.location,
                  type: n || this.gl.FLOAT,
                  normalized: i || !1,
                  stride: r || 0,
                  start: s || 0,
                }),
                (this.dirty = !0),
                this
              );
            }),
            (n.prototype.addIndex = function (e) {
              return (this.indexBuffer = e), (this.dirty = !0), this;
            }),
            (n.prototype.clear = function () {
              return (
                this.nativeVao &&
                  this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),
                (this.attributes.length = 0),
                (this.indexBuffer = null),
                this
              );
            }),
            (n.prototype.draw = function (e, t, n) {
              var i = this.gl;
              return (
                this.indexBuffer
                  ? i.drawElements(
                      e,
                      t || this.indexBuffer.data.length,
                      i.UNSIGNED_SHORT,
                      2 * (n || 0)
                    )
                  : i.drawArrays(e, n, t || this.getSize()),
                this
              );
            }),
            (n.prototype.destroy = function () {
              (this.gl = null),
                (this.indexBuffer = null),
                (this.attributes = null),
                (this.nativeState = null),
                this.nativeVao &&
                  this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),
                (this.nativeVaoExtension = null),
                (this.nativeVao = null);
            }),
            (n.prototype.getSize = function () {
              var e = this.attributes[0];
              return e.buffer.data.length / (e.stride / 4 || e.attribute.size);
            });
        },
        { "./setVertexAttribArrays": 16 },
      ],
      14: [
        function (e, t) {
          var n = function (e, t) {
            var n =
              e.getContext("webgl", t) || e.getContext("experimental-webgl", t);
            if (!n)
              throw new Error(
                "This browser does not support webGL. Try using the canvas renderer"
              );
            return n;
          };
          t.exports = n;
        },
        {},
      ],
      15: [
        function (e, t) {
          var n = {
            createContext: e("./createContext"),
            setVertexAttribArrays: e("./setVertexAttribArrays"),
            GLBuffer: e("./GLBuffer"),
            GLFramebuffer: e("./GLFramebuffer"),
            GLShader: e("./GLShader"),
            GLTexture: e("./GLTexture"),
            VertexArrayObject: e("./VertexArrayObject"),
            shader: e("./shader"),
          };
          void 0 !== t && t.exports && (t.exports = n),
            "undefined" != typeof window &&
              ((window.PIXI = window.PIXI || {}), (window.PIXI.glCore = n));
        },
        {
          "./GLBuffer": 9,
          "./GLFramebuffer": 10,
          "./GLShader": 11,
          "./GLTexture": 12,
          "./VertexArrayObject": 13,
          "./createContext": 14,
          "./setVertexAttribArrays": 16,
          "./shader": 22,
        },
      ],
      16: [
        function (e, t) {
          var n = function (e, t, n) {
            var i;
            if (n) {
              var r = n.tempAttribState,
                s = n.attribState;
              for (i = 0; i < r.length; i++) r[i] = !1;
              for (i = 0; i < t.length; i++) r[t[i].attribute.location] = !0;
              for (i = 0; i < s.length; i++)
                s[i] !== r[i] &&
                  ((s[i] = r[i]),
                  n.attribState[i]
                    ? e.enableVertexAttribArray(i)
                    : e.disableVertexAttribArray(i));
            } else
              for (i = 0; i < t.length; i++) {
                var o = t[i];
                e.enableVertexAttribArray(o.attribute.location);
              }
          };
          t.exports = n;
        },
        {},
      ],
      17: [
        function (e, t) {
          var n = function (e, t, n, r) {
              var s = i(e, e.VERTEX_SHADER, t),
                o = i(e, e.FRAGMENT_SHADER, n),
                a = e.createProgram();
              if ((e.attachShader(a, s), e.attachShader(a, o), r))
                for (var l in r) e.bindAttribLocation(a, r[l], l);
              return (
                e.linkProgram(a),
                e.getProgramParameter(a, e.LINK_STATUS) ||
                  (console.error("Pixi.js Error: Could not initialize shader."),
                  console.error(
                    "gl.VALIDATE_STATUS",
                    e.getProgramParameter(a, e.VALIDATE_STATUS)
                  ),
                  console.error("gl.getError()", e.getError()),
                  "" !== e.getProgramInfoLog(a) &&
                    console.warn(
                      "Pixi.js Warning: gl.getProgramInfoLog()",
                      e.getProgramInfoLog(a)
                    ),
                  e.deleteProgram(a),
                  (a = null)),
                e.deleteShader(s),
                e.deleteShader(o),
                a
              );
            },
            i = function (e, t, n) {
              var i = e.createShader(t);
              return (
                e.shaderSource(i, n),
                e.compileShader(i),
                e.getShaderParameter(i, e.COMPILE_STATUS)
                  ? i
                  : (console.log(e.getShaderInfoLog(i)), null)
              );
            };
          t.exports = n;
        },
        {},
      ],
      18: [
        function (e, t) {
          var n = function (e, t) {
              switch (e) {
                case "float":
                  return 0;
                case "vec2":
                  return new Float32Array(2 * t);
                case "vec3":
                  return new Float32Array(3 * t);
                case "vec4":
                  return new Float32Array(4 * t);
                case "int":
                case "sampler2D":
                  return 0;
                case "ivec2":
                  return new Int32Array(2 * t);
                case "ivec3":
                  return new Int32Array(3 * t);
                case "ivec4":
                  return new Int32Array(4 * t);
                case "bool":
                  return !1;
                case "bvec2":
                  return i(2 * t);
                case "bvec3":
                  return i(3 * t);
                case "bvec4":
                  return i(4 * t);
                case "mat2":
                  return new Float32Array([1, 0, 0, 1]);
                case "mat3":
                  return new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]);
                case "mat4":
                  return new Float32Array([
                    1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1,
                  ]);
              }
            },
            i = function (e) {
              for (var t = new Array(e), n = 0; n < t.length; n++) t[n] = !1;
              return t;
            };
          t.exports = n;
        },
        {},
      ],
      19: [
        function (e, t) {
          var n = e("./mapType"),
            i = e("./mapSize"),
            r = function (e, t) {
              for (
                var r = {},
                  o = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES),
                  a = 0;
                o > a;
                a++
              ) {
                var l = e.getActiveAttrib(t, a),
                  c = n(e, l.type);
                r[l.name] = {
                  type: c,
                  size: i(c),
                  location: e.getAttribLocation(t, l.name),
                  pointer: s,
                };
              }
              return r;
            },
            s = function (e, t, n, i) {
              gl.vertexAttribPointer(
                this.location,
                this.size,
                e || gl.FLOAT,
                t || !1,
                n || 0,
                i || 0
              );
            };
          t.exports = r;
        },
        { "./mapSize": 23, "./mapType": 24 },
      ],
      20: [
        function (e, t) {
          var n = e("./mapType"),
            i = e("./defaultValue"),
            r = function (e, t) {
              for (
                var r = {},
                  s = e.getProgramParameter(t, e.ACTIVE_UNIFORMS),
                  o = 0;
                s > o;
                o++
              ) {
                var a = e.getActiveUniform(t, o),
                  l = a.name.replace(/\[.*?\]/, ""),
                  c = n(e, a.type);
                r[l] = {
                  type: c,
                  size: a.size,
                  location: e.getUniformLocation(t, l),
                  value: i(c, a.size),
                };
              }
              return r;
            };
          t.exports = r;
        },
        { "./defaultValue": 18, "./mapType": 24 },
      ],
      21: [
        function (e, t) {
          var n = function (e, t) {
              var n = { data: {} };
              n.gl = e;
              for (var o = Object.keys(t), a = 0; a < o.length; a++) {
                var l = o[a],
                  c = l.split("."),
                  u = c[c.length - 1],
                  h = s(c, n),
                  d = t[l];
                (h.data[u] = d),
                  (h.gl = e),
                  Object.defineProperty(h, u, { get: i(u), set: r(u, d) });
              }
              return n;
            },
            i = function (e) {
              var t = o.replace("%%", e);
              return new Function(t);
            },
            r = function (e, t) {
              var n,
                i = a.replace(/%%/g, e);
              return (
                (n = 1 === t.size ? l[t.type] : c[t.type]),
                n && (i += "\nthis.gl." + n + ";"),
                new Function("value", i)
              );
            },
            s = function (e, t) {
              for (var n = t, i = 0; i < e.length - 1; i++) {
                var r = n[e[i]] || { data: {} };
                (n[e[i]] = r), (n = r);
              }
              return n;
            },
            o = ["return this.data.%%.value;"].join("\n"),
            a = [
              "this.data.%%.value = value;",
              "var location = this.data.%%.location;",
            ].join("\n"),
            l = {
              float: "uniform1f(location, value)",
              vec2: "uniform2f(location, value[0], value[1])",
              vec3: "uniform3f(location, value[0], value[1], value[2])",
              vec4: "uniform4f(location, value[0], value[1], value[2], value[3])",
              int: "uniform1i(location, value)",
              ivec2: "uniform2i(location, value[0], value[1])",
              ivec3: "uniform3i(location, value[0], value[1], value[2])",
              ivec4:
                "uniform4i(location, value[0], value[1], value[2], value[3])",
              bool: "uniform1i(location, value)",
              bvec2: "uniform2i(location, value[0], value[1])",
              bvec3: "uniform3i(location, value[0], value[1], value[2])",
              bvec4:
                "uniform4i(location, value[0], value[1], value[2], value[3])",
              mat2: "uniformMatrix2fv(location, false, value)",
              mat3: "uniformMatrix3fv(location, false, value)",
              mat4: "uniformMatrix4fv(location, false, value)",
              sampler2D: "uniform1i(location, value)",
            },
            c = {
              float: "uniform1fv(location, value)",
              vec2: "uniform2fv(location, value)",
              vec3: "uniform3fv(location, value)",
              vec4: "uniform4fv(location, value)",
              int: "uniform1iv(location, value)",
              ivec2: "uniform2iv(location, value)",
              ivec3: "uniform3iv(location, value)",
              ivec4: "uniform4iv(location, value)",
              bool: "uniform1iv(location, value)",
              bvec2: "uniform2iv(location, value)",
              bvec3: "uniform3iv(location, value)",
              bvec4: "uniform4iv(location, value)",
              sampler2D: "uniform1iv(location, value)",
            };
          t.exports = n;
        },
        {},
      ],
      22: [
        function (e, t) {
          t.exports = {
            compileProgram: e("./compileProgram"),
            defaultValue: e("./defaultValue"),
            extractAttributes: e("./extractAttributes"),
            extractUniforms: e("./extractUniforms"),
            generateUniformAccessObject: e("./generateUniformAccessObject"),
            setPrecision: e("./setPrecision"),
            mapSize: e("./mapSize"),
            mapType: e("./mapType"),
          };
        },
        {
          "./compileProgram": 17,
          "./defaultValue": 18,
          "./extractAttributes": 19,
          "./extractUniforms": 20,
          "./generateUniformAccessObject": 21,
          "./mapSize": 23,
          "./mapType": 24,
          "./setPrecision": 25,
        },
      ],
      23: [
        function (e, t) {
          var n = function (e) {
              return i[e];
            },
            i = {
              float: 1,
              vec2: 2,
              vec3: 3,
              vec4: 4,
              int: 1,
              ivec2: 2,
              ivec3: 3,
              ivec4: 4,
              bool: 1,
              bvec2: 2,
              bvec3: 3,
              bvec4: 4,
              mat2: 4,
              mat3: 9,
              mat4: 16,
              sampler2D: 1,
            };
          t.exports = n;
        },
        {},
      ],
      24: [
        function (e, t) {
          var n = function (e, t) {
              if (!i) {
                var n = Object.keys(r);
                i = {};
                for (var s = 0; s < n.length; ++s) {
                  var o = n[s];
                  i[e[o]] = r[o];
                }
              }
              return i[t];
            },
            i = null,
            r = {
              FLOAT: "float",
              FLOAT_VEC2: "vec2",
              FLOAT_VEC3: "vec3",
              FLOAT_VEC4: "vec4",
              INT: "int",
              INT_VEC2: "ivec2",
              INT_VEC3: "ivec3",
              INT_VEC4: "ivec4",
              BOOL: "bool",
              BOOL_VEC2: "bvec2",
              BOOL_VEC3: "bvec3",
              BOOL_VEC4: "bvec4",
              FLOAT_MAT2: "mat2",
              FLOAT_MAT3: "mat3",
              FLOAT_MAT4: "mat4",
              SAMPLER_2D: "sampler2D",
            };
          t.exports = n;
        },
        {},
      ],
      25: [
        function (e, t) {
          var n = function (e, t) {
            return "precision" !== e.substring(0, 9)
              ? "precision " + t + " float;\n" + e
              : e;
          };
          t.exports = n;
        },
        {},
      ],
      26: [
        function (e, t) {
          function n() {
            throw new Error("setTimeout has not been defined");
          }
          function i() {
            throw new Error("clearTimeout has not been defined");
          }
          function r(e) {
            if (u === setTimeout) return setTimeout(e, 0);
            if ((u === n || !u) && setTimeout)
              return (u = setTimeout), setTimeout(e, 0);
            try {
              return u(e, 0);
            } catch (t) {
              try {
                return u.call(null, e, 0);
              } catch (t) {
                return u.call(this, e, 0);
              }
            }
          }
          function s(e) {
            if (h === clearTimeout) return clearTimeout(e);
            if ((h === i || !h) && clearTimeout)
              return (h = clearTimeout), clearTimeout(e);
            try {
              return h(e);
            } catch (t) {
              try {
                return h.call(null, e);
              } catch (t) {
                return h.call(this, e);
              }
            }
          }
          function o() {
            m &&
              p &&
              ((m = !1),
              p.length ? (f = p.concat(f)) : (g = -1),
              f.length && a());
          }
          function a() {
            if (!m) {
              var e = r(o);
              m = !0;
              for (var t = f.length; t; ) {
                for (p = f, f = []; ++g < t; ) p && p[g].run();
                (g = -1), (t = f.length);
              }
              (p = null), (m = !1), s(e);
            }
          }
          function l(e, t) {
            (this.fun = e), (this.array = t);
          }
          function c() {}
          var u,
            h,
            d = (t.exports = {});
          !(function () {
            try {
              u = "function" == typeof setTimeout ? setTimeout : n;
            } catch (e) {
              u = n;
            }
            try {
              h = "function" == typeof clearTimeout ? clearTimeout : i;
            } catch (e) {
              h = i;
            }
          })();
          var p,
            f = [],
            m = !1,
            g = -1;
          (d.nextTick = function (e) {
            var t = new Array(arguments.length - 1);
            if (arguments.length > 1)
              for (var n = 1; n < arguments.length; n++)
                t[n - 1] = arguments[n];
            f.push(new l(e, t)), 1 !== f.length || m || r(a);
          }),
            (l.prototype.run = function () {
              this.fun.apply(null, this.array);
            }),
            (d.title = "browser"),
            (d.browser = !0),
            (d.env = {}),
            (d.argv = []),
            (d.version = ""),
            (d.versions = {}),
            (d.on = c),
            (d.addListener = c),
            (d.once = c),
            (d.off = c),
            (d.removeListener = c),
            (d.removeAllListeners = c),
            (d.emit = c),
            (d.prependListener = c),
            (d.prependOnceListener = c),
            (d.listeners = function () {
              return [];
            }),
            (d.binding = function () {
              throw new Error("process.binding is not supported");
            }),
            (d.cwd = function () {
              return "/";
            }),
            (d.chdir = function () {
              throw new Error("process.chdir is not supported");
            }),
            (d.umask = function () {
              return 0;
            });
        },
        {},
      ],
      27: [
        function (t, n, i) {
          (function (t) {
            !(function (r) {
              function s(e) {
                throw new RangeError(R[e]);
              }
              function o(e, t) {
                for (var n = e.length, i = []; n--; ) i[n] = t(e[n]);
                return i;
              }
              function a(e, t) {
                var n = e.split("@"),
                  i = "";
                return (
                  n.length > 1 && ((i = n[0] + "@"), (e = n[1])),
                  (e = e.replace(M, ".")),
                  i + o(e.split("."), t).join(".")
                );
              }
              function l(e) {
                for (var t, n, i = [], r = 0, s = e.length; s > r; )
                  (t = e.charCodeAt(r++)),
                    t >= 55296 && 56319 >= t && s > r
                      ? ((n = e.charCodeAt(r++)),
                        56320 == (64512 & n)
                          ? i.push(((1023 & t) << 10) + (1023 & n) + 65536)
                          : (i.push(t), r--))
                      : i.push(t);
                return i;
              }
              function c(e) {
                return o(e, function (e) {
                  var t = "";
                  return (
                    e > 65535 &&
                      ((e -= 65536),
                      (t += U(((e >>> 10) & 1023) | 55296)),
                      (e = 56320 | (1023 & e))),
                    (t += U(e))
                  );
                }).join("");
              }
              function u(e) {
                return 10 > e - 48
                  ? e - 22
                  : 26 > e - 65
                  ? e - 65
                  : 26 > e - 97
                  ? e - 97
                  : C;
              }
              function h(e, t) {
                return e + 22 + 75 * (26 > e) - ((0 != t) << 5);
              }
              function d(e, t, n) {
                var i = 0;
                for (
                  e = n ? N(e / k) : e >> 1, e += N(e / t);
                  e > (L * S) >> 1;
                  i += C
                )
                  e = N(e / L);
                return N(i + ((L + 1) * e) / (e + E));
              }
              function p(e) {
                var t,
                  n,
                  i,
                  r,
                  o,
                  a,
                  l,
                  h,
                  p,
                  f,
                  m = [],
                  g = e.length,
                  v = 0,
                  _ = I,
                  y = P;
                for (n = e.lastIndexOf(A), 0 > n && (n = 0), i = 0; n > i; ++i)
                  e.charCodeAt(i) >= 128 && s("not-basic"),
                    m.push(e.charCodeAt(i));
                for (r = n > 0 ? n + 1 : 0; g > r; ) {
                  for (
                    o = v, a = 1, l = C;
                    r >= g && s("invalid-input"),
                      (h = u(e.charCodeAt(r++))),
                      (h >= C || h > N((x - v) / a)) && s("overflow"),
                      (v += h * a),
                      (p = y >= l ? T : l >= y + S ? S : l - y),
                      !(p > h);
                    l += C
                  )
                    (f = C - p), a > N(x / f) && s("overflow"), (a *= f);
                  (t = m.length + 1),
                    (y = d(v - o, t, 0 == o)),
                    N(v / t) > x - _ && s("overflow"),
                    (_ += N(v / t)),
                    (v %= t),
                    m.splice(v++, 0, _);
                }
                return c(m);
              }
              function f(e) {
                var t,
                  n,
                  i,
                  r,
                  o,
                  a,
                  c,
                  u,
                  p,
                  f,
                  m,
                  g,
                  v,
                  _,
                  y,
                  b = [];
                for (
                  e = l(e), g = e.length, t = I, n = 0, o = P, a = 0;
                  g > a;
                  ++a
                )
                  (m = e[a]) < 128 && b.push(U(m));
                for (i = r = b.length, r && b.push(A); g > i; ) {
                  for (c = x, a = 0; g > a; ++a)
                    (m = e[a]) >= t && c > m && (c = m);
                  for (
                    v = i + 1,
                      c - t > N((x - n) / v) && s("overflow"),
                      n += (c - t) * v,
                      t = c,
                      a = 0;
                    g > a;
                    ++a
                  )
                    if (
                      ((m = e[a]), t > m && ++n > x && s("overflow"), m == t)
                    ) {
                      for (
                        u = n, p = C;
                        (f = o >= p ? T : p >= o + S ? S : p - o), !(f > u);
                        p += C
                      )
                        (y = u - f),
                          (_ = C - f),
                          b.push(U(h(f + (y % _), 0))),
                          (u = N(y / _));
                      b.push(U(h(u, 0))), (o = d(n, v, i == r)), (n = 0), ++i;
                    }
                  ++n, ++t;
                }
                return b.join("");
              }
              function m(e) {
                return a(e, function (e) {
                  return O.test(e) ? p(e.slice(4).toLowerCase()) : e;
                });
              }
              function g(e) {
                return a(e, function (e) {
                  return D.test(e) ? "xn--" + f(e) : e;
                });
              }
              var v = "object" == typeof i && i && !i.nodeType && i,
                _ = "object" == typeof n && n && !n.nodeType && n,
                y = "object" == typeof t && t;
              (y.global !== y && y.window !== y && y.self !== y) || (r = y);
              var b,
                w,
                x = 2147483647,
                C = 36,
                T = 1,
                S = 26,
                E = 38,
                k = 700,
                P = 72,
                I = 128,
                A = "-",
                O = /^xn--/,
                D = /[^\x20-\x7E]/,
                M = /[\x2E\u3002\uFF0E\uFF61]/g,
                R = {
                  overflow: "Overflow: input needs wider integers to process",
                  "not-basic": "Illegal input >= 0x80 (not a basic code point)",
                  "invalid-input": "Invalid input",
                },
                L = C - T,
                N = Math.floor,
                U = String.fromCharCode;
              if (
                ((b = {
                  version: "1.4.1",
                  ucs2: { decode: l, encode: c },
                  decode: p,
                  encode: f,
                  toASCII: g,
                  toUnicode: m,
                }),
                "function" == typeof e && "object" == typeof e.amd && e.amd)
              )
                e("punycode", function () {
                  return b;
                });
              else if (v && _)
                if (n.exports == v) _.exports = b;
                else for (w in b) b.hasOwnProperty(w) && (v[w] = b[w]);
              else r.punycode = b;
            })(this);
          }.call(
            this,
            "undefined" != typeof global
              ? global
              : "undefined" != typeof self
              ? self
              : "undefined" != typeof window
              ? window
              : {}
          ));
        },
        {},
      ],
      28: [
        function (e, t) {
          "use strict";
          function n(e, t) {
            return Object.prototype.hasOwnProperty.call(e, t);
          }
          t.exports = function (e, t, r, s) {
            (t = t || "&"), (r = r || "=");
            var o = {};
            if ("string" != typeof e || 0 === e.length) return o;
            var a = /\+/g;
            e = e.split(t);
            var l = 1e3;
            s && "number" == typeof s.maxKeys && (l = s.maxKeys);
            var c = e.length;
            l > 0 && c > l && (c = l);
            for (var u = 0; c > u; ++u) {
              var h,
                d,
                p,
                f,
                m = e[u].replace(a, "%20"),
                g = m.indexOf(r);
              g >= 0
                ? ((h = m.substr(0, g)), (d = m.substr(g + 1)))
                : ((h = m), (d = "")),
                (p = decodeURIComponent(h)),
                (f = decodeURIComponent(d)),
                n(o, p)
                  ? i(o[p])
                    ? o[p].push(f)
                    : (o[p] = [o[p], f])
                  : (o[p] = f);
            }
            return o;
          };
          var i =
            Array.isArray ||
            function (e) {
              return "[object Array]" === Object.prototype.toString.call(e);
            };
        },
        {},
      ],
      29: [
        function (e, t) {
          "use strict";
          function n(e, t) {
            if (e.map) return e.map(t);
            for (var n = [], i = 0; i < e.length; i++) n.push(t(e[i], i));
            return n;
          }
          var i = function (e) {
            switch (typeof e) {
              case "string":
                return e;
              case "boolean":
                return e ? "true" : "false";
              case "number":
                return isFinite(e) ? e : "";
              default:
                return "";
            }
          };
          t.exports = function (e, t, o, a) {
            return (
              (t = t || "&"),
              (o = o || "="),
              null === e && (e = void 0),
              "object" == typeof e
                ? n(s(e), function (s) {
                    var a = encodeURIComponent(i(s)) + o;
                    return r(e[s])
                      ? n(e[s], function (e) {
                          return a + encodeURIComponent(i(e));
                        }).join(t)
                      : a + encodeURIComponent(i(e[s]));
                  }).join(t)
                : a
                ? encodeURIComponent(i(a)) + o + encodeURIComponent(i(e))
                : ""
            );
          };
          var r =
              Array.isArray ||
              function (e) {
                return "[object Array]" === Object.prototype.toString.call(e);
              },
            s =
              Object.keys ||
              function (e) {
                var t = [];
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && t.push(n);
                return t;
              };
        },
        {},
      ],
      30: [
        function (e, t, n) {
          "use strict";
          (n.decode = n.parse = e("./decode")),
            (n.encode = n.stringify = e("./encode"));
        },
        { "./decode": 28, "./encode": 29 },
      ],
      31: [
        function (e, t) {
          "use strict";
          t.exports = function (e, t, n) {
            var i,
              r = e.length;
            if (!(t >= r || 0 === n)) {
              n = t + n > r ? r - t : n;
              var s = r - n;
              for (i = t; s > i; ++i) e[i] = e[i + n];
              e.length = s;
            }
          };
        },
        {},
      ],
      32: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s =
              "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
                ? function (e) {
                    return typeof e;
                  }
                : function (e) {
                    return e &&
                      "function" == typeof Symbol &&
                      e.constructor === Symbol &&
                      e !== Symbol.prototype
                      ? "symbol"
                      : typeof e;
                  },
            o = e("mini-signals"),
            a = i(o),
            l = e("parse-uri"),
            c = i(l),
            u = e("./async"),
            h = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(u),
            d = e("./Resource"),
            p = i(d),
            f = /(#[\w-]+)?$/,
            m = (function () {
              function e() {
                var t = this,
                  n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : "",
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 10;
                r(this, e),
                  (this.baseUrl = n),
                  (this.progress = 0),
                  (this.loading = !1),
                  (this.defaultQueryString = ""),
                  (this._beforeMiddleware = []),
                  (this._afterMiddleware = []),
                  (this._resourcesParsing = []),
                  (this._boundLoadResource = function (e, n) {
                    return t._loadResource(e, n);
                  }),
                  (this._queue = h.queue(this._boundLoadResource, i)),
                  this._queue.pause(),
                  (this.resources = {}),
                  (this.onProgress = new a["default"]()),
                  (this.onError = new a["default"]()),
                  (this.onLoad = new a["default"]()),
                  (this.onStart = new a["default"]()),
                  (this.onComplete = new a["default"]());
              }
              return (
                (e.prototype.add = function (e, t, n, i) {
                  if (Array.isArray(e)) {
                    for (var r = 0; r < e.length; ++r) this.add(e[r]);
                    return this;
                  }
                  if (
                    ("object" === (void 0 === e ? "undefined" : s(e)) &&
                      ((i = t || e.callback || e.onComplete),
                      (n = e),
                      (t = e.url),
                      (e = e.name || e.key || e.url)),
                    "string" != typeof t && ((i = n), (n = t), (t = e)),
                    "string" != typeof t)
                  )
                    throw new Error("No url passed to add resource to loader.");
                  if (
                    ("function" == typeof n && ((i = n), (n = null)),
                    this.loading && (!n || !n.parentResource))
                  )
                    throw new Error(
                      "Cannot add resources while the loader is running."
                    );
                  if (this.resources[e])
                    throw new Error(
                      'Resource named "' + e + '" already exists.'
                    );
                  if (
                    ((t = this._prepareUrl(t)),
                    (this.resources[e] = new p["default"](e, t, n)),
                    "function" == typeof i &&
                      this.resources[e].onAfterMiddleware.once(i),
                    this.loading)
                  ) {
                    for (
                      var o = n.parentResource, a = [], l = 0;
                      l < o.children.length;
                      ++l
                    )
                      o.children[l].isComplete || a.push(o.children[l]);
                    var c = o.progressChunk * (a.length + 1),
                      u = c / (a.length + 2);
                    o.children.push(this.resources[e]), (o.progressChunk = u);
                    for (var h = 0; h < a.length; ++h) a[h].progressChunk = u;
                    this.resources[e].progressChunk = u;
                  }
                  return this._queue.push(this.resources[e]), this;
                }),
                (e.prototype.pre = function (e) {
                  return this._beforeMiddleware.push(e), this;
                }),
                (e.prototype.use = function (e) {
                  return this._afterMiddleware.push(e), this;
                }),
                (e.prototype.reset = function () {
                  (this.progress = 0),
                    (this.loading = !1),
                    this._queue.kill(),
                    this._queue.pause();
                  for (var e in this.resources) {
                    var t = this.resources[e];
                    t._onLoadBinding && t._onLoadBinding.detach(),
                      t.isLoading && t.abort();
                  }
                  return (this.resources = {}), this;
                }),
                (e.prototype.load = function (e) {
                  if (
                    ("function" == typeof e && this.onComplete.once(e),
                    this.loading)
                  )
                    return this;
                  for (
                    var t = 100 / this._queue._tasks.length, n = 0;
                    n < this._queue._tasks.length;
                    ++n
                  )
                    this._queue._tasks[n].data.progressChunk = t;
                  return (
                    (this.loading = !0),
                    this.onStart.dispatch(this),
                    this._queue.resume(),
                    this
                  );
                }),
                (e.prototype._prepareUrl = function (e) {
                  var t = c["default"](e, { strictMode: !0 }),
                    n = void 0;
                  if (
                    ((n =
                      t.protocol || !t.path || 0 === e.indexOf("//")
                        ? e
                        : this.baseUrl.length &&
                          this.baseUrl.lastIndexOf("/") !==
                            this.baseUrl.length - 1 &&
                          "/" !== e.charAt(0)
                        ? this.baseUrl + "/" + e
                        : this.baseUrl + e),
                    this.defaultQueryString)
                  ) {
                    var i = f.exec(n)[0];
                    (n = n.substr(0, n.length - i.length)),
                      (n +=
                        -1 !== n.indexOf("?")
                          ? "&" + this.defaultQueryString
                          : "?" + this.defaultQueryString),
                      (n += i);
                  }
                  return n;
                }),
                (e.prototype._loadResource = function (e, t) {
                  var n = this;
                  (e._dequeue = t),
                    h.eachSeries(
                      this._beforeMiddleware,
                      function (t, i) {
                        t.call(n, e, function () {
                          i(e.isComplete ? {} : null);
                        });
                      },
                      function () {
                        e.isComplete
                          ? n._onLoad(e)
                          : ((e._onLoadBinding = e.onComplete.once(
                              n._onLoad,
                              n
                            )),
                            e.load());
                      },
                      !0
                    );
                }),
                (e.prototype._onComplete = function () {
                  (this.loading = !1),
                    this.onComplete.dispatch(this, this.resources);
                }),
                (e.prototype._onLoad = function (e) {
                  var t = this;
                  (e._onLoadBinding = null),
                    this._resourcesParsing.push(e),
                    e._dequeue(),
                    h.eachSeries(
                      this._afterMiddleware,
                      function (n, i) {
                        n.call(t, e, i);
                      },
                      function () {
                        e.onAfterMiddleware.dispatch(e),
                          (t.progress += e.progressChunk),
                          t.onProgress.dispatch(t, e),
                          e.error
                            ? t.onError.dispatch(e.error, t, e)
                            : t.onLoad.dispatch(t, e),
                          t._resourcesParsing.splice(
                            t._resourcesParsing.indexOf(e),
                            1
                          ),
                          t._queue.idle() &&
                            0 === t._resourcesParsing.length &&
                            ((t.progress = 100), t._onComplete());
                      },
                      !0
                    );
                }),
                e
              );
            })();
          n["default"] = m;
        },
        { "./Resource": 33, "./async": 34, "mini-signals": 5, "parse-uri": 7 },
      ],
      33: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s() {}
          function o(e, t, n) {
            t && 0 === t.indexOf(".") && (t = t.substring(1)), t && (e[t] = n);
          }
          function a(e) {
            return e.toString().replace("object ", "");
          }
          n.__esModule = !0;
          var l = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            c = e("parse-uri"),
            u = i(c),
            h = e("mini-signals"),
            d = i(h),
            p = !(
              !window.XDomainRequest ||
              "withCredentials" in new XMLHttpRequest()
            ),
            f = null,
            m = (function () {
              function e(t, n, i) {
                if ((r(this, e), "string" != typeof t || "string" != typeof n))
                  throw new Error(
                    "Both name and url are required for constructing a resource."
                  );
                (i = i || {}),
                  (this._flags = 0),
                  this._setFlag(
                    e.STATUS_FLAGS.DATA_URL,
                    0 === n.indexOf("data:")
                  ),
                  (this.name = t),
                  (this.url = n),
                  (this.extension = this._getExtension()),
                  (this.data = null),
                  (this.crossOrigin =
                    !0 === i.crossOrigin ? "anonymous" : i.crossOrigin),
                  (this.loadType = i.loadType || this._determineLoadType()),
                  (this.xhrType = i.xhrType),
                  (this.metadata = i.metadata || {}),
                  (this.error = null),
                  (this.xhr = null),
                  (this.children = []),
                  (this.type = e.TYPE.UNKNOWN),
                  (this.progressChunk = 0),
                  (this._dequeue = s),
                  (this._onLoadBinding = null),
                  (this._boundComplete = this.complete.bind(this)),
                  (this._boundOnError = this._onError.bind(this)),
                  (this._boundOnProgress = this._onProgress.bind(this)),
                  (this._boundXhrOnError = this._xhrOnError.bind(this)),
                  (this._boundXhrOnAbort = this._xhrOnAbort.bind(this)),
                  (this._boundXhrOnLoad = this._xhrOnLoad.bind(this)),
                  (this._boundXdrOnTimeout = this._xdrOnTimeout.bind(this)),
                  (this.onStart = new d["default"]()),
                  (this.onProgress = new d["default"]()),
                  (this.onComplete = new d["default"]()),
                  (this.onAfterMiddleware = new d["default"]());
              }
              return (
                (e.setExtensionLoadType = function (t, n) {
                  o(e._loadTypeMap, t, n);
                }),
                (e.setExtensionXhrType = function (t, n) {
                  o(e._xhrTypeMap, t, n);
                }),
                (e.prototype.complete = function () {
                  if (
                    (this.data &&
                      this.data.removeEventListener &&
                      (this.data.removeEventListener(
                        "error",
                        this._boundOnError,
                        !1
                      ),
                      this.data.removeEventListener(
                        "load",
                        this._boundComplete,
                        !1
                      ),
                      this.data.removeEventListener(
                        "progress",
                        this._boundOnProgress,
                        !1
                      ),
                      this.data.removeEventListener(
                        "canplaythrough",
                        this._boundComplete,
                        !1
                      )),
                    this.xhr &&
                      (this.xhr.removeEventListener
                        ? (this.xhr.removeEventListener(
                            "error",
                            this._boundXhrOnError,
                            !1
                          ),
                          this.xhr.removeEventListener(
                            "abort",
                            this._boundXhrOnAbort,
                            !1
                          ),
                          this.xhr.removeEventListener(
                            "progress",
                            this._boundOnProgress,
                            !1
                          ),
                          this.xhr.removeEventListener(
                            "load",
                            this._boundXhrOnLoad,
                            !1
                          ))
                        : ((this.xhr.onerror = null),
                          (this.xhr.ontimeout = null),
                          (this.xhr.onprogress = null),
                          (this.xhr.onload = null))),
                    this.isComplete)
                  )
                    throw new Error(
                      "Complete called again for an already completed resource."
                    );
                  this._setFlag(e.STATUS_FLAGS.COMPLETE, !0),
                    this._setFlag(e.STATUS_FLAGS.LOADING, !1),
                    this.onComplete.dispatch(this);
                }),
                (e.prototype.abort = function (t) {
                  if (!this.error) {
                    if (((this.error = new Error(t)), this.xhr))
                      this.xhr.abort();
                    else if (this.xdr) this.xdr.abort();
                    else if (this.data)
                      if (this.data.src) this.data.src = e.EMPTY_GIF;
                      else
                        for (; this.data.firstChild; )
                          this.data.removeChild(this.data.firstChild);
                    this.complete();
                  }
                }),
                (e.prototype.load = function (t) {
                  var n = this;
                  if (!this.isLoading) {
                    if (this.isComplete)
                      return void (
                        t &&
                        setTimeout(function () {
                          return t(n);
                        }, 1)
                      );
                    switch (
                      (t && this.onComplete.once(t),
                      this._setFlag(e.STATUS_FLAGS.LOADING, !0),
                      this.onStart.dispatch(this),
                      (!1 !== this.crossOrigin &&
                        "string" == typeof this.crossOrigin) ||
                        (this.crossOrigin = this._determineCrossOrigin(
                          this.url
                        )),
                      this.loadType)
                    ) {
                      case e.LOAD_TYPE.IMAGE:
                        (this.type = e.TYPE.IMAGE), this._loadElement("image");
                        break;
                      case e.LOAD_TYPE.AUDIO:
                        (this.type = e.TYPE.AUDIO),
                          this._loadSourceElement("audio");
                        break;
                      case e.LOAD_TYPE.VIDEO:
                        (this.type = e.TYPE.VIDEO),
                          this._loadSourceElement("video");
                        break;
                      case e.LOAD_TYPE.XHR:
                      default:
                        p && this.crossOrigin
                          ? this._loadXdr()
                          : this._loadXhr();
                    }
                  }
                }),
                (e.prototype._hasFlag = function (e) {
                  return !!(this._flags & e);
                }),
                (e.prototype._setFlag = function (e, t) {
                  this._flags = t ? this._flags | e : this._flags & ~e;
                }),
                (e.prototype._loadElement = function (e) {
                  (this.data = this.metadata.loadElement
                    ? this.metadata.loadElement
                    : "image" === e && void 0 !== window.Image
                    ? new Image()
                    : document.createElement(e)),
                    this.crossOrigin &&
                      (this.data.crossOrigin = this.crossOrigin),
                    this.metadata.skipSource || (this.data.src = this.url),
                    this.data.addEventListener("error", this._boundOnError, !1),
                    this.data.addEventListener("load", this._boundComplete, !1),
                    this.data.addEventListener(
                      "progress",
                      this._boundOnProgress,
                      !1
                    );
                }),
                (e.prototype._loadSourceElement = function (e) {
                  if (
                    ((this.data = this.metadata.loadElement
                      ? this.metadata.loadElement
                      : "audio" === e && void 0 !== window.Audio
                      ? new Audio()
                      : document.createElement(e)),
                    null === this.data)
                  )
                    return void this.abort("Unsupported element: " + e);
                  if (!this.metadata.skipSource)
                    if (navigator.isCocoonJS)
                      this.data.src = Array.isArray(this.url)
                        ? this.url[0]
                        : this.url;
                    else if (Array.isArray(this.url))
                      for (
                        var t = this.metadata.mimeType, n = 0;
                        n < this.url.length;
                        ++n
                      )
                        this.data.appendChild(
                          this._createSource(
                            e,
                            this.url[n],
                            Array.isArray(t) ? t[n] : t
                          )
                        );
                    else {
                      var i = this.metadata.mimeType;
                      this.data.appendChild(
                        this._createSource(
                          e,
                          this.url,
                          Array.isArray(i) ? i[0] : i
                        )
                      );
                    }
                  this.data.addEventListener("error", this._boundOnError, !1),
                    this.data.addEventListener("load", this._boundComplete, !1),
                    this.data.addEventListener(
                      "progress",
                      this._boundOnProgress,
                      !1
                    ),
                    this.data.addEventListener(
                      "canplaythrough",
                      this._boundComplete,
                      !1
                    ),
                    this.data.load();
                }),
                (e.prototype._loadXhr = function () {
                  "string" != typeof this.xhrType &&
                    (this.xhrType = this._determineXhrType());
                  var t = (this.xhr = new XMLHttpRequest());
                  t.open("GET", this.url, !0),
                    (t.responseType =
                      this.xhrType === e.XHR_RESPONSE_TYPE.JSON ||
                      this.xhrType === e.XHR_RESPONSE_TYPE.DOCUMENT
                        ? e.XHR_RESPONSE_TYPE.TEXT
                        : this.xhrType),
                    t.addEventListener("error", this._boundXhrOnError, !1),
                    t.addEventListener("abort", this._boundXhrOnAbort, !1),
                    t.addEventListener("progress", this._boundOnProgress, !1),
                    t.addEventListener("load", this._boundXhrOnLoad, !1),
                    t.send();
                }),
                (e.prototype._loadXdr = function () {
                  "string" != typeof this.xhrType &&
                    (this.xhrType = this._determineXhrType());
                  var e = (this.xhr = new XDomainRequest());
                  (e.timeout = 5e3),
                    (e.onerror = this._boundXhrOnError),
                    (e.ontimeout = this._boundXdrOnTimeout),
                    (e.onprogress = this._boundOnProgress),
                    (e.onload = this._boundXhrOnLoad),
                    e.open("GET", this.url, !0),
                    setTimeout(function () {
                      return e.send();
                    }, 1);
                }),
                (e.prototype._createSource = function (e, t, n) {
                  n || (n = e + "/" + this._getExtension(t));
                  var i = document.createElement("source");
                  return (i.src = t), (i.type = n), i;
                }),
                (e.prototype._onError = function (e) {
                  this.abort(
                    "Failed to load element using: " + e.target.nodeName
                  );
                }),
                (e.prototype._onProgress = function (e) {
                  e &&
                    e.lengthComputable &&
                    this.onProgress.dispatch(this, e.loaded / e.total);
                }),
                (e.prototype._xhrOnError = function () {
                  var e = this.xhr;
                  this.abort(
                    a(e) +
                      " Request failed. Status: " +
                      e.status +
                      ', text: "' +
                      e.statusText +
                      '"'
                  );
                }),
                (e.prototype._xhrOnAbort = function () {
                  this.abort(a(this.xhr) + " Request was aborted by the user.");
                }),
                (e.prototype._xdrOnTimeout = function () {
                  this.abort(a(this.xhr) + " Request timed out.");
                }),
                (e.prototype._xhrOnLoad = function () {
                  var e = this.xhr,
                    t = "",
                    n = void 0 === e.status ? 200 : e.status;
                  if (
                    (("" !== e.responseType &&
                      "text" !== e.responseType &&
                      void 0 !== e.responseType) ||
                      (t = e.responseText),
                    0 === n && t.length > 0
                      ? (n = 200)
                      : 1223 === n && (n = 204),
                    2 != ((n / 100) | 0))
                  )
                    return void this.abort(
                      "[" +
                        e.status +
                        "] " +
                        e.statusText +
                        ": " +
                        e.responseURL
                    );
                  if (this.xhrType === i.XHR_RESPONSE_TYPE.TEXT)
                    (this.data = t), (this.type = i.TYPE.TEXT);
                  else if (this.xhrType === i.XHR_RESPONSE_TYPE.JSON)
                    try {
                      (this.data = JSON.parse(t)), (this.type = i.TYPE.JSON);
                    } catch (i) {
                      return void this.abort(
                        "Error trying to parse loaded json: " + i
                      );
                    }
                  else if (this.xhrType === i.XHR_RESPONSE_TYPE.DOCUMENT)
                    try {
                      if (window.DOMParser) {
                        var r = new DOMParser();
                        this.data = r.parseFromString(t, "text/xml");
                      } else {
                        var s = document.createElement("div");
                        (s.innerHTML = t), (this.data = s);
                      }
                      this.type = i.TYPE.XML;
                    } catch (i) {
                      return void this.abort(
                        "Error trying to parse loaded xml: " + i
                      );
                    }
                  else this.data = e.response || t;
                  this.complete();
                }),
                (e.prototype._determineCrossOrigin = function (e, t) {
                  if (0 === e.indexOf("data:")) return "";
                  (t = t || window.location),
                    f || (f = document.createElement("a")),
                    (f.href = e),
                    (e = u["default"](f.href, { strictMode: !0 }));
                  var n = (!e.port && "" === t.port) || e.port === t.port,
                    i = e.protocol ? e.protocol + ":" : "";
                  return e.host === t.hostname && n && i === t.protocol
                    ? ""
                    : "anonymous";
                }),
                (e.prototype._determineXhrType = function () {
                  return (
                    e._xhrTypeMap[this.extension] || e.XHR_RESPONSE_TYPE.TEXT
                  );
                }),
                (e.prototype._determineLoadType = function () {
                  return e._loadTypeMap[this.extension] || e.LOAD_TYPE.XHR;
                }),
                (e.prototype._getExtension = function () {
                  var e = this.url,
                    t = "";
                  if (this.isDataUrl) {
                    var n = e.indexOf("/");
                    t = e.substring(n + 1, e.indexOf(";", n));
                  } else {
                    var i = e.indexOf("?"),
                      r = e.indexOf("#"),
                      s = Math.min(
                        i > -1 ? i : e.length,
                        r > -1 ? r : e.length
                      );
                    (e = e.substring(0, s)),
                      (t = e.substring(e.lastIndexOf(".") + 1));
                  }
                  return t.toLowerCase();
                }),
                (e.prototype._getMimeFromXhrType = function (t) {
                  switch (t) {
                    case e.XHR_RESPONSE_TYPE.BUFFER:
                      return "application/octet-binary";
                    case e.XHR_RESPONSE_TYPE.BLOB:
                      return "application/blob";
                    case e.XHR_RESPONSE_TYPE.DOCUMENT:
                      return "application/xml";
                    case e.XHR_RESPONSE_TYPE.JSON:
                      return "application/json";
                    case e.XHR_RESPONSE_TYPE.DEFAULT:
                    case e.XHR_RESPONSE_TYPE.TEXT:
                    default:
                      return "text/plain";
                  }
                }),
                l(e, [
                  {
                    key: "isDataUrl",
                    get: function () {
                      return this._hasFlag(e.STATUS_FLAGS.DATA_URL);
                    },
                  },
                  {
                    key: "isComplete",
                    get: function () {
                      return this._hasFlag(e.STATUS_FLAGS.COMPLETE);
                    },
                  },
                  {
                    key: "isLoading",
                    get: function () {
                      return this._hasFlag(e.STATUS_FLAGS.LOADING);
                    },
                  },
                ]),
                e
              );
            })();
          (n["default"] = m),
            (m.STATUS_FLAGS = {
              NONE: 0,
              DATA_URL: 1,
              COMPLETE: 2,
              LOADING: 4,
            }),
            (m.TYPE = {
              UNKNOWN: 0,
              JSON: 1,
              XML: 2,
              IMAGE: 3,
              AUDIO: 4,
              VIDEO: 5,
              TEXT: 6,
            }),
            (m.LOAD_TYPE = { XHR: 1, IMAGE: 2, AUDIO: 3, VIDEO: 4 }),
            (m.XHR_RESPONSE_TYPE = {
              DEFAULT: "text",
              BUFFER: "arraybuffer",
              BLOB: "blob",
              DOCUMENT: "document",
              JSON: "json",
              TEXT: "text",
            }),
            (m._loadTypeMap = {
              gif: m.LOAD_TYPE.IMAGE,
              png: m.LOAD_TYPE.IMAGE,
              bmp: m.LOAD_TYPE.IMAGE,
              jpg: m.LOAD_TYPE.IMAGE,
              jpeg: m.LOAD_TYPE.IMAGE,
              tif: m.LOAD_TYPE.IMAGE,
              tiff: m.LOAD_TYPE.IMAGE,
              webp: m.LOAD_TYPE.IMAGE,
              tga: m.LOAD_TYPE.IMAGE,
              svg: m.LOAD_TYPE.IMAGE,
              "svg+xml": m.LOAD_TYPE.IMAGE,
              mp3: m.LOAD_TYPE.AUDIO,
              ogg: m.LOAD_TYPE.AUDIO,
              wav: m.LOAD_TYPE.AUDIO,
              mp4: m.LOAD_TYPE.VIDEO,
              webm: m.LOAD_TYPE.VIDEO,
            }),
            (m._xhrTypeMap = {
              xhtml: m.XHR_RESPONSE_TYPE.DOCUMENT,
              html: m.XHR_RESPONSE_TYPE.DOCUMENT,
              htm: m.XHR_RESPONSE_TYPE.DOCUMENT,
              xml: m.XHR_RESPONSE_TYPE.DOCUMENT,
              tmx: m.XHR_RESPONSE_TYPE.DOCUMENT,
              svg: m.XHR_RESPONSE_TYPE.DOCUMENT,
              tsx: m.XHR_RESPONSE_TYPE.DOCUMENT,
              gif: m.XHR_RESPONSE_TYPE.BLOB,
              png: m.XHR_RESPONSE_TYPE.BLOB,
              bmp: m.XHR_RESPONSE_TYPE.BLOB,
              jpg: m.XHR_RESPONSE_TYPE.BLOB,
              jpeg: m.XHR_RESPONSE_TYPE.BLOB,
              tif: m.XHR_RESPONSE_TYPE.BLOB,
              tiff: m.XHR_RESPONSE_TYPE.BLOB,
              webp: m.XHR_RESPONSE_TYPE.BLOB,
              tga: m.XHR_RESPONSE_TYPE.BLOB,
              json: m.XHR_RESPONSE_TYPE.JSON,
              text: m.XHR_RESPONSE_TYPE.TEXT,
              txt: m.XHR_RESPONSE_TYPE.TEXT,
              ttf: m.XHR_RESPONSE_TYPE.BUFFER,
              otf: m.XHR_RESPONSE_TYPE.BUFFER,
            }),
            (m.EMPTY_GIF =
              "data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");
        },
        { "mini-signals": 5, "parse-uri": 7 },
      ],
      34: [
        function (e, t, n) {
          "use strict";
          function i() {}
          function r(e, t, n, i) {
            var r = 0,
              s = e.length;
            !(function o(a) {
              return a || r === s
                ? void (n && n(a))
                : void (i
                    ? setTimeout(function () {
                        t(e[r++], o);
                      }, 1)
                    : t(e[r++], o));
            })();
          }
          function s(e) {
            return function () {
              if (null === e) throw new Error("Callback was already called.");
              var t = e;
              (e = null), t.apply(this, arguments);
            };
          }
          function o(e, t) {
            function n(e, t, n) {
              if (null != n && "function" != typeof n)
                throw new Error("task callback must be a function");
              if (((a.started = !0), null == e && a.idle()))
                return void setTimeout(function () {
                  return a.drain();
                }, 1);
              var r = { data: e, callback: "function" == typeof n ? n : i };
              t ? a._tasks.unshift(r) : a._tasks.push(r),
                setTimeout(function () {
                  return a.process();
                }, 1);
            }
            function r(e) {
              return function () {
                (o -= 1),
                  e.callback.apply(e, arguments),
                  null != arguments[0] && a.error(arguments[0], e.data),
                  o <= a.concurrency - a.buffer && a.unsaturated(),
                  a.idle() && a.drain(),
                  a.process();
              };
            }
            if (null == t) t = 1;
            else if (0 === t) throw new Error("Concurrency must not be zero");
            var o = 0,
              a = {
                _tasks: [],
                concurrency: t,
                saturated: i,
                unsaturated: i,
                buffer: t / 4,
                empty: i,
                drain: i,
                error: i,
                started: !1,
                paused: !1,
                push: function (e, t) {
                  n(e, !1, t);
                },
                kill: function () {
                  (o = 0), (a.drain = i), (a.started = !1), (a._tasks = []);
                },
                unshift: function (e, t) {
                  n(e, !0, t);
                },
                process: function () {
                  for (; !a.paused && o < a.concurrency && a._tasks.length; ) {
                    var t = a._tasks.shift();
                    0 === a._tasks.length && a.empty(),
                      (o += 1),
                      o === a.concurrency && a.saturated(),
                      e(t.data, s(r(t)));
                  }
                },
                length: function () {
                  return a._tasks.length;
                },
                running: function () {
                  return o;
                },
                idle: function () {
                  return a._tasks.length + o === 0;
                },
                pause: function () {
                  !0 !== a.paused && (a.paused = !0);
                },
                resume: function () {
                  if (!1 !== a.paused) {
                    a.paused = !1;
                    for (var e = 1; e <= a.concurrency; e++) a.process();
                  }
                },
              };
            return a;
          }
          (n.__esModule = !0), (n.eachSeries = r), (n.queue = o);
        },
        {},
      ],
      35: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            for (var t = "", n = 0; n < e.length; ) {
              for (
                var i = [0, 0, 0], s = [0, 0, 0, 0], o = 0;
                o < i.length;
                ++o
              )
                i[o] = n < e.length ? 255 & e.charCodeAt(n++) : 0;
              switch (
                ((s[0] = i[0] >> 2),
                (s[1] = ((3 & i[0]) << 4) | (i[1] >> 4)),
                (s[2] = ((15 & i[1]) << 2) | (i[2] >> 6)),
                (s[3] = 63 & i[2]),
                n - (e.length - 1))
              ) {
                case 2:
                  (s[3] = 64), (s[2] = 64);
                  break;
                case 1:
                  s[3] = 64;
              }
              for (var a = 0; a < s.length; ++a) t += r.charAt(s[a]);
            }
            return t;
          }
          (n.__esModule = !0), (n.encodeBinary = i);
          var r =
            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
        },
        {},
      ],
      36: [
        function (e, t) {
          "use strict";
          var n = e("./Loader")["default"],
            i = e("./Resource")["default"],
            r = e("./async"),
            s = e("./b64");
          (n.Resource = i),
            (n.async = r),
            (n.base64 = s),
            (t.exports = n),
            (t.exports["default"] = n);
        },
        { "./Loader": 32, "./Resource": 33, "./async": 34, "./b64": 35 },
      ],
      37: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r() {
            return function (e, t) {
              if (!e.data) return void t();
              if (e.xhr && e.xhrType === a["default"].XHR_RESPONSE_TYPE.BLOB)
                if (window.Blob && "string" != typeof e.data) {
                  if (0 === e.data.type.indexOf("image")) {
                    var n = (function () {
                      var n = u.createObjectURL(e.data);
                      return (
                        (e.blob = e.data),
                        (e.data = new Image()),
                        (e.data.src = n),
                        (e.type = a["default"].TYPE.IMAGE),
                        (e.data.onload = function () {
                          u.revokeObjectURL(n), (e.data.onload = null), t();
                        }),
                        { v: void 0 }
                      );
                    })();
                    if ("object" === (void 0 === n ? "undefined" : s(n)))
                      return n.v;
                  }
                } else {
                  var i = e.xhr.getResponseHeader("content-type");
                  if (i && 0 === i.indexOf("image"))
                    return (
                      (e.data = new Image()),
                      (e.data.src =
                        "data:" +
                        i +
                        ";base64," +
                        c["default"].encodeBinary(e.xhr.responseText)),
                      (e.type = a["default"].TYPE.IMAGE),
                      void (e.data.onload = function () {
                        (e.data.onload = null), t();
                      })
                    );
                }
              t();
            };
          }
          n.__esModule = !0;
          var s =
            "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
              ? function (e) {
                  return typeof e;
                }
              : function (e) {
                  return e &&
                    "function" == typeof Symbol &&
                    e.constructor === Symbol &&
                    e !== Symbol.prototype
                    ? "symbol"
                    : typeof e;
                };
          n.blobMiddlewareFactory = r;
          var o = e("../../Resource"),
            a = i(o),
            l = e("../../b64"),
            c = i(l),
            u = window.URL || window.webkitURL;
        },
        { "../../Resource": 33, "../../b64": 35 },
      ],
      38: [
        function (e, t, n) {
          "use strict";
          function i() {
            (this.protocol = null),
              (this.slashes = null),
              (this.auth = null),
              (this.host = null),
              (this.port = null),
              (this.hostname = null),
              (this.hash = null),
              (this.search = null),
              (this.query = null),
              (this.pathname = null),
              (this.path = null),
              (this.href = null);
          }
          function r(e, t, n) {
            if (e && c.isObject(e) && e instanceof i) return e;
            var r = new i();
            return r.parse(e, t, n), r;
          }
          function s(e) {
            return (
              c.isString(e) && (e = r(e)),
              e instanceof i ? e.format() : i.prototype.format.call(e)
            );
          }
          function o(e, t) {
            return r(e, !1, !0).resolve(t);
          }
          function a(e, t) {
            return e ? r(e, !1, !0).resolveObject(t) : t;
          }
          var l = e("punycode"),
            c = e("./util");
          (n.parse = r),
            (n.resolve = o),
            (n.resolveObject = a),
            (n.format = s),
            (n.Url = i);
          var u = /^([a-z0-9.+-]+:)/i,
            h = /:[0-9]*$/,
            d = /^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,
            p = ["<", ">", '"', "`", " ", "\r", "\n", "	"],
            f = ["{", "}", "|", "\\", "^", "`"].concat(p),
            m = ["'"].concat(f),
            g = ["%", "/", "?", ";", "#"].concat(m),
            v = ["/", "?", "#"],
            _ = /^[+a-z0-9A-Z_-]{0,63}$/,
            y = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,
            b = { javascript: !0, "javascript:": !0 },
            w = { javascript: !0, "javascript:": !0 },
            x = {
              http: !0,
              https: !0,
              ftp: !0,
              gopher: !0,
              file: !0,
              "http:": !0,
              "https:": !0,
              "ftp:": !0,
              "gopher:": !0,
              "file:": !0,
            },
            C = e("querystring");
          (i.prototype.parse = function (e, t, n) {
            if (!c.isString(e))
              throw new TypeError(
                "Parameter 'url' must be a string, not " + typeof e
              );
            var i = e.indexOf("?"),
              r = -1 !== i && i < e.indexOf("#") ? "?" : "#",
              s = e.split(r),
              o = /\\/g;
            (s[0] = s[0].replace(o, "/")), (e = s.join(r));
            var a = e;
            if (((a = a.trim()), !n && 1 === e.split("#").length)) {
              var h = d.exec(a);
              if (h)
                return (
                  (this.path = a),
                  (this.href = a),
                  (this.pathname = h[1]),
                  h[2]
                    ? ((this.search = h[2]),
                      (this.query = t
                        ? C.parse(this.search.substr(1))
                        : this.search.substr(1)))
                    : t && ((this.search = ""), (this.query = {})),
                  this
                );
            }
            var p = u.exec(a);
            if (p) {
              p = p[0];
              var f = p.toLowerCase();
              (this.protocol = f), (a = a.substr(p.length));
            }
            if (n || p || a.match(/^\/\/[^@\/]+@[^@\/]+/)) {
              var T = "//" === a.substr(0, 2);
              !T || (p && w[p]) || ((a = a.substr(2)), (this.slashes = !0));
            }
            if (!w[p] && (T || (p && !x[p]))) {
              for (var S = -1, E = 0; E < v.length; E++) {
                var k = a.indexOf(v[E]);
                -1 !== k && (-1 === S || S > k) && (S = k);
              }
              var P, I;
              (I = -1 === S ? a.lastIndexOf("@") : a.lastIndexOf("@", S)),
                -1 !== I &&
                  ((P = a.slice(0, I)),
                  (a = a.slice(I + 1)),
                  (this.auth = decodeURIComponent(P))),
                (S = -1);
              for (var E = 0; E < g.length; E++) {
                var k = a.indexOf(g[E]);
                -1 !== k && (-1 === S || S > k) && (S = k);
              }
              -1 === S && (S = a.length),
                (this.host = a.slice(0, S)),
                (a = a.slice(S)),
                this.parseHost(),
                (this.hostname = this.hostname || "");
              var A =
                "[" === this.hostname[0] &&
                "]" === this.hostname[this.hostname.length - 1];
              if (!A)
                for (
                  var O = this.hostname.split(/\./), E = 0, D = O.length;
                  D > E;
                  E++
                ) {
                  var M = O[E];
                  if (M && !M.match(_)) {
                    for (var R = "", L = 0, N = M.length; N > L; L++)
                      R += M.charCodeAt(L) > 127 ? "x" : M[L];
                    if (!R.match(_)) {
                      var U = O.slice(0, E),
                        B = O.slice(E + 1),
                        F = M.match(y);
                      F && (U.push(F[1]), B.unshift(F[2])),
                        B.length && (a = "/" + B.join(".") + a),
                        (this.hostname = U.join("."));
                      break;
                    }
                  }
                }
              (this.hostname =
                this.hostname.length > 255 ? "" : this.hostname.toLowerCase()),
                A || (this.hostname = l.toASCII(this.hostname));
              var j = this.port ? ":" + this.port : "",
                H = this.hostname || "";
              (this.host = H + j),
                (this.href += this.host),
                A &&
                  ((this.hostname = this.hostname.substr(
                    1,
                    this.hostname.length - 2
                  )),
                  "/" !== a[0] && (a = "/" + a));
            }
            if (!b[f])
              for (var E = 0, D = m.length; D > E; E++) {
                var $ = m[E];
                if (-1 !== a.indexOf($)) {
                  var z = encodeURIComponent($);
                  z === $ && (z = escape($)), (a = a.split($).join(z));
                }
              }
            var W = a.indexOf("#");
            -1 !== W && ((this.hash = a.substr(W)), (a = a.slice(0, W)));
            var G = a.indexOf("?");
            if (
              (-1 !== G
                ? ((this.search = a.substr(G)),
                  (this.query = a.substr(G + 1)),
                  t && (this.query = C.parse(this.query)),
                  (a = a.slice(0, G)))
                : t && ((this.search = ""), (this.query = {})),
              a && (this.pathname = a),
              x[f] && this.hostname && !this.pathname && (this.pathname = "/"),
              this.pathname || this.search)
            ) {
              var j = this.pathname || "",
                V = this.search || "";
              this.path = j + V;
            }
            return (this.href = this.format()), this;
          }),
            (i.prototype.format = function () {
              var e = this.auth || "";
              e &&
                ((e = encodeURIComponent(e)),
                (e = e.replace(/%3A/i, ":")),
                (e += "@"));
              var t = this.protocol || "",
                n = this.pathname || "",
                i = this.hash || "",
                r = !1,
                s = "";
              this.host
                ? (r = e + this.host)
                : this.hostname &&
                  ((r =
                    e +
                    (-1 === this.hostname.indexOf(":")
                      ? this.hostname
                      : "[" + this.hostname + "]")),
                  this.port && (r += ":" + this.port)),
                this.query &&
                  c.isObject(this.query) &&
                  Object.keys(this.query).length &&
                  (s = C.stringify(this.query));
              var o = this.search || (s && "?" + s) || "";
              return (
                t && ":" !== t.substr(-1) && (t += ":"),
                this.slashes || ((!t || x[t]) && !1 !== r)
                  ? ((r = "//" + (r || "")),
                    n && "/" !== n.charAt(0) && (n = "/" + n))
                  : r || (r = ""),
                i && "#" !== i.charAt(0) && (i = "#" + i),
                o && "?" !== o.charAt(0) && (o = "?" + o),
                (n = n.replace(/[?#]/g, function (e) {
                  return encodeURIComponent(e);
                })),
                (o = o.replace("#", "%23")),
                t + r + n + o + i
              );
            }),
            (i.prototype.resolve = function (e) {
              return this.resolveObject(r(e, !1, !0)).format();
            }),
            (i.prototype.resolveObject = function (e) {
              if (c.isString(e)) {
                var t = new i();
                t.parse(e, !1, !0), (e = t);
              }
              for (
                var n = new i(), r = Object.keys(this), s = 0;
                s < r.length;
                s++
              ) {
                var o = r[s];
                n[o] = this[o];
              }
              if (((n.hash = e.hash), "" === e.href))
                return (n.href = n.format()), n;
              if (e.slashes && !e.protocol) {
                for (var a = Object.keys(e), l = 0; l < a.length; l++) {
                  var u = a[l];
                  "protocol" !== u && (n[u] = e[u]);
                }
                return (
                  x[n.protocol] &&
                    n.hostname &&
                    !n.pathname &&
                    (n.path = n.pathname = "/"),
                  (n.href = n.format()),
                  n
                );
              }
              if (e.protocol && e.protocol !== n.protocol) {
                if (!x[e.protocol]) {
                  for (var h = Object.keys(e), d = 0; d < h.length; d++) {
                    var p = h[d];
                    n[p] = e[p];
                  }
                  return (n.href = n.format()), n;
                }
                if (((n.protocol = e.protocol), e.host || w[e.protocol]))
                  n.pathname = e.pathname;
                else {
                  for (
                    var f = (e.pathname || "").split("/");
                    f.length && !(e.host = f.shift());

                  );
                  e.host || (e.host = ""),
                    e.hostname || (e.hostname = ""),
                    "" !== f[0] && f.unshift(""),
                    f.length < 2 && f.unshift(""),
                    (n.pathname = f.join("/"));
                }
                if (
                  ((n.search = e.search),
                  (n.query = e.query),
                  (n.host = e.host || ""),
                  (n.auth = e.auth),
                  (n.hostname = e.hostname || e.host),
                  (n.port = e.port),
                  n.pathname || n.search)
                ) {
                  var m = n.pathname || "",
                    g = n.search || "";
                  n.path = m + g;
                }
                return (
                  (n.slashes = n.slashes || e.slashes), (n.href = n.format()), n
                );
              }
              var v = n.pathname && "/" === n.pathname.charAt(0),
                _ = e.host || (e.pathname && "/" === e.pathname.charAt(0)),
                y = _ || v || (n.host && e.pathname),
                b = y,
                C = (n.pathname && n.pathname.split("/")) || [],
                f = (e.pathname && e.pathname.split("/")) || [],
                T = n.protocol && !x[n.protocol];
              if (
                (T &&
                  ((n.hostname = ""),
                  (n.port = null),
                  n.host && ("" === C[0] ? (C[0] = n.host) : C.unshift(n.host)),
                  (n.host = ""),
                  e.protocol &&
                    ((e.hostname = null),
                    (e.port = null),
                    e.host &&
                      ("" === f[0] ? (f[0] = e.host) : f.unshift(e.host)),
                    (e.host = null)),
                  (y = y && ("" === f[0] || "" === C[0]))),
                _)
              )
                (n.host = e.host || "" === e.host ? e.host : n.host),
                  (n.hostname =
                    e.hostname || "" === e.hostname ? e.hostname : n.hostname),
                  (n.search = e.search),
                  (n.query = e.query),
                  (C = f);
              else if (f.length)
                C || (C = []),
                  C.pop(),
                  (C = C.concat(f)),
                  (n.search = e.search),
                  (n.query = e.query);
              else if (!c.isNullOrUndefined(e.search)) {
                if (T) {
                  n.hostname = n.host = C.shift();
                  var S =
                    !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@");
                  S &&
                    ((n.auth = S.shift()), (n.host = n.hostname = S.shift()));
                }
                return (
                  (n.search = e.search),
                  (n.query = e.query),
                  (c.isNull(n.pathname) && c.isNull(n.search)) ||
                    (n.path =
                      (n.pathname ? n.pathname : "") +
                      (n.search ? n.search : "")),
                  (n.href = n.format()),
                  n
                );
              }
              if (!C.length)
                return (
                  (n.pathname = null),
                  (n.path = n.search ? "/" + n.search : null),
                  (n.href = n.format()),
                  n
                );
              for (
                var E = C.slice(-1)[0],
                  k =
                    ((n.host || e.host || C.length > 1) &&
                      ("." === E || ".." === E)) ||
                    "" === E,
                  P = 0,
                  I = C.length;
                I >= 0;
                I--
              )
                (E = C[I]),
                  "." === E
                    ? C.splice(I, 1)
                    : ".." === E
                    ? (C.splice(I, 1), P++)
                    : P && (C.splice(I, 1), P--);
              if (!y && !b) for (; P--; P) C.unshift("..");
              !y ||
                "" === C[0] ||
                (C[0] && "/" === C[0].charAt(0)) ||
                C.unshift(""),
                k && "/" !== C.join("/").substr(-1) && C.push("");
              var A = "" === C[0] || (C[0] && "/" === C[0].charAt(0));
              if (T) {
                n.hostname = n.host = A ? "" : C.length ? C.shift() : "";
                var S =
                  !!(n.host && n.host.indexOf("@") > 0) && n.host.split("@");
                S && ((n.auth = S.shift()), (n.host = n.hostname = S.shift()));
              }
              return (
                (y = y || (n.host && C.length)),
                y && !A && C.unshift(""),
                C.length
                  ? (n.pathname = C.join("/"))
                  : ((n.pathname = null), (n.path = null)),
                (c.isNull(n.pathname) && c.isNull(n.search)) ||
                  (n.path =
                    (n.pathname ? n.pathname : "") +
                    (n.search ? n.search : "")),
                (n.auth = e.auth || n.auth),
                (n.slashes = n.slashes || e.slashes),
                (n.href = n.format()),
                n
              );
            }),
            (i.prototype.parseHost = function () {
              var e = this.host,
                t = h.exec(e);
              t &&
                ((t = t[0]),
                ":" !== t && (this.port = t.substr(1)),
                (e = e.substr(0, e.length - t.length))),
                e && (this.hostname = e);
            });
        },
        { "./util": 39, punycode: 27, querystring: 30 },
      ],
      39: [
        function (e, t) {
          "use strict";
          t.exports = {
            isString: function (e) {
              return "string" == typeof e;
            },
            isObject: function (e) {
              return "object" == typeof e && null !== e;
            },
            isNull: function (e) {
              return null === e;
            },
            isNullOrUndefined: function (e) {
              return null == e;
            },
          };
        },
        {},
      ],
      40: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = e("../core"),
            o = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(s),
            a = e("ismobilejs"),
            l = i(a),
            c = e("./accessibleTarget"),
            u = i(c);
          o.utils.mixins.delayMixin(o.DisplayObject.prototype, u["default"]);
          var h = 100,
            d = 0,
            p = 0,
            f = 2,
            m = (function () {
              function e(t) {
                r(this, e),
                  (!l["default"].tablet && !l["default"].phone) ||
                    navigator.isCocoonJS ||
                    this.createTouchHook();
                var n = document.createElement("div");
                (n.style.width = h + "px"),
                  (n.style.height = h + "px"),
                  (n.style.position = "absolute"),
                  (n.style.top = d + "px"),
                  (n.style.left = p + "px"),
                  (n.style.zIndex = f),
                  (this.div = n),
                  (this.pool = []),
                  (this.renderId = 0),
                  (this.debug = !1),
                  (this.renderer = t),
                  (this.children = []),
                  (this._onKeyDown = this._onKeyDown.bind(this)),
                  (this._onMouseMove = this._onMouseMove.bind(this)),
                  (this.isActive = !1),
                  (this.isMobileAccessabillity = !1),
                  window.addEventListener("keydown", this._onKeyDown, !1);
              }
              return (
                (e.prototype.createTouchHook = function () {
                  var e = this,
                    t = document.createElement("button");
                  (t.style.width = "1px"),
                    (t.style.height = "1px"),
                    (t.style.position = "absolute"),
                    (t.style.top = "-1000px"),
                    (t.style.left = "-1000px"),
                    (t.style.zIndex = 2),
                    (t.style.backgroundColor = "#FF0000"),
                    (t.title = "HOOK DIV"),
                    t.addEventListener("focus", function () {
                      (e.isMobileAccessabillity = !0),
                        e.activate(),
                        document.body.removeChild(t);
                    }),
                    document.body.appendChild(t);
                }),
                (e.prototype.activate = function () {
                  this.isActive ||
                    ((this.isActive = !0),
                    window.document.addEventListener(
                      "mousemove",
                      this._onMouseMove,
                      !0
                    ),
                    window.removeEventListener("keydown", this._onKeyDown, !1),
                    this.renderer.on("postrender", this.update, this),
                    this.renderer.view.parentNode &&
                      this.renderer.view.parentNode.appendChild(this.div));
                }),
                (e.prototype.deactivate = function () {
                  this.isActive &&
                    !this.isMobileAccessabillity &&
                    ((this.isActive = !1),
                    window.document.removeEventListener(
                      "mousemove",
                      this._onMouseMove
                    ),
                    window.addEventListener("keydown", this._onKeyDown, !1),
                    this.renderer.off("postrender", this.update),
                    this.div.parentNode &&
                      this.div.parentNode.removeChild(this.div));
                }),
                (e.prototype.updateAccessibleObjects = function (e) {
                  if (e.visible) {
                    e.accessible &&
                      e.interactive &&
                      (e._accessibleActive || this.addChild(e),
                      (e.renderId = this.renderId));
                    for (var t = e.children, n = t.length - 1; n >= 0; n--)
                      this.updateAccessibleObjects(t[n]);
                  }
                }),
                (e.prototype.update = function () {
                  if (this.renderer.renderingToScreen) {
                    this.updateAccessibleObjects(
                      this.renderer._lastObjectRendered
                    );
                    var e = this.renderer.view.getBoundingClientRect(),
                      t = e.width / this.renderer.width,
                      n = e.height / this.renderer.height,
                      i = this.div;
                    (i.style.left = e.left + "px"),
                      (i.style.top = e.top + "px"),
                      (i.style.width = this.renderer.width + "px"),
                      (i.style.height = this.renderer.height + "px");
                    for (var r = 0; r < this.children.length; r++) {
                      var s = this.children[r];
                      if (s.renderId !== this.renderId)
                        (s._accessibleActive = !1),
                          o.utils.removeItems(this.children, r, 1),
                          this.div.removeChild(s._accessibleDiv),
                          this.pool.push(s._accessibleDiv),
                          (s._accessibleDiv = null),
                          r--,
                          0 === this.children.length && this.deactivate();
                      else {
                        i = s._accessibleDiv;
                        var a = s.hitArea,
                          l = s.worldTransform;
                        s.hitArea
                          ? ((i.style.left = (l.tx + a.x * l.a) * t + "px"),
                            (i.style.top = (l.ty + a.y * l.d) * n + "px"),
                            (i.style.width = a.width * l.a * t + "px"),
                            (i.style.height = a.height * l.d * n + "px"))
                          : ((a = s.getBounds()),
                            this.capHitArea(a),
                            (i.style.left = a.x * t + "px"),
                            (i.style.top = a.y * n + "px"),
                            (i.style.width = a.width * t + "px"),
                            (i.style.height = a.height * n + "px"));
                      }
                    }
                    this.renderId++;
                  }
                }),
                (e.prototype.capHitArea = function (e) {
                  e.x < 0 && ((e.width += e.x), (e.x = 0)),
                    e.y < 0 && ((e.height += e.y), (e.y = 0)),
                    e.x + e.width > this.renderer.width &&
                      (e.width = this.renderer.width - e.x),
                    e.y + e.height > this.renderer.height &&
                      (e.height = this.renderer.height - e.y);
                }),
                (e.prototype.addChild = function (e) {
                  var t = this.pool.pop();
                  t ||
                    ((t = document.createElement("button")),
                    (t.style.width = h + "px"),
                    (t.style.height = h + "px"),
                    (t.style.backgroundColor = this.debug
                      ? "rgba(255,0,0,0.5)"
                      : "transparent"),
                    (t.style.position = "absolute"),
                    (t.style.zIndex = f),
                    (t.style.borderStyle = "none"),
                    t.addEventListener("click", this._onClick.bind(this)),
                    t.addEventListener("focus", this._onFocus.bind(this)),
                    t.addEventListener(
                      "focusout",
                      this._onFocusOut.bind(this)
                    )),
                    e.accessibleTitle
                      ? (t.title = e.accessibleTitle)
                      : e.accessibleTitle ||
                        e.accessibleHint ||
                        (t.title = "displayObject " + this.tabIndex),
                    e.accessibleHint &&
                      t.setAttribute("aria-label", e.accessibleHint),
                    (e._accessibleActive = !0),
                    (e._accessibleDiv = t),
                    (t.displayObject = e),
                    this.children.push(e),
                    this.div.appendChild(e._accessibleDiv),
                    (e._accessibleDiv.tabIndex = e.tabIndex);
                }),
                (e.prototype._onClick = function (e) {
                  var t = this.renderer.plugins.interaction;
                  t.dispatchEvent(e.target.displayObject, "click", t.eventData);
                }),
                (e.prototype._onFocus = function (e) {
                  var t = this.renderer.plugins.interaction;
                  t.dispatchEvent(
                    e.target.displayObject,
                    "mouseover",
                    t.eventData
                  );
                }),
                (e.prototype._onFocusOut = function (e) {
                  var t = this.renderer.plugins.interaction;
                  t.dispatchEvent(
                    e.target.displayObject,
                    "mouseout",
                    t.eventData
                  );
                }),
                (e.prototype._onKeyDown = function (e) {
                  9 === e.keyCode && this.activate();
                }),
                (e.prototype._onMouseMove = function () {
                  this.deactivate();
                }),
                (e.prototype.destroy = function () {
                  this.div = null;
                  for (var e = 0; e < this.children.length; e++)
                    this.children[e].div = null;
                  window.document.removeEventListener(
                    "mousemove",
                    this._onMouseMove
                  ),
                    window.removeEventListener("keydown", this._onKeyDown),
                    (this.pool = null),
                    (this.children = null),
                    (this.renderer = null);
                }),
                e
              );
            })();
          (n["default"] = m),
            o.WebGLRenderer.registerPlugin("accessibility", m),
            o.CanvasRenderer.registerPlugin("accessibility", m);
        },
        { "../core": 65, "./accessibleTarget": 41, ismobilejs: 4 },
      ],
      41: [
        function (e, t, n) {
          "use strict";
          (n.__esModule = !0),
            (n["default"] = {
              accessible: !1,
              accessibleTitle: null,
              accessibleHint: null,
              tabIndex: 0,
              _accessibleActive: !1,
              _accessibleDiv: !1,
            });
        },
        {},
      ],
      42: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./accessibleTarget");
          Object.defineProperty(n, "accessibleTarget", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./AccessibilityManager");
          Object.defineProperty(n, "AccessibilityManager", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
        },
        { "./AccessibilityManager": 40, "./accessibleTarget": 41 },
      ],
      43: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            o = e("./autoDetectRenderer"),
            a = e("./display/Container"),
            l = i(a),
            c = e("./ticker"),
            u = e("./settings"),
            h = i(u),
            d = e("./const"),
            p = (function () {
              function e(t, n, i, s, a) {
                r(this, e),
                  "number" == typeof t &&
                    (t = Object.assign(
                      {
                        width: t,
                        height: n || h["default"].RENDER_OPTIONS.height,
                        forceCanvas: !!s,
                        sharedTicker: !!a,
                      },
                      i
                    )),
                  (this._options = t =
                    Object.assign(
                      {
                        autoStart: !0,
                        sharedTicker: !1,
                        forceCanvas: !1,
                        sharedLoader: !1,
                      },
                      t
                    )),
                  (this.renderer = o.autoDetectRenderer(t)),
                  (this.stage = new l["default"]()),
                  (this._ticker = null),
                  (this.ticker = t.sharedTicker ? c.shared : new c.Ticker()),
                  t.autoStart && this.start();
              }
              return (
                (e.prototype.render = function () {
                  this.renderer.render(this.stage);
                }),
                (e.prototype.stop = function () {
                  this._ticker.stop();
                }),
                (e.prototype.start = function () {
                  this._ticker.start();
                }),
                (e.prototype.destroy = function (e) {
                  var t = this._ticker;
                  (this.ticker = null),
                    t.destroy(),
                    this.stage.destroy(),
                    (this.stage = null),
                    this.renderer.destroy(e),
                    (this.renderer = null),
                    (this._options = null);
                }),
                s(e, [
                  {
                    key: "ticker",
                    set: function (e) {
                      this._ticker && this._ticker.remove(this.render, this),
                        (this._ticker = e),
                        e && e.add(this.render, this, d.UPDATE_PRIORITY.LOW);
                    },
                    get: function () {
                      return this._ticker;
                    },
                  },
                  {
                    key: "view",
                    get: function () {
                      return this.renderer.view;
                    },
                  },
                  {
                    key: "screen",
                    get: function () {
                      return this.renderer.screen;
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = p;
        },
        {
          "./autoDetectRenderer": 45,
          "./const": 46,
          "./display/Container": 48,
          "./settings": 101,
          "./ticker": 120,
        },
      ],
      44: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function o(e, t) {
            if (e instanceof Array) {
              if ("precision" !== e[0].substring(0, 9)) {
                var n = e.slice(0);
                return n.unshift("precision " + t + " float;"), n;
              }
            } else if ("precision" !== e.substring(0, 9))
              return "precision " + t + " float;\n" + e;
            return e;
          }
          n.__esModule = !0;
          var a = e("pixi-gl-core"),
            l = e("./settings"),
            c = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(l),
            u = (function (e) {
              function t(n, s, a) {
                return (
                  i(this, t),
                  r(
                    this,
                    e.call(
                      this,
                      n,
                      o(s, c["default"].PRECISION_VERTEX),
                      o(a, c["default"].PRECISION_FRAGMENT)
                    )
                  )
                );
              }
              return s(t, e), t;
            })(a.GLShader);
          n["default"] = u;
        },
        { "./settings": 101, "pixi-gl-core": 15 },
      ],
      45: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t, n, i) {
            var r = e && e.forceCanvas;
            return (
              void 0 !== i && (r = i),
              !r && o.isWebGLSupported()
                ? new u["default"](e, t, n)
                : new l["default"](e, t, n)
            );
          }
          (n.__esModule = !0), (n.autoDetectRenderer = r);
          var s = e("./utils"),
            o = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(s),
            a = e("./renderers/canvas/CanvasRenderer"),
            l = i(a),
            c = e("./renderers/webgl/WebGLRenderer"),
            u = i(c);
        },
        {
          "./renderers/canvas/CanvasRenderer": 77,
          "./renderers/webgl/WebGLRenderer": 84,
          "./utils": 124,
        },
      ],
      46: [
        function (e, t, n) {
          "use strict";
          (n.__esModule = !0),
            (n.VERSION = "4.5.6"),
            (n.PI_2 = 2 * Math.PI),
            (n.RAD_TO_DEG = 180 / Math.PI),
            (n.DEG_TO_RAD = Math.PI / 180),
            (n.RENDERER_TYPE = { UNKNOWN: 0, WEBGL: 1, CANVAS: 2 }),
            (n.BLEND_MODES = {
              NORMAL: 0,
              ADD: 1,
              MULTIPLY: 2,
              SCREEN: 3,
              OVERLAY: 4,
              DARKEN: 5,
              LIGHTEN: 6,
              COLOR_DODGE: 7,
              COLOR_BURN: 8,
              HARD_LIGHT: 9,
              SOFT_LIGHT: 10,
              DIFFERENCE: 11,
              EXCLUSION: 12,
              HUE: 13,
              SATURATION: 14,
              COLOR: 15,
              LUMINOSITY: 16,
              NORMAL_NPM: 17,
              ADD_NPM: 18,
              SCREEN_NPM: 19,
            }),
            (n.DRAW_MODES = {
              POINTS: 0,
              LINES: 1,
              LINE_LOOP: 2,
              LINE_STRIP: 3,
              TRIANGLES: 4,
              TRIANGLE_STRIP: 5,
              TRIANGLE_FAN: 6,
            }),
            (n.SCALE_MODES = { LINEAR: 0, NEAREST: 1 }),
            (n.WRAP_MODES = { CLAMP: 0, REPEAT: 1, MIRRORED_REPEAT: 2 }),
            (n.GC_MODES = { AUTO: 0, MANUAL: 1 }),
            (n.URL_FILE_EXTENSION = /\.(\w{3,4})(?:$|\?|#)/i),
            (n.DATA_URI =
              /^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i),
            (n.SVG_SIZE =
              /<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i),
            (n.SHAPES = { POLY: 0, RECT: 1, CIRC: 2, ELIP: 3, RREC: 4 }),
            (n.PRECISION = { LOW: "lowp", MEDIUM: "mediump", HIGH: "highp" }),
            (n.TRANSFORM_MODE = { STATIC: 0, DYNAMIC: 1 }),
            (n.TEXT_GRADIENT = { LINEAR_VERTICAL: 0, LINEAR_HORIZONTAL: 1 }),
            (n.UPDATE_PRIORITY = {
              INTERACTION: 50,
              HIGH: 25,
              NORMAL: 0,
              LOW: -25,
              UTILITY: -50,
            });
        },
        {},
      ],
      47: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../math"),
            s = (function () {
              function e() {
                i(this, e),
                  (this.minX = 1 / 0),
                  (this.minY = 1 / 0),
                  (this.maxX = -1 / 0),
                  (this.maxY = -1 / 0),
                  (this.rect = null);
              }
              return (
                (e.prototype.isEmpty = function () {
                  return this.minX > this.maxX || this.minY > this.maxY;
                }),
                (e.prototype.clear = function () {
                  this.updateID++,
                    (this.minX = 1 / 0),
                    (this.minY = 1 / 0),
                    (this.maxX = -1 / 0),
                    (this.maxY = -1 / 0);
                }),
                (e.prototype.getRectangle = function (e) {
                  return this.minX > this.maxX || this.minY > this.maxY
                    ? r.Rectangle.EMPTY
                    : ((e = e || new r.Rectangle(0, 0, 1, 1)),
                      (e.x = this.minX),
                      (e.y = this.minY),
                      (e.width = this.maxX - this.minX),
                      (e.height = this.maxY - this.minY),
                      e);
                }),
                (e.prototype.addPoint = function (e) {
                  (this.minX = Math.min(this.minX, e.x)),
                    (this.maxX = Math.max(this.maxX, e.x)),
                    (this.minY = Math.min(this.minY, e.y)),
                    (this.maxY = Math.max(this.maxY, e.y));
                }),
                (e.prototype.addQuad = function (e) {
                  var t = this.minX,
                    n = this.minY,
                    i = this.maxX,
                    r = this.maxY,
                    s = e[0],
                    o = e[1];
                  (t = t > s ? s : t),
                    (n = n > o ? o : n),
                    (i = s > i ? s : i),
                    (r = o > r ? o : r),
                    (s = e[2]),
                    (o = e[3]),
                    (t = t > s ? s : t),
                    (n = n > o ? o : n),
                    (i = s > i ? s : i),
                    (r = o > r ? o : r),
                    (s = e[4]),
                    (o = e[5]),
                    (t = t > s ? s : t),
                    (n = n > o ? o : n),
                    (i = s > i ? s : i),
                    (r = o > r ? o : r),
                    (s = e[6]),
                    (o = e[7]),
                    (t = t > s ? s : t),
                    (n = n > o ? o : n),
                    (i = s > i ? s : i),
                    (r = o > r ? o : r),
                    (this.minX = t),
                    (this.minY = n),
                    (this.maxX = i),
                    (this.maxY = r);
                }),
                (e.prototype.addFrame = function (e, t, n, i, r) {
                  var s = e.worldTransform,
                    o = s.a,
                    a = s.b,
                    l = s.c,
                    c = s.d,
                    u = s.tx,
                    h = s.ty,
                    d = this.minX,
                    p = this.minY,
                    f = this.maxX,
                    m = this.maxY,
                    g = o * t + l * n + u,
                    v = a * t + c * n + h;
                  (d = d > g ? g : d),
                    (p = p > v ? v : p),
                    (f = g > f ? g : f),
                    (m = v > m ? v : m),
                    (g = o * i + l * n + u),
                    (v = a * i + c * n + h),
                    (d = d > g ? g : d),
                    (p = p > v ? v : p),
                    (f = g > f ? g : f),
                    (m = v > m ? v : m),
                    (g = o * t + l * r + u),
                    (v = a * t + c * r + h),
                    (d = d > g ? g : d),
                    (p = p > v ? v : p),
                    (f = g > f ? g : f),
                    (m = v > m ? v : m),
                    (g = o * i + l * r + u),
                    (v = a * i + c * r + h),
                    (d = d > g ? g : d),
                    (p = p > v ? v : p),
                    (f = g > f ? g : f),
                    (m = v > m ? v : m),
                    (this.minX = d),
                    (this.minY = p),
                    (this.maxX = f),
                    (this.maxY = m);
                }),
                (e.prototype.addVertices = function (e, t, n, i) {
                  for (
                    var r = e.worldTransform,
                      s = r.a,
                      o = r.b,
                      a = r.c,
                      l = r.d,
                      c = r.tx,
                      u = r.ty,
                      h = this.minX,
                      d = this.minY,
                      p = this.maxX,
                      f = this.maxY,
                      m = n;
                    i > m;
                    m += 2
                  ) {
                    var g = t[m],
                      v = t[m + 1],
                      _ = s * g + a * v + c,
                      y = l * v + o * g + u;
                    (h = h > _ ? _ : h),
                      (d = d > y ? y : d),
                      (p = _ > p ? _ : p),
                      (f = y > f ? y : f);
                  }
                  (this.minX = h),
                    (this.minY = d),
                    (this.maxX = p),
                    (this.maxY = f);
                }),
                (e.prototype.addBounds = function (e) {
                  var t = this.minX,
                    n = this.minY,
                    i = this.maxX,
                    r = this.maxY;
                  (this.minX = e.minX < t ? e.minX : t),
                    (this.minY = e.minY < n ? e.minY : n),
                    (this.maxX = e.maxX > i ? e.maxX : i),
                    (this.maxY = e.maxY > r ? e.maxY : r);
                }),
                (e.prototype.addBoundsMask = function (e, t) {
                  var n = e.minX > t.minX ? e.minX : t.minX,
                    i = e.minY > t.minY ? e.minY : t.minY,
                    r = e.maxX < t.maxX ? e.maxX : t.maxX,
                    s = e.maxY < t.maxY ? e.maxY : t.maxY;
                  if (r >= n && s >= i) {
                    var o = this.minX,
                      a = this.minY,
                      l = this.maxX,
                      c = this.maxY;
                    (this.minX = o > n ? n : o),
                      (this.minY = a > i ? i : a),
                      (this.maxX = r > l ? r : l),
                      (this.maxY = s > c ? s : c);
                  }
                }),
                (e.prototype.addBoundsArea = function (e, t) {
                  var n = e.minX > t.x ? e.minX : t.x,
                    i = e.minY > t.y ? e.minY : t.y,
                    r = e.maxX < t.x + t.width ? e.maxX : t.x + t.width,
                    s = e.maxY < t.y + t.height ? e.maxY : t.y + t.height;
                  if (r >= n && s >= i) {
                    var o = this.minX,
                      a = this.minY,
                      l = this.maxX,
                      c = this.maxY;
                    (this.minX = o > n ? n : o),
                      (this.minY = a > i ? i : a),
                      (this.maxX = r > l ? r : l),
                      (this.maxY = s > c ? s : c);
                  }
                }),
                e
              );
            })();
          n["default"] = s;
        },
        { "../math": 70 },
      ],
      48: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../utils"),
            l = e("./DisplayObject"),
            c = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(l),
            u = (function (e) {
              function t() {
                i(this, t);
                var n = r(this, e.call(this));
                return (n.children = []), n;
              }
              return (
                s(t, e),
                (t.prototype.onChildrenChange = function () {}),
                (t.prototype.addChild = function (e) {
                  var t = arguments.length;
                  if (t > 1)
                    for (var n = 0; t > n; n++) this.addChild(arguments[n]);
                  else
                    e.parent && e.parent.removeChild(e),
                      (e.parent = this),
                      (e.transform._parentID = -1),
                      this.children.push(e),
                      this._boundsID++,
                      this.onChildrenChange(this.children.length - 1),
                      e.emit("added", this);
                  return e;
                }),
                (t.prototype.addChildAt = function (e, t) {
                  if (0 > t || t > this.children.length)
                    throw new Error(
                      e +
                        "addChildAt: The index " +
                        t +
                        " supplied is out of bounds " +
                        this.children.length
                    );
                  return (
                    e.parent && e.parent.removeChild(e),
                    (e.parent = this),
                    (e.transform._parentID = -1),
                    this.children.splice(t, 0, e),
                    this._boundsID++,
                    this.onChildrenChange(t),
                    e.emit("added", this),
                    e
                  );
                }),
                (t.prototype.swapChildren = function (e, t) {
                  if (e !== t) {
                    var n = this.getChildIndex(e),
                      i = this.getChildIndex(t);
                    (this.children[n] = t),
                      (this.children[i] = e),
                      this.onChildrenChange(i > n ? n : i);
                  }
                }),
                (t.prototype.getChildIndex = function (e) {
                  var t = this.children.indexOf(e);
                  if (-1 === t)
                    throw new Error(
                      "The supplied DisplayObject must be a child of the caller"
                    );
                  return t;
                }),
                (t.prototype.setChildIndex = function (e, t) {
                  if (0 > t || t >= this.children.length)
                    throw new Error("The supplied index is out of bounds");
                  var n = this.getChildIndex(e);
                  a.removeItems(this.children, n, 1),
                    this.children.splice(t, 0, e),
                    this.onChildrenChange(t);
                }),
                (t.prototype.getChildAt = function (e) {
                  if (0 > e || e >= this.children.length)
                    throw new Error(
                      "getChildAt: Index (" + e + ") does not exist."
                    );
                  return this.children[e];
                }),
                (t.prototype.removeChild = function (e) {
                  var t = arguments.length;
                  if (t > 1)
                    for (var n = 0; t > n; n++) this.removeChild(arguments[n]);
                  else {
                    var i = this.children.indexOf(e);
                    if (-1 === i) return null;
                    (e.parent = null),
                      (e.transform._parentID = -1),
                      a.removeItems(this.children, i, 1),
                      this._boundsID++,
                      this.onChildrenChange(i),
                      e.emit("removed", this);
                  }
                  return e;
                }),
                (t.prototype.removeChildAt = function (e) {
                  var t = this.getChildAt(e);
                  return (
                    (t.parent = null),
                    (t.transform._parentID = -1),
                    a.removeItems(this.children, e, 1),
                    this._boundsID++,
                    this.onChildrenChange(e),
                    t.emit("removed", this),
                    t
                  );
                }),
                (t.prototype.removeChildren = function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    t = arguments[1],
                    n = e,
                    i = "number" == typeof t ? t : this.children.length,
                    r = i - n,
                    s = void 0;
                  if (r > 0 && i >= r) {
                    s = this.children.splice(n, r);
                    for (var o = 0; o < s.length; ++o)
                      (s[o].parent = null),
                        s[o].transform && (s[o].transform._parentID = -1);
                    this._boundsID++, this.onChildrenChange(e);
                    for (var a = 0; a < s.length; ++a)
                      s[a].emit("removed", this);
                    return s;
                  }
                  if (0 === r && 0 === this.children.length) return [];
                  throw new RangeError(
                    "removeChildren: numeric values are outside the acceptable range."
                  );
                }),
                (t.prototype.updateTransform = function () {
                  this._boundsID++,
                    this.transform.updateTransform(this.parent.transform),
                    (this.worldAlpha = this.alpha * this.parent.worldAlpha);
                  for (var e = 0, t = this.children.length; t > e; ++e) {
                    var n = this.children[e];
                    n.visible && n.updateTransform();
                  }
                }),
                (t.prototype.calculateBounds = function () {
                  this._bounds.clear(), this._calculateBounds();
                  for (var e = 0; e < this.children.length; e++) {
                    var t = this.children[e];
                    t.visible &&
                      t.renderable &&
                      (t.calculateBounds(),
                      t._mask
                        ? (t._mask.calculateBounds(),
                          this._bounds.addBoundsMask(
                            t._bounds,
                            t._mask._bounds
                          ))
                        : t.filterArea
                        ? this._bounds.addBoundsArea(t._bounds, t.filterArea)
                        : this._bounds.addBounds(t._bounds));
                  }
                  this._lastBoundsID = this._boundsID;
                }),
                (t.prototype._calculateBounds = function () {}),
                (t.prototype.renderWebGL = function (e) {
                  if (
                    this.visible &&
                    !(this.worldAlpha <= 0) &&
                    this.renderable
                  )
                    if (this._mask || this._filters)
                      this.renderAdvancedWebGL(e);
                    else {
                      this._renderWebGL(e);
                      for (var t = 0, n = this.children.length; n > t; ++t)
                        this.children[t].renderWebGL(e);
                    }
                }),
                (t.prototype.renderAdvancedWebGL = function (e) {
                  e.flush();
                  var t = this._filters,
                    n = this._mask;
                  if (t) {
                    this._enabledFilters || (this._enabledFilters = []),
                      (this._enabledFilters.length = 0);
                    for (var i = 0; i < t.length; i++)
                      t[i].enabled && this._enabledFilters.push(t[i]);
                    this._enabledFilters.length &&
                      e.filterManager.pushFilter(this, this._enabledFilters);
                  }
                  n && e.maskManager.pushMask(this, this._mask),
                    this._renderWebGL(e);
                  for (var r = 0, s = this.children.length; s > r; r++)
                    this.children[r].renderWebGL(e);
                  e.flush(),
                    n && e.maskManager.popMask(this, this._mask),
                    t &&
                      this._enabledFilters &&
                      this._enabledFilters.length &&
                      e.filterManager.popFilter();
                }),
                (t.prototype._renderWebGL = function () {}),
                (t.prototype._renderCanvas = function () {}),
                (t.prototype.renderCanvas = function (e) {
                  if (
                    this.visible &&
                    !(this.worldAlpha <= 0) &&
                    this.renderable
                  ) {
                    this._mask && e.maskManager.pushMask(this._mask),
                      this._renderCanvas(e);
                    for (var t = 0, n = this.children.length; n > t; ++t)
                      this.children[t].renderCanvas(e);
                    this._mask && e.maskManager.popMask(e);
                  }
                }),
                (t.prototype.destroy = function (t) {
                  e.prototype.destroy.call(this);
                  var n = "boolean" == typeof t ? t : t && t.children,
                    i = this.removeChildren(0, this.children.length);
                  if (n) for (var r = 0; r < i.length; ++r) i[r].destroy(t);
                }),
                o(t, [
                  {
                    key: "width",
                    get: function () {
                      return this.scale.x * this.getLocalBounds().width;
                    },
                    set: function (e) {
                      var t = this.getLocalBounds().width;
                      (this.scale.x = 0 !== t ? e / t : 1), (this._width = e);
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this.scale.y * this.getLocalBounds().height;
                    },
                    set: function (e) {
                      var t = this.getLocalBounds().height;
                      (this.scale.y = 0 !== t ? e / t : 1), (this._height = e);
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          (n["default"] = u),
            (u.prototype.containerUpdateTransform =
              u.prototype.updateTransform);
        },
        { "../utils": 124, "./DisplayObject": 49 },
      ],
      49: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("eventemitter3"),
            c = i(l),
            u = e("../const"),
            h = e("../settings"),
            d = i(h),
            p = e("./TransformStatic"),
            f = i(p),
            m = e("./Transform"),
            g = i(m),
            v = e("./Bounds"),
            _ = i(v),
            y = e("../math"),
            b = (function (e) {
              function t() {
                r(this, t);
                var n = s(this, e.call(this)),
                  i =
                    d["default"].TRANSFORM_MODE === u.TRANSFORM_MODE.STATIC
                      ? f["default"]
                      : g["default"];
                return (
                  (n.tempDisplayObjectParent = null),
                  (n.transform = new i()),
                  (n.alpha = 1),
                  (n.visible = !0),
                  (n.renderable = !0),
                  (n.parent = null),
                  (n.worldAlpha = 1),
                  (n.filterArea = null),
                  (n._filters = null),
                  (n._enabledFilters = null),
                  (n._bounds = new _["default"]()),
                  (n._boundsID = 0),
                  (n._lastBoundsID = -1),
                  (n._boundsRect = null),
                  (n._localBoundsRect = null),
                  (n._mask = null),
                  (n._destroyed = !1),
                  n
                );
              }
              return (
                o(t, e),
                (t.prototype.updateTransform = function () {
                  this.transform.updateTransform(this.parent.transform),
                    (this.worldAlpha = this.alpha * this.parent.worldAlpha),
                    this._bounds.updateID++;
                }),
                (t.prototype._recursivePostUpdateTransform = function () {
                  this.parent
                    ? (this.parent._recursivePostUpdateTransform(),
                      this.transform.updateTransform(this.parent.transform))
                    : this.transform.updateTransform(
                        this._tempDisplayObjectParent.transform
                      );
                }),
                (t.prototype.getBounds = function (e, t) {
                  return (
                    e ||
                      (this.parent
                        ? (this._recursivePostUpdateTransform(),
                          this.updateTransform())
                        : ((this.parent = this._tempDisplayObjectParent),
                          this.updateTransform(),
                          (this.parent = null))),
                    this._boundsID !== this._lastBoundsID &&
                      this.calculateBounds(),
                    t ||
                      (this._boundsRect ||
                        (this._boundsRect = new y.Rectangle()),
                      (t = this._boundsRect)),
                    this._bounds.getRectangle(t)
                  );
                }),
                (t.prototype.getLocalBounds = function (e) {
                  var t = this.transform,
                    n = this.parent;
                  (this.parent = null),
                    (this.transform = this._tempDisplayObjectParent.transform),
                    e ||
                      (this._localBoundsRect ||
                        (this._localBoundsRect = new y.Rectangle()),
                      (e = this._localBoundsRect));
                  var i = this.getBounds(!1, e);
                  return (this.parent = n), (this.transform = t), i;
                }),
                (t.prototype.toGlobal = function (e, t) {
                  return (
                    (arguments.length > 2 &&
                      void 0 !== arguments[2] &&
                      arguments[2]) ||
                      (this._recursivePostUpdateTransform(),
                      this.parent
                        ? this.displayObjectUpdateTransform()
                        : ((this.parent = this._tempDisplayObjectParent),
                          this.displayObjectUpdateTransform(),
                          (this.parent = null))),
                    this.worldTransform.apply(e, t)
                  );
                }),
                (t.prototype.toLocal = function (e, t, n, i) {
                  return (
                    t && (e = t.toGlobal(e, n, i)),
                    i ||
                      (this._recursivePostUpdateTransform(),
                      this.parent
                        ? this.displayObjectUpdateTransform()
                        : ((this.parent = this._tempDisplayObjectParent),
                          this.displayObjectUpdateTransform(),
                          (this.parent = null))),
                    this.worldTransform.applyInverse(e, n)
                  );
                }),
                (t.prototype.renderWebGL = function () {}),
                (t.prototype.renderCanvas = function () {}),
                (t.prototype.setParent = function (e) {
                  if (!e || !e.addChild)
                    throw new Error("setParent: Argument must be a Container");
                  return e.addChild(this), e;
                }),
                (t.prototype.setTransform = function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1,
                    i =
                      arguments.length > 3 && void 0 !== arguments[3]
                        ? arguments[3]
                        : 1,
                    r =
                      arguments.length > 4 && void 0 !== arguments[4]
                        ? arguments[4]
                        : 0,
                    s =
                      arguments.length > 5 && void 0 !== arguments[5]
                        ? arguments[5]
                        : 0,
                    o =
                      arguments.length > 6 && void 0 !== arguments[6]
                        ? arguments[6]
                        : 0,
                    a =
                      arguments.length > 7 && void 0 !== arguments[7]
                        ? arguments[7]
                        : 0,
                    l =
                      arguments.length > 8 && void 0 !== arguments[8]
                        ? arguments[8]
                        : 0;
                  return (
                    (this.position.x = e),
                    (this.position.y = t),
                    (this.scale.x = n || 1),
                    (this.scale.y = i || 1),
                    (this.rotation = r),
                    (this.skew.x = s),
                    (this.skew.y = o),
                    (this.pivot.x = a),
                    (this.pivot.y = l),
                    this
                  );
                }),
                (t.prototype.destroy = function () {
                  this.removeAllListeners(),
                    this.parent && this.parent.removeChild(this),
                    (this.transform = null),
                    (this.parent = null),
                    (this._bounds = null),
                    (this._currentBounds = null),
                    (this._mask = null),
                    (this.filterArea = null),
                    (this.interactive = !1),
                    (this.interactiveChildren = !1),
                    (this._destroyed = !0);
                }),
                a(t, [
                  {
                    key: "_tempDisplayObjectParent",
                    get: function () {
                      return (
                        null === this.tempDisplayObjectParent &&
                          (this.tempDisplayObjectParent = new t()),
                        this.tempDisplayObjectParent
                      );
                    },
                  },
                  {
                    key: "x",
                    get: function () {
                      return this.position.x;
                    },
                    set: function (e) {
                      this.transform.position.x = e;
                    },
                  },
                  {
                    key: "y",
                    get: function () {
                      return this.position.y;
                    },
                    set: function (e) {
                      this.transform.position.y = e;
                    },
                  },
                  {
                    key: "worldTransform",
                    get: function () {
                      return this.transform.worldTransform;
                    },
                  },
                  {
                    key: "localTransform",
                    get: function () {
                      return this.transform.localTransform;
                    },
                  },
                  {
                    key: "position",
                    get: function () {
                      return this.transform.position;
                    },
                    set: function (e) {
                      this.transform.position.copy(e);
                    },
                  },
                  {
                    key: "scale",
                    get: function () {
                      return this.transform.scale;
                    },
                    set: function (e) {
                      this.transform.scale.copy(e);
                    },
                  },
                  {
                    key: "pivot",
                    get: function () {
                      return this.transform.pivot;
                    },
                    set: function (e) {
                      this.transform.pivot.copy(e);
                    },
                  },
                  {
                    key: "skew",
                    get: function () {
                      return this.transform.skew;
                    },
                    set: function (e) {
                      this.transform.skew.copy(e);
                    },
                  },
                  {
                    key: "rotation",
                    get: function () {
                      return this.transform.rotation;
                    },
                    set: function (e) {
                      this.transform.rotation = e;
                    },
                  },
                  {
                    key: "worldVisible",
                    get: function () {
                      var e = this;
                      do {
                        if (!e.visible) return !1;
                        e = e.parent;
                      } while (e);
                      return !0;
                    },
                  },
                  {
                    key: "mask",
                    get: function () {
                      return this._mask;
                    },
                    set: function (e) {
                      this._mask && (this._mask.renderable = !0),
                        (this._mask = e),
                        this._mask && (this._mask.renderable = !1);
                    },
                  },
                  {
                    key: "filters",
                    get: function () {
                      return this._filters && this._filters.slice();
                    },
                    set: function (e) {
                      this._filters = e && e.slice();
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          (n["default"] = b),
            (b.prototype.displayObjectUpdateTransform =
              b.prototype.updateTransform);
        },
        {
          "../const": 46,
          "../math": 70,
          "../settings": 101,
          "./Bounds": 47,
          "./Transform": 50,
          "./TransformStatic": 52,
          eventemitter3: 3,
        },
      ],
      50: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../math"),
            l = e("./TransformBase"),
            c = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(l),
            u = (function (e) {
              function t() {
                i(this, t);
                var n = r(this, e.call(this));
                return (
                  (n.position = new a.Point(0, 0)),
                  (n.scale = new a.Point(1, 1)),
                  (n.skew = new a.ObservablePoint(n.updateSkew, n, 0, 0)),
                  (n.pivot = new a.Point(0, 0)),
                  (n._rotation = 0),
                  (n._cx = 1),
                  (n._sx = 0),
                  (n._cy = 0),
                  (n._sy = 1),
                  n
                );
              }
              return (
                s(t, e),
                (t.prototype.updateSkew = function () {
                  (this._cx = Math.cos(this._rotation + this.skew._y)),
                    (this._sx = Math.sin(this._rotation + this.skew._y)),
                    (this._cy = -Math.sin(this._rotation - this.skew._x)),
                    (this._sy = Math.cos(this._rotation - this.skew._x));
                }),
                (t.prototype.updateLocalTransform = function () {
                  var e = this.localTransform;
                  (e.a = this._cx * this.scale.x),
                    (e.b = this._sx * this.scale.x),
                    (e.c = this._cy * this.scale.y),
                    (e.d = this._sy * this.scale.y),
                    (e.tx =
                      this.position.x -
                      (this.pivot.x * e.a + this.pivot.y * e.c)),
                    (e.ty =
                      this.position.y -
                      (this.pivot.x * e.b + this.pivot.y * e.d));
                }),
                (t.prototype.updateTransform = function (e) {
                  var t = this.localTransform;
                  (t.a = this._cx * this.scale.x),
                    (t.b = this._sx * this.scale.x),
                    (t.c = this._cy * this.scale.y),
                    (t.d = this._sy * this.scale.y),
                    (t.tx =
                      this.position.x -
                      (this.pivot.x * t.a + this.pivot.y * t.c)),
                    (t.ty =
                      this.position.y -
                      (this.pivot.x * t.b + this.pivot.y * t.d));
                  var n = e.worldTransform,
                    i = this.worldTransform;
                  (i.a = t.a * n.a + t.b * n.c),
                    (i.b = t.a * n.b + t.b * n.d),
                    (i.c = t.c * n.a + t.d * n.c),
                    (i.d = t.c * n.b + t.d * n.d),
                    (i.tx = t.tx * n.a + t.ty * n.c + n.tx),
                    (i.ty = t.tx * n.b + t.ty * n.d + n.ty),
                    this._worldID++;
                }),
                (t.prototype.setFromMatrix = function (e) {
                  e.decompose(this);
                }),
                o(t, [
                  {
                    key: "rotation",
                    get: function () {
                      return this._rotation;
                    },
                    set: function (e) {
                      (this._rotation = e), this.updateSkew();
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          n["default"] = u;
        },
        { "../math": 70, "./TransformBase": 51 },
      ],
      51: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../math"),
            s = (function () {
              function e() {
                i(this, e),
                  (this.worldTransform = new r.Matrix()),
                  (this.localTransform = new r.Matrix()),
                  (this._worldID = 0),
                  (this._parentID = 0);
              }
              return (
                (e.prototype.updateLocalTransform = function () {}),
                (e.prototype.updateTransform = function (e) {
                  var t = e.worldTransform,
                    n = this.worldTransform,
                    i = this.localTransform;
                  (n.a = i.a * t.a + i.b * t.c),
                    (n.b = i.a * t.b + i.b * t.d),
                    (n.c = i.c * t.a + i.d * t.c),
                    (n.d = i.c * t.b + i.d * t.d),
                    (n.tx = i.tx * t.a + i.ty * t.c + t.tx),
                    (n.ty = i.tx * t.b + i.ty * t.d + t.ty),
                    this._worldID++;
                }),
                e
              );
            })();
          (n["default"] = s),
            (s.prototype.updateWorldTransform = s.prototype.updateTransform),
            (s.IDENTITY = new s());
        },
        { "../math": 70 },
      ],
      52: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../math"),
            l = e("./TransformBase"),
            c = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(l),
            u = (function (e) {
              function t() {
                i(this, t);
                var n = r(this, e.call(this));
                return (
                  (n.position = new a.ObservablePoint(n.onChange, n, 0, 0)),
                  (n.scale = new a.ObservablePoint(n.onChange, n, 1, 1)),
                  (n.pivot = new a.ObservablePoint(n.onChange, n, 0, 0)),
                  (n.skew = new a.ObservablePoint(n.updateSkew, n, 0, 0)),
                  (n._rotation = 0),
                  (n._cx = 1),
                  (n._sx = 0),
                  (n._cy = 0),
                  (n._sy = 1),
                  (n._localID = 0),
                  (n._currentLocalID = 0),
                  n
                );
              }
              return (
                s(t, e),
                (t.prototype.onChange = function () {
                  this._localID++;
                }),
                (t.prototype.updateSkew = function () {
                  (this._cx = Math.cos(this._rotation + this.skew._y)),
                    (this._sx = Math.sin(this._rotation + this.skew._y)),
                    (this._cy = -Math.sin(this._rotation - this.skew._x)),
                    (this._sy = Math.cos(this._rotation - this.skew._x)),
                    this._localID++;
                }),
                (t.prototype.updateLocalTransform = function () {
                  var e = this.localTransform;
                  this._localID !== this._currentLocalID &&
                    ((e.a = this._cx * this.scale._x),
                    (e.b = this._sx * this.scale._x),
                    (e.c = this._cy * this.scale._y),
                    (e.d = this._sy * this.scale._y),
                    (e.tx =
                      this.position._x -
                      (this.pivot._x * e.a + this.pivot._y * e.c)),
                    (e.ty =
                      this.position._y -
                      (this.pivot._x * e.b + this.pivot._y * e.d)),
                    (this._currentLocalID = this._localID),
                    (this._parentID = -1));
                }),
                (t.prototype.updateTransform = function (e) {
                  var t = this.localTransform;
                  if (
                    (this._localID !== this._currentLocalID &&
                      ((t.a = this._cx * this.scale._x),
                      (t.b = this._sx * this.scale._x),
                      (t.c = this._cy * this.scale._y),
                      (t.d = this._sy * this.scale._y),
                      (t.tx =
                        this.position._x -
                        (this.pivot._x * t.a + this.pivot._y * t.c)),
                      (t.ty =
                        this.position._y -
                        (this.pivot._x * t.b + this.pivot._y * t.d)),
                      (this._currentLocalID = this._localID),
                      (this._parentID = -1)),
                    this._parentID !== e._worldID)
                  ) {
                    var n = e.worldTransform,
                      i = this.worldTransform;
                    (i.a = t.a * n.a + t.b * n.c),
                      (i.b = t.a * n.b + t.b * n.d),
                      (i.c = t.c * n.a + t.d * n.c),
                      (i.d = t.c * n.b + t.d * n.d),
                      (i.tx = t.tx * n.a + t.ty * n.c + n.tx),
                      (i.ty = t.tx * n.b + t.ty * n.d + n.ty),
                      (this._parentID = e._worldID),
                      this._worldID++;
                  }
                }),
                (t.prototype.setFromMatrix = function (e) {
                  e.decompose(this), this._localID++;
                }),
                o(t, [
                  {
                    key: "rotation",
                    get: function () {
                      return this._rotation;
                    },
                    set: function (e) {
                      (this._rotation = e), this.updateSkew();
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          n["default"] = u;
        },
        { "../math": 70, "./TransformBase": 51 },
      ],
      53: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../display/Container"),
            l = i(a),
            c = e("../textures/RenderTexture"),
            u = i(c),
            h = e("../textures/Texture"),
            d = i(h),
            p = e("./GraphicsData"),
            f = i(p),
            m = e("../sprites/Sprite"),
            g = i(m),
            v = e("../math"),
            _ = e("../utils"),
            y = e("../const"),
            b = e("../display/Bounds"),
            w = i(b),
            x = e("./utils/bezierCurveTo"),
            C = i(x),
            T = e("../renderers/canvas/CanvasRenderer"),
            S = i(T),
            E = void 0,
            k = new v.Matrix(),
            P = new v.Point(),
            I = new Float32Array(4),
            A = new Float32Array(4),
            O = (function (e) {
              function t() {
                var n =
                  arguments.length > 0 &&
                  void 0 !== arguments[0] &&
                  arguments[0];
                r(this, t);
                var i = s(this, e.call(this));
                return (
                  (i.fillAlpha = 1),
                  (i.lineWidth = 0),
                  (i.nativeLines = n),
                  (i.lineColor = 0),
                  (i.graphicsData = []),
                  (i.tint = 16777215),
                  (i._prevTint = 16777215),
                  (i.blendMode = y.BLEND_MODES.NORMAL),
                  (i.currentPath = null),
                  (i._webGL = {}),
                  (i.isMask = !1),
                  (i.boundsPadding = 0),
                  (i._localBounds = new w["default"]()),
                  (i.dirty = 0),
                  (i.fastRectDirty = -1),
                  (i.clearDirty = 0),
                  (i.boundsDirty = -1),
                  (i.cachedSpriteDirty = !1),
                  (i._spriteRect = null),
                  (i._fastRect = !1),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype.clone = function () {
                  var e = new t();
                  (e.renderable = this.renderable),
                    (e.fillAlpha = this.fillAlpha),
                    (e.lineWidth = this.lineWidth),
                    (e.lineColor = this.lineColor),
                    (e.tint = this.tint),
                    (e.blendMode = this.blendMode),
                    (e.isMask = this.isMask),
                    (e.boundsPadding = this.boundsPadding),
                    (e.dirty = 0),
                    (e.cachedSpriteDirty = this.cachedSpriteDirty);
                  for (var n = 0; n < this.graphicsData.length; ++n)
                    e.graphicsData.push(this.graphicsData[n].clone());
                  return (
                    (e.currentPath = e.graphicsData[e.graphicsData.length - 1]),
                    e.updateLocalBounds(),
                    e
                  );
                }),
                (t.prototype.lineStyle = function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 0,
                    n =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : 1;
                  if (
                    ((this.lineWidth = e),
                    (this.lineColor = t),
                    (this.lineAlpha = n),
                    this.currentPath)
                  )
                    if (this.currentPath.shape.points.length) {
                      var i = new v.Polygon(
                        this.currentPath.shape.points.slice(-2)
                      );
                      (i.closed = !1), this.drawShape(i);
                    } else
                      (this.currentPath.lineWidth = this.lineWidth),
                        (this.currentPath.lineColor = this.lineColor),
                        (this.currentPath.lineAlpha = this.lineAlpha);
                  return this;
                }),
                (t.prototype.moveTo = function (e, t) {
                  var n = new v.Polygon([e, t]);
                  return (n.closed = !1), this.drawShape(n), this;
                }),
                (t.prototype.lineTo = function (e, t) {
                  return (
                    this.currentPath.shape.points.push(e, t), this.dirty++, this
                  );
                }),
                (t.prototype.quadraticCurveTo = function (e, t, n, i) {
                  this.currentPath
                    ? 0 === this.currentPath.shape.points.length &&
                      (this.currentPath.shape.points = [0, 0])
                    : this.moveTo(0, 0);
                  var r = this.currentPath.shape.points,
                    s = 0,
                    o = 0;
                  0 === r.length && this.moveTo(0, 0);
                  for (
                    var a = r[r.length - 2], l = r[r.length - 1], c = 1;
                    20 >= c;
                    ++c
                  ) {
                    var u = c / 20;
                    (s = a + (e - a) * u),
                      (o = l + (t - l) * u),
                      r.push(
                        s + (e + (n - e) * u - s) * u,
                        o + (t + (i - t) * u - o) * u
                      );
                  }
                  return this.dirty++, this;
                }),
                (t.prototype.bezierCurveTo = function (e, t, n, i, r, s) {
                  this.currentPath
                    ? 0 === this.currentPath.shape.points.length &&
                      (this.currentPath.shape.points = [0, 0])
                    : this.moveTo(0, 0);
                  var o = this.currentPath.shape.points,
                    a = o[o.length - 2],
                    l = o[o.length - 1];
                  return (
                    (o.length -= 2),
                    C["default"](a, l, e, t, n, i, r, s, o),
                    this.dirty++,
                    this
                  );
                }),
                (t.prototype.arcTo = function (e, t, n, i, r) {
                  this.currentPath
                    ? 0 === this.currentPath.shape.points.length &&
                      this.currentPath.shape.points.push(e, t)
                    : this.moveTo(e, t);
                  var s = this.currentPath.shape.points,
                    o = s[s.length - 2],
                    a = s[s.length - 1],
                    l = a - t,
                    c = o - e,
                    u = i - t,
                    h = n - e,
                    d = Math.abs(l * h - c * u);
                  if (1e-8 > d || 0 === r)
                    (s[s.length - 2] === e && s[s.length - 1] === t) ||
                      s.push(e, t);
                  else {
                    var p = l * l + c * c,
                      f = u * u + h * h,
                      m = l * u + c * h,
                      g = (r * Math.sqrt(p)) / d,
                      v = (r * Math.sqrt(f)) / d,
                      _ = (g * m) / p,
                      y = (v * m) / f,
                      b = g * h + v * c,
                      w = g * u + v * l,
                      x = c * (v + _),
                      C = l * (v + _),
                      T = h * (g + y),
                      S = u * (g + y),
                      E = Math.atan2(C - w, x - b),
                      k = Math.atan2(S - w, T - b);
                    this.arc(b + e, w + t, r, E, k, c * u > h * l);
                  }
                  return this.dirty++, this;
                }),
                (t.prototype.arc = function (e, t, n, i, r) {
                  var s =
                    arguments.length > 5 &&
                    void 0 !== arguments[5] &&
                    arguments[5];
                  if (i === r) return this;
                  !s && i >= r
                    ? (r += 2 * Math.PI)
                    : s && r >= i && (i += 2 * Math.PI);
                  var o = r - i,
                    a = 40 * Math.ceil(Math.abs(o) / (2 * Math.PI));
                  if (0 === o) return this;
                  var l = e + Math.cos(i) * n,
                    c = t + Math.sin(i) * n,
                    u = this.currentPath ? this.currentPath.shape.points : null;
                  u
                    ? (u[u.length - 2] === l && u[u.length - 1] === c) ||
                      u.push(l, c)
                    : (this.moveTo(l, c), (u = this.currentPath.shape.points));
                  for (
                    var h = o / (2 * a),
                      d = 2 * h,
                      p = Math.cos(h),
                      f = Math.sin(h),
                      m = a - 1,
                      g = (m % 1) / m,
                      v = 0;
                    m >= v;
                    ++v
                  ) {
                    var _ = v + g * v,
                      y = h + i + d * _,
                      b = Math.cos(y),
                      w = -Math.sin(y);
                    u.push((p * b + f * w) * n + e, (p * -w + f * b) * n + t);
                  }
                  return this.dirty++, this;
                }),
                (t.prototype.beginFill = function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0,
                    t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1;
                  return (
                    (this.filling = !0),
                    (this.fillColor = e),
                    (this.fillAlpha = t),
                    this.currentPath &&
                      this.currentPath.shape.points.length <= 2 &&
                      ((this.currentPath.fill = this.filling),
                      (this.currentPath.fillColor = this.fillColor),
                      (this.currentPath.fillAlpha = this.fillAlpha)),
                    this
                  );
                }),
                (t.prototype.endFill = function () {
                  return (
                    (this.filling = !1),
                    (this.fillColor = null),
                    (this.fillAlpha = 1),
                    this
                  );
                }),
                (t.prototype.drawRect = function (e, t, n, i) {
                  return this.drawShape(new v.Rectangle(e, t, n, i)), this;
                }),
                (t.prototype.drawRoundedRect = function (e, t, n, i, r) {
                  return (
                    this.drawShape(new v.RoundedRectangle(e, t, n, i, r)), this
                  );
                }),
                (t.prototype.drawCircle = function (e, t, n) {
                  return this.drawShape(new v.Circle(e, t, n)), this;
                }),
                (t.prototype.drawEllipse = function (e, t, n, i) {
                  return this.drawShape(new v.Ellipse(e, t, n, i)), this;
                }),
                (t.prototype.drawPolygon = function (e) {
                  var t = e,
                    n = !0;
                  if (
                    (t instanceof v.Polygon && ((n = t.closed), (t = t.points)),
                    !Array.isArray(t))
                  ) {
                    t = new Array(arguments.length);
                    for (var i = 0; i < t.length; ++i) t[i] = arguments[i];
                  }
                  var r = new v.Polygon(t);
                  return (r.closed = n), this.drawShape(r), this;
                }),
                (t.prototype.clear = function () {
                  return (
                    (this.lineWidth ||
                      this.filling ||
                      this.graphicsData.length > 0) &&
                      ((this.lineWidth = 0),
                      (this.filling = !1),
                      (this.boundsDirty = -1),
                      this.dirty++,
                      this.clearDirty++,
                      (this.graphicsData.length = 0)),
                    (this.currentPath = null),
                    (this._spriteRect = null),
                    this
                  );
                }),
                (t.prototype.isFastRect = function () {
                  return (
                    1 === this.graphicsData.length &&
                    this.graphicsData[0].shape.type === y.SHAPES.RECT &&
                    !this.graphicsData[0].lineWidth
                  );
                }),
                (t.prototype._renderWebGL = function (e) {
                  this.dirty !== this.fastRectDirty &&
                    ((this.fastRectDirty = this.dirty),
                    (this._fastRect = this.isFastRect())),
                    this._fastRect
                      ? this._renderSpriteRect(e)
                      : (e.setObjectRenderer(e.plugins.graphics),
                        e.plugins.graphics.render(this));
                }),
                (t.prototype._renderSpriteRect = function (e) {
                  var t = this.graphicsData[0].shape;
                  this._spriteRect ||
                    (this._spriteRect = new g["default"](
                      new d["default"](d["default"].WHITE)
                    ));
                  var n = this._spriteRect;
                  if (16777215 === this.tint)
                    n.tint = this.graphicsData[0].fillColor;
                  else {
                    var i = I,
                      r = A;
                    _.hex2rgb(this.graphicsData[0].fillColor, i),
                      _.hex2rgb(this.tint, r),
                      (i[0] *= r[0]),
                      (i[1] *= r[1]),
                      (i[2] *= r[2]),
                      (n.tint = _.rgb2hex(i));
                  }
                  (n.alpha = this.graphicsData[0].fillAlpha),
                    (n.worldAlpha = this.worldAlpha * n.alpha),
                    (n.blendMode = this.blendMode),
                    (n._texture._frame.width = t.width),
                    (n._texture._frame.height = t.height),
                    (n.transform.worldTransform =
                      this.transform.worldTransform),
                    n.anchor.set(-t.x / t.width, -t.y / t.height),
                    n._onAnchorUpdate(),
                    n._renderWebGL(e);
                }),
                (t.prototype._renderCanvas = function (e) {
                  !0 !== this.isMask && e.plugins.graphics.render(this);
                }),
                (t.prototype._calculateBounds = function () {
                  this.boundsDirty !== this.dirty &&
                    ((this.boundsDirty = this.dirty),
                    this.updateLocalBounds(),
                    (this.cachedSpriteDirty = !0));
                  var e = this._localBounds;
                  this._bounds.addFrame(
                    this.transform,
                    e.minX,
                    e.minY,
                    e.maxX,
                    e.maxY
                  );
                }),
                (t.prototype.containsPoint = function (e) {
                  this.worldTransform.applyInverse(e, P);
                  for (var t = this.graphicsData, n = 0; n < t.length; ++n) {
                    var i = t[n];
                    if (i.fill && i.shape && i.shape.contains(P.x, P.y)) {
                      if (i.holes)
                        for (var r = 0; r < i.holes.length; r++) {
                          var s = i.holes[r];
                          if (s.contains(P.x, P.y)) return !1;
                        }
                      return !0;
                    }
                  }
                  return !1;
                }),
                (t.prototype.updateLocalBounds = function () {
                  var e = 1 / 0,
                    t = -1 / 0,
                    n = 1 / 0,
                    i = -1 / 0;
                  if (this.graphicsData.length)
                    for (
                      var r = 0, s = 0, o = 0, a = 0, l = 0, c = 0;
                      c < this.graphicsData.length;
                      c++
                    ) {
                      var u = this.graphicsData[c],
                        h = u.type,
                        d = u.lineWidth;
                      if (
                        ((r = u.shape),
                        h === y.SHAPES.RECT || h === y.SHAPES.RREC)
                      )
                        (s = r.x - d / 2),
                          (o = r.y - d / 2),
                          (a = r.width + d),
                          (l = r.height + d),
                          (e = e > s ? s : e),
                          (t = s + a > t ? s + a : t),
                          (n = n > o ? o : n),
                          (i = o + l > i ? o + l : i);
                      else if (h === y.SHAPES.CIRC)
                        (s = r.x),
                          (o = r.y),
                          (a = r.radius + d / 2),
                          (l = r.radius + d / 2),
                          (e = e > s - a ? s - a : e),
                          (t = s + a > t ? s + a : t),
                          (n = n > o - l ? o - l : n),
                          (i = o + l > i ? o + l : i);
                      else if (h === y.SHAPES.ELIP)
                        (s = r.x),
                          (o = r.y),
                          (a = r.width + d / 2),
                          (l = r.height + d / 2),
                          (e = e > s - a ? s - a : e),
                          (t = s + a > t ? s + a : t),
                          (n = n > o - l ? o - l : n),
                          (i = o + l > i ? o + l : i);
                      else
                        for (
                          var p = r.points,
                            f = 0,
                            m = 0,
                            g = 0,
                            v = 0,
                            _ = 0,
                            b = 0,
                            w = 0,
                            x = 0,
                            C = 0;
                          C + 2 < p.length;
                          C += 2
                        )
                          (s = p[C]),
                            (o = p[C + 1]),
                            (f = p[C + 2]),
                            (m = p[C + 3]),
                            (g = Math.abs(f - s)),
                            (v = Math.abs(m - o)),
                            (l = d),
                            (a = Math.sqrt(g * g + v * v)) < 1e-9 ||
                              ((_ = ((l / a) * v + g) / 2),
                              (b = ((l / a) * g + v) / 2),
                              (w = (f + s) / 2),
                              (x = (m + o) / 2),
                              (e = e > w - _ ? w - _ : e),
                              (t = w + _ > t ? w + _ : t),
                              (n = n > x - b ? x - b : n),
                              (i = x + b > i ? x + b : i));
                    }
                  else (e = 0), (t = 0), (n = 0), (i = 0);
                  var T = this.boundsPadding;
                  (this._localBounds.minX = e - T),
                    (this._localBounds.maxX = t + T),
                    (this._localBounds.minY = n - T),
                    (this._localBounds.maxY = i + T);
                }),
                (t.prototype.drawShape = function (e) {
                  this.currentPath &&
                    this.currentPath.shape.points.length <= 2 &&
                    this.graphicsData.pop(),
                    (this.currentPath = null);
                  var t = new f["default"](
                    this.lineWidth,
                    this.lineColor,
                    this.lineAlpha,
                    this.fillColor,
                    this.fillAlpha,
                    this.filling,
                    this.nativeLines,
                    e
                  );
                  return (
                    this.graphicsData.push(t),
                    t.type === y.SHAPES.POLY &&
                      ((t.shape.closed = t.shape.closed || this.filling),
                      (this.currentPath = t)),
                    this.dirty++,
                    t
                  );
                }),
                (t.prototype.generateCanvasTexture = function (e) {
                  var t =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : 1,
                    n = this.getLocalBounds(),
                    i = u["default"].create(n.width, n.height, e, t);
                  E || (E = new S["default"]()),
                    this.transform.updateLocalTransform(),
                    this.transform.localTransform.copy(k),
                    k.invert(),
                    (k.tx -= n.x),
                    (k.ty -= n.y),
                    E.render(this, i, !0, k);
                  var r = d["default"].fromCanvas(
                    i.baseTexture._canvasRenderTarget.canvas,
                    e,
                    "graphics"
                  );
                  return (
                    (r.baseTexture.resolution = t), r.baseTexture.update(), r
                  );
                }),
                (t.prototype.closePath = function () {
                  var e = this.currentPath;
                  return e && e.shape && e.shape.close(), this;
                }),
                (t.prototype.addHole = function () {
                  var e = this.graphicsData.pop();
                  return (
                    (this.currentPath =
                      this.graphicsData[this.graphicsData.length - 1]),
                    this.currentPath.addHole(e.shape),
                    (this.currentPath = null),
                    this
                  );
                }),
                (t.prototype.destroy = function (t) {
                  e.prototype.destroy.call(this, t);
                  for (var n = 0; n < this.graphicsData.length; ++n)
                    this.graphicsData[n].destroy();
                  for (var i in this._webgl)
                    for (var r = 0; r < this._webgl[i].data.length; ++r)
                      this._webgl[i].data[r].destroy();
                  this._spriteRect && this._spriteRect.destroy(),
                    (this.graphicsData = null),
                    (this.currentPath = null),
                    (this._webgl = null),
                    (this._localBounds = null);
                }),
                t
              );
            })(l["default"]);
          (n["default"] = O), (O._SPRITE_TEXTURE = null);
        },
        {
          "../const": 46,
          "../display/Bounds": 47,
          "../display/Container": 48,
          "../math": 70,
          "../renderers/canvas/CanvasRenderer": 77,
          "../sprites/Sprite": 102,
          "../textures/RenderTexture": 113,
          "../textures/Texture": 115,
          "../utils": 124,
          "./GraphicsData": 54,
          "./utils/bezierCurveTo": 56,
        },
      ],
      54: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t, n, r, s, o, a, l, c) {
              i(this, e),
                (this.lineWidth = t),
                (this.nativeLines = l),
                (this.lineColor = n),
                (this.lineAlpha = r),
                (this._lineTint = n),
                (this.fillColor = s),
                (this.fillAlpha = o),
                (this._fillTint = s),
                (this.fill = a),
                (this.holes = []),
                (this.shape = c),
                (this.type = c.type);
            }
            return (
              (e.prototype.clone = function () {
                return new e(
                  this.lineWidth,
                  this.lineColor,
                  this.lineAlpha,
                  this.fillColor,
                  this.fillAlpha,
                  this.fill,
                  this.nativeLines,
                  this.shape
                );
              }),
              (e.prototype.addHole = function (e) {
                this.holes.push(e);
              }),
              (e.prototype.destroy = function () {
                (this.shape = null), (this.holes = null);
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      55: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../renderers/canvas/CanvasRenderer"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../const"),
            a = (function () {
              function e(t) {
                i(this, e), (this.renderer = t);
              }
              return (
                (e.prototype.render = function (e) {
                  var t = this.renderer,
                    n = t.context,
                    i = e.worldAlpha,
                    r = e.transform.worldTransform,
                    s = t.resolution;
                  this._prevTint !== this.tint && (this.dirty = !0),
                    n.setTransform(
                      r.a * s,
                      r.b * s,
                      r.c * s,
                      r.d * s,
                      r.tx * s,
                      r.ty * s
                    ),
                    e.dirty && (this.updateGraphicsTint(e), (e.dirty = !1)),
                    t.setBlendMode(e.blendMode);
                  for (var a = 0; a < e.graphicsData.length; a++) {
                    var l = e.graphicsData[a],
                      c = l.shape,
                      u = l._fillTint,
                      h = l._lineTint;
                    if (
                      ((n.lineWidth = l.lineWidth), l.type === o.SHAPES.POLY)
                    ) {
                      n.beginPath(), this.renderPolygon(c.points, c.closed, n);
                      for (var d = 0; d < l.holes.length; d++)
                        this.renderPolygon(l.holes[d].points, !0, n);
                      l.fill &&
                        ((n.globalAlpha = l.fillAlpha * i),
                        (n.fillStyle =
                          "#" + ("00000" + (0 | u).toString(16)).substr(-6)),
                        n.fill()),
                        l.lineWidth &&
                          ((n.globalAlpha = l.lineAlpha * i),
                          (n.strokeStyle =
                            "#" + ("00000" + (0 | h).toString(16)).substr(-6)),
                          n.stroke());
                    } else if (l.type === o.SHAPES.RECT)
                      (l.fillColor || 0 === l.fillColor) &&
                        ((n.globalAlpha = l.fillAlpha * i),
                        (n.fillStyle =
                          "#" + ("00000" + (0 | u).toString(16)).substr(-6)),
                        n.fillRect(c.x, c.y, c.width, c.height)),
                        l.lineWidth &&
                          ((n.globalAlpha = l.lineAlpha * i),
                          (n.strokeStyle =
                            "#" + ("00000" + (0 | h).toString(16)).substr(-6)),
                          n.strokeRect(c.x, c.y, c.width, c.height));
                    else if (l.type === o.SHAPES.CIRC)
                      n.beginPath(),
                        n.arc(c.x, c.y, c.radius, 0, 2 * Math.PI),
                        n.closePath(),
                        l.fill &&
                          ((n.globalAlpha = l.fillAlpha * i),
                          (n.fillStyle =
                            "#" + ("00000" + (0 | u).toString(16)).substr(-6)),
                          n.fill()),
                        l.lineWidth &&
                          ((n.globalAlpha = l.lineAlpha * i),
                          (n.strokeStyle =
                            "#" + ("00000" + (0 | h).toString(16)).substr(-6)),
                          n.stroke());
                    else if (l.type === o.SHAPES.ELIP) {
                      var p = 2 * c.width,
                        f = 2 * c.height,
                        m = c.x - p / 2,
                        g = c.y - f / 2;
                      n.beginPath();
                      var v = (p / 2) * 0.5522848,
                        _ = (f / 2) * 0.5522848,
                        y = m + p,
                        b = g + f,
                        w = m + p / 2,
                        x = g + f / 2;
                      n.moveTo(m, x),
                        n.bezierCurveTo(m, x - _, w - v, g, w, g),
                        n.bezierCurveTo(w + v, g, y, x - _, y, x),
                        n.bezierCurveTo(y, x + _, w + v, b, w, b),
                        n.bezierCurveTo(w - v, b, m, x + _, m, x),
                        n.closePath(),
                        l.fill &&
                          ((n.globalAlpha = l.fillAlpha * i),
                          (n.fillStyle =
                            "#" + ("00000" + (0 | u).toString(16)).substr(-6)),
                          n.fill()),
                        l.lineWidth &&
                          ((n.globalAlpha = l.lineAlpha * i),
                          (n.strokeStyle =
                            "#" + ("00000" + (0 | h).toString(16)).substr(-6)),
                          n.stroke());
                    } else if (l.type === o.SHAPES.RREC) {
                      var C = c.x,
                        T = c.y,
                        S = c.width,
                        E = c.height,
                        k = c.radius,
                        P = (Math.min(S, E) / 2) | 0;
                      (k = k > P ? P : k),
                        n.beginPath(),
                        n.moveTo(C, T + k),
                        n.lineTo(C, T + E - k),
                        n.quadraticCurveTo(C, T + E, C + k, T + E),
                        n.lineTo(C + S - k, T + E),
                        n.quadraticCurveTo(C + S, T + E, C + S, T + E - k),
                        n.lineTo(C + S, T + k),
                        n.quadraticCurveTo(C + S, T, C + S - k, T),
                        n.lineTo(C + k, T),
                        n.quadraticCurveTo(C, T, C, T + k),
                        n.closePath(),
                        (l.fillColor || 0 === l.fillColor) &&
                          ((n.globalAlpha = l.fillAlpha * i),
                          (n.fillStyle =
                            "#" + ("00000" + (0 | u).toString(16)).substr(-6)),
                          n.fill()),
                        l.lineWidth &&
                          ((n.globalAlpha = l.lineAlpha * i),
                          (n.strokeStyle =
                            "#" + ("00000" + (0 | h).toString(16)).substr(-6)),
                          n.stroke());
                    }
                  }
                }),
                (e.prototype.updateGraphicsTint = function (e) {
                  e._prevTint = e.tint;
                  for (
                    var t = ((e.tint >> 16) & 255) / 255,
                      n = ((e.tint >> 8) & 255) / 255,
                      i = (255 & e.tint) / 255,
                      r = 0;
                    r < e.graphicsData.length;
                    ++r
                  ) {
                    var s = e.graphicsData[r],
                      o = 0 | s.fillColor,
                      a = 0 | s.lineColor;
                    (s._fillTint =
                      (((((o >> 16) & 255) / 255) * t * 255) << 16) +
                      (((((o >> 8) & 255) / 255) * n * 255) << 8) +
                      ((255 & o) / 255) * i * 255),
                      (s._lineTint =
                        (((((a >> 16) & 255) / 255) * t * 255) << 16) +
                        (((((a >> 8) & 255) / 255) * n * 255) << 8) +
                        ((255 & a) / 255) * i * 255);
                  }
                }),
                (e.prototype.renderPolygon = function (e, t, n) {
                  n.moveTo(e[0], e[1]);
                  for (var i = 1; i < e.length / 2; ++i)
                    n.lineTo(e[2 * i], e[2 * i + 1]);
                  t && n.closePath();
                }),
                (e.prototype.destroy = function () {
                  this.renderer = null;
                }),
                e
              );
            })();
          (n["default"] = a), s["default"].registerPlugin("graphics", a);
        },
        { "../../const": 46, "../../renderers/canvas/CanvasRenderer": 77 },
      ],
      56: [
        function (e, t, n) {
          "use strict";
          function i(e, t, n, i, r, s, o, a) {
            var l =
                arguments.length > 8 && void 0 !== arguments[8]
                  ? arguments[8]
                  : [],
              c = 0,
              u = 0,
              h = 0,
              d = 0,
              p = 0;
            l.push(e, t);
            for (var f = 1, m = 0; 20 >= f; ++f)
              (m = f / 20),
                (c = 1 - m),
                (u = c * c),
                (h = u * c),
                (d = m * m),
                (p = d * m),
                l.push(
                  h * e + 3 * u * m * n + 3 * c * d * r + p * o,
                  h * t + 3 * u * m * i + 3 * c * d * s + p * a
                );
            return l;
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      57: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../../utils"),
            l = e("../../const"),
            c = e("../../renderers/webgl/utils/ObjectRenderer"),
            u = i(c),
            h = e("../../renderers/webgl/WebGLRenderer"),
            d = i(h),
            p = e("./WebGLGraphicsData"),
            f = i(p),
            m = e("./shaders/PrimitiveShader"),
            g = i(m),
            v = e("./utils/buildPoly"),
            _ = i(v),
            y = e("./utils/buildRectangle"),
            b = i(y),
            w = e("./utils/buildRoundedRectangle"),
            x = i(w),
            C = e("./utils/buildCircle"),
            T = i(C),
            S = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this, n));
                return (
                  (i.graphicsDataPool = []),
                  (i.primitiveShader = null),
                  (i.gl = n.gl),
                  (i.CONTEXT_UID = 0),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype.onContextChange = function () {
                  (this.gl = this.renderer.gl),
                    (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                    (this.primitiveShader = new g["default"](this.gl));
                }),
                (t.prototype.destroy = function () {
                  u["default"].prototype.destroy.call(this);
                  for (var e = 0; e < this.graphicsDataPool.length; ++e)
                    this.graphicsDataPool[e].destroy();
                  this.graphicsDataPool = null;
                }),
                (t.prototype.render = function (e) {
                  var t = this.renderer,
                    n = t.gl,
                    i = void 0,
                    r = e._webGL[this.CONTEXT_UID];
                  (r && e.dirty === r.dirty) ||
                    (this.updateGraphics(e), (r = e._webGL[this.CONTEXT_UID]));
                  var s = this.primitiveShader;
                  t.bindShader(s), t.state.setBlendMode(e.blendMode);
                  for (var o = 0, l = r.data.length; l > o; o++) {
                    i = r.data[o];
                    var c = i.shader;
                    t.bindShader(c),
                      (c.uniforms.translationMatrix =
                        e.transform.worldTransform.toArray(!0)),
                      (c.uniforms.tint = a.hex2rgb(e.tint)),
                      (c.uniforms.alpha = e.worldAlpha),
                      t.bindVao(i.vao),
                      i.nativeLines
                        ? n.drawArrays(n.LINES, 0, i.points.length / 6)
                        : i.vao.draw(n.TRIANGLE_STRIP, i.indices.length);
                  }
                }),
                (t.prototype.updateGraphics = function (e) {
                  var t = this.renderer.gl,
                    n = e._webGL[this.CONTEXT_UID];
                  if (
                    (n ||
                      (n = e._webGL[this.CONTEXT_UID] =
                        {
                          lastIndex: 0,
                          data: [],
                          gl: t,
                          clearDirty: -1,
                          dirty: -1,
                        }),
                    (n.dirty = e.dirty),
                    e.clearDirty !== n.clearDirty)
                  ) {
                    n.clearDirty = e.clearDirty;
                    for (var i = 0; i < n.data.length; i++)
                      this.graphicsDataPool.push(n.data[i]);
                    (n.data.length = 0), (n.lastIndex = 0);
                  }
                  for (
                    var r = void 0, s = void 0, o = n.lastIndex;
                    o < e.graphicsData.length;
                    o++
                  ) {
                    var a = e.graphicsData[o];
                    (r = this.getWebGLData(n, 0)),
                      a.nativeLines &&
                        a.lineWidth &&
                        ((s = this.getWebGLData(n, 0, !0)), n.lastIndex++),
                      a.type === l.SHAPES.POLY && _["default"](a, r, s),
                      a.type === l.SHAPES.RECT
                        ? b["default"](a, r, s)
                        : a.type === l.SHAPES.CIRC || a.type === l.SHAPES.ELIP
                        ? T["default"](a, r, s)
                        : a.type === l.SHAPES.RREC && x["default"](a, r, s),
                      n.lastIndex++;
                  }
                  this.renderer.bindVao(null);
                  for (var c = 0; c < n.data.length; c++)
                    (r = n.data[c]), r.dirty && r.upload();
                }),
                (t.prototype.getWebGLData = function (e, t, n) {
                  var i = e.data[e.data.length - 1];
                  return (
                    (!i || i.nativeLines !== n || i.points.length > 32e4) &&
                      ((i =
                        this.graphicsDataPool.pop() ||
                        new f["default"](
                          this.renderer.gl,
                          this.primitiveShader,
                          this.renderer.state.attribsState
                        )),
                      (i.nativeLines = n),
                      i.reset(t),
                      e.data.push(i)),
                    (i.dirty = !0),
                    i
                  );
                }),
                t
              );
            })(u["default"]);
          (n["default"] = S), d["default"].registerPlugin("graphics", S);
        },
        {
          "../../const": 46,
          "../../renderers/webgl/WebGLRenderer": 84,
          "../../renderers/webgl/utils/ObjectRenderer": 94,
          "../../utils": 124,
          "./WebGLGraphicsData": 58,
          "./shaders/PrimitiveShader": 59,
          "./utils/buildCircle": 60,
          "./utils/buildPoly": 62,
          "./utils/buildRectangle": 63,
          "./utils/buildRoundedRectangle": 64,
        },
      ],
      58: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("pixi-gl-core"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = (function () {
              function e(t, n, r) {
                i(this, e),
                  (this.gl = t),
                  (this.color = [0, 0, 0]),
                  (this.points = []),
                  (this.indices = []),
                  (this.buffer = s["default"].GLBuffer.createVertexBuffer(t)),
                  (this.indexBuffer =
                    s["default"].GLBuffer.createIndexBuffer(t)),
                  (this.dirty = !0),
                  (this.nativeLines = !1),
                  (this.glPoints = null),
                  (this.glIndices = null),
                  (this.shader = n),
                  (this.vao = new s["default"].VertexArrayObject(t, r)
                    .addIndex(this.indexBuffer)
                    .addAttribute(
                      this.buffer,
                      n.attributes.aVertexPosition,
                      t.FLOAT,
                      !1,
                      24,
                      0
                    )
                    .addAttribute(
                      this.buffer,
                      n.attributes.aColor,
                      t.FLOAT,
                      !1,
                      24,
                      8
                    ));
              }
              return (
                (e.prototype.reset = function () {
                  (this.points.length = 0), (this.indices.length = 0);
                }),
                (e.prototype.upload = function () {
                  (this.glPoints = new Float32Array(this.points)),
                    this.buffer.upload(this.glPoints),
                    (this.glIndices = new Uint16Array(this.indices)),
                    this.indexBuffer.upload(this.glIndices),
                    (this.dirty = !1);
                }),
                (e.prototype.destroy = function () {
                  (this.color = null),
                    (this.points = null),
                    (this.indices = null),
                    this.vao.destroy(),
                    this.buffer.destroy(),
                    this.indexBuffer.destroy(),
                    (this.gl = null),
                    (this.buffer = null),
                    (this.indexBuffer = null),
                    (this.glPoints = null),
                    (this.glIndices = null);
                }),
                e
              );
            })();
          n["default"] = o;
        },
        { "pixi-gl-core": 15 },
      ],
      59: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../../../Shader"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t(n) {
                return (
                  i(this, t),
                  r(
                    this,
                    e.call(
                      this,
                      n,
                      [
                        "attribute vec2 aVertexPosition;",
                        "attribute vec4 aColor;",
                        "uniform mat3 translationMatrix;",
                        "uniform mat3 projectionMatrix;",
                        "uniform float alpha;",
                        "uniform vec3 tint;",
                        "varying vec4 vColor;",
                        "void main(void){",
                        "   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);",
                        "   vColor = aColor * vec4(tint * alpha, alpha);",
                        "}",
                      ].join("\n"),
                      [
                        "varying vec4 vColor;",
                        "void main(void){",
                        "   gl_FragColor = vColor;",
                        "}",
                      ].join("\n")
                    )
                  )
                );
              }
              return s(t, e), t;
            })(a["default"]);
          n["default"] = l;
        },
        { "../../../Shader": 44 },
      ],
      60: [
        function (e, t, n) {
          "use strict";
          function i(e, t, n) {
            var i = e.shape,
              r = i.x,
              l = i.y,
              c = void 0,
              u = void 0;
            if (
              (e.type === o.SHAPES.CIRC
                ? ((c = i.radius), (u = i.radius))
                : ((c = i.width), (u = i.height)),
              0 !== c && 0 !== u)
            ) {
              var h =
                  Math.floor(30 * Math.sqrt(i.radius)) ||
                  Math.floor(15 * Math.sqrt(i.width + i.height)),
                d = (2 * Math.PI) / h;
              if (e.fill) {
                var p = a.hex2rgb(e.fillColor),
                  f = e.fillAlpha,
                  m = p[0] * f,
                  g = p[1] * f,
                  v = p[2] * f,
                  _ = t.points,
                  y = t.indices,
                  b = _.length / 6;
                y.push(b);
                for (var w = 0; h + 1 > w; w++)
                  _.push(r, l, m, g, v, f),
                    _.push(
                      r + Math.sin(d * w) * c,
                      l + Math.cos(d * w) * u,
                      m,
                      g,
                      v,
                      f
                    ),
                    y.push(b++, b++);
                y.push(b - 1);
              }
              if (e.lineWidth) {
                var x = e.points;
                e.points = [];
                for (var C = 0; h + 1 > C; C++)
                  e.points.push(
                    r + Math.sin(d * C) * c,
                    l + Math.cos(d * C) * u
                  );
                s["default"](e, t, n), (e.points = x);
              }
            }
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("./buildLine"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../../const"),
            a = e("../../../utils");
        },
        { "../../../const": 46, "../../../utils": 124, "./buildLine": 61 },
      ],
      61: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            var n = e.points;
            if (0 !== n.length) {
              var i = new s.Point(n[0], n[1]),
                r = new s.Point(n[n.length - 2], n[n.length - 1]);
              if (i.x === r.x && i.y === r.y) {
                (n = n.slice()),
                  n.pop(),
                  n.pop(),
                  (r = new s.Point(n[n.length - 2], n[n.length - 1]));
                var a = r.x + 0.5 * (i.x - r.x),
                  l = r.y + 0.5 * (i.y - r.y);
                n.unshift(a, l), n.push(a, l);
              }
              var c = t.points,
                u = t.indices,
                h = n.length / 2,
                d = n.length,
                p = c.length / 6,
                f = e.lineWidth / 2,
                m = o.hex2rgb(e.lineColor),
                g = e.lineAlpha,
                v = m[0] * g,
                _ = m[1] * g,
                y = m[2] * g,
                b = n[0],
                w = n[1],
                x = n[2],
                C = n[3],
                T = 0,
                S = 0,
                E = -(w - C),
                k = b - x,
                P = 0,
                I = 0,
                A = 0,
                O = 0,
                D = Math.sqrt(E * E + k * k);
              (E /= D),
                (k /= D),
                (E *= f),
                (k *= f),
                c.push(b - E, w - k, v, _, y, g),
                c.push(b + E, w + k, v, _, y, g);
              for (var M = 1; h - 1 > M; ++M) {
                (b = n[2 * (M - 1)]),
                  (w = n[2 * (M - 1) + 1]),
                  (x = n[2 * M]),
                  (C = n[2 * M + 1]),
                  (T = n[2 * (M + 1)]),
                  (S = n[2 * (M + 1) + 1]),
                  (E = -(w - C)),
                  (k = b - x),
                  (D = Math.sqrt(E * E + k * k)),
                  (E /= D),
                  (k /= D),
                  (E *= f),
                  (k *= f),
                  (P = -(C - S)),
                  (I = x - T),
                  (D = Math.sqrt(P * P + I * I)),
                  (P /= D),
                  (I /= D),
                  (P *= f),
                  (I *= f);
                var R = -k + w - (-k + C),
                  L = -E + x - (-E + b),
                  N = (-E + b) * (-k + C) - (-E + x) * (-k + w),
                  U = -I + S - (-I + C),
                  B = -P + x - (-P + T),
                  F = (-P + T) * (-I + C) - (-P + x) * (-I + S),
                  j = R * B - U * L;
                if (Math.abs(j) < 0.1)
                  (j += 10.1),
                    c.push(x - E, C - k, v, _, y, g),
                    c.push(x + E, C + k, v, _, y, g);
                else {
                  var H = (L * F - B * N) / j,
                    $ = (U * N - R * F) / j;
                  (H - x) * (H - x) + ($ - C) * ($ - C) > 196 * f * f
                    ? ((A = E - P),
                      (O = k - I),
                      (D = Math.sqrt(A * A + O * O)),
                      (A /= D),
                      (O /= D),
                      (A *= f),
                      (O *= f),
                      c.push(x - A, C - O),
                      c.push(v, _, y, g),
                      c.push(x + A, C + O),
                      c.push(v, _, y, g),
                      c.push(x - A, C - O),
                      c.push(v, _, y, g),
                      d++)
                    : (c.push(H, $),
                      c.push(v, _, y, g),
                      c.push(x - (H - x), C - ($ - C)),
                      c.push(v, _, y, g));
                }
              }
              (b = n[2 * (h - 2)]),
                (w = n[2 * (h - 2) + 1]),
                (x = n[2 * (h - 1)]),
                (C = n[2 * (h - 1) + 1]),
                (E = -(w - C)),
                (k = b - x),
                (D = Math.sqrt(E * E + k * k)),
                (E /= D),
                (k /= D),
                (E *= f),
                (k *= f),
                c.push(x - E, C - k),
                c.push(v, _, y, g),
                c.push(x + E, C + k),
                c.push(v, _, y, g),
                u.push(p);
              for (var z = 0; d > z; ++z) u.push(p++);
              u.push(p - 1);
            }
          }
          function r(e, t) {
            var n = 0,
              i = e.points;
            if (0 !== i.length) {
              var r = t.points,
                s = i.length / 2,
                a = o.hex2rgb(e.lineColor),
                l = e.lineAlpha,
                c = a[0] * l,
                u = a[1] * l,
                h = a[2] * l;
              for (n = 1; s > n; n++) {
                var d = i[2 * (n - 1)],
                  p = i[2 * (n - 1) + 1],
                  f = i[2 * n],
                  m = i[2 * n + 1];
                r.push(d, p),
                  r.push(c, u, h, l),
                  r.push(f, m),
                  r.push(c, u, h, l);
              }
            }
          }
          (n.__esModule = !0),
            (n["default"] = function (e, t, n) {
              e.nativeLines ? r(e, n) : i(e, t);
            });
          var s = e("../../../math"),
            o = e("../../../utils");
        },
        { "../../../math": 70, "../../../utils": 124 },
      ],
      62: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t, n) {
            e.points = e.shape.points.slice();
            var i = e.points;
            if (e.fill && i.length >= 6) {
              for (var r = [], s = e.holes, l = 0; l < s.length; l++) {
                var u = s[l];
                r.push(i.length / 2), (i = i.concat(u.points));
              }
              var h = t.points,
                d = t.indices,
                p = i.length / 2,
                f = a.hex2rgb(e.fillColor),
                m = e.fillAlpha,
                g = f[0] * m,
                v = f[1] * m,
                _ = f[2] * m,
                y = c["default"](i, r, 2);
              if (!y) return;
              for (var b = h.length / 6, w = 0; w < y.length; w += 3)
                d.push(y[w] + b),
                  d.push(y[w] + b),
                  d.push(y[w + 1] + b),
                  d.push(y[w + 2] + b),
                  d.push(y[w + 2] + b);
              for (var x = 0; p > x; x++)
                h.push(i[2 * x], i[2 * x + 1], g, v, _, m);
            }
            e.lineWidth > 0 && o["default"](e, t, n);
          }
          (n.__esModule = !0), (n["default"] = r);
          var s = e("./buildLine"),
            o = i(s),
            a = e("../../../utils"),
            l = e("earcut"),
            c = i(l);
        },
        { "../../../utils": 124, "./buildLine": 61, earcut: 2 },
      ],
      63: [
        function (e, t, n) {
          "use strict";
          function i(e, t, n) {
            var i = e.shape,
              r = i.x,
              a = i.y,
              l = i.width,
              c = i.height;
            if (e.fill) {
              var u = o.hex2rgb(e.fillColor),
                h = e.fillAlpha,
                d = u[0] * h,
                p = u[1] * h,
                f = u[2] * h,
                m = t.points,
                g = t.indices,
                v = m.length / 6;
              m.push(r, a),
                m.push(d, p, f, h),
                m.push(r + l, a),
                m.push(d, p, f, h),
                m.push(r, a + c),
                m.push(d, p, f, h),
                m.push(r + l, a + c),
                m.push(d, p, f, h),
                g.push(v, v, v + 1, v + 2, v + 3, v + 3);
            }
            if (e.lineWidth) {
              var _ = e.points;
              (e.points = [r, a, r + l, a, r + l, a + c, r, a + c, r, a]),
                s["default"](e, t, n),
                (e.points = _);
            }
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("./buildLine"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../../utils");
        },
        { "../../../utils": 124, "./buildLine": 61 },
      ],
      64: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t, n) {
            var i = e.shape,
              r = i.x,
              s = i.y,
              a = i.width,
              c = i.height,
              d = i.radius,
              p = [];
            if (
              (p.push(r, s + d),
              o(r, s + c - d, r, s + c, r + d, s + c, p),
              o(r + a - d, s + c, r + a, s + c, r + a, s + c - d, p),
              o(r + a, s + d, r + a, s, r + a - d, s, p),
              o(r + d, s, r, s, r, s + d + 1e-10, p),
              e.fill)
            ) {
              for (
                var f = h.hex2rgb(e.fillColor),
                  m = e.fillAlpha,
                  g = f[0] * m,
                  v = f[1] * m,
                  _ = f[2] * m,
                  y = t.points,
                  b = t.indices,
                  w = y.length / 6,
                  x = l["default"](p, null, 2),
                  C = 0,
                  T = x.length;
                T > C;
                C += 3
              )
                b.push(x[C] + w),
                  b.push(x[C] + w),
                  b.push(x[C + 1] + w),
                  b.push(x[C + 2] + w),
                  b.push(x[C + 2] + w);
              for (var S = 0, E = p.length; E > S; S++)
                y.push(p[S], p[++S], g, v, _, m);
            }
            if (e.lineWidth) {
              var k = e.points;
              (e.points = p), u["default"](e, t, n), (e.points = k);
            }
          }
          function s(e, t, n) {
            return e + (t - e) * n;
          }
          function o(e, t, n, i, r, o) {
            for (
              var a =
                  arguments.length > 6 && void 0 !== arguments[6]
                    ? arguments[6]
                    : [],
                l = a,
                c = 0,
                u = 0,
                h = 0,
                d = 0,
                p = 0,
                f = 0,
                m = 0,
                g = 0;
              20 >= m;
              ++m
            )
              (g = m / 20),
                (c = s(e, n, g)),
                (u = s(t, i, g)),
                (h = s(n, r, g)),
                (d = s(i, o, g)),
                (p = s(c, h, g)),
                (f = s(u, d, g)),
                l.push(p, f);
            return l;
          }
          (n.__esModule = !0), (n["default"] = r);
          var a = e("earcut"),
            l = i(a),
            c = e("./buildLine"),
            u = i(c),
            h = e("../../../utils");
        },
        { "../../../utils": 124, "./buildLine": 61, earcut: 2 },
      ],
      65: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            if (e && e.__esModule) return e;
            var t = {};
            if (null != e)
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            return (t["default"] = e), t;
          }
          function r(e) {
            return e && e.__esModule ? e : { default: e };
          }
          (n.__esModule = !0),
            (n.autoDetectRenderer =
              n.Application =
              n.Filter =
              n.SpriteMaskFilter =
              n.Quad =
              n.RenderTarget =
              n.ObjectRenderer =
              n.WebGLManager =
              n.Shader =
              n.CanvasRenderTarget =
              n.TextureUvs =
              n.VideoBaseTexture =
              n.BaseRenderTexture =
              n.RenderTexture =
              n.BaseTexture =
              n.Texture =
              n.Spritesheet =
              n.CanvasGraphicsRenderer =
              n.GraphicsRenderer =
              n.GraphicsData =
              n.Graphics =
              n.TextMetrics =
              n.TextStyle =
              n.Text =
              n.SpriteRenderer =
              n.CanvasTinter =
              n.CanvasSpriteRenderer =
              n.Sprite =
              n.TransformBase =
              n.TransformStatic =
              n.Transform =
              n.Container =
              n.DisplayObject =
              n.Bounds =
              n.glCore =
              n.WebGLRenderer =
              n.CanvasRenderer =
              n.ticker =
              n.utils =
              n.settings =
                void 0);
          var s = e("./const");
          Object.keys(s).forEach(function (e) {
            "default" !== e &&
              "__esModule" !== e &&
              Object.defineProperty(n, e, {
                enumerable: !0,
                get: function () {
                  return s[e];
                },
              });
          });
          var o = e("./math");
          Object.keys(o).forEach(function (e) {
            "default" !== e &&
              "__esModule" !== e &&
              Object.defineProperty(n, e, {
                enumerable: !0,
                get: function () {
                  return o[e];
                },
              });
          });
          var a = e("pixi-gl-core");
          Object.defineProperty(n, "glCore", {
            enumerable: !0,
            get: function () {
              return r(a)["default"];
            },
          });
          var l = e("./display/Bounds");
          Object.defineProperty(n, "Bounds", {
            enumerable: !0,
            get: function () {
              return r(l)["default"];
            },
          });
          var c = e("./display/DisplayObject");
          Object.defineProperty(n, "DisplayObject", {
            enumerable: !0,
            get: function () {
              return r(c)["default"];
            },
          });
          var u = e("./display/Container");
          Object.defineProperty(n, "Container", {
            enumerable: !0,
            get: function () {
              return r(u)["default"];
            },
          });
          var h = e("./display/Transform");
          Object.defineProperty(n, "Transform", {
            enumerable: !0,
            get: function () {
              return r(h)["default"];
            },
          });
          var d = e("./display/TransformStatic");
          Object.defineProperty(n, "TransformStatic", {
            enumerable: !0,
            get: function () {
              return r(d)["default"];
            },
          });
          var p = e("./display/TransformBase");
          Object.defineProperty(n, "TransformBase", {
            enumerable: !0,
            get: function () {
              return r(p)["default"];
            },
          });
          var f = e("./sprites/Sprite");
          Object.defineProperty(n, "Sprite", {
            enumerable: !0,
            get: function () {
              return r(f)["default"];
            },
          });
          var m = e("./sprites/canvas/CanvasSpriteRenderer");
          Object.defineProperty(n, "CanvasSpriteRenderer", {
            enumerable: !0,
            get: function () {
              return r(m)["default"];
            },
          });
          var g = e("./sprites/canvas/CanvasTinter");
          Object.defineProperty(n, "CanvasTinter", {
            enumerable: !0,
            get: function () {
              return r(g)["default"];
            },
          });
          var v = e("./sprites/webgl/SpriteRenderer");
          Object.defineProperty(n, "SpriteRenderer", {
            enumerable: !0,
            get: function () {
              return r(v)["default"];
            },
          });
          var _ = e("./text/Text");
          Object.defineProperty(n, "Text", {
            enumerable: !0,
            get: function () {
              return r(_)["default"];
            },
          });
          var y = e("./text/TextStyle");
          Object.defineProperty(n, "TextStyle", {
            enumerable: !0,
            get: function () {
              return r(y)["default"];
            },
          });
          var b = e("./text/TextMetrics");
          Object.defineProperty(n, "TextMetrics", {
            enumerable: !0,
            get: function () {
              return r(b)["default"];
            },
          });
          var w = e("./graphics/Graphics");
          Object.defineProperty(n, "Graphics", {
            enumerable: !0,
            get: function () {
              return r(w)["default"];
            },
          });
          var x = e("./graphics/GraphicsData");
          Object.defineProperty(n, "GraphicsData", {
            enumerable: !0,
            get: function () {
              return r(x)["default"];
            },
          });
          var C = e("./graphics/webgl/GraphicsRenderer");
          Object.defineProperty(n, "GraphicsRenderer", {
            enumerable: !0,
            get: function () {
              return r(C)["default"];
            },
          });
          var T = e("./graphics/canvas/CanvasGraphicsRenderer");
          Object.defineProperty(n, "CanvasGraphicsRenderer", {
            enumerable: !0,
            get: function () {
              return r(T)["default"];
            },
          });
          var S = e("./textures/Spritesheet");
          Object.defineProperty(n, "Spritesheet", {
            enumerable: !0,
            get: function () {
              return r(S)["default"];
            },
          });
          var E = e("./textures/Texture");
          Object.defineProperty(n, "Texture", {
            enumerable: !0,
            get: function () {
              return r(E)["default"];
            },
          });
          var k = e("./textures/BaseTexture");
          Object.defineProperty(n, "BaseTexture", {
            enumerable: !0,
            get: function () {
              return r(k)["default"];
            },
          });
          var P = e("./textures/RenderTexture");
          Object.defineProperty(n, "RenderTexture", {
            enumerable: !0,
            get: function () {
              return r(P)["default"];
            },
          });
          var I = e("./textures/BaseRenderTexture");
          Object.defineProperty(n, "BaseRenderTexture", {
            enumerable: !0,
            get: function () {
              return r(I)["default"];
            },
          });
          var A = e("./textures/VideoBaseTexture");
          Object.defineProperty(n, "VideoBaseTexture", {
            enumerable: !0,
            get: function () {
              return r(A)["default"];
            },
          });
          var O = e("./textures/TextureUvs");
          Object.defineProperty(n, "TextureUvs", {
            enumerable: !0,
            get: function () {
              return r(O)["default"];
            },
          });
          var D = e("./renderers/canvas/utils/CanvasRenderTarget");
          Object.defineProperty(n, "CanvasRenderTarget", {
            enumerable: !0,
            get: function () {
              return r(D)["default"];
            },
          });
          var M = e("./Shader");
          Object.defineProperty(n, "Shader", {
            enumerable: !0,
            get: function () {
              return r(M)["default"];
            },
          });
          var R = e("./renderers/webgl/managers/WebGLManager");
          Object.defineProperty(n, "WebGLManager", {
            enumerable: !0,
            get: function () {
              return r(R)["default"];
            },
          });
          var L = e("./renderers/webgl/utils/ObjectRenderer");
          Object.defineProperty(n, "ObjectRenderer", {
            enumerable: !0,
            get: function () {
              return r(L)["default"];
            },
          });
          var N = e("./renderers/webgl/utils/RenderTarget");
          Object.defineProperty(n, "RenderTarget", {
            enumerable: !0,
            get: function () {
              return r(N)["default"];
            },
          });
          var U = e("./renderers/webgl/utils/Quad");
          Object.defineProperty(n, "Quad", {
            enumerable: !0,
            get: function () {
              return r(U)["default"];
            },
          });
          var B = e("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");
          Object.defineProperty(n, "SpriteMaskFilter", {
            enumerable: !0,
            get: function () {
              return r(B)["default"];
            },
          });
          var F = e("./renderers/webgl/filters/Filter");
          Object.defineProperty(n, "Filter", {
            enumerable: !0,
            get: function () {
              return r(F)["default"];
            },
          });
          var j = e("./Application");
          Object.defineProperty(n, "Application", {
            enumerable: !0,
            get: function () {
              return r(j)["default"];
            },
          });
          var H = e("./autoDetectRenderer");
          Object.defineProperty(n, "autoDetectRenderer", {
            enumerable: !0,
            get: function () {
              return H.autoDetectRenderer;
            },
          });
          var $ = e("./utils"),
            z = i($),
            W = e("./ticker"),
            G = i(W),
            V = e("./settings"),
            q = r(V),
            X = e("./renderers/canvas/CanvasRenderer"),
            Y = r(X),
            K = e("./renderers/webgl/WebGLRenderer"),
            J = r(K);
          (n.settings = q["default"]),
            (n.utils = z),
            (n.ticker = G),
            (n.CanvasRenderer = Y["default"]),
            (n.WebGLRenderer = J["default"]);
        },
        {
          "./Application": 43,
          "./Shader": 44,
          "./autoDetectRenderer": 45,
          "./const": 46,
          "./display/Bounds": 47,
          "./display/Container": 48,
          "./display/DisplayObject": 49,
          "./display/Transform": 50,
          "./display/TransformBase": 51,
          "./display/TransformStatic": 52,
          "./graphics/Graphics": 53,
          "./graphics/GraphicsData": 54,
          "./graphics/canvas/CanvasGraphicsRenderer": 55,
          "./graphics/webgl/GraphicsRenderer": 57,
          "./math": 70,
          "./renderers/canvas/CanvasRenderer": 77,
          "./renderers/canvas/utils/CanvasRenderTarget": 79,
          "./renderers/webgl/WebGLRenderer": 84,
          "./renderers/webgl/filters/Filter": 86,
          "./renderers/webgl/filters/spriteMask/SpriteMaskFilter": 89,
          "./renderers/webgl/managers/WebGLManager": 93,
          "./renderers/webgl/utils/ObjectRenderer": 94,
          "./renderers/webgl/utils/Quad": 95,
          "./renderers/webgl/utils/RenderTarget": 96,
          "./settings": 101,
          "./sprites/Sprite": 102,
          "./sprites/canvas/CanvasSpriteRenderer": 103,
          "./sprites/canvas/CanvasTinter": 104,
          "./sprites/webgl/SpriteRenderer": 106,
          "./text/Text": 108,
          "./text/TextMetrics": 109,
          "./text/TextStyle": 110,
          "./textures/BaseRenderTexture": 111,
          "./textures/BaseTexture": 112,
          "./textures/RenderTexture": 113,
          "./textures/Spritesheet": 114,
          "./textures/Texture": 115,
          "./textures/TextureUvs": 116,
          "./textures/VideoBaseTexture": 117,
          "./ticker": 120,
          "./utils": 124,
          "pixi-gl-core": 15,
        },
      ],
      66: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return 0 > e ? -1 : e > 0 ? 1 : 0;
          }
          n.__esModule = !0;
          var r = e("./Matrix"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1],
            a = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1],
            l = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1],
            c = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1],
            u = [],
            h = [];
          !(function () {
            for (var e = 0; 16 > e; e++) {
              var t = [];
              h.push(t);
              for (var n = 0; 16 > n; n++)
                for (
                  var r = i(o[e] * o[n] + l[e] * a[n]),
                    d = i(a[e] * o[n] + c[e] * a[n]),
                    p = i(o[e] * l[n] + l[e] * c[n]),
                    f = i(a[e] * l[n] + c[e] * c[n]),
                    m = 0;
                  16 > m;
                  m++
                )
                  if (o[m] === r && a[m] === d && l[m] === p && c[m] === f) {
                    t.push(m);
                    break;
                  }
            }
            for (var g = 0; 16 > g; g++) {
              var v = new s["default"]();
              v.set(o[g], a[g], l[g], c[g], 0, 0), u.push(v);
            }
          })();
          var d = {
            E: 0,
            SE: 1,
            S: 2,
            SW: 3,
            W: 4,
            NW: 5,
            N: 6,
            NE: 7,
            MIRROR_VERTICAL: 8,
            MIRROR_HORIZONTAL: 12,
            uX: function (e) {
              return o[e];
            },
            uY: function (e) {
              return a[e];
            },
            vX: function (e) {
              return l[e];
            },
            vY: function (e) {
              return c[e];
            },
            inv: function (e) {
              return 8 & e ? 15 & e : 7 & -e;
            },
            add: function (e, t) {
              return h[e][t];
            },
            sub: function (e, t) {
              return h[e][d.inv(t)];
            },
            rotate180: function (e) {
              return 4 ^ e;
            },
            isSwapWidthHeight: function (e) {
              return 2 == (3 & e);
            },
            byDirection: function (e, t) {
              return 2 * Math.abs(e) <= Math.abs(t)
                ? t >= 0
                  ? d.S
                  : d.N
                : 2 * Math.abs(t) <= Math.abs(e)
                ? e > 0
                  ? d.E
                  : d.W
                : t > 0
                ? e > 0
                  ? d.SE
                  : d.SW
                : e > 0
                ? d.NE
                : d.NW;
            },
            matrixAppendRotationInv: function (e, t) {
              var n =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                i =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : 0,
                r = u[d.inv(t)];
              (r.tx = n), (r.ty = i), e.append(r);
            },
          };
          n["default"] = d;
        },
        { "./Matrix": 67 },
      ],
      67: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("./Point"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 1,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  s =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 1,
                  o =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 0,
                  a =
                    arguments.length > 5 && void 0 !== arguments[5]
                      ? arguments[5]
                      : 0;
                i(this, e),
                  (this.a = t),
                  (this.b = n),
                  (this.c = r),
                  (this.d = s),
                  (this.tx = o),
                  (this.ty = a),
                  (this.array = null);
              }
              return (
                (e.prototype.fromArray = function (e) {
                  (this.a = e[0]),
                    (this.b = e[1]),
                    (this.c = e[3]),
                    (this.d = e[4]),
                    (this.tx = e[2]),
                    (this.ty = e[5]);
                }),
                (e.prototype.set = function (e, t, n, i, r, s) {
                  return (
                    (this.a = e),
                    (this.b = t),
                    (this.c = n),
                    (this.d = i),
                    (this.tx = r),
                    (this.ty = s),
                    this
                  );
                }),
                (e.prototype.toArray = function (e, t) {
                  this.array || (this.array = new Float32Array(9));
                  var n = t || this.array;
                  return (
                    e
                      ? ((n[0] = this.a),
                        (n[1] = this.b),
                        (n[2] = 0),
                        (n[3] = this.c),
                        (n[4] = this.d),
                        (n[5] = 0),
                        (n[6] = this.tx),
                        (n[7] = this.ty),
                        (n[8] = 1))
                      : ((n[0] = this.a),
                        (n[1] = this.c),
                        (n[2] = this.tx),
                        (n[3] = this.b),
                        (n[4] = this.d),
                        (n[5] = this.ty),
                        (n[6] = 0),
                        (n[7] = 0),
                        (n[8] = 1)),
                    n
                  );
                }),
                (e.prototype.apply = function (e, t) {
                  t = t || new o["default"]();
                  var n = e.x,
                    i = e.y;
                  return (
                    (t.x = this.a * n + this.c * i + this.tx),
                    (t.y = this.b * n + this.d * i + this.ty),
                    t
                  );
                }),
                (e.prototype.applyInverse = function (e, t) {
                  t = t || new o["default"]();
                  var n = 1 / (this.a * this.d + this.c * -this.b),
                    i = e.x,
                    r = e.y;
                  return (
                    (t.x =
                      this.d * n * i +
                      -this.c * n * r +
                      (this.ty * this.c - this.tx * this.d) * n),
                    (t.y =
                      this.a * n * r +
                      -this.b * n * i +
                      (-this.ty * this.a + this.tx * this.b) * n),
                    t
                  );
                }),
                (e.prototype.translate = function (e, t) {
                  return (this.tx += e), (this.ty += t), this;
                }),
                (e.prototype.scale = function (e, t) {
                  return (
                    (this.a *= e),
                    (this.d *= t),
                    (this.c *= e),
                    (this.b *= t),
                    (this.tx *= e),
                    (this.ty *= t),
                    this
                  );
                }),
                (e.prototype.rotate = function (e) {
                  var t = Math.cos(e),
                    n = Math.sin(e),
                    i = this.a,
                    r = this.c,
                    s = this.tx;
                  return (
                    (this.a = i * t - this.b * n),
                    (this.b = i * n + this.b * t),
                    (this.c = r * t - this.d * n),
                    (this.d = r * n + this.d * t),
                    (this.tx = s * t - this.ty * n),
                    (this.ty = s * n + this.ty * t),
                    this
                  );
                }),
                (e.prototype.append = function (e) {
                  var t = this.a,
                    n = this.b,
                    i = this.c,
                    r = this.d;
                  return (
                    (this.a = e.a * t + e.b * i),
                    (this.b = e.a * n + e.b * r),
                    (this.c = e.c * t + e.d * i),
                    (this.d = e.c * n + e.d * r),
                    (this.tx = e.tx * t + e.ty * i + this.tx),
                    (this.ty = e.tx * n + e.ty * r + this.ty),
                    this
                  );
                }),
                (e.prototype.setTransform = function (
                  e,
                  t,
                  n,
                  i,
                  r,
                  s,
                  o,
                  a,
                  l
                ) {
                  var c = Math.sin(o),
                    u = Math.cos(o),
                    h = Math.cos(l),
                    d = Math.sin(l),
                    p = -Math.sin(a),
                    f = Math.cos(a),
                    m = u * r,
                    g = c * r,
                    v = -c * s,
                    _ = u * s;
                  return (
                    (this.a = h * m + d * v),
                    (this.b = h * g + d * _),
                    (this.c = p * m + f * v),
                    (this.d = p * g + f * _),
                    (this.tx = e + (n * m + i * v)),
                    (this.ty = t + (n * g + i * _)),
                    this
                  );
                }),
                (e.prototype.prepend = function (e) {
                  var t = this.tx;
                  if (1 !== e.a || 0 !== e.b || 0 !== e.c || 1 !== e.d) {
                    var n = this.a,
                      i = this.c;
                    (this.a = n * e.a + this.b * e.c),
                      (this.b = n * e.b + this.b * e.d),
                      (this.c = i * e.a + this.d * e.c),
                      (this.d = i * e.b + this.d * e.d);
                  }
                  return (
                    (this.tx = t * e.a + this.ty * e.c + e.tx),
                    (this.ty = t * e.b + this.ty * e.d + e.ty),
                    this
                  );
                }),
                (e.prototype.decompose = function (e) {
                  var t = this.a,
                    n = this.b,
                    i = this.c,
                    r = this.d,
                    s = -Math.atan2(-i, r),
                    o = Math.atan2(n, t);
                  return (
                    Math.abs(s + o) < 1e-5
                      ? ((e.rotation = o),
                        0 > t &&
                          r >= 0 &&
                          (e.rotation += e.rotation <= 0 ? Math.PI : -Math.PI),
                        (e.skew.x = e.skew.y = 0))
                      : ((e.skew.x = s), (e.skew.y = o)),
                    (e.scale.x = Math.sqrt(t * t + n * n)),
                    (e.scale.y = Math.sqrt(i * i + r * r)),
                    (e.position.x = this.tx),
                    (e.position.y = this.ty),
                    e
                  );
                }),
                (e.prototype.invert = function () {
                  var e = this.a,
                    t = this.b,
                    n = this.c,
                    i = this.d,
                    r = this.tx,
                    s = e * i - t * n;
                  return (
                    (this.a = i / s),
                    (this.b = -t / s),
                    (this.c = -n / s),
                    (this.d = e / s),
                    (this.tx = (n * this.ty - i * r) / s),
                    (this.ty = -(e * this.ty - t * r) / s),
                    this
                  );
                }),
                (e.prototype.identity = function () {
                  return (
                    (this.a = 1),
                    (this.b = 0),
                    (this.c = 0),
                    (this.d = 1),
                    (this.tx = 0),
                    (this.ty = 0),
                    this
                  );
                }),
                (e.prototype.clone = function () {
                  var t = new e();
                  return (
                    (t.a = this.a),
                    (t.b = this.b),
                    (t.c = this.c),
                    (t.d = this.d),
                    (t.tx = this.tx),
                    (t.ty = this.ty),
                    t
                  );
                }),
                (e.prototype.copy = function (e) {
                  return (
                    (e.a = this.a),
                    (e.b = this.b),
                    (e.c = this.c),
                    (e.d = this.d),
                    (e.tx = this.tx),
                    (e.ty = this.ty),
                    e
                  );
                }),
                r(e, null, [
                  {
                    key: "IDENTITY",
                    get: function () {
                      return new e();
                    },
                  },
                  {
                    key: "TEMP_MATRIX",
                    get: function () {
                      return new e();
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = a;
        },
        { "./Point": 69 },
      ],
      68: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = (function () {
              function e(t, n) {
                var r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  s =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 0;
                i(this, e),
                  (this._x = r),
                  (this._y = s),
                  (this.cb = t),
                  (this.scope = n);
              }
              return (
                (e.prototype.set = function (e, t) {
                  var n = e || 0,
                    i = t || (0 !== t ? n : 0);
                  (this._x === n && this._y === i) ||
                    ((this._x = n), (this._y = i), this.cb.call(this.scope));
                }),
                (e.prototype.copy = function (e) {
                  (this._x === e.x && this._y === e.y) ||
                    ((this._x = e.x),
                    (this._y = e.y),
                    this.cb.call(this.scope));
                }),
                r(e, [
                  {
                    key: "x",
                    get: function () {
                      return this._x;
                    },
                    set: function (e) {
                      this._x !== e &&
                        ((this._x = e), this.cb.call(this.scope));
                    },
                  },
                  {
                    key: "y",
                    get: function () {
                      return this._y;
                    },
                    set: function (e) {
                      this._y !== e &&
                        ((this._y = e), this.cb.call(this.scope));
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = s;
        },
        {},
      ],
      69: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e() {
              var t =
                  arguments.length > 0 && void 0 !== arguments[0]
                    ? arguments[0]
                    : 0,
                n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : 0;
              i(this, e), (this.x = t), (this.y = n);
            }
            return (
              (e.prototype.clone = function () {
                return new e(this.x, this.y);
              }),
              (e.prototype.copy = function (e) {
                this.set(e.x, e.y);
              }),
              (e.prototype.equals = function (e) {
                return e.x === this.x && e.y === this.y;
              }),
              (e.prototype.set = function (e, t) {
                (this.x = e || 0), (this.y = t || (0 !== t ? this.x : 0));
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      70: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./Point");
          Object.defineProperty(n, "Point", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./ObservablePoint");
          Object.defineProperty(n, "ObservablePoint", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./Matrix");
          Object.defineProperty(n, "Matrix", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./GroupD8");
          Object.defineProperty(n, "GroupD8", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./shapes/Circle");
          Object.defineProperty(n, "Circle", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          });
          var c = e("./shapes/Ellipse");
          Object.defineProperty(n, "Ellipse", {
            enumerable: !0,
            get: function () {
              return i(c)["default"];
            },
          });
          var u = e("./shapes/Polygon");
          Object.defineProperty(n, "Polygon", {
            enumerable: !0,
            get: function () {
              return i(u)["default"];
            },
          });
          var h = e("./shapes/Rectangle");
          Object.defineProperty(n, "Rectangle", {
            enumerable: !0,
            get: function () {
              return i(h)["default"];
            },
          });
          var d = e("./shapes/RoundedRectangle");
          Object.defineProperty(n, "RoundedRectangle", {
            enumerable: !0,
            get: function () {
              return i(d)["default"];
            },
          });
        },
        {
          "./GroupD8": 66,
          "./Matrix": 67,
          "./ObservablePoint": 68,
          "./Point": 69,
          "./shapes/Circle": 71,
          "./shapes/Ellipse": 72,
          "./shapes/Polygon": 73,
          "./shapes/Rectangle": 74,
          "./shapes/RoundedRectangle": 75,
        },
      ],
      71: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("./Rectangle"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../const"),
            a = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0;
                i(this, e),
                  (this.x = t),
                  (this.y = n),
                  (this.radius = r),
                  (this.type = o.SHAPES.CIRC);
              }
              return (
                (e.prototype.clone = function () {
                  return new e(this.x, this.y, this.radius);
                }),
                (e.prototype.contains = function (e, t) {
                  if (this.radius <= 0) return !1;
                  var n = this.radius * this.radius,
                    i = this.x - e,
                    r = this.y - t;
                  return (i *= i), (r *= r), n >= i + r;
                }),
                (e.prototype.getBounds = function () {
                  return new s["default"](
                    this.x - this.radius,
                    this.y - this.radius,
                    2 * this.radius,
                    2 * this.radius
                  );
                }),
                e
              );
            })();
          n["default"] = a;
        },
        { "../../const": 46, "./Rectangle": 74 },
      ],
      72: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("./Rectangle"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../const"),
            a = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  s =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 0;
                i(this, e),
                  (this.x = t),
                  (this.y = n),
                  (this.width = r),
                  (this.height = s),
                  (this.type = o.SHAPES.ELIP);
              }
              return (
                (e.prototype.clone = function () {
                  return new e(this.x, this.y, this.width, this.height);
                }),
                (e.prototype.contains = function (e, t) {
                  if (this.width <= 0 || this.height <= 0) return !1;
                  var n = (e - this.x) / this.width,
                    i = (t - this.y) / this.height;
                  return (n *= n), (i *= i), 1 >= n + i;
                }),
                (e.prototype.getBounds = function () {
                  return new s["default"](
                    this.x - this.width,
                    this.y - this.height,
                    this.width,
                    this.height
                  );
                }),
                e
              );
            })();
          n["default"] = a;
        },
        { "../../const": 46, "./Rectangle": 74 },
      ],
      73: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../Point"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = e("../../const"),
            a = (function () {
              function e() {
                for (var t = arguments.length, n = Array(t), r = 0; t > r; r++)
                  n[r] = arguments[r];
                if (
                  (i(this, e),
                  Array.isArray(n[0]) && (n = n[0]),
                  n[0] instanceof s["default"])
                ) {
                  for (var a = [], l = 0, c = n.length; c > l; l++)
                    a.push(n[l].x, n[l].y);
                  n = a;
                }
                (this.closed = !0),
                  (this.points = n),
                  (this.type = o.SHAPES.POLY);
              }
              return (
                (e.prototype.clone = function () {
                  return new e(this.points.slice());
                }),
                (e.prototype.close = function () {
                  var e = this.points;
                  (e[0] === e[e.length - 2] && e[1] === e[e.length - 1]) ||
                    e.push(e[0], e[1]);
                }),
                (e.prototype.contains = function (e, t) {
                  for (
                    var n = !1, i = this.points.length / 2, r = 0, s = i - 1;
                    i > r;
                    s = r++
                  ) {
                    var o = this.points[2 * r],
                      a = this.points[2 * r + 1],
                      l = this.points[2 * s],
                      c = this.points[2 * s + 1];
                    a > t != c > t &&
                      ((t - a) / (c - a)) * (l - o) + o > e &&
                      (n = !n);
                  }
                  return n;
                }),
                e
              );
            })();
          n["default"] = a;
        },
        { "../../const": 46, "../Point": 69 },
      ],
      74: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("../../const"),
            o = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  r =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  o =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 0;
                i(this, e),
                  (this.x = Number(t)),
                  (this.y = Number(n)),
                  (this.width = Number(r)),
                  (this.height = Number(o)),
                  (this.type = s.SHAPES.RECT);
              }
              return (
                (e.prototype.clone = function () {
                  return new e(this.x, this.y, this.width, this.height);
                }),
                (e.prototype.copy = function (e) {
                  return (
                    (this.x = e.x),
                    (this.y = e.y),
                    (this.width = e.width),
                    (this.height = e.height),
                    this
                  );
                }),
                (e.prototype.contains = function (e, t) {
                  return (
                    !(this.width <= 0 || this.height <= 0) &&
                    e >= this.x &&
                    e < this.x + this.width &&
                    t >= this.y &&
                    t < this.y + this.height
                  );
                }),
                (e.prototype.pad = function (e, t) {
                  (e = e || 0),
                    (t = t || (0 !== t ? e : 0)),
                    (this.x -= e),
                    (this.y -= t),
                    (this.width += 2 * e),
                    (this.height += 2 * t);
                }),
                (e.prototype.fit = function (e) {
                  this.x < e.x &&
                    ((this.width += this.x),
                    this.width < 0 && (this.width = 0),
                    (this.x = e.x)),
                    this.y < e.y &&
                      ((this.height += this.y),
                      this.height < 0 && (this.height = 0),
                      (this.y = e.y)),
                    this.x + this.width > e.x + e.width &&
                      ((this.width = e.width - this.x),
                      this.width < 0 && (this.width = 0)),
                    this.y + this.height > e.y + e.height &&
                      ((this.height = e.height - this.y),
                      this.height < 0 && (this.height = 0));
                }),
                (e.prototype.enlarge = function (e) {
                  var t = Math.min(this.x, e.x),
                    n = Math.max(this.x + this.width, e.x + e.width),
                    i = Math.min(this.y, e.y),
                    r = Math.max(this.y + this.height, e.y + e.height);
                  (this.x = t),
                    (this.width = n - t),
                    (this.y = i),
                    (this.height = r - i);
                }),
                r(
                  e,
                  [
                    {
                      key: "left",
                      get: function () {
                        return this.x;
                      },
                    },
                    {
                      key: "right",
                      get: function () {
                        return this.x + this.width;
                      },
                    },
                    {
                      key: "top",
                      get: function () {
                        return this.y;
                      },
                    },
                    {
                      key: "bottom",
                      get: function () {
                        return this.y + this.height;
                      },
                    },
                  ],
                  [
                    {
                      key: "EMPTY",
                      get: function () {
                        return new e(0, 0, 0, 0);
                      },
                    },
                  ]
                ),
                e
              );
            })();
          n["default"] = o;
        },
        { "../../const": 46 },
      ],
      75: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../const"),
            s = (function () {
              function e() {
                var t =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 0,
                  n =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 0,
                  s =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 0,
                  o =
                    arguments.length > 3 && void 0 !== arguments[3]
                      ? arguments[3]
                      : 0,
                  a =
                    arguments.length > 4 && void 0 !== arguments[4]
                      ? arguments[4]
                      : 20;
                i(this, e),
                  (this.x = t),
                  (this.y = n),
                  (this.width = s),
                  (this.height = o),
                  (this.radius = a),
                  (this.type = r.SHAPES.RREC);
              }
              return (
                (e.prototype.clone = function () {
                  return new e(
                    this.x,
                    this.y,
                    this.width,
                    this.height,
                    this.radius
                  );
                }),
                (e.prototype.contains = function (e, t) {
                  if (this.width <= 0 || this.height <= 0) return !1;
                  if (
                    e >= this.x &&
                    e <= this.x + this.width &&
                    t >= this.y &&
                    t <= this.y + this.height
                  ) {
                    if (
                      (t >= this.y + this.radius &&
                        t <= this.y + this.height - this.radius) ||
                      (e >= this.x + this.radius &&
                        e <= this.x + this.width - this.radius)
                    )
                      return !0;
                    var n = e - (this.x + this.radius),
                      i = t - (this.y + this.radius),
                      r = this.radius * this.radius;
                    if (r >= n * n + i * i) return !0;
                    if (
                      (n = e - (this.x + this.width - this.radius)) * n +
                        i * i <=
                      r
                    )
                      return !0;
                    if (
                      ((i = t - (this.y + this.height - this.radius)),
                      r >= n * n + i * i)
                    )
                      return !0;
                    if ((n = e - (this.x + this.radius)) * n + i * i <= r)
                      return !0;
                  }
                  return !1;
                }),
                e
              );
            })();
          n["default"] = s;
        },
        { "../../const": 46 },
      ],
      76: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../utils"),
            c = e("../math"),
            u = e("../const"),
            h = e("../settings"),
            d = i(h),
            p = e("../display/Container"),
            f = i(p),
            m = e("../textures/RenderTexture"),
            g = i(m),
            v = e("eventemitter3"),
            _ = i(v),
            y = new c.Matrix(),
            b = (function (e) {
              function t(n, i, o, a) {
                r(this, t);
                var h = s(this, e.call(this));
                return (
                  l.sayHello(n),
                  "number" == typeof i &&
                    (i = Object.assign(
                      {
                        width: i,
                        height: o || d["default"].RENDER_OPTIONS.height,
                      },
                      a
                    )),
                  (i = Object.assign({}, d["default"].RENDER_OPTIONS, i)),
                  (h.options = i),
                  (h.type = u.RENDERER_TYPE.UNKNOWN),
                  (h.screen = new c.Rectangle(0, 0, i.width, i.height)),
                  (h.view = i.view || document.createElement("canvas")),
                  (h.resolution = i.resolution || d["default"].RESOLUTION),
                  (h.transparent = i.transparent),
                  (h.autoResize = i.autoResize || !1),
                  (h.blendModes = null),
                  (h.preserveDrawingBuffer = i.preserveDrawingBuffer),
                  (h.clearBeforeRender = i.clearBeforeRender),
                  (h.roundPixels = i.roundPixels),
                  (h._backgroundColor = 0),
                  (h._backgroundColorRgba = [0, 0, 0, 0]),
                  (h._backgroundColorString = "#000000"),
                  (h.backgroundColor = i.backgroundColor || h._backgroundColor),
                  (h._tempDisplayObjectParent = new f["default"]()),
                  (h._lastObjectRendered = h._tempDisplayObjectParent),
                  h
                );
              }
              return (
                o(t, e),
                (t.prototype.resize = function (e, t) {
                  (this.screen.width = e),
                    (this.screen.height = t),
                    (this.view.width = e * this.resolution),
                    (this.view.height = t * this.resolution),
                    this.autoResize &&
                      ((this.view.style.width = e + "px"),
                      (this.view.style.height = t + "px"));
                }),
                (t.prototype.generateTexture = function (e, t, n) {
                  var i = e.getLocalBounds(),
                    r = g["default"].create(0 | i.width, 0 | i.height, t, n);
                  return (
                    (y.tx = -i.x),
                    (y.ty = -i.y),
                    this.render(e, r, !1, y, !0),
                    r
                  );
                }),
                (t.prototype.destroy = function (e) {
                  e &&
                    this.view.parentNode &&
                    this.view.parentNode.removeChild(this.view),
                    (this.type = u.RENDERER_TYPE.UNKNOWN),
                    (this.view = null),
                    (this.screen = null),
                    (this.resolution = 0),
                    (this.transparent = !1),
                    (this.autoResize = !1),
                    (this.blendModes = null),
                    (this.options = null),
                    (this.preserveDrawingBuffer = !1),
                    (this.clearBeforeRender = !1),
                    (this.roundPixels = !1),
                    (this._backgroundColor = 0),
                    (this._backgroundColorRgba = null),
                    (this._backgroundColorString = null),
                    (this._tempDisplayObjectParent = null),
                    (this._lastObjectRendered = null);
                }),
                a(t, [
                  {
                    key: "width",
                    get: function () {
                      return this.view.width;
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this.view.height;
                    },
                  },
                  {
                    key: "backgroundColor",
                    get: function () {
                      return this._backgroundColor;
                    },
                    set: function (e) {
                      (this._backgroundColor = e),
                        (this._backgroundColorString = l.hex2string(e)),
                        l.hex2rgb(e, this._backgroundColorRgba);
                    },
                  },
                ]),
                t
              );
            })(_["default"]);
          n["default"] = b;
        },
        {
          "../const": 46,
          "../display/Container": 48,
          "../math": 70,
          "../settings": 101,
          "../textures/RenderTexture": 113,
          "../utils": 124,
          eventemitter3: 3,
        },
      ],
      77: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../SystemRenderer"),
            l = i(a),
            c = e("./utils/CanvasMaskManager"),
            u = i(c),
            h = e("./utils/CanvasRenderTarget"),
            d = i(h),
            p = e("./utils/mapCanvasBlendModesToPixi"),
            f = i(p),
            m = e("../../utils"),
            g = e("../../const"),
            v = e("../../settings"),
            _ = i(v),
            y = (function (e) {
              function t(n, i, o) {
                r(this, t);
                var a = s(this, e.call(this, "Canvas", n, i, o));
                return (
                  (a.type = g.RENDERER_TYPE.CANVAS),
                  (a.rootContext = a.view.getContext("2d", {
                    alpha: a.transparent,
                  })),
                  (a.context = a.rootContext),
                  (a.refresh = !0),
                  (a.maskManager = new u["default"](a)),
                  (a.smoothProperty = "imageSmoothingEnabled"),
                  a.rootContext.imageSmoothingEnabled ||
                    (a.rootContext.webkitImageSmoothingEnabled
                      ? (a.smoothProperty = "webkitImageSmoothingEnabled")
                      : a.rootContext.mozImageSmoothingEnabled
                      ? (a.smoothProperty = "mozImageSmoothingEnabled")
                      : a.rootContext.oImageSmoothingEnabled
                      ? (a.smoothProperty = "oImageSmoothingEnabled")
                      : a.rootContext.msImageSmoothingEnabled &&
                        (a.smoothProperty = "msImageSmoothingEnabled")),
                  a.initPlugins(),
                  (a.blendModes = f["default"]()),
                  (a._activeBlendMode = null),
                  (a.renderingToScreen = !1),
                  a.resize(a.options.width, a.options.height),
                  a
                );
              }
              return (
                o(t, e),
                (t.prototype.render = function (e, t, n, i, r) {
                  if (this.view) {
                    (this.renderingToScreen = !t), this.emit("prerender");
                    var s = this.resolution;
                    t
                      ? ((t = t.baseTexture || t),
                        t._canvasRenderTarget ||
                          ((t._canvasRenderTarget = new d["default"](
                            t.width,
                            t.height,
                            t.resolution
                          )),
                          (t.source = t._canvasRenderTarget.canvas),
                          (t.valid = !0)),
                        (this.context = t._canvasRenderTarget.context),
                        (this.resolution = t._canvasRenderTarget.resolution))
                      : (this.context = this.rootContext);
                    var o = this.context;
                    if ((t || (this._lastObjectRendered = e), !r)) {
                      var a = e.parent,
                        l =
                          this._tempDisplayObjectParent.transform
                            .worldTransform;
                      i
                        ? (i.copy(l),
                          (this._tempDisplayObjectParent.transform._worldID =
                            -1))
                        : l.identity(),
                        (e.parent = this._tempDisplayObjectParent),
                        e.updateTransform(),
                        (e.parent = a);
                    }
                    o.setTransform(1, 0, 0, 1, 0, 0),
                      (o.globalAlpha = 1),
                      (this._activeBlendMode = g.BLEND_MODES.NORMAL),
                      (o.globalCompositeOperation =
                        this.blendModes[g.BLEND_MODES.NORMAL]),
                      navigator.isCocoonJS &&
                        this.view.screencanvas &&
                        ((o.fillStyle = "black"), o.clear()),
                      (void 0 !== n ? n : this.clearBeforeRender) &&
                        this.renderingToScreen &&
                        (this.transparent
                          ? o.clearRect(0, 0, this.width, this.height)
                          : ((o.fillStyle = this._backgroundColorString),
                            o.fillRect(0, 0, this.width, this.height)));
                    var c = this.context;
                    (this.context = o),
                      e.renderCanvas(this),
                      (this.context = c),
                      (this.resolution = s),
                      this.emit("postrender");
                  }
                }),
                (t.prototype.clear = function (e) {
                  var t = this.context;
                  (e = e || this._backgroundColorString),
                    !this.transparent && e
                      ? ((t.fillStyle = e),
                        t.fillRect(0, 0, this.width, this.height))
                      : t.clearRect(0, 0, this.width, this.height);
                }),
                (t.prototype.setBlendMode = function (e) {
                  this._activeBlendMode !== e &&
                    ((this._activeBlendMode = e),
                    (this.context.globalCompositeOperation =
                      this.blendModes[e]));
                }),
                (t.prototype.destroy = function (t) {
                  this.destroyPlugins(),
                    e.prototype.destroy.call(this, t),
                    (this.context = null),
                    (this.refresh = !0),
                    this.maskManager.destroy(),
                    (this.maskManager = null),
                    (this.smoothProperty = null);
                }),
                (t.prototype.resize = function (t, n) {
                  e.prototype.resize.call(this, t, n),
                    this.smoothProperty &&
                      (this.rootContext[this.smoothProperty] =
                        _["default"].SCALE_MODE === g.SCALE_MODES.LINEAR);
                }),
                (t.prototype.invalidateBlendMode = function () {
                  this._activeBlendMode = this.blendModes.indexOf(
                    this.context.globalCompositeOperation
                  );
                }),
                t
              );
            })(l["default"]);
          (n["default"] = y), m.pluginTarget.mixin(y);
        },
        {
          "../../const": 46,
          "../../settings": 101,
          "../../utils": 124,
          "../SystemRenderer": 76,
          "./utils/CanvasMaskManager": 78,
          "./utils/CanvasRenderTarget": 79,
          "./utils/mapCanvasBlendModesToPixi": 81,
        },
      ],
      78: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../../const"),
            s = (function () {
              function e(t) {
                i(this, e), (this.renderer = t);
              }
              return (
                (e.prototype.pushMask = function (e) {
                  var t = this.renderer;
                  t.context.save();
                  var n = e.alpha,
                    i = e.transform.worldTransform,
                    r = t.resolution;
                  t.context.setTransform(
                    i.a * r,
                    i.b * r,
                    i.c * r,
                    i.d * r,
                    i.tx * r,
                    i.ty * r
                  ),
                    e._texture ||
                      (this.renderGraphicsShape(e), t.context.clip()),
                    (e.worldAlpha = n);
                }),
                (e.prototype.renderGraphicsShape = function (e) {
                  var t = this.renderer.context,
                    n = e.graphicsData.length;
                  if (0 !== n) {
                    t.beginPath();
                    for (var i = 0; n > i; i++) {
                      var s = e.graphicsData[i],
                        o = s.shape;
                      if (s.type === r.SHAPES.POLY) {
                        var a = o.points;
                        t.moveTo(a[0], a[1]);
                        for (var l = 1; l < a.length / 2; l++)
                          t.lineTo(a[2 * l], a[2 * l + 1]);
                        a[0] === a[a.length - 2] &&
                          a[1] === a[a.length - 1] &&
                          t.closePath();
                      } else if (s.type === r.SHAPES.RECT)
                        t.rect(o.x, o.y, o.width, o.height), t.closePath();
                      else if (s.type === r.SHAPES.CIRC)
                        t.arc(o.x, o.y, o.radius, 0, 2 * Math.PI),
                          t.closePath();
                      else if (s.type === r.SHAPES.ELIP) {
                        var c = 2 * o.width,
                          u = 2 * o.height,
                          h = o.x - c / 2,
                          d = o.y - u / 2,
                          p = (c / 2) * 0.5522848,
                          f = (u / 2) * 0.5522848,
                          m = h + c,
                          g = d + u,
                          v = h + c / 2,
                          _ = d + u / 2;
                        t.moveTo(h, _),
                          t.bezierCurveTo(h, _ - f, v - p, d, v, d),
                          t.bezierCurveTo(v + p, d, m, _ - f, m, _),
                          t.bezierCurveTo(m, _ + f, v + p, g, v, g),
                          t.bezierCurveTo(v - p, g, h, _ + f, h, _),
                          t.closePath();
                      } else if (s.type === r.SHAPES.RREC) {
                        var y = o.x,
                          b = o.y,
                          w = o.width,
                          x = o.height,
                          C = o.radius,
                          T = (Math.min(w, x) / 2) | 0;
                        (C = C > T ? T : C),
                          t.moveTo(y, b + C),
                          t.lineTo(y, b + x - C),
                          t.quadraticCurveTo(y, b + x, y + C, b + x),
                          t.lineTo(y + w - C, b + x),
                          t.quadraticCurveTo(y + w, b + x, y + w, b + x - C),
                          t.lineTo(y + w, b + C),
                          t.quadraticCurveTo(y + w, b, y + w - C, b),
                          t.lineTo(y + C, b),
                          t.quadraticCurveTo(y, b, y, b + C),
                          t.closePath();
                      }
                    }
                  }
                }),
                (e.prototype.popMask = function (e) {
                  e.context.restore(), e.invalidateBlendMode();
                }),
                (e.prototype.destroy = function () {}),
                e
              );
            })();
          n["default"] = s;
        },
        { "../../../const": 46 },
      ],
      79: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("../../../settings"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = (function () {
              function e(t, n, r) {
                i(this, e),
                  (this.canvas = document.createElement("canvas")),
                  (this.context = this.canvas.getContext("2d")),
                  (this.resolution = r || o["default"].RESOLUTION),
                  this.resize(t, n);
              }
              return (
                (e.prototype.clear = function () {
                  this.context.setTransform(1, 0, 0, 1, 0, 0),
                    this.context.clearRect(
                      0,
                      0,
                      this.canvas.width,
                      this.canvas.height
                    );
                }),
                (e.prototype.resize = function (e, t) {
                  (this.canvas.width = e * this.resolution),
                    (this.canvas.height = t * this.resolution);
                }),
                (e.prototype.destroy = function () {
                  (this.context = null), (this.canvas = null);
                }),
                r(e, [
                  {
                    key: "width",
                    get: function () {
                      return this.canvas.width;
                    },
                    set: function (e) {
                      this.canvas.width = e;
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this.canvas.height;
                    },
                    set: function (e) {
                      this.canvas.height = e;
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = a;
        },
        { "../../../settings": 101 },
      ],
      80: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            var t = document.createElement("canvas");
            (t.width = 6), (t.height = 1);
            var n = t.getContext("2d");
            return (n.fillStyle = e), n.fillRect(0, 0, 6, 1), t;
          }
          function r() {
            if ("undefined" == typeof document) return !1;
            var e = i("#ff00ff"),
              t = i("#ffff00"),
              n = document.createElement("canvas");
            (n.width = 6), (n.height = 1);
            var r = n.getContext("2d");
            (r.globalCompositeOperation = "multiply"),
              r.drawImage(e, 0, 0),
              r.drawImage(t, 2, 0);
            var s = r.getImageData(2, 0, 1, 1);
            if (!s) return !1;
            var o = s.data;
            return 255 === o[0] && 0 === o[1] && 0 === o[2];
          }
          (n.__esModule = !0), (n["default"] = r);
        },
        {},
      ],
      81: [
        function (e, t, n) {
          "use strict";
          function i() {
            var e =
              arguments.length > 0 && void 0 !== arguments[0]
                ? arguments[0]
                : [];
            return (
              o["default"]()
                ? ((e[r.BLEND_MODES.NORMAL] = "source-over"),
                  (e[r.BLEND_MODES.ADD] = "lighter"),
                  (e[r.BLEND_MODES.MULTIPLY] = "multiply"),
                  (e[r.BLEND_MODES.SCREEN] = "screen"),
                  (e[r.BLEND_MODES.OVERLAY] = "overlay"),
                  (e[r.BLEND_MODES.DARKEN] = "darken"),
                  (e[r.BLEND_MODES.LIGHTEN] = "lighten"),
                  (e[r.BLEND_MODES.COLOR_DODGE] = "color-dodge"),
                  (e[r.BLEND_MODES.COLOR_BURN] = "color-burn"),
                  (e[r.BLEND_MODES.HARD_LIGHT] = "hard-light"),
                  (e[r.BLEND_MODES.SOFT_LIGHT] = "soft-light"),
                  (e[r.BLEND_MODES.DIFFERENCE] = "difference"),
                  (e[r.BLEND_MODES.EXCLUSION] = "exclusion"),
                  (e[r.BLEND_MODES.HUE] = "hue"),
                  (e[r.BLEND_MODES.SATURATION] = "saturate"),
                  (e[r.BLEND_MODES.COLOR] = "color"),
                  (e[r.BLEND_MODES.LUMINOSITY] = "luminosity"))
                : ((e[r.BLEND_MODES.NORMAL] = "source-over"),
                  (e[r.BLEND_MODES.ADD] = "lighter"),
                  (e[r.BLEND_MODES.MULTIPLY] = "source-over"),
                  (e[r.BLEND_MODES.SCREEN] = "source-over"),
                  (e[r.BLEND_MODES.OVERLAY] = "source-over"),
                  (e[r.BLEND_MODES.DARKEN] = "source-over"),
                  (e[r.BLEND_MODES.LIGHTEN] = "source-over"),
                  (e[r.BLEND_MODES.COLOR_DODGE] = "source-over"),
                  (e[r.BLEND_MODES.COLOR_BURN] = "source-over"),
                  (e[r.BLEND_MODES.HARD_LIGHT] = "source-over"),
                  (e[r.BLEND_MODES.SOFT_LIGHT] = "source-over"),
                  (e[r.BLEND_MODES.DIFFERENCE] = "source-over"),
                  (e[r.BLEND_MODES.EXCLUSION] = "source-over"),
                  (e[r.BLEND_MODES.HUE] = "source-over"),
                  (e[r.BLEND_MODES.SATURATION] = "source-over"),
                  (e[r.BLEND_MODES.COLOR] = "source-over"),
                  (e[r.BLEND_MODES.LUMINOSITY] = "source-over")),
              (e[r.BLEND_MODES.NORMAL_NPM] = e[r.BLEND_MODES.NORMAL]),
              (e[r.BLEND_MODES.ADD_NPM] = e[r.BLEND_MODES.ADD]),
              (e[r.BLEND_MODES.SCREEN_NPM] = e[r.BLEND_MODES.SCREEN]),
              e
            );
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("../../../const"),
            s = e("./canUseNewCanvasBlendModes"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s);
        },
        { "../../../const": 46, "./canUseNewCanvasBlendModes": 80 },
      ],
      82: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../const"),
            s = e("../../settings"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = (function () {
              function e(t) {
                i(this, e),
                  (this.renderer = t),
                  (this.count = 0),
                  (this.checkCount = 0),
                  (this.maxIdle = o["default"].GC_MAX_IDLE),
                  (this.checkCountMax = o["default"].GC_MAX_CHECK_COUNT),
                  (this.mode = o["default"].GC_MODE);
              }
              return (
                (e.prototype.update = function () {
                  this.count++,
                    this.mode !== r.GC_MODES.MANUAL &&
                      ++this.checkCount > this.checkCountMax &&
                      ((this.checkCount = 0), this.run());
                }),
                (e.prototype.run = function () {
                  for (
                    var e = this.renderer.textureManager,
                      t = e._managedTextures,
                      n = !1,
                      i = 0;
                    i < t.length;
                    i++
                  ) {
                    var r = t[i];
                    !r._glRenderTargets &&
                      this.count - r.touched > this.maxIdle &&
                      (e.destroyTexture(r, !0), (t[i] = null), (n = !0));
                  }
                  if (n) {
                    for (var s = 0, o = 0; o < t.length; o++)
                      null !== t[o] && (t[s++] = t[o]);
                    t.length = s;
                  }
                }),
                (e.prototype.unload = function (e) {
                  var t = this.renderer.textureManager;
                  e._texture &&
                    e._texture._glRenderTargets &&
                    t.destroyTexture(e._texture, !0);
                  for (var n = e.children.length - 1; n >= 0; n--)
                    this.unload(e.children[n]);
                }),
                e
              );
            })();
          n["default"] = a;
        },
        { "../../const": 46, "../../settings": 101 },
      ],
      83: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("pixi-gl-core"),
            s = e("../../const"),
            o = e("./utils/RenderTarget"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = e("../../utils"),
            c = (function () {
              function e(t) {
                i(this, e),
                  (this.renderer = t),
                  (this.gl = t.gl),
                  (this._managedTextures = []);
              }
              return (
                (e.prototype.bindTexture = function () {}),
                (e.prototype.getTexture = function () {}),
                (e.prototype.updateTexture = function (e, t) {
                  var n = this.gl,
                    i = !!e._glRenderTargets;
                  if (!e.hasLoaded) return null;
                  var o = this.renderer.boundTextures;
                  if (void 0 === t) {
                    t = 0;
                    for (var l = 0; l < o.length; ++l)
                      if (o[l] === e) {
                        t = l;
                        break;
                      }
                  }
                  (o[t] = e), n.activeTexture(n.TEXTURE0 + t);
                  var c = e._glTextures[this.renderer.CONTEXT_UID];
                  if (c)
                    i
                      ? e._glRenderTargets[this.renderer.CONTEXT_UID].resize(
                          e.width,
                          e.height
                        )
                      : c.upload(e.source);
                  else {
                    if (i) {
                      var u = new a["default"](
                        this.gl,
                        e.width,
                        e.height,
                        e.scaleMode,
                        e.resolution
                      );
                      u.resize(e.width, e.height),
                        (e._glRenderTargets[this.renderer.CONTEXT_UID] = u),
                        (c = u.texture);
                    } else
                      (c = new r.GLTexture(this.gl, null, null, null, null)),
                        c.bind(t),
                        (c.premultiplyAlpha = !0),
                        c.upload(e.source);
                    (e._glTextures[this.renderer.CONTEXT_UID] = c),
                      e.on("update", this.updateTexture, this),
                      e.on("dispose", this.destroyTexture, this),
                      this._managedTextures.push(e),
                      e.isPowerOfTwo
                        ? (e.mipmap && c.enableMipmap(),
                          e.wrapMode === s.WRAP_MODES.CLAMP
                            ? c.enableWrapClamp()
                            : e.wrapMode === s.WRAP_MODES.REPEAT
                            ? c.enableWrapRepeat()
                            : c.enableWrapMirrorRepeat())
                        : c.enableWrapClamp(),
                      e.scaleMode === s.SCALE_MODES.NEAREST
                        ? c.enableNearestScaling()
                        : c.enableLinearScaling();
                  }
                  return c;
                }),
                (e.prototype.destroyTexture = function (e, t) {
                  if (((e = e.baseTexture || e), e.hasLoaded)) {
                    var n = this.renderer.CONTEXT_UID,
                      i = e._glTextures,
                      r = e._glRenderTargets;
                    if (
                      i[n] &&
                      (this.renderer.unbindTexture(e),
                      i[n].destroy(),
                      e.off("update", this.updateTexture, this),
                      e.off("dispose", this.destroyTexture, this),
                      delete i[n],
                      !t)
                    ) {
                      var s = this._managedTextures.indexOf(e);
                      -1 !== s && l.removeItems(this._managedTextures, s, 1);
                    }
                    r && r[n] && (r[n].destroy(), delete r[n]);
                  }
                }),
                (e.prototype.removeAll = function () {
                  for (var e = 0; e < this._managedTextures.length; ++e) {
                    var t = this._managedTextures[e];
                    t._glTextures[this.renderer.CONTEXT_UID] &&
                      delete t._glTextures[this.renderer.CONTEXT_UID];
                  }
                }),
                (e.prototype.destroy = function () {
                  for (var e = 0; e < this._managedTextures.length; ++e) {
                    var t = this._managedTextures[e];
                    this.destroyTexture(t, !0),
                      t.off("update", this.updateTexture, this),
                      t.off("dispose", this.destroyTexture, this);
                  }
                  this._managedTextures = null;
                }),
                e
              );
            })();
          n["default"] = c;
        },
        {
          "../../const": 46,
          "../../utils": 124,
          "./utils/RenderTarget": 96,
          "pixi-gl-core": 15,
        },
      ],
      84: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../SystemRenderer"),
            l = i(a),
            c = e("./managers/MaskManager"),
            u = i(c),
            h = e("./managers/StencilManager"),
            d = i(h),
            p = e("./managers/FilterManager"),
            f = i(p),
            m = e("./utils/RenderTarget"),
            g = i(m),
            v = e("./utils/ObjectRenderer"),
            _ = i(v),
            y = e("./TextureManager"),
            b = i(y),
            w = e("../../textures/BaseTexture"),
            x = i(w),
            C = e("./TextureGarbageCollector"),
            T = i(C),
            S = e("./WebGLState"),
            E = i(S),
            k = e("./utils/mapWebGLDrawModesToPixi"),
            P = i(k),
            I = e("./utils/validateContext"),
            A = i(I),
            O = e("../../utils"),
            D = e("pixi-gl-core"),
            M = i(D),
            R = e("../../const"),
            L = 0,
            N = (function (e) {
              function t(n, i, o) {
                r(this, t);
                var a = s(this, e.call(this, "WebGL", n, i, o));
                return (
                  (a.legacy = a.options.legacy),
                  a.legacy &&
                    (M["default"].VertexArrayObject.FORCE_NATIVE = !0),
                  (a.type = R.RENDERER_TYPE.WEBGL),
                  (a.handleContextLost = a.handleContextLost.bind(a)),
                  (a.handleContextRestored = a.handleContextRestored.bind(a)),
                  a.view.addEventListener(
                    "webglcontextlost",
                    a.handleContextLost,
                    !1
                  ),
                  a.view.addEventListener(
                    "webglcontextrestored",
                    a.handleContextRestored,
                    !1
                  ),
                  (a._contextOptions = {
                    alpha: a.transparent,
                    antialias: a.options.antialias,
                    premultipliedAlpha:
                      a.transparent && "notMultiplied" !== a.transparent,
                    stencil: !0,
                    preserveDrawingBuffer: a.options.preserveDrawingBuffer,
                    powerPreference: a.options.powerPreference,
                  }),
                  (a._backgroundColorRgba[3] = a.transparent ? 0 : 1),
                  (a.maskManager = new u["default"](a)),
                  (a.stencilManager = new d["default"](a)),
                  (a.emptyRenderer = new _["default"](a)),
                  (a.currentRenderer = a.emptyRenderer),
                  (a.textureManager = null),
                  (a.filterManager = null),
                  a.initPlugins(),
                  a.options.context && A["default"](a.options.context),
                  (a.gl =
                    a.options.context ||
                    M["default"].createContext(a.view, a._contextOptions)),
                  (a.CONTEXT_UID = L++),
                  (a.state = new E["default"](a.gl)),
                  (a.renderingToScreen = !0),
                  (a.boundTextures = null),
                  (a._activeShader = null),
                  (a._activeVao = null),
                  (a._activeRenderTarget = null),
                  a._initContext(),
                  (a.drawModes = P["default"](a.gl)),
                  (a._nextTextureLocation = 0),
                  a.setBlendMode(0),
                  a
                );
              }
              return (
                o(t, e),
                (t.prototype._initContext = function () {
                  var e = this.gl;
                  e.isContextLost() &&
                    e.getExtension("WEBGL_lose_context") &&
                    e.getExtension("WEBGL_lose_context").restoreContext();
                  var t = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);
                  (this._activeShader = null),
                    (this._activeVao = null),
                    (this.boundTextures = new Array(t)),
                    (this.emptyTextures = new Array(t)),
                    (this.textureManager = new b["default"](this)),
                    (this.filterManager = new f["default"](this)),
                    (this.textureGC = new T["default"](this)),
                    this.state.resetToDefault(),
                    (this.rootRenderTarget = new g["default"](
                      e,
                      this.width,
                      this.height,
                      null,
                      this.resolution,
                      !0
                    )),
                    (this.rootRenderTarget.clearColor =
                      this._backgroundColorRgba),
                    this.bindRenderTarget(this.rootRenderTarget);
                  var n = new M["default"].GLTexture.fromData(e, null, 1, 1),
                    i = { _glTextures: {} };
                  i._glTextures[this.CONTEXT_UID] = {};
                  for (var r = 0; t > r; r++) {
                    var s = new x["default"]();
                    (s._glTextures[this.CONTEXT_UID] = n),
                      (this.boundTextures[r] = i),
                      (this.emptyTextures[r] = s),
                      this.bindTexture(null, r);
                  }
                  this.emit("context", e),
                    this.resize(this.screen.width, this.screen.height);
                }),
                (t.prototype.render = function (e, t, n, i, r) {
                  if (
                    ((this.renderingToScreen = !t),
                    this.emit("prerender"),
                    this.gl && !this.gl.isContextLost())
                  ) {
                    if (
                      ((this._nextTextureLocation = 0),
                      t || (this._lastObjectRendered = e),
                      !r)
                    ) {
                      var s = e.parent;
                      (e.parent = this._tempDisplayObjectParent),
                        e.updateTransform(),
                        (e.parent = s);
                    }
                    this.bindRenderTexture(t, i),
                      this.currentRenderer.start(),
                      (void 0 !== n ? n : this.clearBeforeRender) &&
                        this._activeRenderTarget.clear(),
                      e.renderWebGL(this),
                      this.currentRenderer.flush(),
                      this.textureGC.update(),
                      this.emit("postrender");
                  }
                }),
                (t.prototype.setObjectRenderer = function (e) {
                  this.currentRenderer !== e &&
                    (this.currentRenderer.stop(),
                    (this.currentRenderer = e),
                    this.currentRenderer.start());
                }),
                (t.prototype.flush = function () {
                  this.setObjectRenderer(this.emptyRenderer);
                }),
                (t.prototype.resize = function (e, t) {
                  l["default"].prototype.resize.call(this, e, t),
                    this.rootRenderTarget.resize(e, t),
                    this._activeRenderTarget === this.rootRenderTarget &&
                      (this.rootRenderTarget.activate(),
                      this._activeShader &&
                        (this._activeShader.uniforms.projectionMatrix =
                          this.rootRenderTarget.projectionMatrix.toArray(!0)));
                }),
                (t.prototype.setBlendMode = function (e) {
                  this.state.setBlendMode(e);
                }),
                (t.prototype.clear = function (e) {
                  this._activeRenderTarget.clear(e);
                }),
                (t.prototype.setTransform = function (e) {
                  this._activeRenderTarget.transform = e;
                }),
                (t.prototype.clearRenderTexture = function (e, t) {
                  var n = e.baseTexture,
                    i = n._glRenderTargets[this.CONTEXT_UID];
                  return i && i.clear(t), this;
                }),
                (t.prototype.bindRenderTexture = function (e, t) {
                  var n = void 0;
                  if (e) {
                    var i = e.baseTexture;
                    i._glRenderTargets[this.CONTEXT_UID] ||
                      this.textureManager.updateTexture(i, 0),
                      this.unbindTexture(i),
                      (n = i._glRenderTargets[this.CONTEXT_UID]),
                      n.setFrame(e.frame);
                  } else n = this.rootRenderTarget;
                  return (n.transform = t), this.bindRenderTarget(n), this;
                }),
                (t.prototype.bindRenderTarget = function (e) {
                  return (
                    e !== this._activeRenderTarget &&
                      ((this._activeRenderTarget = e),
                      e.activate(),
                      this._activeShader &&
                        (this._activeShader.uniforms.projectionMatrix =
                          e.projectionMatrix.toArray(!0)),
                      this.stencilManager.setMaskStack(e.stencilMaskStack)),
                    this
                  );
                }),
                (t.prototype.bindShader = function (e, t) {
                  return (
                    this._activeShader !== e &&
                      ((this._activeShader = e),
                      e.bind(),
                      !1 !== t &&
                        (e.uniforms.projectionMatrix =
                          this._activeRenderTarget.projectionMatrix.toArray(
                            !0
                          ))),
                    this
                  );
                }),
                (t.prototype.bindTexture = function (e, t, n) {
                  if (
                    ((e = e || this.emptyTextures[t]),
                    (e = e.baseTexture || e),
                    (e.touched = this.textureGC.count),
                    n)
                  )
                    t = t || 0;
                  else {
                    for (var i = 0; i < this.boundTextures.length; i++)
                      if (this.boundTextures[i] === e) return i;
                    void 0 === t &&
                      (this._nextTextureLocation++,
                      (this._nextTextureLocation %= this.boundTextures.length),
                      (t =
                        this.boundTextures.length -
                        this._nextTextureLocation -
                        1));
                  }
                  var r = this.gl,
                    s = e._glTextures[this.CONTEXT_UID];
                  return (
                    s
                      ? ((this.boundTextures[t] = e),
                        r.activeTexture(r.TEXTURE0 + t),
                        r.bindTexture(r.TEXTURE_2D, s.texture))
                      : this.textureManager.updateTexture(e, t),
                    t
                  );
                }),
                (t.prototype.unbindTexture = function (e) {
                  var t = this.gl;
                  e = e.baseTexture || e;
                  for (var n = 0; n < this.boundTextures.length; n++)
                    this.boundTextures[n] === e &&
                      ((this.boundTextures[n] = this.emptyTextures[n]),
                      t.activeTexture(t.TEXTURE0 + n),
                      t.bindTexture(
                        t.TEXTURE_2D,
                        this.emptyTextures[n]._glTextures[this.CONTEXT_UID]
                          .texture
                      ));
                  return this;
                }),
                (t.prototype.createVao = function () {
                  return new M["default"].VertexArrayObject(
                    this.gl,
                    this.state.attribState
                  );
                }),
                (t.prototype.bindVao = function (e) {
                  return this._activeVao === e
                    ? this
                    : (e
                        ? e.bind()
                        : this._activeVao && this._activeVao.unbind(),
                      (this._activeVao = e),
                      this);
                }),
                (t.prototype.reset = function () {
                  return (
                    this.setObjectRenderer(this.emptyRenderer),
                    (this._activeShader = null),
                    (this._activeRenderTarget = this.rootRenderTarget),
                    this.rootRenderTarget.activate(),
                    this.state.resetToDefault(),
                    this
                  );
                }),
                (t.prototype.handleContextLost = function (e) {
                  e.preventDefault();
                }),
                (t.prototype.handleContextRestored = function () {
                  this.textureManager.removeAll(),
                    this.filterManager.destroy(!0),
                    this._initContext();
                }),
                (t.prototype.destroy = function (t) {
                  this.destroyPlugins(),
                    this.view.removeEventListener(
                      "webglcontextlost",
                      this.handleContextLost
                    ),
                    this.view.removeEventListener(
                      "webglcontextrestored",
                      this.handleContextRestored
                    ),
                    this.textureManager.destroy(),
                    e.prototype.destroy.call(this, t),
                    (this.uid = 0),
                    this.maskManager.destroy(),
                    this.stencilManager.destroy(),
                    this.filterManager.destroy(),
                    (this.maskManager = null),
                    (this.filterManager = null),
                    (this.textureManager = null),
                    (this.currentRenderer = null),
                    (this.handleContextLost = null),
                    (this.handleContextRestored = null),
                    (this._contextOptions = null),
                    this.gl.useProgram(null),
                    this.gl.getExtension("WEBGL_lose_context") &&
                      this.gl.getExtension("WEBGL_lose_context").loseContext(),
                    (this.gl = null);
                }),
                t
              );
            })(l["default"]);
          (n["default"] = N), O.pluginTarget.mixin(N);
        },
        {
          "../../const": 46,
          "../../textures/BaseTexture": 112,
          "../../utils": 124,
          "../SystemRenderer": 76,
          "./TextureGarbageCollector": 82,
          "./TextureManager": 83,
          "./WebGLState": 85,
          "./managers/FilterManager": 90,
          "./managers/MaskManager": 91,
          "./managers/StencilManager": 92,
          "./utils/ObjectRenderer": 94,
          "./utils/RenderTarget": 96,
          "./utils/mapWebGLDrawModesToPixi": 99,
          "./utils/validateContext": 100,
          "pixi-gl-core": 15,
        },
      ],
      85: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("./utils/mapWebGLBlendModesToPixi"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = (function () {
              function e(t) {
                i(this, e),
                  (this.activeState = new Uint8Array(16)),
                  (this.defaultState = new Uint8Array(16)),
                  (this.defaultState[0] = 1),
                  (this.stackIndex = 0),
                  (this.stack = []),
                  (this.gl = t),
                  (this.maxAttribs = t.getParameter(t.MAX_VERTEX_ATTRIBS)),
                  (this.attribState = {
                    tempAttribState: new Array(this.maxAttribs),
                    attribState: new Array(this.maxAttribs),
                  }),
                  (this.blendModes = s["default"](t)),
                  (this.nativeVaoExtension =
                    t.getExtension("OES_vertex_array_object") ||
                    t.getExtension("MOZ_OES_vertex_array_object") ||
                    t.getExtension("WEBKIT_OES_vertex_array_object"));
              }
              return (
                (e.prototype.push = function () {
                  var e = this.stack[this.stackIndex];
                  e || (e = this.stack[this.stackIndex] = new Uint8Array(16)),
                    ++this.stackIndex;
                  for (var t = 0; t < this.activeState.length; t++)
                    e[t] = this.activeState[t];
                }),
                (e.prototype.pop = function () {
                  var e = this.stack[--this.stackIndex];
                  this.setState(e);
                }),
                (e.prototype.setState = function (e) {
                  this.setBlend(e[0]),
                    this.setDepthTest(e[1]),
                    this.setFrontFace(e[2]),
                    this.setCullFace(e[3]),
                    this.setBlendMode(e[4]);
                }),
                (e.prototype.setBlend = function (e) {
                  (e = e ? 1 : 0),
                    this.activeState[0] !== e &&
                      ((this.activeState[0] = e),
                      this.gl[e ? "enable" : "disable"](this.gl.BLEND));
                }),
                (e.prototype.setBlendMode = function (e) {
                  if (e !== this.activeState[4]) {
                    this.activeState[4] = e;
                    var t = this.blendModes[e];
                    2 === t.length
                      ? this.gl.blendFunc(t[0], t[1])
                      : this.gl.blendFuncSeparate(t[0], t[1], t[2], t[3]);
                  }
                }),
                (e.prototype.setDepthTest = function (e) {
                  (e = e ? 1 : 0),
                    this.activeState[1] !== e &&
                      ((this.activeState[1] = e),
                      this.gl[e ? "enable" : "disable"](this.gl.DEPTH_TEST));
                }),
                (e.prototype.setCullFace = function (e) {
                  (e = e ? 1 : 0),
                    this.activeState[3] !== e &&
                      ((this.activeState[3] = e),
                      this.gl[e ? "enable" : "disable"](this.gl.CULL_FACE));
                }),
                (e.prototype.setFrontFace = function (e) {
                  (e = e ? 1 : 0),
                    this.activeState[2] !== e &&
                      ((this.activeState[2] = e),
                      this.gl.frontFace(this.gl[e ? "CW" : "CCW"]));
                }),
                (e.prototype.resetAttributes = function () {
                  for (
                    var e = 0;
                    e < this.attribState.tempAttribState.length;
                    e++
                  )
                    this.attribState.tempAttribState[e] = 0;
                  for (var t = 0; t < this.attribState.attribState.length; t++)
                    this.attribState.attribState[t] = 0;
                  for (var n = 1; n < this.maxAttribs; n++)
                    this.gl.disableVertexAttribArray(n);
                }),
                (e.prototype.resetToDefault = function () {
                  this.nativeVaoExtension &&
                    this.nativeVaoExtension.bindVertexArrayOES(null),
                    this.resetAttributes();
                  for (var e = 0; e < this.activeState.length; ++e)
                    this.activeState[e] = 32;
                  this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, !1),
                    this.setState(this.defaultState);
                }),
                e
              );
            })();
          n["default"] = o;
        },
        { "./utils/mapWebGLBlendModesToPixi": 98 },
      ],
      86: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            o = e("./extractUniformsFromSrc"),
            a = i(o),
            l = e("../../../utils"),
            c = e("../../../const"),
            u = e("../../../settings"),
            h = i(u),
            d = {},
            p = (function () {
              function e(t, n, i) {
                r(this, e),
                  (this.vertexSrc = t || e.defaultVertexSrc),
                  (this.fragmentSrc = n || e.defaultFragmentSrc),
                  (this._blendMode = c.BLEND_MODES.NORMAL),
                  (this.uniformData =
                    i ||
                    a["default"](
                      this.vertexSrc,
                      this.fragmentSrc,
                      "projectionMatrix|uSampler"
                    )),
                  (this.uniforms = {});
                for (var s in this.uniformData)
                  (this.uniforms[s] = this.uniformData[s].value),
                    this.uniformData[s].type &&
                      (this.uniformData[s].type =
                        this.uniformData[s].type.toLowerCase());
                (this.glShaders = {}),
                  d[this.vertexSrc + this.fragmentSrc] ||
                    (d[this.vertexSrc + this.fragmentSrc] = l.uid()),
                  (this.glShaderKey = d[this.vertexSrc + this.fragmentSrc]),
                  (this.padding = 4),
                  (this.resolution = h["default"].RESOLUTION),
                  (this.enabled = !0),
                  (this.autoFit = !0);
              }
              return (
                (e.prototype.apply = function (e, t, n, i) {
                  e.applyFilter(this, t, n, i);
                }),
                s(
                  e,
                  [
                    {
                      key: "blendMode",
                      get: function () {
                        return this._blendMode;
                      },
                      set: function (e) {
                        this._blendMode = e;
                      },
                    },
                  ],
                  [
                    {
                      key: "defaultVertexSrc",
                      get: function () {
                        return [
                          "attribute vec2 aVertexPosition;",
                          "attribute vec2 aTextureCoord;",
                          "uniform mat3 projectionMatrix;",
                          "uniform mat3 filterMatrix;",
                          "varying vec2 vTextureCoord;",
                          "varying vec2 vFilterCoord;",
                          "void main(void){",
                          "   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);",
                          "   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;",
                          "   vTextureCoord = aTextureCoord ;",
                          "}",
                        ].join("\n");
                      },
                    },
                    {
                      key: "defaultFragmentSrc",
                      get: function () {
                        return [
                          "varying vec2 vTextureCoord;",
                          "varying vec2 vFilterCoord;",
                          "uniform sampler2D uSampler;",
                          "uniform sampler2D filterSampler;",
                          "void main(void){",
                          "   vec4 masky = texture2D(filterSampler, vFilterCoord);",
                          "   vec4 sample = texture2D(uSampler, vTextureCoord);",
                          "   vec4 color;",
                          "   if(mod(vFilterCoord.x, 1.0) > 0.5)",
                          "   {",
                          "     color = vec4(1.0, 0.0, 0.0, 1.0);",
                          "   }",
                          "   else",
                          "   {",
                          "     color = vec4(0.0, 1.0, 0.0, 1.0);",
                          "   }",
                          "   gl_FragColor = mix(sample, masky, 0.5);",
                          "   gl_FragColor *= sample.a;",
                          "}",
                        ].join("\n");
                      },
                    },
                  ]
                ),
                e
              );
            })();
          n["default"] = p;
        },
        {
          "../../../const": 46,
          "../../../settings": 101,
          "../../../utils": 124,
          "./extractUniformsFromSrc": 87,
        },
      ],
      87: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            var n = r(e),
              i = r(t);
            return Object.assign(n, i);
          }
          function r(e) {
            for (
              var t = new RegExp(
                  "^(projectionMatrix|uSampler|filterArea|filterClamp)$"
                ),
                n = {},
                i = void 0,
                r = e.replace(/\s+/g, " ").split(/\s*;\s*/),
                s = 0;
              s < r.length;
              s++
            ) {
              var o = r[s].trim();
              if (o.indexOf("uniform") > -1) {
                var l = o.split(" "),
                  c = l[1],
                  u = l[2],
                  h = 1;
                u.indexOf("[") > -1 &&
                  ((i = u.split(/\[|]/)), (u = i[0]), (h *= Number(i[1]))),
                  u.match(t) || (n[u] = { value: a(c, h), name: u, type: c });
              }
            }
            return n;
          }
          (n.__esModule = !0), (n["default"] = i);
          var s = e("pixi-gl-core"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = o["default"].shader.defaultValue;
        },
        { "pixi-gl-core": 15 },
      ],
      88: [
        function (e, t, n) {
          "use strict";
          function i(e, t, n) {
            var i = e.identity();
            return (
              i.translate(t.x / n.width, t.y / n.height),
              i.scale(n.width, n.height),
              i
            );
          }
          function r(e, t, n) {
            var i = e.identity();
            i.translate(t.x / n.width, t.y / n.height);
            var r = n.width / t.width,
              s = n.height / t.height;
            return i.scale(r, s), i;
          }
          function s(e, t, n, i) {
            var r = i._texture.baseTexture,
              s = e.set(n.width, 0, 0, n.height, t.x, t.y),
              a = i.worldTransform.copy(o.Matrix.TEMP_MATRIX);
            return (
              a.invert(),
              s.prepend(a),
              s.scale(1 / r.width, 1 / r.height),
              s.translate(i.anchor.x, i.anchor.y),
              s
            );
          }
          (n.__esModule = !0),
            (n.calculateScreenSpaceMatrix = i),
            (n.calculateNormalizedScreenSpaceMatrix = r),
            (n.calculateSpriteMatrix = s);
          var o = e("../../../math");
        },
        { "../../../math": 70 },
      ],
      89: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../Filter"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = e("../../../../math"),
            c =
              (e("path"),
              (function (e) {
                function t(n) {
                  i(this, t);
                  var s = new l.Matrix(),
                    o = r(
                      this,
                      e.call(
                        this,
                        "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",
                        "varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"
                      )
                    );
                  return (
                    (n.renderable = !1),
                    (o.maskSprite = n),
                    (o.maskMatrix = s),
                    o
                  );
                }
                return (
                  s(t, e),
                  (t.prototype.apply = function (e, t, n) {
                    var i = this.maskSprite;
                    (this.uniforms.mask = i._texture),
                      (this.uniforms.otherMatrix = e.calculateSpriteMatrix(
                        this.maskMatrix,
                        i
                      )),
                      (this.uniforms.alpha = i.worldAlpha),
                      e.applyFilter(this, t, n);
                  }),
                  t
                );
              })(a["default"]));
          n["default"] = c;
        },
        { "../../../../math": 70, "../Filter": 86, path: 8 },
      ],
      90: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function o(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var a = e("./WebGLManager"),
            l = i(a),
            c = e("../utils/RenderTarget"),
            u = i(c),
            h = e("../utils/Quad"),
            d = i(h),
            p = e("../../../math"),
            f = e("../../../Shader"),
            m = i(f),
            g = e("../filters/filterTransforms"),
            v = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(g),
            _ = e("bit-twiddle"),
            y = i(_),
            b = function x() {
              o(this, x),
                (this.renderTarget = null),
                (this.sourceFrame = new p.Rectangle()),
                (this.destinationFrame = new p.Rectangle()),
                (this.filters = []),
                (this.target = null),
                (this.resolution = 1);
            },
            w = (function (e) {
              function t(n) {
                o(this, t);
                var i = r(this, e.call(this, n));
                return (
                  (i.gl = i.renderer.gl),
                  (i.quad = new d["default"](i.gl, n.state.attribState)),
                  (i.shaderCache = {}),
                  (i.pool = {}),
                  (i.filterData = null),
                  (i.managedFilters = []),
                  i
                );
              }
              return (
                s(t, e),
                (t.prototype.pushFilter = function (e, t) {
                  var n = this.renderer,
                    i = this.filterData;
                  if (!i) {
                    i = this.renderer._activeRenderTarget.filterStack;
                    var r = new b();
                    (r.sourceFrame = r.destinationFrame =
                      this.renderer._activeRenderTarget.size),
                      (r.renderTarget = n._activeRenderTarget),
                      (this.renderer._activeRenderTarget.filterData = i =
                        { index: 0, stack: [r] }),
                      (this.filterData = i);
                  }
                  var s = i.stack[++i.index];
                  s || (s = i.stack[i.index] = new b());
                  var o = t[0].resolution,
                    a = 0 | t[0].padding,
                    l = e.filterArea || e.getBounds(!0),
                    c = s.sourceFrame,
                    u = s.destinationFrame;
                  (c.x = ((l.x * o) | 0) / o),
                    (c.y = ((l.y * o) | 0) / o),
                    (c.width = ((l.width * o) | 0) / o),
                    (c.height = ((l.height * o) | 0) / o),
                    i.stack[0].renderTarget.transform ||
                      (t[0].autoFit && c.fit(i.stack[0].destinationFrame)),
                    c.pad(a),
                    (u.width = c.width),
                    (u.height = c.height);
                  var h = this.getPotRenderTarget(n.gl, c.width, c.height, o);
                  (s.target = e),
                    (s.filters = t),
                    (s.resolution = o),
                    (s.renderTarget = h),
                    h.setFrame(u, c),
                    n.bindRenderTarget(h),
                    h.clear();
                }),
                (t.prototype.popFilter = function () {
                  var e = this.filterData,
                    t = e.stack[e.index - 1],
                    n = e.stack[e.index];
                  this.quad.map(n.renderTarget.size, n.sourceFrame).upload();
                  var i = n.filters;
                  if (1 === i.length)
                    i[0].apply(this, n.renderTarget, t.renderTarget, !1, n),
                      this.freePotRenderTarget(n.renderTarget);
                  else {
                    var r = n.renderTarget,
                      s = this.getPotRenderTarget(
                        this.renderer.gl,
                        n.sourceFrame.width,
                        n.sourceFrame.height,
                        n.resolution
                      );
                    s.setFrame(n.destinationFrame, n.sourceFrame), s.clear();
                    var o = 0;
                    for (o = 0; o < i.length - 1; ++o) {
                      i[o].apply(this, r, s, !0, n);
                      var a = r;
                      (r = s), (s = a);
                    }
                    i[o].apply(this, r, t.renderTarget, !1, n),
                      this.freePotRenderTarget(r),
                      this.freePotRenderTarget(s);
                  }
                  0 === --e.index && (this.filterData = null);
                }),
                (t.prototype.applyFilter = function (e, t, n, i) {
                  var r = this.renderer,
                    s = r.gl,
                    o = e.glShaders[r.CONTEXT_UID];
                  o ||
                    (e.glShaderKey
                      ? (o = this.shaderCache[e.glShaderKey]) ||
                        ((o = new m["default"](
                          this.gl,
                          e.vertexSrc,
                          e.fragmentSrc
                        )),
                        (e.glShaders[r.CONTEXT_UID] = this.shaderCache[
                          e.glShaderKey
                        ] =
                          o))
                      : (o = e.glShaders[r.CONTEXT_UID] =
                          new m["default"](
                            this.gl,
                            e.vertexSrc,
                            e.fragmentSrc
                          )),
                    this.managedFilters.push(e),
                    r.bindVao(null),
                    this.quad.initVao(o)),
                    r.bindVao(this.quad.vao),
                    r.bindRenderTarget(n),
                    i &&
                      (s.disable(s.SCISSOR_TEST),
                      r.clear(),
                      s.enable(s.SCISSOR_TEST)),
                    n === r.maskManager.scissorRenderTarget &&
                      r.maskManager.pushScissorMask(
                        null,
                        r.maskManager.scissorData
                      ),
                    r.bindShader(o);
                  var a = this.renderer.emptyTextures[0];
                  (this.renderer.boundTextures[0] = a),
                    this.syncUniforms(o, e),
                    r.state.setBlendMode(e.blendMode),
                    s.activeTexture(s.TEXTURE0),
                    s.bindTexture(s.TEXTURE_2D, t.texture.texture),
                    this.quad.vao.draw(this.renderer.gl.TRIANGLES, 6, 0),
                    s.bindTexture(
                      s.TEXTURE_2D,
                      a._glTextures[this.renderer.CONTEXT_UID].texture
                    );
                }),
                (t.prototype.syncUniforms = function (e, t) {
                  var n = t.uniformData,
                    i = t.uniforms,
                    r = 1,
                    s = void 0;
                  if (e.uniforms.filterArea) {
                    s = this.filterData.stack[this.filterData.index];
                    var o = e.uniforms.filterArea;
                    (o[0] = s.renderTarget.size.width),
                      (o[1] = s.renderTarget.size.height),
                      (o[2] = s.sourceFrame.x),
                      (o[3] = s.sourceFrame.y),
                      (e.uniforms.filterArea = o);
                  }
                  if (e.uniforms.filterClamp) {
                    s = s || this.filterData.stack[this.filterData.index];
                    var a = e.uniforms.filterClamp;
                    (a[0] = 0),
                      (a[1] = 0),
                      (a[2] =
                        (s.sourceFrame.width - 1) / s.renderTarget.size.width),
                      (a[3] =
                        (s.sourceFrame.height - 1) /
                        s.renderTarget.size.height),
                      (e.uniforms.filterClamp = a);
                  }
                  for (var l in n) {
                    var c = n[l].type;
                    if ("sampler2d" === c && 0 !== i[l]) {
                      if (i[l].baseTexture)
                        e.uniforms[l] = this.renderer.bindTexture(
                          i[l].baseTexture,
                          r
                        );
                      else {
                        e.uniforms[l] = r;
                        var u = this.renderer.gl;
                        (this.renderer.boundTextures[r] =
                          this.renderer.emptyTextures[r]),
                          u.activeTexture(u.TEXTURE0 + r),
                          i[l].texture.bind();
                      }
                      r++;
                    } else if ("mat3" === c)
                      e.uniforms[l] =
                        void 0 !== i[l].a ? i[l].toArray(!0) : i[l];
                    else if ("vec2" === c)
                      if (void 0 !== i[l].x) {
                        var h = e.uniforms[l] || new Float32Array(2);
                        (h[0] = i[l].x), (h[1] = i[l].y), (e.uniforms[l] = h);
                      } else e.uniforms[l] = i[l];
                    else
                      "float" === c
                        ? e.uniforms.data[l].value !== n[l] &&
                          (e.uniforms[l] = i[l])
                        : (e.uniforms[l] = i[l]);
                  }
                }),
                (t.prototype.getRenderTarget = function (e, t) {
                  var n = this.filterData.stack[this.filterData.index],
                    i = this.getPotRenderTarget(
                      this.renderer.gl,
                      n.sourceFrame.width,
                      n.sourceFrame.height,
                      t || n.resolution
                    );
                  return i.setFrame(n.destinationFrame, n.sourceFrame), i;
                }),
                (t.prototype.returnRenderTarget = function (e) {
                  this.freePotRenderTarget(e);
                }),
                (t.prototype.calculateScreenSpaceMatrix = function (e) {
                  var t = this.filterData.stack[this.filterData.index];
                  return v.calculateScreenSpaceMatrix(
                    e,
                    t.sourceFrame,
                    t.renderTarget.size
                  );
                }),
                (t.prototype.calculateNormalizedScreenSpaceMatrix = function (
                  e
                ) {
                  var t = this.filterData.stack[this.filterData.index];
                  return v.calculateNormalizedScreenSpaceMatrix(
                    e,
                    t.sourceFrame,
                    t.renderTarget.size,
                    t.destinationFrame
                  );
                }),
                (t.prototype.calculateSpriteMatrix = function (e, t) {
                  var n = this.filterData.stack[this.filterData.index];
                  return v.calculateSpriteMatrix(
                    e,
                    n.sourceFrame,
                    n.renderTarget.size,
                    t
                  );
                }),
                (t.prototype.destroy = function () {
                  for (
                    var e =
                        arguments.length > 0 &&
                        void 0 !== arguments[0] &&
                        arguments[0],
                      t = this.renderer,
                      n = this.managedFilters,
                      i = 0;
                    i < n.length;
                    i++
                  )
                    e || n[i].glShaders[t.CONTEXT_UID].destroy(),
                      delete n[i].glShaders[t.CONTEXT_UID];
                  (this.shaderCache = {}),
                    e ? (this.pool = {}) : this.emptyPool();
                }),
                (t.prototype.getPotRenderTarget = function (e, t, n, i) {
                  (t = y["default"].nextPow2(t * i)),
                    (n = y["default"].nextPow2(n * i));
                  var r = ((65535 & t) << 16) | (65535 & n);
                  this.pool[r] || (this.pool[r] = []);
                  var s = this.pool[r].pop();
                  if (!s) {
                    var o = this.renderer.boundTextures[0];
                    e.activeTexture(e.TEXTURE0),
                      (s = new u["default"](e, t, n, null, 1)),
                      e.bindTexture(
                        e.TEXTURE_2D,
                        o._glTextures[this.renderer.CONTEXT_UID].texture
                      );
                  }
                  return (
                    (s.resolution = i),
                    (s.defaultFrame.width = s.size.width = t / i),
                    (s.defaultFrame.height = s.size.height = n / i),
                    s
                  );
                }),
                (t.prototype.emptyPool = function () {
                  for (var e in this.pool) {
                    var t = this.pool[e];
                    if (t) for (var n = 0; n < t.length; n++) t[n].destroy(!0);
                  }
                  this.pool = {};
                }),
                (t.prototype.freePotRenderTarget = function (e) {
                  var t = e.size.width * e.resolution,
                    n = e.size.height * e.resolution,
                    i = ((65535 & t) << 16) | (65535 & n);
                  this.pool[i].push(e);
                }),
                t
              );
            })(l["default"]);
          n["default"] = w;
        },
        {
          "../../../Shader": 44,
          "../../../math": 70,
          "../filters/filterTransforms": 88,
          "../utils/Quad": 95,
          "../utils/RenderTarget": 96,
          "./WebGLManager": 93,
          "bit-twiddle": 1,
        },
      ],
      91: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("./WebGLManager"),
            l = i(a),
            c = e("../filters/spriteMask/SpriteMaskFilter"),
            u = i(c),
            h = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this, n));
                return (
                  (i.scissor = !1),
                  (i.scissorData = null),
                  (i.scissorRenderTarget = null),
                  (i.enableScissor = !0),
                  (i.alphaMaskPool = []),
                  (i.alphaMaskIndex = 0),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype.pushMask = function (e, t) {
                  if (t.texture) this.pushSpriteMask(e, t);
                  else if (
                    this.enableScissor &&
                    !this.scissor &&
                    this.renderer._activeRenderTarget.root &&
                    !this.renderer.stencilManager.stencilMaskStack.length &&
                    t.isFastRect()
                  ) {
                    var n = t.worldTransform,
                      i = Math.atan2(n.b, n.a);
                    (i = Math.round(i * (180 / Math.PI))),
                      i % 90
                        ? this.pushStencilMask(t)
                        : this.pushScissorMask(e, t);
                  } else this.pushStencilMask(t);
                }),
                (t.prototype.popMask = function (e, t) {
                  t.texture
                    ? this.popSpriteMask(e, t)
                    : this.enableScissor &&
                      !this.renderer.stencilManager.stencilMaskStack.length
                    ? this.popScissorMask(e, t)
                    : this.popStencilMask(e, t);
                }),
                (t.prototype.pushSpriteMask = function (e, t) {
                  var n = this.alphaMaskPool[this.alphaMaskIndex];
                  n ||
                    (n = this.alphaMaskPool[this.alphaMaskIndex] =
                      [new u["default"](t)]),
                    (n[0].resolution = this.renderer.resolution),
                    (n[0].maskSprite = t),
                    (e.filterArea = t.getBounds(!0)),
                    this.renderer.filterManager.pushFilter(e, n),
                    this.alphaMaskIndex++;
                }),
                (t.prototype.popSpriteMask = function () {
                  this.renderer.filterManager.popFilter(),
                    this.alphaMaskIndex--;
                }),
                (t.prototype.pushStencilMask = function (e) {
                  this.renderer.currentRenderer.stop(),
                    this.renderer.stencilManager.pushStencil(e);
                }),
                (t.prototype.popStencilMask = function () {
                  this.renderer.currentRenderer.stop(),
                    this.renderer.stencilManager.popStencil();
                }),
                (t.prototype.pushScissorMask = function (e, t) {
                  t.renderable = !0;
                  var n = this.renderer._activeRenderTarget,
                    i = t.getBounds();
                  i.fit(n.size),
                    (t.renderable = !1),
                    this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);
                  var r = this.renderer.resolution;
                  this.renderer.gl.scissor(
                    i.x * r,
                    (n.root ? n.size.height - i.y - i.height : i.y) * r,
                    i.width * r,
                    i.height * r
                  ),
                    (this.scissorRenderTarget = n),
                    (this.scissorData = t),
                    (this.scissor = !0);
                }),
                (t.prototype.popScissorMask = function () {
                  (this.scissorRenderTarget = null),
                    (this.scissorData = null),
                    (this.scissor = !1);
                  var e = this.renderer.gl;
                  e.disable(e.SCISSOR_TEST);
                }),
                t
              );
            })(l["default"]);
          n["default"] = h;
        },
        { "../filters/spriteMask/SpriteMaskFilter": 89, "./WebGLManager": 93 },
      ],
      92: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("./WebGLManager"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t(n) {
                i(this, t);
                var s = r(this, e.call(this, n));
                return (s.stencilMaskStack = null), s;
              }
              return (
                s(t, e),
                (t.prototype.setMaskStack = function (e) {
                  this.stencilMaskStack = e;
                  var t = this.renderer.gl;
                  0 === e.length
                    ? t.disable(t.STENCIL_TEST)
                    : t.enable(t.STENCIL_TEST);
                }),
                (t.prototype.pushStencil = function (e) {
                  this.renderer.setObjectRenderer(
                    this.renderer.plugins.graphics
                  ),
                    this.renderer._activeRenderTarget.attachStencilBuffer();
                  var t = this.renderer.gl,
                    n = this.stencilMaskStack.length;
                  0 === n && t.enable(t.STENCIL_TEST),
                    this.stencilMaskStack.push(e),
                    t.colorMask(!1, !1, !1, !1),
                    t.stencilFunc(t.EQUAL, n, this._getBitwiseMask()),
                    t.stencilOp(t.KEEP, t.KEEP, t.INCR),
                    this.renderer.plugins.graphics.render(e),
                    this._useCurrent();
                }),
                (t.prototype.popStencil = function () {
                  this.renderer.setObjectRenderer(
                    this.renderer.plugins.graphics
                  );
                  var e = this.renderer.gl,
                    t = this.stencilMaskStack.pop();
                  0 === this.stencilMaskStack.length
                    ? (e.disable(e.STENCIL_TEST),
                      e.clear(e.STENCIL_BUFFER_BIT),
                      e.clearStencil(0))
                    : (e.colorMask(!1, !1, !1, !1),
                      e.stencilOp(e.KEEP, e.KEEP, e.DECR),
                      this.renderer.plugins.graphics.render(t),
                      this._useCurrent());
                }),
                (t.prototype._useCurrent = function () {
                  var e = this.renderer.gl;
                  e.colorMask(!0, !0, !0, !0),
                    e.stencilFunc(
                      e.EQUAL,
                      this.stencilMaskStack.length,
                      this._getBitwiseMask()
                    ),
                    e.stencilOp(e.KEEP, e.KEEP, e.KEEP);
                }),
                (t.prototype._getBitwiseMask = function () {
                  return (1 << this.stencilMaskStack.length) - 1;
                }),
                (t.prototype.destroy = function () {
                  a["default"].prototype.destroy.call(this),
                    (this.stencilMaskStack.stencilStack = null);
                }),
                t
              );
            })(a["default"]);
          n["default"] = l;
        },
        { "./WebGLManager": 93 },
      ],
      93: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t) {
              i(this, e),
                (this.renderer = t),
                this.renderer.on("context", this.onContextChange, this);
            }
            return (
              (e.prototype.onContextChange = function () {}),
              (e.prototype.destroy = function () {
                this.renderer.off("context", this.onContextChange, this),
                  (this.renderer = null);
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      94: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../managers/WebGLManager"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t() {
                return i(this, t), r(this, e.apply(this, arguments));
              }
              return (
                s(t, e),
                (t.prototype.start = function () {}),
                (t.prototype.stop = function () {
                  this.flush();
                }),
                (t.prototype.flush = function () {}),
                (t.prototype.render = function () {}),
                t
              );
            })(a["default"]);
          n["default"] = l;
        },
        { "../managers/WebGLManager": 93 },
      ],
      95: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = e("pixi-gl-core"),
            o = i(s),
            a = e("../../../utils/createIndicesForQuads"),
            l = i(a),
            c = (function () {
              function e(t, n) {
                r(this, e),
                  (this.gl = t),
                  (this.vertices = new Float32Array([
                    -1, -1, 1, -1, 1, 1, -1, 1,
                  ])),
                  (this.uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
                  (this.interleaved = new Float32Array(16));
                for (var i = 0; 4 > i; i++)
                  (this.interleaved[4 * i] = this.vertices[2 * i]),
                    (this.interleaved[4 * i + 1] = this.vertices[2 * i + 1]),
                    (this.interleaved[4 * i + 2] = this.uvs[2 * i]),
                    (this.interleaved[4 * i + 3] = this.uvs[2 * i + 1]);
                (this.indices = l["default"](1)),
                  (this.vertexBuffer = o["default"].GLBuffer.createVertexBuffer(
                    t,
                    this.interleaved,
                    t.STATIC_DRAW
                  )),
                  (this.indexBuffer = o["default"].GLBuffer.createIndexBuffer(
                    t,
                    this.indices,
                    t.STATIC_DRAW
                  )),
                  (this.vao = new o["default"].VertexArrayObject(t, n));
              }
              return (
                (e.prototype.initVao = function (e) {
                  this.vao
                    .clear()
                    .addIndex(this.indexBuffer)
                    .addAttribute(
                      this.vertexBuffer,
                      e.attributes.aVertexPosition,
                      this.gl.FLOAT,
                      !1,
                      16,
                      0
                    )
                    .addAttribute(
                      this.vertexBuffer,
                      e.attributes.aTextureCoord,
                      this.gl.FLOAT,
                      !1,
                      16,
                      8
                    );
                }),
                (e.prototype.map = function (e, t) {
                  var n = 0,
                    i = 0;
                  return (
                    (this.uvs[0] = n),
                    (this.uvs[1] = i),
                    (this.uvs[2] = n + t.width / e.width),
                    (this.uvs[3] = i),
                    (this.uvs[4] = n + t.width / e.width),
                    (this.uvs[5] = i + t.height / e.height),
                    (this.uvs[6] = n),
                    (this.uvs[7] = i + t.height / e.height),
                    (n = t.x),
                    (i = t.y),
                    (this.vertices[0] = n),
                    (this.vertices[1] = i),
                    (this.vertices[2] = n + t.width),
                    (this.vertices[3] = i),
                    (this.vertices[4] = n + t.width),
                    (this.vertices[5] = i + t.height),
                    (this.vertices[6] = n),
                    (this.vertices[7] = i + t.height),
                    this
                  );
                }),
                (e.prototype.upload = function () {
                  for (var e = 0; 4 > e; e++)
                    (this.interleaved[4 * e] = this.vertices[2 * e]),
                      (this.interleaved[4 * e + 1] = this.vertices[2 * e + 1]),
                      (this.interleaved[4 * e + 2] = this.uvs[2 * e]),
                      (this.interleaved[4 * e + 3] = this.uvs[2 * e + 1]);
                  return this.vertexBuffer.upload(this.interleaved), this;
                }),
                (e.prototype.destroy = function () {
                  var e = this.gl;
                  e.deleteBuffer(this.vertexBuffer),
                    e.deleteBuffer(this.indexBuffer);
                }),
                e
              );
            })();
          n["default"] = c;
        },
        { "../../../utils/createIndicesForQuads": 122, "pixi-gl-core": 15 },
      ],
      96: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../../math"),
            s = e("../../../const"),
            o = e("../../../settings"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = e("pixi-gl-core"),
            c = (function () {
              function e(t, n, o, c, u, h) {
                i(this, e),
                  (this.gl = t),
                  (this.frameBuffer = null),
                  (this.texture = null),
                  (this.clearColor = [0, 0, 0, 0]),
                  (this.size = new r.Rectangle(0, 0, 1, 1)),
                  (this.resolution = u || a["default"].RESOLUTION),
                  (this.projectionMatrix = new r.Matrix()),
                  (this.transform = null),
                  (this.frame = null),
                  (this.defaultFrame = new r.Rectangle()),
                  (this.destinationFrame = null),
                  (this.sourceFrame = null),
                  (this.stencilBuffer = null),
                  (this.stencilMaskStack = []),
                  (this.filterData = null),
                  (this.scaleMode = void 0 !== c ? c : a["default"].SCALE_MODE),
                  (this.root = h),
                  this.root
                    ? ((this.frameBuffer = new l.GLFramebuffer(t, 100, 100)),
                      (this.frameBuffer.framebuffer = null))
                    : ((this.frameBuffer = l.GLFramebuffer.createRGBA(
                        t,
                        100,
                        100
                      )),
                      this.scaleMode === s.SCALE_MODES.NEAREST
                        ? this.frameBuffer.texture.enableNearestScaling()
                        : this.frameBuffer.texture.enableLinearScaling(),
                      (this.texture = this.frameBuffer.texture)),
                  this.setFrame(),
                  this.resize(n, o);
              }
              return (
                (e.prototype.clear = function (e) {
                  var t = e || this.clearColor;
                  this.frameBuffer.clear(t[0], t[1], t[2], t[3]);
                }),
                (e.prototype.attachStencilBuffer = function () {
                  this.root || this.frameBuffer.enableStencil();
                }),
                (e.prototype.setFrame = function (e, t) {
                  (this.destinationFrame =
                    e || this.destinationFrame || this.defaultFrame),
                    (this.sourceFrame =
                      t || this.sourceFrame || this.destinationFrame);
                }),
                (e.prototype.activate = function () {
                  var e = this.gl;
                  this.frameBuffer.bind(),
                    this.calculateProjection(
                      this.destinationFrame,
                      this.sourceFrame
                    ),
                    this.transform &&
                      this.projectionMatrix.append(this.transform),
                    this.destinationFrame !== this.sourceFrame
                      ? (e.enable(e.SCISSOR_TEST),
                        e.scissor(
                          0 | this.destinationFrame.x,
                          0 | this.destinationFrame.y,
                          (this.destinationFrame.width * this.resolution) | 0,
                          (this.destinationFrame.height * this.resolution) | 0
                        ))
                      : e.disable(e.SCISSOR_TEST),
                    e.viewport(
                      0 | this.destinationFrame.x,
                      0 | this.destinationFrame.y,
                      (this.destinationFrame.width * this.resolution) | 0,
                      (this.destinationFrame.height * this.resolution) | 0
                    );
                }),
                (e.prototype.calculateProjection = function (e, t) {
                  var n = this.projectionMatrix;
                  (t = t || e),
                    n.identity(),
                    this.root
                      ? ((n.a = (1 / e.width) * 2),
                        (n.d = (-1 / e.height) * 2),
                        (n.tx = -1 - t.x * n.a),
                        (n.ty = 1 - t.y * n.d))
                      : ((n.a = (1 / e.width) * 2),
                        (n.d = (1 / e.height) * 2),
                        (n.tx = -1 - t.x * n.a),
                        (n.ty = -1 - t.y * n.d));
                }),
                (e.prototype.resize = function (e, t) {
                  if (
                    ((e |= 0),
                    (t |= 0),
                    this.size.width !== e || this.size.height !== t)
                  ) {
                    (this.size.width = e),
                      (this.size.height = t),
                      (this.defaultFrame.width = e),
                      (this.defaultFrame.height = t),
                      this.frameBuffer.resize(
                        e * this.resolution,
                        t * this.resolution
                      );
                    var n = this.frame || this.size;
                    this.calculateProjection(n);
                  }
                }),
                (e.prototype.destroy = function () {
                  this.frameBuffer.destroy(),
                    (this.frameBuffer = null),
                    (this.texture = null);
                }),
                e
              );
            })();
          n["default"] = c;
        },
        {
          "../../../const": 46,
          "../../../math": 70,
          "../../../settings": 101,
          "pixi-gl-core": 15,
        },
      ],
      97: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            var n = !t;
            if (n) {
              var i = document.createElement("canvas");
              (i.width = 1),
                (i.height = 1),
                (t = o["default"].createContext(i));
            }
            for (var s = t.createShader(t.FRAGMENT_SHADER); ; ) {
              var l = a.replace(/%forloop%/gi, r(e));
              if (
                (t.shaderSource(s, l),
                t.compileShader(s),
                t.getShaderParameter(s, t.COMPILE_STATUS))
              )
                break;
              e = (e / 2) | 0;
            }
            return (
              n &&
                t.getExtension("WEBGL_lose_context") &&
                t.getExtension("WEBGL_lose_context").loseContext(),
              e
            );
          }
          function r(e) {
            for (var t = "", n = 0; e > n; ++n)
              n > 0 && (t += "\nelse "),
                e - 1 > n && (t += "if(test == " + n + ".0){}");
            return t;
          }
          (n.__esModule = !0), (n["default"] = i);
          var s = e("pixi-gl-core"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = [
              "precision mediump float;",
              "void main(void){",
              "float test = 0.1;",
              "%forloop%",
              "gl_FragColor = vec4(0.0);",
              "}",
            ].join("\n");
        },
        { "pixi-gl-core": 15 },
      ],
      98: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            var t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : [];
            return (
              (t[r.BLEND_MODES.NORMAL] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.ADD] = [e.ONE, e.DST_ALPHA]),
              (t[r.BLEND_MODES.MULTIPLY] = [
                e.DST_COLOR,
                e.ONE_MINUS_SRC_ALPHA,
              ]),
              (t[r.BLEND_MODES.SCREEN] = [e.ONE, e.ONE_MINUS_SRC_COLOR]),
              (t[r.BLEND_MODES.OVERLAY] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.DARKEN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.LIGHTEN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.COLOR_DODGE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.COLOR_BURN] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.HARD_LIGHT] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.SOFT_LIGHT] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.DIFFERENCE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.EXCLUSION] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.HUE] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.SATURATION] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.COLOR] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.LUMINOSITY] = [e.ONE, e.ONE_MINUS_SRC_ALPHA]),
              (t[r.BLEND_MODES.NORMAL_NPM] = [
                e.SRC_ALPHA,
                e.ONE_MINUS_SRC_ALPHA,
                e.ONE,
                e.ONE_MINUS_SRC_ALPHA,
              ]),
              (t[r.BLEND_MODES.ADD_NPM] = [
                e.SRC_ALPHA,
                e.DST_ALPHA,
                e.ONE,
                e.DST_ALPHA,
              ]),
              (t[r.BLEND_MODES.SCREEN_NPM] = [
                e.SRC_ALPHA,
                e.ONE_MINUS_SRC_COLOR,
                e.ONE,
                e.ONE_MINUS_SRC_COLOR,
              ]),
              t
            );
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("../../../const");
        },
        { "../../../const": 46 },
      ],
      99: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            var t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : {};
            return (
              (t[r.DRAW_MODES.POINTS] = e.POINTS),
              (t[r.DRAW_MODES.LINES] = e.LINES),
              (t[r.DRAW_MODES.LINE_LOOP] = e.LINE_LOOP),
              (t[r.DRAW_MODES.LINE_STRIP] = e.LINE_STRIP),
              (t[r.DRAW_MODES.TRIANGLES] = e.TRIANGLES),
              (t[r.DRAW_MODES.TRIANGLE_STRIP] = e.TRIANGLE_STRIP),
              (t[r.DRAW_MODES.TRIANGLE_FAN] = e.TRIANGLE_FAN),
              t
            );
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("../../../const");
        },
        { "../../../const": 46 },
      ],
      100: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            e.getContextAttributes().stencil ||
              console.warn(
                "Provided WebGL context does not have a stencil buffer, masks may not render correctly"
              );
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      101: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./utils/maxRecommendedTextures"),
            s = i(r),
            o = e("./utils/canUploadSameBuffer"),
            a = i(o);
          n["default"] = {
            TARGET_FPMS: 0.06,
            MIPMAP_TEXTURES: !0,
            RESOLUTION: 1,
            FILTER_RESOLUTION: 1,
            SPRITE_MAX_TEXTURES: s["default"](32),
            SPRITE_BATCH_SIZE: 4096,
            RETINA_PREFIX: /@([0-9\.]+)x/,
            RENDER_OPTIONS: {
              view: null,
              antialias: !1,
              forceFXAA: !1,
              autoResize: !1,
              transparent: !1,
              backgroundColor: 0,
              clearBeforeRender: !0,
              preserveDrawingBuffer: !1,
              roundPixels: !1,
              width: 800,
              height: 600,
              legacy: !1,
            },
            TRANSFORM_MODE: 0,
            GC_MODE: 0,
            GC_MAX_IDLE: 3600,
            GC_MAX_CHECK_COUNT: 600,
            WRAP_MODE: 0,
            SCALE_MODE: 0,
            PRECISION_VERTEX: "highp",
            PRECISION_FRAGMENT: "mediump",
            CAN_UPLOAD_SAME_BUFFER: a["default"](),
          };
        },
        {
          "./utils/canUploadSameBuffer": 121,
          "./utils/maxRecommendedTextures": 126,
        },
      ],
      102: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../math"),
            c = e("../utils"),
            u = e("../const"),
            h = e("../textures/Texture"),
            d = i(h),
            p = e("../display/Container"),
            f = i(p),
            m = new l.Point(),
            g = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this));
                return (
                  (i._anchor = new l.ObservablePoint(i._onAnchorUpdate, i)),
                  (i._texture = null),
                  (i._width = 0),
                  (i._height = 0),
                  (i._tint = null),
                  (i._tintRGB = null),
                  (i.tint = 16777215),
                  (i.blendMode = u.BLEND_MODES.NORMAL),
                  (i.shader = null),
                  (i.cachedTint = 16777215),
                  (i.texture = n || d["default"].EMPTY),
                  (i.vertexData = new Float32Array(8)),
                  (i.vertexTrimmedData = null),
                  (i._transformID = -1),
                  (i._textureID = -1),
                  (i._transformTrimmedID = -1),
                  (i._textureTrimmedID = -1),
                  (i.pluginName = "sprite"),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype._onTextureUpdate = function () {
                  (this._textureID = -1),
                    (this._textureTrimmedID = -1),
                    (this.cachedTint = 16777215),
                    this._width &&
                      (this.scale.x =
                        (c.sign(this.scale.x) * this._width) /
                        this._texture.orig.width),
                    this._height &&
                      (this.scale.y =
                        (c.sign(this.scale.y) * this._height) /
                        this._texture.orig.height);
                }),
                (t.prototype._onAnchorUpdate = function () {
                  (this._transformID = -1), (this._transformTrimmedID = -1);
                }),
                (t.prototype.calculateVertices = function () {
                  if (
                    this._transformID !== this.transform._worldID ||
                    this._textureID !== this._texture._updateID
                  ) {
                    (this._transformID = this.transform._worldID),
                      (this._textureID = this._texture._updateID);
                    var e = this._texture,
                      t = this.transform.worldTransform,
                      n = t.a,
                      i = t.b,
                      r = t.c,
                      s = t.d,
                      o = t.tx,
                      a = t.ty,
                      l = this.vertexData,
                      c = e.trim,
                      u = e.orig,
                      h = this._anchor,
                      d = 0,
                      p = 0,
                      f = 0,
                      m = 0;
                    c
                      ? ((p = c.x - h._x * u.width),
                        (d = p + c.width),
                        (m = c.y - h._y * u.height),
                        (f = m + c.height))
                      : ((p = -h._x * u.width),
                        (d = p + u.width),
                        (m = -h._y * u.height),
                        (f = m + u.height)),
                      (l[0] = n * p + r * m + o),
                      (l[1] = s * m + i * p + a),
                      (l[2] = n * d + r * m + o),
                      (l[3] = s * m + i * d + a),
                      (l[4] = n * d + r * f + o),
                      (l[5] = s * f + i * d + a),
                      (l[6] = n * p + r * f + o),
                      (l[7] = s * f + i * p + a);
                  }
                }),
                (t.prototype.calculateTrimmedVertices = function () {
                  if (this.vertexTrimmedData) {
                    if (
                      this._transformTrimmedID === this.transform._worldID &&
                      this._textureTrimmedID === this._texture._updateID
                    )
                      return;
                  } else this.vertexTrimmedData = new Float32Array(8);
                  (this._transformTrimmedID = this.transform._worldID),
                    (this._textureTrimmedID = this._texture._updateID);
                  var e = this._texture,
                    t = this.vertexTrimmedData,
                    n = e.orig,
                    i = this._anchor,
                    r = this.transform.worldTransform,
                    s = r.a,
                    o = r.b,
                    a = r.c,
                    l = r.d,
                    c = r.tx,
                    u = r.ty,
                    h = -i._x * n.width,
                    d = h + n.width,
                    p = -i._y * n.height,
                    f = p + n.height;
                  (t[0] = s * h + a * p + c),
                    (t[1] = l * p + o * h + u),
                    (t[2] = s * d + a * p + c),
                    (t[3] = l * p + o * d + u),
                    (t[4] = s * d + a * f + c),
                    (t[5] = l * f + o * d + u),
                    (t[6] = s * h + a * f + c),
                    (t[7] = l * f + o * h + u);
                }),
                (t.prototype._renderWebGL = function (e) {
                  this.calculateVertices(),
                    e.setObjectRenderer(e.plugins[this.pluginName]),
                    e.plugins[this.pluginName].render(this);
                }),
                (t.prototype._renderCanvas = function (e) {
                  e.plugins[this.pluginName].render(this);
                }),
                (t.prototype._calculateBounds = function () {
                  var e = this._texture.trim,
                    t = this._texture.orig;
                  !e || (e.width === t.width && e.height === t.height)
                    ? (this.calculateVertices(),
                      this._bounds.addQuad(this.vertexData))
                    : (this.calculateTrimmedVertices(),
                      this._bounds.addQuad(this.vertexTrimmedData));
                }),
                (t.prototype.getLocalBounds = function (t) {
                  return 0 === this.children.length
                    ? ((this._bounds.minX =
                        this._texture.orig.width * -this._anchor._x),
                      (this._bounds.minY =
                        this._texture.orig.height * -this._anchor._y),
                      (this._bounds.maxX =
                        this._texture.orig.width * (1 - this._anchor._x)),
                      (this._bounds.maxY =
                        this._texture.orig.height * (1 - this._anchor._y)),
                      t ||
                        (this._localBoundsRect ||
                          (this._localBoundsRect = new l.Rectangle()),
                        (t = this._localBoundsRect)),
                      this._bounds.getRectangle(t))
                    : e.prototype.getLocalBounds.call(this, t);
                }),
                (t.prototype.containsPoint = function (e) {
                  this.worldTransform.applyInverse(e, m);
                  var t = this._texture.orig.width,
                    n = this._texture.orig.height,
                    i = -t * this.anchor.x,
                    r = 0;
                  return (
                    m.x >= i &&
                    m.x < i + t &&
                    ((r = -n * this.anchor.y), m.y >= r && m.y < r + n)
                  );
                }),
                (t.prototype.destroy = function (t) {
                  if (
                    (e.prototype.destroy.call(this, t),
                    (this._anchor = null),
                    "boolean" == typeof t ? t : t && t.texture)
                  ) {
                    var n = "boolean" == typeof t ? t : t && t.baseTexture;
                    this._texture.destroy(!!n);
                  }
                  (this._texture = null), (this.shader = null);
                }),
                (t.from = function (e) {
                  return new t(d["default"].from(e));
                }),
                (t.fromFrame = function (e) {
                  var n = c.TextureCache[e];
                  if (!n)
                    throw new Error(
                      'The frameId "' +
                        e +
                        '" does not exist in the texture cache'
                    );
                  return new t(n);
                }),
                (t.fromImage = function (e, n, i) {
                  return new t(d["default"].fromImage(e, n, i));
                }),
                a(t, [
                  {
                    key: "width",
                    get: function () {
                      return Math.abs(this.scale.x) * this._texture.orig.width;
                    },
                    set: function (e) {
                      var t = c.sign(this.scale.x) || 1;
                      (this.scale.x = (t * e) / this._texture.orig.width),
                        (this._width = e);
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return Math.abs(this.scale.y) * this._texture.orig.height;
                    },
                    set: function (e) {
                      var t = c.sign(this.scale.y) || 1;
                      (this.scale.y = (t * e) / this._texture.orig.height),
                        (this._height = e);
                    },
                  },
                  {
                    key: "anchor",
                    get: function () {
                      return this._anchor;
                    },
                    set: function (e) {
                      this._anchor.copy(e);
                    },
                  },
                  {
                    key: "tint",
                    get: function () {
                      return this._tint;
                    },
                    set: function (e) {
                      (this._tint = e),
                        (this._tintRGB =
                          (e >> 16) + (65280 & e) + ((255 & e) << 16));
                    },
                  },
                  {
                    key: "texture",
                    get: function () {
                      return this._texture;
                    },
                    set: function (e) {
                      this._texture !== e &&
                        ((this._texture = e),
                        (this.cachedTint = 16777215),
                        (this._textureID = -1),
                        (this._textureTrimmedID = -1),
                        e &&
                          (e.baseTexture.hasLoaded
                            ? this._onTextureUpdate()
                            : e.once("update", this._onTextureUpdate, this)));
                    },
                  },
                ]),
                t
              );
            })(f["default"]);
          n["default"] = g;
        },
        {
          "../const": 46,
          "../display/Container": 48,
          "../math": 70,
          "../textures/Texture": 115,
          "../utils": 124,
        },
      ],
      103: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = e("../../renderers/canvas/CanvasRenderer"),
            o = i(s),
            a = e("../../const"),
            l = e("../../math"),
            c = e("./CanvasTinter"),
            u = i(c),
            h = new l.Matrix(),
            d = (function () {
              function e(t) {
                r(this, e), (this.renderer = t);
              }
              return (
                (e.prototype.render = function (e) {
                  var t = e._texture,
                    n = this.renderer,
                    i = t._frame.width,
                    r = t._frame.height,
                    s = e.transform.worldTransform,
                    o = 0,
                    c = 0;
                  if (
                    !(t.orig.width <= 0 || t.orig.height <= 0) &&
                    t.baseTexture.source &&
                    (n.setBlendMode(e.blendMode), t.valid)
                  ) {
                    n.context.globalAlpha = e.worldAlpha;
                    var d = t.baseTexture.scaleMode === a.SCALE_MODES.LINEAR;
                    n.smoothProperty &&
                      n.context[n.smoothProperty] !== d &&
                      (n.context[n.smoothProperty] = d),
                      t.trim
                        ? ((o =
                            t.trim.width / 2 +
                            t.trim.x -
                            e.anchor.x * t.orig.width),
                          (c =
                            t.trim.height / 2 +
                            t.trim.y -
                            e.anchor.y * t.orig.height))
                        : ((o = (0.5 - e.anchor.x) * t.orig.width),
                          (c = (0.5 - e.anchor.y) * t.orig.height)),
                      t.rotate &&
                        (s.copy(h),
                        (s = h),
                        l.GroupD8.matrixAppendRotationInv(s, t.rotate, o, c),
                        (o = 0),
                        (c = 0)),
                      (o -= i / 2),
                      (c -= r / 2),
                      n.roundPixels
                        ? (n.context.setTransform(
                            s.a,
                            s.b,
                            s.c,
                            s.d,
                            (s.tx * n.resolution) | 0,
                            (s.ty * n.resolution) | 0
                          ),
                          (o |= 0),
                          (c |= 0))
                        : n.context.setTransform(
                            s.a,
                            s.b,
                            s.c,
                            s.d,
                            s.tx * n.resolution,
                            s.ty * n.resolution
                          );
                    var p = t.baseTexture.resolution;
                    16777215 !== e.tint
                      ? ((e.cachedTint === e.tint &&
                          e.tintedTexture.tintId === e._texture._updateID) ||
                          ((e.cachedTint = e.tint),
                          (e.tintedTexture = u["default"].getTintedTexture(
                            e,
                            e.tint
                          ))),
                        n.context.drawImage(
                          e.tintedTexture,
                          0,
                          0,
                          i * p,
                          r * p,
                          o * n.resolution,
                          c * n.resolution,
                          i * n.resolution,
                          r * n.resolution
                        ))
                      : n.context.drawImage(
                          t.baseTexture.source,
                          t._frame.x * p,
                          t._frame.y * p,
                          i * p,
                          r * p,
                          o * n.resolution,
                          c * n.resolution,
                          i * n.resolution,
                          r * n.resolution
                        );
                  }
                }),
                (e.prototype.destroy = function () {
                  this.renderer = null;
                }),
                e
              );
            })();
          (n["default"] = d), o["default"].registerPlugin("sprite", d);
        },
        {
          "../../const": 46,
          "../../math": 70,
          "../../renderers/canvas/CanvasRenderer": 77,
          "./CanvasTinter": 104,
        },
      ],
      104: [
        function (e, t, n) {
          "use strict";
          n.__esModule = !0;
          var i = e("../../utils"),
            r = e("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = {
              getTintedTexture: function (e, t) {
                var n = e._texture;
                t = o.roundColor(t);
                var i = "#" + ("00000" + (0 | t).toString(16)).substr(-6);
                n.tintCache = n.tintCache || {};
                var r = n.tintCache[i],
                  s = void 0;
                if (r) {
                  if (r.tintId === n._updateID) return n.tintCache[i];
                  s = n.tintCache[i];
                } else s = o.canvas || document.createElement("canvas");
                if (
                  (o.tintMethod(n, t, s),
                  (s.tintId = n._updateID),
                  o.convertTintToImage)
                ) {
                  var a = new Image();
                  (a.src = s.toDataURL()), (n.tintCache[i] = a);
                } else (n.tintCache[i] = s), (o.canvas = null);
                return s;
              },
              tintWithMultiply: function (e, t, n) {
                var i = n.getContext("2d"),
                  r = e._frame.clone(),
                  s = e.baseTexture.resolution;
                (r.x *= s),
                  (r.y *= s),
                  (r.width *= s),
                  (r.height *= s),
                  (n.width = Math.ceil(r.width)),
                  (n.height = Math.ceil(r.height)),
                  i.save(),
                  (i.fillStyle =
                    "#" + ("00000" + (0 | t).toString(16)).substr(-6)),
                  i.fillRect(0, 0, r.width, r.height),
                  (i.globalCompositeOperation = "multiply"),
                  i.drawImage(
                    e.baseTexture.source,
                    r.x,
                    r.y,
                    r.width,
                    r.height,
                    0,
                    0,
                    r.width,
                    r.height
                  ),
                  (i.globalCompositeOperation = "destination-atop"),
                  i.drawImage(
                    e.baseTexture.source,
                    r.x,
                    r.y,
                    r.width,
                    r.height,
                    0,
                    0,
                    r.width,
                    r.height
                  ),
                  i.restore();
              },
              tintWithOverlay: function (e, t, n) {
                var i = n.getContext("2d"),
                  r = e._frame.clone(),
                  s = e.baseTexture.resolution;
                (r.x *= s),
                  (r.y *= s),
                  (r.width *= s),
                  (r.height *= s),
                  (n.width = Math.ceil(r.width)),
                  (n.height = Math.ceil(r.height)),
                  i.save(),
                  (i.globalCompositeOperation = "copy"),
                  (i.fillStyle =
                    "#" + ("00000" + (0 | t).toString(16)).substr(-6)),
                  i.fillRect(0, 0, r.width, r.height),
                  (i.globalCompositeOperation = "destination-atop"),
                  i.drawImage(
                    e.baseTexture.source,
                    r.x,
                    r.y,
                    r.width,
                    r.height,
                    0,
                    0,
                    r.width,
                    r.height
                  ),
                  i.restore();
              },
              tintWithPerPixel: function (e, t, n) {
                var r = n.getContext("2d"),
                  s = e._frame.clone(),
                  o = e.baseTexture.resolution;
                (s.x *= o),
                  (s.y *= o),
                  (s.width *= o),
                  (s.height *= o),
                  (n.width = Math.ceil(s.width)),
                  (n.height = Math.ceil(s.height)),
                  r.save(),
                  (r.globalCompositeOperation = "copy"),
                  r.drawImage(
                    e.baseTexture.source,
                    s.x,
                    s.y,
                    s.width,
                    s.height,
                    0,
                    0,
                    s.width,
                    s.height
                  ),
                  r.restore();
                for (
                  var a = i.hex2rgb(t),
                    l = a[0],
                    c = a[1],
                    u = a[2],
                    h = r.getImageData(0, 0, s.width, s.height),
                    d = h.data,
                    p = 0;
                  p < d.length;
                  p += 4
                )
                  (d[p + 0] *= l), (d[p + 1] *= c), (d[p + 2] *= u);
                r.putImageData(h, 0, 0);
              },
              roundColor: function (e) {
                var t = o.cacheStepsPerColorChannel,
                  n = i.hex2rgb(e);
                return (
                  (n[0] = Math.min(255, (n[0] / t) * t)),
                  (n[1] = Math.min(255, (n[1] / t) * t)),
                  (n[2] = Math.min(255, (n[2] / t) * t)),
                  i.rgb2hex(n)
                );
              },
              cacheStepsPerColorChannel: 8,
              convertTintToImage: !1,
              canUseMultiply: s["default"](),
              tintMethod: 0,
            };
          (o.tintMethod = o.canUseMultiply
            ? o.tintWithMultiply
            : o.tintWithPerPixel),
            (n["default"] = o);
        },
        {
          "../../renderers/canvas/utils/canUseNewCanvasBlendModes": 80,
          "../../utils": 124,
        },
      ],
      105: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t) {
              i(this, e),
                (this.vertices = new ArrayBuffer(t)),
                (this.float32View = new Float32Array(this.vertices)),
                (this.uint32View = new Uint32Array(this.vertices));
            }
            return (
              (e.prototype.destroy = function () {
                (this.vertices = null),
                  (this.positions = null),
                  (this.uvs = null),
                  (this.colors = null);
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      106: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../../renderers/webgl/utils/ObjectRenderer"),
            l = i(a),
            c = e("../../renderers/webgl/WebGLRenderer"),
            u = i(c),
            h = e("../../utils/createIndicesForQuads"),
            d = i(h),
            p = e("./generateMultiTextureShader"),
            f = i(p),
            m = e("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),
            g = i(m),
            v = e("./BatchBuffer"),
            _ = i(v),
            y = e("../../settings"),
            b = i(y),
            w = e("../../utils"),
            x = e("pixi-gl-core"),
            C = i(x),
            T = e("bit-twiddle"),
            S = i(T),
            E = 0,
            k = 0,
            P = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this, n));
                (i.vertSize = 5),
                  (i.vertByteSize = 4 * i.vertSize),
                  (i.size = b["default"].SPRITE_BATCH_SIZE),
                  (i.buffers = []);
                for (var o = 1; o <= S["default"].nextPow2(i.size); o *= 2)
                  i.buffers.push(new _["default"](4 * o * i.vertByteSize));
                (i.indices = d["default"](i.size)),
                  (i.shader = null),
                  (i.currentIndex = 0),
                  (i.groups = []);
                for (var a = 0; a < i.size; a++)
                  i.groups[a] = {
                    textures: [],
                    textureCount: 0,
                    ids: [],
                    size: 0,
                    start: 0,
                    blend: 0,
                  };
                return (
                  (i.sprites = []),
                  (i.vertexBuffers = []),
                  (i.vaos = []),
                  (i.vaoMax = 2),
                  (i.vertexCount = 0),
                  i.renderer.on("prerender", i.onPrerender, i),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype.onContextChange = function () {
                  var e = this.renderer.gl;
                  this.renderer.legacy
                    ? (this.MAX_TEXTURES = 1)
                    : ((this.MAX_TEXTURES = Math.min(
                        e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),
                        b["default"].SPRITE_MAX_TEXTURES
                      )),
                      (this.MAX_TEXTURES = g["default"](this.MAX_TEXTURES, e))),
                    (this.shader = f["default"](e, this.MAX_TEXTURES)),
                    (this.indexBuffer = C["default"].GLBuffer.createIndexBuffer(
                      e,
                      this.indices,
                      e.STATIC_DRAW
                    )),
                    this.renderer.bindVao(null);
                  for (
                    var t = this.shader.attributes, n = 0;
                    n < this.vaoMax;
                    n++
                  ) {
                    var i = (this.vertexBuffers[n] = C[
                        "default"
                      ].GLBuffer.createVertexBuffer(e, null, e.STREAM_DRAW)),
                      r = this.renderer
                        .createVao()
                        .addIndex(this.indexBuffer)
                        .addAttribute(
                          i,
                          t.aVertexPosition,
                          e.FLOAT,
                          !1,
                          this.vertByteSize,
                          0
                        )
                        .addAttribute(
                          i,
                          t.aTextureCoord,
                          e.UNSIGNED_SHORT,
                          !0,
                          this.vertByteSize,
                          8
                        )
                        .addAttribute(
                          i,
                          t.aColor,
                          e.UNSIGNED_BYTE,
                          !0,
                          this.vertByteSize,
                          12
                        );
                    t.aTextureId &&
                      r.addAttribute(
                        i,
                        t.aTextureId,
                        e.FLOAT,
                        !1,
                        this.vertByteSize,
                        16
                      ),
                      (this.vaos[n] = r);
                  }
                  (this.vao = this.vaos[0]),
                    (this.currentBlendMode = 99999),
                    (this.boundTextures = new Array(this.MAX_TEXTURES));
                }),
                (t.prototype.onPrerender = function () {
                  this.vertexCount = 0;
                }),
                (t.prototype.render = function (e) {
                  this.currentIndex >= this.size && this.flush(),
                    e._texture._uvs && (this.sprites[this.currentIndex++] = e);
                }),
                (t.prototype.flush = function () {
                  if (0 !== this.currentIndex) {
                    var e = this.renderer.gl,
                      t = this.MAX_TEXTURES,
                      n = S["default"].nextPow2(this.currentIndex),
                      i = S["default"].log2(n),
                      r = this.buffers[i],
                      s = this.sprites,
                      o = this.groups,
                      a = r.float32View,
                      l = r.uint32View,
                      c = this.boundTextures,
                      u = this.renderer.boundTextures,
                      h = this.renderer.textureGC.count,
                      d = 0,
                      p = void 0,
                      f = void 0,
                      m = 1,
                      g = 0,
                      v = o[0],
                      _ = void 0,
                      y = void 0,
                      x =
                        w.premultiplyBlendMode[
                          s[0]._texture.baseTexture.premultipliedAlpha ? 1 : 0
                        ][s[0].blendMode];
                    (v.textureCount = 0), (v.start = 0), (v.blend = x), E++;
                    var T = void 0;
                    for (T = 0; t > T; ++T)
                      (c[T] = u[T]), (c[T]._virtalBoundId = T);
                    for (T = 0; T < this.currentIndex; ++T) {
                      var P = s[T];
                      p = P._texture.baseTexture;
                      var I =
                        w.premultiplyBlendMode[Number(p.premultipliedAlpha)][
                          P.blendMode
                        ];
                      if (
                        (x !== I && ((x = I), (f = null), (g = t), E++),
                        f !== p && ((f = p), p._enabled !== E))
                      ) {
                        if (
                          (g === t &&
                            (E++,
                            (v.size = T - v.start),
                            (g = 0),
                            (v = o[m++]),
                            (v.blend = x),
                            (v.textureCount = 0),
                            (v.start = T)),
                          (p.touched = h),
                          -1 === p._virtalBoundId)
                        )
                          for (var A = 0; t > A; ++A) {
                            var O = (A + k) % t,
                              D = c[O];
                            if (D._enabled !== E) {
                              k++,
                                (D._virtalBoundId = -1),
                                (p._virtalBoundId = O),
                                (c[O] = p);
                              break;
                            }
                          }
                        (p._enabled = E),
                          v.textureCount++,
                          (v.ids[g] = p._virtalBoundId),
                          (v.textures[g++] = p);
                      }
                      if (
                        ((_ = P.vertexData),
                        (y = P._texture._uvs.uvsUint32),
                        this.renderer.roundPixels)
                      ) {
                        var M = this.renderer.resolution;
                        (a[d] = ((_[0] * M) | 0) / M),
                          (a[d + 1] = ((_[1] * M) | 0) / M),
                          (a[d + 5] = ((_[2] * M) | 0) / M),
                          (a[d + 6] = ((_[3] * M) | 0) / M),
                          (a[d + 10] = ((_[4] * M) | 0) / M),
                          (a[d + 11] = ((_[5] * M) | 0) / M),
                          (a[d + 15] = ((_[6] * M) | 0) / M),
                          (a[d + 16] = ((_[7] * M) | 0) / M);
                      } else
                        (a[d] = _[0]),
                          (a[d + 1] = _[1]),
                          (a[d + 5] = _[2]),
                          (a[d + 6] = _[3]),
                          (a[d + 10] = _[4]),
                          (a[d + 11] = _[5]),
                          (a[d + 15] = _[6]),
                          (a[d + 16] = _[7]);
                      (l[d + 2] = y[0]),
                        (l[d + 7] = y[1]),
                        (l[d + 12] = y[2]),
                        (l[d + 17] = y[3]);
                      var R = Math.min(P.worldAlpha, 1),
                        L =
                          1 > R && p.premultipliedAlpha
                            ? w.premultiplyTint(P._tintRGB, R)
                            : P._tintRGB + ((255 * R) << 24);
                      (l[d + 3] = l[d + 8] = l[d + 13] = l[d + 18] = L),
                        (a[d + 4] =
                          a[d + 9] =
                          a[d + 14] =
                          a[d + 19] =
                            p._virtalBoundId),
                        (d += 20);
                    }
                    if (
                      ((v.size = T - v.start),
                      b["default"].CAN_UPLOAD_SAME_BUFFER)
                    )
                      this.vertexBuffers[this.vertexCount].upload(
                        r.vertices,
                        0,
                        !0
                      );
                    else {
                      if (this.vaoMax <= this.vertexCount) {
                        this.vaoMax++;
                        var N = this.shader.attributes,
                          U = (this.vertexBuffers[this.vertexCount] = C[
                            "default"
                          ].GLBuffer.createVertexBuffer(
                            e,
                            null,
                            e.STREAM_DRAW
                          )),
                          B = this.renderer
                            .createVao()
                            .addIndex(this.indexBuffer)
                            .addAttribute(
                              U,
                              N.aVertexPosition,
                              e.FLOAT,
                              !1,
                              this.vertByteSize,
                              0
                            )
                            .addAttribute(
                              U,
                              N.aTextureCoord,
                              e.UNSIGNED_SHORT,
                              !0,
                              this.vertByteSize,
                              8
                            )
                            .addAttribute(
                              U,
                              N.aColor,
                              e.UNSIGNED_BYTE,
                              !0,
                              this.vertByteSize,
                              12
                            );
                        N.aTextureId &&
                          B.addAttribute(
                            U,
                            N.aTextureId,
                            e.FLOAT,
                            !1,
                            this.vertByteSize,
                            16
                          ),
                          (this.vaos[this.vertexCount] = B);
                      }
                      this.renderer.bindVao(this.vaos[this.vertexCount]),
                        this.vertexBuffers[this.vertexCount].upload(
                          r.vertices,
                          0,
                          !1
                        ),
                        this.vertexCount++;
                    }
                    for (T = 0; t > T; ++T) u[T]._virtalBoundId = -1;
                    for (T = 0; m > T; ++T) {
                      for (var F = o[T], j = F.textureCount, H = 0; j > H; H++)
                        (f = F.textures[H]),
                          u[F.ids[H]] !== f &&
                            this.renderer.bindTexture(f, F.ids[H], !0),
                          (f._virtalBoundId = -1);
                      this.renderer.state.setBlendMode(F.blend),
                        e.drawElements(
                          e.TRIANGLES,
                          6 * F.size,
                          e.UNSIGNED_SHORT,
                          6 * F.start * 2
                        );
                    }
                    this.currentIndex = 0;
                  }
                }),
                (t.prototype.start = function () {
                  this.renderer.bindShader(this.shader),
                    b["default"].CAN_UPLOAD_SAME_BUFFER &&
                      (this.renderer.bindVao(this.vaos[this.vertexCount]),
                      this.vertexBuffers[this.vertexCount].bind());
                }),
                (t.prototype.stop = function () {
                  this.flush();
                }),
                (t.prototype.destroy = function () {
                  for (var t = 0; t < this.vaoMax; t++)
                    this.vertexBuffers[t] && this.vertexBuffers[t].destroy(),
                      this.vaos[t] && this.vaos[t].destroy();
                  this.indexBuffer && this.indexBuffer.destroy(),
                    this.renderer.off("prerender", this.onPrerender, this),
                    e.prototype.destroy.call(this),
                    this.shader &&
                      (this.shader.destroy(), (this.shader = null)),
                    (this.vertexBuffers = null),
                    (this.vaos = null),
                    (this.indexBuffer = null),
                    (this.indices = null),
                    (this.sprites = null);
                  for (var n = 0; n < this.buffers.length; ++n)
                    this.buffers[n].destroy();
                }),
                t
              );
            })(l["default"]);
          (n["default"] = P), u["default"].registerPlugin("sprite", P);
        },
        {
          "../../renderers/webgl/WebGLRenderer": 84,
          "../../renderers/webgl/utils/ObjectRenderer": 94,
          "../../renderers/webgl/utils/checkMaxIfStatmentsInShader": 97,
          "../../settings": 101,
          "../../utils": 124,
          "../../utils/createIndicesForQuads": 122,
          "./BatchBuffer": 105,
          "./generateMultiTextureShader": 107,
          "bit-twiddle": 1,
          "pixi-gl-core": 15,
        },
      ],
      107: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            var n = a;
            (n = n.replace(/%count%/gi, t)),
              (n = n.replace(/%forloop%/gi, r(t)));
            for (
              var i = new o["default"](
                  e,
                  "precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",
                  n
                ),
                s = [],
                l = 0;
              t > l;
              l++
            )
              s[l] = l;
            return i.bind(), (i.uniforms.uSamplers = s), i;
          }
          function r(e) {
            var t = "";
            (t += "\n"), (t += "\n");
            for (var n = 0; e > n; n++)
              n > 0 && (t += "\nelse "),
                e - 1 > n && (t += "if(textureId == " + n + ".0)"),
                (t += "\n{"),
                (t +=
                  "\n	color = texture2D(uSamplers[" + n + "], vTextureCoord);"),
                (t += "\n}");
            return (t += "\n"), (t += "\n");
          }
          (n.__esModule = !0), (n["default"] = i);
          var s = e("../../Shader"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a =
              (e("path"),
              [
                "varying vec2 vTextureCoord;",
                "varying vec4 vColor;",
                "varying float vTextureId;",
                "uniform sampler2D uSamplers[%count%];",
                "void main(void){",
                "vec4 color;",
                "float textureId = floor(vTextureId+0.5);",
                "%forloop%",
                "gl_FragColor = color * vColor;",
                "}",
              ].join("\n"));
        },
        { "../../Shader": 44, path: 8 },
      ],
      108: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../sprites/Sprite"),
            c = i(l),
            u = e("../textures/Texture"),
            h = i(u),
            d = e("../math"),
            p = e("../utils"),
            f = e("../const"),
            m = e("../settings"),
            g = i(m),
            v = e("./TextStyle"),
            _ = i(v),
            y = e("./TextMetrics"),
            b = i(y),
            w = e("../utils/trimCanvas"),
            x = i(w),
            C = { texture: !0, children: !1, baseTexture: !0 },
            T = (function (e) {
              function t(n, i, o) {
                r(this, t),
                  (o = o || document.createElement("canvas")),
                  (o.width = 3),
                  (o.height = 3);
                var a = h["default"].fromCanvas(
                  o,
                  g["default"].SCALE_MODE,
                  "text"
                );
                (a.orig = new d.Rectangle()), (a.trim = new d.Rectangle());
                var l = s(this, e.call(this, a));
                return (
                  h["default"].addToCache(
                    l._texture,
                    l._texture.baseTexture.textureCacheIds[0]
                  ),
                  (l.canvas = o),
                  (l.context = l.canvas.getContext("2d")),
                  (l.resolution = g["default"].RESOLUTION),
                  (l._text = null),
                  (l._style = null),
                  (l._styleListener = null),
                  (l._font = ""),
                  (l.text = n),
                  (l.style = i),
                  (l.localStyleID = -1),
                  l
                );
              }
              return (
                o(t, e),
                (t.prototype.updateText = function (e) {
                  var t = this._style;
                  if (
                    (this.localStyleID !== t.styleID &&
                      ((this.dirty = !0), (this.localStyleID = t.styleID)),
                    this.dirty || !e)
                  ) {
                    this._font = this._style.toFontString();
                    var n = this.context,
                      i = b["default"].measureText(
                        this._text,
                        this._style,
                        this._style.wordWrap,
                        this.canvas
                      ),
                      r = i.width,
                      s = i.height,
                      o = i.lines,
                      a = i.lineHeight,
                      l = i.lineWidths,
                      c = i.maxLineWidth,
                      u = i.fontProperties;
                    (this.canvas.width = Math.ceil(
                      (r + 2 * t.padding) * this.resolution
                    )),
                      (this.canvas.height = Math.ceil(
                        (s + 2 * t.padding) * this.resolution
                      )),
                      n.scale(this.resolution, this.resolution),
                      n.clearRect(0, 0, this.canvas.width, this.canvas.height),
                      (n.font = this._font),
                      (n.strokeStyle = t.stroke),
                      (n.lineWidth = t.strokeThickness),
                      (n.textBaseline = t.textBaseline),
                      (n.lineJoin = t.lineJoin),
                      (n.miterLimit = t.miterLimit);
                    var h = void 0,
                      d = void 0;
                    if (t.dropShadow) {
                      (n.fillStyle = t.dropShadowColor),
                        (n.globalAlpha = t.dropShadowAlpha),
                        (n.shadowBlur = t.dropShadowBlur),
                        t.dropShadowBlur > 0 &&
                          (n.shadowColor = t.dropShadowColor);
                      for (
                        var p =
                            Math.cos(t.dropShadowAngle) * t.dropShadowDistance,
                          f =
                            Math.sin(t.dropShadowAngle) * t.dropShadowDistance,
                          m = 0;
                        m < o.length;
                        m++
                      )
                        (h = t.strokeThickness / 2),
                          (d = t.strokeThickness / 2 + m * a + u.ascent),
                          "right" === t.align
                            ? (h += c - l[m])
                            : "center" === t.align && (h += (c - l[m]) / 2),
                          t.fill &&
                            (this.drawLetterSpacing(
                              o[m],
                              h + p + t.padding,
                              d + f + t.padding
                            ),
                            t.stroke &&
                              t.strokeThickness &&
                              ((n.strokeStyle = t.dropShadowColor),
                              this.drawLetterSpacing(
                                o[m],
                                h + p + t.padding,
                                d + f + t.padding,
                                !0
                              ),
                              (n.strokeStyle = t.stroke)));
                    }
                    (n.shadowBlur = 0),
                      (n.globalAlpha = 1),
                      (n.fillStyle = this._generateFillStyle(t, o));
                    for (var g = 0; g < o.length; g++)
                      (h = t.strokeThickness / 2),
                        (d = t.strokeThickness / 2 + g * a + u.ascent),
                        "right" === t.align
                          ? (h += c - l[g])
                          : "center" === t.align && (h += (c - l[g]) / 2),
                        t.stroke &&
                          t.strokeThickness &&
                          this.drawLetterSpacing(
                            o[g],
                            h + t.padding,
                            d + t.padding,
                            !0
                          ),
                        t.fill &&
                          this.drawLetterSpacing(
                            o[g],
                            h + t.padding,
                            d + t.padding
                          );
                    this.updateTexture();
                  }
                }),
                (t.prototype.drawLetterSpacing = function (e, t, n) {
                  var i =
                      arguments.length > 3 &&
                      void 0 !== arguments[3] &&
                      arguments[3],
                    r = this._style,
                    s = r.letterSpacing;
                  if (0 === s)
                    return void (i
                      ? this.context.strokeText(e, t, n)
                      : this.context.fillText(e, t, n));
                  for (
                    var o = String.prototype.split.call(e, ""),
                      a = t,
                      l = 0,
                      c = "";
                    l < e.length;

                  )
                    (c = o[l++]),
                      i
                        ? this.context.strokeText(c, a, n)
                        : this.context.fillText(c, a, n),
                      (a += this.context.measureText(c).width + s);
                }),
                (t.prototype.updateTexture = function () {
                  var e = this.canvas;
                  if (this._style.trim) {
                    var t = x["default"](e);
                    (e.width = t.width),
                      (e.height = t.height),
                      this.context.putImageData(t.data, 0, 0);
                  }
                  var n = this._texture,
                    i = this._style,
                    r = i.trim ? 0 : i.padding,
                    s = n.baseTexture;
                  (s.hasLoaded = !0),
                    (s.resolution = this.resolution),
                    (s.realWidth = e.width),
                    (s.realHeight = e.height),
                    (s.width = e.width / this.resolution),
                    (s.height = e.height / this.resolution),
                    (n.trim.width = n._frame.width = e.width / this.resolution),
                    (n.trim.height = n._frame.height =
                      e.height / this.resolution),
                    (n.trim.x = -r),
                    (n.trim.y = -r),
                    (n.orig.width = n._frame.width - 2 * r),
                    (n.orig.height = n._frame.height - 2 * r),
                    this._onTextureUpdate(),
                    s.emit("update", s),
                    (this.dirty = !1);
                }),
                (t.prototype.renderWebGL = function (t) {
                  this.resolution !== t.resolution &&
                    ((this.resolution = t.resolution), (this.dirty = !0)),
                    this.updateText(!0),
                    e.prototype.renderWebGL.call(this, t);
                }),
                (t.prototype._renderCanvas = function (t) {
                  this.resolution !== t.resolution &&
                    ((this.resolution = t.resolution), (this.dirty = !0)),
                    this.updateText(!0),
                    e.prototype._renderCanvas.call(this, t);
                }),
                (t.prototype.getLocalBounds = function (t) {
                  return (
                    this.updateText(!0),
                    e.prototype.getLocalBounds.call(this, t)
                  );
                }),
                (t.prototype._calculateBounds = function () {
                  this.updateText(!0),
                    this.calculateVertices(),
                    this._bounds.addQuad(this.vertexData);
                }),
                (t.prototype._onStyleChange = function () {
                  this.dirty = !0;
                }),
                (t.prototype._generateFillStyle = function (e, t) {
                  if (!Array.isArray(e.fill)) return e.fill;
                  if (navigator.isCocoonJS) return e.fill[0];
                  var n = void 0,
                    i = void 0,
                    r = void 0,
                    s = void 0,
                    o = this.canvas.width / this.resolution,
                    a = this.canvas.height / this.resolution,
                    l = e.fill.slice(),
                    c = e.fillGradientStops.slice();
                  if (!c.length)
                    for (var u = l.length + 1, h = 1; u > h; ++h) c.push(h / u);
                  if (
                    (l.unshift(e.fill[0]),
                    c.unshift(0),
                    l.push(e.fill[e.fill.length - 1]),
                    c.push(1),
                    e.fillGradientType === f.TEXT_GRADIENT.LINEAR_VERTICAL)
                  ) {
                    (n = this.context.createLinearGradient(o / 2, 0, o / 2, a)),
                      (i = (l.length + 1) * t.length),
                      (r = 0);
                    for (var d = 0; d < t.length; d++) {
                      r += 1;
                      for (var p = 0; p < l.length; p++)
                        (s =
                          "number" == typeof c[p]
                            ? c[p] / t.length + d / t.length
                            : r / i),
                          n.addColorStop(s, l[p]),
                          r++;
                    }
                  } else {
                    (n = this.context.createLinearGradient(0, a / 2, o, a / 2)),
                      (i = l.length + 1),
                      (r = 1);
                    for (var m = 0; m < l.length; m++)
                      (s = "number" == typeof c[m] ? c[m] : r / i),
                        n.addColorStop(s, l[m]),
                        r++;
                  }
                  return n;
                }),
                (t.prototype.destroy = function (t) {
                  "boolean" == typeof t && (t = { children: t }),
                    (t = Object.assign({}, C, t)),
                    e.prototype.destroy.call(this, t),
                    (this.context = null),
                    (this.canvas = null),
                    (this._style = null);
                }),
                a(t, [
                  {
                    key: "width",
                    get: function () {
                      return (
                        this.updateText(!0),
                        Math.abs(this.scale.x) * this._texture.orig.width
                      );
                    },
                    set: function (e) {
                      this.updateText(!0);
                      var t = p.sign(this.scale.x) || 1;
                      (this.scale.x = (t * e) / this._texture.orig.width),
                        (this._width = e);
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return (
                        this.updateText(!0),
                        Math.abs(this.scale.y) * this._texture.orig.height
                      );
                    },
                    set: function (e) {
                      this.updateText(!0);
                      var t = p.sign(this.scale.y) || 1;
                      (this.scale.y = (t * e) / this._texture.orig.height),
                        (this._height = e);
                    },
                  },
                  {
                    key: "style",
                    get: function () {
                      return this._style;
                    },
                    set: function (e) {
                      (e = e || {}),
                        (this._style =
                          e instanceof _["default"] ? e : new _["default"](e)),
                        (this.localStyleID = -1),
                        (this.dirty = !0);
                    },
                  },
                  {
                    key: "text",
                    get: function () {
                      return this._text;
                    },
                    set: function (e) {
                      (e = String(
                        "" === e || null === e || void 0 === e ? " " : e
                      )),
                        this._text !== e &&
                          ((this._text = e), (this.dirty = !0));
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          n["default"] = T;
        },
        {
          "../const": 46,
          "../math": 70,
          "../settings": 101,
          "../sprites/Sprite": 102,
          "../textures/Texture": 115,
          "../utils": 124,
          "../utils/trimCanvas": 129,
          "./TextMetrics": 109,
          "./TextStyle": 110,
        },
      ],
      109: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t, n, r, s, o, a, l, c, u) {
              i(this, e),
                (this.text = t),
                (this.style = n),
                (this.width = r),
                (this.height = s),
                (this.lines = o),
                (this.lineWidths = a),
                (this.lineHeight = l),
                (this.maxLineWidth = c),
                (this.fontProperties = u);
            }
            return (
              (e.measureText = function (t, n, i) {
                var r =
                  arguments.length > 3 && void 0 !== arguments[3]
                    ? arguments[3]
                    : e._canvas;
                i = i || n.wordWrap;
                var s = n.toFontString(),
                  o = e.measureFont(s),
                  a = r.getContext("2d");
                a.font = s;
                for (
                  var l = i ? e.wordWrap(t, n, r) : t,
                    c = l.split(/(?:\r\n|\r|\n)/),
                    u = new Array(c.length),
                    h = 0,
                    d = 0;
                  d < c.length;
                  d++
                ) {
                  var p =
                    a.measureText(c[d]).width +
                    (c[d].length - 1) * n.letterSpacing;
                  (u[d] = p), (h = Math.max(h, p));
                }
                var f = h + n.strokeThickness;
                n.dropShadow && (f += n.dropShadowDistance);
                var m = n.lineHeight || o.fontSize + n.strokeThickness,
                  g =
                    Math.max(m, o.fontSize + n.strokeThickness) +
                    (c.length - 1) * (m + n.leading);
                return (
                  n.dropShadow && (g += n.dropShadowDistance),
                  new e(t, n, f, g, c, u, m + n.leading, h, o)
                );
              }),
              (e.wordWrap = function (t, n) {
                for (
                  var i =
                      arguments.length > 2 && void 0 !== arguments[2]
                        ? arguments[2]
                        : e._canvas,
                    r = i.getContext("2d"),
                    s = "",
                    o = t.split("\n"),
                    a = n.wordWrapWidth,
                    l = {},
                    c = 0;
                  c < o.length;
                  c++
                ) {
                  for (
                    var u = a, h = o[c].split(" "), d = 0;
                    d < h.length;
                    d++
                  ) {
                    var p = r.measureText(h[d]).width;
                    if (n.breakWords && p > a)
                      for (var f = h[d].split(""), m = 0; m < f.length; m++) {
                        var g = f[m],
                          v = l[g];
                        void 0 === v &&
                          ((v = r.measureText(g).width), (l[g] = v)),
                          v > u
                            ? ((s += "\n" + g), (u = a - v))
                            : (0 === m && (s += " "), (s += g), (u -= v));
                      }
                    else {
                      var _ = p + r.measureText(" ").width;
                      0 === d || _ > u
                        ? (d > 0 && (s += "\n"), (s += h[d]), (u = a - p))
                        : ((u -= _), (s += " " + h[d]));
                    }
                  }
                  c < o.length - 1 && (s += "\n");
                }
                return s;
              }),
              (e.measureFont = function (t) {
                if (e._fonts[t]) return e._fonts[t];
                var n = {},
                  i = e._canvas,
                  r = e._context;
                r.font = t;
                var s = Math.ceil(r.measureText("|M\xc9q").width),
                  o = Math.ceil(r.measureText("M").width),
                  a = 2 * o;
                (o = (1.4 * o) | 0),
                  (i.width = s),
                  (i.height = a),
                  (r.fillStyle = "#f00"),
                  r.fillRect(0, 0, s, a),
                  (r.font = t),
                  (r.textBaseline = "alphabetic"),
                  (r.fillStyle = "#000"),
                  r.fillText("|M\xc9q", 0, o);
                var l = r.getImageData(0, 0, s, a).data,
                  c = l.length,
                  u = 4 * s,
                  h = 0,
                  d = 0,
                  p = !1;
                for (h = 0; o > h; ++h) {
                  for (var f = 0; u > f; f += 4)
                    if (255 !== l[d + f]) {
                      p = !0;
                      break;
                    }
                  if (p) break;
                  d += u;
                }
                for (n.ascent = o - h, d = c - u, p = !1, h = a; h > o; --h) {
                  for (var m = 0; u > m; m += 4)
                    if (255 !== l[d + m]) {
                      p = !0;
                      break;
                    }
                  if (p) break;
                  d -= u;
                }
                return (
                  (n.descent = h - o),
                  (n.fontSize = n.ascent + n.descent),
                  (e._fonts[t] = n),
                  n
                );
              }),
              e
            );
          })();
          n["default"] = r;
          var s = document.createElement("canvas");
          (s.width = s.height = 10),
            (r._canvas = s),
            (r._context = s.getContext("2d")),
            (r._fonts = {});
        },
        {},
      ],
      110: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e) {
            return "number" == typeof e
              ? c.hex2string(e)
              : ("string" == typeof e &&
                  0 === e.indexOf("0x") &&
                  (e = e.replace("0x", "#")),
                e);
          }
          function s(e) {
            if (Array.isArray(e)) {
              for (var t = 0; t < e.length; ++t) e[t] = r(e[t]);
              return e;
            }
            return r(e);
          }
          function o(e, t) {
            if (!Array.isArray(e) || !Array.isArray(t)) return !1;
            if (e.length !== t.length) return !1;
            for (var n = 0; n < e.length; ++n) if (e[n] !== t[n]) return !1;
            return !0;
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../const"),
            c = e("../utils"),
            u = {
              align: "left",
              breakWords: !1,
              dropShadow: !1,
              dropShadowAlpha: 1,
              dropShadowAngle: Math.PI / 6,
              dropShadowBlur: 0,
              dropShadowColor: "black",
              dropShadowDistance: 5,
              fill: "black",
              fillGradientType: l.TEXT_GRADIENT.LINEAR_VERTICAL,
              fillGradientStops: [],
              fontFamily: "Arial",
              fontSize: 26,
              fontStyle: "normal",
              fontVariant: "normal",
              fontWeight: "normal",
              letterSpacing: 0,
              lineHeight: 0,
              lineJoin: "miter",
              miterLimit: 10,
              padding: 0,
              stroke: "black",
              strokeThickness: 0,
              textBaseline: "alphabetic",
              trim: !1,
              wordWrap: !1,
              wordWrapWidth: 100,
              leading: 0,
            },
            h = (function () {
              function e(t) {
                i(this, e), (this.styleID = 0), Object.assign(this, u, t);
              }
              return (
                (e.prototype.clone = function () {
                  var t = {};
                  for (var n in u) t[n] = this[n];
                  return new e(t);
                }),
                (e.prototype.reset = function () {
                  Object.assign(this, u);
                }),
                (e.prototype.toFontString = function () {
                  var e =
                      "number" == typeof this.fontSize
                        ? this.fontSize + "px"
                        : this.fontSize,
                    t = this.fontFamily;
                  Array.isArray(this.fontFamily) ||
                    (t = this.fontFamily.split(","));
                  for (var n = t.length - 1; n >= 0; n--) {
                    var i = t[n].trim();
                    /([\"\'])[^\'\"]+\1/.test(i) || (i = '"' + i + '"'),
                      (t[n] = i);
                  }
                  return (
                    this.fontStyle +
                    " " +
                    this.fontVariant +
                    " " +
                    this.fontWeight +
                    " " +
                    e +
                    " " +
                    t.join(",")
                  );
                }),
                a(e, [
                  {
                    key: "align",
                    get: function () {
                      return this._align;
                    },
                    set: function (e) {
                      this._align !== e && ((this._align = e), this.styleID++);
                    },
                  },
                  {
                    key: "breakWords",
                    get: function () {
                      return this._breakWords;
                    },
                    set: function (e) {
                      this._breakWords !== e &&
                        ((this._breakWords = e), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadow",
                    get: function () {
                      return this._dropShadow;
                    },
                    set: function (e) {
                      this._dropShadow !== e &&
                        ((this._dropShadow = e), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadowAlpha",
                    get: function () {
                      return this._dropShadowAlpha;
                    },
                    set: function (e) {
                      this._dropShadowAlpha !== e &&
                        ((this._dropShadowAlpha = e), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadowAngle",
                    get: function () {
                      return this._dropShadowAngle;
                    },
                    set: function (e) {
                      this._dropShadowAngle !== e &&
                        ((this._dropShadowAngle = e), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadowBlur",
                    get: function () {
                      return this._dropShadowBlur;
                    },
                    set: function (e) {
                      this._dropShadowBlur !== e &&
                        ((this._dropShadowBlur = e), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadowColor",
                    get: function () {
                      return this._dropShadowColor;
                    },
                    set: function (e) {
                      var t = s(e);
                      this._dropShadowColor !== t &&
                        ((this._dropShadowColor = t), this.styleID++);
                    },
                  },
                  {
                    key: "dropShadowDistance",
                    get: function () {
                      return this._dropShadowDistance;
                    },
                    set: function (e) {
                      this._dropShadowDistance !== e &&
                        ((this._dropShadowDistance = e), this.styleID++);
                    },
                  },
                  {
                    key: "fill",
                    get: function () {
                      return this._fill;
                    },
                    set: function (e) {
                      var t = s(e);
                      this._fill !== t && ((this._fill = t), this.styleID++);
                    },
                  },
                  {
                    key: "fillGradientType",
                    get: function () {
                      return this._fillGradientType;
                    },
                    set: function (e) {
                      this._fillGradientType !== e &&
                        ((this._fillGradientType = e), this.styleID++);
                    },
                  },
                  {
                    key: "fillGradientStops",
                    get: function () {
                      return this._fillGradientStops;
                    },
                    set: function (e) {
                      o(this._fillGradientStops, e) ||
                        ((this._fillGradientStops = e), this.styleID++);
                    },
                  },
                  {
                    key: "fontFamily",
                    get: function () {
                      return this._fontFamily;
                    },
                    set: function (e) {
                      this.fontFamily !== e &&
                        ((this._fontFamily = e), this.styleID++);
                    },
                  },
                  {
                    key: "fontSize",
                    get: function () {
                      return this._fontSize;
                    },
                    set: function (e) {
                      this._fontSize !== e &&
                        ((this._fontSize = e), this.styleID++);
                    },
                  },
                  {
                    key: "fontStyle",
                    get: function () {
                      return this._fontStyle;
                    },
                    set: function (e) {
                      this._fontStyle !== e &&
                        ((this._fontStyle = e), this.styleID++);
                    },
                  },
                  {
                    key: "fontVariant",
                    get: function () {
                      return this._fontVariant;
                    },
                    set: function (e) {
                      this._fontVariant !== e &&
                        ((this._fontVariant = e), this.styleID++);
                    },
                  },
                  {
                    key: "fontWeight",
                    get: function () {
                      return this._fontWeight;
                    },
                    set: function (e) {
                      this._fontWeight !== e &&
                        ((this._fontWeight = e), this.styleID++);
                    },
                  },
                  {
                    key: "letterSpacing",
                    get: function () {
                      return this._letterSpacing;
                    },
                    set: function (e) {
                      this._letterSpacing !== e &&
                        ((this._letterSpacing = e), this.styleID++);
                    },
                  },
                  {
                    key: "lineHeight",
                    get: function () {
                      return this._lineHeight;
                    },
                    set: function (e) {
                      this._lineHeight !== e &&
                        ((this._lineHeight = e), this.styleID++);
                    },
                  },
                  {
                    key: "leading",
                    get: function () {
                      return this._leading;
                    },
                    set: function (e) {
                      this._leading !== e &&
                        ((this._leading = e), this.styleID++);
                    },
                  },
                  {
                    key: "lineJoin",
                    get: function () {
                      return this._lineJoin;
                    },
                    set: function (e) {
                      this._lineJoin !== e &&
                        ((this._lineJoin = e), this.styleID++);
                    },
                  },
                  {
                    key: "miterLimit",
                    get: function () {
                      return this._miterLimit;
                    },
                    set: function (e) {
                      this._miterLimit !== e &&
                        ((this._miterLimit = e), this.styleID++);
                    },
                  },
                  {
                    key: "padding",
                    get: function () {
                      return this._padding;
                    },
                    set: function (e) {
                      this._padding !== e &&
                        ((this._padding = e), this.styleID++);
                    },
                  },
                  {
                    key: "stroke",
                    get: function () {
                      return this._stroke;
                    },
                    set: function (e) {
                      var t = s(e);
                      this._stroke !== t &&
                        ((this._stroke = t), this.styleID++);
                    },
                  },
                  {
                    key: "strokeThickness",
                    get: function () {
                      return this._strokeThickness;
                    },
                    set: function (e) {
                      this._strokeThickness !== e &&
                        ((this._strokeThickness = e), this.styleID++);
                    },
                  },
                  {
                    key: "textBaseline",
                    get: function () {
                      return this._textBaseline;
                    },
                    set: function (e) {
                      this._textBaseline !== e &&
                        ((this._textBaseline = e), this.styleID++);
                    },
                  },
                  {
                    key: "trim",
                    get: function () {
                      return this._trim;
                    },
                    set: function (e) {
                      this._trim !== e && ((this._trim = e), this.styleID++);
                    },
                  },
                  {
                    key: "wordWrap",
                    get: function () {
                      return this._wordWrap;
                    },
                    set: function (e) {
                      this._wordWrap !== e &&
                        ((this._wordWrap = e), this.styleID++);
                    },
                  },
                  {
                    key: "wordWrapWidth",
                    get: function () {
                      return this._wordWrapWidth;
                    },
                    set: function (e) {
                      this._wordWrapWidth !== e &&
                        ((this._wordWrapWidth = e), this.styleID++);
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = h;
        },
        { "../const": 46, "../utils": 124 },
      ],
      111: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("./BaseTexture"),
            l = i(a),
            c = e("../settings"),
            u = i(c),
            h = (function (e) {
              function t() {
                var n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 100,
                  i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 100,
                  o = arguments[2],
                  a = arguments[3];
                r(this, t);
                var l = s(this, e.call(this, null, o));
                return (
                  (l.resolution = a || u["default"].RESOLUTION),
                  (l.width = n),
                  (l.height = i),
                  (l.realWidth = l.width * l.resolution),
                  (l.realHeight = l.height * l.resolution),
                  (l.scaleMode = void 0 !== o ? o : u["default"].SCALE_MODE),
                  (l.hasLoaded = !0),
                  (l._glRenderTargets = {}),
                  (l._canvasRenderTarget = null),
                  (l.valid = !1),
                  l
                );
              }
              return (
                o(t, e),
                (t.prototype.resize = function (e, t) {
                  (e === this.width && t === this.height) ||
                    ((this.valid = e > 0 && t > 0),
                    (this.width = e),
                    (this.height = t),
                    (this.realWidth = this.width * this.resolution),
                    (this.realHeight = this.height * this.resolution),
                    this.valid && this.emit("update", this));
                }),
                (t.prototype.destroy = function () {
                  e.prototype.destroy.call(this, !0), (this.renderer = null);
                }),
                t
              );
            })(l["default"]);
          n["default"] = h;
        },
        { "../settings": 101, "./BaseTexture": 112 },
      ],
      112: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../utils"),
            l = e("../settings"),
            c = i(l),
            u = e("eventemitter3"),
            h = i(u),
            d = e("../utils/determineCrossOrigin"),
            p = i(d),
            f = e("bit-twiddle"),
            m = i(f),
            g = (function (e) {
              function t(n, i, o) {
                r(this, t);
                var l = s(this, e.call(this));
                return (
                  (l.uid = a.uid()),
                  (l.touched = 0),
                  (l.resolution = o || c["default"].RESOLUTION),
                  (l.width = 100),
                  (l.height = 100),
                  (l.realWidth = 100),
                  (l.realHeight = 100),
                  (l.scaleMode = void 0 !== i ? i : c["default"].SCALE_MODE),
                  (l.hasLoaded = !1),
                  (l.isLoading = !1),
                  (l.source = null),
                  (l.origSource = null),
                  (l.imageType = null),
                  (l.sourceScale = 1),
                  (l.premultipliedAlpha = !0),
                  (l.imageUrl = null),
                  (l.isPowerOfTwo = !1),
                  (l.mipmap = c["default"].MIPMAP_TEXTURES),
                  (l.wrapMode = c["default"].WRAP_MODE),
                  (l._glTextures = {}),
                  (l._enabled = 0),
                  (l._virtalBoundId = -1),
                  (l._destroyed = !1),
                  (l.textureCacheIds = []),
                  n && l.loadSource(n),
                  l
                );
              }
              return (
                o(t, e),
                (t.prototype.update = function () {
                  "svg" !== this.imageType &&
                    ((this.realWidth =
                      this.source.naturalWidth ||
                      this.source.videoWidth ||
                      this.source.width),
                    (this.realHeight =
                      this.source.naturalHeight ||
                      this.source.videoHeight ||
                      this.source.height),
                    this._updateDimensions()),
                    this.emit("update", this);
                }),
                (t.prototype._updateDimensions = function () {
                  (this.width = this.realWidth / this.resolution),
                    (this.height = this.realHeight / this.resolution),
                    (this.isPowerOfTwo =
                      m["default"].isPow2(this.realWidth) &&
                      m["default"].isPow2(this.realHeight));
                }),
                (t.prototype.loadSource = function (e) {
                  var t = this.isLoading;
                  (this.hasLoaded = !1),
                    (this.isLoading = !1),
                    t &&
                      this.source &&
                      ((this.source.onload = null),
                      (this.source.onerror = null));
                  var n = !this.source;
                  if (
                    ((this.source = e),
                    ((e.src && e.complete) || e.getContext) &&
                      e.width &&
                      e.height)
                  )
                    this._updateImageType(),
                      "svg" === this.imageType
                        ? this._loadSvgSource()
                        : this._sourceLoaded(),
                      n && this.emit("loaded", this);
                  else if (!e.getContext) {
                    this.isLoading = !0;
                    var i = this;
                    if (
                      ((e.onload = function () {
                        if (
                          (i._updateImageType(),
                          (e.onload = null),
                          (e.onerror = null),
                          i.isLoading)
                        ) {
                          if (
                            ((i.isLoading = !1),
                            i._sourceLoaded(),
                            "svg" === i.imageType)
                          )
                            return void i._loadSvgSource();
                          i.emit("loaded", i);
                        }
                      }),
                      (e.onerror = function () {
                        (e.onload = null),
                          (e.onerror = null),
                          i.isLoading &&
                            ((i.isLoading = !1), i.emit("error", i));
                      }),
                      e.complete && e.src)
                    ) {
                      if (
                        ((e.onload = null),
                        (e.onerror = null),
                        "svg" === i.imageType)
                      )
                        return void i._loadSvgSource();
                      (this.isLoading = !1),
                        e.width && e.height
                          ? (this._sourceLoaded(),
                            t && this.emit("loaded", this))
                          : t && this.emit("error", this);
                    }
                  }
                }),
                (t.prototype._updateImageType = function () {
                  if (this.imageUrl) {
                    var e = a.decomposeDataUri(this.imageUrl),
                      t = void 0;
                    if (e && "image" === e.mediaType) {
                      var n = e.subType.split("+")[0];
                      if (!(t = a.getUrlFileExtension("." + n)))
                        throw new Error("Invalid image type in data URI.");
                    } else
                      (t = a.getUrlFileExtension(this.imageUrl)) || (t = "png");
                    this.imageType = t;
                  }
                }),
                (t.prototype._loadSvgSource = function () {
                  if ("svg" === this.imageType) {
                    var e = a.decomposeDataUri(this.imageUrl);
                    e
                      ? this._loadSvgSourceUsingDataUri(e)
                      : this._loadSvgSourceUsingXhr();
                  }
                }),
                (t.prototype._loadSvgSourceUsingDataUri = function (e) {
                  var t = void 0;
                  if ("base64" === e.encoding) {
                    if (!atob)
                      throw new Error(
                        "Your browser doesn't support base64 conversions."
                      );
                    t = atob(e.data);
                  } else t = e.data;
                  this._loadSvgSourceUsingString(t);
                }),
                (t.prototype._loadSvgSourceUsingXhr = function () {
                  var e = this,
                    t = new XMLHttpRequest();
                  (t.onload = function () {
                    if (t.readyState !== t.DONE || 200 !== t.status)
                      throw new Error("Failed to load SVG using XHR.");
                    e._loadSvgSourceUsingString(t.response);
                  }),
                    (t.onerror = function () {
                      return e.emit("error", e);
                    }),
                    t.open("GET", this.imageUrl, !0),
                    t.send();
                }),
                (t.prototype._loadSvgSourceUsingString = function (e) {
                  var n = a.getSvgSize(e),
                    i = n.width,
                    r = n.height;
                  if (!i || !r)
                    throw new Error(
                      "The SVG image must have width and height defined (in pixels), canvas API needs them."
                    );
                  (this.realWidth = Math.round(i * this.sourceScale)),
                    (this.realHeight = Math.round(r * this.sourceScale)),
                    this._updateDimensions();
                  var s = document.createElement("canvas");
                  (s.width = this.realWidth),
                    (s.height = this.realHeight),
                    (s._pixiId = "canvas_" + a.uid()),
                    s
                      .getContext("2d")
                      .drawImage(
                        this.source,
                        0,
                        0,
                        i,
                        r,
                        0,
                        0,
                        this.realWidth,
                        this.realHeight
                      ),
                    (this.origSource = this.source),
                    (this.source = s),
                    t.addToCache(this, s._pixiId),
                    (this.isLoading = !1),
                    this._sourceLoaded(),
                    this.emit("loaded", this);
                }),
                (t.prototype._sourceLoaded = function () {
                  (this.hasLoaded = !0), this.update();
                }),
                (t.prototype.destroy = function () {
                  this.imageUrl &&
                    (delete a.TextureCache[this.imageUrl],
                    (this.imageUrl = null),
                    navigator.isCocoonJS || (this.source.src = "")),
                    (this.source = null),
                    this.dispose(),
                    t.removeFromCache(this),
                    (this.textureCacheIds = null),
                    (this._destroyed = !0);
                }),
                (t.prototype.dispose = function () {
                  this.emit("dispose", this);
                }),
                (t.prototype.updateSourceImage = function (e) {
                  (this.source.src = e), this.loadSource(this.source);
                }),
                (t.fromImage = function (e, n, i, r) {
                  var s = a.BaseTextureCache[e];
                  if (!s) {
                    var o = new Image();
                    void 0 === n && 0 !== e.indexOf("data:")
                      ? (o.crossOrigin = p["default"](e))
                      : n &&
                        (o.crossOrigin =
                          "string" == typeof n ? n : "anonymous"),
                      (s = new t(o, i)),
                      (s.imageUrl = e),
                      r && (s.sourceScale = r),
                      (s.resolution = a.getResolutionOfUrl(e)),
                      (o.src = e),
                      t.addToCache(s, e);
                  }
                  return s;
                }),
                (t.fromCanvas = function (e, n) {
                  var i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : "canvas";
                  e._pixiId || (e._pixiId = i + "_" + a.uid());
                  var r = a.BaseTextureCache[e._pixiId];
                  return (
                    r || ((r = new t(e, n)), t.addToCache(r, e._pixiId)), r
                  );
                }),
                (t.from = function (e, n, i) {
                  if ("string" == typeof e) return t.fromImage(e, void 0, n, i);
                  if (e instanceof HTMLImageElement) {
                    var r = e.src,
                      s = a.BaseTextureCache[r];
                    return (
                      s ||
                        ((s = new t(e, n)),
                        (s.imageUrl = r),
                        i && (s.sourceScale = i),
                        (s.resolution = a.getResolutionOfUrl(r)),
                        t.addToCache(s, r)),
                      s
                    );
                  }
                  return e instanceof HTMLCanvasElement
                    ? t.fromCanvas(e, n)
                    : e;
                }),
                (t.addToCache = function (e, t) {
                  t &&
                    (-1 === e.textureCacheIds.indexOf(t) &&
                      e.textureCacheIds.push(t),
                    (a.BaseTextureCache[t] = e));
                }),
                (t.removeFromCache = function (e) {
                  if ("string" == typeof e) {
                    var t = a.BaseTextureCache[e];
                    if (t) {
                      var n = t.textureCacheIds.indexOf(e);
                      return (
                        n > -1 && t.textureCacheIds.splice(n, 1),
                        delete a.BaseTextureCache[e],
                        t
                      );
                    }
                  } else if (e && e.textureCacheIds) {
                    for (var i = 0; i < e.textureCacheIds.length; ++i)
                      delete a.BaseTextureCache[e.textureCacheIds[i]];
                    return (e.textureCacheIds.length = 0), e;
                  }
                  return null;
                }),
                t
              );
            })(h["default"]);
          n["default"] = g;
        },
        {
          "../settings": 101,
          "../utils": 124,
          "../utils/determineCrossOrigin": 123,
          "bit-twiddle": 1,
          eventemitter3: 3,
        },
      ],
      113: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("./BaseRenderTexture"),
            l = i(a),
            c = e("./Texture"),
            u = i(c),
            h = (function (e) {
              function t(n, i) {
                r(this, t);
                var o = null;
                if (!(n instanceof l["default"])) {
                  var a = arguments[1],
                    c = arguments[2],
                    u = arguments[3],
                    h = arguments[4];
                  console.warn(
                    "Please use RenderTexture.create(" +
                      a +
                      ", " +
                      c +
                      ") instead of the ctor directly."
                  ),
                    (o = arguments[0]),
                    (i = null),
                    (n = new l["default"](a, c, u, h));
                }
                var d = s(this, e.call(this, n, i));
                return (
                  (d.legacyRenderer = o), (d.valid = !0), d._updateUvs(), d
                );
              }
              return (
                o(t, e),
                (t.prototype.resize = function (e, t, n) {
                  (this.valid = e > 0 && t > 0),
                    (this._frame.width = this.orig.width = e),
                    (this._frame.height = this.orig.height = t),
                    n || this.baseTexture.resize(e, t),
                    this._updateUvs();
                }),
                (t.create = function (e, n, i, r) {
                  return new t(new l["default"](e, n, i, r));
                }),
                t
              );
            })(u["default"]);
          n["default"] = h;
        },
        { "./BaseRenderTexture": 111, "./Texture": 115 },
      ],
      114: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("../"),
            o = e("../utils"),
            a = (function () {
              function e(t, n) {
                var r =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : null;
                i(this, e),
                  (this.baseTexture = t),
                  (this.textures = {}),
                  (this.data = n),
                  (this.resolution = this._updateResolution(
                    r || this.baseTexture.imageUrl
                  )),
                  (this._frames = this.data.frames),
                  (this._frameKeys = Object.keys(this._frames)),
                  (this._batchIndex = 0),
                  (this._callback = null);
              }
              return (
                r(e, null, [
                  {
                    key: "BATCH_SIZE",
                    get: function () {
                      return 1e3;
                    },
                  },
                ]),
                (e.prototype._updateResolution = function (e) {
                  var t = this.data.meta.scale,
                    n = o.getResolutionOfUrl(e, null);
                  return (
                    null === n && (n = void 0 !== t ? parseFloat(t) : 1),
                    1 !== n &&
                      ((this.baseTexture.resolution = n),
                      this.baseTexture.update()),
                    n
                  );
                }),
                (e.prototype.parse = function (t) {
                  (this._batchIndex = 0),
                    (this._callback = t),
                    this._frameKeys.length <= e.BATCH_SIZE
                      ? (this._processFrames(0), this._parseComplete())
                      : this._nextBatch();
                }),
                (e.prototype._processFrames = function (t) {
                  for (
                    var n = t,
                      i = e.BATCH_SIZE,
                      r = this.baseTexture.sourceScale;
                    i > n - t && n < this._frameKeys.length;

                  ) {
                    var o = this._frameKeys[n],
                      a = this._frames[o].frame;
                    if (a) {
                      var l = null,
                        c = null,
                        u = new s.Rectangle(
                          0,
                          0,
                          Math.floor(this._frames[o].sourceSize.w * r) /
                            this.resolution,
                          Math.floor(this._frames[o].sourceSize.h * r) /
                            this.resolution
                        );
                      (l = this._frames[o].rotated
                        ? new s.Rectangle(
                            Math.floor(a.x * r) / this.resolution,
                            Math.floor(a.y * r) / this.resolution,
                            Math.floor(a.h * r) / this.resolution,
                            Math.floor(a.w * r) / this.resolution
                          )
                        : new s.Rectangle(
                            Math.floor(a.x * r) / this.resolution,
                            Math.floor(a.y * r) / this.resolution,
                            Math.floor(a.w * r) / this.resolution,
                            Math.floor(a.h * r) / this.resolution
                          )),
                        this._frames[o].trimmed &&
                          (c = new s.Rectangle(
                            Math.floor(this._frames[o].spriteSourceSize.x * r) /
                              this.resolution,
                            Math.floor(this._frames[o].spriteSourceSize.y * r) /
                              this.resolution,
                            Math.floor(a.w * r) / this.resolution,
                            Math.floor(a.h * r) / this.resolution
                          )),
                        (this.textures[o] = new s.Texture(
                          this.baseTexture,
                          l,
                          u,
                          c,
                          this._frames[o].rotated ? 2 : 0
                        )),
                        s.Texture.addToCache(this.textures[o], o);
                    }
                    n++;
                  }
                }),
                (e.prototype._parseComplete = function () {
                  var e = this._callback;
                  (this._callback = null),
                    (this._batchIndex = 0),
                    e.call(this, this.textures);
                }),
                (e.prototype._nextBatch = function () {
                  var t = this;
                  this._processFrames(this._batchIndex * e.BATCH_SIZE),
                    this._batchIndex++,
                    setTimeout(function () {
                      t._batchIndex * e.BATCH_SIZE < t._frameKeys.length
                        ? t._nextBatch()
                        : t._parseComplete();
                    }, 0);
                }),
                (e.prototype.destroy = function () {
                  var e =
                    arguments.length > 0 &&
                    void 0 !== arguments[0] &&
                    arguments[0];
                  for (var t in this.textures) this.textures[t].destroy();
                  (this._frames = null),
                    (this._frameKeys = null),
                    (this.data = null),
                    (this.textures = null),
                    e && this.baseTexture.destroy(),
                    (this.baseTexture = null);
                }),
                e
              );
            })();
          n["default"] = a;
        },
        { "../": 65, "../utils": 124 },
      ],
      115: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function a(e) {
            (e.destroy = function () {}),
              (e.on = function () {}),
              (e.once = function () {}),
              (e.emit = function () {});
          }
          n.__esModule = !0;
          var l = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            c = e("./BaseTexture"),
            u = i(c),
            h = e("./VideoBaseTexture"),
            d = i(h),
            p = e("./TextureUvs"),
            f = i(p),
            m = e("eventemitter3"),
            g = i(m),
            v = e("../math"),
            _ = e("../utils"),
            y = e("../settings"),
            b = i(y),
            w = (function (e) {
              function t(n, i, o, a, l) {
                r(this, t);
                var c = s(this, e.call(this));
                if (
                  ((c.noFrame = !1),
                  i || ((c.noFrame = !0), (i = new v.Rectangle(0, 0, 1, 1))),
                  n instanceof t && (n = n.baseTexture),
                  (c.baseTexture = n),
                  (c._frame = i),
                  (c.trim = a),
                  (c.valid = !1),
                  (c.requiresUpdate = !1),
                  (c._uvs = null),
                  (c.orig = o || i),
                  (c._rotate = Number(l || 0)),
                  !0 === l)
                )
                  c._rotate = 2;
                else if (c._rotate % 2 != 0)
                  throw new Error(
                    "attempt to use diamond-shaped UVs. If you are sure, set rotation manually"
                  );
                return (
                  n.hasLoaded
                    ? (c.noFrame &&
                        ((i = new v.Rectangle(0, 0, n.width, n.height)),
                        n.on("update", c.onBaseTextureUpdated, c)),
                      (c.frame = i))
                    : n.once("loaded", c.onBaseTextureLoaded, c),
                  (c._updateID = 0),
                  (c.transform = null),
                  (c.textureCacheIds = []),
                  c
                );
              }
              return (
                o(t, e),
                (t.prototype.update = function () {
                  this.baseTexture.update();
                }),
                (t.prototype.onBaseTextureLoaded = function (e) {
                  this._updateID++,
                    (this.frame = this.noFrame
                      ? new v.Rectangle(0, 0, e.width, e.height)
                      : this._frame),
                    this.baseTexture.on(
                      "update",
                      this.onBaseTextureUpdated,
                      this
                    ),
                    this.emit("update", this);
                }),
                (t.prototype.onBaseTextureUpdated = function (e) {
                  this._updateID++,
                    (this._frame.width = e.width),
                    (this._frame.height = e.height),
                    this.emit("update", this);
                }),
                (t.prototype.destroy = function (e) {
                  this.baseTexture &&
                    (e &&
                      (_.TextureCache[this.baseTexture.imageUrl] &&
                        t.removeFromCache(this.baseTexture.imageUrl),
                      this.baseTexture.destroy()),
                    this.baseTexture.off(
                      "update",
                      this.onBaseTextureUpdated,
                      this
                    ),
                    this.baseTexture.off(
                      "loaded",
                      this.onBaseTextureLoaded,
                      this
                    ),
                    (this.baseTexture = null)),
                    (this._frame = null),
                    (this._uvs = null),
                    (this.trim = null),
                    (this.orig = null),
                    (this.valid = !1),
                    t.removeFromCache(this),
                    (this.textureCacheIds = null);
                }),
                (t.prototype.clone = function () {
                  return new t(
                    this.baseTexture,
                    this.frame,
                    this.orig,
                    this.trim,
                    this.rotate
                  );
                }),
                (t.prototype._updateUvs = function () {
                  this._uvs || (this._uvs = new f["default"]()),
                    this._uvs.set(this._frame, this.baseTexture, this.rotate),
                    this._updateID++;
                }),
                (t.fromImage = function (e, n, i, r) {
                  var s = _.TextureCache[e];
                  return (
                    s ||
                      ((s = new t(u["default"].fromImage(e, n, i, r))),
                      t.addToCache(s, e)),
                    s
                  );
                }),
                (t.fromFrame = function (e) {
                  var t = _.TextureCache[e];
                  if (!t)
                    throw new Error(
                      'The frameId "' +
                        e +
                        '" does not exist in the texture cache'
                    );
                  return t;
                }),
                (t.fromCanvas = function (e, n) {
                  var i =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : "canvas";
                  return new t(u["default"].fromCanvas(e, n, i));
                }),
                (t.fromVideo = function (e, n) {
                  return "string" == typeof e
                    ? t.fromVideoUrl(e, n)
                    : new t(d["default"].fromVideo(e, n));
                }),
                (t.fromVideoUrl = function (e, n) {
                  return new t(d["default"].fromUrl(e, n));
                }),
                (t.from = function (e) {
                  if ("string" == typeof e) {
                    var n = _.TextureCache[e];
                    return n
                      ? n
                      : null !== e.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)
                      ? t.fromVideoUrl(e)
                      : t.fromImage(e);
                  }
                  return e instanceof HTMLImageElement
                    ? new t(u["default"].from(e))
                    : e instanceof HTMLCanvasElement
                    ? t.fromCanvas(
                        e,
                        b["default"].SCALE_MODE,
                        "HTMLCanvasElement"
                      )
                    : e instanceof HTMLVideoElement
                    ? t.fromVideo(e)
                    : e instanceof u["default"]
                    ? new t(e)
                    : e;
                }),
                (t.fromLoader = function (e, n, i) {
                  var r = new u["default"](e, void 0, _.getResolutionOfUrl(n)),
                    s = new t(r);
                  return (
                    (r.imageUrl = n),
                    i || (i = n),
                    u["default"].addToCache(s.baseTexture, i),
                    t.addToCache(s, i),
                    i !== n &&
                      (u["default"].addToCache(s.baseTexture, n),
                      t.addToCache(s, n)),
                    s
                  );
                }),
                (t.addToCache = function (e, t) {
                  t &&
                    (-1 === e.textureCacheIds.indexOf(t) &&
                      e.textureCacheIds.push(t),
                    (_.TextureCache[t] = e));
                }),
                (t.removeFromCache = function (e) {
                  if ("string" == typeof e) {
                    var t = _.TextureCache[e];
                    if (t) {
                      var n = t.textureCacheIds.indexOf(e);
                      return (
                        n > -1 && t.textureCacheIds.splice(n, 1),
                        delete _.TextureCache[e],
                        t
                      );
                    }
                  } else if (e && e.textureCacheIds) {
                    for (var i = 0; i < e.textureCacheIds.length; ++i)
                      _.TextureCache[e.textureCacheIds[i]] === e &&
                        delete _.TextureCache[e.textureCacheIds[i]];
                    return (e.textureCacheIds.length = 0), e;
                  }
                  return null;
                }),
                l(t, [
                  {
                    key: "frame",
                    get: function () {
                      return this._frame;
                    },
                    set: function (e) {
                      (this._frame = e), (this.noFrame = !1);
                      var t = e.x,
                        n = e.y,
                        i = e.width,
                        r = e.height,
                        s = t + i > this.baseTexture.width,
                        o = n + r > this.baseTexture.height;
                      if (s || o) {
                        var a = s && o ? "and" : "or",
                          l =
                            "X: " +
                            t +
                            " + " +
                            i +
                            " = " +
                            (t + i) +
                            " > " +
                            this.baseTexture.width,
                          c =
                            "Y: " +
                            n +
                            " + " +
                            r +
                            " = " +
                            (n + r) +
                            " > " +
                            this.baseTexture.height;
                        throw new Error(
                          "Texture Error: frame does not fit inside the base Texture dimensions: " +
                            l +
                            " " +
                            a +
                            " " +
                            c
                        );
                      }
                      (this.valid = i && r && this.baseTexture.hasLoaded),
                        this.trim || this.rotate || (this.orig = e),
                        this.valid && this._updateUvs();
                    },
                  },
                  {
                    key: "rotate",
                    get: function () {
                      return this._rotate;
                    },
                    set: function (e) {
                      (this._rotate = e), this.valid && this._updateUvs();
                    },
                  },
                  {
                    key: "width",
                    get: function () {
                      return this.orig.width;
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this.orig.height;
                    },
                  },
                ]),
                t
              );
            })(g["default"]);
          (n["default"] = w),
            (w.EMPTY = new w(new u["default"]())),
            a(w.EMPTY),
            a(w.EMPTY.baseTexture),
            (w.WHITE = (function () {
              var e = document.createElement("canvas");
              (e.width = 10), (e.height = 10);
              var t = e.getContext("2d");
              return (
                (t.fillStyle = "white"),
                t.fillRect(0, 0, 10, 10),
                new w(new u["default"](e))
              );
            })()),
            a(w.WHITE),
            a(w.WHITE.baseTexture);
        },
        {
          "../math": 70,
          "../settings": 101,
          "../utils": 124,
          "./BaseTexture": 112,
          "./TextureUvs": 116,
          "./VideoBaseTexture": 117,
          eventemitter3: 3,
        },
      ],
      116: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../math/GroupD8"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = (function () {
              function e() {
                i(this, e),
                  (this.x0 = 0),
                  (this.y0 = 0),
                  (this.x1 = 1),
                  (this.y1 = 0),
                  (this.x2 = 1),
                  (this.y2 = 1),
                  (this.x3 = 0),
                  (this.y3 = 1),
                  (this.uvsUint32 = new Uint32Array(4));
              }
              return (
                (e.prototype.set = function (e, t, n) {
                  var i = t.width,
                    r = t.height;
                  if (n) {
                    var o = e.width / 2 / i,
                      a = e.height / 2 / r,
                      l = e.x / i + o,
                      c = e.y / r + a;
                    (n = s["default"].add(n, s["default"].NW)),
                      (this.x0 = l + o * s["default"].uX(n)),
                      (this.y0 = c + a * s["default"].uY(n)),
                      (n = s["default"].add(n, 2)),
                      (this.x1 = l + o * s["default"].uX(n)),
                      (this.y1 = c + a * s["default"].uY(n)),
                      (n = s["default"].add(n, 2)),
                      (this.x2 = l + o * s["default"].uX(n)),
                      (this.y2 = c + a * s["default"].uY(n)),
                      (n = s["default"].add(n, 2)),
                      (this.x3 = l + o * s["default"].uX(n)),
                      (this.y3 = c + a * s["default"].uY(n));
                  } else
                    (this.x0 = e.x / i),
                      (this.y0 = e.y / r),
                      (this.x1 = (e.x + e.width) / i),
                      (this.y1 = e.y / r),
                      (this.x2 = (e.x + e.width) / i),
                      (this.y2 = (e.y + e.height) / r),
                      (this.x3 = e.x / i),
                      (this.y3 = (e.y + e.height) / r);
                  (this.uvsUint32[0] =
                    (((65535 * this.y0) & 65535) << 16) |
                    ((65535 * this.x0) & 65535)),
                    (this.uvsUint32[1] =
                      (((65535 * this.y1) & 65535) << 16) |
                      ((65535 * this.x1) & 65535)),
                    (this.uvsUint32[2] =
                      (((65535 * this.y2) & 65535) << 16) |
                      ((65535 * this.x2) & 65535)),
                    (this.uvsUint32[3] =
                      (((65535 * this.y3) & 65535) << 16) |
                      ((65535 * this.x3) & 65535));
                }),
                e
              );
            })();
          n["default"] = o;
        },
        { "../math/GroupD8": 66 },
      ],
      117: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function o(e, t) {
            t || (t = "video/" + e.substr(e.lastIndexOf(".") + 1));
            var n = document.createElement("source");
            return (n.src = e), (n.type = t), n;
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("./BaseTexture"),
            c = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(l),
            u = e("../utils"),
            h = e("../ticker"),
            d = e("../const"),
            p = (function (e) {
              function t(n, s) {
                if ((i(this, t), !n))
                  throw new Error("No video source element specified.");
                (n.readyState === n.HAVE_ENOUGH_DATA ||
                  n.readyState === n.HAVE_FUTURE_DATA) &&
                  n.width &&
                  n.height &&
                  (n.complete = !0);
                var o = r(this, e.call(this, n, s));
                return (
                  (o.width = n.videoWidth),
                  (o.height = n.videoHeight),
                  (o._autoUpdate = !0),
                  (o._isAutoUpdating = !1),
                  (o.autoPlay = !0),
                  (o.update = o.update.bind(o)),
                  (o._onCanPlay = o._onCanPlay.bind(o)),
                  n.addEventListener("play", o._onPlayStart.bind(o)),
                  n.addEventListener("pause", o._onPlayStop.bind(o)),
                  (o.hasLoaded = !1),
                  (o.__loaded = !1),
                  o._isSourceReady()
                    ? o._onCanPlay()
                    : (n.addEventListener("canplay", o._onCanPlay),
                      n.addEventListener("canplaythrough", o._onCanPlay)),
                  o
                );
              }
              return (
                s(t, e),
                (t.prototype._isSourcePlaying = function () {
                  var e = this.source;
                  return (
                    e.currentTime > 0 &&
                    !1 === e.paused &&
                    !1 === e.ended &&
                    e.readyState > 2
                  );
                }),
                (t.prototype._isSourceReady = function () {
                  return (
                    3 === this.source.readyState || 4 === this.source.readyState
                  );
                }),
                (t.prototype._onPlayStart = function () {
                  this.hasLoaded || this._onCanPlay(),
                    !this._isAutoUpdating &&
                      this.autoUpdate &&
                      (h.shared.add(this.update, this, d.UPDATE_PRIORITY.HIGH),
                      (this._isAutoUpdating = !0));
                }),
                (t.prototype._onPlayStop = function () {
                  this._isAutoUpdating &&
                    (h.shared.remove(this.update, this),
                    (this._isAutoUpdating = !1));
                }),
                (t.prototype._onCanPlay = function () {
                  (this.hasLoaded = !0),
                    this.source &&
                      (this.source.removeEventListener(
                        "canplay",
                        this._onCanPlay
                      ),
                      this.source.removeEventListener(
                        "canplaythrough",
                        this._onCanPlay
                      ),
                      (this.width = this.source.videoWidth),
                      (this.height = this.source.videoHeight),
                      this.__loaded ||
                        ((this.__loaded = !0), this.emit("loaded", this)),
                      this._isSourcePlaying()
                        ? this._onPlayStart()
                        : this.autoPlay && this.source.play());
                }),
                (t.prototype.destroy = function () {
                  this._isAutoUpdating && h.shared.remove(this.update, this),
                    this.source &&
                      this.source._pixiId &&
                      (c["default"].removeFromCache(this.source._pixiId),
                      delete this.source._pixiId),
                    e.prototype.destroy.call(this);
                }),
                (t.fromVideo = function (e, n) {
                  e._pixiId || (e._pixiId = "video_" + u.uid());
                  var i = u.BaseTextureCache[e._pixiId];
                  return (
                    i ||
                      ((i = new t(e, n)),
                      c["default"].addToCache(i, e._pixiId)),
                    i
                  );
                }),
                (t.fromUrl = function (e, n) {
                  var i = document.createElement("video");
                  if (
                    (i.setAttribute("webkit-playsinline", ""),
                    i.setAttribute("playsinline", ""),
                    Array.isArray(e))
                  )
                    for (var r = 0; r < e.length; ++r)
                      i.appendChild(o(e[r].src || e[r], e[r].mime));
                  else i.appendChild(o(e.src || e, e.mime));
                  return i.load(), t.fromVideo(i, n);
                }),
                a(t, [
                  {
                    key: "autoUpdate",
                    get: function () {
                      return this._autoUpdate;
                    },
                    set: function (e) {
                      e !== this._autoUpdate &&
                        ((this._autoUpdate = e),
                        !this._autoUpdate && this._isAutoUpdating
                          ? (h.shared.remove(this.update, this),
                            (this._isAutoUpdating = !1))
                          : this._autoUpdate &&
                            !this._isAutoUpdating &&
                            (h.shared.add(
                              this.update,
                              this,
                              d.UPDATE_PRIORITY.HIGH
                            ),
                            (this._isAutoUpdating = !0)));
                    },
                  },
                ]),
                t
              );
            })(c["default"]);
          (n["default"] = p), (p.fromUrls = p.fromUrl);
        },
        {
          "../const": 46,
          "../ticker": 120,
          "../utils": 124,
          "./BaseTexture": 112,
        },
      ],
      118: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            o = e("../settings"),
            a = i(o),
            l = e("../const"),
            c = e("./TickerListener"),
            u = i(c),
            h = (function () {
              function e() {
                var t = this;
                r(this, e),
                  (this._head = new u["default"](null, null, 1 / 0)),
                  (this._requestId = null),
                  (this._maxElapsedMS = 100),
                  (this.autoStart = !1),
                  (this.deltaTime = 1),
                  (this.elapsedMS = 1 / a["default"].TARGET_FPMS),
                  (this.lastTime = -1),
                  (this.speed = 1),
                  (this.started = !1),
                  (this._tick = function (e) {
                    (t._requestId = null),
                      t.started &&
                        (t.update(e),
                        t.started &&
                          null === t._requestId &&
                          t._head.next &&
                          (t._requestId = requestAnimationFrame(t._tick)));
                  });
              }
              return (
                (e.prototype._requestIfNeeded = function () {
                  null === this._requestId &&
                    this._head.next &&
                    ((this.lastTime = performance.now()),
                    (this._requestId = requestAnimationFrame(this._tick)));
                }),
                (e.prototype._cancelIfNeeded = function () {
                  null !== this._requestId &&
                    (cancelAnimationFrame(this._requestId),
                    (this._requestId = null));
                }),
                (e.prototype._startIfPossible = function () {
                  this.started
                    ? this._requestIfNeeded()
                    : this.autoStart && this.start();
                }),
                (e.prototype.add = function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : l.UPDATE_PRIORITY.NORMAL;
                  return this._addListener(new u["default"](e, t, n));
                }),
                (e.prototype.addOnce = function (e, t) {
                  var n =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : l.UPDATE_PRIORITY.NORMAL;
                  return this._addListener(new u["default"](e, t, n, !0));
                }),
                (e.prototype._addListener = function (e) {
                  var t = this._head.next,
                    n = this._head;
                  if (t) {
                    for (; t; ) {
                      if (e.priority > t.priority) {
                        e.connect(n);
                        break;
                      }
                      (n = t), (t = t.next);
                    }
                    e.previous || e.connect(n);
                  } else e.connect(n);
                  return this._startIfPossible(), this;
                }),
                (e.prototype.remove = function (e, t) {
                  for (var n = this._head.next; n; )
                    n = n.match(e, t) ? n.destroy() : n.next;
                  return this._head.next || this._cancelIfNeeded(), this;
                }),
                (e.prototype.start = function () {
                  this.started ||
                    ((this.started = !0), this._requestIfNeeded());
                }),
                (e.prototype.stop = function () {
                  this.started && ((this.started = !1), this._cancelIfNeeded());
                }),
                (e.prototype.destroy = function () {
                  this.stop();
                  for (var e = this._head.next; e; ) e = e.destroy(!0);
                  this._head.destroy(), (this._head = null);
                }),
                (e.prototype.update = function () {
                  var e =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : performance.now(),
                    t = void 0;
                  if (e > this.lastTime) {
                    (t = this.elapsedMS = e - this.lastTime),
                      t > this._maxElapsedMS && (t = this._maxElapsedMS),
                      (this.deltaTime =
                        t * a["default"].TARGET_FPMS * this.speed);
                    for (var n = this._head, i = n.next; i; )
                      i = i.emit(this.deltaTime);
                    n.next || this._cancelIfNeeded();
                  } else this.deltaTime = this.elapsedMS = 0;
                  this.lastTime = e;
                }),
                s(e, [
                  {
                    key: "FPS",
                    get: function () {
                      return 1e3 / this.elapsedMS;
                    },
                  },
                  {
                    key: "minFPS",
                    get: function () {
                      return 1e3 / this._maxElapsedMS;
                    },
                    set: function (e) {
                      var t = Math.min(
                        Math.max(0, e) / 1e3,
                        a["default"].TARGET_FPMS
                      );
                      this._maxElapsedMS = 1 / t;
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = h;
        },
        { "../const": 46, "../settings": 101, "./TickerListener": 119 },
      ],
      119: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t) {
              var n =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : null,
                r =
                  arguments.length > 2 && void 0 !== arguments[2]
                    ? arguments[2]
                    : 0,
                s =
                  arguments.length > 3 &&
                  void 0 !== arguments[3] &&
                  arguments[3];
              i(this, e),
                (this.fn = t),
                (this.context = n),
                (this.priority = r),
                (this.once = s),
                (this.next = null),
                (this.previous = null),
                (this._destroyed = !1);
            }
            return (
              (e.prototype.match = function (e, t) {
                return (t = t || null), this.fn === e && this.context === t;
              }),
              (e.prototype.emit = function (e) {
                this.fn &&
                  (this.context ? this.fn.call(this.context, e) : this.fn(e));
                var t = this.next;
                return (
                  this.once && this.destroy(!0),
                  this._destroyed && (this.next = null),
                  t
                );
              }),
              (e.prototype.connect = function (e) {
                (this.previous = e),
                  e.next && (e.next.previous = this),
                  (this.next = e.next),
                  (e.next = this);
              }),
              (e.prototype.destroy = function () {
                var e =
                  arguments.length > 0 &&
                  void 0 !== arguments[0] &&
                  arguments[0];
                (this._destroyed = !0),
                  (this.fn = null),
                  (this.context = null),
                  this.previous && (this.previous.next = this.next),
                  this.next && (this.next.previous = this.previous);
                var t = this.previous;
                return (this.next = e ? null : t), (this.previous = null), t;
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      120: [
        function (e, t, n) {
          "use strict";
          (n.__esModule = !0), (n.Ticker = n.shared = void 0);
          var i = e("./Ticker"),
            r = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(i),
            s = new r["default"]();
          (s.autoStart = !0),
            (s.destroy = function () {}),
            (n.shared = s),
            (n.Ticker = r["default"]);
        },
        { "./Ticker": 118 },
      ],
      121: [
        function (e, t, n) {
          "use strict";
          function i() {
            return !(
              navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform)
            );
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      122: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            for (
              var t = 6 * e, n = new Uint16Array(t), i = 0, r = 0;
              t > i;
              i += 6, r += 4
            )
              (n[i + 0] = r + 0),
                (n[i + 1] = r + 1),
                (n[i + 2] = r + 2),
                (n[i + 3] = r + 0),
                (n[i + 4] = r + 2),
                (n[i + 5] = r + 3);
            return n;
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      123: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            var t =
              arguments.length > 1 && void 0 !== arguments[1]
                ? arguments[1]
                : window.location;
            if (0 === e.indexOf("data:")) return "";
            (t = t || window.location),
              o || (o = document.createElement("a")),
              (o.href = e),
              (e = s["default"].parse(o.href));
            var n = (!e.port && "" === t.port) || e.port === t.port;
            return e.hostname === t.hostname && n && e.protocol === t.protocol
              ? ""
              : "anonymous";
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("url"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r),
            o = void 0;
        },
        { url: 38 },
      ],
      124: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            if (e && e.__esModule) return e;
            var t = {};
            if (null != e)
              for (var n in e)
                Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
            return (t["default"] = e), t;
          }
          function r(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function s() {
            return ++B;
          }
          function o(e, t) {
            return (
              (t = t || []),
              (t[0] = ((e >> 16) & 255) / 255),
              (t[1] = ((e >> 8) & 255) / 255),
              (t[2] = (255 & e) / 255),
              t
            );
          }
          function a(e) {
            return (
              (e = e.toString(16)),
              "#" + (e = "000000".substr(0, 6 - e.length) + e)
            );
          }
          function l(e) {
            return (
              ((255 * e[0]) << 16) + ((255 * e[1]) << 8) + ((255 * e[2]) | 0)
            );
          }
          function c(e, t) {
            var n = S["default"].RETINA_PREFIX.exec(e);
            return n ? parseFloat(n[1]) : void 0 !== t ? t : 1;
          }
          function u(e) {
            var t = C.DATA_URI.exec(e);
            return t
              ? {
                  mediaType: t[1] ? t[1].toLowerCase() : void 0,
                  subType: t[2] ? t[2].toLowerCase() : void 0,
                  encoding: t[3] ? t[3].toLowerCase() : void 0,
                  data: t[4],
                }
              : void 0;
          }
          function h(e) {
            var t = C.URL_FILE_EXTENSION.exec(e);
            return t ? t[1].toLowerCase() : void 0;
          }
          function d(e) {
            var t = C.SVG_SIZE.exec(e),
              n = {};
            return (
              t &&
                ((n[t[1]] = Math.round(parseFloat(t[3]))),
                (n[t[5]] = Math.round(parseFloat(t[7])))),
              n
            );
          }
          function p() {
            F = !0;
          }
          function f(e) {
            if (!F) {
              if (navigator.userAgent.toLowerCase().indexOf("chrome") > -1) {
                var t = [
                  "\n %c %c %c PixiJS " +
                    C.VERSION +
                    " - \u2730 " +
                    e +
                    " \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n",
                  "background: #ff66a5; padding:5px 0;",
                  "background: #ff66a5; padding:5px 0;",
                  "color: #ff66a5; background: #030307; padding:5px 0;",
                  "background: #ff66a5; padding:5px 0;",
                  "background: #ffc3dc; padding:5px 0;",
                  "background: #ff66a5; padding:5px 0;",
                  "color: #ff2424; background: #fff; padding:5px 0;",
                  "color: #ff2424; background: #fff; padding:5px 0;",
                  "color: #ff2424; background: #fff; padding:5px 0;",
                ];
                window.console.log.apply(console, t);
              } else
                window.console &&
                  window.console.log(
                    "PixiJS " +
                      C.VERSION +
                      " - " +
                      e +
                      " - http://www.pixijs.com/"
                  );
              F = !0;
            }
          }
          function m() {
            var e = { stencil: !0, failIfMajorPerformanceCaveat: !0 };
            try {
              if (!window.WebGLRenderingContext) return !1;
              var t = document.createElement("canvas"),
                n =
                  t.getContext("webgl", e) ||
                  t.getContext("experimental-webgl", e),
                i = !(!n || !n.getContextAttributes().stencil);
              if (n) {
                var r = n.getExtension("WEBGL_lose_context");
                r && r.loseContext();
              }
              return (n = null), i;
            } catch (e) {
              return !1;
            }
          }
          function g(e) {
            return 0 === e ? 0 : 0 > e ? -1 : 1;
          }
          function v() {
            var e = void 0;
            for (e in j) j[e].destroy();
            for (e in H) H[e].destroy();
          }
          function _() {
            var e = void 0;
            for (e in j) delete j[e];
            for (e in H) delete H[e];
          }
          function y(e, t) {
            return $[t ? 1 : 0][e];
          }
          function b(e, t) {
            if (1 === t) return ((255 * t) << 24) + e;
            if (0 === t) return 0;
            var n = (e >> 16) & 255,
              i = (e >> 8) & 255,
              r = 255 & e;
            return (
              (n = (n * t + 0.5) | 0),
              (i = (i * t + 0.5) | 0),
              (r = (r * t + 0.5) | 0),
              ((255 * t) << 24) + (n << 16) + (i << 8) + r
            );
          }
          function w(e, t, n, i) {
            return (
              (n = n || new Float32Array(4)),
              i || void 0 === i
                ? ((n[0] = e[0] * t), (n[1] = e[1] * t), (n[2] = e[2] * t))
                : ((n[0] = e[0]), (n[1] = e[1]), (n[2] = e[2])),
              (n[3] = t),
              n
            );
          }
          function x(e, t, n, i) {
            return (
              (n = n || new Float32Array(4)),
              (n[0] = ((e >> 16) & 255) / 255),
              (n[1] = ((e >> 8) & 255) / 255),
              (n[2] = (255 & e) / 255),
              (i || void 0 === i) && ((n[0] *= t), (n[1] *= t), (n[2] *= t)),
              (n[3] = t),
              n
            );
          }
          (n.__esModule = !0),
            (n.premultiplyBlendMode =
              n.BaseTextureCache =
              n.TextureCache =
              n.mixins =
              n.pluginTarget =
              n.EventEmitter =
              n.removeItems =
              n.isMobile =
                void 0),
            (n.uid = s),
            (n.hex2rgb = o),
            (n.hex2string = a),
            (n.rgb2hex = l),
            (n.getResolutionOfUrl = c),
            (n.decomposeDataUri = u),
            (n.getUrlFileExtension = h),
            (n.getSvgSize = d),
            (n.skipHello = p),
            (n.sayHello = f),
            (n.isWebGLSupported = m),
            (n.sign = g),
            (n.destroyTextureCache = v),
            (n.clearTextureCache = _),
            (n.correctBlendMode = y),
            (n.premultiplyTint = b),
            (n.premultiplyRgba = w),
            (n.premultiplyTintToRgba = x);
          var C = e("../const"),
            T = e("../settings"),
            S = r(T),
            E = e("eventemitter3"),
            k = r(E),
            P = e("./pluginTarget"),
            I = r(P),
            A = e("./mixin"),
            O = i(A),
            D = e("ismobilejs"),
            M = i(D),
            R = e("remove-array-items"),
            L = r(R),
            N = e("./mapPremultipliedBlendModes"),
            U = r(N),
            B = 0,
            F = !1;
          (n.isMobile = M),
            (n.removeItems = L["default"]),
            (n.EventEmitter = k["default"]),
            (n.pluginTarget = I["default"]),
            (n.mixins = O);
          var j = (n.TextureCache = Object.create(null)),
            H = (n.BaseTextureCache = Object.create(null)),
            $ = (n.premultiplyBlendMode = U["default"]());
        },
        {
          "../const": 46,
          "../settings": 101,
          "./mapPremultipliedBlendModes": 125,
          "./mixin": 127,
          "./pluginTarget": 128,
          eventemitter3: 3,
          ismobilejs: 4,
          "remove-array-items": 31,
        },
      ],
      125: [
        function (e, t, n) {
          "use strict";
          function i() {
            for (var e = [], t = [], n = 0; 32 > n; n++) (e[n] = n), (t[n] = n);
            (e[r.BLEND_MODES.NORMAL_NPM] = r.BLEND_MODES.NORMAL),
              (e[r.BLEND_MODES.ADD_NPM] = r.BLEND_MODES.ADD),
              (e[r.BLEND_MODES.SCREEN_NPM] = r.BLEND_MODES.SCREEN),
              (t[r.BLEND_MODES.NORMAL] = r.BLEND_MODES.NORMAL_NPM),
              (t[r.BLEND_MODES.ADD] = r.BLEND_MODES.ADD_NPM),
              (t[r.BLEND_MODES.SCREEN] = r.BLEND_MODES.SCREEN_NPM);
            var i = [];
            return i.push(t), i.push(e), i;
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("../const");
        },
        { "../const": 46 },
      ],
      126: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return s["default"].tablet || s["default"].phone ? 4 : e;
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = e("ismobilejs"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r);
        },
        { ismobilejs: 4 },
      ],
      127: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (e && t)
              for (var n = Object.keys(t), i = 0; i < n.length; ++i) {
                var r = n[i];
                Object.defineProperty(
                  e,
                  r,
                  Object.getOwnPropertyDescriptor(t, r)
                );
              }
          }
          function r(e, t) {
            o.push(e, t);
          }
          function s() {
            for (var e = 0; e < o.length; e += 2) i(o[e], o[e + 1]);
            o.length = 0;
          }
          (n.__esModule = !0),
            (n.mixin = i),
            (n.delayMixin = r),
            (n.performMixins = s);
          var o = [];
        },
        {},
      ],
      128: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            (e.__plugins = {}),
              (e.registerPlugin = function (t, n) {
                e.__plugins[t] = n;
              }),
              (e.prototype.initPlugins = function () {
                this.plugins = this.plugins || {};
                for (var t in e.__plugins)
                  this.plugins[t] = new e.__plugins[t](this);
              }),
              (e.prototype.destroyPlugins = function () {
                for (var e in this.plugins)
                  this.plugins[e].destroy(), (this.plugins[e] = null);
                this.plugins = null;
              });
          }
          (n.__esModule = !0),
            (n["default"] = {
              mixin: function (e) {
                i(e);
              },
            });
        },
        {},
      ],
      129: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            var t = e.width,
              n = e.height,
              i = e.getContext("2d"),
              r = i.getImageData(0, 0, t, n),
              s = r.data,
              o = s.length,
              a = { top: null, left: null, right: null, bottom: null },
              l = void 0,
              c = void 0,
              u = void 0;
            for (l = 0; o > l; l += 4)
              0 !== s[l + 3] &&
                ((c = (l / 4) % t),
                (u = ~~(l / 4 / t)),
                null === a.top && (a.top = u),
                null === a.left ? (a.left = c) : c < a.left && (a.left = c),
                null === a.right
                  ? (a.right = c + 1)
                  : a.right < c && (a.right = c + 1),
                null === a.bottom
                  ? (a.bottom = u)
                  : a.bottom < u && (a.bottom = u));
            return (
              (t = a.right - a.left),
              (n = a.bottom - a.top + 1),
              { height: n, width: t, data: i.getImageData(a.left, a.top, t, n) }
            );
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      130: [
        function (e, t, n) {
          "use strict";
          function i() {}
          function r(e) {
            var t = e.mesh,
              n = e.particles,
              r = e.extras,
              s = e.filters,
              o = e.prepare,
              a = e.loaders,
              l = e.interaction;
            Object.defineProperties(e, {
              SpriteBatch: {
                get: function () {
                  throw new ReferenceError(
                    "SpriteBatch does not exist any more, please use the new ParticleContainer instead."
                  );
                },
              },
              AssetLoader: {
                get: function () {
                  throw new ReferenceError(
                    "The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class."
                  );
                },
              },
              Stage: {
                get: function () {
                  return (
                    i(
                      "You do not need to use a PIXI Stage any more, you can simply render any container."
                    ),
                    e.Container
                  );
                },
              },
              DisplayObjectContainer: {
                get: function () {
                  return (
                    i(
                      "DisplayObjectContainer has been shortened to Container, please use Container from now on."
                    ),
                    e.Container
                  );
                },
              },
              Strip: {
                get: function () {
                  return (
                    i(
                      "The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."
                    ),
                    t.Mesh
                  );
                },
              },
              Rope: {
                get: function () {
                  return (
                    i(
                      "The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."
                    ),
                    t.Rope
                  );
                },
              },
              ParticleContainer: {
                get: function () {
                  return (
                    i(
                      "The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."
                    ),
                    n.ParticleContainer
                  );
                },
              },
              MovieClip: {
                get: function () {
                  return (
                    i(
                      "The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."
                    ),
                    r.AnimatedSprite
                  );
                },
              },
              TilingSprite: {
                get: function () {
                  return (
                    i(
                      "The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."
                    ),
                    r.TilingSprite
                  );
                },
              },
              BitmapText: {
                get: function () {
                  return (
                    i(
                      "The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."
                    ),
                    r.BitmapText
                  );
                },
              },
              blendModes: {
                get: function () {
                  return (
                    i(
                      "The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."
                    ),
                    e.BLEND_MODES
                  );
                },
              },
              scaleModes: {
                get: function () {
                  return (
                    i(
                      "The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."
                    ),
                    e.SCALE_MODES
                  );
                },
              },
              BaseTextureCache: {
                get: function () {
                  return (
                    i(
                      "The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."
                    ),
                    e.utils.BaseTextureCache
                  );
                },
              },
              TextureCache: {
                get: function () {
                  return (
                    i(
                      "The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."
                    ),
                    e.utils.TextureCache
                  );
                },
              },
              math: {
                get: function () {
                  return (
                    i(
                      "The math namespace is deprecated, please access members already accessible on PIXI."
                    ),
                    e
                  );
                },
              },
              AbstractFilter: {
                get: function () {
                  return (
                    i(
                      "AstractFilter has been renamed to Filter, please use PIXI.Filter"
                    ),
                    e.Filter
                  );
                },
              },
              TransformManual: {
                get: function () {
                  return (
                    i(
                      "TransformManual has been renamed to TransformBase, please update your pixi-spine"
                    ),
                    e.TransformBase
                  );
                },
              },
              TARGET_FPMS: {
                get: function () {
                  return (
                    i(
                      "PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"
                    ),
                    e.settings.TARGET_FPMS
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"
                  ),
                    (e.settings.TARGET_FPMS = t);
                },
              },
              FILTER_RESOLUTION: {
                get: function () {
                  return (
                    i(
                      "PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"
                    ),
                    e.settings.FILTER_RESOLUTION
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"
                  ),
                    (e.settings.FILTER_RESOLUTION = t);
                },
              },
              RESOLUTION: {
                get: function () {
                  return (
                    i(
                      "PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"
                    ),
                    e.settings.RESOLUTION
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"
                  ),
                    (e.settings.RESOLUTION = t);
                },
              },
              MIPMAP_TEXTURES: {
                get: function () {
                  return (
                    i(
                      "PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"
                    ),
                    e.settings.MIPMAP_TEXTURES
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"
                  ),
                    (e.settings.MIPMAP_TEXTURES = t);
                },
              },
              SPRITE_BATCH_SIZE: {
                get: function () {
                  return (
                    i(
                      "PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"
                    ),
                    e.settings.SPRITE_BATCH_SIZE
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"
                  ),
                    (e.settings.SPRITE_BATCH_SIZE = t);
                },
              },
              SPRITE_MAX_TEXTURES: {
                get: function () {
                  return (
                    i(
                      "PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"
                    ),
                    e.settings.SPRITE_MAX_TEXTURES
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"
                  ),
                    (e.settings.SPRITE_MAX_TEXTURES = t);
                },
              },
              RETINA_PREFIX: {
                get: function () {
                  return (
                    i(
                      "PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"
                    ),
                    e.settings.RETINA_PREFIX
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"
                  ),
                    (e.settings.RETINA_PREFIX = t);
                },
              },
              DEFAULT_RENDER_OPTIONS: {
                get: function () {
                  return (
                    i(
                      "PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"
                    ),
                    e.settings.RENDER_OPTIONS
                  );
                },
              },
            });
            for (
              var c = [
                  { parent: "TRANSFORM_MODE", target: "TRANSFORM_MODE" },
                  { parent: "GC_MODES", target: "GC_MODE" },
                  { parent: "WRAP_MODES", target: "WRAP_MODE" },
                  { parent: "SCALE_MODES", target: "SCALE_MODE" },
                  { parent: "PRECISION", target: "PRECISION_FRAGMENT" },
                ],
                u = 0;
              u < c.length;
              u++
            )
              !(function (t) {
                var n = c[t];
                Object.defineProperty(e[n.parent], "DEFAULT", {
                  get: function () {
                    return (
                      i(
                        "PIXI." +
                          n.parent +
                          ".DEFAULT has been deprecated, please use PIXI.settings." +
                          n.target
                      ),
                      e.settings[n.target]
                    );
                  },
                  set: function (t) {
                    i(
                      "PIXI." +
                        n.parent +
                        ".DEFAULT has been deprecated, please use PIXI.settings." +
                        n.target
                    ),
                      (e.settings[n.target] = t);
                  },
                });
              })(u);
            Object.defineProperties(e.settings, {
              PRECISION: {
                get: function () {
                  return (
                    i(
                      "PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"
                    ),
                    e.settings.PRECISION_FRAGMENT
                  );
                },
                set: function (t) {
                  i(
                    "PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"
                  ),
                    (e.settings.PRECISION_FRAGMENT = t);
                },
              },
            }),
              r.AnimatedSprite &&
                Object.defineProperties(r, {
                  MovieClip: {
                    get: function () {
                      return (
                        i(
                          "The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."
                        ),
                        r.AnimatedSprite
                      );
                    },
                  },
                }),
              (e.DisplayObject.prototype.generateTexture = function (e, t, n) {
                return (
                  i(
                    "generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"
                  ),
                  e.generateTexture(this, t, n)
                );
              }),
              (e.Graphics.prototype.generateTexture = function (e, t) {
                return (
                  i(
                    "graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"
                  ),
                  this.generateCanvasTexture(e, t)
                );
              }),
              (e.RenderTexture.prototype.render = function (e, t, n, r) {
                this.legacyRenderer.render(e, this, n, t, !r),
                  i(
                    "RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)"
                  );
              }),
              (e.RenderTexture.prototype.getImage = function (e) {
                return (
                  i(
                    "RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"
                  ),
                  this.legacyRenderer.extract.image(e)
                );
              }),
              (e.RenderTexture.prototype.getBase64 = function (e) {
                return (
                  i(
                    "RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"
                  ),
                  this.legacyRenderer.extract.base64(e)
                );
              }),
              (e.RenderTexture.prototype.getCanvas = function (e) {
                return (
                  i(
                    "RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"
                  ),
                  this.legacyRenderer.extract.canvas(e)
                );
              }),
              (e.RenderTexture.prototype.getPixels = function (e) {
                return (
                  i(
                    "RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"
                  ),
                  this.legacyRenderer.pixels(e)
                );
              }),
              (e.Sprite.prototype.setTexture = function (e) {
                (this.texture = e),
                  i(
                    "setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;"
                  );
              }),
              r.BitmapText &&
                (r.BitmapText.prototype.setText = function (e) {
                  (this.text = e),
                    i(
                      "setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';"
                    );
                }),
              (e.Text.prototype.setText = function (e) {
                (this.text = e),
                  i(
                    "setText is now deprecated, please use the text property, e.g : myText.text = 'my text';"
                  );
              }),
              (e.Text.calculateFontProperties = function (t) {
                return (
                  i(
                    "Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"
                  ),
                  e.TextMetrics.measureFont(t)
                );
              }),
              Object.defineProperties(e.Text, {
                fontPropertiesCache: {
                  get: function () {
                    return (
                      i("Text.fontPropertiesCache is deprecated"),
                      e.TextMetrics._fonts
                    );
                  },
                },
                fontPropertiesCanvas: {
                  get: function () {
                    return (
                      i("Text.fontPropertiesCanvas is deprecated"),
                      e.TextMetrics._canvas
                    );
                  },
                },
                fontPropertiesContext: {
                  get: function () {
                    return (
                      i("Text.fontPropertiesContext is deprecated"),
                      e.TextMetrics._context
                    );
                  },
                },
              }),
              (e.Text.prototype.setStyle = function (e) {
                (this.style = e),
                  i(
                    "setStyle is now deprecated, please use the style property, e.g : myText.style = style;"
                  );
              }),
              (e.Text.prototype.determineFontProperties = function (t) {
                return (
                  i(
                    "determineFontProperties is now deprecated, please use TextMetrics.measureFont method"
                  ),
                  e.TextMetrics.measureFont(t)
                );
              }),
              (e.Text.getFontStyle = function (t) {
                return (
                  i(
                    "getFontStyle is now deprecated, please use TextStyle.toFontString() instead"
                  ),
                  (t = t || {}),
                  t instanceof e.TextStyle || (t = new e.TextStyle(t)),
                  t.toFontString()
                );
              }),
              Object.defineProperties(e.TextStyle.prototype, {
                font: {
                  get: function () {
                    i(
                      "text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on"
                    );
                    var e =
                      "number" == typeof this._fontSize
                        ? this._fontSize + "px"
                        : this._fontSize;
                    return (
                      this._fontStyle +
                      " " +
                      this._fontVariant +
                      " " +
                      this._fontWeight +
                      " " +
                      e +
                      " " +
                      this._fontFamily
                    );
                  },
                  set: function (e) {
                    i(
                      "text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"
                    ),
                      (this._fontStyle =
                        e.indexOf("italic") > 1
                          ? "italic"
                          : e.indexOf("oblique") > -1
                          ? "oblique"
                          : "normal"),
                      (this._fontVariant =
                        e.indexOf("small-caps") > -1 ? "small-caps" : "normal");
                    var t = e.split(" "),
                      n = -1;
                    this._fontSize = 26;
                    for (var r = 0; r < t.length; ++r)
                      if (t[r].match(/(px|pt|em|%)/)) {
                        (n = r), (this._fontSize = t[r]);
                        break;
                      }
                    this._fontWeight = "normal";
                    for (var s = 0; n > s; ++s)
                      if (
                        t[s].match(
                          /(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/
                        )
                      ) {
                        this._fontWeight = t[s];
                        break;
                      }
                    if (n > -1 && n < t.length - 1) {
                      this._fontFamily = "";
                      for (var o = n + 1; o < t.length; ++o)
                        this._fontFamily += t[o] + " ";
                      this._fontFamily = this._fontFamily.slice(0, -1);
                    } else this._fontFamily = "Arial";
                    this.styleID++;
                  },
                },
              }),
              (e.Texture.prototype.setFrame = function (e) {
                (this.frame = e),
                  i(
                    "setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;"
                  );
              }),
              (e.Texture.addTextureToCache = function (t, n) {
                e.Texture.addToCache(t, n),
                  i(
                    "Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on."
                  );
              }),
              (e.Texture.removeTextureFromCache = function (t) {
                return (
                  i(
                    "Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"
                  ),
                  e.BaseTexture.removeFromCache(t),
                  e.Texture.removeFromCache(t)
                );
              }),
              Object.defineProperties(s, {
                AbstractFilter: {
                  get: function () {
                    return (
                      i(
                        "AstractFilter has been renamed to Filter, please use PIXI.Filter"
                      ),
                      e.AbstractFilter
                    );
                  },
                },
                SpriteMaskFilter: {
                  get: function () {
                    return (
                      i(
                        "filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."
                      ),
                      e.SpriteMaskFilter
                    );
                  },
                },
              }),
              (e.utils.uuid = function () {
                return (
                  i(
                    "utils.uuid() is deprecated, please use utils.uid() from now on."
                  ),
                  e.utils.uid()
                );
              }),
              (e.utils.canUseNewCanvasBlendModes = function () {
                return (
                  i(
                    "utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"
                  ),
                  e.CanvasTinter.canUseMultiply
                );
              });
            var h = !0;
            if (
              (Object.defineProperty(e.utils, "_saidHello", {
                set: function (e) {
                  e &&
                    (i(
                      "PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"
                    ),
                    this.skipHello()),
                    (h = e);
                },
                get: function () {
                  return h;
                },
              }),
              o.BasePrepare &&
                (o.BasePrepare.prototype.register = function (e, t) {
                  return (
                    i(
                      "renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"
                    ),
                    e && this.registerFindHook(e),
                    t && this.registerUploadHook(t),
                    this
                  );
                }),
              o.canvas &&
                Object.defineProperty(o.canvas, "UPLOADS_PER_FRAME", {
                  set: function () {
                    i(
                      "PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer"
                    );
                  },
                  get: function () {
                    return (
                      i(
                        "PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"
                      ),
                      0 / 0
                    );
                  },
                }),
              o.webgl &&
                Object.defineProperty(o.webgl, "UPLOADS_PER_FRAME", {
                  set: function () {
                    i(
                      "PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer"
                    );
                  },
                  get: function () {
                    return (
                      i(
                        "PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"
                      ),
                      0 / 0
                    );
                  },
                }),
              a.Loader)
            ) {
              var d = a.Resource,
                p = a.Loader;
              Object.defineProperties(d.prototype, {
                isJson: {
                  get: function () {
                    return (
                      i(
                        "The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."
                      ),
                      this.type === d.TYPE.JSON
                    );
                  },
                },
                isXml: {
                  get: function () {
                    return (
                      i(
                        "The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."
                      ),
                      this.type === d.TYPE.XML
                    );
                  },
                },
                isImage: {
                  get: function () {
                    return (
                      i(
                        "The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."
                      ),
                      this.type === d.TYPE.IMAGE
                    );
                  },
                },
                isAudio: {
                  get: function () {
                    return (
                      i(
                        "The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."
                      ),
                      this.type === d.TYPE.AUDIO
                    );
                  },
                },
                isVideo: {
                  get: function () {
                    return (
                      i(
                        "The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."
                      ),
                      this.type === d.TYPE.VIDEO
                    );
                  },
                },
              }),
                Object.defineProperties(p.prototype, {
                  before: {
                    get: function () {
                      return (
                        i(
                          "The before() method is deprecated, please use pre()."
                        ),
                        this.pre
                      );
                    },
                  },
                  after: {
                    get: function () {
                      return (
                        i(
                          "The after() method is deprecated, please use use()."
                        ),
                        this.use
                      );
                    },
                  },
                });
            }
            l.interactiveTarget &&
              Object.defineProperty(l.interactiveTarget, "defaultCursor", {
                set: function (e) {
                  i("Property defaultCursor has been replaced with 'cursor'. "),
                    (this.cursor = e);
                },
                get: function () {
                  return (
                    i(
                      "Property defaultCursor has been replaced with 'cursor'. "
                    ),
                    this.cursor
                  );
                },
              }),
              l.InteractionManager &&
                (Object.defineProperty(
                  l.InteractionManager,
                  "defaultCursorStyle",
                  {
                    set: function (e) {
                      i(
                        "Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "
                      ),
                        (this.cursorStyles["default"] = e);
                    },
                    get: function () {
                      return (
                        i(
                          "Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "
                        ),
                        this.cursorStyles["default"]
                      );
                    },
                  }
                ),
                Object.defineProperty(
                  l.InteractionManager,
                  "currentCursorStyle",
                  {
                    set: function (e) {
                      i(
                        "Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."
                      ),
                        (this.currentCursorMode = e);
                    },
                    get: function () {
                      return (
                        i(
                          "Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."
                        ),
                        this.currentCursorMode
                      );
                    },
                  }
                ));
          }
          (n.__esModule = !0), (n["default"] = r);
        },
        {},
      ],
      131: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../core"),
            s = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(r),
            o = new s.Rectangle(),
            a = (function () {
              function e(t) {
                i(this, e), (this.renderer = t), (t.extract = this);
              }
              return (
                (e.prototype.image = function (e) {
                  var t = new Image();
                  return (t.src = this.base64(e)), t;
                }),
                (e.prototype.base64 = function (e) {
                  return this.canvas(e).toDataURL();
                }),
                (e.prototype.canvas = function (e) {
                  var t = this.renderer,
                    n = void 0,
                    i = void 0,
                    r = void 0,
                    a = void 0;
                  e &&
                    (a =
                      e instanceof s.RenderTexture ? e : t.generateTexture(e)),
                    a
                      ? ((n = a.baseTexture._canvasRenderTarget.context),
                        (i = a.baseTexture._canvasRenderTarget.resolution),
                        (r = a.frame))
                      : ((n = t.rootContext),
                        (r = o),
                        (r.width = this.renderer.width),
                        (r.height = this.renderer.height));
                  var l = r.width * i,
                    c = r.height * i,
                    u = new s.CanvasRenderTarget(l, c),
                    h = n.getImageData(r.x * i, r.y * i, l, c);
                  return u.context.putImageData(h, 0, 0), u.canvas;
                }),
                (e.prototype.pixels = function (e) {
                  var t = this.renderer,
                    n = void 0,
                    i = void 0,
                    r = void 0,
                    a = void 0;
                  return (
                    e &&
                      (a =
                        e instanceof s.RenderTexture
                          ? e
                          : t.generateTexture(e)),
                    a
                      ? ((n = a.baseTexture._canvasRenderTarget.context),
                        (i = a.baseTexture._canvasRenderTarget.resolution),
                        (r = a.frame))
                      : ((n = t.rootContext),
                        (r = o),
                        (r.width = t.width),
                        (r.height = t.height)),
                    n.getImageData(0, 0, r.width * i, r.height * i).data
                  );
                }),
                (e.prototype.destroy = function () {
                  (this.renderer.extract = null), (this.renderer = null);
                }),
                e
              );
            })();
          (n["default"] = a), s.CanvasRenderer.registerPlugin("extract", a);
        },
        { "../../core": 65 },
      ],
      132: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./webgl/WebGLExtract");
          Object.defineProperty(n, "webgl", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./canvas/CanvasExtract");
          Object.defineProperty(n, "canvas", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
        },
        { "./canvas/CanvasExtract": 131, "./webgl/WebGLExtract": 133 },
      ],
      133: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../core"),
            s = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(r),
            o = new s.Rectangle(),
            a = (function () {
              function e(t) {
                i(this, e), (this.renderer = t), (t.extract = this);
              }
              return (
                (e.prototype.image = function (e) {
                  var t = new Image();
                  return (t.src = this.base64(e)), t;
                }),
                (e.prototype.base64 = function (e) {
                  return this.canvas(e).toDataURL();
                }),
                (e.prototype.canvas = function (e) {
                  var t = this.renderer,
                    n = void 0,
                    i = void 0,
                    r = void 0,
                    a = !1,
                    l = void 0;
                  e &&
                    (l =
                      e instanceof s.RenderTexture
                        ? e
                        : this.renderer.generateTexture(e)),
                    l
                      ? ((n =
                          l.baseTexture._glRenderTargets[
                            this.renderer.CONTEXT_UID
                          ]),
                        (i = n.resolution),
                        (r = l.frame),
                        (a = !1))
                      : ((n = this.renderer.rootRenderTarget),
                        (i = n.resolution),
                        (a = !0),
                        (r = o),
                        (r.width = n.size.width),
                        (r.height = n.size.height));
                  var c = r.width * i,
                    u = r.height * i,
                    h = new s.CanvasRenderTarget(c, u);
                  if (n) {
                    t.bindRenderTarget(n);
                    var d = new Uint8Array(4 * c * u),
                      p = t.gl;
                    p.readPixels(
                      r.x * i,
                      r.y * i,
                      c,
                      u,
                      p.RGBA,
                      p.UNSIGNED_BYTE,
                      d
                    );
                    var f = h.context.getImageData(0, 0, c, u);
                    f.data.set(d),
                      h.context.putImageData(f, 0, 0),
                      a &&
                        (h.context.scale(1, -1),
                        h.context.drawImage(h.canvas, 0, -u));
                  }
                  return h.canvas;
                }),
                (e.prototype.pixels = function (e) {
                  var t = this.renderer,
                    n = void 0,
                    i = void 0,
                    r = void 0,
                    a = void 0;
                  e &&
                    (a =
                      e instanceof s.RenderTexture
                        ? e
                        : this.renderer.generateTexture(e)),
                    a
                      ? ((n =
                          a.baseTexture._glRenderTargets[
                            this.renderer.CONTEXT_UID
                          ]),
                        (i = n.resolution),
                        (r = a.frame))
                      : ((n = this.renderer.rootRenderTarget),
                        (i = n.resolution),
                        (r = o),
                        (r.width = n.size.width),
                        (r.height = n.size.height));
                  var l = r.width * i,
                    c = r.height * i,
                    u = new Uint8Array(4 * l * c);
                  if (n) {
                    t.bindRenderTarget(n);
                    var h = t.gl;
                    h.readPixels(
                      r.x * i,
                      r.y * i,
                      l,
                      c,
                      h.RGBA,
                      h.UNSIGNED_BYTE,
                      u
                    );
                  }
                  return u;
                }),
                (e.prototype.destroy = function () {
                  (this.renderer.extract = null), (this.renderer = null);
                }),
                e
              );
            })();
          (n["default"] = a), s.WebGLRenderer.registerPlugin("extract", a);
        },
        { "../../core": 65 },
      ],
      134: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = (function (e) {
              function t(n, s) {
                i(this, t);
                var o = r(
                  this,
                  e.call(this, n[0] instanceof l.Texture ? n[0] : n[0].texture)
                );
                return (
                  (o._textures = null),
                  (o._durations = null),
                  (o.textures = n),
                  (o._autoUpdate = !1 !== s),
                  (o.animationSpeed = 1),
                  (o.loop = !0),
                  (o.onComplete = null),
                  (o.onFrameChange = null),
                  (o.onLoop = null),
                  (o._currentTime = 0),
                  (o.playing = !1),
                  o
                );
              }
              return (
                s(t, e),
                (t.prototype.stop = function () {
                  this.playing &&
                    ((this.playing = !1),
                    this._autoUpdate &&
                      l.ticker.shared.remove(this.update, this));
                }),
                (t.prototype.play = function () {
                  this.playing ||
                    ((this.playing = !0),
                    this._autoUpdate &&
                      l.ticker.shared.add(
                        this.update,
                        this,
                        l.UPDATE_PRIORITY.HIGH
                      ));
                }),
                (t.prototype.gotoAndStop = function (e) {
                  this.stop();
                  var t = this.currentFrame;
                  (this._currentTime = e),
                    t !== this.currentFrame && this.updateTexture();
                }),
                (t.prototype.gotoAndPlay = function (e) {
                  var t = this.currentFrame;
                  (this._currentTime = e),
                    t !== this.currentFrame && this.updateTexture(),
                    this.play();
                }),
                (t.prototype.update = function (e) {
                  var t = this.animationSpeed * e,
                    n = this.currentFrame;
                  if (null !== this._durations) {
                    var i =
                      (this._currentTime % 1) *
                      this._durations[this.currentFrame];
                    for (i += (t / 60) * 1e3; 0 > i; )
                      this._currentTime--,
                        (i += this._durations[this.currentFrame]);
                    var r = Math.sign(this.animationSpeed * e);
                    for (
                      this._currentTime = Math.floor(this._currentTime);
                      i >= this._durations[this.currentFrame];

                    )
                      (i -= this._durations[this.currentFrame] * r),
                        (this._currentTime += r);
                    this._currentTime += i / this._durations[this.currentFrame];
                  } else this._currentTime += t;
                  this._currentTime < 0 && !this.loop
                    ? (this.gotoAndStop(0),
                      this.onComplete && this.onComplete())
                    : this._currentTime >= this._textures.length && !this.loop
                    ? (this.gotoAndStop(this._textures.length - 1),
                      this.onComplete && this.onComplete())
                    : n !== this.currentFrame &&
                      (this.loop &&
                        this.onLoop &&
                        (this.animationSpeed > 0 && this.currentFrame < n
                          ? this.onLoop()
                          : this.animationSpeed < 0 &&
                            this.currentFrame > n &&
                            this.onLoop()),
                      this.updateTexture());
                }),
                (t.prototype.updateTexture = function () {
                  (this._texture = this._textures[this.currentFrame]),
                    (this._textureID = -1),
                    (this.cachedTint = 16777215),
                    this.onFrameChange && this.onFrameChange(this.currentFrame);
                }),
                (t.prototype.destroy = function (t) {
                  this.stop(), e.prototype.destroy.call(this, t);
                }),
                (t.fromFrames = function (e) {
                  for (var n = [], i = 0; i < e.length; ++i)
                    n.push(l.Texture.fromFrame(e[i]));
                  return new t(n);
                }),
                (t.fromImages = function (e) {
                  for (var n = [], i = 0; i < e.length; ++i)
                    n.push(l.Texture.fromImage(e[i]));
                  return new t(n);
                }),
                o(t, [
                  {
                    key: "totalFrames",
                    get: function () {
                      return this._textures.length;
                    },
                  },
                  {
                    key: "textures",
                    get: function () {
                      return this._textures;
                    },
                    set: function (e) {
                      if (e[0] instanceof l.Texture)
                        (this._textures = e), (this._durations = null);
                      else {
                        (this._textures = []), (this._durations = []);
                        for (var t = 0; t < e.length; t++)
                          this._textures.push(e[t].texture),
                            this._durations.push(e[t].time);
                      }
                      this.gotoAndStop(0), this.updateTexture();
                    },
                  },
                  {
                    key: "currentFrame",
                    get: function () {
                      var e =
                        Math.floor(this._currentTime) % this._textures.length;
                      return 0 > e && (e += this._textures.length), e;
                    },
                  },
                ]),
                t
              );
            })(l.Sprite);
          n["default"] = c;
        },
        { "../core": 65 },
      ],
      135: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("../core/math/ObservablePoint"),
            h = i(u),
            d = e("../core/settings"),
            p = i(d),
            f = (function (e) {
              function t(n) {
                var i =
                  arguments.length > 1 && void 0 !== arguments[1]
                    ? arguments[1]
                    : {};
                r(this, t);
                var o = s(this, e.call(this));
                return (
                  (o._textWidth = 0),
                  (o._textHeight = 0),
                  (o._glyphs = []),
                  (o._font = {
                    tint: void 0 !== i.tint ? i.tint : 16777215,
                    align: i.align || "left",
                    name: null,
                    size: 0,
                  }),
                  (o.font = i.font),
                  (o._text = n),
                  (o._maxWidth = 0),
                  (o._maxLineHeight = 0),
                  (o._anchor = new h["default"](
                    function () {
                      o.dirty = !0;
                    },
                    o,
                    0,
                    0
                  )),
                  (o.dirty = !1),
                  o.updateText(),
                  o
                );
              }
              return (
                o(t, e),
                (t.prototype.updateText = function () {
                  for (
                    var e = t.fonts[this._font.name],
                      n = this._font.size / e.size,
                      i = new c.Point(),
                      r = [],
                      s = [],
                      o = null,
                      a = 0,
                      l = 0,
                      u = 0,
                      h = -1,
                      d = 0,
                      p = 0,
                      f = 0,
                      m = 0;
                    m < this.text.length;
                    m++
                  ) {
                    var g = this.text.charCodeAt(m);
                    if (
                      (/(\s)/.test(this.text.charAt(m)) && ((h = m), (d = a)),
                      /(?:\r\n|\r|\n)/.test(this.text.charAt(m)))
                    )
                      s.push(a),
                        (l = Math.max(l, a)),
                        u++,
                        (i.x = 0),
                        (i.y += e.lineHeight),
                        (o = null);
                    else if (
                      -1 !== h &&
                      this._maxWidth > 0 &&
                      i.x * n > this._maxWidth
                    )
                      c.utils.removeItems(r, h - p, m - h),
                        (m = h),
                        (h = -1),
                        ++p,
                        s.push(d),
                        (l = Math.max(l, d)),
                        u++,
                        (i.x = 0),
                        (i.y += e.lineHeight),
                        (o = null);
                    else {
                      var v = e.chars[g];
                      v &&
                        (o && v.kerning[o] && (i.x += v.kerning[o]),
                        r.push({
                          texture: v.texture,
                          line: u,
                          charCode: g,
                          position: new c.Point(
                            i.x + v.xOffset,
                            i.y + v.yOffset
                          ),
                        }),
                        (a = i.x + (v.texture.width + v.xOffset)),
                        (i.x += v.xAdvance),
                        (f = Math.max(f, v.yOffset + v.texture.height)),
                        (o = g));
                    }
                  }
                  s.push(a), (l = Math.max(l, a));
                  for (var _ = [], y = 0; u >= y; y++) {
                    var b = 0;
                    "right" === this._font.align
                      ? (b = l - s[y])
                      : "center" === this._font.align && (b = (l - s[y]) / 2),
                      _.push(b);
                  }
                  for (var w = r.length, x = this.tint, C = 0; w > C; C++) {
                    var T = this._glyphs[C];
                    T
                      ? (T.texture = r[C].texture)
                      : ((T = new c.Sprite(r[C].texture)),
                        this._glyphs.push(T)),
                      (T.position.x = (r[C].position.x + _[r[C].line]) * n),
                      (T.position.y = r[C].position.y * n),
                      (T.scale.x = T.scale.y = n),
                      (T.tint = x),
                      T.parent || this.addChild(T);
                  }
                  for (var S = w; S < this._glyphs.length; ++S)
                    this.removeChild(this._glyphs[S]);
                  if (
                    ((this._textWidth = l * n),
                    (this._textHeight = (i.y + e.lineHeight) * n),
                    0 !== this.anchor.x || 0 !== this.anchor.y)
                  )
                    for (var E = 0; w > E; E++)
                      (this._glyphs[E].x -= this._textWidth * this.anchor.x),
                        (this._glyphs[E].y -= this._textHeight * this.anchor.y);
                  this._maxLineHeight = f * n;
                }),
                (t.prototype.updateTransform = function () {
                  this.validate(), this.containerUpdateTransform();
                }),
                (t.prototype.getLocalBounds = function () {
                  return this.validate(), e.prototype.getLocalBounds.call(this);
                }),
                (t.prototype.validate = function () {
                  this.dirty && (this.updateText(), (this.dirty = !1));
                }),
                (t.registerFont = function (e, n) {
                  var i = {},
                    r = e.getElementsByTagName("info")[0],
                    s = e.getElementsByTagName("common")[0],
                    o = n.baseTexture.resolution || p["default"].RESOLUTION;
                  (i.font = r.getAttribute("face")),
                    (i.size = parseInt(r.getAttribute("size"), 10)),
                    (i.lineHeight =
                      parseInt(s.getAttribute("lineHeight"), 10) / o),
                    (i.chars = {});
                  for (
                    var a = e.getElementsByTagName("char"), l = 0;
                    l < a.length;
                    l++
                  ) {
                    var u = a[l],
                      h = parseInt(u.getAttribute("id"), 10),
                      d = new c.Rectangle(
                        parseInt(u.getAttribute("x"), 10) / o + n.frame.x / o,
                        parseInt(u.getAttribute("y"), 10) / o + n.frame.y / o,
                        parseInt(u.getAttribute("width"), 10) / o,
                        parseInt(u.getAttribute("height"), 10) / o
                      );
                    i.chars[h] = {
                      xOffset: parseInt(u.getAttribute("xoffset"), 10) / o,
                      yOffset: parseInt(u.getAttribute("yoffset"), 10) / o,
                      xAdvance: parseInt(u.getAttribute("xadvance"), 10) / o,
                      kerning: {},
                      texture: new c.Texture(n.baseTexture, d),
                    };
                  }
                  for (
                    var f = e.getElementsByTagName("kerning"), m = 0;
                    m < f.length;
                    m++
                  ) {
                    var g = f[m],
                      v = parseInt(g.getAttribute("first"), 10) / o,
                      _ = parseInt(g.getAttribute("second"), 10) / o,
                      y = parseInt(g.getAttribute("amount"), 10) / o;
                    i.chars[_] && (i.chars[_].kerning[v] = y);
                  }
                  return (t.fonts[i.font] = i), i;
                }),
                a(t, [
                  {
                    key: "tint",
                    get: function () {
                      return this._font.tint;
                    },
                    set: function (e) {
                      (this._font.tint =
                        "number" == typeof e && e >= 0 ? e : 16777215),
                        (this.dirty = !0);
                    },
                  },
                  {
                    key: "align",
                    get: function () {
                      return this._font.align;
                    },
                    set: function (e) {
                      (this._font.align = e || "left"), (this.dirty = !0);
                    },
                  },
                  {
                    key: "anchor",
                    get: function () {
                      return this._anchor;
                    },
                    set: function (e) {
                      "number" == typeof e
                        ? this._anchor.set(e)
                        : this._anchor.copy(e);
                    },
                  },
                  {
                    key: "font",
                    get: function () {
                      return this._font;
                    },
                    set: function (e) {
                      e &&
                        ("string" == typeof e
                          ? ((e = e.split(" ")),
                            (this._font.name =
                              1 === e.length ? e[0] : e.slice(1).join(" ")),
                            (this._font.size =
                              e.length >= 2
                                ? parseInt(e[0], 10)
                                : t.fonts[this._font.name].size))
                          : ((this._font.name = e.name),
                            (this._font.size =
                              "number" == typeof e.size
                                ? e.size
                                : parseInt(e.size, 10))),
                        (this.dirty = !0));
                    },
                  },
                  {
                    key: "text",
                    get: function () {
                      return this._text;
                    },
                    set: function (e) {
                      (e = e.toString() || " "),
                        this._text !== e &&
                          ((this._text = e), (this.dirty = !0));
                    },
                  },
                  {
                    key: "maxWidth",
                    get: function () {
                      return this._maxWidth;
                    },
                    set: function (e) {
                      this._maxWidth !== e &&
                        ((this._maxWidth = e), (this.dirty = !0));
                    },
                  },
                  {
                    key: "maxLineHeight",
                    get: function () {
                      return this.validate(), this._maxLineHeight;
                    },
                  },
                  {
                    key: "textWidth",
                    get: function () {
                      return this.validate(), this._textWidth;
                    },
                  },
                  {
                    key: "textHeight",
                    get: function () {
                      return this.validate(), this._textHeight;
                    },
                  },
                ]),
                t
              );
            })(c.Container);
          (n["default"] = f), (f.fonts = {});
        },
        {
          "../core": 65,
          "../core/math/ObservablePoint": 68,
          "../core/settings": 101,
        },
      ],
      136: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("../core/math/Matrix"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = new o["default"](),
            l = (function () {
              function e(t, n) {
                i(this, e),
                  (this._texture = t),
                  (this.mapCoord = new o["default"]()),
                  (this.uClampFrame = new Float32Array(4)),
                  (this.uClampOffset = new Float32Array(2)),
                  (this._lastTextureID = -1),
                  (this.clampOffset = 0),
                  (this.clampMargin = void 0 === n ? 0.5 : n);
              }
              return (
                (e.prototype.multiplyUvs = function (e, t) {
                  void 0 === t && (t = e);
                  for (var n = this.mapCoord, i = 0; i < e.length; i += 2) {
                    var r = e[i],
                      s = e[i + 1];
                    (t[i] = r * n.a + s * n.c + n.tx),
                      (t[i + 1] = r * n.b + s * n.d + n.ty);
                  }
                  return t;
                }),
                (e.prototype.update = function (e) {
                  var t = this._texture;
                  if (!t || !t.valid) return !1;
                  if (!e && this._lastTextureID === t._updateID) return !1;
                  this._lastTextureID = t._updateID;
                  var n = t._uvs;
                  this.mapCoord.set(
                    n.x1 - n.x0,
                    n.y1 - n.y0,
                    n.x3 - n.x0,
                    n.y3 - n.y0,
                    n.x0,
                    n.y0
                  );
                  var i = t.orig,
                    r = t.trim;
                  r &&
                    (a.set(
                      i.width / r.width,
                      0,
                      0,
                      i.height / r.height,
                      -r.x / r.width,
                      -r.y / r.height
                    ),
                    this.mapCoord.append(a));
                  var s = t.baseTexture,
                    o = this.uClampFrame,
                    l = this.clampMargin / s.resolution,
                    c = this.clampOffset;
                  return (
                    (o[0] = (t._frame.x + l + c) / s.width),
                    (o[1] = (t._frame.y + l + c) / s.height),
                    (o[2] = (t._frame.x + t._frame.width - l + c) / s.width),
                    (o[3] = (t._frame.y + t._frame.height - l + c) / s.height),
                    (this.uClampOffset[0] = c / s.realWidth),
                    (this.uClampOffset[1] = c / s.realHeight),
                    !0
                  );
                }),
                r(e, [
                  {
                    key: "texture",
                    get: function () {
                      return this._texture;
                    },
                    set: function (e) {
                      (this._texture = e), (this._lastTextureID = -1);
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = l;
        },
        { "../core/math/Matrix": 67 },
      ],
      137: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("../core/sprites/canvas/CanvasTinter"),
            h = i(u),
            d = e("./TextureTransform"),
            p = i(d),
            f = new c.Point(),
            m = (function (e) {
              function t(n) {
                var i =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 100,
                  o =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 100;
                r(this, t);
                var a = s(this, e.call(this, n));
                return (
                  (a.tileTransform = new c.TransformStatic()),
                  (a._width = i),
                  (a._height = o),
                  (a._canvasPattern = null),
                  (a.uvTransform = n.transform || new p["default"](n)),
                  (a.pluginName = "tilingSprite"),
                  (a.uvRespectAnchor = !1),
                  a
                );
              }
              return (
                o(t, e),
                (t.prototype._onTextureUpdate = function () {
                  this.uvTransform &&
                    (this.uvTransform.texture = this._texture),
                    (this.cachedTint = 16777215);
                }),
                (t.prototype._renderWebGL = function (e) {
                  var t = this._texture;
                  t &&
                    t.valid &&
                    (this.tileTransform.updateLocalTransform(),
                    this.uvTransform.update(),
                    e.setObjectRenderer(e.plugins[this.pluginName]),
                    e.plugins[this.pluginName].render(this));
                }),
                (t.prototype._renderCanvas = function (e) {
                  var t = this._texture;
                  if (t.baseTexture.hasLoaded) {
                    var n = e.context,
                      i = this.worldTransform,
                      r = e.resolution,
                      s = t.baseTexture,
                      o = s.resolution,
                      a =
                        ((this.tilePosition.x / this.tileScale.x) %
                          t._frame.width) *
                        o,
                      l =
                        ((this.tilePosition.y / this.tileScale.y) %
                          t._frame.height) *
                        o;
                    if (
                      this._textureID !== this._texture._updateID ||
                      this.cachedTint !== this.tint
                    ) {
                      this._textureID = this._texture._updateID;
                      var u = new c.CanvasRenderTarget(
                        t._frame.width,
                        t._frame.height,
                        o
                      );
                      16777215 !== this.tint
                        ? ((this.tintedTexture = h["default"].getTintedTexture(
                            this,
                            this.tint
                          )),
                          u.context.drawImage(this.tintedTexture, 0, 0))
                        : u.context.drawImage(
                            s.source,
                            -t._frame.x * o,
                            -t._frame.y * o
                          ),
                        (this.cachedTint = this.tint),
                        (this._canvasPattern = u.context.createPattern(
                          u.canvas,
                          "repeat"
                        ));
                    }
                    (n.globalAlpha = this.worldAlpha),
                      n.setTransform(
                        i.a * r,
                        i.b * r,
                        i.c * r,
                        i.d * r,
                        i.tx * r,
                        i.ty * r
                      ),
                      e.setBlendMode(this.blendMode),
                      (n.fillStyle = this._canvasPattern),
                      n.scale(this.tileScale.x / o, this.tileScale.y / o);
                    var d = this.anchor.x * -this._width,
                      p = this.anchor.y * -this._height;
                    this.uvRespectAnchor
                      ? (n.translate(a, l),
                        n.fillRect(
                          -a + d,
                          -l + p,
                          (this._width / this.tileScale.x) * o,
                          (this._height / this.tileScale.y) * o
                        ))
                      : (n.translate(a + d, l + p),
                        n.fillRect(
                          -a,
                          -l,
                          (this._width / this.tileScale.x) * o,
                          (this._height / this.tileScale.y) * o
                        ));
                  }
                }),
                (t.prototype._calculateBounds = function () {
                  var e = this._width * -this._anchor._x,
                    t = this._height * -this._anchor._y,
                    n = this._width * (1 - this._anchor._x),
                    i = this._height * (1 - this._anchor._y);
                  this._bounds.addFrame(this.transform, e, t, n, i);
                }),
                (t.prototype.getLocalBounds = function (t) {
                  return 0 === this.children.length
                    ? ((this._bounds.minX = this._width * -this._anchor._x),
                      (this._bounds.minY = this._height * -this._anchor._y),
                      (this._bounds.maxX = this._width * (1 - this._anchor._x)),
                      (this._bounds.maxY =
                        this._height * (1 - this._anchor._x)),
                      t ||
                        (this._localBoundsRect ||
                          (this._localBoundsRect = new c.Rectangle()),
                        (t = this._localBoundsRect)),
                      this._bounds.getRectangle(t))
                    : e.prototype.getLocalBounds.call(this, t);
                }),
                (t.prototype.containsPoint = function (e) {
                  this.worldTransform.applyInverse(e, f);
                  var t = this._width,
                    n = this._height,
                    i = -t * this.anchor._x;
                  if (f.x >= i && f.x < i + t) {
                    var r = -n * this.anchor._y;
                    if (f.y >= r && f.y < r + n) return !0;
                  }
                  return !1;
                }),
                (t.prototype.destroy = function (t) {
                  e.prototype.destroy.call(this, t),
                    (this.tileTransform = null),
                    (this.uvTransform = null);
                }),
                (t.from = function (e, n, i) {
                  return new t(c.Texture.from(e), n, i);
                }),
                (t.fromFrame = function (e, n, i) {
                  var r = c.utils.TextureCache[e];
                  if (!r)
                    throw new Error(
                      'The frameId "' +
                        e +
                        '" does not exist in the texture cache ' +
                        this
                    );
                  return new t(r, n, i);
                }),
                (t.fromImage = function (e, n, i, r, s) {
                  return new t(c.Texture.fromImage(e, r, s), n, i);
                }),
                a(t, [
                  {
                    key: "clampMargin",
                    get: function () {
                      return this.uvTransform.clampMargin;
                    },
                    set: function (e) {
                      (this.uvTransform.clampMargin = e),
                        this.uvTransform.update(!0);
                    },
                  },
                  {
                    key: "tileScale",
                    get: function () {
                      return this.tileTransform.scale;
                    },
                    set: function (e) {
                      this.tileTransform.scale.copy(e);
                    },
                  },
                  {
                    key: "tilePosition",
                    get: function () {
                      return this.tileTransform.position;
                    },
                    set: function (e) {
                      this.tileTransform.position.copy(e);
                    },
                  },
                  {
                    key: "width",
                    get: function () {
                      return this._width;
                    },
                    set: function (e) {
                      this._width = e;
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this._height;
                    },
                    set: function (e) {
                      this._height = e;
                    },
                  },
                ]),
                t
              );
            })(c.Sprite);
          n["default"] = m;
        },
        {
          "../core": 65,
          "../core/sprites/canvas/CanvasTinter": 104,
          "./TextureTransform": 136,
        },
      ],
      138: [
        function (e) {
          "use strict";
          function t(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function n(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          var i = e("../core"),
            r = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(i),
            s = e("../core/textures/Texture"),
            o = t(s),
            a = e("../core/textures/BaseTexture"),
            l = t(a),
            c = e("../core/utils"),
            u = r.DisplayObject,
            h = new r.Matrix();
          (u.prototype._cacheAsBitmap = !1), (u.prototype._cacheData = !1);
          var d = function p() {
            n(this, p),
              (this.textureCacheId = null),
              (this.originalRenderWebGL = null),
              (this.originalRenderCanvas = null),
              (this.originalCalculateBounds = null),
              (this.originalGetLocalBounds = null),
              (this.originalUpdateTransform = null),
              (this.originalHitTest = null),
              (this.originalDestroy = null),
              (this.originalMask = null),
              (this.originalFilterArea = null),
              (this.sprite = null);
          };
          Object.defineProperties(u.prototype, {
            cacheAsBitmap: {
              get: function () {
                return this._cacheAsBitmap;
              },
              set: function (e) {
                if (this._cacheAsBitmap !== e) {
                  this._cacheAsBitmap = e;
                  var t = void 0;
                  e
                    ? (this._cacheData || (this._cacheData = new d()),
                      (t = this._cacheData),
                      (t.originalRenderWebGL = this.renderWebGL),
                      (t.originalRenderCanvas = this.renderCanvas),
                      (t.originalUpdateTransform = this.updateTransform),
                      (t.originalCalculateBounds = this._calculateBounds),
                      (t.originalGetLocalBounds = this.getLocalBounds),
                      (t.originalDestroy = this.destroy),
                      (t.originalContainsPoint = this.containsPoint),
                      (t.originalMask = this._mask),
                      (t.originalFilterArea = this.filterArea),
                      (this.renderWebGL = this._renderCachedWebGL),
                      (this.renderCanvas = this._renderCachedCanvas),
                      (this.destroy = this._cacheAsBitmapDestroy))
                    : ((t = this._cacheData),
                      t.sprite && this._destroyCachedDisplayObject(),
                      (this.renderWebGL = t.originalRenderWebGL),
                      (this.renderCanvas = t.originalRenderCanvas),
                      (this._calculateBounds = t.originalCalculateBounds),
                      (this.getLocalBounds = t.originalGetLocalBounds),
                      (this.destroy = t.originalDestroy),
                      (this.updateTransform = t.originalUpdateTransform),
                      (this.containsPoint = t.originalContainsPoint),
                      (this._mask = t.originalMask),
                      (this.filterArea = t.originalFilterArea));
                }
              },
            },
          }),
            (u.prototype._renderCachedWebGL = function (e) {
              !this.visible ||
                this.worldAlpha <= 0 ||
                !this.renderable ||
                (this._initCachedDisplayObject(e),
                (this._cacheData.sprite._transformID = -1),
                (this._cacheData.sprite.worldAlpha = this.worldAlpha),
                this._cacheData.sprite._renderWebGL(e));
            }),
            (u.prototype._initCachedDisplayObject = function (e) {
              if (!this._cacheData || !this._cacheData.sprite) {
                var t = this.alpha;
                (this.alpha = 1), e.currentRenderer.flush();
                var n = this.getLocalBounds().clone();
                if (this._filters) {
                  var i = this._filters[0].padding;
                  n.pad(i);
                }
                var s = e._activeRenderTarget,
                  a = e.filterManager.filterStack,
                  u = r.RenderTexture.create(0 | n.width, 0 | n.height),
                  d = "cacheAsBitmap_" + c.uid();
                (this._cacheData.textureCacheId = d),
                  l["default"].addToCache(u.baseTexture, d),
                  o["default"].addToCache(u, d);
                var p = h;
                (p.tx = -n.x),
                  (p.ty = -n.y),
                  this.transform.worldTransform.identity(),
                  (this.renderWebGL = this._cacheData.originalRenderWebGL),
                  e.render(this, u, !0, p, !0),
                  e.bindRenderTarget(s),
                  (e.filterManager.filterStack = a),
                  (this.renderWebGL = this._renderCachedWebGL),
                  (this.updateTransform = this.displayObjectUpdateTransform),
                  (this._mask = null),
                  (this.filterArea = null);
                var f = new r.Sprite(u);
                (f.transform.worldTransform = this.transform.worldTransform),
                  (f.anchor.x = -n.x / n.width),
                  (f.anchor.y = -n.y / n.height),
                  (f.alpha = t),
                  (f._bounds = this._bounds),
                  (this._calculateBounds = this._calculateCachedBounds),
                  (this.getLocalBounds = this._getCachedLocalBounds),
                  (this._cacheData.sprite = f),
                  (this.transform._parentID = -1),
                  this.parent
                    ? this.updateTransform()
                    : ((this.parent = e._tempDisplayObjectParent),
                      this.updateTransform(),
                      (this.parent = null)),
                  (this.containsPoint = f.containsPoint.bind(f));
              }
            }),
            (u.prototype._renderCachedCanvas = function (e) {
              !this.visible ||
                this.worldAlpha <= 0 ||
                !this.renderable ||
                (this._initCachedDisplayObjectCanvas(e),
                (this._cacheData.sprite.worldAlpha = this.worldAlpha),
                this._cacheData.sprite.renderCanvas(e));
            }),
            (u.prototype._initCachedDisplayObjectCanvas = function (e) {
              if (!this._cacheData || !this._cacheData.sprite) {
                var t = this.getLocalBounds(),
                  n = this.alpha;
                this.alpha = 1;
                var i = e.context,
                  s = r.RenderTexture.create(0 | t.width, 0 | t.height),
                  a = "cacheAsBitmap_" + c.uid();
                (this._cacheData.textureCacheId = a),
                  l["default"].addToCache(s.baseTexture, a),
                  o["default"].addToCache(s, a);
                var u = h;
                this.transform.localTransform.copy(u),
                  u.invert(),
                  (u.tx -= t.x),
                  (u.ty -= t.y),
                  (this.renderCanvas = this._cacheData.originalRenderCanvas),
                  e.render(this, s, !0, u, !1),
                  (e.context = i),
                  (this.renderCanvas = this._renderCachedCanvas),
                  (this._calculateBounds = this._calculateCachedBounds),
                  (this._mask = null),
                  (this.filterArea = null);
                var d = new r.Sprite(s);
                (d.transform.worldTransform = this.transform.worldTransform),
                  (d.anchor.x = -t.x / t.width),
                  (d.anchor.y = -t.y / t.height),
                  (d._bounds = this._bounds),
                  (d.alpha = n),
                  this.parent
                    ? this.updateTransform()
                    : ((this.parent = e._tempDisplayObjectParent),
                      this.updateTransform(),
                      (this.parent = null)),
                  (this.updateTransform = this.displayObjectUpdateTransform),
                  (this._cacheData.sprite = d),
                  (this.containsPoint = d.containsPoint.bind(d));
              }
            }),
            (u.prototype._calculateCachedBounds = function () {
              this._cacheData.sprite._calculateBounds();
            }),
            (u.prototype._getCachedLocalBounds = function () {
              return this._cacheData.sprite.getLocalBounds();
            }),
            (u.prototype._destroyCachedDisplayObject = function () {
              this._cacheData.sprite._texture.destroy(!0),
                (this._cacheData.sprite = null),
                l["default"].removeFromCache(this._cacheData.textureCacheId),
                o["default"].removeFromCache(this._cacheData.textureCacheId),
                (this._cacheData.textureCacheId = null);
            }),
            (u.prototype._cacheAsBitmapDestroy = function (e) {
              (this.cacheAsBitmap = !1), this.destroy(e);
            });
        },
        {
          "../core": 65,
          "../core/textures/BaseTexture": 112,
          "../core/textures/Texture": 115,
          "../core/utils": 124,
        },
      ],
      139: [
        function (e) {
          "use strict";
          var t = e("../core"),
            n = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(t);
          (n.DisplayObject.prototype.name = null),
            (n.Container.prototype.getChildByName = function (e) {
              for (var t = 0; t < this.children.length; t++)
                if (this.children[t].name === e) return this.children[t];
              return null;
            });
        },
        { "../core": 65 },
      ],
      140: [
        function (e) {
          "use strict";
          var t = e("../core"),
            n = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(t);
          n.DisplayObject.prototype.getGlobalPosition = function () {
            var e =
                arguments.length > 0 && void 0 !== arguments[0]
                  ? arguments[0]
                  : new n.Point(),
              t =
                arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
            return (
              this.parent
                ? this.parent.toGlobal(this.position, e, t)
                : ((e.x = this.position.x), (e.y = this.position.y)),
              e
            );
          };
        },
        { "../core": 65 },
      ],
      141: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          (n.__esModule = !0),
            (n.BitmapText =
              n.TilingSpriteRenderer =
              n.TilingSprite =
              n.TextureTransform =
              n.AnimatedSprite =
                void 0);
          var r = e("./AnimatedSprite");
          Object.defineProperty(n, "AnimatedSprite", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./TextureTransform");
          Object.defineProperty(n, "TextureTransform", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./TilingSprite");
          Object.defineProperty(n, "TilingSprite", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./webgl/TilingSpriteRenderer");
          Object.defineProperty(n, "TilingSpriteRenderer", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./BitmapText");
          Object.defineProperty(n, "BitmapText", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          }),
            e("./cacheAsBitmap"),
            e("./getChildByName"),
            e("./getGlobalPosition");
        },
        {
          "./AnimatedSprite": 134,
          "./BitmapText": 135,
          "./TextureTransform": 136,
          "./TilingSprite": 137,
          "./cacheAsBitmap": 138,
          "./getChildByName": 139,
          "./getGlobalPosition": 140,
          "./webgl/TilingSpriteRenderer": 142,
        },
      ],
      142: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../../core"),
            a = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(o),
            l = e("../../core/const"),
            c = (e("path"), new a.Matrix()),
            u = (function (e) {
              function t(n) {
                i(this, t);
                var s = r(this, e.call(this, n));
                return (
                  (s.shader = null), (s.simpleShader = null), (s.quad = null), s
                );
              }
              return (
                s(t, e),
                (t.prototype.onContextChange = function () {
                  var e = this.renderer.gl;
                  (this.shader = new a.Shader(
                    e,
                    "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                    "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"
                  )),
                    (this.simpleShader = new a.Shader(
                      e,
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                      "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"
                    )),
                    this.renderer.bindVao(null),
                    (this.quad = new a.Quad(
                      e,
                      this.renderer.state.attribState
                    )),
                    this.quad.initVao(this.shader);
                }),
                (t.prototype.render = function (e) {
                  var t = this.renderer,
                    n = this.quad;
                  t.bindVao(n.vao);
                  var i = n.vertices;
                  (i[0] = i[6] = e._width * -e.anchor.x),
                    (i[1] = i[3] = e._height * -e.anchor.y),
                    (i[2] = i[4] = e._width * (1 - e.anchor.x)),
                    (i[5] = i[7] = e._height * (1 - e.anchor.y)),
                    e.uvRespectAnchor &&
                      ((i = n.uvs),
                      (i[0] = i[6] = -e.anchor.x),
                      (i[1] = i[3] = -e.anchor.y),
                      (i[2] = i[4] = 1 - e.anchor.x),
                      (i[5] = i[7] = 1 - e.anchor.y)),
                    n.upload();
                  var r = e._texture,
                    s = r.baseTexture,
                    o = e.tileTransform.localTransform,
                    u = e.uvTransform,
                    h =
                      s.isPowerOfTwo &&
                      r.frame.width === s.width &&
                      r.frame.height === s.height;
                  h &&
                    (s._glTextures[t.CONTEXT_UID]
                      ? (h = s.wrapMode !== l.WRAP_MODES.CLAMP)
                      : s.wrapMode === l.WRAP_MODES.CLAMP &&
                        (s.wrapMode = l.WRAP_MODES.REPEAT));
                  var d = h ? this.simpleShader : this.shader;
                  t.bindShader(d);
                  var p = r.width,
                    f = r.height,
                    m = e._width,
                    g = e._height;
                  c.set(
                    (o.a * p) / m,
                    (o.b * p) / g,
                    (o.c * f) / m,
                    (o.d * f) / g,
                    o.tx / m,
                    o.ty / g
                  ),
                    c.invert(),
                    h
                      ? c.prepend(u.mapCoord)
                      : ((d.uniforms.uMapCoord = u.mapCoord.toArray(!0)),
                        (d.uniforms.uClampFrame = u.uClampFrame),
                        (d.uniforms.uClampOffset = u.uClampOffset)),
                    (d.uniforms.uTransform = c.toArray(!0)),
                    (d.uniforms.uColor = a.utils.premultiplyTintToRgba(
                      e.tint,
                      e.worldAlpha,
                      d.uniforms.uColor,
                      s.premultipliedAlpha
                    )),
                    (d.uniforms.translationMatrix =
                      e.transform.worldTransform.toArray(!0)),
                    (d.uniforms.uSampler = t.bindTexture(r)),
                    t.setBlendMode(
                      a.utils.correctBlendMode(
                        e.blendMode,
                        s.premultipliedAlpha
                      )
                    ),
                    n.vao.draw(this.renderer.gl.TRIANGLES, 6, 0);
                }),
                t
              );
            })(a.ObjectRenderer);
          (n["default"] = u), a.WebGLRenderer.registerPlugin("tilingSprite", u);
        },
        { "../../core": 65, "../../core/const": 46, path: 8 },
      ],
      143: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("./BlurXFilter"),
            h = i(u),
            d = e("./BlurYFilter"),
            p = i(d),
            f = (function (e) {
              function t(n, i, o, a) {
                r(this, t);
                var l = s(this, e.call(this));
                return (
                  (l.blurXFilter = new h["default"](n, i, o, a)),
                  (l.blurYFilter = new p["default"](n, i, o, a)),
                  (l.padding = 0),
                  (l.resolution = o || c.settings.RESOLUTION),
                  (l.quality = i || 4),
                  (l.blur = n || 8),
                  l
                );
              }
              return (
                o(t, e),
                (t.prototype.apply = function (e, t, n) {
                  var i = e.getRenderTarget(!0);
                  this.blurXFilter.apply(e, t, i, !0),
                    this.blurYFilter.apply(e, i, n, !1),
                    e.returnRenderTarget(i);
                }),
                a(t, [
                  {
                    key: "blur",
                    get: function () {
                      return this.blurXFilter.blur;
                    },
                    set: function (e) {
                      (this.blurXFilter.blur = this.blurYFilter.blur = e),
                        (this.padding =
                          2 *
                          Math.max(
                            Math.abs(this.blurXFilter.strength),
                            Math.abs(this.blurYFilter.strength)
                          ));
                    },
                  },
                  {
                    key: "quality",
                    get: function () {
                      return this.blurXFilter.quality;
                    },
                    set: function (e) {
                      this.blurXFilter.quality = this.blurYFilter.quality = e;
                    },
                  },
                  {
                    key: "blurX",
                    get: function () {
                      return this.blurXFilter.blur;
                    },
                    set: function (e) {
                      (this.blurXFilter.blur = e),
                        (this.padding =
                          2 *
                          Math.max(
                            Math.abs(this.blurXFilter.strength),
                            Math.abs(this.blurYFilter.strength)
                          ));
                    },
                  },
                  {
                    key: "blurY",
                    get: function () {
                      return this.blurYFilter.blur;
                    },
                    set: function (e) {
                      (this.blurYFilter.blur = e),
                        (this.padding =
                          2 *
                          Math.max(
                            Math.abs(this.blurXFilter.strength),
                            Math.abs(this.blurYFilter.strength)
                          ));
                    },
                  },
                  {
                    key: "blendMode",
                    get: function () {
                      return this.blurYFilter._blendMode;
                    },
                    set: function (e) {
                      this.blurYFilter._blendMode = e;
                    },
                  },
                ]),
                t
              );
            })(c.Filter);
          n["default"] = f;
        },
        { "../../core": 65, "./BlurXFilter": 144, "./BlurYFilter": 145 },
      ],
      144: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("./generateBlurVertSource"),
            h = i(u),
            d = e("./generateBlurFragSource"),
            p = i(d),
            f = e("./getMaxBlurKernelSize"),
            m = i(f),
            g = (function (e) {
              function t(n, i, o, a) {
                r(this, t), (a = a || 5);
                var l = h["default"](a, !0),
                  u = p["default"](a),
                  d = s(this, e.call(this, l, u));
                return (
                  (d.resolution = o || c.settings.RESOLUTION),
                  (d._quality = 0),
                  (d.quality = i || 4),
                  (d.strength = n || 8),
                  (d.firstRun = !0),
                  d
                );
              }
              return (
                o(t, e),
                (t.prototype.apply = function (e, t, n, i) {
                  if (this.firstRun) {
                    var r = e.renderer.gl,
                      s = m["default"](r);
                    (this.vertexSrc = h["default"](s, !0)),
                      (this.fragmentSrc = p["default"](s)),
                      (this.firstRun = !1);
                  }
                  if (
                    ((this.uniforms.strength =
                      (1 / n.size.width) * (n.size.width / t.size.width)),
                    (this.uniforms.strength *= this.strength),
                    (this.uniforms.strength /= this.passes),
                    1 === this.passes)
                  )
                    e.applyFilter(this, t, n, i);
                  else {
                    for (
                      var o = e.getRenderTarget(!0), a = t, l = o, c = 0;
                      c < this.passes - 1;
                      c++
                    ) {
                      e.applyFilter(this, a, l, !0);
                      var u = l;
                      (l = a), (a = u);
                    }
                    e.applyFilter(this, a, n, i), e.returnRenderTarget(o);
                  }
                }),
                a(t, [
                  {
                    key: "blur",
                    get: function () {
                      return this.strength;
                    },
                    set: function (e) {
                      (this.padding = 2 * Math.abs(e)), (this.strength = e);
                    },
                  },
                  {
                    key: "quality",
                    get: function () {
                      return this._quality;
                    },
                    set: function (e) {
                      (this._quality = e), (this.passes = e);
                    },
                  },
                ]),
                t
              );
            })(c.Filter);
          n["default"] = g;
        },
        {
          "../../core": 65,
          "./generateBlurFragSource": 146,
          "./generateBlurVertSource": 147,
          "./getMaxBlurKernelSize": 148,
        },
      ],
      145: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            l = e("../../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("./generateBlurVertSource"),
            h = i(u),
            d = e("./generateBlurFragSource"),
            p = i(d),
            f = e("./getMaxBlurKernelSize"),
            m = i(f),
            g = (function (e) {
              function t(n, i, o, a) {
                r(this, t), (a = a || 5);
                var l = h["default"](a, !1),
                  u = p["default"](a),
                  d = s(this, e.call(this, l, u));
                return (
                  (d.resolution = o || c.settings.RESOLUTION),
                  (d._quality = 0),
                  (d.quality = i || 4),
                  (d.strength = n || 8),
                  (d.firstRun = !0),
                  d
                );
              }
              return (
                o(t, e),
                (t.prototype.apply = function (e, t, n, i) {
                  if (this.firstRun) {
                    var r = e.renderer.gl,
                      s = m["default"](r);
                    (this.vertexSrc = h["default"](s, !1)),
                      (this.fragmentSrc = p["default"](s)),
                      (this.firstRun = !1);
                  }
                  if (
                    ((this.uniforms.strength =
                      (1 / n.size.height) * (n.size.height / t.size.height)),
                    (this.uniforms.strength *= this.strength),
                    (this.uniforms.strength /= this.passes),
                    1 === this.passes)
                  )
                    e.applyFilter(this, t, n, i);
                  else {
                    for (
                      var o = e.getRenderTarget(!0), a = t, l = o, c = 0;
                      c < this.passes - 1;
                      c++
                    ) {
                      e.applyFilter(this, a, l, !0);
                      var u = l;
                      (l = a), (a = u);
                    }
                    e.applyFilter(this, a, n, i), e.returnRenderTarget(o);
                  }
                }),
                a(t, [
                  {
                    key: "blur",
                    get: function () {
                      return this.strength;
                    },
                    set: function (e) {
                      (this.padding = 2 * Math.abs(e)), (this.strength = e);
                    },
                  },
                  {
                    key: "quality",
                    get: function () {
                      return this._quality;
                    },
                    set: function (e) {
                      (this._quality = e), (this.passes = e);
                    },
                  },
                ]),
                t
              );
            })(c.Filter);
          n["default"] = g;
        },
        {
          "../../core": 65,
          "./generateBlurFragSource": 146,
          "./generateBlurVertSource": 147,
          "./getMaxBlurKernelSize": 148,
        },
      ],
      146: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            for (
              var t = r[e],
                n = t.length,
                i = s,
                o = "",
                a =
                  "gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",
                l = void 0,
                c = 0;
              e > c;
              c++
            ) {
              var u = a.replace("%index%", c);
              (l = c),
                c >= n && (l = e - c - 1),
                (u = u.replace("%value%", t[l])),
                (o += u),
                (o += "\n");
            }
            return (i = i.replace("%blur%", o)), (i = i.replace("%size%", e));
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = {
              5: [0.153388, 0.221461, 0.250301],
              7: [0.071303, 0.131514, 0.189879, 0.214607],
              9: [0.028532, 0.067234, 0.124009, 0.179044, 0.20236],
              11: [0.0093, 0.028002, 0.065984, 0.121703, 0.175713, 0.198596],
              13: [
                0.002406, 0.009255, 0.027867, 0.065666, 0.121117, 0.174868,
                0.197641,
              ],
              15: [
                489e-6, 0.002403, 0.009246, 0.02784, 0.065602, 0.120999,
                0.174697, 0.197448,
              ],
            },
            s = [
              "varying vec2 vBlurTexCoords[%size%];",
              "uniform sampler2D uSampler;",
              "void main(void)",
              "{",
              "    gl_FragColor = vec4(0.0);",
              "    %blur%",
              "}",
            ].join("\n");
        },
        {},
      ],
      147: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            var n = Math.ceil(e / 2),
              i = r,
              s = "",
              o = void 0;
            o = t
              ? "vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);"
              : "vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";
            for (var a = 0; e > a; a++) {
              var l = o.replace("%index%", a);
              (l = l.replace("%sampleIndex%", a - (n - 1) + ".0")),
                (s += l),
                (s += "\n");
            }
            return (i = i.replace("%blur%", s)), (i = i.replace("%size%", e));
          }
          (n.__esModule = !0), (n["default"] = i);
          var r = [
            "attribute vec2 aVertexPosition;",
            "attribute vec2 aTextureCoord;",
            "uniform float strength;",
            "uniform mat3 projectionMatrix;",
            "varying vec2 vBlurTexCoords[%size%];",
            "void main(void)",
            "{",
            "gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);",
            "%blur%",
            "}",
          ].join("\n");
        },
        {},
      ],
      148: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            for (var t = e.getParameter(e.MAX_VARYING_VECTORS), n = 15; n > t; )
              n -= 2;
            return n;
          }
          (n.__esModule = !0), (n["default"] = i);
        },
        {},
      ],
      149: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c =
              (e("path"),
              (function (e) {
                function t() {
                  i(this, t);
                  var n = r(
                    this,
                    e.call(
                      this,
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
                      "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"
                    )
                  );
                  return (
                    (n.uniforms.m = [
                      1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1,
                      0,
                    ]),
                    (n.alpha = 1),
                    n
                  );
                }
                return (
                  s(t, e),
                  (t.prototype._loadMatrix = function (e) {
                    var t =
                        arguments.length > 1 &&
                        void 0 !== arguments[1] &&
                        arguments[1],
                      n = e;
                    t &&
                      (this._multiply(n, this.uniforms.m, e),
                      (n = this._colorMatrix(n))),
                      (this.uniforms.m = n);
                  }),
                  (t.prototype._multiply = function (e, t, n) {
                    return (
                      (e[0] =
                        t[0] * n[0] +
                        t[1] * n[5] +
                        t[2] * n[10] +
                        t[3] * n[15]),
                      (e[1] =
                        t[0] * n[1] +
                        t[1] * n[6] +
                        t[2] * n[11] +
                        t[3] * n[16]),
                      (e[2] =
                        t[0] * n[2] +
                        t[1] * n[7] +
                        t[2] * n[12] +
                        t[3] * n[17]),
                      (e[3] =
                        t[0] * n[3] +
                        t[1] * n[8] +
                        t[2] * n[13] +
                        t[3] * n[18]),
                      (e[4] =
                        t[0] * n[4] +
                        t[1] * n[9] +
                        t[2] * n[14] +
                        t[3] * n[19] +
                        t[4]),
                      (e[5] =
                        t[5] * n[0] +
                        t[6] * n[5] +
                        t[7] * n[10] +
                        t[8] * n[15]),
                      (e[6] =
                        t[5] * n[1] +
                        t[6] * n[6] +
                        t[7] * n[11] +
                        t[8] * n[16]),
                      (e[7] =
                        t[5] * n[2] +
                        t[6] * n[7] +
                        t[7] * n[12] +
                        t[8] * n[17]),
                      (e[8] =
                        t[5] * n[3] +
                        t[6] * n[8] +
                        t[7] * n[13] +
                        t[8] * n[18]),
                      (e[9] =
                        t[5] * n[4] +
                        t[6] * n[9] +
                        t[7] * n[14] +
                        t[8] * n[19] +
                        t[9]),
                      (e[10] =
                        t[10] * n[0] +
                        t[11] * n[5] +
                        t[12] * n[10] +
                        t[13] * n[15]),
                      (e[11] =
                        t[10] * n[1] +
                        t[11] * n[6] +
                        t[12] * n[11] +
                        t[13] * n[16]),
                      (e[12] =
                        t[10] * n[2] +
                        t[11] * n[7] +
                        t[12] * n[12] +
                        t[13] * n[17]),
                      (e[13] =
                        t[10] * n[3] +
                        t[11] * n[8] +
                        t[12] * n[13] +
                        t[13] * n[18]),
                      (e[14] =
                        t[10] * n[4] +
                        t[11] * n[9] +
                        t[12] * n[14] +
                        t[13] * n[19] +
                        t[14]),
                      (e[15] =
                        t[15] * n[0] +
                        t[16] * n[5] +
                        t[17] * n[10] +
                        t[18] * n[15]),
                      (e[16] =
                        t[15] * n[1] +
                        t[16] * n[6] +
                        t[17] * n[11] +
                        t[18] * n[16]),
                      (e[17] =
                        t[15] * n[2] +
                        t[16] * n[7] +
                        t[17] * n[12] +
                        t[18] * n[17]),
                      (e[18] =
                        t[15] * n[3] +
                        t[16] * n[8] +
                        t[17] * n[13] +
                        t[18] * n[18]),
                      (e[19] =
                        t[15] * n[4] +
                        t[16] * n[9] +
                        t[17] * n[14] +
                        t[18] * n[19] +
                        t[19]),
                      e
                    );
                  }),
                  (t.prototype._colorMatrix = function (e) {
                    var t = new Float32Array(e);
                    return (
                      (t[4] /= 255),
                      (t[9] /= 255),
                      (t[14] /= 255),
                      (t[19] /= 255),
                      t
                    );
                  }),
                  (t.prototype.brightness = function (e, t) {
                    var n = [
                      e,
                      0,
                      0,
                      0,
                      0,
                      0,
                      e,
                      0,
                      0,
                      0,
                      0,
                      0,
                      e,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                    ];
                    this._loadMatrix(n, t);
                  }),
                  (t.prototype.greyscale = function (e, t) {
                    var n = [
                      e,
                      e,
                      e,
                      0,
                      0,
                      e,
                      e,
                      e,
                      0,
                      0,
                      e,
                      e,
                      e,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                    ];
                    this._loadMatrix(n, t);
                  }),
                  (t.prototype.blackAndWhite = function (e) {
                    var t = [
                      0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1, 0, 0, 0.3, 0.6, 0.1,
                      0, 0, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.hue = function (e, t) {
                    e = ((e || 0) / 180) * Math.PI;
                    var n = Math.cos(e),
                      i = Math.sin(e),
                      r = Math.sqrt,
                      s = 1 / 3,
                      o = r(s),
                      a = n + (1 - n) * s,
                      l = s * (1 - n) - o * i,
                      c = s * (1 - n) + o * i,
                      u = s * (1 - n) + o * i,
                      h = n + s * (1 - n),
                      d = s * (1 - n) - o * i,
                      p = s * (1 - n) - o * i,
                      f = s * (1 - n) + o * i,
                      m = n + s * (1 - n),
                      g = [
                        a,
                        l,
                        c,
                        0,
                        0,
                        u,
                        h,
                        d,
                        0,
                        0,
                        p,
                        f,
                        m,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                        0,
                      ];
                    this._loadMatrix(g, t);
                  }),
                  (t.prototype.contrast = function (e, t) {
                    var n = (e || 0) + 1,
                      i = -0.5 * (n - 1),
                      r = [
                        n,
                        0,
                        0,
                        0,
                        i,
                        0,
                        n,
                        0,
                        0,
                        i,
                        0,
                        0,
                        n,
                        0,
                        i,
                        0,
                        0,
                        0,
                        1,
                        0,
                      ];
                    this._loadMatrix(r, t);
                  }),
                  (t.prototype.saturate = function () {
                    var e =
                        arguments.length > 0 && void 0 !== arguments[0]
                          ? arguments[0]
                          : 0,
                      t = arguments[1],
                      n = (2 * e) / 3 + 1,
                      i = -0.5 * (n - 1),
                      r = [
                        n,
                        i,
                        i,
                        0,
                        0,
                        i,
                        n,
                        i,
                        0,
                        0,
                        i,
                        i,
                        n,
                        0,
                        0,
                        0,
                        0,
                        0,
                        1,
                        0,
                      ];
                    this._loadMatrix(r, t);
                  }),
                  (t.prototype.desaturate = function () {
                    this.saturate(-1);
                  }),
                  (t.prototype.negative = function (e) {
                    var t = [
                      0, 1, 1, 0, 0, 1, 0, 1, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 1,
                      0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.sepia = function (e) {
                    var t = [
                      0.393, 0.7689999, 0.18899999, 0, 0, 0.349, 0.6859999,
                      0.16799999, 0, 0, 0.272, 0.5339999, 0.13099999, 0, 0, 0,
                      0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.technicolor = function (e) {
                    var t = [
                      1.9125277891456083, -0.8545344976951645,
                      -0.09155508482755585, 0, 11.793603434377337,
                      -0.3087833385928097, 1.7658908555458428,
                      -0.10601743074722245, 0, -70.35205161461398,
                      -0.231103377548616, -0.7501899197440212,
                      1.847597816108189, 0, 30.950940869491138, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.polaroid = function (e) {
                    var t = [
                      1.438, -0.062, -0.062, 0, 0, -0.122, 1.378, -0.122, 0, 0,
                      -0.016, -0.016, 1.483, 0, 0, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.toBGR = function (e) {
                    var t = [
                      0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1,
                      0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.kodachrome = function (e) {
                    var t = [
                      1.1285582396593525, -0.3967382283601348,
                      -0.03992559172921793, 0, 63.72958762196502,
                      -0.16404339962244616, 1.0835251566291304,
                      -0.05498805115633132, 0, 24.732407896706203,
                      -0.16786010706155763, -0.5603416277695248,
                      1.6014850761964943, 0, 35.62982807460946, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.browni = function (e) {
                    var t = [
                      0.5997023498159715, 0.34553243048391263,
                      -0.2708298674538042, 0, 47.43192855600873,
                      -0.037703249837783157, 0.8609577587992641,
                      0.15059552388459913, 0, -36.96841498319127,
                      0.24113635128153335, -0.07441037908422492,
                      0.44972182064877153, 0, -7.562075277591283, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.vintage = function (e) {
                    var t = [
                      0.6279345635605994, 0.3202183420819367,
                      -0.03965408211312453, 0, 9.651285835294123,
                      0.02578397704808868, 0.6441188644374771,
                      0.03259127616149294, 0, 7.462829176470591,
                      0.0466055556782719, -0.0851232987247891,
                      0.5241648018700465, 0, 5.159190588235296, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.colorTone = function (e, t, n, i, r) {
                    (e = e || 0.2),
                      (t = t || 0.15),
                      (n = n || 16770432),
                      (i = i || 3375104);
                    var s = ((n >> 16) & 255) / 255,
                      o = ((n >> 8) & 255) / 255,
                      a = (255 & n) / 255,
                      l = ((i >> 16) & 255) / 255,
                      c = ((i >> 8) & 255) / 255,
                      u = (255 & i) / 255,
                      h = [
                        0.3,
                        0.59,
                        0.11,
                        0,
                        0,
                        s,
                        o,
                        a,
                        e,
                        0,
                        l,
                        c,
                        u,
                        t,
                        0,
                        s - l,
                        o - c,
                        a - u,
                        0,
                        0,
                      ];
                    this._loadMatrix(h, r);
                  }),
                  (t.prototype.night = function (e, t) {
                    e = e || 0.1;
                    var n = [
                      -2 * e,
                      -e,
                      0,
                      0,
                      0,
                      -e,
                      0,
                      e,
                      0,
                      0,
                      0,
                      e,
                      2 * e,
                      0,
                      0,
                      0,
                      0,
                      0,
                      1,
                      0,
                    ];
                    this._loadMatrix(n, t);
                  }),
                  (t.prototype.predator = function (e, t) {
                    var n = [
                      11.224130630493164 * e,
                      -4.794486999511719 * e,
                      -2.8746118545532227 * e,
                      0 * e,
                      0.40342438220977783 * e,
                      -3.6330697536468506 * e,
                      9.193157196044922 * e,
                      -2.951810836791992 * e,
                      0 * e,
                      -1.316135048866272 * e,
                      -3.2184197902679443 * e,
                      -4.2375030517578125 * e,
                      7.476448059082031 * e,
                      0 * e,
                      0.8044459223747253 * e,
                      0,
                      0,
                      0,
                      1,
                      0,
                    ];
                    this._loadMatrix(n, t);
                  }),
                  (t.prototype.lsd = function (e) {
                    var t = [
                      2, -0.4, 0.5, 0, 0, -0.5, 2, -0.4, 0, 0, -0.4, -0.5, 3, 0,
                      0, 0, 0, 0, 1, 0,
                    ];
                    this._loadMatrix(t, e);
                  }),
                  (t.prototype.reset = function () {
                    var e = [
                      1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1,
                      0,
                    ];
                    this._loadMatrix(e, !1);
                  }),
                  o(t, [
                    {
                      key: "matrix",
                      get: function () {
                        return this.uniforms.m;
                      },
                      set: function (e) {
                        this.uniforms.m = e;
                      },
                    },
                    {
                      key: "alpha",
                      get: function () {
                        return this.uniforms.uAlpha;
                      },
                      set: function (e) {
                        this.uniforms.uAlpha = e;
                      },
                    },
                  ]),
                  t
                );
              })(l.Filter));
          (n["default"] = c), (c.prototype.grayscale = c.prototype.greyscale);
        },
        { "../../core": 65, path: 8 },
      ],
      150: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c =
              (e("path"),
              (function (e) {
                function t(n, s) {
                  i(this, t);
                  var o = new l.Matrix();
                  n.renderable = !1;
                  var a = r(
                    this,
                    e.call(
                      this,
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}",
                      "varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"
                    )
                  );
                  return (
                    (a.maskSprite = n),
                    (a.maskMatrix = o),
                    (a.uniforms.mapSampler = n._texture),
                    (a.uniforms.filterMatrix = o),
                    (a.uniforms.scale = { x: 1, y: 1 }),
                    (null !== s && void 0 !== s) || (s = 20),
                    (a.scale = new l.Point(s, s)),
                    a
                  );
                }
                return (
                  s(t, e),
                  (t.prototype.apply = function (e, t, n) {
                    var i =
                      (1 / n.destinationFrame.width) *
                      (n.size.width / t.size.width);
                    (this.uniforms.filterMatrix = e.calculateSpriteMatrix(
                      this.maskMatrix,
                      this.maskSprite
                    )),
                      (this.uniforms.scale.x = this.scale.x * i),
                      (this.uniforms.scale.y = this.scale.y * i),
                      e.applyFilter(this, t, n);
                  }),
                  o(t, [
                    {
                      key: "map",
                      get: function () {
                        return this.uniforms.mapSampler;
                      },
                      set: function (e) {
                        this.uniforms.mapSampler = e;
                      },
                    },
                  ]),
                  t
                );
              })(l.Filter));
          n["default"] = c;
        },
        { "../../core": 65, path: 8 },
      ],
      151: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../../core"),
            a = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(o),
            l =
              (e("path"),
              (function (e) {
                function t() {
                  return (
                    i(this, t),
                    r(
                      this,
                      e.call(
                        this,
                        "\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",
                        'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'
                      )
                    )
                  );
                }
                return s(t, e), t;
              })(a.Filter));
          n["default"] = l;
        },
        { "../../core": 65, path: 8 },
      ],
      152: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./fxaa/FXAAFilter");
          Object.defineProperty(n, "FXAAFilter", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./noise/NoiseFilter");
          Object.defineProperty(n, "NoiseFilter", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./displacement/DisplacementFilter");
          Object.defineProperty(n, "DisplacementFilter", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./blur/BlurFilter");
          Object.defineProperty(n, "BlurFilter", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./blur/BlurXFilter");
          Object.defineProperty(n, "BlurXFilter", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          });
          var c = e("./blur/BlurYFilter");
          Object.defineProperty(n, "BlurYFilter", {
            enumerable: !0,
            get: function () {
              return i(c)["default"];
            },
          });
          var u = e("./colormatrix/ColorMatrixFilter");
          Object.defineProperty(n, "ColorMatrixFilter", {
            enumerable: !0,
            get: function () {
              return i(u)["default"];
            },
          });
          var h = e("./void/VoidFilter");
          Object.defineProperty(n, "VoidFilter", {
            enumerable: !0,
            get: function () {
              return i(h)["default"];
            },
          });
        },
        {
          "./blur/BlurFilter": 143,
          "./blur/BlurXFilter": 144,
          "./blur/BlurYFilter": 145,
          "./colormatrix/ColorMatrixFilter": 149,
          "./displacement/DisplacementFilter": 150,
          "./fxaa/FXAAFilter": 151,
          "./noise/NoiseFilter": 153,
          "./void/VoidFilter": 154,
        },
      ],
      153: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c =
              (e("path"),
              (function (e) {
                function t() {
                  var n =
                      arguments.length > 0 && void 0 !== arguments[0]
                        ? arguments[0]
                        : 0.5,
                    s =
                      arguments.length > 1 && void 0 !== arguments[1]
                        ? arguments[1]
                        : Math.random();
                  i(this, t);
                  var o = r(
                    this,
                    e.call(
                      this,
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
                      "precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"
                    )
                  );
                  return (o.noise = n), (o.seed = s), o;
                }
                return (
                  s(t, e),
                  o(t, [
                    {
                      key: "noise",
                      get: function () {
                        return this.uniforms.uNoise;
                      },
                      set: function (e) {
                        this.uniforms.uNoise = e;
                      },
                    },
                    {
                      key: "seed",
                      get: function () {
                        return this.uniforms.uSeed;
                      },
                      set: function (e) {
                        this.uniforms.uSeed = e;
                      },
                    },
                  ]),
                  t
                );
              })(l.Filter));
          n["default"] = c;
        },
        { "../../core": 65, path: 8 },
      ],
      154: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../../core"),
            a = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(o),
            l =
              (e("path"),
              (function (e) {
                function t() {
                  i(this, t);
                  var n = r(
                    this,
                    e.call(
                      this,
                      "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
                      "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"
                    )
                  );
                  return (n.glShaderKey = "void"), n;
                }
                return s(t, e), t;
              })(a.Filter));
          n["default"] = l;
        },
        { "../../core": 65, path: 8 },
      ],
      155: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = e("../core"),
            o = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(s),
            a = (function () {
              function e() {
                i(this, e),
                  (this.global = new o.Point()),
                  (this.target = null),
                  (this.originalEvent = null),
                  (this.identifier = null),
                  (this.isPrimary = !1),
                  (this.button = 0),
                  (this.buttons = 0),
                  (this.width = 0),
                  (this.height = 0),
                  (this.tiltX = 0),
                  (this.tiltY = 0),
                  (this.pointerType = null),
                  (this.pressure = 0),
                  (this.rotationAngle = 0),
                  (this.twist = 0),
                  (this.tangentialPressure = 0);
              }
              return (
                (e.prototype.getLocalPosition = function (e, t, n) {
                  return e.worldTransform.applyInverse(n || this.global, t);
                }),
                (e.prototype._copyEvent = function (e) {
                  e.isPrimary && (this.isPrimary = !0),
                    (this.button = e.button),
                    (this.buttons = e.buttons),
                    (this.width = e.width),
                    (this.height = e.height),
                    (this.tiltX = e.tiltX),
                    (this.tiltY = e.tiltY),
                    (this.pointerType = e.pointerType),
                    (this.pressure = e.pressure),
                    (this.rotationAngle = e.rotationAngle),
                    (this.twist = e.twist || 0),
                    (this.tangentialPressure = e.tangentialPressure || 0);
                }),
                (e.prototype._reset = function () {
                  this.isPrimary = !1;
                }),
                r(e, [
                  {
                    key: "pointerId",
                    get: function () {
                      return this.identifier;
                    },
                  },
                ]),
                e
              );
            })();
          n["default"] = a;
        },
        { "../core": 65 },
      ],
      156: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e() {
              i(this, e),
                (this.stopped = !1),
                (this.target = null),
                (this.currentTarget = null),
                (this.type = null),
                (this.data = null);
            }
            return (
              (e.prototype.stopPropagation = function () {
                this.stopped = !0;
              }),
              (e.prototype._reset = function () {
                (this.stopped = !1),
                  (this.currentTarget = null),
                  (this.target = null);
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      157: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a =
              "function" == typeof Symbol && "symbol" == typeof Symbol.iterator
                ? function (e) {
                    return typeof e;
                  }
                : function (e) {
                    return e &&
                      "function" == typeof Symbol &&
                      e.constructor === Symbol &&
                      e !== Symbol.prototype
                      ? "symbol"
                      : typeof e;
                  },
            l = e("../core"),
            c = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(l),
            u = e("./InteractionData"),
            h = i(u),
            d = e("./InteractionEvent"),
            p = i(d),
            f = e("./InteractionTrackingData"),
            m = i(f),
            g = e("eventemitter3"),
            v = i(g),
            _ = e("./interactiveTarget"),
            y = i(_);
          c.utils.mixins.delayMixin(c.DisplayObject.prototype, y["default"]);
          var b = "MOUSE",
            w = { target: null, data: { global: null } },
            x = (function (e) {
              function t(n, i) {
                r(this, t);
                var o = s(this, e.call(this));
                return (
                  (i = i || {}),
                  (o.renderer = n),
                  (o.autoPreventDefault =
                    void 0 === i.autoPreventDefault || i.autoPreventDefault),
                  (o.interactionFrequency = i.interactionFrequency || 10),
                  (o.mouse = new h["default"]()),
                  (o.mouse.identifier = b),
                  o.mouse.global.set(-999999),
                  (o.activeInteractionData = {}),
                  (o.activeInteractionData[b] = o.mouse),
                  (o.interactionDataPool = []),
                  (o.eventData = new p["default"]()),
                  (o.interactionDOMElement = null),
                  (o.moveWhenInside = !1),
                  (o.eventsAdded = !1),
                  (o.mouseOverRenderer = !1),
                  (o.supportsTouchEvents = "ontouchstart" in window),
                  (o.supportsPointerEvents = !!window.PointerEvent),
                  (o.onPointerUp = o.onPointerUp.bind(o)),
                  (o.processPointerUp = o.processPointerUp.bind(o)),
                  (o.onPointerCancel = o.onPointerCancel.bind(o)),
                  (o.processPointerCancel = o.processPointerCancel.bind(o)),
                  (o.onPointerDown = o.onPointerDown.bind(o)),
                  (o.processPointerDown = o.processPointerDown.bind(o)),
                  (o.onPointerMove = o.onPointerMove.bind(o)),
                  (o.processPointerMove = o.processPointerMove.bind(o)),
                  (o.onPointerOut = o.onPointerOut.bind(o)),
                  (o.processPointerOverOut = o.processPointerOverOut.bind(o)),
                  (o.onPointerOver = o.onPointerOver.bind(o)),
                  (o.cursorStyles = { default: "inherit", pointer: "pointer" }),
                  (o.currentCursorMode = null),
                  (o.cursor = null),
                  (o._tempPoint = new c.Point()),
                  (o.resolution = 1),
                  o.setTargetElement(o.renderer.view, o.renderer.resolution),
                  o
                );
              }
              return (
                o(t, e),
                (t.prototype.hitTest = function (e, t) {
                  return (
                    (w.target = null),
                    (w.data.global = e),
                    t || (t = this.renderer._lastObjectRendered),
                    this.processInteractive(w, t, null, !0),
                    w.target
                  );
                }),
                (t.prototype.setTargetElement = function (e) {
                  var t =
                    arguments.length > 1 && void 0 !== arguments[1]
                      ? arguments[1]
                      : 1;
                  this.removeEvents(),
                    (this.interactionDOMElement = e),
                    (this.resolution = t),
                    this.addEvents();
                }),
                (t.prototype.addEvents = function () {
                  this.interactionDOMElement &&
                    (c.ticker.shared.add(
                      this.update,
                      this,
                      c.UPDATE_PRIORITY.INTERACTION
                    ),
                    window.navigator.msPointerEnabled
                      ? ((this.interactionDOMElement.style[
                          "-ms-content-zooming"
                        ] = "none"),
                        (this.interactionDOMElement.style["-ms-touch-action"] =
                          "none"))
                      : this.supportsPointerEvents &&
                        (this.interactionDOMElement.style["touch-action"] =
                          "none"),
                    this.supportsPointerEvents
                      ? (window.document.addEventListener(
                          "pointermove",
                          this.onPointerMove,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "pointerdown",
                          this.onPointerDown,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "pointerleave",
                          this.onPointerOut,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "pointerover",
                          this.onPointerOver,
                          !0
                        ),
                        window.addEventListener(
                          "pointercancel",
                          this.onPointerCancel,
                          !0
                        ),
                        window.addEventListener(
                          "pointerup",
                          this.onPointerUp,
                          !0
                        ))
                      : (window.document.addEventListener(
                          "mousemove",
                          this.onPointerMove,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "mousedown",
                          this.onPointerDown,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "mouseout",
                          this.onPointerOut,
                          !0
                        ),
                        this.interactionDOMElement.addEventListener(
                          "mouseover",
                          this.onPointerOver,
                          !0
                        ),
                        window.addEventListener(
                          "mouseup",
                          this.onPointerUp,
                          !0
                        )),
                    this.supportsTouchEvents &&
                      (this.interactionDOMElement.addEventListener(
                        "touchstart",
                        this.onPointerDown,
                        !0
                      ),
                      this.interactionDOMElement.addEventListener(
                        "touchcancel",
                        this.onPointerCancel,
                        !0
                      ),
                      this.interactionDOMElement.addEventListener(
                        "touchend",
                        this.onPointerUp,
                        !0
                      ),
                      this.interactionDOMElement.addEventListener(
                        "touchmove",
                        this.onPointerMove,
                        !0
                      )),
                    (this.eventsAdded = !0));
                }),
                (t.prototype.removeEvents = function () {
                  this.interactionDOMElement &&
                    (c.ticker.shared.remove(this.update, this),
                    window.navigator.msPointerEnabled
                      ? ((this.interactionDOMElement.style[
                          "-ms-content-zooming"
                        ] = ""),
                        (this.interactionDOMElement.style["-ms-touch-action"] =
                          ""))
                      : this.supportsPointerEvents &&
                        (this.interactionDOMElement.style["touch-action"] = ""),
                    this.supportsPointerEvents
                      ? (window.document.removeEventListener(
                          "pointermove",
                          this.onPointerMove,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "pointerdown",
                          this.onPointerDown,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "pointerleave",
                          this.onPointerOut,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "pointerover",
                          this.onPointerOver,
                          !0
                        ),
                        window.removeEventListener(
                          "pointercancel",
                          this.onPointerCancel,
                          !0
                        ),
                        window.removeEventListener(
                          "pointerup",
                          this.onPointerUp,
                          !0
                        ))
                      : (window.document.removeEventListener(
                          "mousemove",
                          this.onPointerMove,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "mousedown",
                          this.onPointerDown,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "mouseout",
                          this.onPointerOut,
                          !0
                        ),
                        this.interactionDOMElement.removeEventListener(
                          "mouseover",
                          this.onPointerOver,
                          !0
                        ),
                        window.removeEventListener(
                          "mouseup",
                          this.onPointerUp,
                          !0
                        )),
                    this.supportsTouchEvents &&
                      (this.interactionDOMElement.removeEventListener(
                        "touchstart",
                        this.onPointerDown,
                        !0
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "touchcancel",
                        this.onPointerCancel,
                        !0
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "touchend",
                        this.onPointerUp,
                        !0
                      ),
                      this.interactionDOMElement.removeEventListener(
                        "touchmove",
                        this.onPointerMove,
                        !0
                      )),
                    (this.interactionDOMElement = null),
                    (this.eventsAdded = !1));
                }),
                (t.prototype.update = function (e) {
                  if (
                    ((this._deltaTime += e),
                    !(this._deltaTime < this.interactionFrequency) &&
                      ((this._deltaTime = 0), this.interactionDOMElement))
                  ) {
                    if (this.didMove) return void (this.didMove = !1);
                    this.cursor = null;
                    for (var t in this.activeInteractionData)
                      if (this.activeInteractionData.hasOwnProperty(t)) {
                        var n = this.activeInteractionData[t];
                        if (n.originalEvent && "touch" !== n.pointerType) {
                          var i = this.configureInteractionEventForDOMEvent(
                            this.eventData,
                            n.originalEvent,
                            n
                          );
                          this.processInteractive(
                            i,
                            this.renderer._lastObjectRendered,
                            this.processPointerOverOut,
                            !0
                          );
                        }
                      }
                    this.setCursorMode(this.cursor);
                  }
                }),
                (t.prototype.setCursorMode = function (e) {
                  if (((e = e || "default"), this.currentCursorMode !== e)) {
                    this.currentCursorMode = e;
                    var t = this.cursorStyles[e];
                    if (t)
                      switch (void 0 === t ? "undefined" : a(t)) {
                        case "string":
                          this.interactionDOMElement.style.cursor = t;
                          break;
                        case "function":
                          t(e);
                          break;
                        case "object":
                          Object.assign(this.interactionDOMElement.style, t);
                      }
                    else
                      "string" != typeof e ||
                        Object.prototype.hasOwnProperty.call(
                          this.cursorStyles,
                          e
                        ) ||
                        (this.interactionDOMElement.style.cursor = e);
                  }
                }),
                (t.prototype.dispatchEvent = function (e, t, n) {
                  n.stopped ||
                    ((n.currentTarget = e),
                    (n.type = t),
                    e.emit(t, n),
                    e[t] && e[t](n));
                }),
                (t.prototype.mapPositionToPoint = function (e, t, n) {
                  var i = void 0;
                  i = this.interactionDOMElement.parentElement
                    ? this.interactionDOMElement.getBoundingClientRect()
                    : { x: 0, y: 0, width: 0, height: 0 };
                  var r = navigator.isCocoonJS
                    ? this.resolution
                    : 1 / this.resolution;
                  (e.x =
                    (t - i.left) *
                    (this.interactionDOMElement.width / i.width) *
                    r),
                    (e.y =
                      (n - i.top) *
                      (this.interactionDOMElement.height / i.height) *
                      r);
                }),
                (t.prototype.processInteractive = function (e, t, n, i, r) {
                  if (!t || !t.visible) return !1;
                  var s = e.data.global;
                  r = t.interactive || r;
                  var o = !1,
                    a = r;
                  if (
                    (t.hitArea
                      ? (a = !1)
                      : i && t._mask && (t._mask.containsPoint(s) || (i = !1)),
                    t.interactiveChildren && t.children)
                  )
                    for (var l = t.children, c = l.length - 1; c >= 0; c--) {
                      var u = l[c],
                        h = this.processInteractive(e, u, n, i, a);
                      if (h) {
                        if (!u.parent) continue;
                        (a = !1), h && (e.target && (i = !1), (o = !0));
                      }
                    }
                  return (
                    r &&
                      (i &&
                        !e.target &&
                        (t.hitArea
                          ? (t.worldTransform.applyInverse(s, this._tempPoint),
                            t.hitArea.contains(
                              this._tempPoint.x,
                              this._tempPoint.y
                            ) && (o = !0))
                          : t.containsPoint && t.containsPoint(s) && (o = !0)),
                      t.interactive &&
                        (o && !e.target && (e.target = t), n && n(e, t, !!o))),
                    o
                  );
                }),
                (t.prototype.onPointerDown = function (e) {
                  if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
                    var t = this.normalizeToPointerData(e);
                    this.autoPreventDefault &&
                      t[0].isNormalized &&
                      e.preventDefault();
                    for (var n = t.length, i = 0; n > i; i++) {
                      var r = t[i],
                        s = this.getInteractionDataForPointerId(r),
                        o = this.configureInteractionEventForDOMEvent(
                          this.eventData,
                          r,
                          s
                        );
                      if (
                        ((o.data.originalEvent = e),
                        this.processInteractive(
                          o,
                          this.renderer._lastObjectRendered,
                          this.processPointerDown,
                          !0
                        ),
                        this.emit("pointerdown", o),
                        "touch" === r.pointerType)
                      )
                        this.emit("touchstart", o);
                      else if (
                        "mouse" === r.pointerType ||
                        "pen" === r.pointerType
                      ) {
                        var a = 2 === r.button;
                        this.emit(
                          a ? "rightdown" : "mousedown",
                          this.eventData
                        );
                      }
                    }
                  }
                }),
                (t.prototype.processPointerDown = function (e, t, n) {
                  var i = e.data,
                    r = e.data.identifier;
                  if (n)
                    if (
                      (t.trackedPointers[r] ||
                        (t.trackedPointers[r] = new m["default"](r)),
                      this.dispatchEvent(t, "pointerdown", e),
                      "touch" === i.pointerType)
                    )
                      this.dispatchEvent(t, "touchstart", e);
                    else if (
                      "mouse" === i.pointerType ||
                      "pen" === i.pointerType
                    ) {
                      var s = 2 === i.button;
                      s
                        ? (t.trackedPointers[r].rightDown = !0)
                        : (t.trackedPointers[r].leftDown = !0),
                        this.dispatchEvent(t, s ? "rightdown" : "mousedown", e);
                    }
                }),
                (t.prototype.onPointerComplete = function (e, t, n) {
                  for (
                    var i = this.normalizeToPointerData(e),
                      r = i.length,
                      s =
                        e.target !== this.interactionDOMElement
                          ? "outside"
                          : "",
                      o = 0;
                    r > o;
                    o++
                  ) {
                    var a = i[o],
                      l = this.getInteractionDataForPointerId(a),
                      c = this.configureInteractionEventForDOMEvent(
                        this.eventData,
                        a,
                        l
                      );
                    if (
                      ((c.data.originalEvent = e),
                      this.processInteractive(
                        c,
                        this.renderer._lastObjectRendered,
                        n,
                        t || !s
                      ),
                      this.emit(t ? "pointercancel" : "pointerup" + s, c),
                      "mouse" === a.pointerType || "pen" === a.pointerType)
                    ) {
                      var u = 2 === a.button;
                      this.emit(u ? "rightup" + s : "mouseup" + s, c);
                    } else
                      "touch" === a.pointerType &&
                        (this.emit(t ? "touchcancel" : "touchend" + s, c),
                        this.releaseInteractionDataForPointerId(
                          a.pointerId,
                          l
                        ));
                  }
                }),
                (t.prototype.onPointerCancel = function (e) {
                  (this.supportsTouchEvents && "touch" === e.pointerType) ||
                    this.onPointerComplete(e, !0, this.processPointerCancel);
                }),
                (t.prototype.processPointerCancel = function (e, t) {
                  var n = e.data,
                    i = e.data.identifier;
                  void 0 !== t.trackedPointers[i] &&
                    (delete t.trackedPointers[i],
                    this.dispatchEvent(t, "pointercancel", e),
                    "touch" === n.pointerType &&
                      this.dispatchEvent(t, "touchcancel", e));
                }),
                (t.prototype.onPointerUp = function (e) {
                  (this.supportsTouchEvents && "touch" === e.pointerType) ||
                    this.onPointerComplete(e, !1, this.processPointerUp);
                }),
                (t.prototype.processPointerUp = function (e, t, n) {
                  var i = e.data,
                    r = e.data.identifier,
                    s = t.trackedPointers[r],
                    o = "touch" === i.pointerType;
                  if ("mouse" === i.pointerType || "pen" === i.pointerType) {
                    var a = 2 === i.button,
                      l = m["default"].FLAGS,
                      c = a ? l.RIGHT_DOWN : l.LEFT_DOWN,
                      u = void 0 !== s && s.flags & c;
                    n
                      ? (this.dispatchEvent(t, a ? "rightup" : "mouseup", e),
                        u &&
                          this.dispatchEvent(t, a ? "rightclick" : "click", e))
                      : u &&
                        this.dispatchEvent(
                          t,
                          a ? "rightupoutside" : "mouseupoutside",
                          e
                        ),
                      s && (a ? (s.rightDown = !1) : (s.leftDown = !1));
                  }
                  n
                    ? (this.dispatchEvent(t, "pointerup", e),
                      o && this.dispatchEvent(t, "touchend", e),
                      s &&
                        (this.dispatchEvent(t, "pointertap", e),
                        o && (this.dispatchEvent(t, "tap", e), (s.over = !1))))
                    : s &&
                      (this.dispatchEvent(t, "pointerupoutside", e),
                      o && this.dispatchEvent(t, "touchendoutside", e)),
                    s && s.none && delete t.trackedPointers[r];
                }),
                (t.prototype.onPointerMove = function (e) {
                  if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
                    var t = this.normalizeToPointerData(e);
                    "mouse" === t[0].pointerType &&
                      ((this.didMove = !0), (this.cursor = null));
                    for (var n = t.length, i = 0; n > i; i++) {
                      var r = t[i],
                        s = this.getInteractionDataForPointerId(r),
                        o = this.configureInteractionEventForDOMEvent(
                          this.eventData,
                          r,
                          s
                        );
                      o.data.originalEvent = e;
                      var a = "touch" !== r.pointerType || this.moveWhenInside;
                      this.processInteractive(
                        o,
                        this.renderer._lastObjectRendered,
                        this.processPointerMove,
                        a
                      ),
                        this.emit("pointermove", o),
                        "touch" === r.pointerType && this.emit("touchmove", o),
                        ("mouse" !== r.pointerType &&
                          "pen" !== r.pointerType) ||
                          this.emit("mousemove", o);
                    }
                    "mouse" === t[0].pointerType &&
                      this.setCursorMode(this.cursor);
                  }
                }),
                (t.prototype.processPointerMove = function (e, t, n) {
                  var i = e.data,
                    r = "touch" === i.pointerType,
                    s = "mouse" === i.pointerType || "pen" === i.pointerType;
                  s && this.processPointerOverOut(e, t, n),
                    (this.moveWhenInside && !n) ||
                      (this.dispatchEvent(t, "pointermove", e),
                      r && this.dispatchEvent(t, "touchmove", e),
                      s && this.dispatchEvent(t, "mousemove", e));
                }),
                (t.prototype.onPointerOut = function (e) {
                  if (!this.supportsTouchEvents || "touch" !== e.pointerType) {
                    var t = this.normalizeToPointerData(e),
                      n = t[0];
                    "mouse" === n.pointerType &&
                      ((this.mouseOverRenderer = !1), this.setCursorMode(null));
                    var i = this.getInteractionDataForPointerId(n),
                      r = this.configureInteractionEventForDOMEvent(
                        this.eventData,
                        n,
                        i
                      );
                    (r.data.originalEvent = n),
                      this.processInteractive(
                        r,
                        this.renderer._lastObjectRendered,
                        this.processPointerOverOut,
                        !1
                      ),
                      this.emit("pointerout", r),
                      "mouse" === n.pointerType || "pen" === n.pointerType
                        ? this.emit("mouseout", r)
                        : this.releaseInteractionDataForPointerId(i.identifier);
                  }
                }),
                (t.prototype.processPointerOverOut = function (e, t, n) {
                  var i = e.data,
                    r = e.data.identifier,
                    s = "mouse" === i.pointerType || "pen" === i.pointerType,
                    o = t.trackedPointers[r];
                  n && !o && (o = t.trackedPointers[r] = new m["default"](r)),
                    void 0 !== o &&
                      (n && this.mouseOverRenderer
                        ? (o.over ||
                            ((o.over = !0),
                            this.dispatchEvent(t, "pointerover", e),
                            s && this.dispatchEvent(t, "mouseover", e)),
                          s && null === this.cursor && (this.cursor = t.cursor))
                        : o.over &&
                          ((o.over = !1),
                          this.dispatchEvent(t, "pointerout", this.eventData),
                          s && this.dispatchEvent(t, "mouseout", e),
                          o.none && delete t.trackedPointers[r]));
                }),
                (t.prototype.onPointerOver = function (e) {
                  var t = this.normalizeToPointerData(e),
                    n = t[0],
                    i = this.getInteractionDataForPointerId(n),
                    r = this.configureInteractionEventForDOMEvent(
                      this.eventData,
                      n,
                      i
                    );
                  (r.data.originalEvent = n),
                    "mouse" === n.pointerType && (this.mouseOverRenderer = !0),
                    this.emit("pointerover", r),
                    ("mouse" !== n.pointerType && "pen" !== n.pointerType) ||
                      this.emit("mouseover", r);
                }),
                (t.prototype.getInteractionDataForPointerId = function (e) {
                  var t = e.pointerId,
                    n = void 0;
                  return (
                    t === b || "mouse" === e.pointerType
                      ? (n = this.mouse)
                      : this.activeInteractionData[t]
                      ? (n = this.activeInteractionData[t])
                      : ((n =
                          this.interactionDataPool.pop() || new h["default"]()),
                        (n.identifier = t),
                        (this.activeInteractionData[t] = n)),
                    n._copyEvent(e),
                    n
                  );
                }),
                (t.prototype.releaseInteractionDataForPointerId = function (e) {
                  var t = this.activeInteractionData[e];
                  t &&
                    (delete this.activeInteractionData[e],
                    t._reset(),
                    this.interactionDataPool.push(t));
                }),
                (t.prototype.configureInteractionEventForDOMEvent = function (
                  e,
                  t,
                  n
                ) {
                  return (
                    (e.data = n),
                    this.mapPositionToPoint(n.global, t.clientX, t.clientY),
                    navigator.isCocoonJS &&
                      "touch" === t.pointerType &&
                      ((n.global.x = n.global.x / this.resolution),
                      (n.global.y = n.global.y / this.resolution)),
                    "touch" === t.pointerType &&
                      ((t.globalX = n.global.x), (t.globalY = n.global.y)),
                    (n.originalEvent = t),
                    e._reset(),
                    e
                  );
                }),
                (t.prototype.normalizeToPointerData = function (e) {
                  var t = [];
                  if (this.supportsTouchEvents && e instanceof TouchEvent)
                    for (var n = 0, i = e.changedTouches.length; i > n; n++) {
                      var r = e.changedTouches[n];
                      void 0 === r.button &&
                        (r.button = e.touches.length ? 1 : 0),
                        void 0 === r.buttons &&
                          (r.buttons = e.touches.length ? 1 : 0),
                        void 0 === r.isPrimary &&
                          (r.isPrimary =
                            1 === e.touches.length && "touchstart" === e.type),
                        void 0 === r.width && (r.width = r.radiusX || 1),
                        void 0 === r.height && (r.height = r.radiusY || 1),
                        void 0 === r.tiltX && (r.tiltX = 0),
                        void 0 === r.tiltY && (r.tiltY = 0),
                        void 0 === r.pointerType && (r.pointerType = "touch"),
                        void 0 === r.pointerId &&
                          (r.pointerId = r.identifier || 0),
                        void 0 === r.pressure && (r.pressure = r.force || 0.5),
                        (r.twist = 0),
                        (r.tangentialPressure = 0),
                        void 0 === r.layerX &&
                          (r.layerX = r.offsetX = r.clientX),
                        void 0 === r.layerY &&
                          (r.layerY = r.offsetY = r.clientY),
                        (r.isNormalized = !0),
                        t.push(r);
                    }
                  else
                    !(e instanceof MouseEvent) ||
                    (this.supportsPointerEvents &&
                      e instanceof window.PointerEvent)
                      ? t.push(e)
                      : (void 0 === e.isPrimary && (e.isPrimary = !0),
                        void 0 === e.width && (e.width = 1),
                        void 0 === e.height && (e.height = 1),
                        void 0 === e.tiltX && (e.tiltX = 0),
                        void 0 === e.tiltY && (e.tiltY = 0),
                        void 0 === e.pointerType && (e.pointerType = "mouse"),
                        void 0 === e.pointerId && (e.pointerId = b),
                        void 0 === e.pressure && (e.pressure = 0.5),
                        (e.twist = 0),
                        (e.tangentialPressure = 0),
                        (e.isNormalized = !0),
                        t.push(e));
                  return t;
                }),
                (t.prototype.destroy = function () {
                  this.removeEvents(),
                    this.removeAllListeners(),
                    (this.renderer = null),
                    (this.mouse = null),
                    (this.eventData = null),
                    (this.interactionDOMElement = null),
                    (this.onPointerDown = null),
                    (this.processPointerDown = null),
                    (this.onPointerUp = null),
                    (this.processPointerUp = null),
                    (this.onPointerCancel = null),
                    (this.processPointerCancel = null),
                    (this.onPointerMove = null),
                    (this.processPointerMove = null),
                    (this.onPointerOut = null),
                    (this.processPointerOverOut = null),
                    (this.onPointerOver = null),
                    (this._tempPoint = null);
                }),
                t
              );
            })(v["default"]);
          (n["default"] = x),
            c.WebGLRenderer.registerPlugin("interaction", x),
            c.CanvasRenderer.registerPlugin("interaction", x);
        },
        {
          "../core": 65,
          "./InteractionData": 155,
          "./InteractionEvent": 156,
          "./InteractionTrackingData": 158,
          "./interactiveTarget": 160,
          eventemitter3: 3,
        },
      ],
      158: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            s = (function () {
              function e(t) {
                i(this, e), (this._pointerId = t), (this._flags = e.FLAGS.NONE);
              }
              return (
                (e.prototype._doSet = function (e, t) {
                  this._flags = t ? this._flags | e : this._flags & ~e;
                }),
                r(e, [
                  {
                    key: "pointerId",
                    get: function () {
                      return this._pointerId;
                    },
                  },
                  {
                    key: "flags",
                    get: function () {
                      return this._flags;
                    },
                    set: function (e) {
                      this._flags = e;
                    },
                  },
                  {
                    key: "none",
                    get: function () {
                      return this._flags === this.constructor.FLAGS.NONE;
                    },
                  },
                  {
                    key: "over",
                    get: function () {
                      return 0 != (this._flags & this.constructor.FLAGS.OVER);
                    },
                    set: function (e) {
                      this._doSet(this.constructor.FLAGS.OVER, e);
                    },
                  },
                  {
                    key: "rightDown",
                    get: function () {
                      return (
                        0 != (this._flags & this.constructor.FLAGS.RIGHT_DOWN)
                      );
                    },
                    set: function (e) {
                      this._doSet(this.constructor.FLAGS.RIGHT_DOWN, e);
                    },
                  },
                  {
                    key: "leftDown",
                    get: function () {
                      return (
                        0 != (this._flags & this.constructor.FLAGS.LEFT_DOWN)
                      );
                    },
                    set: function (e) {
                      this._doSet(this.constructor.FLAGS.LEFT_DOWN, e);
                    },
                  },
                ]),
                e
              );
            })();
          (n["default"] = s),
            (s.FLAGS = Object.freeze({
              NONE: 0,
              OVER: 1,
              LEFT_DOWN: 2,
              RIGHT_DOWN: 4,
            }));
        },
        {},
      ],
      159: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./InteractionData");
          Object.defineProperty(n, "InteractionData", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./InteractionManager");
          Object.defineProperty(n, "InteractionManager", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./interactiveTarget");
          Object.defineProperty(n, "interactiveTarget", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./InteractionTrackingData");
          Object.defineProperty(n, "InteractionTrackingData", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./InteractionEvent");
          Object.defineProperty(n, "InteractionEvent", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          });
        },
        {
          "./InteractionData": 155,
          "./InteractionEvent": 156,
          "./InteractionManager": 157,
          "./InteractionTrackingData": 158,
          "./interactiveTarget": 160,
        },
      ],
      160: [
        function (e, t, n) {
          "use strict";
          (n.__esModule = !0),
            (n["default"] = {
              interactive: !1,
              interactiveChildren: !0,
              hitArea: null,
              get buttonMode() {
                return "pointer" === this.cursor;
              },
              set buttonMode(e) {
                e
                  ? (this.cursor = "pointer")
                  : "pointer" === this.cursor && (this.cursor = null);
              },
              cursor: null,
              get trackedPointers() {
                return (
                  void 0 === this._trackedPointers &&
                    (this._trackedPointers = {}),
                  this._trackedPointers
                );
              },
              _trackedPointers: void 0,
            });
        },
        {},
      ],
      161: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            e.bitmapFont = l.BitmapText.registerFont(e.data, t);
          }
          (n.__esModule = !0),
            (n.parse = i),
            (n["default"] = function () {
              return function (e, t) {
                if (!e.data || e.type !== a.Resource.TYPE.XML) return void t();
                if (
                  0 === e.data.getElementsByTagName("page").length ||
                  0 === e.data.getElementsByTagName("info").length ||
                  null ===
                    e.data.getElementsByTagName("info")[0].getAttribute("face")
                )
                  return void t();
                var n = e.isDataUrl ? "" : s.dirname(e.url);
                e.isDataUrl &&
                  ("." === n && (n = ""),
                  this.baseUrl &&
                    n &&
                    "/" === this.baseUrl.charAt(this.baseUrl.length - 1) &&
                    (n += "/")),
                  (n = n.replace(this.baseUrl, "")) &&
                    "/" !== n.charAt(n.length - 1) &&
                    (n += "/");
                var r =
                  n +
                  e.data.getElementsByTagName("page")[0].getAttribute("file");
                if (o.utils.TextureCache[r]) i(e, o.utils.TextureCache[r]), t();
                else {
                  var l = {
                    crossOrigin: e.crossOrigin,
                    loadType: a.Resource.LOAD_TYPE.IMAGE,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  };
                  this.add(e.name + "_image", r, l, function (n) {
                    i(e, n.texture), t();
                  });
                }
              };
            });
          var r = e("path"),
            s = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(r),
            o = e("../core"),
            a = e("resource-loader"),
            l = e("../extras");
        },
        { "../core": 65, "../extras": 141, path: 8, "resource-loader": 36 },
      ],
      162: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          (n.__esModule = !0),
            (n.shared =
              n.Resource =
              n.textureParser =
              n.getResourcePath =
              n.spritesheetParser =
              n.parseBitmapFontData =
              n.bitmapFontParser =
              n.Loader =
                void 0);
          var r = e("./bitmapFontParser");
          Object.defineProperty(n, "bitmapFontParser", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          }),
            Object.defineProperty(n, "parseBitmapFontData", {
              enumerable: !0,
              get: function () {
                return r.parse;
              },
            });
          var s = e("./spritesheetParser");
          Object.defineProperty(n, "spritesheetParser", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          }),
            Object.defineProperty(n, "getResourcePath", {
              enumerable: !0,
              get: function () {
                return s.getResourcePath;
              },
            });
          var o = e("./textureParser");
          Object.defineProperty(n, "textureParser", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("resource-loader");
          Object.defineProperty(n, "Resource", {
            enumerable: !0,
            get: function () {
              return a.Resource;
            },
          });
          var l = e("../core/Application"),
            c = i(l),
            u = e("./loader"),
            h = i(u);
          n.Loader = h["default"];
          var d = new h["default"]();
          (d.destroy = function () {}), (n.shared = d);
          var p = c["default"].prototype;
          (p._loader = null),
            Object.defineProperty(p, "loader", {
              get: function () {
                if (!this._loader) {
                  var e = this._options.sharedLoader;
                  this._loader = e ? d : new h["default"]();
                }
                return this._loader;
              },
            }),
            (p._parentDestroy = p.destroy),
            (p.destroy = function (e) {
              this._loader && (this._loader.destroy(), (this._loader = null)),
                this._parentDestroy(e);
            });
        },
        {
          "../core/Application": 43,
          "./bitmapFontParser": 161,
          "./loader": 163,
          "./spritesheetParser": 164,
          "./textureParser": 165,
          "resource-loader": 36,
        },
      ],
      163: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("resource-loader"),
            l = i(a),
            c = e("resource-loader/lib/middlewares/parsing/blob"),
            u = e("eventemitter3"),
            h = i(u),
            d = e("./textureParser"),
            p = i(d),
            f = e("./spritesheetParser"),
            m = i(f),
            g = e("./bitmapFontParser"),
            v = i(g),
            _ = (function (e) {
              function t(n, i) {
                r(this, t);
                var o = s(this, e.call(this, n, i));
                h["default"].call(o);
                for (var a = 0; a < t._pixiMiddleware.length; ++a)
                  o.use(t._pixiMiddleware[a]());
                return (
                  o.onStart.add(function (e) {
                    return o.emit("start", e);
                  }),
                  o.onProgress.add(function (e, t) {
                    return o.emit("progress", e, t);
                  }),
                  o.onError.add(function (e, t, n) {
                    return o.emit("error", e, t, n);
                  }),
                  o.onLoad.add(function (e, t) {
                    return o.emit("load", e, t);
                  }),
                  o.onComplete.add(function (e, t) {
                    return o.emit("complete", e, t);
                  }),
                  o
                );
              }
              return (
                o(t, e),
                (t.addPixiMiddleware = function (e) {
                  t._pixiMiddleware.push(e);
                }),
                (t.prototype.destroy = function () {
                  this.removeAllListeners(), this.reset();
                }),
                t
              );
            })(l["default"]);
          n["default"] = _;
          for (var y in h["default"].prototype)
            _.prototype[y] = h["default"].prototype[y];
          _._pixiMiddleware = [
            c.blobMiddlewareFactory,
            p["default"],
            m["default"],
            v["default"],
          ];
          var b = l["default"].Resource;
          b.setExtensionXhrType("fnt", b.XHR_RESPONSE_TYPE.DOCUMENT);
        },
        {
          "./bitmapFontParser": 161,
          "./spritesheetParser": 164,
          "./textureParser": 165,
          eventemitter3: 3,
          "resource-loader": 36,
          "resource-loader/lib/middlewares/parsing/blob": 37,
        },
      ],
      164: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            return e.isDataUrl
              ? e.data.meta.image
              : o["default"].resolve(e.url.replace(t, ""), e.data.meta.image);
          }
          (n.__esModule = !0),
            (n["default"] = function () {
              return function (e, t) {
                var n = e.name + "_image";
                if (
                  !e.data ||
                  e.type !== r.Resource.TYPE.JSON ||
                  !e.data.frames ||
                  this.resources[n]
                )
                  return void t();
                var s = {
                    crossOrigin: e.crossOrigin,
                    loadType: r.Resource.LOAD_TYPE.IMAGE,
                    metadata: e.metadata.imageMetadata,
                    parentResource: e,
                  },
                  o = i(e, this.baseUrl);
                this.add(n, o, s, function (n) {
                  var i = new a.Spritesheet(
                    n.texture.baseTexture,
                    e.data,
                    e.url
                  );
                  i.parse(function () {
                    (e.spritesheet = i), (e.textures = i.textures), t();
                  });
                });
              };
            }),
            (n.getResourcePath = i);
          var r = e("resource-loader"),
            s = e("url"),
            o = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(s),
            a = e("../core");
        },
        { "../core": 65, "resource-loader": 36, url: 38 },
      ],
      165: [
        function (e, t, n) {
          "use strict";
          (n.__esModule = !0),
            (n["default"] = function () {
              return function (e, t) {
                e.data &&
                  e.type === i.Resource.TYPE.IMAGE &&
                  (e.texture = s["default"].fromLoader(e.data, e.url, e.name)),
                  t();
              };
            });
          var i = e("resource-loader"),
            r = e("../core/textures/Texture"),
            s = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(r);
        },
        { "../core/textures/Texture": 115, "resource-loader": 36 },
      ],
      166: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = e("../extras/TextureTransform"),
            u = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(c),
            h = new l.Point(),
            d = new l.Polygon(),
            p = (function (e) {
              function t(n, s, o, a, c) {
                i(this, t);
                var h = r(this, e.call(this));
                return (
                  (h._texture = n),
                  (h.uvs = o || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1])),
                  (h.vertices =
                    s || new Float32Array([0, 0, 100, 0, 100, 100, 0, 100])),
                  (h.indices = a || new Uint16Array([0, 1, 3, 2])),
                  (h.dirty = 0),
                  (h.indexDirty = 0),
                  (h.blendMode = l.BLEND_MODES.NORMAL),
                  (h.canvasPadding = 0),
                  (h.drawMode = c || t.DRAW_MODES.TRIANGLE_MESH),
                  (h.shader = null),
                  (h.tintRgb = new Float32Array([1, 1, 1])),
                  (h._glDatas = {}),
                  (h._uvTransform = new u["default"](n)),
                  (h.uploadUvTransform = !1),
                  (h.pluginName = "mesh"),
                  h
                );
              }
              return (
                s(t, e),
                (t.prototype._renderWebGL = function (e) {
                  this.refresh(),
                    e.setObjectRenderer(e.plugins[this.pluginName]),
                    e.plugins[this.pluginName].render(this);
                }),
                (t.prototype._renderCanvas = function (e) {
                  this.refresh(), e.plugins[this.pluginName].render(this);
                }),
                (t.prototype._onTextureUpdate = function () {
                  (this._uvTransform.texture = this._texture), this.refresh();
                }),
                (t.prototype.multiplyUvs = function () {
                  this.uploadUvTransform ||
                    this._uvTransform.multiplyUvs(this.uvs);
                }),
                (t.prototype.refresh = function (e) {
                  this._uvTransform.update(e) && this._refresh();
                }),
                (t.prototype._refresh = function () {}),
                (t.prototype._calculateBounds = function () {
                  this._bounds.addVertices(
                    this.transform,
                    this.vertices,
                    0,
                    this.vertices.length
                  );
                }),
                (t.prototype.containsPoint = function (e) {
                  if (!this.getBounds().contains(e.x, e.y)) return !1;
                  this.worldTransform.applyInverse(e, h);
                  for (
                    var n = this.vertices,
                      i = d.points,
                      r = this.indices,
                      s = this.indices.length,
                      o = this.drawMode === t.DRAW_MODES.TRIANGLES ? 3 : 1,
                      a = 0;
                    s > a + 2;
                    a += o
                  ) {
                    var l = 2 * r[a],
                      c = 2 * r[a + 1],
                      u = 2 * r[a + 2];
                    if (
                      ((i[0] = n[l]),
                      (i[1] = n[l + 1]),
                      (i[2] = n[c]),
                      (i[3] = n[c + 1]),
                      (i[4] = n[u]),
                      (i[5] = n[u + 1]),
                      d.contains(h.x, h.y))
                    )
                      return !0;
                  }
                  return !1;
                }),
                o(t, [
                  {
                    key: "texture",
                    get: function () {
                      return this._texture;
                    },
                    set: function (e) {
                      this._texture !== e &&
                        ((this._texture = e),
                        e &&
                          (e.baseTexture.hasLoaded
                            ? this._onTextureUpdate()
                            : e.once("update", this._onTextureUpdate, this)));
                    },
                  },
                  {
                    key: "tint",
                    get: function () {
                      return l.utils.rgb2hex(this.tintRgb);
                    },
                    set: function (e) {
                      this.tintRgb = l.utils.hex2rgb(e, this.tintRgb);
                    },
                  },
                ]),
                t
              );
            })(l.Container);
          (n["default"] = p),
            (p.DRAW_MODES = { TRIANGLE_MESH: 0, TRIANGLES: 1 });
        },
        { "../core": 65, "../extras/TextureTransform": 136 },
      ],
      167: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("./Plane"),
            l = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(a),
            c = 10,
            u = (function (e) {
              function t(n, s, o, a, l) {
                i(this, t);
                var u = r(this, e.call(this, n, 4, 4));
                return (
                  (u._origWidth = n.orig.width),
                  (u._origHeight = n.orig.height),
                  (u._width = u._origWidth),
                  (u._height = u._origHeight),
                  (u.leftWidth = void 0 !== s ? s : c),
                  (u.rightWidth = void 0 !== a ? a : c),
                  (u.topHeight = void 0 !== o ? o : c),
                  (u.bottomHeight = void 0 !== l ? l : c),
                  u.refresh(!0),
                  u
                );
              }
              return (
                s(t, e),
                (t.prototype.updateHorizontalVertices = function () {
                  var e = this.vertices;
                  (e[9] = e[11] = e[13] = e[15] = this._topHeight),
                    (e[17] =
                      e[19] =
                      e[21] =
                      e[23] =
                        this._height - this._bottomHeight),
                    (e[25] = e[27] = e[29] = e[31] = this._height);
                }),
                (t.prototype.updateVerticalVertices = function () {
                  var e = this.vertices;
                  (e[2] = e[10] = e[18] = e[26] = this._leftWidth),
                    (e[4] =
                      e[12] =
                      e[20] =
                      e[28] =
                        this._width - this._rightWidth),
                    (e[6] = e[14] = e[22] = e[30] = this._width);
                }),
                (t.prototype._renderCanvas = function (e) {
                  var t = e.context;
                  t.globalAlpha = this.worldAlpha;
                  var n = this.worldTransform,
                    i = e.resolution;
                  e.roundPixels
                    ? t.setTransform(
                        n.a * i,
                        n.b * i,
                        n.c * i,
                        n.d * i,
                        (n.tx * i) | 0,
                        (n.ty * i) | 0
                      )
                    : t.setTransform(
                        n.a * i,
                        n.b * i,
                        n.c * i,
                        n.d * i,
                        n.tx * i,
                        n.ty * i
                      );
                  var r = this._texture.baseTexture,
                    s = r.source,
                    o = r.width,
                    a = r.height;
                  this.drawSegment(t, s, o, a, 0, 1, 10, 11),
                    this.drawSegment(t, s, o, a, 2, 3, 12, 13),
                    this.drawSegment(t, s, o, a, 4, 5, 14, 15),
                    this.drawSegment(t, s, o, a, 8, 9, 18, 19),
                    this.drawSegment(t, s, o, a, 10, 11, 20, 21),
                    this.drawSegment(t, s, o, a, 12, 13, 22, 23),
                    this.drawSegment(t, s, o, a, 16, 17, 26, 27),
                    this.drawSegment(t, s, o, a, 18, 19, 28, 29),
                    this.drawSegment(t, s, o, a, 20, 21, 30, 31);
                }),
                (t.prototype.drawSegment = function (e, t, n, i, r, s, o, a) {
                  var l = this.uvs,
                    c = this.vertices,
                    u = (l[o] - l[r]) * n,
                    h = (l[a] - l[s]) * i,
                    d = c[o] - c[r],
                    p = c[a] - c[s];
                  1 > u && (u = 1),
                    1 > h && (h = 1),
                    1 > d && (d = 1),
                    1 > p && (p = 1),
                    e.drawImage(t, l[r] * n, l[s] * i, u, h, c[r], c[s], d, p);
                }),
                (t.prototype._refresh = function () {
                  e.prototype._refresh.call(this);
                  var t = this.uvs,
                    n = this._texture;
                  (this._origWidth = n.orig.width),
                    (this._origHeight = n.orig.height);
                  var i = 1 / this._origWidth,
                    r = 1 / this._origHeight;
                  (t[0] = t[8] = t[16] = t[24] = 0),
                    (t[1] = t[3] = t[5] = t[7] = 0),
                    (t[6] = t[14] = t[22] = t[30] = 1),
                    (t[25] = t[27] = t[29] = t[31] = 1),
                    (t[2] = t[10] = t[18] = t[26] = i * this._leftWidth),
                    (t[4] = t[12] = t[20] = t[28] = 1 - i * this._rightWidth),
                    (t[9] = t[11] = t[13] = t[15] = r * this._topHeight),
                    (t[17] =
                      t[19] =
                      t[21] =
                      t[23] =
                        1 - r * this._bottomHeight),
                    this.updateHorizontalVertices(),
                    this.updateVerticalVertices(),
                    this.dirty++,
                    this.multiplyUvs();
                }),
                o(t, [
                  {
                    key: "width",
                    get: function () {
                      return this._width;
                    },
                    set: function (e) {
                      (this._width = e), this._refresh();
                    },
                  },
                  {
                    key: "height",
                    get: function () {
                      return this._height;
                    },
                    set: function (e) {
                      (this._height = e), this._refresh();
                    },
                  },
                  {
                    key: "leftWidth",
                    get: function () {
                      return this._leftWidth;
                    },
                    set: function (e) {
                      (this._leftWidth = e), this._refresh();
                    },
                  },
                  {
                    key: "rightWidth",
                    get: function () {
                      return this._rightWidth;
                    },
                    set: function (e) {
                      (this._rightWidth = e), this._refresh();
                    },
                  },
                  {
                    key: "topHeight",
                    get: function () {
                      return this._topHeight;
                    },
                    set: function (e) {
                      (this._topHeight = e), this._refresh();
                    },
                  },
                  {
                    key: "bottomHeight",
                    get: function () {
                      return this._bottomHeight;
                    },
                    set: function (e) {
                      (this._bottomHeight = e), this._refresh();
                    },
                  },
                ]),
                t
              );
            })(l["default"]);
          n["default"] = u;
        },
        { "./Plane": 168 },
      ],
      168: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("./Mesh"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t(n, s, o) {
                i(this, t);
                var l = r(this, e.call(this, n));
                return (
                  (l._ready = !0),
                  (l.verticesX = s || 10),
                  (l.verticesY = o || 10),
                  (l.drawMode = a["default"].DRAW_MODES.TRIANGLES),
                  l.refresh(),
                  l
                );
              }
              return (
                s(t, e),
                (t.prototype._refresh = function () {
                  for (
                    var e = this._texture,
                      t = this.verticesX * this.verticesY,
                      n = [],
                      i = [],
                      r = [],
                      s = [],
                      o = this.verticesX - 1,
                      a = this.verticesY - 1,
                      l = e.width / o,
                      c = e.height / a,
                      u = 0;
                    t > u;
                    u++
                  ) {
                    var h = u % this.verticesX,
                      d = (u / this.verticesX) | 0;
                    n.push(h * l, d * c), r.push(h / o, d / a);
                  }
                  for (var p = o * a, f = 0; p > f; f++) {
                    var m = f % o,
                      g = (f / o) | 0,
                      v = g * this.verticesX + m,
                      _ = g * this.verticesX + m + 1,
                      y = (g + 1) * this.verticesX + m,
                      b = (g + 1) * this.verticesX + m + 1;
                    s.push(v, _, y), s.push(_, b, y);
                  }
                  (this.vertices = new Float32Array(n)),
                    (this.uvs = new Float32Array(r)),
                    (this.colors = new Float32Array(i)),
                    (this.indices = new Uint16Array(s)),
                    this.indexDirty++,
                    this.multiplyUvs();
                }),
                (t.prototype._onTextureUpdate = function () {
                  a["default"].prototype._onTextureUpdate.call(this),
                    this._ready && this.refresh();
                }),
                t
              );
            })(a["default"]);
          n["default"] = l;
        },
        { "./Mesh": 166 },
      ],
      169: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("./Mesh"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t(n, s) {
                i(this, t);
                var o = r(this, e.call(this, n));
                return (
                  (o.points = s),
                  (o.vertices = new Float32Array(4 * s.length)),
                  (o.uvs = new Float32Array(4 * s.length)),
                  (o.colors = new Float32Array(2 * s.length)),
                  (o.indices = new Uint16Array(2 * s.length)),
                  (o.autoUpdate = !0),
                  o.refresh(),
                  o
                );
              }
              return (
                s(t, e),
                (t.prototype._refresh = function () {
                  var e = this.points;
                  if (!(e.length < 1) && this._texture._uvs) {
                    this.vertices.length / 4 !== e.length &&
                      ((this.vertices = new Float32Array(4 * e.length)),
                      (this.uvs = new Float32Array(4 * e.length)),
                      (this.colors = new Float32Array(2 * e.length)),
                      (this.indices = new Uint16Array(2 * e.length)));
                    var t = this.uvs,
                      n = this.indices,
                      i = this.colors;
                    (t[0] = 0),
                      (t[1] = 0),
                      (t[2] = 0),
                      (t[3] = 1),
                      (i[0] = 1),
                      (i[1] = 1),
                      (n[0] = 0),
                      (n[1] = 1);
                    for (var r = e.length, s = 1; r > s; s++) {
                      var o = 4 * s,
                        a = s / (r - 1);
                      (t[o] = a),
                        (t[o + 1] = 0),
                        (t[o + 2] = a),
                        (t[o + 3] = 1),
                        (o = 2 * s),
                        (i[o] = 1),
                        (i[o + 1] = 1),
                        (o = 2 * s),
                        (n[o] = o),
                        (n[o + 1] = o + 1);
                    }
                    this.dirty++,
                      this.indexDirty++,
                      this.multiplyUvs(),
                      this.refreshVertices();
                  }
                }),
                (t.prototype.refreshVertices = function () {
                  var e = this.points;
                  if (!(e.length < 1))
                    for (
                      var t = e[0],
                        n = void 0,
                        i = 0,
                        r = 0,
                        s = this.vertices,
                        o = e.length,
                        a = 0;
                      o > a;
                      a++
                    ) {
                      var l = e[a],
                        c = 4 * a;
                      (n = a < e.length - 1 ? e[a + 1] : l),
                        (r = -(n.x - t.x)),
                        (i = n.y - t.y);
                      var u = 10 * (1 - a / (o - 1));
                      u > 1 && (u = 1);
                      var h = Math.sqrt(i * i + r * r),
                        d = this._texture.height / 2;
                      (i /= h),
                        (r /= h),
                        (i *= d),
                        (r *= d),
                        (s[c] = l.x + i),
                        (s[c + 1] = l.y + r),
                        (s[c + 2] = l.x - i),
                        (s[c + 3] = l.y - r),
                        (t = l);
                    }
                }),
                (t.prototype.updateTransform = function () {
                  this.autoUpdate && this.refreshVertices(),
                    this.containerUpdateTransform();
                }),
                t
              );
            })(a["default"]);
          n["default"] = l;
        },
        { "./Mesh": 166 },
      ],
      170: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = e("../../core"),
            s = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(r),
            o = e("../Mesh"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function () {
              function e(t) {
                i(this, e), (this.renderer = t);
              }
              return (
                (e.prototype.render = function (e) {
                  var t = this.renderer,
                    n = t.context,
                    i = e.worldTransform,
                    r = t.resolution;
                  t.roundPixels
                    ? n.setTransform(
                        i.a * r,
                        i.b * r,
                        i.c * r,
                        i.d * r,
                        (i.tx * r) | 0,
                        (i.ty * r) | 0
                      )
                    : n.setTransform(
                        i.a * r,
                        i.b * r,
                        i.c * r,
                        i.d * r,
                        i.tx * r,
                        i.ty * r
                      ),
                    t.setBlendMode(e.blendMode),
                    e.drawMode === a["default"].DRAW_MODES.TRIANGLE_MESH
                      ? this._renderTriangleMesh(e)
                      : this._renderTriangles(e);
                }),
                (e.prototype._renderTriangleMesh = function (e) {
                  for (var t = e.vertices.length / 2, n = 0; t - 2 > n; n++) {
                    var i = 2 * n;
                    this._renderDrawTriangle(e, i, i + 2, i + 4);
                  }
                }),
                (e.prototype._renderTriangles = function (e) {
                  for (var t = e.indices, n = t.length, i = 0; n > i; i += 3) {
                    var r = 2 * t[i],
                      s = 2 * t[i + 1],
                      o = 2 * t[i + 2];
                    this._renderDrawTriangle(e, r, s, o);
                  }
                }),
                (e.prototype._renderDrawTriangle = function (e, t, n, i) {
                  var r = this.renderer.context,
                    s = e.uvs,
                    o = e.vertices,
                    a = e._texture;
                  if (a.valid) {
                    var l = a.baseTexture,
                      c = l.source,
                      u = l.width,
                      h = l.height,
                      d = void 0,
                      p = void 0,
                      f = void 0,
                      m = void 0,
                      g = void 0,
                      v = void 0;
                    if (e.uploadUvTransform) {
                      var _ = e._uvTransform.mapCoord;
                      (d = (s[t] * _.a + s[t + 1] * _.c + _.tx) * l.width),
                        (p = (s[n] * _.a + s[n + 1] * _.c + _.tx) * l.width),
                        (f = (s[i] * _.a + s[i + 1] * _.c + _.tx) * l.width),
                        (m = (s[t] * _.b + s[t + 1] * _.d + _.ty) * l.height),
                        (g = (s[n] * _.b + s[n + 1] * _.d + _.ty) * l.height),
                        (v = (s[i] * _.b + s[i + 1] * _.d + _.ty) * l.height);
                    } else
                      (d = s[t] * l.width),
                        (p = s[n] * l.width),
                        (f = s[i] * l.width),
                        (m = s[t + 1] * l.height),
                        (g = s[n + 1] * l.height),
                        (v = s[i + 1] * l.height);
                    var y = o[t],
                      b = o[n],
                      w = o[i],
                      x = o[t + 1],
                      C = o[n + 1],
                      T = o[i + 1];
                    if (e.canvasPadding > 0) {
                      var S = e.canvasPadding / e.worldTransform.a,
                        E = e.canvasPadding / e.worldTransform.d,
                        k = (y + b + w) / 3,
                        P = (x + C + T) / 3,
                        I = y - k,
                        A = x - P,
                        O = Math.sqrt(I * I + A * A);
                      (y = k + (I / O) * (O + S)),
                        (x = P + (A / O) * (O + E)),
                        (I = b - k),
                        (A = C - P),
                        (O = Math.sqrt(I * I + A * A)),
                        (b = k + (I / O) * (O + S)),
                        (C = P + (A / O) * (O + E)),
                        (I = w - k),
                        (A = T - P),
                        (O = Math.sqrt(I * I + A * A)),
                        (w = k + (I / O) * (O + S)),
                        (T = P + (A / O) * (O + E));
                    }
                    r.save(),
                      r.beginPath(),
                      r.moveTo(y, x),
                      r.lineTo(b, C),
                      r.lineTo(w, T),
                      r.closePath(),
                      r.clip();
                    var D = d * g + m * f + p * v - g * f - m * p - d * v,
                      M = y * g + m * w + b * v - g * w - m * b - y * v,
                      R = d * b + y * f + p * w - b * f - y * p - d * w,
                      L =
                        d * g * w +
                        m * b * f +
                        y * p * v -
                        y * g * f -
                        m * p * w -
                        d * b * v,
                      N = x * g + m * T + C * v - g * T - m * C - x * v,
                      U = d * C + x * f + p * T - C * f - x * p - d * T,
                      B =
                        d * g * T +
                        m * C * f +
                        x * p * v -
                        x * g * f -
                        m * p * T -
                        d * C * v;
                    r.transform(M / D, N / D, R / D, U / D, L / D, B / D),
                      r.drawImage(
                        c,
                        0,
                        0,
                        u * l.resolution,
                        h * l.resolution,
                        0,
                        0,
                        u,
                        h
                      ),
                      r.restore(),
                      this.renderer.invalidateBlendMode();
                  }
                }),
                (e.prototype.renderMeshFlat = function (e) {
                  var t = this.renderer.context,
                    n = e.vertices,
                    i = n.length / 2;
                  t.beginPath();
                  for (var r = 1; i - 2 > r; ++r) {
                    var s = 2 * r,
                      o = n[s],
                      a = n[s + 1],
                      l = n[s + 2],
                      c = n[s + 3],
                      u = n[s + 4],
                      h = n[s + 5];
                    t.moveTo(o, a), t.lineTo(l, c), t.lineTo(u, h);
                  }
                  (t.fillStyle = "#FF0000"), t.fill(), t.closePath();
                }),
                (e.prototype.destroy = function () {
                  this.renderer = null;
                }),
                e
              );
            })();
          (n["default"] = l), s.CanvasRenderer.registerPlugin("mesh", l);
        },
        { "../../core": 65, "../Mesh": 166 },
      ],
      171: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./Mesh");
          Object.defineProperty(n, "Mesh", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./webgl/MeshRenderer");
          Object.defineProperty(n, "MeshRenderer", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./canvas/CanvasMeshRenderer");
          Object.defineProperty(n, "CanvasMeshRenderer", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./Plane");
          Object.defineProperty(n, "Plane", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./NineSlicePlane");
          Object.defineProperty(n, "NineSlicePlane", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          });
          var c = e("./Rope");
          Object.defineProperty(n, "Rope", {
            enumerable: !0,
            get: function () {
              return i(c)["default"];
            },
          });
        },
        {
          "./Mesh": 166,
          "./NineSlicePlane": 167,
          "./Plane": 168,
          "./Rope": 169,
          "./canvas/CanvasMeshRenderer": 170,
          "./webgl/MeshRenderer": 172,
        },
      ],
      172: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = e("pixi-gl-core"),
            u = i(c),
            h = e("../Mesh"),
            d = i(h),
            p = (e("path"), l.Matrix.IDENTITY),
            f = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this, n));
                return (i.shader = null), i;
              }
              return (
                o(t, e),
                (t.prototype.onContextChange = function () {
                  var e = this.renderer.gl;
                  this.shader = new l.Shader(
                    e,
                    "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",
                    "varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"
                  );
                }),
                (t.prototype.render = function (e) {
                  var t = this.renderer,
                    n = t.gl,
                    i = e._texture;
                  if (i.valid) {
                    var r = e._glDatas[t.CONTEXT_UID];
                    r ||
                      (t.bindVao(null),
                      (r = {
                        shader: this.shader,
                        vertexBuffer: u["default"].GLBuffer.createVertexBuffer(
                          n,
                          e.vertices,
                          n.STREAM_DRAW
                        ),
                        uvBuffer: u["default"].GLBuffer.createVertexBuffer(
                          n,
                          e.uvs,
                          n.STREAM_DRAW
                        ),
                        indexBuffer: u["default"].GLBuffer.createIndexBuffer(
                          n,
                          e.indices,
                          n.STATIC_DRAW
                        ),
                        vao: null,
                        dirty: e.dirty,
                        indexDirty: e.indexDirty,
                      }),
                      (r.vao = new u["default"].VertexArrayObject(n)
                        .addIndex(r.indexBuffer)
                        .addAttribute(
                          r.vertexBuffer,
                          r.shader.attributes.aVertexPosition,
                          n.FLOAT,
                          !1,
                          8,
                          0
                        )
                        .addAttribute(
                          r.uvBuffer,
                          r.shader.attributes.aTextureCoord,
                          n.FLOAT,
                          !1,
                          8,
                          0
                        )),
                      (e._glDatas[t.CONTEXT_UID] = r)),
                      t.bindVao(r.vao),
                      e.dirty !== r.dirty &&
                        ((r.dirty = e.dirty), r.uvBuffer.upload(e.uvs)),
                      e.indexDirty !== r.indexDirty &&
                        ((r.indexDirty = e.indexDirty),
                        r.indexBuffer.upload(e.indices)),
                      r.vertexBuffer.upload(e.vertices),
                      t.bindShader(r.shader),
                      (r.shader.uniforms.uSampler = t.bindTexture(i)),
                      t.state.setBlendMode(
                        l.utils.correctBlendMode(
                          e.blendMode,
                          i.baseTexture.premultipliedAlpha
                        )
                      ),
                      r.shader.uniforms.uTransform &&
                        (r.shader.uniforms.uTransform = e.uploadUvTransform
                          ? e._uvTransform.mapCoord.toArray(!0)
                          : p.toArray(!0)),
                      (r.shader.uniforms.translationMatrix =
                        e.worldTransform.toArray(!0)),
                      (r.shader.uniforms.uColor = l.utils.premultiplyRgba(
                        e.tintRgb,
                        e.worldAlpha,
                        r.shader.uniforms.uColor,
                        i.baseTexture.premultipliedAlpha
                      ));
                    var s =
                      e.drawMode === d["default"].DRAW_MODES.TRIANGLE_MESH
                        ? n.TRIANGLE_STRIP
                        : n.TRIANGLES;
                    r.vao.draw(s, e.indices.length, 0);
                  }
                }),
                t
              );
            })(l.ObjectRenderer);
          (n["default"] = f), l.WebGLRenderer.registerPlugin("mesh", f);
        },
        { "../../core": 65, "../Mesh": 166, path: 8, "pixi-gl-core": 15 },
      ],
      173: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = (function () {
              function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                  var i = t[n];
                  (i.enumerable = i.enumerable || !1),
                    (i.configurable = !0),
                    "value" in i && (i.writable = !0),
                    Object.defineProperty(e, i.key, i);
                }
              }
              return function (t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t;
              };
            })(),
            a = e("../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = e("../core/utils"),
            u = (function (e) {
              function t() {
                var n =
                    arguments.length > 0 && void 0 !== arguments[0]
                      ? arguments[0]
                      : 1500,
                  s = arguments[1],
                  o =
                    arguments.length > 2 && void 0 !== arguments[2]
                      ? arguments[2]
                      : 16384,
                  a =
                    arguments.length > 3 &&
                    void 0 !== arguments[3] &&
                    arguments[3];
                i(this, t);
                var c = r(this, e.call(this));
                return (
                  o > 16384 && (o = 16384),
                  o > n && (o = n),
                  (c._properties = [!1, !0, !1, !1, !1]),
                  (c._maxSize = n),
                  (c._batchSize = o),
                  (c._glBuffers = {}),
                  (c._bufferToUpdate = 0),
                  (c.interactiveChildren = !1),
                  (c.blendMode = l.BLEND_MODES.NORMAL),
                  (c.autoResize = a),
                  (c.roundPixels = !0),
                  (c.baseTexture = null),
                  c.setProperties(s),
                  (c._tint = 0),
                  (c.tintRgb = new Float32Array(4)),
                  (c.tint = 16777215),
                  c
                );
              }
              return (
                s(t, e),
                (t.prototype.setProperties = function (e) {
                  e &&
                    ((this._properties[0] =
                      "scale" in e ? !!e.scale : this._properties[0]),
                    (this._properties[1] =
                      "position" in e ? !!e.position : this._properties[1]),
                    (this._properties[2] =
                      "rotation" in e ? !!e.rotation : this._properties[2]),
                    (this._properties[3] =
                      "uvs" in e ? !!e.uvs : this._properties[3]),
                    (this._properties[4] =
                      "alpha" in e || "tint" in e
                        ? !!e.alpha || !!e.tint
                        : this._properties[4]));
                }),
                (t.prototype.updateTransform = function () {
                  this.displayObjectUpdateTransform();
                }),
                (t.prototype.renderWebGL = function (e) {
                  var t = this;
                  this.visible &&
                    !(this.worldAlpha <= 0) &&
                    this.children.length &&
                    this.renderable &&
                    (this.baseTexture ||
                      ((this.baseTexture =
                        this.children[0]._texture.baseTexture),
                      this.baseTexture.hasLoaded ||
                        this.baseTexture.once("update", function () {
                          return t.onChildrenChange(0);
                        })),
                    e.setObjectRenderer(e.plugins.particle),
                    e.plugins.particle.render(this));
                }),
                (t.prototype.onChildrenChange = function (e) {
                  var t = Math.floor(e / this._batchSize);
                  t < this._bufferToUpdate && (this._bufferToUpdate = t);
                }),
                (t.prototype.renderCanvas = function (e) {
                  if (
                    this.visible &&
                    !(this.worldAlpha <= 0) &&
                    this.children.length &&
                    this.renderable
                  ) {
                    var t = e.context,
                      n = this.worldTransform,
                      i = !0,
                      r = 0,
                      s = 0,
                      o = 0,
                      a = 0;
                    e.setBlendMode(this.blendMode),
                      (t.globalAlpha = this.worldAlpha),
                      this.displayObjectUpdateTransform();
                    for (var l = 0; l < this.children.length; ++l) {
                      var c = this.children[l];
                      if (c.visible) {
                        var u = c._texture.frame;
                        if (
                          ((t.globalAlpha = this.worldAlpha * c.alpha),
                          c.rotation % (2 * Math.PI) == 0)
                        )
                          i &&
                            (t.setTransform(
                              n.a,
                              n.b,
                              n.c,
                              n.d,
                              n.tx * e.resolution,
                              n.ty * e.resolution
                            ),
                            (i = !1)),
                            (r =
                              c.anchor.x * -u.width * c.scale.x +
                              c.position.x +
                              0.5),
                            (s =
                              c.anchor.y * -u.height * c.scale.y +
                              c.position.y +
                              0.5),
                            (o = u.width * c.scale.x),
                            (a = u.height * c.scale.y);
                        else {
                          i || (i = !0), c.displayObjectUpdateTransform();
                          var h = c.worldTransform;
                          e.roundPixels
                            ? t.setTransform(
                                h.a,
                                h.b,
                                h.c,
                                h.d,
                                (h.tx * e.resolution) | 0,
                                (h.ty * e.resolution) | 0
                              )
                            : t.setTransform(
                                h.a,
                                h.b,
                                h.c,
                                h.d,
                                h.tx * e.resolution,
                                h.ty * e.resolution
                              ),
                            (r = c.anchor.x * -u.width + 0.5),
                            (s = c.anchor.y * -u.height + 0.5),
                            (o = u.width),
                            (a = u.height);
                        }
                        var d = c._texture.baseTexture.resolution;
                        t.drawImage(
                          c._texture.baseTexture.source,
                          u.x * d,
                          u.y * d,
                          u.width * d,
                          u.height * d,
                          r * e.resolution,
                          s * e.resolution,
                          o * e.resolution,
                          a * e.resolution
                        );
                      }
                    }
                  }
                }),
                (t.prototype.destroy = function (t) {
                  if ((e.prototype.destroy.call(this, t), this._buffers))
                    for (var n = 0; n < this._buffers.length; ++n)
                      this._buffers[n].destroy();
                  (this._properties = null), (this._buffers = null);
                }),
                o(t, [
                  {
                    key: "tint",
                    get: function () {
                      return this._tint;
                    },
                    set: function (e) {
                      (this._tint = e), c.hex2rgb(e, this.tintRgb);
                    },
                  },
                ]),
                t
              );
            })(l.Container);
          n["default"] = u;
        },
        { "../core": 65, "../core/utils": 124 },
      ],
      174: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./ParticleContainer");
          Object.defineProperty(n, "ParticleContainer", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./webgl/ParticleRenderer");
          Object.defineProperty(n, "ParticleRenderer", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
        },
        { "./ParticleContainer": 173, "./webgl/ParticleRenderer": 176 },
      ],
      175: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var s = e("pixi-gl-core"),
            o = i(s),
            a = e("../../core/utils/createIndicesForQuads"),
            l = i(a),
            c = (function () {
              function e(t, n, i, s) {
                r(this, e),
                  (this.gl = t),
                  (this.size = s),
                  (this.dynamicProperties = []),
                  (this.staticProperties = []);
                for (var o = 0; o < n.length; ++o) {
                  var a = n[o];
                  (a = {
                    attribute: a.attribute,
                    size: a.size,
                    uploadFunction: a.uploadFunction,
                    unsignedByte: a.unsignedByte,
                    offset: a.offset,
                  }),
                    i[o]
                      ? this.dynamicProperties.push(a)
                      : this.staticProperties.push(a);
                }
                (this.staticStride = 0),
                  (this.staticBuffer = null),
                  (this.staticData = null),
                  (this.staticDataUint32 = null),
                  (this.dynamicStride = 0),
                  (this.dynamicBuffer = null),
                  (this.dynamicData = null),
                  (this.dynamicDataUint32 = null),
                  this.initBuffers();
              }
              return (
                (e.prototype.initBuffers = function () {
                  var e = this.gl,
                    t = 0;
                  (this.indices = l["default"](this.size)),
                    (this.indexBuffer = o["default"].GLBuffer.createIndexBuffer(
                      e,
                      this.indices,
                      e.STATIC_DRAW
                    )),
                    (this.dynamicStride = 0);
                  for (var n = 0; n < this.dynamicProperties.length; ++n) {
                    var i = this.dynamicProperties[n];
                    (i.offset = t),
                      (t += i.size),
                      (this.dynamicStride += i.size);
                  }
                  var r = new ArrayBuffer(
                    this.size * this.dynamicStride * 4 * 4
                  );
                  (this.dynamicData = new Float32Array(r)),
                    (this.dynamicDataUint32 = new Uint32Array(r)),
                    (this.dynamicBuffer = o[
                      "default"
                    ].GLBuffer.createVertexBuffer(e, r, e.STREAM_DRAW));
                  var s = 0;
                  this.staticStride = 0;
                  for (var a = 0; a < this.staticProperties.length; ++a) {
                    var c = this.staticProperties[a];
                    (c.offset = s),
                      (s += c.size),
                      (this.staticStride += c.size);
                  }
                  var u = new ArrayBuffer(
                    this.size * this.staticStride * 4 * 4
                  );
                  (this.staticData = new Float32Array(u)),
                    (this.staticDataUint32 = new Uint32Array(u)),
                    (this.staticBuffer = o[
                      "default"
                    ].GLBuffer.createVertexBuffer(e, u, e.STATIC_DRAW)),
                    (this.vao = new o["default"].VertexArrayObject(e).addIndex(
                      this.indexBuffer
                    ));
                  for (var h = 0; h < this.dynamicProperties.length; ++h) {
                    var d = this.dynamicProperties[h];
                    d.unsignedByte
                      ? this.vao.addAttribute(
                          this.dynamicBuffer,
                          d.attribute,
                          e.UNSIGNED_BYTE,
                          !0,
                          4 * this.dynamicStride,
                          4 * d.offset
                        )
                      : this.vao.addAttribute(
                          this.dynamicBuffer,
                          d.attribute,
                          e.FLOAT,
                          !1,
                          4 * this.dynamicStride,
                          4 * d.offset
                        );
                  }
                  for (var p = 0; p < this.staticProperties.length; ++p) {
                    var f = this.staticProperties[p];
                    f.unsignedByte
                      ? this.vao.addAttribute(
                          this.staticBuffer,
                          f.attribute,
                          e.UNSIGNED_BYTE,
                          !0,
                          4 * this.staticStride,
                          4 * f.offset
                        )
                      : this.vao.addAttribute(
                          this.staticBuffer,
                          f.attribute,
                          e.FLOAT,
                          !1,
                          4 * this.staticStride,
                          4 * f.offset
                        );
                  }
                }),
                (e.prototype.uploadDynamic = function (e, t, n) {
                  for (var i = 0; i < this.dynamicProperties.length; i++) {
                    var r = this.dynamicProperties[i];
                    r.uploadFunction(
                      e,
                      t,
                      n,
                      r.unsignedByte
                        ? this.dynamicDataUint32
                        : this.dynamicData,
                      this.dynamicStride,
                      r.offset
                    );
                  }
                  this.dynamicBuffer.upload();
                }),
                (e.prototype.uploadStatic = function (e, t, n) {
                  for (var i = 0; i < this.staticProperties.length; i++) {
                    var r = this.staticProperties[i];
                    r.uploadFunction(
                      e,
                      t,
                      n,
                      r.unsignedByte ? this.staticDataUint32 : this.staticData,
                      this.staticStride,
                      r.offset
                    );
                  }
                  this.staticBuffer.upload();
                }),
                (e.prototype.destroy = function () {
                  (this.dynamicProperties = null),
                    (this.dynamicData = null),
                    this.dynamicBuffer.destroy(),
                    (this.staticProperties = null),
                    (this.staticData = null),
                    this.staticBuffer.destroy();
                }),
                e
              );
            })();
          n["default"] = c;
        },
        { "../../core/utils/createIndicesForQuads": 122, "pixi-gl-core": 15 },
      ],
      176: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          function r(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function s(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function o(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = e("./ParticleShader"),
            u = i(c),
            h = e("./ParticleBuffer"),
            d = i(h),
            p = e("../../core/utils"),
            f = (function (e) {
              function t(n) {
                r(this, t);
                var i = s(this, e.call(this, n));
                return (
                  (i.shader = null),
                  (i.indexBuffer = null),
                  (i.properties = null),
                  (i.tempMatrix = new l.Matrix()),
                  (i.CONTEXT_UID = 0),
                  i
                );
              }
              return (
                o(t, e),
                (t.prototype.onContextChange = function () {
                  var e = this.renderer.gl;
                  (this.CONTEXT_UID = this.renderer.CONTEXT_UID),
                    (this.shader = new u["default"](e)),
                    (this.properties = [
                      {
                        attribute: this.shader.attributes.aVertexPosition,
                        size: 2,
                        uploadFunction: this.uploadVertices,
                        offset: 0,
                      },
                      {
                        attribute: this.shader.attributes.aPositionCoord,
                        size: 2,
                        uploadFunction: this.uploadPosition,
                        offset: 0,
                      },
                      {
                        attribute: this.shader.attributes.aRotation,
                        size: 1,
                        uploadFunction: this.uploadRotation,
                        offset: 0,
                      },
                      {
                        attribute: this.shader.attributes.aTextureCoord,
                        size: 2,
                        uploadFunction: this.uploadUvs,
                        offset: 0,
                      },
                      {
                        attribute: this.shader.attributes.aColor,
                        size: 1,
                        unsignedByte: !0,
                        uploadFunction: this.uploadTint,
                        offset: 0,
                      },
                    ]);
                }),
                (t.prototype.start = function () {
                  this.renderer.bindShader(this.shader);
                }),
                (t.prototype.render = function (e) {
                  var t = e.children,
                    n = e._maxSize,
                    i = e._batchSize,
                    r = this.renderer,
                    s = t.length;
                  if (0 !== s) {
                    s > n && (s = n);
                    var o = e._glBuffers[r.CONTEXT_UID];
                    o ||
                      (o = e._glBuffers[r.CONTEXT_UID] =
                        this.generateBuffers(e));
                    var a = t[0]._texture.baseTexture;
                    this.renderer.setBlendMode(
                      l.utils.correctBlendMode(
                        e.blendMode,
                        a.premultipliedAlpha
                      )
                    );
                    var c = r.gl,
                      u = e.worldTransform.copy(this.tempMatrix);
                    u.prepend(r._activeRenderTarget.projectionMatrix),
                      (this.shader.uniforms.projectionMatrix = u.toArray(!0)),
                      (this.shader.uniforms.uColor = l.utils.premultiplyRgba(
                        e.tintRgb,
                        e.worldAlpha,
                        this.shader.uniforms.uColor,
                        a.premultipliedAlpha
                      )),
                      (this.shader.uniforms.uSampler = r.bindTexture(a));
                    for (var h = 0, d = 0; s > h; h += i, d += 1) {
                      var p = s - h;
                      if ((p > i && (p = i), d >= o.length)) {
                        if (!e.autoResize) break;
                        o.push(this._generateOneMoreBuffer(e));
                      }
                      var f = o[d];
                      f.uploadDynamic(t, h, p),
                        e._bufferToUpdate === d &&
                          (f.uploadStatic(t, h, p),
                          (e._bufferToUpdate = d + 1)),
                        r.bindVao(f.vao),
                        f.vao.draw(c.TRIANGLES, 6 * p);
                    }
                  }
                }),
                (t.prototype.generateBuffers = function (e) {
                  for (
                    var t = this.renderer.gl,
                      n = [],
                      i = e._maxSize,
                      r = e._batchSize,
                      s = e._properties,
                      o = 0;
                    i > o;
                    o += r
                  )
                    n.push(new d["default"](t, this.properties, s, r));
                  return n;
                }),
                (t.prototype._generateOneMoreBuffer = function (e) {
                  var t = this.renderer.gl,
                    n = e._batchSize,
                    i = e._properties;
                  return new d["default"](t, this.properties, i, n);
                }),
                (t.prototype.uploadVertices = function (e, t, n, i, r, s) {
                  for (var o = 0, a = 0, l = 0, c = 0, u = 0; n > u; ++u) {
                    var h = e[t + u],
                      d = h._texture,
                      p = h.scale.x,
                      f = h.scale.y,
                      m = d.trim,
                      g = d.orig;
                    m
                      ? ((a = m.x - h.anchor.x * g.width),
                        (o = a + m.width),
                        (c = m.y - h.anchor.y * g.height),
                        (l = c + m.height))
                      : ((o = g.width * (1 - h.anchor.x)),
                        (a = g.width * -h.anchor.x),
                        (l = g.height * (1 - h.anchor.y)),
                        (c = g.height * -h.anchor.y)),
                      (i[s] = a * p),
                      (i[s + 1] = c * f),
                      (i[s + r] = o * p),
                      (i[s + r + 1] = c * f),
                      (i[s + 2 * r] = o * p),
                      (i[s + 2 * r + 1] = l * f),
                      (i[s + 3 * r] = a * p),
                      (i[s + 3 * r + 1] = l * f),
                      (s += 4 * r);
                  }
                }),
                (t.prototype.uploadPosition = function (e, t, n, i, r, s) {
                  for (var o = 0; n > o; o++) {
                    var a = e[t + o].position;
                    (i[s] = a.x),
                      (i[s + 1] = a.y),
                      (i[s + r] = a.x),
                      (i[s + r + 1] = a.y),
                      (i[s + 2 * r] = a.x),
                      (i[s + 2 * r + 1] = a.y),
                      (i[s + 3 * r] = a.x),
                      (i[s + 3 * r + 1] = a.y),
                      (s += 4 * r);
                  }
                }),
                (t.prototype.uploadRotation = function (e, t, n, i, r, s) {
                  for (var o = 0; n > o; o++) {
                    var a = e[t + o].rotation;
                    (i[s] = a),
                      (i[s + r] = a),
                      (i[s + 2 * r] = a),
                      (i[s + 3 * r] = a),
                      (s += 4 * r);
                  }
                }),
                (t.prototype.uploadUvs = function (e, t, n, i, r, s) {
                  for (var o = 0; n > o; ++o) {
                    var a = e[t + o]._texture._uvs;
                    a
                      ? ((i[s] = a.x0),
                        (i[s + 1] = a.y0),
                        (i[s + r] = a.x1),
                        (i[s + r + 1] = a.y1),
                        (i[s + 2 * r] = a.x2),
                        (i[s + 2 * r + 1] = a.y2),
                        (i[s + 3 * r] = a.x3),
                        (i[s + 3 * r + 1] = a.y3),
                        (s += 4 * r))
                      : ((i[s] = 0),
                        (i[s + 1] = 0),
                        (i[s + r] = 0),
                        (i[s + r + 1] = 0),
                        (i[s + 2 * r] = 0),
                        (i[s + 2 * r + 1] = 0),
                        (i[s + 3 * r] = 0),
                        (i[s + 3 * r + 1] = 0),
                        (s += 4 * r));
                  }
                }),
                (t.prototype.uploadTint = function (e, t, n, i, r, s) {
                  for (var o = 0; n > o; ++o) {
                    var a = e[t + o],
                      l = a._texture.baseTexture.premultipliedAlpha,
                      c = a.alpha,
                      u =
                        1 > c && l
                          ? p.premultiplyTint(a._tintRGB, c)
                          : a._tintRGB + ((255 * c) << 24);
                    (i[s] = u),
                      (i[s + r] = u),
                      (i[s + 2 * r] = u),
                      (i[s + 3 * r] = u),
                      (s += 4 * r);
                  }
                }),
                (t.prototype.destroy = function () {
                  this.renderer.gl &&
                    this.renderer.gl.deleteBuffer(this.indexBuffer),
                    e.prototype.destroy.call(this),
                    this.shader.destroy(),
                    (this.indices = null),
                    (this.tempMatrix = null);
                }),
                t
              );
            })(l.ObjectRenderer);
          (n["default"] = f), l.WebGLRenderer.registerPlugin("particle", f);
        },
        {
          "../../core": 65,
          "../../core/utils": 124,
          "./ParticleBuffer": 175,
          "./ParticleShader": 177,
        },
      ],
      177: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          n.__esModule = !0;
          var o = e("../../core/Shader"),
            a = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(o),
            l = (function (e) {
              function t(n) {
                return (
                  i(this, t),
                  r(
                    this,
                    e.call(
                      this,
                      n,
                      [
                        "attribute vec2 aVertexPosition;",
                        "attribute vec2 aTextureCoord;",
                        "attribute vec4 aColor;",
                        "attribute vec2 aPositionCoord;",
                        "attribute vec2 aScale;",
                        "attribute float aRotation;",
                        "uniform mat3 projectionMatrix;",
                        "uniform vec4 uColor;",
                        "varying vec2 vTextureCoord;",
                        "varying vec4 vColor;",
                        "void main(void){",
                        "   vec2 v = aVertexPosition;",
                        "   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);",
                        "   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);",
                        "   v = v + aPositionCoord;",
                        "   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);",
                        "   vTextureCoord = aTextureCoord;",
                        "   vColor = aColor * uColor;",
                        "}",
                      ].join("\n"),
                      [
                        "varying vec2 vTextureCoord;",
                        "varying vec4 vColor;",
                        "uniform sampler2D uSampler;",
                        "void main(void){",
                        "  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;",
                        "  if (color.a == 0.0) discard;",
                        "  gl_FragColor = color;",
                        "}",
                      ].join("\n")
                    )
                  )
                );
              }
              return s(t, e), t;
            })(a["default"]);
          n["default"] = l;
        },
        { "../../core/Shader": 44 },
      ],
      178: [
        function () {
          "use strict";
          Math.sign ||
            (Math.sign = function (e) {
              return (e = Number(e)), 0 === e || isNaN(e) ? e : e > 0 ? 1 : -1;
            });
        },
        {},
      ],
      179: [
        function (e) {
          "use strict";
          var t = e("object-assign"),
            n = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(t);
          Object.assign || (Object.assign = n["default"]);
        },
        { "object-assign": 6 },
      ],
      180: [
        function (e) {
          "use strict";
          e("./Object.assign"),
            e("./requestAnimationFrame"),
            e("./Math.sign"),
            window.ArrayBuffer || (window.ArrayBuffer = Array),
            window.Float32Array || (window.Float32Array = Array),
            window.Uint32Array || (window.Uint32Array = Array),
            window.Uint16Array || (window.Uint16Array = Array);
        },
        {
          "./Math.sign": 178,
          "./Object.assign": 179,
          "./requestAnimationFrame": 181,
        },
      ],
      181: [
        function () {
          (function (e) {
            "use strict";
            if (
              ((Date.now && Date.prototype.getTime) ||
                (Date.now = function () {
                  return new Date().getTime();
                }),
              !e.performance || !e.performance.now)
            ) {
              var t = Date.now();
              e.performance || (e.performance = {}),
                (e.performance.now = function () {
                  return Date.now() - t;
                });
            }
            for (
              var n = Date.now(), i = ["ms", "moz", "webkit", "o"], r = 0;
              r < i.length && !e.requestAnimationFrame;
              ++r
            ) {
              var s = i[r];
              (e.requestAnimationFrame = e[s + "RequestAnimationFrame"]),
                (e.cancelAnimationFrame =
                  e[s + "CancelAnimationFrame"] ||
                  e[s + "CancelRequestAnimationFrame"]);
            }
            e.requestAnimationFrame ||
              (e.requestAnimationFrame = function (e) {
                if ("function" != typeof e)
                  throw new TypeError(e + "is not a function");
                var t = Date.now(),
                  i = 16 + n - t;
                return (
                  0 > i && (i = 0),
                  (n = t),
                  setTimeout(function () {
                    (n = Date.now()), e(performance.now());
                  }, i)
                );
              }),
              e.cancelAnimationFrame ||
                (e.cancelAnimationFrame = function (e) {
                  return clearTimeout(e);
                });
          }.call(
            this,
            "undefined" != typeof global
              ? global
              : "undefined" != typeof self
              ? self
              : "undefined" != typeof window
              ? window
              : {}
          ));
        },
        {},
      ],
      182: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            var n = !1;
            if (e && e._textures && e._textures.length)
              for (var i = 0; i < e._textures.length; i++)
                if (e._textures[i] instanceof d.Texture) {
                  var r = e._textures[i].baseTexture;
                  -1 === t.indexOf(r) && (t.push(r), (n = !0));
                }
            return n;
          }
          function s(e, t) {
            return (
              e instanceof d.BaseTexture &&
              (-1 === t.indexOf(e) && t.push(e), !0)
            );
          }
          function o(e, t) {
            if (e._texture && e._texture instanceof d.Texture) {
              var n = e._texture.baseTexture;
              return -1 === t.indexOf(n) && t.push(n), !0;
            }
            return !1;
          }
          function a(e, t) {
            return t instanceof d.Text && (t.updateText(!0), !0);
          }
          function l(e, t) {
            if (t instanceof d.TextStyle) {
              var n = t.toFontString();
              return d.TextMetrics.measureFont(n), !0;
            }
            return !1;
          }
          function c(e, t) {
            if (e instanceof d.Text) {
              -1 === t.indexOf(e.style) && t.push(e.style),
                -1 === t.indexOf(e) && t.push(e);
              var n = e._texture.baseTexture;
              return -1 === t.indexOf(n) && t.push(n), !0;
            }
            return !1;
          }
          function u(e, t) {
            return (
              e instanceof d.TextStyle && (-1 === t.indexOf(e) && t.push(e), !0)
            );
          }
          n.__esModule = !0;
          var h = e("../core"),
            d = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(h),
            p = e("./limiters/CountLimiter"),
            f = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(p),
            m = d.ticker.shared;
          d.settings.UPLOADS_PER_FRAME = 4;
          var g = (function () {
            function e(t) {
              var n = this;
              i(this, e),
                (this.limiter = new f["default"](d.settings.UPLOADS_PER_FRAME)),
                (this.renderer = t),
                (this.uploadHookHelper = null),
                (this.queue = []),
                (this.addHooks = []),
                (this.uploadHooks = []),
                (this.completes = []),
                (this.ticking = !1),
                (this.delayedTick = function () {
                  n.queue && n.prepareItems();
                }),
                this.registerFindHook(c),
                this.registerFindHook(u),
                this.registerFindHook(r),
                this.registerFindHook(s),
                this.registerFindHook(o),
                this.registerUploadHook(a),
                this.registerUploadHook(l);
            }
            return (
              (e.prototype.upload = function (e, t) {
                "function" == typeof e && ((t = e), (e = null)),
                  e && this.add(e),
                  this.queue.length
                    ? (t && this.completes.push(t),
                      this.ticking ||
                        ((this.ticking = !0),
                        m.addOnce(this.tick, this, d.UPDATE_PRIORITY.UTILITY)))
                    : t && t();
              }),
              (e.prototype.tick = function () {
                setTimeout(this.delayedTick, 0);
              }),
              (e.prototype.prepareItems = function () {
                for (
                  this.limiter.beginFrame();
                  this.queue.length && this.limiter.allowedToUpload();

                ) {
                  var e = this.queue[0],
                    t = !1;
                  if (e && !e._destroyed)
                    for (var n = 0, i = this.uploadHooks.length; i > n; n++)
                      if (this.uploadHooks[n](this.uploadHookHelper, e)) {
                        this.queue.shift(), (t = !0);
                        break;
                      }
                  t || this.queue.shift();
                }
                if (this.queue.length)
                  m.addOnce(this.tick, this, d.UPDATE_PRIORITY.UTILITY);
                else {
                  this.ticking = !1;
                  var r = this.completes.slice(0);
                  this.completes.length = 0;
                  for (var s = 0, o = r.length; o > s; s++) r[s]();
                }
              }),
              (e.prototype.registerFindHook = function (e) {
                return e && this.addHooks.push(e), this;
              }),
              (e.prototype.registerUploadHook = function (e) {
                return e && this.uploadHooks.push(e), this;
              }),
              (e.prototype.add = function (e) {
                for (
                  var t = 0, n = this.addHooks.length;
                  n > t && !this.addHooks[t](e, this.queue);
                  t++
                );
                if (e instanceof d.Container)
                  for (var i = e.children.length - 1; i >= 0; i--)
                    this.add(e.children[i]);
                return this;
              }),
              (e.prototype.destroy = function () {
                this.ticking && m.remove(this.tick, this),
                  (this.ticking = !1),
                  (this.addHooks = null),
                  (this.uploadHooks = null),
                  (this.renderer = null),
                  (this.completes = null),
                  (this.queue = null),
                  (this.limiter = null),
                  (this.uploadHookHelper = null);
              }),
              e
            );
          })();
          n["default"] = g;
        },
        { "../core": 65, "./limiters/CountLimiter": 185 },
      ],
      183: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function o(e, t) {
            if (t instanceof l.BaseTexture) {
              var n = t.source,
                i =
                  0 === n.width
                    ? e.canvas.width
                    : Math.min(e.canvas.width, n.width),
                r =
                  0 === n.height
                    ? e.canvas.height
                    : Math.min(e.canvas.height, n.height);
              return (
                e.ctx.drawImage(
                  n,
                  0,
                  0,
                  i,
                  r,
                  0,
                  0,
                  e.canvas.width,
                  e.canvas.height
                ),
                !0
              );
            }
            return !1;
          }
          n.__esModule = !0;
          var a = e("../../core"),
            l = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(a),
            c = e("../BasePrepare"),
            u = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(c),
            h = 16,
            d = (function (e) {
              function t(n) {
                i(this, t);
                var s = r(this, e.call(this, n));
                return (
                  (s.uploadHookHelper = s),
                  (s.canvas = document.createElement("canvas")),
                  (s.canvas.width = h),
                  (s.canvas.height = h),
                  (s.ctx = s.canvas.getContext("2d")),
                  s.registerUploadHook(o),
                  s
                );
              }
              return (
                s(t, e),
                (t.prototype.destroy = function () {
                  e.prototype.destroy.call(this),
                    (this.ctx = null),
                    (this.canvas = null);
                }),
                t
              );
            })(u["default"]);
          (n["default"] = d), l.CanvasRenderer.registerPlugin("prepare", d);
        },
        { "../../core": 65, "../BasePrepare": 182 },
      ],
      184: [
        function (e, t, n) {
          "use strict";
          function i(e) {
            return e && e.__esModule ? e : { default: e };
          }
          n.__esModule = !0;
          var r = e("./webgl/WebGLPrepare");
          Object.defineProperty(n, "webgl", {
            enumerable: !0,
            get: function () {
              return i(r)["default"];
            },
          });
          var s = e("./canvas/CanvasPrepare");
          Object.defineProperty(n, "canvas", {
            enumerable: !0,
            get: function () {
              return i(s)["default"];
            },
          });
          var o = e("./BasePrepare");
          Object.defineProperty(n, "BasePrepare", {
            enumerable: !0,
            get: function () {
              return i(o)["default"];
            },
          });
          var a = e("./limiters/CountLimiter");
          Object.defineProperty(n, "CountLimiter", {
            enumerable: !0,
            get: function () {
              return i(a)["default"];
            },
          });
          var l = e("./limiters/TimeLimiter");
          Object.defineProperty(n, "TimeLimiter", {
            enumerable: !0,
            get: function () {
              return i(l)["default"];
            },
          });
        },
        {
          "./BasePrepare": 182,
          "./canvas/CanvasPrepare": 183,
          "./limiters/CountLimiter": 185,
          "./limiters/TimeLimiter": 186,
          "./webgl/WebGLPrepare": 187,
        },
      ],
      185: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t) {
              i(this, e), (this.maxItemsPerFrame = t), (this.itemsLeft = 0);
            }
            return (
              (e.prototype.beginFrame = function () {
                this.itemsLeft = this.maxItemsPerFrame;
              }),
              (e.prototype.allowedToUpload = function () {
                return this.itemsLeft-- > 0;
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      186: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          n.__esModule = !0;
          var r = (function () {
            function e(t) {
              i(this, e), (this.maxMilliseconds = t), (this.frameStart = 0);
            }
            return (
              (e.prototype.beginFrame = function () {
                this.frameStart = Date.now();
              }),
              (e.prototype.allowedToUpload = function () {
                return Date.now() - this.frameStart < this.maxMilliseconds;
              }),
              e
            );
          })();
          n["default"] = r;
        },
        {},
      ],
      187: [
        function (e, t, n) {
          "use strict";
          function i(e, t) {
            if (!(e instanceof t))
              throw new TypeError("Cannot call a class as a function");
          }
          function r(e, t) {
            if (!e)
              throw new ReferenceError(
                "this hasn't been initialised - super() hasn't been called"
              );
            return !t || ("object" != typeof t && "function" != typeof t)
              ? e
              : t;
          }
          function s(e, t) {
            if ("function" != typeof t && null !== t)
              throw new TypeError(
                "Super expression must either be null or a function, not " +
                  typeof t
              );
            (e.prototype = Object.create(t && t.prototype, {
              constructor: {
                value: e,
                enumerable: !1,
                writable: !0,
                configurable: !0,
              },
            })),
              t &&
                (Object.setPrototypeOf
                  ? Object.setPrototypeOf(e, t)
                  : (e.__proto__ = t));
          }
          function o(e, t) {
            return (
              t instanceof u.BaseTexture &&
              (t._glTextures[e.CONTEXT_UID] ||
                e.textureManager.updateTexture(t),
              !0)
            );
          }
          function a(e, t) {
            return (
              t instanceof u.Graphics &&
              ((t.dirty ||
                t.clearDirty ||
                !t._webGL[e.plugins.graphics.CONTEXT_UID]) &&
                e.plugins.graphics.updateGraphics(t),
              !0)
            );
          }
          function l(e, t) {
            return e instanceof u.Graphics && (t.push(e), !0);
          }
          n.__esModule = !0;
          var c = e("../../core"),
            u = (function (e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            })(c),
            h = e("../BasePrepare"),
            d = (function (e) {
              return e && e.__esModule ? e : { default: e };
            })(h),
            p = (function (e) {
              function t(n) {
                i(this, t);
                var s = r(this, e.call(this, n));
                return (
                  (s.uploadHookHelper = s.renderer),
                  s.registerFindHook(l),
                  s.registerUploadHook(o),
                  s.registerUploadHook(a),
                  s
                );
              }
              return s(t, e), t;
            })(d["default"]);
          (n["default"] = p), u.WebGLRenderer.registerPlugin("prepare", p);
        },
        { "../../core": 65, "../BasePrepare": 182 },
      ],
      188: [
        function (e, t, n) {
          (function (t) {
            "use strict";
            function i(e) {
              if (e && e.__esModule) return e;
              var t = {};
              if (null != e)
                for (var n in e)
                  Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);
              return (t["default"] = e), t;
            }
            (n.__esModule = !0),
              (n.loader =
                n.prepare =
                n.particles =
                n.mesh =
                n.loaders =
                n.interaction =
                n.filters =
                n.extras =
                n.extract =
                n.accessibility =
                  void 0);
            var r = e("./polyfill");
            Object.keys(r).forEach(function (e) {
              "default" !== e &&
                "__esModule" !== e &&
                Object.defineProperty(n, e, {
                  enumerable: !0,
                  get: function () {
                    return r[e];
                  },
                });
            });
            var s = e("./core");
            Object.keys(s).forEach(function (e) {
              "default" !== e &&
                "__esModule" !== e &&
                Object.defineProperty(n, e, {
                  enumerable: !0,
                  get: function () {
                    return s[e];
                  },
                });
            });
            var o = e("./deprecation"),
              a = (function (e) {
                return e && e.__esModule ? e : { default: e };
              })(o),
              l = e("./accessibility"),
              c = i(l),
              u = e("./extract"),
              h = i(u),
              d = e("./extras"),
              p = i(d),
              f = e("./filters"),
              m = i(f),
              g = e("./interaction"),
              v = i(g),
              _ = e("./loaders"),
              y = i(_),
              b = e("./mesh"),
              w = i(b),
              x = e("./particles"),
              C = i(x),
              T = e("./prepare"),
              S = i(T);
            s.utils.mixins.performMixins();
            var E = y.shared || null;
            (n.accessibility = c),
              (n.extract = h),
              (n.extras = p),
              (n.filters = m),
              (n.interaction = v),
              (n.loaders = y),
              (n.mesh = w),
              (n.particles = C),
              (n.prepare = S),
              (n.loader = E),
              "function" == typeof a["default"] && a["default"](n),
              (t.PIXI = n);
          }.call(
            this,
            "undefined" != typeof global
              ? global
              : "undefined" != typeof self
              ? self
              : "undefined" != typeof window
              ? window
              : {}
          ));
        },
        {
          "./accessibility": 42,
          "./core": 65,
          "./deprecation": 130,
          "./extract": 132,
          "./extras": 141,
          "./filters": 152,
          "./interaction": 159,
          "./loaders": 162,
          "./mesh": 171,
          "./particles": 174,
          "./polyfill": 180,
          "./prepare": 184,
        },
      ],
    },
    {},
    [188]
  )(188);
});
var numeric = "undefined" == typeof exports ? function () {} : exports;
"undefined" != typeof global && (global.numeric = numeric),
  (numeric.version = "1.2.6"),
  (numeric.bench = function (e, t) {
    var n, i, r, s;
    for ("undefined" == typeof t && (t = 15), r = 0.5, n = new Date(); ; ) {
      for (r *= 2, s = r; s > 3; s -= 4) e(), e(), e(), e();
      for (; s > 0; ) e(), s--;
      if (((i = new Date()), i - n > t)) break;
    }
    for (s = r; s > 3; s -= 4) e(), e(), e(), e();
    for (; s > 0; ) e(), s--;
    return (i = new Date()), (1e3 * (3 * r - 1)) / (i - n);
  }),
  (numeric._myIndexOf = function (e) {
    var t,
      n = this.length;
    for (t = 0; n > t; ++t) if (this[t] === e) return t;
    return -1;
  }),
  (numeric.myIndexOf = Array.prototype.indexOf
    ? Array.prototype.indexOf
    : numeric._myIndexOf),
  (numeric.Function = Function),
  (numeric.precision = 4),
  (numeric.largeArray = 50),
  (numeric.prettyPrint = function (e) {
    function t(e) {
      if (0 === e) return "0";
      if (isNaN(e)) return "NaN";
      if (0 > e) return "-" + t(-e);
      if (isFinite(e)) {
        var n = Math.floor(Math.log(e) / Math.log(10)),
          i = e / Math.pow(10, n),
          r = i.toPrecision(numeric.precision);
        return (
          10 === parseFloat(r) &&
            (n++, (i = 1), (r = i.toPrecision(numeric.precision))),
          parseFloat(r).toString() + "e" + n.toString()
        );
      }
      return "Infinity";
    }
    function n(e) {
      var r;
      if ("undefined" == typeof e)
        return i.push(Array(numeric.precision + 8).join(" ")), !1;
      if ("string" == typeof e) return i.push('"' + e + '"'), !1;
      if ("boolean" == typeof e) return i.push(e.toString()), !1;
      if ("number" == typeof e) {
        var s = t(e),
          o = e.toPrecision(numeric.precision),
          a = parseFloat(e.toString()).toString(),
          l = [s, o, a, parseFloat(o).toString(), parseFloat(a).toString()];
        for (r = 1; r < l.length; r++) l[r].length < s.length && (s = l[r]);
        return (
          i.push(Array(numeric.precision + 8 - s.length).join(" ") + s), !1
        );
      }
      if (null === e) return i.push("null"), !1;
      if ("function" == typeof e) {
        i.push(e.toString());
        var c = !1;
        for (r in e)
          e.hasOwnProperty(r) &&
            (i.push(c ? ",\n" : "\n{"),
            (c = !0),
            i.push(r),
            i.push(": \n"),
            n(e[r]));
        return c && i.push("}\n"), !0;
      }
      if (e instanceof Array) {
        if (e.length > numeric.largeArray)
          return i.push("...Large Array..."), !0;
        var c = !1;
        for (i.push("["), r = 0; r < e.length; r++)
          r > 0 && (i.push(","), c && i.push("\n ")), (c = n(e[r]));
        return i.push("]"), !0;
      }
      i.push("{");
      var c = !1;
      for (r in e)
        e.hasOwnProperty(r) &&
          (c && i.push(",\n"), (c = !0), i.push(r), i.push(": \n"), n(e[r]));
      return i.push("}"), !0;
    }
    var i = [];
    return n(e), i.join("");
  }),
  (numeric.parseDate = function (e) {
    function t(e) {
      if ("string" == typeof e) return Date.parse(e.replace(/-/g, "/"));
      if (e instanceof Array) {
        var n,
          i = [];
        for (n = 0; n < e.length; n++) i[n] = t(e[n]);
        return i;
      }
      throw new Error("parseDate: parameter must be arrays of strings");
    }
    return t(e);
  }),
  (numeric.parseFloat = function (e) {
    function t(e) {
      if ("string" == typeof e) return parseFloat(e);
      if (e instanceof Array) {
        var n,
          i = [];
        for (n = 0; n < e.length; n++) i[n] = t(e[n]);
        return i;
      }
      throw new Error("parseFloat: parameter must be arrays of strings");
    }
    return t(e);
  }),
  (numeric.parseCSV = function (e) {
    var t,
      n,
      i = e.split("\n"),
      r = [],
      s = /(([^'",]*)|('[^']*')|("[^"]*")),/g,
      o =
        /^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,
      a = function (e) {
        return e.substr(0, e.length - 1);
      },
      l = 0;
    for (n = 0; n < i.length; n++) {
      var c,
        u = (i[n] + ",").match(s);
      if (u.length > 0) {
        for (r[l] = [], t = 0; t < u.length; t++)
          (c = a(u[t])), (r[l][t] = o.test(c) ? parseFloat(c) : c);
        l++;
      }
    }
    return r;
  }),
  (numeric.toCSV = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o,
      a = numeric.dim(e);
    for (i = a[0], r = a[1], o = [], t = 0; i > t; t++) {
      for (s = [], n = 0; i > n; n++) s[n] = e[t][n].toString();
      o[t] = s.join(", ");
    }
    return o.join("\n") + "\n";
  }),
  (numeric.getURL = function (e) {
    var t = new XMLHttpRequest();
    return t.open("GET", e, !1), t.send(), t;
  }),
  (numeric.imageURL = function (e) {
    function t(e) {
      var t,
        n,
        i,
        r,
        s,
        o,
        a,
        l,
        c = e.length,
        u = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        h = "";
      for (t = 0; c > t; t += 3)
        (n = e[t]),
          (i = e[t + 1]),
          (r = e[t + 2]),
          (s = n >> 2),
          (o = ((3 & n) << 4) + (i >> 4)),
          (a = ((15 & i) << 2) + (r >> 6)),
          (l = 63 & r),
          t + 1 >= c ? (a = l = 64) : t + 2 >= c && (l = 64),
          (h += u.charAt(s) + u.charAt(o) + u.charAt(a) + u.charAt(l));
      return h;
    }
    function n(e, t, n) {
      "undefined" == typeof t && (t = 0),
        "undefined" == typeof n && (n = e.length);
      {
        var i,
          r = [
            0, 1996959894, 3993919788, 2567524794, 124634137, 1886057615,
            3915621685, 2657392035, 249268274, 2044508324, 3772115230,
            2547177864, 162941995, 2125561021, 3887607047, 2428444049,
            498536548, 1789927666, 4089016648, 2227061214, 450548861,
            1843258603, 4107580753, 2211677639, 325883990, 1684777152,
            4251122042, 2321926636, 335633487, 1661365465, 4195302755,
            2366115317, 997073096, 1281953886, 3579855332, 2724688242,
            1006888145, 1258607687, 3524101629, 2768942443, 901097722,
            1119000684, 3686517206, 2898065728, 853044451, 1172266101,
            3705015759, 2882616665, 651767980, 1373503546, 3369554304,
            3218104598, 565507253, 1454621731, 3485111705, 3099436303,
            671266974, 1594198024, 3322730930, 2970347812, 795835527,
            1483230225, 3244367275, 3060149565, 1994146192, 31158534,
            2563907772, 4023717930, 1907459465, 112637215, 2680153253,
            3904427059, 2013776290, 251722036, 2517215374, 3775830040,
            2137656763, 141376813, 2439277719, 3865271297, 1802195444,
            476864866, 2238001368, 4066508878, 1812370925, 453092731,
            2181625025, 4111451223, 1706088902, 314042704, 2344532202,
            4240017532, 1658658271, 366619977, 2362670323, 4224994405,
            1303535960, 984961486, 2747007092, 3569037538, 1256170817,
            1037604311, 2765210733, 3554079995, 1131014506, 879679996,
            2909243462, 3663771856, 1141124467, 855842277, 2852801631,
            3708648649, 1342533948, 654459306, 3188396048, 3373015174,
            1466479909, 544179635, 3110523913, 3462522015, 1591671054,
            702138776, 2966460450, 3352799412, 1504918807, 783551873,
            3082640443, 3233442989, 3988292384, 2596254646, 62317068,
            1957810842, 3939845945, 2647816111, 81470997, 1943803523,
            3814918930, 2489596804, 225274430, 2053790376, 3826175755,
            2466906013, 167816743, 2097651377, 4027552580, 2265490386,
            503444072, 1762050814, 4150417245, 2154129355, 426522225,
            1852507879, 4275313526, 2312317920, 282753626, 1742555852,
            4189708143, 2394877945, 397917763, 1622183637, 3604390888,
            2714866558, 953729732, 1340076626, 3518719985, 2797360999,
            1068828381, 1219638859, 3624741850, 2936675148, 906185462,
            1090812512, 3747672003, 2825379669, 829329135, 1181335161,
            3412177804, 3160834842, 628085408, 1382605366, 3423369109,
            3138078467, 570562233, 1426400815, 3317316542, 2998733608,
            733239954, 1555261956, 3268935591, 3050360625, 752459403,
            1541320221, 2607071920, 3965973030, 1969922972, 40735498,
            2617837225, 3943577151, 1913087877, 83908371, 2512341634,
            3803740692, 2075208622, 213261112, 2463272603, 3855990285,
            2094854071, 198958881, 2262029012, 4057260610, 1759359992,
            534414190, 2176718541, 4139329115, 1873836001, 414664567,
            2282248934, 4279200368, 1711684554, 285281116, 2405801727,
            4167216745, 1634467795, 376229701, 2685067896, 3608007406,
            1308918612, 956543938, 2808555105, 3495958263, 1231636301,
            1047427035, 2932959818, 3654703836, 1088359270, 936918e3,
            2847714899, 3736837829, 1202900863, 817233897, 3183342108,
            3401237130, 1404277552, 615818150, 3134207493, 3453421203,
            1423857449, 601450431, 3009837614, 3294710456, 1567103746,
            711928724, 3020668471, 3272380065, 1510334235, 755167117,
          ],
          s = -1,
          o = 0;
        e.length;
      }
      for (i = t; n > i; i++) (o = 255 & (s ^ e[i])), (s = (s >>> 8) ^ r[o]);
      return -1 ^ s;
    }
    var i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p = e[0].length,
      f = e[0][0].length,
      m = [
        137,
        80,
        78,
        71,
        13,
        10,
        26,
        10,
        0,
        0,
        0,
        13,
        73,
        72,
        68,
        82,
        (f >> 24) & 255,
        (f >> 16) & 255,
        (f >> 8) & 255,
        255 & f,
        (p >> 24) & 255,
        (p >> 16) & 255,
        (p >> 8) & 255,
        255 & p,
        8,
        2,
        0,
        0,
        0,
        -1,
        -2,
        -3,
        -4,
        -5,
        -6,
        -7,
        -8,
        73,
        68,
        65,
        84,
        8,
        29,
      ];
    for (
      d = n(m, 12, 29),
        m[29] = (d >> 24) & 255,
        m[30] = (d >> 16) & 255,
        m[31] = (d >> 8) & 255,
        m[32] = 255 & d,
        i = 1,
        r = 0,
        c = 0;
      p > c;
      c++
    ) {
      for (
        m.push(p - 1 > c ? 0 : 1),
          a = (3 * f + 1 + (0 === c)) & 255,
          l = ((3 * f + 1 + (0 === c)) >> 8) & 255,
          m.push(a),
          m.push(l),
          m.push(255 & ~a),
          m.push(255 & ~l),
          0 === c && m.push(0),
          u = 0;
        f > u;
        u++
      )
        for (s = 0; 3 > s; s++)
          (a = e[s][c][u]),
            (a = a > 255 ? 255 : 0 > a ? 0 : Math.round(a)),
            (i = (i + a) % 65521),
            (r = (r + i) % 65521),
            m.push(a);
      m.push(0);
    }
    return (
      (h = (r << 16) + i),
      m.push((h >> 24) & 255),
      m.push((h >> 16) & 255),
      m.push((h >> 8) & 255),
      m.push(255 & h),
      (o = m.length - 41),
      (m[33] = (o >> 24) & 255),
      (m[34] = (o >> 16) & 255),
      (m[35] = (o >> 8) & 255),
      (m[36] = 255 & o),
      (d = n(m, 37)),
      m.push((d >> 24) & 255),
      m.push((d >> 16) & 255),
      m.push((d >> 8) & 255),
      m.push(255 & d),
      m.push(0),
      m.push(0),
      m.push(0),
      m.push(0),
      m.push(73),
      m.push(69),
      m.push(78),
      m.push(68),
      m.push(174),
      m.push(66),
      m.push(96),
      m.push(130),
      "data:image/png;base64," + t(m)
    );
  }),
  (numeric._dim = function (e) {
    for (var t = []; "object" == typeof e; ) t.push(e.length), (e = e[0]);
    return t;
  }),
  (numeric.dim = function (e) {
    var t, n;
    return "object" == typeof e
      ? ((t = e[0]),
        "object" == typeof t
          ? ((n = t[0]),
            "object" == typeof n ? numeric._dim(e) : [e.length, t.length])
          : [e.length])
      : [];
  }),
  (numeric.mapreduce = function (e, t) {
    return Function(
      "x",
      "accum",
      "_s",
      "_k",
      'if(typeof accum === "undefined") accum = ' +
        t +
        ';\nif(typeof x === "number") { var xi = x; ' +
        e +
        '; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    ' +
        e +
        ";\n    xi = x[i-1];\n    " +
        e +
        ";\n}\nif(i === 0) {\n    xi = x[i];\n    " +
        e +
        "\n}\nreturn accum;"
    );
  }),
  (numeric.mapreduce2 = function (e, t) {
    return Function(
      "x",
      "var n = x.length;\nvar i,xi;\n" +
        t +
        ";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    " +
        e +
        ";\n}\nreturn accum;"
    );
  }),
  (numeric.same = function e(t, n) {
    var i, r;
    if (t instanceof Array && n instanceof Array) {
      if (((r = t.length), r !== n.length)) return !1;
      for (i = 0; r > i; i++)
        if (t[i] !== n[i]) {
          if ("object" != typeof t[i]) return !1;
          if (!e(t[i], n[i])) return !1;
        }
      return !0;
    }
    return !1;
  }),
  (numeric.rep = function (e, t, n) {
    "undefined" == typeof n && (n = 0);
    var i,
      r = e[n],
      s = Array(r);
    if (n === e.length - 1) {
      for (i = r - 2; i >= 0; i -= 2) (s[i + 1] = t), (s[i] = t);
      return -1 === i && (s[0] = t), s;
    }
    for (i = r - 1; i >= 0; i--) s[i] = numeric.rep(e, t, n + 1);
    return s;
  }),
  (numeric.dotMMsmall = function (e, t) {
    var n, i, r, s, o, a, l, c, u, h, d;
    for (
      s = e.length, o = t.length, a = t[0].length, l = Array(s), n = s - 1;
      n >= 0;
      n--
    ) {
      for (c = Array(a), u = e[n], r = a - 1; r >= 0; r--) {
        for (h = u[o - 1] * t[o - 1][r], i = o - 2; i >= 1; i -= 2)
          (d = i - 1), (h += u[i] * t[i][r] + u[d] * t[d][r]);
        0 === i && (h += u[0] * t[0][r]), (c[r] = h);
      }
      l[n] = c;
    }
    return l;
  }),
  (numeric._getCol = function (e, t, n) {
    var i,
      r = e.length;
    for (i = r - 1; i > 0; --i) (n[i] = e[i][t]), --i, (n[i] = e[i][t]);
    0 === i && (n[0] = e[0][t]);
  }),
  (numeric.dotMMbig = function (e, t) {
    var n,
      i,
      r,
      s,
      o = numeric._getCol,
      a = t.length,
      l = Array(a),
      c = e.length,
      u = t[0].length,
      h = new Array(c),
      d = numeric.dotVV;
    for (--a, --c, i = c; -1 !== i; --i) h[i] = Array(u);
    for (--u, i = u; -1 !== i; --i)
      for (o(t, i, l), r = c; -1 !== r; --r)
        (s = 0), (n = e[r]), (h[r][i] = d(n, l));
    return h;
  }),
  (numeric.dotMV = function (e, t) {
    var n,
      i = e.length,
      r = (t.length, Array(i)),
      s = numeric.dotVV;
    for (n = i - 1; n >= 0; n--) r[n] = s(e[n], t);
    return r;
  }),
  (numeric.dotVM = function (e, t) {
    var n, i, r, s, o, a, l;
    for (r = e.length, s = t[0].length, o = Array(s), i = s - 1; i >= 0; i--) {
      for (a = e[r - 1] * t[r - 1][i], n = r - 2; n >= 1; n -= 2)
        (l = n - 1), (a += e[n] * t[n][i] + e[l] * t[l][i]);
      0 === n && (a += e[0] * t[0][i]), (o[i] = a);
    }
    return o;
  }),
  (numeric.dotVV = function (e, t) {
    var n,
      i,
      r = e.length,
      s = e[r - 1] * t[r - 1];
    for (n = r - 2; n >= 1; n -= 2)
      (i = n - 1), (s += e[n] * t[n] + e[i] * t[i]);
    return 0 === n && (s += e[0] * t[0]), s;
  }),
  (numeric.dot = function (e, t) {
    var n = numeric.dim;
    switch (1e3 * n(e).length + n(t).length) {
      case 2002:
        return t.length < 10
          ? numeric.dotMMsmall(e, t)
          : numeric.dotMMbig(e, t);
      case 2001:
        return numeric.dotMV(e, t);
      case 1002:
        return numeric.dotVM(e, t);
      case 1001:
        return numeric.dotVV(e, t);
      case 1e3:
        return numeric.mulVS(e, t);
      case 1:
        return numeric.mulSV(e, t);
      case 0:
        return e * t;
      default:
        throw new Error("numeric.dot only works on vectors and matrices");
    }
  }),
  (numeric.diag = function (e) {
    var t,
      n,
      i,
      r,
      s = e.length,
      o = Array(s);
    for (t = s - 1; t >= 0; t--) {
      for (r = Array(s), n = t + 2, i = s - 1; i >= n; i -= 2)
        (r[i] = 0), (r[i - 1] = 0);
      for (i > t && (r[i] = 0), r[t] = e[t], i = t - 1; i >= 1; i -= 2)
        (r[i] = 0), (r[i - 1] = 0);
      0 === i && (r[0] = 0), (o[t] = r);
    }
    return o;
  }),
  (numeric.getDiag = function (e) {
    var t,
      n = Math.min(e.length, e[0].length),
      i = Array(n);
    for (t = n - 1; t >= 1; --t) (i[t] = e[t][t]), --t, (i[t] = e[t][t]);
    return 0 === t && (i[0] = e[0][0]), i;
  }),
  (numeric.identity = function (e) {
    return numeric.diag(numeric.rep([e], 1));
  }),
  (numeric.pointwise = function (e, t, n) {
    "undefined" == typeof n && (n = "");
    var i,
      r,
      s = [],
      o = /\[i\]$/,
      a = "",
      l = !1;
    for (i = 0; i < e.length; i++)
      o.test(e[i])
        ? ((r = e[i].substring(0, e[i].length - 3)), (a = r))
        : (r = e[i]),
        "ret" === r && (l = !0),
        s.push(r);
    return (
      (s[e.length] = "_s"),
      (s[e.length + 1] = "_k"),
      (s[e.length + 2] =
        'if(typeof _s === "undefined") _s = numeric.dim(' +
        a +
        ');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i' +
        (l ? "" : ", ret = Array(_n)") +
        ";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee(" +
        e.join(",") +
        ",_s,_k+1);\n    return ret;\n}\n" +
        n +
        "\nfor(i=_n-1;i!==-1;--i) {\n    " +
        t +
        "\n}\nreturn ret;"),
      Function.apply(null, s)
    );
  }),
  (numeric.pointwise2 = function (e, t, n) {
    "undefined" == typeof n && (n = "");
    var i,
      r,
      s = [],
      o = /\[i\]$/,
      a = "",
      l = !1;
    for (i = 0; i < e.length; i++)
      o.test(e[i])
        ? ((r = e[i].substring(0, e[i].length - 3)), (a = r))
        : (r = e[i]),
        "ret" === r && (l = !0),
        s.push(r);
    return (
      (s[e.length] =
        "var _n = " +
        a +
        ".length;\nvar i" +
        (l ? "" : ", ret = Array(_n)") +
        ";\n" +
        n +
        "\nfor(i=_n-1;i!==-1;--i) {\n" +
        t +
        "\n}\nreturn ret;"),
      Function.apply(null, s)
    );
  }),
  (numeric._biforeach = function t(e, n, i, r, s) {
    if (r === i.length - 1) return void s(e, n);
    var o,
      a = i[r];
    for (o = a - 1; o >= 0; o--)
      t(
        "object" == typeof e ? e[o] : e,
        "object" == typeof n ? n[o] : n,
        i,
        r + 1,
        s
      );
  }),
  (numeric._biforeach2 = function n(e, t, i, r, s) {
    if (r === i.length - 1) return s(e, t);
    var o,
      a = i[r],
      l = Array(a);
    for (o = a - 1; o >= 0; --o)
      l[o] = n(
        "object" == typeof e ? e[o] : e,
        "object" == typeof t ? t[o] : t,
        i,
        r + 1,
        s
      );
    return l;
  }),
  (numeric._foreach = function r(e, t, n, i) {
    if (n === t.length - 1) return void i(e);
    var s,
      o = t[n];
    for (s = o - 1; s >= 0; s--) r(e[s], t, n + 1, i);
  }),
  (numeric._foreach2 = function s(e, t, n, i) {
    if (n === t.length - 1) return i(e);
    var r,
      o = t[n],
      a = Array(o);
    for (r = o - 1; r >= 0; r--) a[r] = s(e[r], t, n + 1, i);
    return a;
  }),
  (numeric.ops2 = {
    add: "+",
    sub: "-",
    mul: "*",
    div: "/",
    mod: "%",
    and: "&&",
    or: "||",
    eq: "===",
    neq: "!==",
    lt: "<",
    gt: ">",
    leq: "<=",
    geq: ">=",
    band: "&",
    bor: "|",
    bxor: "^",
    lshift: "<<",
    rshift: ">>",
    rrshift: ">>>",
  }),
  (numeric.opseq = {
    addeq: "+=",
    subeq: "-=",
    muleq: "*=",
    diveq: "/=",
    modeq: "%=",
    lshifteq: "<<=",
    rshifteq: ">>=",
    rrshifteq: ">>>=",
    bandeq: "&=",
    boreq: "|=",
    bxoreq: "^=",
  }),
  (numeric.mathfuns = [
    "abs",
    "acos",
    "asin",
    "atan",
    "ceil",
    "cos",
    "exp",
    "floor",
    "log",
    "round",
    "sin",
    "sqrt",
    "tan",
    "isNaN",
    "isFinite",
  ]),
  (numeric.mathfuns2 = ["atan2", "pow", "max", "min"]),
  (numeric.ops1 = { neg: "-", not: "!", bnot: "~", clone: "" }),
  (numeric.mapreducers = {
    any: ["if(xi) return true;", "var accum = false;"],
    all: ["if(!xi) return false;", "var accum = true;"],
    sum: ["accum += xi;", "var accum = 0;"],
    prod: ["accum *= xi;", "var accum = 1;"],
    norm2Squared: ["accum += xi*xi;", "var accum = 0;"],
    norminf: [
      "accum = max(accum,abs(xi));",
      "var accum = 0, max = Math.max, abs = Math.abs;",
    ],
    norm1: ["accum += abs(xi)", "var accum = 0, abs = Math.abs;"],
    sup: ["accum = max(accum,xi);", "var accum = -Infinity, max = Math.max;"],
    inf: ["accum = min(accum,xi);", "var accum = Infinity, min = Math.min;"],
  }),
  (function () {
    var e, t;
    for (e = 0; e < numeric.mathfuns2.length; ++e)
      (t = numeric.mathfuns2[e]), (numeric.ops2[t] = t);
    for (e in numeric.ops2)
      if (numeric.ops2.hasOwnProperty(e)) {
        t = numeric.ops2[e];
        var n,
          i,
          r = "";
        -1 !== numeric.myIndexOf.call(numeric.mathfuns2, e)
          ? ((r = "var " + t + " = Math." + t + ";\n"),
            (n = function (e, n, i) {
              return e + " = " + t + "(" + n + "," + i + ")";
            }),
            (i = function (e, n) {
              return e + " = " + t + "(" + e + "," + n + ")";
            }))
          : ((n = function (e, n, i) {
              return e + " = " + n + " " + t + " " + i;
            }),
            (i = numeric.opseq.hasOwnProperty(e + "eq")
              ? function (e, n) {
                  return e + " " + t + "= " + n;
                }
              : function (e, n) {
                  return e + " = " + e + " " + t + " " + n;
                })),
          (numeric[e + "VV"] = numeric.pointwise2(
            ["x[i]", "y[i]"],
            n("ret[i]", "x[i]", "y[i]"),
            r
          )),
          (numeric[e + "SV"] = numeric.pointwise2(
            ["x", "y[i]"],
            n("ret[i]", "x", "y[i]"),
            r
          )),
          (numeric[e + "VS"] = numeric.pointwise2(
            ["x[i]", "y"],
            n("ret[i]", "x[i]", "y"),
            r
          )),
          (numeric[e] = Function(
            "var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric." +
              e +
              "VV, VS = numeric." +
              e +
              "VS, SV = numeric." +
              e +
              'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else ' +
              i("x", "y") +
              "\n}\nreturn x;\n"
          )),
          (numeric[t] = numeric[e]),
          (numeric[e + "eqV"] = numeric.pointwise2(
            ["ret[i]", "x[i]"],
            i("ret[i]", "x[i]"),
            r
          )),
          (numeric[e + "eqS"] = numeric.pointwise2(
            ["ret[i]", "x"],
            i("ret[i]", "x"),
            r
          )),
          (numeric[e + "eq"] = Function(
            "var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric." +
              e +
              "eqV, S = numeric." +
              e +
              'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n'
          ));
      }
    for (e = 0; e < numeric.mathfuns2.length; ++e)
      (t = numeric.mathfuns2[e]), delete numeric.ops2[t];
    for (e = 0; e < numeric.mathfuns.length; ++e)
      (t = numeric.mathfuns[e]), (numeric.ops1[t] = t);
    for (e in numeric.ops1)
      numeric.ops1.hasOwnProperty(e) &&
        ((r = ""),
        (t = numeric.ops1[e]),
        -1 !== numeric.myIndexOf.call(numeric.mathfuns, e) &&
          Math.hasOwnProperty(t) &&
          (r = "var " + t + " = Math." + t + ";\n"),
        (numeric[e + "eqV"] = numeric.pointwise2(
          ["ret[i]"],
          "ret[i] = " + t + "(ret[i]);",
          r
        )),
        (numeric[e + "eq"] = Function(
          "x",
          'if(typeof x !== "object") return ' +
            t +
            "x\nvar i;\nvar V = numeric." +
            e +
            "eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"
        )),
        (numeric[e + "V"] = numeric.pointwise2(
          ["x[i]"],
          "ret[i] = " + t + "(x[i]);",
          r
        )),
        (numeric[e] = Function(
          "x",
          'if(typeof x !== "object") return ' +
            t +
            "(x)\nvar i;\nvar V = numeric." +
            e +
            "V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"
        )));
    for (e = 0; e < numeric.mathfuns.length; ++e)
      (t = numeric.mathfuns[e]), delete numeric.ops1[t];
    for (e in numeric.mapreducers)
      numeric.mapreducers.hasOwnProperty(e) &&
        ((t = numeric.mapreducers[e]),
        (numeric[e + "V"] = numeric.mapreduce2(t[0], t[1])),
        (numeric[e] = Function(
          "x",
          "s",
          "k",
          t[1] +
            'if(typeof x !== "object") {    xi = x;\n' +
            t[0] +
            ';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.' +
            e +
            "V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n" +
            t[0] +
            ";\n}\nreturn accum;\n"
        )));
  })(),
  (numeric.truncVV = numeric.pointwise(
    ["x[i]", "y[i]"],
    "ret[i] = round(x[i]/y[i])*y[i];",
    "var round = Math.round;"
  )),
  (numeric.truncVS = numeric.pointwise(
    ["x[i]", "y"],
    "ret[i] = round(x[i]/y)*y;",
    "var round = Math.round;"
  )),
  (numeric.truncSV = numeric.pointwise(
    ["x", "y[i]"],
    "ret[i] = round(x/y[i])*y[i];",
    "var round = Math.round;"
  )),
  (numeric.trunc = function (e, t) {
    return "object" == typeof e
      ? "object" == typeof t
        ? numeric.truncVV(e, t)
        : numeric.truncVS(e, t)
      : "object" == typeof t
      ? numeric.truncSV(e, t)
      : Math.round(e / t) * t;
  }),
  (numeric.inv = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o,
      a,
      e,
      l = numeric.dim(e),
      c = Math.abs,
      u = l[0],
      h = l[1],
      d = numeric.clone(e),
      p = numeric.identity(u);
    for (o = 0; h > o; ++o) {
      var f = -1,
        m = -1;
      for (s = o; s !== u; ++s) (a = c(d[s][o])), a > m && ((f = s), (m = a));
      for (
        n = d[f],
          d[f] = d[o],
          d[o] = n,
          r = p[f],
          p[f] = p[o],
          p[o] = r,
          e = n[o],
          a = o;
        a !== h;
        ++a
      )
        n[a] /= e;
      for (a = h - 1; -1 !== a; --a) r[a] /= e;
      for (s = u - 1; -1 !== s; --s)
        if (s !== o) {
          for (t = d[s], i = p[s], e = t[o], a = o + 1; a !== h; ++a)
            t[a] -= n[a] * e;
          for (a = h - 1; a > 0; --a)
            (i[a] -= r[a] * e), --a, (i[a] -= r[a] * e);
          0 === a && (i[0] -= r[0] * e);
        }
    }
    return p;
  }),
  (numeric.det = function (e) {
    var t = numeric.dim(e);
    if (2 !== t.length || t[0] !== t[1])
      throw new Error("numeric: det() only works on square matrices");
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u = t[0],
      h = 1,
      d = numeric.clone(e);
    for (i = 0; u - 1 > i; i++) {
      for (r = i, n = i + 1; u > n; n++)
        Math.abs(d[n][i]) > Math.abs(d[r][i]) && (r = n);
      for (
        r !== i && ((l = d[r]), (d[r] = d[i]), (d[i] = l), (h *= -1)),
          s = d[i],
          n = i + 1;
        u > n;
        n++
      ) {
        for (o = d[n], a = o[i] / s[i], r = i + 1; u - 1 > r; r += 2)
          (c = r + 1), (o[r] -= s[r] * a), (o[c] -= s[c] * a);
        r !== u && (o[r] -= s[r] * a);
      }
      if (0 === s[i]) return 0;
      h *= s[i];
    }
    return h * d[i][i];
  }),
  (numeric.transpose = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o = e.length,
      a = e[0].length,
      l = Array(a);
    for (n = 0; a > n; n++) l[n] = Array(o);
    for (t = o - 1; t >= 1; t -= 2) {
      for (r = e[t], i = e[t - 1], n = a - 1; n >= 1; --n)
        (s = l[n]),
          (s[t] = r[n]),
          (s[t - 1] = i[n]),
          --n,
          (s = l[n]),
          (s[t] = r[n]),
          (s[t - 1] = i[n]);
      0 === n && ((s = l[0]), (s[t] = r[0]), (s[t - 1] = i[0]));
    }
    if (0 === t) {
      for (i = e[0], n = a - 1; n >= 1; --n)
        (l[n][0] = i[n]), --n, (l[n][0] = i[n]);
      0 === n && (l[0][0] = i[0]);
    }
    return l;
  }),
  (numeric.negtranspose = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o = e.length,
      a = e[0].length,
      l = Array(a);
    for (n = 0; a > n; n++) l[n] = Array(o);
    for (t = o - 1; t >= 1; t -= 2) {
      for (r = e[t], i = e[t - 1], n = a - 1; n >= 1; --n)
        (s = l[n]),
          (s[t] = -r[n]),
          (s[t - 1] = -i[n]),
          --n,
          (s = l[n]),
          (s[t] = -r[n]),
          (s[t - 1] = -i[n]);
      0 === n && ((s = l[0]), (s[t] = -r[0]), (s[t - 1] = -i[0]));
    }
    if (0 === t) {
      for (i = e[0], n = a - 1; n >= 1; --n)
        (l[n][0] = -i[n]), --n, (l[n][0] = -i[n]);
      0 === n && (l[0][0] = -i[0]);
    }
    return l;
  }),
  (numeric._random = function o(e, t) {
    var n,
      i,
      r = e[t],
      s = Array(r);
    if (t === e.length - 1) {
      for (i = Math.random, n = r - 1; n >= 1; n -= 2)
        (s[n] = i()), (s[n - 1] = i());
      return 0 === n && (s[0] = i()), s;
    }
    for (n = r - 1; n >= 0; n--) s[n] = o(e, t + 1);
    return s;
  }),
  (numeric.random = function (e) {
    return numeric._random(e, 0);
  }),
  (numeric.norm2 = function (e) {
    return Math.sqrt(numeric.norm2Squared(e));
  }),
  (numeric.linspace = function (e, t, n) {
    if (
      ("undefined" == typeof n && (n = Math.max(Math.round(t - e) + 1, 1)),
      2 > n)
    )
      return 1 === n ? [e] : [];
    var i,
      r = Array(n);
    for (n--, i = n; i >= 0; i--) r[i] = (i * t + (n - i) * e) / n;
    return r;
  }),
  (numeric.getBlock = function (e, t, n) {
    function i(e, s) {
      var o,
        a = t[s],
        l = n[s] - a,
        c = Array(l);
      if (s === r.length - 1) {
        for (o = l; o >= 0; o--) c[o] = e[o + a];
        return c;
      }
      for (o = l; o >= 0; o--) c[o] = i(e[o + a], s + 1);
      return c;
    }
    var r = numeric.dim(e);
    return i(e, 0);
  }),
  (numeric.setBlock = function (e, t, n, i) {
    function r(e, i, o) {
      var a,
        l = t[o],
        c = n[o] - l;
      if (o === s.length - 1) for (a = c; a >= 0; a--) e[a + l] = i[a];
      for (a = c; a >= 0; a--) r(e[a + l], i[a], o + 1);
    }
    var s = numeric.dim(e);
    return r(e, i, 0), e;
  }),
  (numeric.getRange = function (e, t, n) {
    var i,
      r,
      s,
      o,
      a = t.length,
      l = n.length,
      c = Array(a);
    for (i = a - 1; -1 !== i; --i)
      for (c[i] = Array(l), s = c[i], o = e[t[i]], r = l - 1; -1 !== r; --r)
        s[r] = o[n[r]];
    return c;
  }),
  (numeric.blockMatrix = function (e) {
    var t = numeric.dim(e);
    if (t.length < 4) return numeric.blockMatrix([e]);
    var n,
      i,
      r,
      s,
      o,
      a = t[0],
      l = t[1];
    for (n = 0, i = 0, r = 0; a > r; ++r) n += e[r][0].length;
    for (s = 0; l > s; ++s) i += e[0][s][0].length;
    var c = Array(n);
    for (r = 0; n > r; ++r) c[r] = Array(i);
    var u,
      h,
      d,
      p,
      f,
      m = 0;
    for (r = 0; a > r; ++r) {
      for (u = i, s = l - 1; -1 !== s; --s)
        for (o = e[r][s], u -= o[0].length, d = o.length - 1; -1 !== d; --d)
          for (f = o[d], h = c[m + d], p = f.length - 1; -1 !== p; --p)
            h[u + p] = f[p];
      m += e[r][0].length;
    }
    return c;
  }),
  (numeric.tensor = function (e, t) {
    if ("number" == typeof e || "number" == typeof t) return numeric.mul(e, t);
    var n = numeric.dim(e),
      i = numeric.dim(t);
    if (1 !== n.length || 1 !== i.length)
      throw new Error("numeric: tensor product is only defined for vectors");
    var r,
      s,
      o,
      a,
      l = n[0],
      c = i[0],
      u = Array(l);
    for (s = l - 1; s >= 0; s--) {
      for (r = Array(c), a = e[s], o = c - 1; o >= 3; --o)
        (r[o] = a * t[o]),
          --o,
          (r[o] = a * t[o]),
          --o,
          (r[o] = a * t[o]),
          --o,
          (r[o] = a * t[o]);
      for (; o >= 0; ) (r[o] = a * t[o]), --o;
      u[s] = r;
    }
    return u;
  }),
  (numeric.T = function (e, t) {
    (this.x = e), (this.y = t);
  }),
  (numeric.t = function (e, t) {
    return new numeric.T(e, t);
  }),
  (numeric.Tbinop = function (e, t, n, i, r) {
    numeric.indexOf;
    if ("string" != typeof r) {
      var s;
      r = "";
      for (s in numeric)
        numeric.hasOwnProperty(s) &&
          (e.indexOf(s) >= 0 ||
            t.indexOf(s) >= 0 ||
            n.indexOf(s) >= 0 ||
            i.indexOf(s) >= 0) &&
          s.length > 1 &&
          (r += "var " + s + " = numeric." + s + ";\n");
    }
    return Function(
      ["y"],
      "var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n" +
        r +
        "\nif(x.y) {  if(y.y) {    return new numeric.T(" +
        i +
        ");\n  }\n  return new numeric.T(" +
        n +
        ");\n}\nif(y.y) {\n  return new numeric.T(" +
        t +
        ");\n}\nreturn new numeric.T(" +
        e +
        ");\n"
    );
  }),
  (numeric.T.prototype.add = numeric.Tbinop(
    "add(x.x,y.x)",
    "add(x.x,y.x),y.y",
    "add(x.x,y.x),x.y",
    "add(x.x,y.x),add(x.y,y.y)"
  )),
  (numeric.T.prototype.sub = numeric.Tbinop(
    "sub(x.x,y.x)",
    "sub(x.x,y.x),neg(y.y)",
    "sub(x.x,y.x),x.y",
    "sub(x.x,y.x),sub(x.y,y.y)"
  )),
  (numeric.T.prototype.mul = numeric.Tbinop(
    "mul(x.x,y.x)",
    "mul(x.x,y.x),mul(x.x,y.y)",
    "mul(x.x,y.x),mul(x.y,y.x)",
    "sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"
  )),
  (numeric.T.prototype.reciprocal = function () {
    var e = numeric.mul,
      t = numeric.div;
    if (this.y) {
      var n = numeric.add(e(this.x, this.x), e(this.y, this.y));
      return new numeric.T(t(this.x, n), t(numeric.neg(this.y), n));
    }
    return new T(t(1, this.x));
  }),
  (numeric.T.prototype.div = function a(e) {
    if ((e instanceof numeric.T || (e = new numeric.T(e)), e.y))
      return this.mul(e.reciprocal());
    var a = numeric.div;
    return this.y
      ? new numeric.T(a(this.x, e.x), a(this.y, e.x))
      : new numeric.T(a(this.x, e.x));
  }),
  (numeric.T.prototype.dot = numeric.Tbinop(
    "dot(x.x,y.x)",
    "dot(x.x,y.x),dot(x.x,y.y)",
    "dot(x.x,y.x),dot(x.y,y.x)",
    "sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"
  )),
  (numeric.T.prototype.transpose = function () {
    var e = numeric.transpose,
      t = this.x,
      n = this.y;
    return n ? new numeric.T(e(t), e(n)) : new numeric.T(e(t));
  }),
  (numeric.T.prototype.transjugate = function () {
    var e = numeric.transpose,
      t = this.x,
      n = this.y;
    return n
      ? new numeric.T(e(t), numeric.negtranspose(n))
      : new numeric.T(e(t));
  }),
  (numeric.Tunop = function (e, t, n) {
    return (
      "string" != typeof n && (n = ""),
      Function(
        "var x = this;\n" + n + "\nif(x.y) {  " + t + ";\n}\n" + e + ";\n"
      )
    );
  }),
  (numeric.T.prototype.exp = numeric.Tunop(
    "return new numeric.T(ex)",
    "return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))",
    "var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"
  )),
  (numeric.T.prototype.conj = numeric.Tunop(
    "return new numeric.T(x.x);",
    "return new numeric.T(x.x,numeric.neg(x.y));"
  )),
  (numeric.T.prototype.neg = numeric.Tunop(
    "return new numeric.T(neg(x.x));",
    "return new numeric.T(neg(x.x),neg(x.y));",
    "var neg = numeric.neg;"
  )),
  (numeric.T.prototype.sin = numeric.Tunop(
    "return new numeric.T(numeric.sin(x.x))",
    "return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"
  )),
  (numeric.T.prototype.cos = numeric.Tunop(
    "return new numeric.T(numeric.cos(x.x))",
    "return x.exp().add(x.neg().exp()).div(2);"
  )),
  (numeric.T.prototype.abs = numeric.Tunop(
    "return new numeric.T(numeric.abs(x.x));",
    "return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));",
    "var mul = numeric.mul;"
  )),
  (numeric.T.prototype.log = numeric.Tunop(
    "return new numeric.T(numeric.log(x.x));",
    "var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"
  )),
  (numeric.T.prototype.norm2 = numeric.Tunop(
    "return numeric.norm2(x.x);",
    "var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"
  )),
  (numeric.T.prototype.inv = function () {
    var e = this;
    if ("undefined" == typeof e.y) return new numeric.T(numeric.inv(e.x));
    var t,
      n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      t,
      n,
      i,
      d,
      p,
      f,
      m,
      g,
      v,
      _,
      y = e.x.length,
      b = numeric.identity(y),
      w = numeric.rep([y, y], 0),
      x = numeric.clone(e.x),
      C = numeric.clone(e.y);
    for (t = 0; y > t; t++) {
      for (
        f = x[t][t], m = C[t][t], d = f * f + m * m, i = t, n = t + 1;
        y > n;
        n++
      )
        (f = x[n][t]),
          (m = C[n][t]),
          (p = f * f + m * m),
          p > d && ((i = n), (d = p));
      for (
        i !== t &&
          ((_ = x[t]),
          (x[t] = x[i]),
          (x[i] = _),
          (_ = C[t]),
          (C[t] = C[i]),
          (C[i] = _),
          (_ = b[t]),
          (b[t] = b[i]),
          (b[i] = _),
          (_ = w[t]),
          (w[t] = w[i]),
          (w[i] = _)),
          r = x[t],
          s = C[t],
          l = b[t],
          c = w[t],
          f = r[t],
          m = s[t],
          n = t + 1;
        y > n;
        n++
      )
        (g = r[n]),
          (v = s[n]),
          (r[n] = (g * f + v * m) / d),
          (s[n] = (v * f - g * m) / d);
      for (n = 0; y > n; n++)
        (g = l[n]),
          (v = c[n]),
          (l[n] = (g * f + v * m) / d),
          (c[n] = (v * f - g * m) / d);
      for (n = t + 1; y > n; n++) {
        for (
          o = x[n], a = C[n], u = b[n], h = w[n], f = o[t], m = a[t], i = t + 1;
          y > i;
          i++
        )
          (g = r[i]),
            (v = s[i]),
            (o[i] -= g * f - v * m),
            (a[i] -= v * f + g * m);
        for (i = 0; y > i; i++)
          (g = l[i]),
            (v = c[i]),
            (u[i] -= g * f - v * m),
            (h[i] -= v * f + g * m);
      }
    }
    for (t = y - 1; t > 0; t--)
      for (l = b[t], c = w[t], n = t - 1; n >= 0; n--)
        for (
          u = b[n], h = w[n], f = x[n][t], m = C[n][t], i = y - 1;
          i >= 0;
          i--
        )
          (g = l[i]),
            (v = c[i]),
            (u[i] -= f * g - m * v),
            (h[i] -= f * v + m * g);
    return new numeric.T(b, w);
  }),
  (numeric.T.prototype.get = function (e) {
    var t,
      n = this.x,
      i = this.y,
      r = 0,
      s = e.length;
    if (i) {
      for (; s > r; ) (t = e[r]), (n = n[t]), (i = i[t]), r++;
      return new numeric.T(n, i);
    }
    for (; s > r; ) (t = e[r]), (n = n[t]), r++;
    return new numeric.T(n);
  }),
  (numeric.T.prototype.set = function (e, t) {
    var n,
      i = this.x,
      r = this.y,
      s = 0,
      o = e.length,
      a = t.x,
      l = t.y;
    if (0 === o)
      return l ? (this.y = l) : r && (this.y = void 0), (this.x = i), this;
    if (l) {
      for (
        r || ((r = numeric.rep(numeric.dim(i), 0)), (this.y = r));
        o - 1 > s;

      )
        (n = e[s]), (i = i[n]), (r = r[n]), s++;
      return (n = e[s]), (i[n] = a), (r[n] = l), this;
    }
    if (r) {
      for (; o - 1 > s; ) (n = e[s]), (i = i[n]), (r = r[n]), s++;
      return (
        (n = e[s]),
        (i[n] = a),
        (r[n] = a instanceof Array ? numeric.rep(numeric.dim(a), 0) : 0),
        this
      );
    }
    for (; o - 1 > s; ) (n = e[s]), (i = i[n]), s++;
    return (n = e[s]), (i[n] = a), this;
  }),
  (numeric.T.prototype.getRows = function (e, t) {
    var n,
      i,
      r = t - e + 1,
      s = Array(r),
      o = this.x,
      a = this.y;
    for (n = e; t >= n; n++) s[n - e] = o[n];
    if (a) {
      for (i = Array(r), n = e; t >= n; n++) i[n - e] = a[n];
      return new numeric.T(s, i);
    }
    return new numeric.T(s);
  }),
  (numeric.T.prototype.setRows = function (e, t, n) {
    var i,
      r = this.x,
      s = this.y,
      o = n.x,
      a = n.y;
    for (i = e; t >= i; i++) r[i] = o[i - e];
    if (a)
      for (
        s || ((s = numeric.rep(numeric.dim(r), 0)), (this.y = s)), i = e;
        t >= i;
        i++
      )
        s[i] = a[i - e];
    else if (s)
      for (i = e; t >= i; i++) s[i] = numeric.rep([o[i - e].length], 0);
    return this;
  }),
  (numeric.T.prototype.getRow = function (e) {
    var t = this.x,
      n = this.y;
    return n ? new numeric.T(t[e], n[e]) : new numeric.T(t[e]);
  }),
  (numeric.T.prototype.setRow = function (e, t) {
    var n = this.x,
      i = this.y,
      r = t.x,
      s = t.y;
    return (
      (n[e] = r),
      s
        ? (i || ((i = numeric.rep(numeric.dim(n), 0)), (this.y = i)),
          (i[e] = s))
        : i && (i = numeric.rep([r.length], 0)),
      this
    );
  }),
  (numeric.T.prototype.getBlock = function (e, t) {
    var n = this.x,
      i = this.y,
      r = numeric.getBlock;
    return i
      ? new numeric.T(r(n, e, t), r(i, e, t))
      : new numeric.T(r(n, e, t));
  }),
  (numeric.T.prototype.setBlock = function (e, t, n) {
    n instanceof numeric.T || (n = new numeric.T(n));
    var i = this.x,
      r = this.y,
      s = numeric.setBlock,
      o = n.x,
      a = n.y;
    return a
      ? (r || ((this.y = numeric.rep(numeric.dim(this), 0)), (r = this.y)),
        s(i, e, t, o),
        s(r, e, t, a),
        this)
      : (s(i, e, t, o), void (r && s(r, e, t, numeric.rep(numeric.dim(o), 0))));
  }),
  (numeric.T.rep = function (e, t) {
    var n = numeric.T;
    t instanceof n || (t = new n(t));
    var i = t.x,
      r = t.y,
      s = numeric.rep;
    return r ? new n(s(e, i), s(e, r)) : new n(s(e, i));
  }),
  (numeric.T.diag = function l(e) {
    e instanceof numeric.T || (e = new numeric.T(e));
    var t = e.x,
      n = e.y,
      l = numeric.diag;
    return n ? new numeric.T(l(t), l(n)) : new numeric.T(l(t));
  }),
  (numeric.T.eig = function () {
    if (this.y) throw new Error("eig: not implemented for complex matrices.");
    return numeric.eig(this.x);
  }),
  (numeric.T.identity = function (e) {
    return new numeric.T(numeric.identity(e));
  }),
  (numeric.T.prototype.getDiag = function () {
    var e = numeric,
      t = this.x,
      n = this.y;
    return n ? new e.T(e.getDiag(t), e.getDiag(n)) : new e.T(e.getDiag(t));
  }),
  (numeric.house = function (e) {
    var t = numeric.clone(e),
      n = e[0] >= 0 ? 1 : -1,
      i = n * numeric.norm2(e);
    t[0] += i;
    var r = numeric.norm2(t);
    if (0 === r) throw new Error("eig: internal error");
    return numeric.div(t, r);
  }),
  (numeric.toUpperHessenberg = function (e) {
    var t = numeric.dim(e);
    if (2 !== t.length || t[0] !== t[1])
      throw new Error(
        "numeric: toUpperHessenberg() only works on square matrices"
      );
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d = t[0],
      p = numeric.clone(e),
      f = numeric.identity(d);
    for (i = 0; d - 2 > i; i++) {
      for (s = Array(d - i - 1), n = i + 1; d > n; n++) s[n - i - 1] = p[n][i];
      if (numeric.norm2(s) > 0) {
        for (
          o = numeric.house(s),
            a = numeric.getBlock(p, [i + 1, i], [d - 1, d - 1]),
            l = numeric.tensor(o, numeric.dot(o, a)),
            n = i + 1;
          d > n;
          n++
        )
          for (c = p[n], u = l[n - i - 1], r = i; d > r; r++)
            c[r] -= 2 * u[r - i];
        for (
          a = numeric.getBlock(p, [0, i + 1], [d - 1, d - 1]),
            l = numeric.tensor(numeric.dot(a, o), o),
            n = 0;
          d > n;
          n++
        )
          for (c = p[n], u = l[n], r = i + 1; d > r; r++)
            c[r] -= 2 * u[r - i - 1];
        for (a = Array(d - i - 1), n = i + 1; d > n; n++) a[n - i - 1] = f[n];
        for (l = numeric.tensor(o, numeric.dot(o, a)), n = i + 1; d > n; n++)
          for (h = f[n], u = l[n - i - 1], r = 0; d > r; r++) h[r] -= 2 * u[r];
      }
    }
    return { H: p, Q: f };
  }),
  (numeric.epsilon = 2.220446049250313e-16),
  (numeric.QRFrancis = function (e, t) {
    "undefined" == typeof t && (t = 1e4), (e = numeric.clone(e));
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g,
      v,
      _,
      y,
      b = (numeric.clone(e), numeric.dim(e)),
      w = b[0],
      x = numeric.identity(w);
    if (3 > w) return { Q: x, B: [[0, w - 1]] };
    var C = numeric.epsilon;
    for (y = 0; t > y; y++) {
      for (v = 0; w - 1 > v; v++)
        if (
          Math.abs(e[v + 1][v]) <
          C * (Math.abs(e[v][v]) + Math.abs(e[v + 1][v + 1]))
        ) {
          var T = numeric.QRFrancis(numeric.getBlock(e, [0, 0], [v, v]), t),
            S = numeric.QRFrancis(
              numeric.getBlock(e, [v + 1, v + 1], [w - 1, w - 1]),
              t
            );
          for (p = Array(v + 1), g = 0; v >= g; g++) p[g] = x[g];
          for (f = numeric.dot(T.Q, p), g = 0; v >= g; g++) x[g] = f[g];
          for (p = Array(w - v - 1), g = v + 1; w > g; g++) p[g - v - 1] = x[g];
          for (f = numeric.dot(S.Q, p), g = v + 1; w > g; g++)
            x[g] = f[g - v - 1];
          return { Q: x, B: T.B.concat(numeric.add(S.B, v + 1)) };
        }
      if (
        ((r = e[w - 2][w - 2]),
        (s = e[w - 2][w - 1]),
        (o = e[w - 1][w - 2]),
        (a = e[w - 1][w - 1]),
        (c = r + a),
        (l = r * a - s * o),
        (u = numeric.getBlock(e, [0, 0], [2, 2])),
        c * c >= 4 * l)
      ) {
        var E, k;
        (E = 0.5 * (c + Math.sqrt(c * c - 4 * l))),
          (k = 0.5 * (c - Math.sqrt(c * c - 4 * l))),
          (u = numeric.add(
            numeric.sub(numeric.dot(u, u), numeric.mul(u, E + k)),
            numeric.diag(numeric.rep([3], E * k))
          ));
      } else
        u = numeric.add(
          numeric.sub(numeric.dot(u, u), numeric.mul(u, c)),
          numeric.diag(numeric.rep([3], l))
        );
      for (
        n = [u[0][0], u[1][0], u[2][0]],
          i = numeric.house(n),
          p = [e[0], e[1], e[2]],
          f = numeric.tensor(i, numeric.dot(i, p)),
          g = 0;
        3 > g;
        g++
      )
        for (d = e[g], m = f[g], _ = 0; w > _; _++) d[_] -= 2 * m[_];
      for (
        p = numeric.getBlock(e, [0, 0], [w - 1, 2]),
          f = numeric.tensor(numeric.dot(p, i), i),
          g = 0;
        w > g;
        g++
      )
        for (d = e[g], m = f[g], _ = 0; 3 > _; _++) d[_] -= 2 * m[_];
      for (
        p = [x[0], x[1], x[2]], f = numeric.tensor(i, numeric.dot(i, p)), g = 0;
        3 > g;
        g++
      )
        for (h = x[g], m = f[g], _ = 0; w > _; _++) h[_] -= 2 * m[_];
      var P;
      for (v = 0; w - 2 > v; v++) {
        for (_ = v; v + 1 >= _; _++)
          if (
            Math.abs(e[_ + 1][_]) <
            C * (Math.abs(e[_][_]) + Math.abs(e[_ + 1][_ + 1]))
          ) {
            var T = numeric.QRFrancis(numeric.getBlock(e, [0, 0], [_, _]), t),
              S = numeric.QRFrancis(
                numeric.getBlock(e, [_ + 1, _ + 1], [w - 1, w - 1]),
                t
              );
            for (p = Array(_ + 1), g = 0; _ >= g; g++) p[g] = x[g];
            for (f = numeric.dot(T.Q, p), g = 0; _ >= g; g++) x[g] = f[g];
            for (p = Array(w - _ - 1), g = _ + 1; w > g; g++)
              p[g - _ - 1] = x[g];
            for (f = numeric.dot(S.Q, p), g = _ + 1; w > g; g++)
              x[g] = f[g - _ - 1];
            return { Q: x, B: T.B.concat(numeric.add(S.B, _ + 1)) };
          }
        for (
          P = Math.min(w - 1, v + 3), n = Array(P - v), g = v + 1;
          P >= g;
          g++
        )
          n[g - v - 1] = e[g][v];
        for (
          i = numeric.house(n),
            p = numeric.getBlock(e, [v + 1, v], [P, w - 1]),
            f = numeric.tensor(i, numeric.dot(i, p)),
            g = v + 1;
          P >= g;
          g++
        )
          for (d = e[g], m = f[g - v - 1], _ = v; w > _; _++)
            d[_] -= 2 * m[_ - v];
        for (
          p = numeric.getBlock(e, [0, v + 1], [w - 1, P]),
            f = numeric.tensor(numeric.dot(p, i), i),
            g = 0;
          w > g;
          g++
        )
          for (d = e[g], m = f[g], _ = v + 1; P >= _; _++)
            d[_] -= 2 * m[_ - v - 1];
        for (p = Array(P - v), g = v + 1; P >= g; g++) p[g - v - 1] = x[g];
        for (f = numeric.tensor(i, numeric.dot(i, p)), g = v + 1; P >= g; g++)
          for (h = x[g], m = f[g - v - 1], _ = 0; w > _; _++) h[_] -= 2 * m[_];
      }
    }
    throw new Error(
      "numeric: eigenvalue iteration does not converge -- increase maxiter?"
    );
  }),
  (numeric.eig = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g,
      v,
      _,
      y = numeric.toUpperHessenberg(e),
      b = numeric.QRFrancis(y.H, t),
      w = numeric.T,
      x = e.length,
      C = b.B,
      T = numeric.dot(b.Q, numeric.dot(y.H, numeric.transpose(b.Q))),
      S = new w(numeric.dot(b.Q, y.Q)),
      E = C.length,
      k = Math.sqrt;
    for (i = 0; E > i; i++)
      if (((n = C[i][0]), n !== C[i][1])) {
        if (
          ((s = n + 1),
          (o = T[n][n]),
          (a = T[n][s]),
          (l = T[s][n]),
          (c = T[s][s]),
          0 === a && 0 === l)
        )
          continue;
        (u = -o - c),
          (h = o * c - a * l),
          (d = u * u - 4 * h),
          d >= 0
            ? ((p = 0 > u ? -0.5 * (u - k(d)) : -0.5 * (u + k(d))),
              (v = (o - p) * (o - p) + a * a),
              (_ = l * l + (c - p) * (c - p)),
              v > _
                ? ((v = k(v)), (m = (o - p) / v), (g = a / v))
                : ((_ = k(_)), (m = l / _), (g = (c - p) / _)),
              (r = new w([
                [g, -m],
                [m, g],
              ])),
              S.setRows(n, s, r.dot(S.getRows(n, s))))
            : ((p = -0.5 * u),
              (f = 0.5 * k(-d)),
              (v = (o - p) * (o - p) + a * a),
              (_ = l * l + (c - p) * (c - p)),
              v > _
                ? ((v = k(v + f * f)),
                  (m = (o - p) / v),
                  (g = a / v),
                  (p = 0),
                  (f /= v))
                : ((_ = k(_ + f * f)),
                  (m = l / _),
                  (g = (c - p) / _),
                  (p = f / _),
                  (f = 0)),
              (r = new w(
                [
                  [g, -m],
                  [m, g],
                ],
                [
                  [p, f],
                  [f, -p],
                ]
              )),
              S.setRows(n, s, r.dot(S.getRows(n, s))));
      }
    var P = S.dot(e).dot(S.transjugate()),
      x = e.length,
      I = numeric.T.identity(x);
    for (s = 0; x > s; s++)
      if (s > 0)
        for (i = s - 1; i >= 0; i--) {
          var A = P.get([i, i]),
            O = P.get([s, s]);
          numeric.neq(A.x, O.x) || numeric.neq(A.y, O.y)
            ? ((p = P.getRow(i).getBlock([i], [s - 1])),
              (f = I.getRow(s).getBlock([i], [s - 1])),
              I.set([s, i], P.get([i, s]).neg().sub(p.dot(f)).div(A.sub(O))))
            : I.setRow(s, I.getRow(i));
        }
    for (s = 0; x > s; s++) (p = I.getRow(s)), I.setRow(s, p.div(p.norm2()));
    return (
      (I = I.transpose()),
      (I = S.transjugate().dot(I)),
      { lambda: P.getDiag(), E: I }
    );
  }),
  (numeric.ccsSparse = function (e) {
    var t,
      n,
      i,
      r,
      s = e.length,
      o = [];
    for (i = s - 1; -1 !== i; --i) {
      n = e[i];
      for (r in n) {
        for (r = parseInt(r); r >= o.length; ) o[o.length] = 0;
        0 !== n[r] && o[r]++;
      }
    }
    var t = o.length,
      a = Array(t + 1);
    for (a[0] = 0, i = 0; t > i; ++i) a[i + 1] = a[i] + o[i];
    var l = Array(a[t]),
      c = Array(a[t]);
    for (i = s - 1; -1 !== i; --i) {
      n = e[i];
      for (r in n)
        0 !== n[r] && (o[r]--, (l[a[r] + o[r]] = i), (c[a[r] + o[r]] = n[r]));
    }
    return [a, l, c];
  }),
  (numeric.ccsFull = function (e) {
    var t,
      n,
      i,
      r,
      s = e[0],
      o = e[1],
      a = e[2],
      l = numeric.ccsDim(e),
      c = l[0],
      u = l[1],
      h = numeric.rep([c, u], 0);
    for (t = 0; u > t; t++)
      for (i = s[t], r = s[t + 1], n = i; r > n; ++n) h[o[n]][t] = a[n];
    return h;
  }),
  (numeric.ccsTSolve = function (e, t, n, i, r) {
    function s(e) {
      var t;
      if (0 === n[e]) {
        for (n[e] = 1, t = o[e]; t < o[e + 1]; ++t) s(a[t]);
        (r[h] = e), ++h;
      }
    }
    var o = e[0],
      a = e[1],
      l = e[2],
      c = o.length - 1,
      u = Math.max,
      h = 0;
    "undefined" == typeof i && (n = numeric.rep([c], 0)),
      "undefined" == typeof i && (i = numeric.linspace(0, n.length - 1)),
      "undefined" == typeof r && (r = []);
    var d, p, f, m, g, v, _;
    for (d = i.length - 1; -1 !== d; --d) s(i[d]);
    for (r.length = h, d = r.length - 1; -1 !== d; --d) n[r[d]] = 0;
    for (d = i.length - 1; -1 !== d; --d) (p = i[d]), (n[p] = t[p]);
    for (d = r.length - 1; -1 !== d; --d) {
      for (p = r[d], f = o[p], m = u(o[p + 1], f), g = f; g !== m; ++g)
        if (a[g] === p) {
          n[p] /= l[g];
          break;
        }
      for (_ = n[p], g = f; g !== m; ++g)
        (v = a[g]), v !== p && (n[v] -= _ * l[g]);
    }
    return n;
  }),
  (numeric.ccsDFS = function (e) {
    (this.k = Array(e)), (this.k1 = Array(e)), (this.j = Array(e));
  }),
  (numeric.ccsDFS.prototype.dfs = function (e, t, n, i, r, s) {
    var o,
      a,
      l,
      c = 0,
      u = r.length,
      h = this.k,
      d = this.k1,
      p = this.j;
    if (0 === i[e])
      for (i[e] = 1, p[0] = e, h[0] = a = t[e], d[0] = l = t[e + 1]; ; )
        if (a >= l) {
          if (((r[u] = p[c]), 0 === c)) return;
          ++u, --c, (a = h[c]), (l = d[c]);
        } else
          (o = s[n[a]]),
            0 === i[o]
              ? ((i[o] = 1),
                (h[c] = a),
                ++c,
                (p[c] = o),
                (a = t[o]),
                (d[c] = l = t[o + 1]))
              : ++a;
  }),
  (numeric.ccsLPSolve = function (e, t, n, i, r, s, o) {
    var a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g = e[0],
      v = e[1],
      _ = e[2],
      y = (g.length - 1, t[0]),
      b = t[1],
      w = t[2];
    for (l = y[r], c = y[r + 1], i.length = 0, a = l; c > a; ++a)
      o.dfs(s[b[a]], g, v, n, i, s);
    for (a = i.length - 1; -1 !== a; --a) n[i[a]] = 0;
    for (a = l; a !== c; ++a) (u = s[b[a]]), (n[u] = w[a]);
    for (a = i.length - 1; -1 !== a; --a) {
      for (u = i[a], h = g[u], d = g[u + 1], p = h; d > p; ++p)
        if (s[v[p]] === u) {
          n[u] /= _[p];
          break;
        }
      for (m = n[u], p = h; d > p; ++p)
        (f = s[v[p]]), f !== u && (n[f] -= m * _[p]);
    }
    return n;
  }),
  (numeric.ccsLUP1 = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c = e[0].length - 1,
      u = [numeric.rep([c + 1], 0), [], []],
      h = [numeric.rep([c + 1], 0), [], []],
      d = u[0],
      p = u[1],
      f = u[2],
      m = h[0],
      g = h[1],
      v = h[2],
      _ = numeric.rep([c], 0),
      y = numeric.rep([c], 0),
      b = numeric.ccsLPSolve,
      w = (Math.max, Math.abs),
      x = numeric.linspace(0, c - 1),
      C = numeric.linspace(0, c - 1),
      T = new numeric.ccsDFS(c);
    for ("undefined" == typeof t && (t = 1), n = 0; c > n; ++n) {
      for (
        b(u, e, _, y, n, C, T), s = -1, o = -1, i = y.length - 1;
        -1 !== i;
        --i
      )
        (r = y[i]), n >= r || ((a = w(_[r])), a > s && ((o = r), (s = a)));
      for (
        w(_[n]) < t * s &&
          ((i = x[n]),
          (s = x[o]),
          (x[n] = s),
          (C[s] = n),
          (x[o] = i),
          (C[i] = o),
          (s = _[n]),
          (_[n] = _[o]),
          (_[o] = s)),
          s = d[n],
          o = m[n],
          l = _[n],
          p[s] = x[n],
          f[s] = 1,
          ++s,
          i = y.length - 1;
        -1 !== i;
        --i
      )
        (r = y[i]),
          (a = _[r]),
          (y[i] = 0),
          (_[r] = 0),
          n >= r
            ? ((g[o] = r), (v[o] = a), ++o)
            : ((p[s] = x[r]), (f[s] = a / l), ++s);
      (d[n + 1] = s), (m[n + 1] = o);
    }
    for (i = p.length - 1; -1 !== i; --i) p[i] = C[p[i]];
    return { L: u, U: h, P: x, Pinv: C };
  }),
  (numeric.ccsDFS0 = function (e) {
    (this.k = Array(e)), (this.k1 = Array(e)), (this.j = Array(e));
  }),
  (numeric.ccsDFS0.prototype.dfs = function (e, t, n, i, r, s) {
    var o,
      a,
      l,
      c = 0,
      u = r.length,
      h = this.k,
      d = this.k1,
      p = this.j;
    if (0 === i[e])
      for (i[e] = 1, p[0] = e, h[0] = a = t[s[e]], d[0] = l = t[s[e] + 1]; ; ) {
        if (isNaN(a)) throw new Error("Ow!");
        if (a >= l) {
          if (((r[u] = s[p[c]]), 0 === c)) return;
          ++u, --c, (a = h[c]), (l = d[c]);
        } else
          (o = n[a]),
            0 === i[o]
              ? ((i[o] = 1),
                (h[c] = a),
                ++c,
                (p[c] = o),
                (o = s[o]),
                (a = t[o]),
                (d[c] = l = t[o + 1]))
              : ++a;
      }
  }),
  (numeric.ccsLPSolve0 = function (e, t, n, i, r, s, o, a) {
    var l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g,
      v = e[0],
      _ = e[1],
      y = e[2],
      b = (v.length - 1, t[0]),
      w = t[1],
      x = t[2];
    for (c = b[r], u = b[r + 1], i.length = 0, l = c; u > l; ++l)
      a.dfs(w[l], v, _, n, i, s, o);
    for (l = i.length - 1; -1 !== l; --l) (h = i[l]), (n[o[h]] = 0);
    for (l = c; l !== u; ++l) (h = w[l]), (n[h] = x[l]);
    for (l = i.length - 1; -1 !== l; --l) {
      for (h = i[l], m = o[h], d = v[h], p = v[h + 1], f = d; p > f; ++f)
        if (_[f] === m) {
          n[m] /= y[f];
          break;
        }
      for (g = n[m], f = d; p > f; ++f) n[_[f]] -= g * y[f];
      n[m] = g;
    }
  }),
  (numeric.ccsLUP0 = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c = e[0].length - 1,
      u = [numeric.rep([c + 1], 0), [], []],
      h = [numeric.rep([c + 1], 0), [], []],
      d = u[0],
      p = u[1],
      f = u[2],
      m = h[0],
      g = h[1],
      v = h[2],
      _ = numeric.rep([c], 0),
      y = numeric.rep([c], 0),
      b = numeric.ccsLPSolve0,
      w = (Math.max, Math.abs),
      x = numeric.linspace(0, c - 1),
      C = numeric.linspace(0, c - 1),
      T = new numeric.ccsDFS0(c);
    for ("undefined" == typeof t && (t = 1), n = 0; c > n; ++n) {
      for (
        b(u, e, _, y, n, C, x, T), s = -1, o = -1, i = y.length - 1;
        -1 !== i;
        --i
      )
        (r = y[i]), n >= r || ((a = w(_[x[r]])), a > s && ((o = r), (s = a)));
      for (
        w(_[x[n]]) < t * s &&
          ((i = x[n]),
          (s = x[o]),
          (x[n] = s),
          (C[s] = n),
          (x[o] = i),
          (C[i] = o)),
          s = d[n],
          o = m[n],
          l = _[x[n]],
          p[s] = x[n],
          f[s] = 1,
          ++s,
          i = y.length - 1;
        -1 !== i;
        --i
      )
        (r = y[i]),
          (a = _[x[r]]),
          (y[i] = 0),
          (_[x[r]] = 0),
          n >= r
            ? ((g[o] = r), (v[o] = a), ++o)
            : ((p[s] = x[r]), (f[s] = a / l), ++s);
      (d[n + 1] = s), (m[n + 1] = o);
    }
    for (i = p.length - 1; -1 !== i; --i) p[i] = C[p[i]];
    return { L: u, U: h, P: x, Pinv: C };
  }),
  (numeric.ccsLUP = numeric.ccsLUP0),
  (numeric.ccsDim = function (e) {
    return [numeric.sup(e[1]) + 1, e[0].length - 1];
  }),
  (numeric.ccsGetBlock = function (e, t, n) {
    var i = numeric.ccsDim(e),
      r = i[0],
      s = i[1];
    "undefined" == typeof t
      ? (t = numeric.linspace(0, r - 1))
      : "number" == typeof t && (t = [t]),
      "undefined" == typeof n
        ? (n = numeric.linspace(0, s - 1))
        : "number" == typeof n && (n = [n]);
    var o,
      a,
      l,
      c,
      u,
      h = t.length,
      d = n.length,
      p = numeric.rep([s], 0),
      f = [],
      m = [],
      g = [p, f, m],
      v = e[0],
      _ = e[1],
      y = e[2],
      b = numeric.rep([r], 0),
      w = 0,
      x = numeric.rep([r], 0);
    for (a = 0; d > a; ++a) {
      c = n[a];
      var C = v[c],
        T = v[c + 1];
      for (o = C; T > o; ++o) (l = _[o]), (x[l] = 1), (b[l] = y[o]);
      for (o = 0; h > o; ++o)
        (u = t[o]), x[u] && ((f[w] = o), (m[w] = b[t[o]]), ++w);
      for (o = C; T > o; ++o) (l = _[o]), (x[l] = 0);
      p[a + 1] = w;
    }
    return g;
  }),
  (numeric.ccsDot = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p = e[0],
      f = e[1],
      m = e[2],
      g = t[0],
      v = t[1],
      _ = t[2],
      y = numeric.ccsDim(e),
      b = numeric.ccsDim(t),
      w = y[0],
      x = (y[1], b[1]),
      C = numeric.rep([w], 0),
      T = numeric.rep([w], 0),
      S = Array(w),
      E = numeric.rep([x], 0),
      k = [],
      P = [],
      I = [E, k, P];
    for (r = 0; r !== x; ++r) {
      for (s = g[r], o = g[r + 1], u = 0, i = s; o > i; ++i)
        for (h = v[i], d = _[i], a = p[h], l = p[h + 1], n = a; l > n; ++n)
          (c = f[n]),
            0 === T[c] && ((S[u] = c), (T[c] = 1), (u += 1)),
            (C[c] = C[c] + m[n] * d);
      for (s = E[r], o = s + u, E[r + 1] = o, i = u - 1; -1 !== i; --i)
        (d = s + i),
          (n = S[i]),
          (k[d] = n),
          (P[d] = C[n]),
          (T[n] = 0),
          (C[n] = 0);
      E[r + 1] = E[r] + u;
    }
    return I;
  }),
  (numeric.ccsLUPSolve = function (e, t) {
    var n = e.L,
      i = e.U,
      r = (e.P, t[0]),
      s = !1;
    "object" != typeof r &&
      ((t = [[0, t.length], numeric.linspace(0, t.length - 1), t]),
      (r = t[0]),
      (s = !0));
    var o,
      a,
      l,
      c,
      u,
      h,
      d = t[1],
      p = t[2],
      f = n[0].length - 1,
      m = r.length - 1,
      g = numeric.rep([f], 0),
      v = Array(f),
      _ = numeric.rep([f], 0),
      y = Array(f),
      b = numeric.rep([m + 1], 0),
      w = [],
      x = [],
      C = numeric.ccsTSolve,
      T = 0;
    for (o = 0; m > o; ++o) {
      for (u = 0, l = r[o], c = r[o + 1], a = l; c > a; ++a)
        (h = e.Pinv[d[a]]), (y[u] = h), (_[h] = p[a]), ++u;
      for (y.length = u, C(n, _, g, y, v), a = y.length - 1; -1 !== a; --a)
        _[y[a]] = 0;
      if ((C(i, g, _, v, y), s)) return _;
      for (a = v.length - 1; -1 !== a; --a) g[v[a]] = 0;
      for (a = y.length - 1; -1 !== a; --a)
        (h = y[a]), (w[T] = h), (x[T] = _[h]), (_[h] = 0), ++T;
      b[o + 1] = T;
    }
    return [b, w, x];
  }),
  (numeric.ccsbinop = function (e, t) {
    return (
      "undefined" == typeof t && (t = ""),
      Function(
        "X",
        "Y",
        "var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n" +
          t +
          "for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n" +
          e +
          "\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];"
      )
    );
  }),
  (function () {
    var k, A, B, C;
    for (k in numeric.ops2)
      (A = isFinite(eval("1" + numeric.ops2[k] + "0"))
        ? "[Y[0],Y[1],numeric." + k + "(X,Y[2])]"
        : "NaN"),
        (B = isFinite(eval("0" + numeric.ops2[k] + "1"))
          ? "[X[0],X[1],numeric." + k + "(X[2],Y)]"
          : "NaN"),
        (C =
          isFinite(eval("1" + numeric.ops2[k] + "0")) &&
          isFinite(eval("0" + numeric.ops2[k] + "1"))
            ? "numeric.ccs" + k + "MM(X,Y)"
            : "NaN"),
        (numeric["ccs" + k + "MM"] = numeric.ccsbinop(
          "zk = xk " + numeric.ops2[k] + "yk;"
        )),
        (numeric["ccs" + k] = Function(
          "X",
          "Y",
          'if(typeof X === "number") return ' +
            A +
            ';\nif(typeof Y === "number") return ' +
            B +
            ";\nreturn " +
            C +
            ";\n"
        ));
  })(),
  (numeric.ccsScatter = function (e) {
    var t,
      n = e[0],
      i = e[1],
      r = e[2],
      s = numeric.sup(i) + 1,
      o = n.length,
      a = numeric.rep([s], 0),
      l = Array(o),
      c = Array(o),
      u = numeric.rep([s], 0);
    for (t = 0; o > t; ++t) u[i[t]]++;
    for (t = 0; s > t; ++t) a[t + 1] = a[t] + u[t];
    var h,
      d,
      p = a.slice(0);
    for (t = 0; o > t; ++t)
      (d = i[t]), (h = p[d]), (l[h] = n[t]), (c[h] = r[t]), (p[d] = p[d] + 1);
    return [a, l, c];
  }),
  (numeric.ccsGather = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o = e[0],
      a = e[1],
      l = e[2],
      c = o.length - 1,
      u = a.length,
      h = Array(u),
      d = Array(u),
      p = Array(u);
    for (s = 0, t = 0; c > t; ++t)
      for (i = o[t], r = o[t + 1], n = i; n !== r; ++n)
        (d[s] = t), (h[s] = a[n]), (p[s] = l[n]), ++s;
    return [h, d, p];
  }),
  (numeric.sdim = function c(e, t, n) {
    if (("undefined" == typeof t && (t = []), "object" != typeof e)) return t;
    "undefined" == typeof n && (n = 0),
      n in t || (t[n] = 0),
      e.length > t[n] && (t[n] = e.length);
    var i;
    for (i in e) e.hasOwnProperty(i) && c(e[i], t, n + 1);
    return t;
  }),
  (numeric.sclone = function u(e, t, n) {
    "undefined" == typeof t && (t = 0),
      "undefined" == typeof n && (n = numeric.sdim(e).length);
    var i,
      r = Array(e.length);
    if (t === n - 1) {
      for (i in e) e.hasOwnProperty(i) && (r[i] = e[i]);
      return r;
    }
    for (i in e) e.hasOwnProperty(i) && (r[i] = u(e[i], t + 1, n));
    return r;
  }),
  (numeric.sdiag = function (e) {
    var t,
      n,
      i = e.length,
      r = Array(i);
    for (t = i - 1; t >= 1; t -= 2)
      (n = t - 1), (r[t] = []), (r[t][t] = e[t]), (r[n] = []), (r[n][n] = e[n]);
    return 0 === t && ((r[0] = []), (r[0][0] = e[t])), r;
  }),
  (numeric.sidentity = function (e) {
    return numeric.sdiag(numeric.rep([e], 1));
  }),
  (numeric.stranspose = function (e) {
    {
      var t,
        n,
        i,
        r = [];
      e.length;
    }
    for (t in e)
      if (e.hasOwnProperty(t)) {
        i = e[t];
        for (n in i)
          i.hasOwnProperty(n) &&
            ("object" != typeof r[n] && (r[n] = []), (r[n][t] = i[n]));
      }
    return r;
  }),
  (numeric.sLUP = function () {
    throw new Error(
      "The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead."
    );
  }),
  (numeric.sdotMM = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c = e.length,
      u = (t.length, numeric.stranspose(t)),
      h = u.length,
      d = Array(c);
    for (r = c - 1; r >= 0; r--) {
      for (l = [], n = e[r], o = h - 1; o >= 0; o--) {
        (a = 0), (i = u[o]);
        for (s in n) n.hasOwnProperty(s) && s in i && (a += n[s] * i[s]);
        a && (l[o] = a);
      }
      d[r] = l;
    }
    return d;
  }),
  (numeric.sdotMV = function (e, t) {
    var n,
      i,
      r,
      s,
      o = e.length,
      a = Array(o);
    for (i = o - 1; i >= 0; i--) {
      (n = e[i]), (s = 0);
      for (r in n) n.hasOwnProperty(r) && t[r] && (s += n[r] * t[r]);
      s && (a[i] = s);
    }
    return a;
  }),
  (numeric.sdotVM = function (e, t) {
    var n,
      i,
      r,
      s,
      o = [];
    for (n in e)
      if (e.hasOwnProperty(n)) {
        (r = t[n]), (s = e[n]);
        for (i in r)
          r.hasOwnProperty(i) && (o[i] || (o[i] = 0), (o[i] += s * r[i]));
      }
    return o;
  }),
  (numeric.sdotVV = function (e, t) {
    var n,
      i = 0;
    for (n in e) e[n] && t[n] && (i += e[n] * t[n]);
    return i;
  }),
  (numeric.sdot = function (e, t) {
    var n = numeric.sdim(e).length,
      i = numeric.sdim(t).length,
      r = 1e3 * n + i;
    switch (r) {
      case 0:
        return e * t;
      case 1001:
        return numeric.sdotVV(e, t);
      case 2001:
        return numeric.sdotMV(e, t);
      case 1002:
        return numeric.sdotVM(e, t);
      case 2002:
        return numeric.sdotMM(e, t);
      default:
        throw new Error(
          "numeric.sdot not implemented for tensors of order " + n + " and " + i
        );
    }
  }),
  (numeric.sscatter = function (e) {
    var t,
      n,
      i,
      r,
      s = e[0].length,
      o = e.length,
      a = [];
    for (n = s - 1; n >= 0; --n)
      if (e[o - 1][n]) {
        for (r = a, i = 0; o - 2 > i; i++)
          (t = e[i][n]), r[t] || (r[t] = []), (r = r[t]);
        r[e[i][n]] = e[i + 1][n];
      }
    return a;
  }),
  (numeric.sgather = function h(e, t, n) {
    "undefined" == typeof t && (t = []), "undefined" == typeof n && (n = []);
    var i, r, s;
    i = n.length;
    for (r in e)
      if (e.hasOwnProperty(r))
        if (((n[i] = parseInt(r)), (s = e[r]), "number" == typeof s)) {
          if (s) {
            if (0 === t.length) for (r = i + 1; r >= 0; --r) t[r] = [];
            for (r = i; r >= 0; --r) t[r].push(n[r]);
            t[i + 1].push(s);
          }
        } else h(s, t, n);
    return n.length > i && n.pop(), t;
  }),
  (numeric.cLU = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o,
      a = e[0],
      l = e[1],
      c = e[2],
      u = a.length,
      h = 0;
    for (t = 0; u > t; t++) a[t] > h && (h = a[t]);
    h++;
    var d,
      p,
      f,
      m = Array(h),
      g = Array(h),
      v = numeric.rep([h], 1 / 0),
      _ = numeric.rep([h], -1 / 0);
    for (i = 0; u > i; i++)
      (t = a[i]), (n = l[i]), n < v[t] && (v[t] = n), n > _[t] && (_[t] = n);
    for (t = 0; h - 1 > t; t++) _[t] > _[t + 1] && (_[t + 1] = _[t]);
    for (t = h - 1; t >= 1; t--) v[t] < v[t - 1] && (v[t - 1] = v[t]);
    var y = 0,
      b = 0;
    for (t = 0; h > t; t++)
      (g[t] = numeric.rep([_[t] - v[t] + 1], 0)),
        (m[t] = numeric.rep([t - v[t]], 0)),
        (y += t - v[t] + 1),
        (b += _[t] - t + 1);
    for (i = 0; u > i; i++) (t = a[i]), (g[t][l[i] - v[t]] = c[i]);
    for (t = 0; h - 1 > t; t++)
      for (r = t - v[t], d = g[t], n = t + 1; v[n] <= t && h > n; n++)
        if (
          ((s = t - v[n]), (o = _[t] - t), (p = g[n]), (f = p[s] / d[r]), f)
        ) {
          for (i = 1; o >= i; i++) p[i + s] -= f * d[i + r];
          m[n][t - v[n]] = f;
        }
    var u,
      w,
      x,
      d = [],
      p = [],
      C = [],
      T = [],
      S = [],
      E = [];
    for (u = 0, w = 0, t = 0; h > t; t++) {
      for (r = v[t], s = _[t], x = g[t], n = t; s >= n; n++)
        x[n - r] && ((d[u] = t), (p[u] = n), (C[u] = x[n - r]), u++);
      for (x = m[t], n = r; t > n; n++)
        x[n - r] && ((T[w] = t), (S[w] = n), (E[w] = x[n - r]), w++);
      (T[w] = t), (S[w] = t), (E[w] = 1), w++;
    }
    return { U: [d, p, C], L: [T, S, E] };
  }),
  (numeric.cLUsolve = function (e, t) {
    var n,
      i,
      r = e.L,
      s = e.U,
      o = numeric.clone(t),
      a = r[0],
      l = r[1],
      c = r[2],
      u = s[0],
      h = s[1],
      d = s[2],
      p = u.length,
      f = (a.length, o.length);
    for (i = 0, n = 0; f > n; n++) {
      for (; l[i] < n; ) (o[n] -= c[i] * o[l[i]]), i++;
      i++;
    }
    for (i = p - 1, n = f - 1; n >= 0; n--) {
      for (; h[i] > n; ) (o[n] -= d[i] * o[h[i]]), i--;
      (o[n] /= d[i]), i--;
    }
    return o;
  }),
  (numeric.cgrid = function (e, t) {
    "number" == typeof e && (e = [e, e]);
    var n,
      i,
      r,
      s = numeric.rep(e, -1);
    if ("function" != typeof t)
      switch (t) {
        case "L":
          t = function (t, n) {
            return t >= e[0] / 2 || n < e[1] / 2;
          };
          break;
        default:
          t = function () {
            return !0;
          };
      }
    for (r = 0, n = 1; n < e[0] - 1; n++)
      for (i = 1; i < e[1] - 1; i++) t(n, i) && ((s[n][i] = r), r++);
    return s;
  }),
  (numeric.cdelsq = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o = [
        [-1, 0],
        [0, -1],
        [0, 1],
        [1, 0],
      ],
      a = numeric.dim(e),
      l = a[0],
      c = a[1],
      u = [],
      h = [],
      d = [];
    for (t = 1; l - 1 > t; t++)
      for (n = 1; c - 1 > n; n++)
        if (!(e[t][n] < 0)) {
          for (i = 0; 4 > i; i++)
            (r = t + o[i][0]),
              (s = n + o[i][1]),
              e[r][s] < 0 || (u.push(e[t][n]), h.push(e[r][s]), d.push(-1));
          u.push(e[t][n]), h.push(e[t][n]), d.push(4);
        }
    return [u, h, d];
  }),
  (numeric.cdotMV = function (e, t) {
    var n,
      i,
      r,
      s = e[0],
      o = e[1],
      a = e[2],
      l = s.length;
    for (r = 0, i = 0; l > i; i++) s[i] > r && (r = s[i]);
    for (r++, n = numeric.rep([r], 0), i = 0; l > i; i++)
      n[s[i]] += a[i] * t[o[i]];
    return n;
  }),
  (numeric.Spline = function (e, t, n, i, r) {
    (this.x = e), (this.yl = t), (this.yr = n), (this.kl = i), (this.kr = r);
  }),
  (numeric.Spline.prototype._at = function (e, t) {
    var e,
      n,
      i,
      r,
      s = this.x,
      o = this.yl,
      a = this.yr,
      l = this.kl,
      c = this.kr,
      u = numeric.add,
      h = numeric.sub,
      d = numeric.mul;
    (n = h(d(l[t], s[t + 1] - s[t]), h(a[t + 1], o[t]))),
      (i = u(d(c[t + 1], s[t] - s[t + 1]), h(a[t + 1], o[t]))),
      (r = (e - s[t]) / (s[t + 1] - s[t]));
    var p = r * (1 - r);
    return u(
      u(u(d(1 - r, o[t]), d(r, a[t + 1])), d(n, p * (1 - r))),
      d(i, p * r)
    );
  }),
  (numeric.Spline.prototype.at = function (e) {
    if ("number" == typeof e) {
      var t,
        n,
        i,
        r = this.x,
        s = r.length,
        o = Math.floor;
      for (t = 0, n = s - 1; n - t > 1; )
        (i = o((t + n) / 2)), r[i] <= e ? (t = i) : (n = i);
      return this._at(e, t);
    }
    var a,
      s = e.length,
      l = Array(s);
    for (a = s - 1; -1 !== a; --a) l[a] = this.at(e[a]);
    return l;
  }),
  (numeric.Spline.prototype.diff = function () {
    var e,
      t,
      n,
      i = this.x,
      r = this.yl,
      s = this.yr,
      o = this.kl,
      a = this.kr,
      l = r.length,
      c = o,
      u = a,
      h = Array(l),
      d = Array(l),
      p = numeric.add,
      f = numeric.mul,
      m = numeric.div,
      g = numeric.sub;
    for (e = l - 1; -1 !== e; --e)
      (t = i[e + 1] - i[e]),
        (n = g(s[e + 1], r[e])),
        (h[e] = m(p(f(n, 6), f(o[e], -4 * t), f(a[e + 1], -2 * t)), t * t)),
        (d[e + 1] = m(p(f(n, -6), f(o[e], 2 * t), f(a[e + 1], 4 * t)), t * t));
    return new numeric.Spline(i, c, u, h, d);
  }),
  (numeric.Spline.prototype.roots = function () {
    function e(e) {
      return e * e;
    }
    var t = [],
      n = this.x,
      i = this.yl,
      r = this.yr,
      s = this.kl,
      o = this.kr;
    "number" == typeof i[0] && ((i = [i]), (r = [r]), (s = [s]), (o = [o]));
    var a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g,
      v,
      _,
      y,
      b,
      w,
      x,
      C,
      T,
      S,
      E,
      k,
      P,
      I,
      A,
      O = i.length,
      D = n.length - 1,
      t = Array(O),
      M = Math.sqrt;
    for (a = 0; a !== O; ++a) {
      for (
        u = i[a], h = r[a], d = s[a], p = o[a], f = [], l = 0;
        l !== D;
        l++
      ) {
        for (
          l > 0 && h[l] * u[l] < 0 && f.push(n[l]),
            x = n[l + 1] - n[l],
            C = n[l],
            v = u[l],
            _ = h[l + 1],
            m = d[l] / x,
            g = p[l + 1] / x,
            w = e(m - g + 3 * (v - _)) + 12 * g * v,
            y = g + 3 * v + 2 * m - 3 * _,
            b = 3 * (g + m + 2 * (v - _)),
            0 >= w
              ? ((S = y / b),
                (T =
                  S > n[l] && S < n[l + 1]
                    ? [n[l], S, n[l + 1]]
                    : [n[l], n[l + 1]]))
              : ((S = (y - M(w)) / b),
                (E = (y + M(w)) / b),
                (T = [n[l]]),
                S > n[l] && S < n[l + 1] && T.push(S),
                E > n[l] && E < n[l + 1] && T.push(E),
                T.push(n[l + 1])),
            P = T[0],
            S = this._at(P, l),
            c = 0;
          c < T.length - 1;
          c++
        )
          if (((I = T[c + 1]), (E = this._at(I, l)), 0 !== S))
            if (0 === E || S * E > 0) (P = I), (S = E);
            else {
              for (
                var R = 0;
                (A = (S * I - E * P) / (S - E)), !(P >= A || A >= I);

              )
                if (((k = this._at(A, l)), k * E > 0))
                  (I = A), (E = k), -1 === R && (S *= 0.5), (R = -1);
                else {
                  if (!(k * S > 0)) break;
                  (P = A), (S = k), 1 === R && (E *= 0.5), (R = 1);
                }
              f.push(A), (P = T[c + 1]), (S = this._at(P, l));
            }
          else f.push(P), (P = I), (S = E);
        0 === E && f.push(I);
      }
      t[a] = f;
    }
    return "number" == typeof this.yl[0] ? t[0] : t;
  }),
  (numeric.spline = function (e, t, n, i) {
    var r,
      s = e.length,
      o = [],
      a = [],
      l = [],
      c = numeric.sub,
      u = numeric.mul,
      h = numeric.add;
    for (r = s - 2; r >= 0; r--)
      (a[r] = e[r + 1] - e[r]), (l[r] = c(t[r + 1], t[r]));
    ("string" == typeof n || "string" == typeof i) && (n = i = "periodic");
    var d = [[], [], []];
    switch (typeof n) {
      case "undefined":
        (o[0] = u(3 / (a[0] * a[0]), l[0])),
          d[0].push(0, 0),
          d[1].push(0, 1),
          d[2].push(2 / a[0], 1 / a[0]);
        break;
      case "string":
        (o[0] = h(
          u(3 / (a[s - 2] * a[s - 2]), l[s - 2]),
          u(3 / (a[0] * a[0]), l[0])
        )),
          d[0].push(0, 0, 0),
          d[1].push(s - 2, 0, 1),
          d[2].push(1 / a[s - 2], 2 / a[s - 2] + 2 / a[0], 1 / a[0]);
        break;
      default:
        (o[0] = n), d[0].push(0), d[1].push(0), d[2].push(1);
    }
    for (r = 1; s - 1 > r; r++)
      (o[r] = h(
        u(3 / (a[r - 1] * a[r - 1]), l[r - 1]),
        u(3 / (a[r] * a[r]), l[r])
      )),
        d[0].push(r, r, r),
        d[1].push(r - 1, r, r + 1),
        d[2].push(1 / a[r - 1], 2 / a[r - 1] + 2 / a[r], 1 / a[r]);
    switch (typeof i) {
      case "undefined":
        (o[s - 1] = u(3 / (a[s - 2] * a[s - 2]), l[s - 2])),
          d[0].push(s - 1, s - 1),
          d[1].push(s - 2, s - 1),
          d[2].push(1 / a[s - 2], 2 / a[s - 2]);
        break;
      case "string":
        d[1][d[1].length - 1] = 0;
        break;
      default:
        (o[s - 1] = i), d[0].push(s - 1), d[1].push(s - 1), d[2].push(1);
    }
    o = "number" != typeof o[0] ? numeric.transpose(o) : [o];
    var p = Array(o.length);
    if ("string" == typeof n)
      for (r = p.length - 1; -1 !== r; --r)
        (p[r] = numeric.ccsLUPSolve(
          numeric.ccsLUP(numeric.ccsScatter(d)),
          o[r]
        )),
          (p[r][s - 1] = p[r][0]);
    else
      for (r = p.length - 1; -1 !== r; --r)
        p[r] = numeric.cLUsolve(numeric.cLU(d), o[r]);
    return (
      (p = "number" == typeof t[0] ? p[0] : numeric.transpose(p)),
      new numeric.Spline(e, t, t, p, p)
    );
  }),
  (numeric.fftpow2 = function d(e, t) {
    var n = e.length;
    if (1 !== n) {
      var i,
        r,
        s = Math.cos,
        o = Math.sin,
        a = Array(n / 2),
        l = Array(n / 2),
        c = Array(n / 2),
        u = Array(n / 2);
      for (r = n / 2, i = n - 1; -1 !== i; --i)
        --r, (c[r] = e[i]), (u[r] = t[i]), --i, (a[r] = e[i]), (l[r] = t[i]);
      d(a, l), d(c, u), (r = n / 2);
      var h,
        p,
        f,
        m = -6.283185307179586 / n;
      for (i = n - 1; -1 !== i; --i)
        --r,
          -1 === r && (r = n / 2 - 1),
          (h = m * i),
          (p = s(h)),
          (f = o(h)),
          (e[i] = a[r] + p * c[r] - f * u[r]),
          (t[i] = l[r] + p * u[r] + f * c[r]);
    }
  }),
  (numeric._ifftpow2 = function p(e, t) {
    var n = e.length;
    if (1 !== n) {
      var i,
        r,
        s = Math.cos,
        o = Math.sin,
        a = Array(n / 2),
        l = Array(n / 2),
        c = Array(n / 2),
        u = Array(n / 2);
      for (r = n / 2, i = n - 1; -1 !== i; --i)
        --r, (c[r] = e[i]), (u[r] = t[i]), --i, (a[r] = e[i]), (l[r] = t[i]);
      p(a, l), p(c, u), (r = n / 2);
      var h,
        d,
        f,
        m = 6.283185307179586 / n;
      for (i = n - 1; -1 !== i; --i)
        --r,
          -1 === r && (r = n / 2 - 1),
          (h = m * i),
          (d = s(h)),
          (f = o(h)),
          (e[i] = a[r] + d * c[r] - f * u[r]),
          (t[i] = l[r] + d * u[r] + f * c[r]);
    }
  }),
  (numeric.ifftpow2 = function (e, t) {
    numeric._ifftpow2(e, t),
      numeric.diveq(e, e.length),
      numeric.diveq(t, t.length);
  }),
  (numeric.convpow2 = function (e, t, n, i) {
    numeric.fftpow2(e, t), numeric.fftpow2(n, i);
    var r,
      s,
      o,
      a,
      l,
      c = e.length;
    for (r = c - 1; -1 !== r; --r)
      (s = e[r]),
        (a = t[r]),
        (o = n[r]),
        (l = i[r]),
        (e[r] = s * o - a * l),
        (t[r] = s * l + a * o);
    numeric.ifftpow2(e, t);
  }),
  (numeric.T.prototype.fft = function () {
    {
      var e,
        t,
        n = this.x,
        i = this.y,
        r = n.length,
        s = Math.log,
        o = s(2),
        a = Math.ceil(s(2 * r - 1) / o),
        l = Math.pow(2, a),
        c = numeric.rep([l], 0),
        u = numeric.rep([l], 0),
        h = Math.cos,
        d = Math.sin,
        p = -3.141592653589793 / r,
        f = numeric.rep([l], 0),
        m = numeric.rep([l], 0);
      Math.floor(r / 2);
    }
    for (e = 0; r > e; e++) f[e] = n[e];
    if ("undefined" != typeof i) for (e = 0; r > e; e++) m[e] = i[e];
    for (c[0] = 1, e = 1; l / 2 >= e; e++)
      (t = p * e * e),
        (c[e] = h(t)),
        (u[e] = d(t)),
        (c[l - e] = h(t)),
        (u[l - e] = d(t));
    var g = new numeric.T(f, m),
      v = new numeric.T(c, u);
    return (
      (g = g.mul(v)),
      numeric.convpow2(g.x, g.y, numeric.clone(v.x), numeric.neg(v.y)),
      (g = g.mul(v)),
      (g.x.length = r),
      (g.y.length = r),
      g
    );
  }),
  (numeric.T.prototype.ifft = function () {
    {
      var e,
        t,
        n = this.x,
        i = this.y,
        r = n.length,
        s = Math.log,
        o = s(2),
        a = Math.ceil(s(2 * r - 1) / o),
        l = Math.pow(2, a),
        c = numeric.rep([l], 0),
        u = numeric.rep([l], 0),
        h = Math.cos,
        d = Math.sin,
        p = 3.141592653589793 / r,
        f = numeric.rep([l], 0),
        m = numeric.rep([l], 0);
      Math.floor(r / 2);
    }
    for (e = 0; r > e; e++) f[e] = n[e];
    if ("undefined" != typeof i) for (e = 0; r > e; e++) m[e] = i[e];
    for (c[0] = 1, e = 1; l / 2 >= e; e++)
      (t = p * e * e),
        (c[e] = h(t)),
        (u[e] = d(t)),
        (c[l - e] = h(t)),
        (u[l - e] = d(t));
    var g = new numeric.T(f, m),
      v = new numeric.T(c, u);
    return (
      (g = g.mul(v)),
      numeric.convpow2(g.x, g.y, numeric.clone(v.x), numeric.neg(v.y)),
      (g = g.mul(v)),
      (g.x.length = r),
      (g.y.length = r),
      g.div(r)
    );
  }),
  (numeric.gradient = function (e, t) {
    var n = t.length,
      i = e(t);
    if (isNaN(i)) throw new Error("gradient: f(x) is a NaN!");
    var r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p,
      f = Math.max,
      m = numeric.clone(t),
      g = Array(n),
      f = (numeric.div, numeric.sub, Math.max),
      v = 0.001,
      _ = Math.abs,
      y = Math.min,
      b = 0;
    for (r = 0; n > r; r++)
      for (var w = f(1e-6 * i, 1e-8); ; ) {
        if ((++b, b > 20)) throw new Error("Numerical gradient fails");
        if (
          ((m[r] = t[r] + w),
          (s = e(m)),
          (m[r] = t[r] - w),
          (o = e(m)),
          (m[r] = t[r]),
          isNaN(s) || isNaN(o))
        )
          w /= 16;
        else {
          if (
            ((g[r] = (s - o) / (2 * w)),
            (l = t[r] - w),
            (c = t[r]),
            (u = t[r] + w),
            (h = (s - i) / w),
            (d = (i - o) / w),
            (p = f(_(g[r]), _(i), _(s), _(o), _(l), _(c), _(u), 1e-8)),
            (a = y(f(_(h - g[r]), _(d - g[r]), _(h - d)) / p, w / p)),
            !(a > v))
          )
            break;
          w /= 16;
        }
      }
    return g;
  }),
  (numeric.uncmin = function (e, t, n, i, r, s, o) {
    var a = numeric.gradient;
    "undefined" == typeof o && (o = {}),
      "undefined" == typeof n && (n = 1e-8),
      "undefined" == typeof i &&
        (i = function (t) {
          return a(e, t);
        }),
      "undefined" == typeof r && (r = 1e3),
      (t = numeric.clone(t));
    var l,
      c,
      u = t.length,
      h = e(t);
    if (isNaN(h)) throw new Error("uncmin: f(x0) is a NaN!");
    var d = Math.max,
      p = numeric.norm2;
    n = d(n, numeric.epsilon);
    var f,
      m,
      g,
      v,
      _,
      y,
      b,
      w,
      x,
      C,
      T = o.Hinv || numeric.identity(u),
      S = numeric.dot,
      E = (numeric.inv, numeric.sub),
      k = numeric.add,
      P = numeric.tensor,
      I = numeric.div,
      A = numeric.mul,
      O = numeric.all,
      D = numeric.isFinite,
      M = numeric.neg,
      R = 0,
      L = "";
    for (m = i(t); r > R; ) {
      if ("function" == typeof s && s(R, t, h, m, T)) {
        L = "Callback returned true";
        break;
      }
      if (!O(D(m))) {
        L = "Gradient has Infinity or NaN";
        break;
      }
      if (((f = M(S(T, m))), !O(D(f)))) {
        L = "Search direction has Infinity or NaN";
        break;
      }
      if (((C = p(f)), n > C)) {
        L = "Newton step smaller than tol";
        break;
      }
      for (
        x = 1, c = S(m, f), _ = t;
        r > R &&
        !(n > x * C) &&
        ((v = A(f, x)),
        (_ = k(t, v)),
        (l = e(_)),
        l - h >= 0.1 * x * c || isNaN(l));

      )
        (x *= 0.5), ++R;
      if (n > x * C) {
        L = "Line search step size smaller than tol";
        break;
      }
      if (R === r) {
        L = "maxit reached during line search";
        break;
      }
      (g = i(_)),
        (y = E(g, m)),
        (w = S(y, v)),
        (b = S(T, y)),
        (T = E(
          k(T, A((w + S(y, b)) / (w * w), P(v, v))),
          I(k(P(b, v), P(v, b)), w)
        )),
        (t = _),
        (h = l),
        (m = g),
        ++R;
    }
    return {
      solution: t,
      f: h,
      gradient: m,
      invHessian: T,
      iterations: R,
      message: L,
    };
  }),
  (numeric.Dopri = function (e, t, n, i, r, s, o) {
    (this.x = e),
      (this.y = t),
      (this.f = n),
      (this.ymid = i),
      (this.iterations = r),
      (this.events = o),
      (this.message = s);
  }),
  (numeric.Dopri.prototype._at = function (e, t) {
    function n(e) {
      return e * e;
    }
    var i,
      r,
      s,
      o,
      a,
      l,
      e,
      c,
      u,
      h,
      d,
      p = this,
      f = p.x,
      m = p.y,
      g = p.f,
      v = p.ymid,
      _ = (f.length, Math.floor, 0.5),
      y = numeric.add,
      b = numeric.mul,
      w = numeric.sub;
    return (
      (i = f[t]),
      (r = f[t + 1]),
      (o = m[t]),
      (a = m[t + 1]),
      (c = r - i),
      (s = i + _ * c),
      (l = v[t]),
      (u = w(g[t], b(o, 1 / (i - s) + 2 / (i - r)))),
      (h = w(g[t + 1], b(a, 1 / (r - s) + 2 / (r - i)))),
      (d = [
        (n(e - r) * (e - s)) / n(i - r) / (i - s),
        (n(e - i) * n(e - r)) / n(i - s) / n(r - s),
        (n(e - i) * (e - s)) / n(r - i) / (r - s),
        ((e - i) * n(e - r) * (e - s)) / n(i - r) / (i - s),
        ((e - r) * n(e - i) * (e - s)) / n(i - r) / (r - s),
      ]),
      y(y(y(y(b(o, d[0]), b(l, d[1])), b(a, d[2])), b(u, d[3])), b(h, d[4]))
    );
  }),
  (numeric.Dopri.prototype.at = function (e) {
    var t,
      n,
      i,
      r = Math.floor;
    if ("number" != typeof e) {
      var s = e.length,
        o = Array(s);
      for (t = s - 1; -1 !== t; --t) o[t] = this.at(e[t]);
      return o;
    }
    var a = this.x;
    for (t = 0, n = a.length - 1; n - t > 1; )
      (i = r(0.5 * (t + n))), a[i] <= e ? (t = i) : (n = i);
    return this._at(e, t);
  }),
  (numeric.dopri = function (e, t, n, i, r, s, o) {
    "undefined" == typeof r && (r = 1e-6), "undefined" == typeof s && (s = 1e3);
    var a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m,
      g,
      v,
      _,
      y,
      b = [e],
      w = [n],
      x = [i(e, n)],
      C = [],
      T = 0.2,
      S = [0.075, 0.225],
      E = [44 / 45, -56 / 15, 32 / 9],
      k = [19372 / 6561, -25360 / 2187, 64448 / 6561, -212 / 729],
      P = [9017 / 3168, -355 / 33, 46732 / 5247, 49 / 176, -5103 / 18656],
      I = [35 / 384, 0, 500 / 1113, 125 / 192, -2187 / 6784, 11 / 84],
      A = [
        0.10013431883002395, 0, 0.3918321794184259, -0.02982460176594817,
        0.05893268337240795, -0.04497888809104361, 0.023904308236133973,
      ],
      O = [0.2, 0.3, 0.8, 8 / 9, 1, 1],
      D = [
        -71 / 57600,
        0,
        71 / 16695,
        -71 / 1920,
        17253 / 339200,
        -22 / 525,
        0.025,
      ],
      M = 0,
      R = (t - e) / 10,
      L = 0,
      N = numeric.add,
      U = numeric.mul,
      B = (Math.max, Math.min),
      F = Math.abs,
      j = numeric.norminf,
      H = Math.pow,
      $ = numeric.any,
      z = numeric.lt,
      W = numeric.and,
      G = (numeric.sub, new numeric.Dopri(b, w, x, C, -1, ""));
    for ("function" == typeof o && (v = o(e, n)); t > e && s > L; )
      if (
        (++L,
        e + R > t && (R = t - e),
        (a = i(e + O[0] * R, N(n, U(T * R, x[M])))),
        (l = i(e + O[1] * R, N(N(n, U(S[0] * R, x[M])), U(S[1] * R, a)))),
        (c = i(
          e + O[2] * R,
          N(N(N(n, U(E[0] * R, x[M])), U(E[1] * R, a)), U(E[2] * R, l))
        )),
        (u = i(
          e + O[3] * R,
          N(
            N(N(N(n, U(k[0] * R, x[M])), U(k[1] * R, a)), U(k[2] * R, l)),
            U(k[3] * R, c)
          )
        )),
        (h = i(
          e + O[4] * R,
          N(
            N(
              N(N(N(n, U(P[0] * R, x[M])), U(P[1] * R, a)), U(P[2] * R, l)),
              U(P[3] * R, c)
            ),
            U(P[4] * R, u)
          )
        )),
        (m = N(
          N(
            N(N(N(n, U(x[M], R * I[0])), U(l, R * I[2])), U(c, R * I[3])),
            U(u, R * I[4])
          ),
          U(h, R * I[5])
        )),
        (d = i(e + R, m)),
        (p = N(
          N(
            N(
              N(N(U(x[M], R * D[0]), U(l, R * D[2])), U(c, R * D[3])),
              U(u, R * D[4])
            ),
            U(h, R * D[5])
          ),
          U(d, R * D[6])
        )),
        (g = "number" == typeof p ? F(p) : j(p)),
        g > r)
      ) {
        if (((R = 0.2 * R * H(r / g, 0.25)), e + R === e)) {
          G.msg = "Step size became too small";
          break;
        }
      } else {
        if (
          ((C[M] = N(
            N(
              N(
                N(N(N(n, U(x[M], R * A[0])), U(l, R * A[2])), U(c, R * A[3])),
                U(u, R * A[4])
              ),
              U(h, R * A[5])
            ),
            U(d, R * A[6])
          )),
          ++M,
          (b[M] = e + R),
          (w[M] = m),
          (x[M] = d),
          "function" == typeof o)
        ) {
          var V,
            q,
            X = e,
            Y = e + 0.5 * R;
          if (
            ((_ = o(Y, C[M - 1])),
            (y = W(z(v, 0), z(0, _))),
            $(y) ||
              ((X = Y),
              (Y = e + R),
              (v = _),
              (_ = o(Y, m)),
              (y = W(z(v, 0), z(0, _)))),
            $(y))
          ) {
            for (var K, J, Q = 0, Z = 1, et = 1; ; ) {
              if ("number" == typeof v)
                q = (et * _ * X - Z * v * Y) / (et * _ - Z * v);
              else
                for (q = Y, f = v.length - 1; -1 !== f; --f)
                  v[f] < 0 &&
                    _[f] > 0 &&
                    (q = B(
                      q,
                      (et * _[f] * X - Z * v[f] * Y) / (et * _[f] - Z * v[f])
                    ));
              if (X >= q || q >= Y) break;
              (V = G._at(q, M - 1)),
                (J = o(q, V)),
                (K = W(z(v, 0), z(0, J))),
                $(K)
                  ? ((Y = q),
                    (_ = J),
                    (y = K),
                    (et = 1),
                    -1 === Q ? (Z *= 0.5) : (Z = 1),
                    (Q = -1))
                  : ((X = q),
                    (v = J),
                    (Z = 1),
                    1 === Q ? (et *= 0.5) : (et = 1),
                    (Q = 1));
            }
            return (
              (m = G._at(0.5 * (e + q), M - 1)),
              (G.f[M] = i(q, V)),
              (G.x[M] = q),
              (G.y[M] = V),
              (G.ymid[M - 1] = m),
              (G.events = y),
              (G.iterations = L),
              G
            );
          }
        }
        (e += R), (n = m), (v = _), (R = B(0.8 * R * H(r / g, 0.25), 4 * R));
      }
    return (G.iterations = L), G;
  }),
  (numeric.LU = function (e, t) {
    t = t || !1;
    var n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h = Math.abs,
      d = e.length,
      p = d - 1,
      f = new Array(d);
    for (t || (e = numeric.clone(e)), r = 0; d > r; ++r) {
      for (l = r, a = e[r], u = h(a[r]), i = r + 1; d > i; ++i)
        (s = h(e[i][r])), s > u && ((u = s), (l = i));
      for (
        f[r] = l,
          l != r && ((e[r] = e[l]), (e[l] = a), (a = e[r])),
          o = a[r],
          n = r + 1;
        d > n;
        ++n
      )
        e[n][r] /= o;
      for (n = r + 1; d > n; ++n) {
        for (c = e[n], i = r + 1; p > i; ++i)
          (c[i] -= c[r] * a[i]), ++i, (c[i] -= c[r] * a[i]);
        i === p && (c[i] -= c[r] * a[i]);
      }
    }
    return { LU: e, P: f };
  }),
  (numeric.LUsolve = function (e, t) {
    var n,
      i,
      r,
      s,
      o,
      a = e.LU,
      l = a.length,
      c = numeric.clone(t),
      u = e.P;
    for (n = l - 1; -1 !== n; --n) c[n] = t[n];
    for (n = 0; l > n; ++n)
      for (
        r = u[n],
          u[n] !== n && ((o = c[n]), (c[n] = c[r]), (c[r] = o)),
          s = a[n],
          i = 0;
        n > i;
        ++i
      )
        c[n] -= c[i] * s[i];
    for (n = l - 1; n >= 0; --n) {
      for (s = a[n], i = n + 1; l > i; ++i) c[n] -= c[i] * s[i];
      c[n] /= s[n];
    }
    return c;
  }),
  (numeric.solve = function (e, t, n) {
    return numeric.LUsolve(numeric.LU(e, n), t);
  }),
  (numeric.echelonize = function (e) {
    var t,
      n,
      i,
      r,
      s,
      o,
      a,
      l,
      c = numeric.dim(e),
      u = c[0],
      h = c[1],
      d = numeric.identity(u),
      p = Array(u),
      f = Math.abs,
      m = numeric.diveq;
    for (e = numeric.clone(e), t = 0; u > t; ++t) {
      for (i = 0, s = e[t], o = d[t], n = 1; h > n; ++n)
        f(s[i]) < f(s[n]) && (i = n);
      for (p[t] = i, m(o, s[i]), m(s, s[i]), n = 0; u > n; ++n)
        if (n !== t) {
          for (a = e[n], l = a[i], r = h - 1; -1 !== r; --r) a[r] -= s[r] * l;
          for (a = d[n], r = u - 1; -1 !== r; --r) a[r] -= o[r] * l;
        }
    }
    return { I: d, A: e, P: p };
  }),
  (numeric.__solveLP = function (e, t, n, i, r, s, o) {
    var a,
      l,
      c,
      u,
      h = numeric.sum,
      d = (numeric.log, numeric.mul),
      p = numeric.sub,
      f = numeric.dot,
      m = numeric.div,
      g = numeric.add,
      v = e.length,
      _ = n.length,
      y = !1,
      b = 0,
      w = 1,
      x = (numeric.transpose(t), numeric.svd, numeric.transpose),
      C = (numeric.leq, Math.sqrt),
      T = Math.abs,
      S = (numeric.muleq, numeric.norminf, numeric.any, Math.min),
      E = numeric.all,
      k = numeric.gt,
      P = Array(v),
      I = Array(_),
      A = (numeric.rep([_], 1), numeric.solve),
      O = p(n, f(t, s)),
      D = f(e, e);
    for (c = b; r > c; ++c) {
      var M, R;
      for (M = _ - 1; -1 !== M; --M) I[M] = m(t[M], O[M]);
      var L = x(I);
      for (M = v - 1; -1 !== M; --M) P[M] = h(L[M]);
      w = 0.25 * T(D / f(e, P));
      var N = 100 * C(D / f(P, P));
      for (
        (!isFinite(w) || w > N) && (w = N),
          u = g(e, d(w, P)),
          l = f(L, I),
          M = v - 1;
        -1 !== M;
        --M
      )
        l[M][M] += 1;
      R = A(l, m(u, w), !0);
      var U = m(O, f(t, R)),
        B = 1;
      for (M = _ - 1; -1 !== M; --M) U[M] < 0 && (B = S(B, -0.999 * U[M]));
      if (((a = p(s, d(R, B))), (O = p(n, f(t, a))), !E(k(O, 0))))
        return { solution: s, message: "", iterations: c };
      if (((s = a), i > w)) return { solution: a, message: "", iterations: c };
      if (o) {
        var F = f(e, u),
          j = f(t, u);
        for (y = !0, M = _ - 1; -1 !== M; --M)
          if (F * j[M] < 0) {
            y = !1;
            break;
          }
      } else y = s[v - 1] >= 0 ? !1 : !0;
      if (y) return { solution: a, message: "Unbounded", iterations: c };
    }
    return {
      solution: s,
      message: "maximum iteration count exceeded",
      iterations: c,
    };
  }),
  (numeric._solveLP = function (e, t, n, i, r) {
    var s,
      o = e.length,
      a = n.length,
      l = (numeric.sum, numeric.log, numeric.mul, numeric.sub),
      c = numeric.dot,
      u = (numeric.div, numeric.add, numeric.rep([o], 0).concat([1])),
      h = numeric.rep([a, 1], -1),
      d = numeric.blockMatrix([[t, h]]),
      p = n,
      s = numeric
        .rep([o], 0)
        .concat(Math.max(0, numeric.sup(numeric.neg(n))) + 1),
      f = numeric.__solveLP(u, d, p, i, r, s, !1),
      m = numeric.clone(f.solution);
    m.length = o;
    var g = numeric.inf(l(n, c(t, m)));
    if (0 > g)
      return {
        solution: 0 / 0,
        message: "Infeasible",
        iterations: f.iterations,
      };
    var v = numeric.__solveLP(e, t, n, i, r - f.iterations, m, !0);
    return (v.iterations += f.iterations), v;
  }),
  (numeric.solveLP = function (e, t, n, i, r, s, o) {
    if (
      ("undefined" == typeof o && (o = 1e3),
      "undefined" == typeof s && (s = numeric.epsilon),
      "undefined" == typeof i)
    )
      return numeric._solveLP(e, t, n, s, o);
    var a,
      l = i.length,
      c = i[0].length,
      u = t.length,
      h = numeric.echelonize(i),
      d = numeric.rep([c], 0),
      p = h.P,
      f = [];
    for (a = p.length - 1; -1 !== a; --a) d[p[a]] = 1;
    for (a = c - 1; -1 !== a; --a) 0 === d[a] && f.push(a);
    var m = numeric.getRange,
      g = numeric.linspace(0, l - 1),
      v = numeric.linspace(0, u - 1),
      _ = m(i, g, f),
      y = m(t, v, p),
      b = m(t, v, f),
      w = numeric.dot,
      x = numeric.sub,
      C = w(y, h.I),
      T = x(b, w(C, _)),
      S = x(n, w(C, r)),
      E = Array(p.length),
      k = Array(f.length);
    for (a = p.length - 1; -1 !== a; --a) E[a] = e[p[a]];
    for (a = f.length - 1; -1 !== a; --a) k[a] = e[f[a]];
    var P = x(k, w(E, w(h.I, _))),
      I = numeric._solveLP(P, T, S, s, o),
      A = I.solution;
    if (A !== A) return I;
    var O = w(h.I, x(r, w(_, A))),
      D = Array(e.length);
    for (a = p.length - 1; -1 !== a; --a) D[p[a]] = O[a];
    for (a = f.length - 1; -1 !== a; --a) D[f[a]] = A[a];
    return { solution: D, message: I.message, iterations: I.iterations };
  }),
  (numeric.MPStoLP = function (e) {
    function t(t) {
      throw new Error(
        "MPStoLP: " +
          t +
          "\nLine " +
          n +
          ": " +
          e[n] +
          "\nCurrent state: " +
          a[o] +
          "\n"
      );
    }
    e instanceof String && e.split("\n");
    var n,
      i,
      r,
      s,
      o = 0,
      a = [
        "Initial state",
        "NAME",
        "ROWS",
        "COLUMNS",
        "RHS",
        "BOUNDS",
        "ENDATA",
      ],
      l = e.length,
      c = 0,
      u = {},
      h = [],
      d = 0,
      p = {},
      f = 0,
      m = [],
      g = [],
      v = [];
    for (n = 0; l > n; ++n) {
      r = e[n];
      var _ = r.match(/\S*/g),
        y = [];
      for (i = 0; i < _.length; ++i) "" !== _[i] && y.push(_[i]);
      if (0 !== y.length) {
        for (i = 0; i < a.length && r.substr(0, a[i].length) !== a[i]; ++i);
        if (i < a.length) {
          if (((o = i), 1 === i && (s = y[1]), 6 === i))
            return {
              name: s,
              c: m,
              A: numeric.transpose(g),
              b: v,
              rows: u,
              vars: p,
            };
        } else
          switch (o) {
            case 0:
            case 1:
              t("Unexpected line");
            case 2:
              switch (y[0]) {
                case "N":
                  0 === c ? (c = y[1]) : t("Two or more N rows");
                  break;
                case "L":
                  (u[y[1]] = d), (h[d] = 1), (v[d] = 0), ++d;
                  break;
                case "G":
                  (u[y[1]] = d), (h[d] = -1), (v[d] = 0), ++d;
                  break;
                case "E":
                  (u[y[1]] = d), (h[d] = 0), (v[d] = 0), ++d;
                  break;
                default:
                  t("Parse error " + numeric.prettyPrint(y));
              }
              break;
            case 3:
              p.hasOwnProperty(y[0]) ||
                ((p[y[0]] = f), (m[f] = 0), (g[f] = numeric.rep([d], 0)), ++f);
              var b = p[y[0]];
              for (i = 1; i < y.length; i += 2)
                if (y[i] !== c) {
                  var w = u[y[i]];
                  g[b][w] = (h[w] < 0 ? -1 : 1) * parseFloat(y[i + 1]);
                } else m[b] = parseFloat(y[i + 1]);
              break;
            case 4:
              for (i = 1; i < y.length; i += 2)
                v[u[y[i]]] = (h[u[y[i]]] < 0 ? -1 : 1) * parseFloat(y[i + 1]);
              break;
            case 5:
              break;
            case 6:
              t("Internal error");
          }
      }
    }
    t("Reached end of file without ENDATA");
  }),
  (numeric.seedrandom = { pow: Math.pow, random: Math.random }),
  (function (e, t, n, i, r, s, o) {
    function a(e) {
      var t,
        i,
        r = this,
        s = e.length,
        o = 0,
        a = (r.i = r.j = r.m = 0);
      for (r.S = [], r.c = [], s || (e = [s++]); n > o; ) r.S[o] = o++;
      for (o = 0; n > o; o++)
        (t = r.S[o]),
          (a = u(a + t + e[o % s])),
          (i = r.S[a]),
          (r.S[o] = i),
          (r.S[a] = t);
      (r.g = function (e) {
        var t = r.S,
          i = u(r.i + 1),
          s = t[i],
          o = u(r.j + s),
          a = t[o];
        (t[i] = a), (t[o] = s);
        for (var l = t[u(s + a)]; --e; )
          (i = u(i + 1)),
            (s = t[i]),
            (o = u(o + s)),
            (a = t[o]),
            (t[i] = a),
            (t[o] = s),
            (l = l * n + t[u(s + a)]);
        return (r.i = i), (r.j = o), l;
      }),
        r.g(n);
    }
    function l(e, t, n, i, r) {
      if (((n = []), (r = typeof e), t && "object" == r))
        for (i in e)
          if (i.indexOf("S") < 5)
            try {
              n.push(l(e[i], t - 1));
            } catch (s) {}
      return n.length ? n : e + ("string" != r ? "\x00" : "");
    }
    function c(e, t, n, i) {
      for (e += "", n = 0, i = 0; i < e.length; i++)
        t[u(i)] = u((n ^= 19 * t[u(i)]) + e.charCodeAt(i));
      e = "";
      for (i in t) e += String.fromCharCode(t[i]);
      return e;
    }
    function u(e) {
      return e & (n - 1);
    }
    (t.seedrandom = function (u, h) {
      var d,
        p = [];
      return (
        (u = c(
          l(
            h
              ? [u, e]
              : arguments.length
              ? u
              : [new Date().getTime(), e, window],
            3
          ),
          p
        )),
        (d = new a(p)),
        c(d.S, e),
        (t.random = function () {
          for (var e = d.g(i), t = o, a = 0; r > e; )
            (e = (e + a) * n), (t *= n), (a = d.g(1));
          for (; e >= s; ) (e /= 2), (t /= 2), (a >>>= 1);
          return (e + a) / t;
        }),
        u
      );
    }),
      (o = t.pow(n, i)),
      (r = t.pow(2, r)),
      (s = 2 * r),
      c(t.random(), e);
  })([], numeric.seedrandom, 256, 6, 52),
  (function (e) {
    function t(e) {
      if ("object" != typeof e) return e;
      var n,
        i = [],
        r = e.length;
      for (n = 0; r > n; n++) i[n + 1] = t(e[n]);
      return i;
    }
    function n(e) {
      if ("object" != typeof e) return e;
      var t,
        i = [],
        r = e.length;
      for (t = 1; r > t; t++) i[t - 1] = n(e[t]);
      return i;
    }
    function i(e, t, n) {
      var i, r, s, o, a;
      for (s = 1; n >= s; s += 1) {
        for (e[s][s] = 1 / e[s][s], a = -e[s][s], i = 1; s > i; i += 1)
          e[i][s] = a * e[i][s];
        if (((o = s + 1), o > n)) break;
        for (r = o; n >= r; r += 1)
          for (a = e[s][r], e[s][r] = 0, i = 1; s >= i; i += 1)
            e[i][r] = e[i][r] + a * e[i][s];
      }
    }
    function r(e, t, n, i) {
      var r, s, o, a;
      for (s = 1; n >= s; s += 1) {
        for (a = 0, r = 1; s > r; r += 1) a += e[r][s] * i[r];
        i[s] = (i[s] - a) / e[s][s];
      }
      for (o = 1; n >= o; o += 1)
        for (
          s = n + 1 - o, i[s] = i[s] / e[s][s], a = -i[s], r = 1;
          s > r;
          r += 1
        )
          i[r] = i[r] + a * e[r][s];
    }
    function s(e, t, n, i) {
      var r, s, o, a, l, c;
      for (s = 1; n >= s; s += 1) {
        if (((i[1] = s), (c = 0), (o = s - 1), 1 > o)) {
          if (((c = e[s][s] - c), 0 >= c)) break;
          e[s][s] = Math.sqrt(c);
        } else {
          for (a = 1; o >= a; a += 1) {
            for (l = e[a][s], r = 1; a > r; r += 1) l -= e[r][s] * e[r][a];
            (l /= e[a][a]), (e[a][s] = l), (c += l * l);
          }
          if (((c = e[s][s] - c), 0 >= c)) break;
          e[s][s] = Math.sqrt(c);
        }
        i[1] = 0;
      }
    }
    function o(e, t, n, o, a, l, c, u, h, d, p, f, m, g, v, _) {
      function y() {
        for (g[1] = g[1] + 1, E = M, T = 1; d >= T; T += 1) {
          for (E += 1, F = -u[T], S = 1; o >= S; S += 1) F += c[S][T] * a[S];
          if ((Math.abs(F) < q && (F = 0), T > p)) v[E] = F;
          else if (((v[E] = -Math.abs(F)), F > 0)) {
            for (S = 1; o >= S; S += 1) c[S][T] = -c[S][T];
            u[T] = -u[T];
          }
        }
        for (T = 1; m >= T; T += 1) v[M + f[T]] = 0;
        for (L = 0, B = 0, T = 1; d >= T; T += 1)
          v[M + T] < B * v[U + T] && ((L = T), (B = v[M + T] / v[U + T]));
        return 0 === L ? 999 : 0;
      }
      function b() {
        for (T = 1; o >= T; T += 1) {
          for (F = 0, S = 1; o >= S; S += 1) F += e[S][T] * c[S][L];
          v[T] = F;
        }
        for (k = A, T = 1; o >= T; T += 1) v[k + T] = 0;
        for (S = m + 1; o >= S; S += 1)
          for (T = 1; o >= T; T += 1) v[k + T] = v[k + T] + e[T][S] * v[S];
        for (G = !0, T = m; T >= 1; T -= 1) {
          for (
            F = v[T], E = D + (T * (T + 3)) / 2, k = E - T, S = T + 1;
            m >= S;
            S += 1
          )
            (F -= v[E] * v[O + S]), (E += S);
          if (((F /= v[k]), (v[O + T] = F), f[T] < p)) break;
          if (0 > F) break;
          (G = !1), (I = T);
        }
        if (!G)
          for (
            j = v[R + I] / v[O + I], T = 1;
            m >= T && !(f[T] < p) && !(v[O + T] < 0);
            T += 1
          )
            (B = v[R + T] / v[O + T]), j > B && ((j = B), (I = T));
        for (F = 0, T = A + 1; A + o >= T; T += 1) F += v[T] * v[T];
        if (Math.abs(F) <= q) {
          if (G) return (_[1] = 1), 999;
          for (T = 1; m >= T; T += 1) v[R + T] = v[R + T] - j * v[O + T];
          return (v[R + m + 1] = v[R + m + 1] + j), 700;
        }
        for (F = 0, T = 1; o >= T; T += 1) F += v[A + T] * c[T][L];
        for (
          H = -v[M + L] / F, V = !0, G || (H > j && ((H = j), (V = !1))), T = 1;
          o >= T;
          T += 1
        )
          (a[T] = a[T] + H * v[A + T]), Math.abs(a[T]) < q && (a[T] = 0);
        for (
          l[1] = l[1] + H * F * (H / 2 + v[R + m + 1]), T = 1;
          m >= T;
          T += 1
        )
          v[R + T] = v[R + T] - H * v[O + T];
        if (((v[R + m + 1] = v[R + m + 1] + H), !V)) {
          for (F = -u[L], S = 1; o >= S; S += 1) F += a[S] * c[S][L];
          if (L > p) v[M + L] = F;
          else if (((v[M + L] = -Math.abs(F)), F > 0)) {
            for (S = 1; o >= S; S += 1) c[S][L] = -c[S][L];
            u[L] = -u[L];
          }
          return 700;
        }
        for (
          m += 1, f[m] = L, E = D + ((m - 1) * m) / 2 + 1, T = 1;
          m - 1 >= T;
          T += 1
        )
          (v[E] = v[T]), (E += 1);
        if (m === o) v[E] = v[o];
        else {
          for (
            T = o;
            T >= m + 1 &&
            0 !== v[T] &&
            (($ = Math.max(Math.abs(v[T - 1]), Math.abs(v[T]))),
            (z = Math.min(Math.abs(v[T - 1]), Math.abs(v[T]))),
            (B =
              v[T - 1] >= 0
                ? Math.abs($ * Math.sqrt(1 + (z * z) / ($ * $)))
                : -Math.abs($ * Math.sqrt(1 + (z * z) / ($ * $)))),
            ($ = v[T - 1] / B),
            (z = v[T] / B),
            1 !== $);
            T -= 1
          )
            if (0 === $)
              for (v[T - 1] = z * B, S = 1; o >= S; S += 1)
                (B = e[S][T - 1]), (e[S][T - 1] = e[S][T]), (e[S][T] = B);
            else
              for (v[T - 1] = B, W = z / (1 + $), S = 1; o >= S; S += 1)
                (B = $ * e[S][T - 1] + z * e[S][T]),
                  (e[S][T] = W * (e[S][T - 1] + B) - e[S][T]),
                  (e[S][T - 1] = B);
          v[E] = v[m];
        }
        return 0;
      }
      function w() {
        if (((E = D + (I * (I + 1)) / 2 + 1), (k = E + I), 0 === v[k]))
          return 798;
        if (
          (($ = Math.max(Math.abs(v[k - 1]), Math.abs(v[k]))),
          (z = Math.min(Math.abs(v[k - 1]), Math.abs(v[k]))),
          (B =
            v[k - 1] >= 0
              ? Math.abs($ * Math.sqrt(1 + (z * z) / ($ * $)))
              : -Math.abs($ * Math.sqrt(1 + (z * z) / ($ * $)))),
          ($ = v[k - 1] / B),
          (z = v[k] / B),
          1 === $)
        )
          return 798;
        if (0 === $) {
          for (T = I + 1; m >= T; T += 1)
            (B = v[k - 1]), (v[k - 1] = v[k]), (v[k] = B), (k += T);
          for (T = 1; o >= T; T += 1)
            (B = e[T][I]), (e[T][I] = e[T][I + 1]), (e[T][I + 1] = B);
        } else {
          for (W = z / (1 + $), T = I + 1; m >= T; T += 1)
            (B = $ * v[k - 1] + z * v[k]),
              (v[k] = W * (v[k - 1] + B) - v[k]),
              (v[k - 1] = B),
              (k += T);
          for (T = 1; o >= T; T += 1)
            (B = $ * e[T][I] + z * e[T][I + 1]),
              (e[T][I + 1] = W * (e[T][I] + B) - e[T][I + 1]),
              (e[T][I] = B);
        }
        return 0;
      }
      function x() {
        for (k = E - I, T = 1; I >= T; T += 1)
          (v[k] = v[E]), (E += 1), (k += 1);
        return (
          (v[R + I] = v[R + I + 1]),
          (f[I] = f[I + 1]),
          (I += 1),
          m > I ? 797 : 0
        );
      }
      function C() {
        return (
          (v[R + m] = v[R + m + 1]),
          (v[R + m + 1] = 0),
          (f[m] = 0),
          (m -= 1),
          (g[2] = g[2] + 1),
          0
        );
      }
      var T,
        S,
        E,
        k,
        P,
        I,
        A,
        O,
        D,
        M,
        R,
        L,
        N,
        U,
        B,
        F,
        j,
        H,
        $,
        z,
        W,
        G,
        V,
        q,
        X,
        Y,
        K;
      (N = Math.min(o, d)),
        (E = 2 * o + (N * (N + 5)) / 2 + 2 * d + 1),
        (q = 1e-60);
      do (q += q), (X = 1 + 0.1 * q), (Y = 1 + 0.2 * q);
      while (1 >= X || 1 >= Y);
      for (T = 1; o >= T; T += 1) v[T] = t[T];
      for (T = o + 1; E >= T; T += 1) v[T] = 0;
      for (T = 1; d >= T; T += 1) f[T] = 0;
      if (((P = []), 0 === _[1])) {
        if ((s(e, n, o, P), 0 !== P[1])) return void (_[1] = 2);
        r(e, n, o, t), i(e, n, o);
      } else {
        for (S = 1; o >= S; S += 1)
          for (a[S] = 0, T = 1; S >= T; T += 1) a[S] = a[S] + e[T][S] * t[T];
        for (S = 1; o >= S; S += 1)
          for (t[S] = 0, T = S; o >= T; T += 1) t[S] = t[S] + e[S][T] * a[T];
      }
      for (l[1] = 0, S = 1; o >= S; S += 1)
        for (
          a[S] = t[S], l[1] = l[1] + v[S] * a[S], v[S] = 0, T = S + 1;
          o >= T;
          T += 1
        )
          e[T][S] = 0;
      for (
        l[1] = -l[1] / 2,
          _[1] = 0,
          A = o,
          O = A + o,
          R = O + N,
          D = R + N + 1,
          M = D + (N * (N + 1)) / 2,
          U = M + d,
          T = 1;
        d >= T;
        T += 1
      ) {
        for (F = 0, S = 1; o >= S; S += 1) F += c[S][T] * c[S][T];
        v[U + T] = Math.sqrt(F);
      }
      for (m = 0, g[1] = 0, g[2] = 0, K = 0; ; ) {
        if (((K = y()), 999 === K)) return;
        for (; (K = b()), 0 !== K; ) {
          if (999 === K) return;
          if (700 === K)
            if (I === m) C();
            else {
              for (; w(), (K = x()), 797 === K; );
              C();
            }
        }
      }
    }
    function a(e, i, r, s, a, l) {
      (e = t(e)), (i = t(i)), (r = t(r));
      var c,
        u,
        h,
        d,
        p,
        f,
        m = [],
        g = [],
        v = [],
        _ = [],
        y = [];
      if (
        ((a = a || 0),
        (l = l ? t(l) : [void 0, 0]),
        (s = s ? t(s) : []),
        (u = e.length - 1),
        (h = r[1].length - 1),
        !s)
      )
        for (c = 1; h >= c; c += 1) s[c] = 0;
      for (c = 1; h >= c; c += 1) g[c] = 0;
      for (d = 0, p = Math.min(u, h), c = 1; u >= c; c += 1) v[c] = 0;
      for (m[1] = 0, c = 1; 2 * u + (p * (p + 5)) / 2 + 2 * h + 1 >= c; c += 1)
        _[c] = 0;
      for (c = 1; 2 >= c; c += 1) y[c] = 0;
      return (
        o(e, i, u, u, v, m, r, s, u, h, a, g, d, y, _, l),
        (f = ""),
        1 === l[1] && (f = "constraints are inconsistent, no solution!"),
        2 === l[1] &&
          (f = "matrix D in quadratic function is not positive definite!"),
        {
          solution: n(v),
          value: n(m),
          unconstrained_solution: n(i),
          iterations: n(y),
          iact: n(g),
          message: f,
        }
      );
    }
    e.solveQP = a;
  })(numeric),
  (numeric.svd = function (e) {
    function t(e, t) {
      return (
        (e = Math.abs(e)),
        (t = Math.abs(t)),
        e > t
          ? e * Math.sqrt(1 + (t * t) / e / e)
          : 0 == t
          ? e
          : t * Math.sqrt(1 + (e * e) / t / t)
      );
    }
    var n,
      i = numeric.epsilon,
      r = 1e-64 / i,
      s = 50,
      o = 0,
      a = 0,
      l = 0,
      c = 0,
      u = 0,
      h = numeric.clone(e),
      d = h.length,
      p = h[0].length;
    if (p > d) throw "Need more rows than columns";
    var f = new Array(p),
      m = new Array(p);
    for (a = 0; p > a; a++) f[a] = m[a] = 0;
    var g = numeric.rep([p, p], 0),
      v = 0,
      _ = 0,
      y = 0,
      b = 0,
      w = 0,
      x = 0,
      C = 0;
    for (a = 0; p > a; a++) {
      for (f[a] = _, C = 0, u = a + 1, l = a; d > l; l++)
        C += h[l][a] * h[l][a];
      if (r >= C) _ = 0;
      else
        for (
          v = h[a][a],
            _ = Math.sqrt(C),
            v >= 0 && (_ = -_),
            y = v * _ - C,
            h[a][a] = v - _,
            l = u;
          p > l;
          l++
        ) {
          for (C = 0, c = a; d > c; c++) C += h[c][a] * h[c][l];
          for (v = C / y, c = a; d > c; c++) h[c][l] += v * h[c][a];
        }
      for (m[a] = _, C = 0, l = u; p > l; l++) C += h[a][l] * h[a][l];
      if (r >= C) _ = 0;
      else {
        for (
          v = h[a][a + 1],
            _ = Math.sqrt(C),
            v >= 0 && (_ = -_),
            y = v * _ - C,
            h[a][a + 1] = v - _,
            l = u;
          p > l;
          l++
        )
          f[l] = h[a][l] / y;
        for (l = u; d > l; l++) {
          for (C = 0, c = u; p > c; c++) C += h[l][c] * h[a][c];
          for (c = u; p > c; c++) h[l][c] += C * f[c];
        }
      }
      (w = Math.abs(m[a]) + Math.abs(f[a])), w > b && (b = w);
    }
    for (a = p - 1; -1 != a; a += -1) {
      if (0 != _) {
        for (y = _ * h[a][a + 1], l = u; p > l; l++) g[l][a] = h[a][l] / y;
        for (l = u; p > l; l++) {
          for (C = 0, c = u; p > c; c++) C += h[a][c] * g[c][l];
          for (c = u; p > c; c++) g[c][l] += C * g[c][a];
        }
      }
      for (l = u; p > l; l++) (g[a][l] = 0), (g[l][a] = 0);
      (g[a][a] = 1), (_ = f[a]), (u = a);
    }
    for (a = p - 1; -1 != a; a += -1) {
      for (u = a + 1, _ = m[a], l = u; p > l; l++) h[a][l] = 0;
      if (0 != _) {
        for (y = h[a][a] * _, l = u; p > l; l++) {
          for (C = 0, c = u; d > c; c++) C += h[c][a] * h[c][l];
          for (v = C / y, c = a; d > c; c++) h[c][l] += v * h[c][a];
        }
        for (l = a; d > l; l++) h[l][a] = h[l][a] / _;
      } else for (l = a; d > l; l++) h[l][a] = 0;
      h[a][a] += 1;
    }
    for (i *= b, c = p - 1; -1 != c; c += -1)
      for (var T = 0; s > T; T++) {
        var S = !1;
        for (u = c; -1 != u; u += -1) {
          if (Math.abs(f[u]) <= i) {
            S = !0;
            break;
          }
          if (Math.abs(m[u - 1]) <= i) break;
        }
        if (!S) {
          (o = 0), (C = 1);
          var E = u - 1;
          for (
            a = u;
            c + 1 > a &&
            ((v = C * f[a]), (f[a] = o * f[a]), !(Math.abs(v) <= i));
            a++
          )
            for (
              _ = m[a], y = t(v, _), m[a] = y, o = _ / y, C = -v / y, l = 0;
              d > l;
              l++
            )
              (w = h[l][E]),
                (x = h[l][a]),
                (h[l][E] = w * o + x * C),
                (h[l][a] = -w * C + x * o);
        }
        if (((x = m[c]), u == c)) {
          if (0 > x) for (m[c] = -x, l = 0; p > l; l++) g[l][c] = -g[l][c];
          break;
        }
        if (T >= s - 1) throw "Error: no convergence.";
        for (
          b = m[u],
            w = m[c - 1],
            _ = f[c - 1],
            y = f[c],
            v = ((w - x) * (w + x) + (_ - y) * (_ + y)) / (2 * y * w),
            _ = t(v, 1),
            v =
              0 > v
                ? ((b - x) * (b + x) + y * (w / (v - _) - y)) / b
                : ((b - x) * (b + x) + y * (w / (v + _) - y)) / b,
            o = 1,
            C = 1,
            a = u + 1;
          c + 1 > a;
          a++
        ) {
          for (
            _ = f[a],
              w = m[a],
              y = C * _,
              _ = o * _,
              x = t(v, y),
              f[a - 1] = x,
              o = v / x,
              C = y / x,
              v = b * o + _ * C,
              _ = -b * C + _ * o,
              y = w * C,
              w *= o,
              l = 0;
            p > l;
            l++
          )
            (b = g[l][a - 1]),
              (x = g[l][a]),
              (g[l][a - 1] = b * o + x * C),
              (g[l][a] = -b * C + x * o);
          for (
            x = t(v, y),
              m[a - 1] = x,
              o = v / x,
              C = y / x,
              v = o * _ + C * w,
              b = -C * _ + o * w,
              l = 0;
            d > l;
            l++
          )
            (w = h[l][a - 1]),
              (x = h[l][a]),
              (h[l][a - 1] = w * o + x * C),
              (h[l][a] = -w * C + x * o);
        }
        (f[u] = 0), (f[c] = v), (m[c] = b);
      }
    for (a = 0; a < m.length; a++) m[a] < i && (m[a] = 0);
    for (a = 0; p > a; a++)
      for (l = a - 1; l >= 0; l--)
        if (m[l] < m[a]) {
          for (o = m[l], m[l] = m[a], m[a] = o, c = 0; c < h.length; c++)
            (n = h[c][a]), (h[c][a] = h[c][l]), (h[c][l] = n);
          for (c = 0; c < g.length; c++)
            (n = g[c][a]), (g[c][a] = g[c][l]), (g[c][l] = n);
          a = l;
        }
    return { U: h, S: m, V: g };
  }),
  (function (e, t) {
    "object" == typeof exports && "object" == typeof module
      ? (module.exports = t(
          (function () {
            try {
              return require("pixi.js");
            } catch (e) {}
          })()
        ))
      : "function" == typeof define && define.amd
      ? define(["pixi.js"], t)
      : "object" == typeof exports
      ? (exports.SVGGraphics = t(
          (function () {
            try {
              return require("pixi.js");
            } catch (e) {}
          })()
        ))
      : (e.SVGGraphics = t(e.PIXI));
  })(this, function (e) {
    return (function (e) {
      function t(i) {
        if (n[i]) return n[i].exports;
        var r = (n[i] = { exports: {}, id: i, loaded: !1 });
        return (
          e[i].call(r.exports, r, r.exports, t), (r.loaded = !0), r.exports
        );
      }
      var n = {};
      return (t.m = e), (t.c = n), (t.p = ""), t(0);
    })([
      function (e, t, n) {
        function i(e) {
          r.Graphics.call(this),
            (this._scale = 1),
            (this._svg = e),
            (this._wt = new r.Matrix()),
            (this._classes = {}),
            (this._lineWidth = 0),
            (this._nonScaling = !1),
            e && this.drawSVG(e);
        }
        try {
          var r = n(1);
        } catch (s) {
          var r = window.PIXI;
          console.log(s);
        }
        var o = n(2);
        (r.Graphics.prototype.lineTo2 = function (e, t) {
          if (this.lineDashed) {
            var n = this.currentPath.shape.points,
              i = n[n.length - 2],
              r = n[n.length - 1],
              s = Math.abs(Math.sqrt(Math.pow(e - i, 2) + Math.pow(t - r, 2)));
            if (s <= this.lineDashLength)
              this.currentPath.shape.points.push(e, t);
            else {
              for (
                var o,
                  a,
                  l = this.lineSpaceLength / s,
                  c = this.lineDashLength / s,
                  u = c,
                  h = !1,
                  d = u;
                1 >= d;
                d += u
              ) {
                var p = Math.max(Math.min(d, 1), 0);
                (o = i + p * (e - i)),
                  (a = r + p * (t - r)),
                  (h = !h),
                  h
                    ? ((u = l), this.currentPath.shape.points.push(o, a))
                    : ((u = c),
                      (this.currentPath.shape.closed = !1),
                      this.moveTo(o, a));
              }
              (h = !h),
                h &&
                  o != e &&
                  a != t &&
                  this.currentPath.shape.points.push(e, t);
            }
          } else this.currentPath.shape.points.push(e, t);
          return (this.dirtyScale = !0), this;
        }),
          (r.Graphics.prototype.bezierCurveTo2 = function (e, t, n, i, r, s) {
            this.currentPath
              ? 0 === this.currentPath.shape.points.length &&
                (this.currentPath.shape.points = [0, 0])
              : this.moveTo(0, 0);
            for (
              var o,
                a,
                l,
                c,
                u,
                h = this.lineSegments,
                d = this.currentPath.shape.points,
                p = d[d.length - 2],
                f = d[d.length - 1],
                m = 0,
                g = 1,
                v = null,
                _ = null,
                y = 1;
              h >= y;
              y++
            )
              if (
                ((m = y / h),
                (o = 1 - m),
                (a = o * o),
                (l = a * o),
                (c = m * m),
                (u = c * m),
                (nPx = l * p + 3 * a * m * e + 3 * o * c * n + u * r),
                (nPy = l * f + 3 * a * m * t + 3 * o * c * i + u * s),
                this.lineDashed)
              ) {
                null == v && ((v = nPx), (_ = nPy));
                var b = Math.abs(
                  Math.sqrt(Math.pow(nPx - v, 2) + Math.pow(nPy - _, 2))
                );
                0 == g
                  ? b >= this.lineSpaceLength &&
                    ((v = nPx),
                    (_ = nPy),
                    (this.currentPath.shape.closed = !1),
                    this.moveTo(nPx, nPy),
                    (d = this.currentPath.shape.points),
                    (g = 1))
                  : 1 == g &&
                    (b <= this.lineDashLength
                      ? d.push(nPx, nPy)
                      : ((v = nPx), (_ = nPy), (g = 0)));
              } else d.push(nPx, nPy);
            return (
              (this.currentPath.shape.closed = !1), (this.dirtyScale = !0), this
            );
          }),
          (r.Graphics.prototype.quadraticCurveTo2 = function (e, t, n, i) {
            this.currentPath
              ? 0 === this.currentPath.shape.points.length &&
                (this.currentPath.shape.points = [0, 0])
              : this.moveTo(0, 0);
            var r,
              s,
              o = this.lineSegments,
              a = this.currentPath.shape.points;
            0 === a.length && this.moveTo(0, 0);
            for (
              var l = a[a.length - 2],
                c = a[a.length - 1],
                u = 0,
                h = 1,
                d = null,
                p = null,
                f = 1;
              o >= f;
              f++
            )
              if (
                ((u = f / o),
                (r = l + (e - l) * u),
                (s = c + (t - c) * u),
                (nPx = r + (e + (n - e) * u - r) * u),
                (nPy = s + (t + (i - t) * u - s) * u),
                this.lineDashed)
              ) {
                null == d && ((d = nPx), (p = nPy));
                var m = Math.abs(
                  Math.sqrt(Math.pow(nPx - d, 2) + Math.pow(nPy - p, 2))
                );
                0 == h
                  ? m >= this.lineSpaceLength &&
                    ((d = nPx),
                    (p = nPy),
                    (this.currentPath.shape.closed = !1),
                    this.moveTo(nPx, nPy),
                    (a = this.currentPath.shape.points),
                    (h = 1))
                  : 1 == h &&
                    (m <= this.lineDashLength
                      ? a.push(nPx, nPy)
                      : ((d = nPx), (p = nPy), (h = 0)));
              } else a.push(nPx, nPy);
            return (this.dirtyScale = !0), this;
          }),
          (i.prototype = Object.create(r.Graphics.prototype)),
          (i.prototype.clone = function () {
            var e = new i(this._svg);
            (e.children = []),
              (e.scale = new r.Point(this.scale.x, this.scale.y)),
              (e.rotation = this.rotation),
              (e.x = this.x),
              (e.y = this.y);
            for (var t = 0; t < this.children.length; t++) {
              var n = this.children[t],
                s = n.clone();
              e.addChild(s);
            }
            return e;
          }),
          (i.prototype.drawNode = function (e) {
            var t = e.tagName,
              n = t.charAt(0).toUpperCase() + t.slice(1);
            if ((this.applyTransformation(e), this["draw" + n + "Node"])) {
              if ("Svg" == n) {
                var i = e.getAttribute("width"),
                  r = e.getAttribute("height");
                this.beginFill(0, 0).drawRect(0, 0, parseInt(i), parseInt(r));
              }
              this["draw" + n + "Node"](e);
            } else console.warn("No drawing behavior for " + n + " node");
          }),
          (i.prototype.drawSvgNode = function (e) {
            for (var t = e.children || e.childNodes, n = 0; n < t.length; n++) {
              var i = t[n];
              if ("style" == i.tagName)
                for (
                  var r = /{([^}]*)}/g,
                    s = /\.([^{;]*){/g,
                    o = i.childNodes[0].data.match(s),
                    a = i.childNodes[0].data.match(r),
                    l = 0;
                  l < o.length;
                  l++
                ) {
                  var c = o[l].substring(1, o[l].length - 1),
                    u = a[l].substring(1, a[l].length - 1);
                  this._classes[c] = u;
                }
            }
            this.drawGNode(e);
          }),
          (i.prototype.drawGNode = function (e) {
            for (
              var t, n = e.children || e.childNodes, i = 0, r = n.length;
              r > i;
              i++
            )
              (t = n[i]), 1 === t.nodeType && this.drawNode(t);
          }),
          (i.prototype.drawTextNode = function (e) {
            for (
              var t = e.getAttribute("style").split(";"), n = {}, i = 0;
              i < t.length;
              i++
            ) {
              var s = t[i].split(":"),
                o = s[0],
                a = s[1];
              n[o] = a;
            }
            var l = n["font-family"],
              c = n["font-size"],
              u = n.fill,
              h = e.childNodes[0],
              d = h.innerHTML || h.textContent,
              p = new r.Text(d, { fontFamily: l, fontSize: c, fill: u }),
              f = h.getAttribute("x") || e.getAttribute("x") || 0,
              m = h.getAttribute("y") || e.getAttribute("y") || 0;
            (p.x = parseInt(f)),
              (p.y =
                parseInt(m) - p.height + r.TextMetrics._fonts[p._font].descent),
              this.addChild(p);
          }),
          (i.prototype.drawLineNode = function (e) {
            this.parseSvgAttributes(e);
            var t = l(e.getAttribute("x1")),
              n = l(e.getAttribute("y1")),
              i = l(e.getAttribute("x2")),
              r = l(e.getAttribute("y2"));
            this.moveTo(t, n), this.lineTo2(i, r);
          }),
          (i.prototype.drawPolylineNode = function (e) {
            this.parseSvgAttributes(e);
            for (
              var t,
                n = "(-?[\\d\\.?]+),(-?[\\d\\.?]+)",
                i = e.getAttribute("points").match(new RegExp(n, "g")),
                r = 0,
                s = i.length;
              s > r;
              r++
            ) {
              t = i[r];
              var o = t.match(new RegExp(n));
              (o[1] = l(o[1])),
                (o[2] = l(o[2])),
                0 === r ? this.moveTo(o[1], o[2]) : this.lineTo2(o[1], o[2]);
            }
          }),
          (i.prototype.drawCircleNode = function (e) {
            this.parseSvgAttributes(e);
            var t = l(e.getAttribute("cx")),
              n = l(e.getAttribute("cy")),
              i = l(e.getAttribute("r"));
            this.drawCircle(t, n, i);
          }),
          (i.prototype.drawEllipseNode = function (e) {
            this.parseSvgAttributes(e);
            var t = l(e.getAttribute("cx")),
              n = l(e.getAttribute("cy")),
              i = l(e.getAttribute("rx")),
              r = l(e.getAttribute("ry"));
            this.drawEllipse(t, n, i, r);
          }),
          (i.prototype.drawRectNode = function (e) {
            this.parseSvgAttributes(e);
            var t = l(e.getAttribute("x")),
              n = l(e.getAttribute("y")),
              i = l(e.getAttribute("width")),
              r = l(e.getAttribute("height"));
            this.drawRect(t, n, i, r);
          }),
          (i.prototype.drawPolygonNode = function (e) {
            for (
              var t,
                n = "(-?[\\d\\.?]+),(-?[\\d\\.?]+)",
                i = e.getAttribute("points").match(new RegExp(n, "g")),
                s = [],
                o = 0,
                a = i.length;
              a > o;
              o++
            ) {
              t = i[o];
              var c = t.match(new RegExp(n));
              (c[1] = l(c[1])),
                (c[2] = l(c[2])),
                s.push(new r.Point(c[1], c[2]));
            }
            this.parseSvgAttributes(e), this.drawPolygon(s);
          }),
          (i.prototype.drawPathNode = function (e) {
            this.parseSvgAttributes(e);
            var t = e.getAttribute("d").trim(),
              n = this.tokenizePathData(t);
            this.drawPathData(n);
          }),
          (i.prototype.drawPathData = function (e) {
            for (var t = e.instructions, n = [], i = 0; i < t.length; i++)
              "m" === t[i].command.toLowerCase() && n.push(i);
            for (var r = 0; r < t.length; r++) {
              var s = t[r].command,
                o = t[r].points,
                a = 0;
              for (
                "z" === s.toLowerCase() && 0 === o.length && (o.length = 1);
                a < o.length;

              )
                switch (s.toLowerCase()) {
                  case "m":
                    var l = o[a].x,
                      c = o[a].y;
                    0 === a
                      ? (n.indexOf(r) >= 2 && this.addHole(),
                        this.moveTo(l, c),
                        (this.graphicsData[
                          this.graphicsData.length - 1
                        ].shape.closed = !1))
                      : this.lineTo2(l, c),
                      (a += 1);
                    break;
                  case "l":
                    var l = o[a].x,
                      c = o[a].y;
                    this.lineTo2(l, c), (a += 1);
                    break;
                  case "c":
                    this.bezierCurveTo2(
                      o[a].x,
                      o[a].y,
                      o[a + 1].x,
                      o[a + 1].y,
                      o[a + 2].x,
                      o[a + 2].y
                    ),
                      (a += 3);
                    break;
                  case "v":
                    var l = o[a].x,
                      c = o[a].y;
                    this.lineTo2(l, c), (a += 1);
                    break;
                  case "h":
                    var l = o[a].x,
                      c = o[a].y;
                    this.lineTo2(l, c), (a += 1);
                    break;
                  case "s":
                    this.bezierCurveTo2(
                      o[a].x,
                      o[a].y,
                      o[a + 1].x,
                      o[a + 1].y,
                      o[a + 2].x,
                      o[a + 2].y
                    ),
                      (a += 3);
                    break;
                  case "z":
                    (this.graphicsData[
                      this.graphicsData.length - 1
                    ].shape.closed = !0),
                      (a += 1);
                    break;
                  default:
                    throw new Error("Could not handle path command: " + s);
                }
            }
            n.length > 1 && this.addHole();
          }),
          (i.prototype.tokenizePathData = function (e) {
            for (
              var t = e.match(/[a-df-z][^a-df-z]*/gi),
                n = { instructions: [] },
                i = { x: 0, y: 0 },
                r = null,
                s = 0;
              s < t.length;
              s++
            ) {
              var o = { command: "", points: [] },
                a = t[s][0],
                c = [];
              c = c.concat(
                t[s]
                  .slice(1)
                  .trim()
                  .match(/[+|-]?(?:0|[0-9]\d*)?(?:\.\d*)?(?:[eE][+\-]?\d+)?/g)
              );
              for (var u = c.length - 1; u >= 0; u--) {
                var h = c[u];
                "" === h && c.splice(u, 1);
              }
              for (var d = 0; d < c.length; ) {
                var p = { x: 0, y: 0 };
                a === a.toLowerCase() && (p = i);
                var f = [];
                switch (a.toLowerCase()) {
                  case "m":
                    var m = {};
                    (m.x = l(c[d]) + p.x),
                      (m.y = l(c[d + 1]) + p.y),
                      f.push(m),
                      (i = m),
                      (d += 2);
                    break;
                  case "l":
                    var m = {};
                    (m.x = l(c[d]) + p.x),
                      (m.y = l(c[d + 1]) + p.y),
                      f.push(m),
                      (i = m),
                      (d += 2);
                    break;
                  case "c":
                    var g = {},
                      v = {},
                      _ = {};
                    (g.x = l(c[d]) + p.x),
                      (g.y = l(c[d + 1]) + p.y),
                      (v.x = l(c[d + 2]) + p.x),
                      (v.y = l(c[d + 3]) + p.y),
                      (_.x = l(c[d + 4]) + p.x),
                      (_.y = l(c[d + 5]) + p.y),
                      f.push(g),
                      f.push(v),
                      f.push(_),
                      (i = _),
                      (r = v),
                      (d += 6);
                    break;
                  case "v":
                    var m = {};
                    (m.y = l(c[d]) + p.y),
                      (m.x = i.x),
                      f.push(m),
                      (i = m),
                      (d += 1);
                    break;
                  case "h":
                    var m = {};
                    (m.x = l(c[d]) + p.x),
                      (m.y = i.y),
                      f.push(m),
                      (i = m),
                      (d += 1);
                    break;
                  case "s":
                    var g = {},
                      v = {},
                      _ = {};
                    null === r
                      ? ((g.x = i.x), (g.y = i.y))
                      : ((g.x = r.x), (g.y = r.y)),
                      (v.x = l(c[d]) + p.x),
                      (v.y = l(c[d + 1]) + p.y),
                      (_.x = l(c[d + 2]) + p.x),
                      (_.y = l(c[d + 3]) + p.y),
                      f.push(g),
                      f.push(v),
                      f.push(_),
                      (i = _),
                      (r = v),
                      (d += 4);
                    break;
                  default:
                    d += 1;
                }
                o.points = o.points.concat(f);
              }
              (o.command = a), n.instructions.push(o);
            }
            return n;
          }),
          (i.prototype.applyTransformation = function (e) {
            if (e.getAttribute("transform")) {
              var t = new r.Matrix(),
                n = e.getAttribute("transform").trim().split("("),
                i = n[0],
                s = n[1].replace(")", "");
              if (((s = a(s)), "matrix" == i)) {
                (t.a = l(s[0])),
                  (t.b = l(s[1])),
                  (t.c = l(s[2])),
                  (t.d = l(s[3])),
                  (t.tx = l(s[4])),
                  (t.ty = l(s[5]));
                var o = { x: 0, y: 0 },
                  c = t.apply(o);
                (this.x += c.x),
                  (this.y += c.y),
                  (this.scale.x = Math.sqrt(t.a * t.a + t.b * t.b)),
                  (this.scale.y = Math.sqrt(t.c * t.c + t.d * t.d)),
                  (this.rotation = -Math.acos(t.a / this.scale.x));
              } else
                "translate" == i
                  ? ((this.x += l(s[0])), (this.y += l(s[1])))
                  : "scale" == i
                  ? ((this.scale.x = l(s[0])), (this.scale.y = l(s[1])))
                  : "rotate" == i &&
                    (s.length > 1 && ((this.x += l(s[1])), (this.y += l(s[2]))),
                    (this.rotation = l(s[0])),
                    s.length > 1 && ((this.x -= l(s[1])), (this.y -= l(s[2]))));
            }
          }),
          (i.prototype.parseSvgAttributes = function (e) {
            for (var t, n = {}, i = e.attributes.length; i--; )
              (t = e.attributes[i]), (n[t.name] = t.value);
            var r = e.getAttribute("class");
            r = r ? r.split(" ") : [];
            var s = e.getAttribute("style");
            s && ((this._classes.style = s), r.push("style"));
            for (var o in this._classes)
              if (-1 != r.indexOf(o)) {
                s = this._classes[o];
                var a, l, c, u, h;
                if (s) {
                  a = s.split(";");
                  for (var d = 0, p = a.length; p > d; d++)
                    (l = a[d].trim()),
                      l &&
                        ((c = l.split(":", 2)),
                        (u = c[0].trim()),
                        (h = c[1].trim()),
                        (n[u] = h));
                }
              }
            this.applySvgAttributes(n);
          }),
          (i.prototype.applySvgAttributes = function (e) {
            var t,
              n,
              i = 0,
              r = 1,
              s = 0;
            e.stroke &&
              ((t = o(e.stroke, "array")),
              (n = 65536 * t[0] + 256 * t[1] + t[2]),
              (i = n),
              (s = t[3])),
              e["stroke-width"] &&
                (this._lineWidth = r = parseInt(e["stroke-width"], 10));
            var l = e["vector-effect"];
            "non-scaling-stroke" == l && (this._nonScaling = !0);
            var c = 100,
              u = 100,
              h = 0,
              d = !1;
            if (e["stroke-dasharray"] && "none" != e["stroke-dasharray"]) {
              var p = a(e["stroke-dasharray"]);
              (u = parseInt(p[0])), (h = parseInt(p[1])), (d = !0);
            }
            (this.lineSegments = c),
              (this.lineDashed = d),
              (this.lineDashLength = u),
              (this.lineSpaceLength = h),
              this.lineStyle(r, i, s);
            var f = 0,
              m = 1;
            e.fill &&
              ((t = o(e.fill, "array")),
              (n = 65536 * t[0] + 256 * t[1] + t[2]),
              (f = n),
              (m = t[3])),
              this.beginFill(f, m);
          }),
          (i.prototype.drawSVG = function (e) {
            for (
              var t = e.children || e.childNodes, n = 0, i = t.length;
              i > n;
              n++
            )
              1 === t[n].nodeType && this.drawNode(t[n]);
          });
        var a = function (e) {
            return e.split(e.indexOf(",") >= 0 ? "," : " ");
          },
          l = function (e) {
            var t = /([\d\.]+)e-(\d+)/i.exec(e);
            if (!t) return parseFloat(e);
            for (
              var n = t[1].replace(".", ""), i = t[2] - 1, r = "0.", s = 0;
              i > s;
              s++
            )
              r += "0";
            return (r += n), parseFloat(r);
          };
        e.exports = i;
      },
      function (t) {
        if ("undefined" == typeof e) {
          var n = new Error('Cannot find module "undefined"');
          throw ((n.code = "MODULE_NOT_FOUND"), n);
        }
        t.exports = e;
      },
      function (e) {
        /*!
	 color2color v0.2.1 indyarmy.com
	 by Russ Porosky
	 IndyArmy Network, Inc.
	 */
        "use strict";
        var t = (function () {
          var e = function (e, s, o) {
              s || (s = "rgba"), (e = e.toLowerCase()), (s = s.toLowerCase());
              var l,
                c,
                u,
                h,
                d,
                p,
                f,
                m,
                g,
                v,
                _,
                y,
                b,
                w = a(e),
                x = [
                  {
                    re: /^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,
                    example: ["rgb(123, 234, 45)", "rgb(255,234,245)"],
                    process: function (e) {
                      return [
                        parseInt(e[1], 10),
                        parseInt(e[2], 10),
                        parseInt(e[3], 10),
                        1,
                      ];
                    },
                  },
                  {
                    re: /^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d+(?:\.\d+)?|\.\d+)\s*\)/,
                    example: [
                      "rgba(123, 234, 45, 1)",
                      "rgba(255,234,245, 0.5)",
                    ],
                    process: function (e) {
                      return [
                        parseInt(e[1], 10),
                        parseInt(e[2], 10),
                        parseInt(e[3], 10),
                        parseFloat(e[4]),
                      ];
                    },
                  },
                  {
                    re: /^hsl\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%\)$/,
                    example: ["hsl(120, 100%, 25%)", "hsl(0, 100%, 50%)"],
                    process: function (e) {
                      e[4] = 1;
                      var n = t(e);
                      return [n.r, n.g, n.b, n.a];
                    },
                  },
                  {
                    re: /^hsla\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%,\s*(\d+(?:\.\d+)?|\.\d+)\s*\)/,
                    example: [
                      "hsla(120, 100%, 25%, 1)",
                      "hsla(0, 100%, 50%, 0.5)",
                    ],
                    process: function (e) {
                      var n = t(e);
                      return [n.r, n.g, n.b, n.a];
                    },
                  },
                  {
                    re: /^hsv\((\d{1,3}),\s*(\d{1,3})%,\s*(\d{1,3})%\)$/,
                    example: ["hsv(120, 100%, 25%)", "hsl(0, 100%, 50%)"],
                    process: function (e) {
                      var t = i(e);
                      return [t.r, t.g, t.b, 1];
                    },
                  },
                  {
                    re: /^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,
                    example: ["#00ff00", "336699"],
                    process: function (e) {
                      return [
                        parseInt(e[1], 16),
                        parseInt(e[2], 16),
                        parseInt(e[3], 16),
                        1,
                      ];
                    },
                  },
                  {
                    re: /^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,
                    example: ["#fb0", "f0f"],
                    process: function (e) {
                      return [
                        parseInt(e[1] + e[1], 16),
                        parseInt(e[2] + e[2], 16),
                        parseInt(e[3] + e[3], 16),
                        1,
                      ];
                    },
                  },
                ];
              for (
                w
                  ? (e = w)
                  : ((e = e.replace(/^\s*#|\s*$/g, "")),
                    3 === e.length && (e = e.replace(/(.)/g, "$1$1"))),
                  d = 0;
                d < x.length;
                d += 1
              )
                (p = x[d].re),
                  (f = x[d].process),
                  (m = p.exec(e)),
                  m &&
                    ((g = f(m)),
                    (l = g[0]),
                    (c = g[1]),
                    (u = g[2]),
                    (h = g[3]));
              switch (
                ((l = 0 > l || isNaN(l) ? 0 : l > 255 ? 255 : l),
                (c = 0 > c || isNaN(c) ? 0 : c > 255 ? 255 : c),
                (u = 0 > u || isNaN(u) ? 0 : u > 255 ? 255 : u),
                (h = 0 > h || isNaN(h) ? 0 : h > 1 ? 1 : h),
                s)
              ) {
                case "rgba":
                  o &&
                    ((h = (255 - (v = Math.min(l, c, u))) / 255),
                    (l = (0 || (l - v) / h).toFixed(0)),
                    (c = (0 || (c - v) / h).toFixed(0)),
                    (u = (0 || (u - v) / h).toFixed(0)),
                    (h = h.toFixed(4))),
                    (b = "rgba(" + l + "," + c + "," + u + "," + h + ")");
                  break;
                case "rgb":
                  b = "rgb(" + l + "," + c + "," + u + ")";
                  break;
                case "hex":
                  b =
                    "#" +
                    ("0" + l.toString(16)).slice(-2) +
                    ("0" + c.toString(16)).slice(-2) +
                    ("0" + u.toString(16)).slice(-2);
                  break;
                case "hsl":
                  (_ = n({ r: l, g: c, b: u })),
                    (b = "hsl(" + _.h + "," + _.s + "%," + _.l + "%)");
                  break;
                case "hsla":
                  (_ = n({ r: l, g: c, b: u, a: h })),
                    (b =
                      "hsl(" + _.h + "," + _.s + "%," + _.l + "%," + _.a + ")");
                  break;
                case "hsv":
                  (y = r({ r: l, g: c, b: u })),
                    (b = "hsv(" + y.h + "," + y.s + "%," + y.v + "%)");
                  break;
                case "array":
                  b = [l, c, u, h];
              }
              return b;
            },
            t = function (e) {
              var t,
                n,
                i,
                r = {},
                a = {
                  h: o(parseInt(e[1], 10) % 360, 360),
                  s: o(parseInt(e[2], 10) % 101, 100),
                  l: o(parseInt(e[3], 10) % 101, 100),
                  a: parseFloat(e[4]),
                };
              return (
                0 === a.s
                  ? ((t = parseInt(Math.round(255 * a.l))),
                    (r = { r: t, g: t, b: t, a: a.a }))
                  : ((n = a.l < 0.5 ? a.l * (1 + a.s) : a.l + a.s - a.l * a.s),
                    (i = 2 * a.l - n),
                    (r.r = parseInt(
                      (256 * s(i, n, a.h + 1 / 3)).toFixed(0),
                      10
                    )),
                    (r.g = parseInt((256 * s(i, n, a.h)).toFixed(0), 10)),
                    (r.b = parseInt(
                      (256 * s(i, n, a.h - 1 / 3)).toFixed(0),
                      10
                    )),
                    (r.a = a.a)),
                r
              );
            },
            n = function (e) {
              (e.r = o(parseInt(e.r, 10) % 256, 256)),
                (e.g = o(parseInt(e.g, 10) % 256, 256)),
                (e.b = o(parseInt(e.b, 10) % 256, 256));
              var t,
                n = Math.max(e.r, e.g, e.b),
                i = Math.min(e.r, e.g, e.b),
                r = [];
              if (((r.a = e.a), (r.l = (n + i) / 2), n === i))
                (r.h = 0), (r.s = 0);
              else {
                switch (
                  ((t = n - i),
                  (r.s = r.l > 0.5 ? t / (2 - n - i) : t / (n + i)),
                  n)
                ) {
                  case e.r:
                    r.h = (e.g - e.b) / t + (e.g < e.b ? 6 : 0);
                    break;
                  case e.g:
                    r.h = (e.b - e.r) / t + 2;
                    break;
                  case e.b:
                    r.h = (e.r - e.g) / t + 4;
                }
                r.h /= 6;
              }
              return (
                (r.h = parseInt((360 * r.h).toFixed(0), 10)),
                (r.s = parseInt((100 * r.s).toFixed(0), 10)),
                (r.l = parseInt((100 * r.l).toFixed(0), 10)),
                r
              );
            },
            i = function (e) {
              var t = {},
                n = {
                  h: o(parseInt(e[1], 10) % 360, 360),
                  s: o(parseInt(e[2], 10) % 101, 100),
                  v: o(parseInt(e[3], 10) % 101, 100),
                },
                i = Math.floor(6 * n.h),
                r = 6 * n.h - i,
                s = n.v * (1 - n.s),
                a = n.v * (1 - r * n.s),
                l = n.v * (1 - (1 - r) * n.s);
              switch (i % 6) {
                case 0:
                  (t.r = n.v), (t.g = l), (t.b = s);
                  break;
                case 1:
                  (t.r = a), (t.g = n.v), (t.b = s);
                  break;
                case 2:
                  (t.r = s), (t.g = n.v), (t.b = l);
                  break;
                case 3:
                  (t.r = s), (t.g = a), (t.b = n.v);
                  break;
                case 4:
                  (t.r = l), (t.g = s), (t.b = n.v);
                  break;
                case 5:
                  (t.r = n.v), (t.g = s), (t.b = a);
              }
              return (
                (t.r = parseInt(256 * t.r, 10)),
                (t.g = parseInt(256 * t.g, 10)),
                (t.b = parseInt(256 * t.b, 10)),
                { r: t.r, g: t.g, b: t.b }
              );
            },
            r = function (e) {
              (e.r = o(parseInt(e.r, 10) % 256, 256)),
                (e.g = o(parseInt(e.g, 10) % 256, 256)),
                (e.b = o(parseInt(e.b, 10) % 256, 256));
              var t = Math.max(e.r, e.g, e.b),
                n = Math.min(e.r, e.g, e.b),
                i = t - n,
                r = { h: 0, s: 0 === t ? 0 : i / t, v: t };
              if (t !== n) {
                switch (t) {
                  case e.r:
                    r.h = (e.g - e.b) / i + (e.g < e.b ? 6 : 0);
                    break;
                  case e.g:
                    r.h = (e.b - e.r) / i + 2;
                    break;
                  case e.b:
                    r.h = (e.r - e.g) / i + 4;
                }
                r.h /= 6;
              }
              return (
                (r.h = parseInt((360 * r.h).toFixed(0), 10)),
                (r.s = parseInt((100 * r.s).toFixed(0), 10)),
                (r.v = parseInt((100 * r.v).toFixed(0), 10)),
                r
              );
            },
            s = function (e, t, n) {
              return (
                0 > n && (n += 1),
                n > 1 && (n -= 1),
                1 / 6 > n
                  ? e + 6 * (t - e) * n
                  : 0.5 > n
                  ? t
                  : 2 / 3 > n
                  ? e + (t - e) * (2 / 3 - n) * 6
                  : e
              );
            },
            o = function (e, t) {
              return e / t;
            },
            a = function (e) {
              var t,
                n = null,
                i = {
                  aliceblue: "f0f8ff",
                  antiquewhite: "faebd7",
                  aqua: "00ffff",
                  aquamarine: "7fffd4",
                  azure: "f0ffff",
                  beige: "f5f5dc",
                  bisque: "ffe4c4",
                  black: "000000",
                  blanchedalmond: "ffebcd",
                  blue: "0000ff",
                  blueviolet: "8a2be2",
                  brown: "a52a2a",
                  burlywood: "deb887",
                  cadetblue: "5f9ea0",
                  chartreuse: "7fff00",
                  chocolate: "d2691e",
                  coral: "ff7f50",
                  cornflowerblue: "6495ed",
                  cornsilk: "fff8dc",
                  crimson: "dc143c",
                  cyan: "00ffff",
                  darkblue: "00008b",
                  darkcyan: "008b8b",
                  darkgoldenrod: "b8860b",
                  darkgray: "a9a9a9",
                  darkgreen: "006400",
                  darkkhaki: "bdb76b",
                  darkmagenta: "8b008b",
                  darkolivegreen: "556b2f",
                  darkorange: "ff8c00",
                  darkorchid: "9932cc",
                  darkred: "8b0000",
                  darksalmon: "e9967a",
                  darkseagreen: "8fbc8f",
                  darkslateblue: "483d8b",
                  darkslategray: "2f4f4f",
                  darkturquoise: "00ced1",
                  darkviolet: "9400d3",
                  deeppink: "ff1493",
                  deepskyblue: "00bfff",
                  dimgray: "696969",
                  dodgerblue: "1e90ff",
                  feldspar: "d19275",
                  firebrick: "b22222",
                  floralwhite: "fffaf0",
                  forestgreen: "228b22",
                  fuchsia: "ff00ff",
                  gainsboro: "dcdcdc",
                  ghostwhite: "f8f8ff",
                  gold: "ffd700",
                  goldenrod: "daa520",
                  gray: "808080",
                  green: "008000",
                  greenyellow: "adff2f",
                  honeydew: "f0fff0",
                  hotpink: "ff69b4",
                  indianred: "cd5c5c",
                  indigo: "4b0082",
                  ivory: "fffff0",
                  khaki: "f0e68c",
                  lavender: "e6e6fa",
                  lavenderblush: "fff0f5",
                  lawngreen: "7cfc00",
                  lemonchiffon: "fffacd",
                  lightblue: "add8e6",
                  lightcoral: "f08080",
                  lightcyan: "e0ffff",
                  lightgoldenrodyellow: "fafad2",
                  lightgrey: "d3d3d3",
                  lightgreen: "90ee90",
                  lightpink: "ffb6c1",
                  lightsalmon: "ffa07a",
                  lightseagreen: "20b2aa",
                  lightskyblue: "87cefa",
                  lightslateblue: "8470ff",
                  lightslategray: "778899",
                  lightsteelblue: "b0c4de",
                  lightyellow: "ffffe0",
                  lime: "00ff00",
                  limegreen: "32cd32",
                  linen: "faf0e6",
                  magenta: "ff00ff",
                  maroon: "800000",
                  mediumaquamarine: "66cdaa",
                  mediumblue: "0000cd",
                  mediumorchid: "ba55d3",
                  mediumpurple: "9370d8",
                  mediumseagreen: "3cb371",
                  mediumslateblue: "7b68ee",
                  mediumspringgreen: "00fa9a",
                  mediumturquoise: "48d1cc",
                  mediumvioletred: "c71585",
                  midnightblue: "191970",
                  mintcream: "f5fffa",
                  mistyrose: "ffe4e1",
                  moccasin: "ffe4b5",
                  navajowhite: "ffdead",
                  navy: "000080",
                  oldlace: "fdf5e6",
                  olive: "808000",
                  olivedrab: "6b8e23",
                  orange: "ffa500",
                  orangered: "ff4500",
                  orchid: "da70d6",
                  palegoldenrod: "eee8aa",
                  palegreen: "98fb98",
                  paleturquoise: "afeeee",
                  palevioletred: "d87093",
                  papayawhip: "ffefd5",
                  peachpuff: "ffdab9",
                  peru: "cd853f",
                  pink: "ffc0cb",
                  plum: "dda0dd",
                  powderblue: "b0e0e6",
                  purple: "800080",
                  red: "ff0000",
                  rosybrown: "bc8f8f",
                  royalblue: "4169e1",
                  saddlebrown: "8b4513",
                  salmon: "fa8072",
                  sandybrown: "f4a460",
                  seagreen: "2e8b57",
                  seashell: "fff5ee",
                  sienna: "a0522d",
                  silver: "c0c0c0",
                  skyblue: "87ceeb",
                  slateblue: "6a5acd",
                  slategray: "708090",
                  snow: "fffafa",
                  springgreen: "00ff7f",
                  steelblue: "4682b4",
                  tan: "d2b48c",
                  teal: "008080",
                  thistle: "d8bfd8",
                  tomato: "ff6347",
                  turquoise: "40e0d0",
                  violet: "ee82ee",
                  violetred: "d02090",
                  wheat: "f5deb3",
                  white: "ffffff",
                  whitesmoke: "f5f5f5",
                  yellow: "ffff00",
                  yellowgreen: "9acd32",
                };
              for (t in i) e === t && (n = i[t]);
              return n;
            };
          return e;
        })();
        e.exports = t;
      },
    ]);
  }),
  /*!
   * pixi-filters - v2.4.1
   * Compiled Fri, 05 Jan 2018 22:15:04 UTC
   *
   * pixi-filters is licensed under the MIT License.
   * http://www.opensource.org/licenses/mit-license
   */ !(function (e, t) {
    "object" == typeof exports && "undefined" != typeof module
      ? t(exports)
      : "function" == typeof define && define.amd
      ? define(["exports"], t)
      : t((e.__pixiFilters = {}));
  })(this, function (e) {
    "use strict";
    var t =
        "attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",
      n =
        "\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n",
      i = (function (e) {
        function i(i) {
          void 0 === i && (i = 0.5), e.call(this, t, n), (this.threshold = i);
        }
        e && (i.__proto__ = e),
          (i.prototype = Object.create(e && e.prototype)),
          (i.prototype.constructor = i);
        var r = { threshold: { configurable: !0 } };
        return (
          (r.threshold.get = function () {
            return this.uniforms.threshold;
          }),
          (r.threshold.set = function (e) {
            this.uniforms.threshold = e;
          }),
          Object.defineProperties(i.prototype, r),
          i
        );
      })(PIXI.Filter),
      r =
        "uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n",
      s = (function (e) {
        function n(n) {
          e.call(this, t, r),
            "number" == typeof n && (n = { threshold: n }),
            (n = Object.assign(
              {
                threshold: 0.5,
                bloomScale: 1,
                brightness: 1,
                blur: 8,
                quality: 4,
                resolution: PIXI.settings.RESOLUTION,
                kernelSize: 5,
              },
              n
            )),
            (this.bloomScale = n.bloomScale),
            (this.brightness = n.brightness);
          var s = n.blur,
            o = n.quality,
            a = n.resolution,
            l = n.kernelSize,
            c = PIXI.filters,
            u = c.BlurXFilter,
            h = c.BlurYFilter;
          (this._extract = new i(n.threshold)),
            (this._blurX = new u(s, o, a, l)),
            (this._blurY = new h(s, o, a, l));
        }
        e && (n.__proto__ = e),
          (n.prototype = Object.create(e && e.prototype)),
          (n.prototype.constructor = n);
        var s = { threshold: { configurable: !0 }, blur: { configurable: !0 } };
        return (
          (n.prototype.apply = function (e, t, n, i, r) {
            var s = e.getRenderTarget(!0);
            this._extract.apply(e, t, s, !0, r),
              this._blurX.apply(e, s, s, !0, r),
              this._blurY.apply(e, s, s, !0, r),
              (this.uniforms.bloomScale = this.bloomScale),
              (this.uniforms.brightness = this.brightness),
              (this.uniforms.bloomTexture = s),
              e.applyFilter(this, t, n, i),
              e.returnRenderTarget(s);
          }),
          (s.threshold.get = function () {
            return this._extract.threshold;
          }),
          (s.threshold.set = function (e) {
            this._extract.threshold = e;
          }),
          (s.blur.get = function () {
            return this._blurX.blur;
          }),
          (s.blur.set = function (e) {
            this._blurX.blur = this._blurY.blur = e;
          }),
          Object.defineProperties(n.prototype, s),
          n
        );
      })(PIXI.Filter);
    PIXI.filters.AdvancedBloomFilter = s;
    var o = t,
      a =
        "varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}",
      l = (function (e) {
        function t(t) {
          void 0 === t && (t = 8), e.call(this, o, a), (this.size = t);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = { size: { configurable: !0 } };
        return (
          (n.size.get = function () {
            return this.uniforms.pixelSize;
          }),
          (n.size.set = function (e) {
            this.uniforms.pixelSize = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.AsciiFilter = l;
    var c = PIXI.filters,
      u = c.BlurXFilter,
      h = c.BlurYFilter,
      d = c.AlphaFilter,
      p = (function (e) {
        function t(t, n, i, r) {
          void 0 === t && (t = 2),
            void 0 === n && (n = 4),
            void 0 === i && (i = PIXI.settings.RESOLUTION),
            void 0 === r && (r = 5),
            e.call(this);
          var s, o;
          "number" == typeof t
            ? ((s = t), (o = t))
            : t instanceof PIXI.Point
            ? ((s = t.x), (o = t.y))
            : Array.isArray(t) && ((s = t[0]), (o = t[1])),
            (this.blurXFilter = new u(s, n, i, r)),
            (this.blurYFilter = new h(o, n, i, r)),
            (this.blurYFilter.blendMode = PIXI.BLEND_MODES.SCREEN),
            (this.defaultFilter = new d());
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          blur: { configurable: !0 },
          blurX: { configurable: !0 },
          blurY: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n) {
            var i = e.getRenderTarget(!0);
            this.defaultFilter.apply(e, t, n),
              this.blurXFilter.apply(e, t, i),
              this.blurYFilter.apply(e, i, n),
              e.returnRenderTarget(i);
          }),
          (n.blur.get = function () {
            return this.blurXFilter.blur;
          }),
          (n.blur.set = function (e) {
            this.blurXFilter.blur = this.blurYFilter.blur = e;
          }),
          (n.blurX.get = function () {
            return this.blurXFilter.blur;
          }),
          (n.blurX.set = function (e) {
            this.blurXFilter.blur = e;
          }),
          (n.blurY.get = function () {
            return this.blurYFilter.blur;
          }),
          (n.blurY.set = function (e) {
            this.blurYFilter.blur = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.BloomFilter = p;
    var f = t,
      m =
        "uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    gl_FragColor = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        gl_FragColor *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n}\n",
      g = (function (e) {
        function t(t, n, i) {
          e.call(this, f, m),
            (this.center = t || [0.5, 0.5]),
            (this.radius = n || 100),
            (this.strength = i || 1);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          radius: { configurable: !0 },
          strength: { configurable: !0 },
          center: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.dimensions[0] = t.sourceFrame.width),
              (this.uniforms.dimensions[1] = t.sourceFrame.height),
              e.applyFilter(this, t, n, i);
          }),
          (n.radius.get = function () {
            return this.uniforms.radius;
          }),
          (n.radius.set = function (e) {
            this.uniforms.radius = e;
          }),
          (n.strength.get = function () {
            return this.uniforms.strength;
          }),
          (n.strength.set = function (e) {
            this.uniforms.strength = e;
          }),
          (n.center.get = function () {
            return this.uniforms.center;
          }),
          (n.center.set = function (e) {
            this.uniforms.center = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.BulgePinchFilter = g;
    var v = t,
      _ =
        "varying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(texture, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n",
      y = (function (e) {
        function t(t, n, i) {
          void 0 === t && (t = 16711680),
            void 0 === n && (n = 0),
            void 0 === i && (i = 0.4),
            e.call(this, v, _),
            (this.originalColor = t),
            (this.newColor = n),
            (this.epsilon = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          originalColor: { configurable: !0 },
          newColor: { configurable: !0 },
          epsilon: { configurable: !0 },
        };
        return (
          (n.originalColor.set = function (e) {
            var t = this.uniforms.originalColor;
            "number" == typeof e
              ? (PIXI.utils.hex2rgb(e, t), (this._originalColor = e))
              : ((t[0] = e[0]),
                (t[1] = e[1]),
                (t[2] = e[2]),
                (this._originalColor = PIXI.utils.rgb2hex(t)));
          }),
          (n.originalColor.get = function () {
            return this._originalColor;
          }),
          (n.newColor.set = function (e) {
            var t = this.uniforms.newColor;
            "number" == typeof e
              ? (PIXI.utils.hex2rgb(e, t), (this._newColor = e))
              : ((t[0] = e[0]),
                (t[1] = e[1]),
                (t[2] = e[2]),
                (this._newColor = PIXI.utils.rgb2hex(t)));
          }),
          (n.newColor.get = function () {
            return this._newColor;
          }),
          (n.epsilon.set = function (e) {
            this.uniforms.epsilon = e;
          }),
          (n.epsilon.get = function () {
            return this.uniforms.epsilon;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.ColorReplaceFilter = y;
    var b = t,
      w =
        "precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",
      x = (function (e) {
        function t(t, n, i) {
          e.call(this, b, w),
            (this.matrix = t),
            (this.width = n),
            (this.height = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          matrix: { configurable: !0 },
          width: { configurable: !0 },
          height: { configurable: !0 },
        };
        return (
          (n.matrix.get = function () {
            return this.uniforms.matrix;
          }),
          (n.matrix.set = function (e) {
            this.uniforms.matrix = new Float32Array(e);
          }),
          (n.width.get = function () {
            return 1 / this.uniforms.texelSize[0];
          }),
          (n.width.set = function (e) {
            this.uniforms.texelSize[0] = 1 / e;
          }),
          (n.height.get = function () {
            return 1 / this.uniforms.texelSize[1];
          }),
          (n.height.set = function (e) {
            this.uniforms.texelSize[1] = 1 / e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.ConvolutionFilter = x;
    var C = t,
      T =
        "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n",
      S = (function (e) {
        function t() {
          e.call(this, C, T);
        }
        return (
          e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.CrossHatchFilter = S;
    var E = t,
      k =
        "precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",
      P = (function (e) {
        function t(t, n) {
          void 0 === t && (t = 1),
            void 0 === n && (n = 5),
            e.call(this, E, k),
            (this.scale = t),
            (this.angle = n);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = { scale: { configurable: !0 }, angle: { configurable: !0 } };
        return (
          (n.scale.get = function () {
            return this.uniforms.scale;
          }),
          (n.scale.set = function (e) {
            this.uniforms.scale = e;
          }),
          (n.angle.get = function () {
            return this.uniforms.angle;
          }),
          (n.angle.set = function (e) {
            this.uniforms.angle = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.DotFilter = P;
    var I = t,
      A =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n\n    // Un-premultiply alpha before applying the color\n    if (sample.a > 0.0) {\n        sample.rgb /= sample.a;\n    }\n\n    // Premultiply alpha again\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",
      O = (function (e) {
        function t(t, n, i, r, s) {
          void 0 === t && (t = 45),
            void 0 === n && (n = 5),
            void 0 === i && (i = 2),
            void 0 === r && (r = 0),
            void 0 === s && (s = 0.5),
            e.call(this),
            (this.tintFilter = new PIXI.Filter(I, A)),
            (this.blurFilter = new PIXI.filters.BlurFilter()),
            (this.blurFilter.blur = i),
            (this.targetTransform = new PIXI.Matrix()),
            (this.rotation = t),
            (this.padding = n),
            (this.distance = n),
            (this.alpha = s),
            (this.color = r);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          distance: { configurable: !0 },
          rotation: { configurable: !0 },
          blur: { configurable: !0 },
          alpha: { configurable: !0 },
          color: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            var r = e.getRenderTarget();
            (r.transform = this.targetTransform),
              this.tintFilter.apply(e, t, r, !0),
              this.blurFilter.apply(e, r, n),
              e.applyFilter(this, t, n, i),
              (r.transform = null),
              e.returnRenderTarget(r);
          }),
          (t.prototype._updatePadding = function () {
            this.padding = this.distance + 2 * this.blur;
          }),
          (t.prototype._updateTargetTransform = function () {
            (this.targetTransform.tx = this.distance * Math.cos(this.angle)),
              (this.targetTransform.ty = this.distance * Math.sin(this.angle));
          }),
          (n.distance.get = function () {
            return this._distance;
          }),
          (n.distance.set = function (e) {
            (this._distance = e),
              this._updatePadding(),
              this._updateTargetTransform();
          }),
          (n.rotation.get = function () {
            return this.angle / PIXI.DEG_TO_RAD;
          }),
          (n.rotation.set = function (e) {
            (this.angle = e * PIXI.DEG_TO_RAD), this._updateTargetTransform();
          }),
          (n.blur.get = function () {
            return this.blurFilter.blur;
          }),
          (n.blur.set = function (e) {
            (this.blurFilter.blur = e), this._updatePadding();
          }),
          (n.alpha.get = function () {
            return this.tintFilter.uniforms.alpha;
          }),
          (n.alpha.set = function (e) {
            this.tintFilter.uniforms.alpha = e;
          }),
          (n.color.get = function () {
            return PIXI.utils.rgb2hex(this.tintFilter.uniforms.color);
          }),
          (n.color.set = function (e) {
            PIXI.utils.hex2rgb(e, this.tintFilter.uniforms.color);
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.DropShadowFilter = O;
    var D = t,
      M =
        "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n	vec2 onePixel = vec2(1.0 / filterArea);\n\n	vec4 color;\n\n	color.rgb = vec3(0.5);\n\n	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n	color.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n	float alpha = texture2D(uSampler, vTextureCoord).a;\n\n	gl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n",
      R = (function (e) {
        function t(t) {
          void 0 === t && (t = 5), e.call(this, D, M), (this.strength = t);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = { strength: { configurable: !0 } };
        return (
          (n.strength.get = function () {
            return this.uniforms.strength;
          }),
          (n.strength.set = function (e) {
            this.uniforms.strength = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.EmbossFilter = R;
    var L = t,
      N =
        "varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n",
      U = (function (e) {
        function t(t, n, i, r, s) {
          void 0 === t && (t = 10),
            void 0 === n && (n = 4),
            void 0 === i && (i = 0),
            void 0 === r && (r = 16777215),
            void 0 === s && (s = 0.1),
            e.call(
              this,
              L,
              N.replace(
                /%QUALITY_DIST%/gi,
                "" + (1 / s / t).toFixed(7)
              ).replace(/%DIST%/gi, "" + t.toFixed(7))
            ),
            (this.uniforms.glowColor = new Float32Array([0, 0, 0, 1])),
            (this.distance = t),
            (this.color = r),
            (this.outerStrength = n),
            (this.innerStrength = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          color: { configurable: !0 },
          distance: { configurable: !0 },
          outerStrength: { configurable: !0 },
          innerStrength: { configurable: !0 },
        };
        return (
          (n.color.get = function () {
            return PIXI.utils.rgb2hex(this.uniforms.glowColor);
          }),
          (n.color.set = function (e) {
            PIXI.utils.hex2rgb(e, this.uniforms.glowColor);
          }),
          (n.distance.get = function () {
            return this.uniforms.distance;
          }),
          (n.distance.set = function (e) {
            this.uniforms.distance = e;
          }),
          (n.outerStrength.get = function () {
            return this.uniforms.outerStrength;
          }),
          (n.outerStrength.set = function (e) {
            this.uniforms.outerStrength = e;
          }),
          (n.innerStrength.get = function () {
            return this.uniforms.innerStrength;
          }),
          (n.innerStrength.set = function (e) {
            this.uniforms.innerStrength = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.GlowFilter = U;
    var B = t,
      F =
        "vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",
      j =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    gl_FragColor += mist;\n}\n",
      H = (function (e) {
        function t(t) {
          e.call(this, B, j.replace("${perlin}", F)),
            "number" == typeof t &&
              (console.warn(
                "GodrayFilter now uses options instead of (angle, gain, lacunarity, time)"
              ),
              (t = { angle: t }),
              void 0 !== arguments[1] && (t.gain = arguments[1]),
              void 0 !== arguments[2] && (t.lacunarity = arguments[2]),
              void 0 !== arguments[3] && (t.time = arguments[3])),
            (t = Object.assign(
              {
                angle: 30,
                gain: 0.5,
                lacunarity: 2.5,
                time: 0,
                parallel: !0,
                center: [0, 0],
              },
              t
            )),
            (this._angleLight = new PIXI.Point()),
            (this.angle = t.angle),
            (this.gain = t.gain),
            (this.lacunarity = t.lacunarity),
            (this.parallel = t.parallel),
            (this.center = t.center),
            (this.time = t.time);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          angle: { configurable: !0 },
          gain: { configurable: !0 },
          lacunarity: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            var r = t.sourceFrame,
              s = r.width,
              o = r.height;
            (this.uniforms.light = this.parallel
              ? this._angleLight
              : this.center),
              (this.uniforms.parallel = this.parallel),
              (this.uniforms.dimensions[0] = s),
              (this.uniforms.dimensions[1] = o),
              (this.uniforms.aspect = o / s),
              (this.uniforms.time = this.time),
              e.applyFilter(this, t, n, i);
          }),
          (n.angle.get = function () {
            return this._angle;
          }),
          (n.angle.set = function (e) {
            this._angle = e;
            var t = e * PIXI.DEG_TO_RAD;
            (this._angleLight.x = Math.cos(t)),
              (this._angleLight.y = Math.sin(t));
          }),
          (n.gain.get = function () {
            return this.uniforms.gain;
          }),
          (n.gain.set = function (e) {
            this.uniforms.gain = e;
          }),
          (n.lacunarity.get = function () {
            return this.uniforms.lacunarity;
          }),
          (n.lacunarity.set = function (e) {
            this.uniforms.lacunarity = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.GodrayFilter = H;
    var $ = t,
      z =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\nconst int ITERATION = MAX_KERNEL_SIZE - 1;\n\nvec2 velocity = uVelocity / filterArea.xy;\n\n// float kernelSize = min(float(uKernelSize), float(MAX_KERNELSIZE));\n\n// In real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\nfloat kernelSize = float(uKernelSize);\nfloat k = kernelSize - 1.0;\nfloat offset = -uOffset / length(uVelocity) - 0.5;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        return;\n    }\n\n    for(int i = 0; i < ITERATION; i++) {\n        if (i == int(k)) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / k + offset);\n        gl_FragColor += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor /= kernelSize;\n}\n",
      W = (function (e) {
        function t(t, n, i) {
          void 0 === t && (t = [0, 0]),
            void 0 === n && (n = 5),
            void 0 === i && (i = 0),
            e.call(this, $, z),
            (this._velocity = new PIXI.Point(0, 0)),
            (this.velocity = t),
            (this.kernelSize = n),
            (this.offset = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          velocity: { configurable: !0 },
          offset: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            var r = this.velocity,
              s = r.x,
              o = r.y;
            (this.uniforms.uKernelSize =
              0 !== s || 0 !== o ? this.kernelSize : 0),
              e.applyFilter(this, t, n, i);
          }),
          (n.velocity.set = function (e) {
            Array.isArray(e)
              ? ((this._velocity.x = e[0]), (this._velocity.y = e[1]))
              : e instanceof PIXI.Point &&
                ((this._velocity.x = e.x), (this._velocity.y = e.y)),
              (this.uniforms.uVelocity[0] = this._velocity.x),
              (this.uniforms.uVelocity[1] = this._velocity.y);
          }),
          (n.velocity.get = function () {
            return this._velocity;
          }),
          (n.offset.set = function (e) {
            this.uniforms.uOffset = e;
          }),
          (n.offset.get = function () {
            return this.uniforms.uOffset;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.MotionBlurFilter = W;
    var G = t,
      V =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n",
      q = (function (e) {
        function t(t, n, i) {
          void 0 === n && (n = 0.05),
            void 0 === i && (i = null),
            (i = i || t.length),
            e.call(this, G, V.replace(/%maxColors%/g, i)),
            (this.epsilon = n),
            (this._maxColors = i),
            (this._replacements = null),
            (this.uniforms.originalColors = new Float32Array(3 * i)),
            (this.uniforms.targetColors = new Float32Array(3 * i)),
            (this.replacements = t);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          replacements: { configurable: !0 },
          maxColors: { configurable: !0 },
          epsilon: { configurable: !0 },
        };
        return (
          (n.replacements.set = function (e) {
            var t = this.uniforms.originalColors,
              n = this.uniforms.targetColors,
              i = e.length;
            if (i > this._maxColors)
              throw (
                "Length of replacements (" +
                i +
                ") exceeds the maximum colors length (" +
                this._maxColors +
                ")"
              );
            t[3 * i] = -1;
            for (var r = 0; i > r; r++) {
              var s = e[r],
                o = s[0];
              "number" == typeof o
                ? (o = PIXI.utils.hex2rgb(o))
                : (s[0] = PIXI.utils.rgb2hex(o)),
                (t[3 * r] = o[0]),
                (t[3 * r + 1] = o[1]),
                (t[3 * r + 2] = o[2]);
              var a = s[1];
              "number" == typeof a
                ? (a = PIXI.utils.hex2rgb(a))
                : (s[1] = PIXI.utils.rgb2hex(a)),
                (n[3 * r] = a[0]),
                (n[3 * r + 1] = a[1]),
                (n[3 * r + 2] = a[2]);
            }
            this._replacements = e;
          }),
          (n.replacements.get = function () {
            return this._replacements;
          }),
          (t.prototype.refresh = function () {
            this.replacements = this._replacements;
          }),
          (n.maxColors.get = function () {
            return this._maxColors;
          }),
          (n.epsilon.set = function (e) {
            this.uniforms.epsilon = e;
          }),
          (n.epsilon.get = function () {
            return this.uniforms.epsilon;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.MultiColorReplaceFilter = q;
    var X = t,
      Y =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n",
      K = (function (e) {
        function t(t, n) {
          void 0 === n && (n = 0),
            e.call(this, X, Y),
            "number" == typeof t
              ? ((this.seed = t), (t = null))
              : (this.seed = n),
            Object.assign(
              this,
              {
                sepia: 0.3,
                noise: 0.3,
                noiseSize: 1,
                scratch: 0.5,
                scratchDensity: 0.3,
                scratchWidth: 1,
                vignetting: 0.3,
                vignettingAlpha: 1,
                vignettingBlur: 0.3,
              },
              t
            );
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          sepia: { configurable: !0 },
          noise: { configurable: !0 },
          noiseSize: { configurable: !0 },
          scratch: { configurable: !0 },
          scratchDensity: { configurable: !0 },
          scratchWidth: { configurable: !0 },
          vignetting: { configurable: !0 },
          vignettingAlpha: { configurable: !0 },
          vignettingBlur: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.dimensions[0] = t.sourceFrame.width),
              (this.uniforms.dimensions[1] = t.sourceFrame.height),
              (this.uniforms.seed = this.seed),
              e.applyFilter(this, t, n, i);
          }),
          (n.sepia.set = function (e) {
            this.uniforms.sepia = e;
          }),
          (n.sepia.get = function () {
            return this.uniforms.sepia;
          }),
          (n.noise.set = function (e) {
            this.uniforms.noise = e;
          }),
          (n.noise.get = function () {
            return this.uniforms.noise;
          }),
          (n.noiseSize.set = function (e) {
            this.uniforms.noiseSize = e;
          }),
          (n.noiseSize.get = function () {
            return this.uniforms.noiseSize;
          }),
          (n.scratch.set = function (e) {
            this.uniforms.scratch = e;
          }),
          (n.scratch.get = function () {
            return this.uniforms.scratch;
          }),
          (n.scratchDensity.set = function (e) {
            this.uniforms.scratchDensity = e;
          }),
          (n.scratchDensity.get = function () {
            return this.uniforms.scratchDensity;
          }),
          (n.scratchWidth.set = function (e) {
            this.uniforms.scratchWidth = e;
          }),
          (n.scratchWidth.get = function () {
            return this.uniforms.scratchWidth;
          }),
          (n.vignetting.set = function (e) {
            this.uniforms.vignetting = e;
          }),
          (n.vignetting.get = function () {
            return this.uniforms.vignetting;
          }),
          (n.vignettingAlpha.set = function (e) {
            this.uniforms.vignettingAlpha = e;
          }),
          (n.vignettingAlpha.get = function () {
            return this.uniforms.vignettingAlpha;
          }),
          (n.vignettingBlur.set = function (e) {
            this.uniforms.vignettingBlur = e;
          }),
          (n.vignettingBlur.get = function () {
            return this.uniforms.vignettingBlur;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.OldFilmFilter = K;
    var J = t,
      Q =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n",
      Z = (function (e) {
        function t(n, i, r) {
          void 0 === n && (n = 1),
            void 0 === i && (i = 0),
            void 0 === r && (r = 0.1);
          var s = Math.max(r * t.MAX_SAMPLES, t.MIN_SAMPLES),
            o = ((2 * Math.PI) / s).toFixed(7);
          e.call(this, J, Q.replace(/\$\{angleStep\}/, o)),
            (this.uniforms.thickness = new Float32Array([0, 0])),
            (this.thickness = n),
            (this.uniforms.outlineColor = new Float32Array([0, 0, 0, 1])),
            (this.color = i),
            (this.quality = r);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = { color: { configurable: !0 } };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.thickness[0] = this.thickness / t.size.width),
              (this.uniforms.thickness[1] = this.thickness / t.size.height),
              e.applyFilter(this, t, n, i);
          }),
          (n.color.get = function () {
            return PIXI.utils.rgb2hex(this.uniforms.outlineColor);
          }),
          (n.color.set = function (e) {
            PIXI.utils.hex2rgb(e, this.uniforms.outlineColor);
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    (Z.MIN_SAMPLES = 1),
      (Z.MAX_SAMPLES = 100),
      (PIXI.filters.OutlineFilter = Z);
    var et = t,
      tt =
        "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n	return floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n",
      nt = (function (e) {
        function t(t) {
          void 0 === t && (t = 10), e.call(this, et, tt), (this.size = t);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = { size: { configurable: !0 } };
        return (
          (n.size.get = function () {
            return this.uniforms.size;
          }),
          (n.size.set = function (e) {
            "number" == typeof e && (e = [e, e]), (this.uniforms.size = e);
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.PixelateFilter = nt;
    var it = t,
      rt =
        "precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",
      st = (function (e) {
        function t(t, n, i) {
          void 0 === t && (t = [-10, 0]),
            void 0 === n && (n = [0, 10]),
            void 0 === i && (i = [0, 0]),
            e.call(this, it, rt),
            (this.red = t),
            (this.green = n),
            (this.blue = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          red: { configurable: !0 },
          green: { configurable: !0 },
          blue: { configurable: !0 },
        };
        return (
          (n.red.get = function () {
            return this.uniforms.red;
          }),
          (n.red.set = function (e) {
            this.uniforms.red = e;
          }),
          (n.green.get = function () {
            return this.uniforms.green;
          }),
          (n.green.set = function (e) {
            this.uniforms.green = e;
          }),
          (n.blue.get = function () {
            return this.uniforms.blue;
          }),
          (n.blue.set = function (e) {
            this.uniforms.blue = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.RGBSplitFilter = st;
    var ot = t,
      at =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\nconst int ITERATION = MAX_KERNEL_SIZE - 1;\n\n// float kernelSize = min(float(uKernelSize), float(MAX_KERNELSIZE));\n\n// In real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\nfloat kernelSize = float(uKernelSize);\nfloat k = kernelSize - 1.0;\n\n\nvec2 center = uCenter.xy / filterArea.xy;\nfloat aspect = filterArea.y / filterArea.x;\n\nfloat gradient = uRadius / filterArea.x * 0.3;\nfloat radius = uRadius / filterArea.x - gradient * 0.5;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        return;\n    }\n\n    vec2 coord = vTextureCoord;\n\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep;\n\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            return;\n        }\n        radianStep = uRadian * scale / k;\n    } else {\n        radianStep = uRadian / k;\n    }\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < ITERATION; i++) {\n        if (i == int(k)) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        gl_FragColor += sample;\n    }\n    gl_FragColor /= kernelSize;\n}\n",
      lt = (function (e) {
        function t(t, n, i, r) {
          void 0 === t && (t = 0),
            void 0 === n && (n = [0, 0]),
            void 0 === i && (i = 5),
            void 0 === r && (r = -1),
            e.call(this, ot, at),
            (this._angle = 0),
            (this.angle = t),
            (this.center = n),
            (this.kernelSize = i),
            (this.radius = r);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          angle: { configurable: !0 },
          center: { configurable: !0 },
          radius: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.uKernelSize =
              0 !== this._angle ? this.kernelSize : 0),
              e.applyFilter(this, t, n, i);
          }),
          (n.angle.set = function (e) {
            (this._angle = e), (this.uniforms.uRadian = (e * Math.PI) / 180);
          }),
          (n.angle.get = function () {
            return this._angle;
          }),
          (n.center.get = function () {
            return this.uniforms.uCenter;
          }),
          (n.center.set = function (e) {
            this.uniforms.uCenter = e;
          }),
          (n.radius.get = function () {
            return this.uniforms.uRadius;
          }),
          (n.radius.set = function (e) {
            (0 > e || e === 1 / 0) && (e = -1), (this.uniforms.uRadius = e);
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.RadialBlurFilter = lt;
    var ct = t,
      ut =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    gl_FragColor = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        gl_FragColor *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    gl_FragColor.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n}\n",
      ht = (function (e) {
        function t(t, n, i) {
          void 0 === t && (t = [0, 0]),
            void 0 === n && (n = {}),
            void 0 === i && (i = 0),
            e.call(this, ct, ut),
            (this.center = t),
            Array.isArray(n) &&
              (console.warn(
                "Deprecated Warning: ShockwaveFilter params Array has been changed to options Object."
              ),
              (n = {})),
            (n = Object.assign(
              {
                amplitude: 30,
                wavelength: 160,
                brightness: 1,
                speed: 500,
                radius: -1,
              },
              n
            )),
            (this.amplitude = n.amplitude),
            (this.wavelength = n.wavelength),
            (this.brightness = n.brightness),
            (this.speed = n.speed),
            (this.radius = n.radius),
            (this.time = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          center: { configurable: !0 },
          amplitude: { configurable: !0 },
          wavelength: { configurable: !0 },
          brightness: { configurable: !0 },
          speed: { configurable: !0 },
          radius: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.time = this.time), e.applyFilter(this, t, n, i);
          }),
          (n.center.get = function () {
            return this.uniforms.center;
          }),
          (n.center.set = function (e) {
            this.uniforms.center = e;
          }),
          (n.amplitude.get = function () {
            return this.uniforms.amplitude;
          }),
          (n.amplitude.set = function (e) {
            this.uniforms.amplitude = e;
          }),
          (n.wavelength.get = function () {
            return this.uniforms.wavelength;
          }),
          (n.wavelength.set = function (e) {
            this.uniforms.wavelength = e;
          }),
          (n.brightness.get = function () {
            return this.uniforms.brightness;
          }),
          (n.brightness.set = function (e) {
            this.uniforms.brightness = e;
          }),
          (n.speed.get = function () {
            return this.uniforms.speed;
          }),
          (n.speed.set = function (e) {
            this.uniforms.speed = e;
          }),
          (n.radius.get = function () {
            return this.uniforms.radius;
          }),
          (n.radius.set = function (e) {
            this.uniforms.radius = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.ShockwaveFilter = ht;
    var dt = t,
      pt =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n",
      ft = (function (e) {
        function t(t, n, i) {
          void 0 === n && (n = 0),
            void 0 === i && (i = 1),
            e.call(this, dt, pt),
            (this.uniforms.ambientColor = new Float32Array([0, 0, 0, i])),
            (this.texture = t),
            (this.color = n);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          texture: { configurable: !0 },
          color: { configurable: !0 },
          alpha: { configurable: !0 },
        };
        return (
          (t.prototype.apply = function (e, t, n, i) {
            (this.uniforms.dimensions[0] = t.sourceFrame.width),
              (this.uniforms.dimensions[1] = t.sourceFrame.height),
              e.applyFilter(this, t, n, i);
          }),
          (n.texture.get = function () {
            return this.uniforms.uLightmap;
          }),
          (n.texture.set = function (e) {
            this.uniforms.uLightmap = e;
          }),
          (n.color.set = function (e) {
            var t = this.uniforms.ambientColor;
            "number" == typeof e
              ? (PIXI.utils.hex2rgb(e, t), (this._color = e))
              : ((t[0] = e[0]),
                (t[1] = e[1]),
                (t[2] = e[2]),
                (t[3] = e[3]),
                (this._color = PIXI.utils.rgb2hex(t)));
          }),
          (n.color.get = function () {
            return this._color;
          }),
          (n.alpha.get = function () {
            return this.uniforms.ambientColor[3];
          }),
          (n.alpha.set = function (e) {
            this.uniforms.ambientColor[3] = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.SimpleLightmapFilter = ft;
    var mt = t,
      gt =
        "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",
      vt = (function (e) {
        function t(t, n, i, r) {
          void 0 === t && (t = 100),
            void 0 === n && (n = 600),
            void 0 === i && (i = null),
            void 0 === r && (r = null),
            e.call(this, mt, gt),
            (this.uniforms.blur = t),
            (this.uniforms.gradientBlur = n),
            (this.uniforms.start =
              i || new PIXI.Point(0, window.innerHeight / 2)),
            (this.uniforms.end =
              r || new PIXI.Point(600, window.innerHeight / 2)),
            (this.uniforms.delta = new PIXI.Point(30, 30)),
            (this.uniforms.texSize = new PIXI.Point(
              window.innerWidth,
              window.innerHeight
            )),
            this.updateDelta();
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          blur: { configurable: !0 },
          gradientBlur: { configurable: !0 },
          start: { configurable: !0 },
          end: { configurable: !0 },
        };
        return (
          (t.prototype.updateDelta = function () {
            (this.uniforms.delta.x = 0), (this.uniforms.delta.y = 0);
          }),
          (n.blur.get = function () {
            return this.uniforms.blur;
          }),
          (n.blur.set = function (e) {
            this.uniforms.blur = e;
          }),
          (n.gradientBlur.get = function () {
            return this.uniforms.gradientBlur;
          }),
          (n.gradientBlur.set = function (e) {
            this.uniforms.gradientBlur = e;
          }),
          (n.start.get = function () {
            return this.uniforms.start;
          }),
          (n.start.set = function (e) {
            (this.uniforms.start = e), this.updateDelta();
          }),
          (n.end.get = function () {
            return this.uniforms.end;
          }),
          (n.end.set = function (e) {
            (this.uniforms.end = e), this.updateDelta();
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.TiltShiftAxisFilter = vt;
    var _t = (function (e) {
      function t() {
        e.apply(this, arguments);
      }
      return (
        e && (t.__proto__ = e),
        (t.prototype = Object.create(e && e.prototype)),
        (t.prototype.constructor = t),
        (t.prototype.updateDelta = function () {
          var e = this.uniforms.end.x - this.uniforms.start.x,
            t = this.uniforms.end.y - this.uniforms.start.y,
            n = Math.sqrt(e * e + t * t);
          (this.uniforms.delta.x = e / n), (this.uniforms.delta.y = t / n);
        }),
        t
      );
    })(vt);
    PIXI.filters.TiltShiftXFilter = _t;
    var yt = (function (e) {
      function t() {
        e.apply(this, arguments);
      }
      return (
        e && (t.__proto__ = e),
        (t.prototype = Object.create(e && e.prototype)),
        (t.prototype.constructor = t),
        (t.prototype.updateDelta = function () {
          var e = this.uniforms.end.x - this.uniforms.start.x,
            t = this.uniforms.end.y - this.uniforms.start.y,
            n = Math.sqrt(e * e + t * t);
          (this.uniforms.delta.x = -t / n), (this.uniforms.delta.y = e / n);
        }),
        t
      );
    })(vt);
    PIXI.filters.TiltShiftYFilter = yt;
    var bt = (function (e) {
      function t(t, n, i, r) {
        void 0 === t && (t = 100),
          void 0 === n && (n = 600),
          void 0 === i && (i = null),
          void 0 === r && (r = null),
          e.call(this),
          (this.tiltShiftXFilter = new _t(t, n, i, r)),
          (this.tiltShiftYFilter = new yt(t, n, i, r));
      }
      e && (t.__proto__ = e),
        (t.prototype = Object.create(e && e.prototype)),
        (t.prototype.constructor = t);
      var n = {
        blur: { configurable: !0 },
        gradientBlur: { configurable: !0 },
        start: { configurable: !0 },
        end: { configurable: !0 },
      };
      return (
        (t.prototype.apply = function (e, t, n) {
          var i = e.getRenderTarget(!0);
          this.tiltShiftXFilter.apply(e, t, i),
            this.tiltShiftYFilter.apply(e, i, n),
            e.returnRenderTarget(i);
        }),
        (n.blur.get = function () {
          return this.tiltShiftXFilter.blur;
        }),
        (n.blur.set = function (e) {
          this.tiltShiftXFilter.blur = this.tiltShiftYFilter.blur = e;
        }),
        (n.gradientBlur.get = function () {
          return this.tiltShiftXFilter.gradientBlur;
        }),
        (n.gradientBlur.set = function (e) {
          this.tiltShiftXFilter.gradientBlur =
            this.tiltShiftYFilter.gradientBlur = e;
        }),
        (n.start.get = function () {
          return this.tiltShiftXFilter.start;
        }),
        (n.start.set = function (e) {
          this.tiltShiftXFilter.start = this.tiltShiftYFilter.start = e;
        }),
        (n.end.get = function () {
          return this.tiltShiftXFilter.end;
        }),
        (n.end.set = function (e) {
          this.tiltShiftXFilter.end = this.tiltShiftYFilter.end = e;
        }),
        Object.defineProperties(t.prototype, n),
        t
      );
    })(PIXI.Filter);
    PIXI.filters.TiltShiftFilter = bt;
    var wt = t,
      xt =
        "varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n",
      Ct = (function (e) {
        function t(t, n, i) {
          void 0 === t && (t = 200),
            void 0 === n && (n = 4),
            void 0 === i && (i = 20),
            e.call(this, wt, xt),
            (this.radius = t),
            (this.angle = n),
            (this.padding = i);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          offset: { configurable: !0 },
          radius: { configurable: !0 },
          angle: { configurable: !0 },
        };
        return (
          (n.offset.get = function () {
            return this.uniforms.offset;
          }),
          (n.offset.set = function (e) {
            this.uniforms.offset = e;
          }),
          (n.radius.get = function () {
            return this.uniforms.radius;
          }),
          (n.radius.set = function (e) {
            this.uniforms.radius = e;
          }),
          (n.angle.get = function () {
            return this.uniforms.angle;
          }),
          (n.angle.set = function (e) {
            this.uniforms.angle = e;
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    PIXI.filters.TwistFilter = Ct;
    var Tt = t,
      St =
        "varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\nfloat random(vec3 scale, float seed) {\n    // use the fragment position for a different seed per-pixel\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    gl_FragColor = color / total;\n\n    // switch back from pre-multiplied alpha\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n\n}\n",
      Et = (function (e) {
        function t(t, n, i, r) {
          void 0 === t && (t = 0.1),
            void 0 === n && (n = [0, 0]),
            void 0 === i && (i = 0),
            void 0 === r && (r = -1),
            e.call(this, Tt, St),
            (this.center = n),
            (this.strength = t),
            (this.innerRadius = i),
            (this.radius = r);
        }
        e && (t.__proto__ = e),
          (t.prototype = Object.create(e && e.prototype)),
          (t.prototype.constructor = t);
        var n = {
          center: { configurable: !0 },
          strength: { configurable: !0 },
          innerRadius: { configurable: !0 },
          radius: { configurable: !0 },
        };
        return (
          (n.center.get = function () {
            return this.uniforms.uCenter;
          }),
          (n.center.set = function (e) {
            this.uniforms.uCenter = e;
          }),
          (n.strength.get = function () {
            return this.uniforms.uStrength;
          }),
          (n.strength.set = function (e) {
            this.uniforms.uStrength = e;
          }),
          (n.innerRadius.get = function () {
            return this.uniforms.uInnerRadius;
          }),
          (n.innerRadius.set = function (e) {
            this.uniforms.uInnerRadius = e;
          }),
          (n.radius.get = function () {
            return this.uniforms.uRadius;
          }),
          (n.radius.set = function (e) {
            (0 > e || e === 1 / 0) && (e = -1), (this.uniforms.uRadius = e);
          }),
          Object.defineProperties(t.prototype, n),
          t
        );
      })(PIXI.Filter);
    (PIXI.filters.ZoomBlurFilter = Et),
      (e.AdvancedBloomFilter = s),
      (e.AsciiFilter = l),
      (e.BloomFilter = p),
      (e.BulgePinchFilter = g),
      (e.ColorReplaceFilter = y),
      (e.ConvolutionFilter = x),
      (e.CrossHatchFilter = S),
      (e.DotFilter = P),
      (e.DropShadowFilter = O),
      (e.EmbossFilter = R),
      (e.GlowFilter = U),
      (e.GodrayFilter = H),
      (e.MotionBlurFilter = W),
      (e.MultiColorReplaceFilter = q),
      (e.OldFilmFilter = K),
      (e.OutlineFilter = Z),
      (e.PixelateFilter = nt),
      (e.RGBSplitFilter = st),
      (e.RadialBlurFilter = lt),
      (e.ShockwaveFilter = ht),
      (e.SimpleLightmapFilter = ft),
      (e.TiltShiftFilter = bt),
      (e.TiltShiftAxisFilter = vt),
      (e.TiltShiftXFilter = _t),
      (e.TiltShiftYFilter = yt),
      (e.TwistFilter = Ct),
      (e.ZoomBlurFilter = Et),
      Object.defineProperty(e, "__esModule", { value: !0 });
  }),
  (function () {
    "use strict";
    function e(e) {
      h.push(e), 1 == h.length && u();
    }
    function t() {
      for (; h.length; ) h[0](), h.shift();
    }
    function n(e) {
      (this.a = d), (this.b = void 0), (this.f = []);
      var t = this;
      try {
        e(
          function (e) {
            s(t, e);
          },
          function (e) {
            o(t, e);
          }
        );
      } catch (n) {
        o(t, n);
      }
    }
    function i(e) {
      return new n(function (t, n) {
        n(e);
      });
    }
    function r(e) {
      return new n(function (t) {
        t(e);
      });
    }
    function s(e, t) {
      if (e.a == d) {
        if (t == e) throw new TypeError();
        var n = !1;
        try {
          var i = t && t.then;
          if (null != t && "object" == typeof t && "function" == typeof i)
            return void i.call(
              t,
              function (t) {
                n || s(e, t), (n = !0);
              },
              function (t) {
                n || o(e, t), (n = !0);
              }
            );
        } catch (r) {
          return void (n || o(e, r));
        }
        (e.a = 0), (e.b = t), a(e);
      }
    }
    function o(e, t) {
      if (e.a == d) {
        if (t == e) throw new TypeError();
        (e.a = 1), (e.b = t), a(e);
      }
    }
    function a(t) {
      e(function () {
        if (t.a != d)
          for (; t.f.length; ) {
            var e = t.f.shift(),
              n = e[0],
              i = e[1],
              r = e[2],
              e = e[3];
            try {
              0 == t.a
                ? r("function" == typeof n ? n.call(void 0, t.b) : t.b)
                : 1 == t.a &&
                  ("function" == typeof i ? r(i.call(void 0, t.b)) : e(t.b));
            } catch (s) {
              e(s);
            }
          }
      });
    }
    function l(e) {
      return new n(function (t, n) {
        function i(n) {
          return function (i) {
            (o[n] = i), (s += 1), s == e.length && t(o);
          };
        }
        var s = 0,
          o = [];
        0 == e.length && t(o);
        for (var a = 0; a < e.length; a += 1) r(e[a]).c(i(a), n);
      });
    }
    function c(e) {
      return new n(function (t, n) {
        for (var i = 0; i < e.length; i += 1) r(e[i]).c(t, n);
      });
    }
    var u,
      h = [];
    u = function () {
      setTimeout(t);
    };
    var d = 2;
    (n.prototype.g = function (e) {
      return this.c(void 0, e);
    }),
      (n.prototype.c = function (e, t) {
        var i = this;
        return new n(function (n, r) {
          i.f.push([e, t, n, r]), a(i);
        });
      }),
      window.Promise ||
        ((window.Promise = n),
        (window.Promise.resolve = r),
        (window.Promise.reject = i),
        (window.Promise.race = c),
        (window.Promise.all = l),
        (window.Promise.prototype.then = n.prototype.c),
        (window.Promise.prototype["catch"] = n.prototype.g));
  })(),
  (function () {
    function e(e, t) {
      document.addEventListener
        ? e.addEventListener("scroll", t, !1)
        : e.attachEvent("scroll", t);
    }
    function t(e) {
      document.body
        ? e()
        : document.addEventListener
        ? document.addEventListener("DOMContentLoaded", function t() {
            document.removeEventListener("DOMContentLoaded", t), e();
          })
        : document.attachEvent("onreadystatechange", function n() {
            ("interactive" == document.readyState ||
              "complete" == document.readyState) &&
              (document.detachEvent("onreadystatechange", n), e());
          });
    }
    function n(e) {
      (this.a = document.createElement("div")),
        this.a.setAttribute("aria-hidden", "true"),
        this.a.appendChild(document.createTextNode(e)),
        (this.b = document.createElement("span")),
        (this.c = document.createElement("span")),
        (this.h = document.createElement("span")),
        (this.f = document.createElement("span")),
        (this.g = -1),
        (this.b.style.cssText =
          "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
        (this.c.style.cssText =
          "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
        (this.f.style.cssText =
          "max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;"),
        (this.h.style.cssText =
          "display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;"),
        this.b.appendChild(this.h),
        this.c.appendChild(this.f),
        this.a.appendChild(this.b),
        this.a.appendChild(this.c);
    }
    function i(e, t) {
      e.a.style.cssText =
        "max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:" +
        t +
        ";";
    }
    function r(e) {
      var t = e.a.offsetWidth,
        n = t + 100;
      return (
        (e.f.style.width = n + "px"),
        (e.c.scrollLeft = n),
        (e.b.scrollLeft = e.b.scrollWidth + 100),
        e.g !== t ? ((e.g = t), !0) : !1
      );
    }
    function s(t, n) {
      function i() {
        var e = s;
        r(e) && e.a.parentNode && n(e.g);
      }
      var s = t;
      e(t.b, i), e(t.c, i), r(t);
    }
    function o(e, t) {
      var n = t || {};
      (this.family = e),
        (this.style = n.style || "normal"),
        (this.weight = n.weight || "normal"),
        (this.stretch = n.stretch || "normal");
    }
    function a() {
      if (null === d)
        if (l() && /Apple/.test(window.navigator.vendor)) {
          var e = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(
            window.navigator.userAgent
          );
          d = !!e && 603 > parseInt(e[1], 10);
        } else d = !1;
      return d;
    }
    function l() {
      return null === f && (f = !!document.fonts), f;
    }
    function c() {
      if (null === p) {
        var e = document.createElement("div");
        try {
          e.style.font = "condensed 100px sans-serif";
        } catch (t) {}
        p = "" !== e.style.font;
      }
      return p;
    }
    function u(e, t) {
      return [e.style, e.weight, c() ? e.stretch : "", "100px", t].join(" ");
    }
    var h = null,
      d = null,
      p = null,
      f = null;
    (o.prototype.load = function (e, r) {
      var o = this,
        c = e || "BESbswy",
        d = 0,
        p = r || 3e3,
        f = new Date().getTime();
      return new Promise(function (e, r) {
        if (l() && !a()) {
          var m = new Promise(function (e, t) {
              function n() {
                new Date().getTime() - f >= p
                  ? t()
                  : document.fonts.load(u(o, '"' + o.family + '"'), c).then(
                      function (t) {
                        1 <= t.length ? e() : setTimeout(n, 25);
                      },
                      function () {
                        t();
                      }
                    );
              }
              n();
            }),
            g = new Promise(function (e, t) {
              d = setTimeout(t, p);
            });
          Promise.race([g, m]).then(
            function () {
              clearTimeout(d), e(o);
            },
            function () {
              r(o);
            }
          );
        } else
          t(function () {
            function t() {
              var t;
              (t =
                (-1 != v && -1 != _) ||
                (-1 != v && -1 != y) ||
                (-1 != _ && -1 != y)) &&
                ((t = v != _ && v != y && _ != y) ||
                  (null === h &&
                    ((t = /AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(
                      window.navigator.userAgent
                    )),
                    (h =
                      !!t &&
                      (536 > parseInt(t[1], 10) ||
                        (536 === parseInt(t[1], 10) &&
                          11 >= parseInt(t[2], 10))))),
                  (t =
                    h &&
                    ((v == b && _ == b && y == b) ||
                      (v == w && _ == w && y == w) ||
                      (v == x && _ == x && y == x)))),
                (t = !t)),
                t &&
                  (C.parentNode && C.parentNode.removeChild(C),
                  clearTimeout(d),
                  e(o));
            }
            function a() {
              if (new Date().getTime() - f >= p)
                C.parentNode && C.parentNode.removeChild(C), r(o);
              else {
                var e = document.hidden;
                (!0 === e || void 0 === e) &&
                  ((v = l.a.offsetWidth),
                  (_ = m.a.offsetWidth),
                  (y = g.a.offsetWidth),
                  t()),
                  (d = setTimeout(a, 50));
              }
            }
            var l = new n(c),
              m = new n(c),
              g = new n(c),
              v = -1,
              _ = -1,
              y = -1,
              b = -1,
              w = -1,
              x = -1,
              C = document.createElement("div");
            (C.dir = "ltr"),
              i(l, u(o, "sans-serif")),
              i(m, u(o, "serif")),
              i(g, u(o, "monospace")),
              C.appendChild(l.a),
              C.appendChild(m.a),
              C.appendChild(g.a),
              document.body.appendChild(C),
              (b = l.a.offsetWidth),
              (w = m.a.offsetWidth),
              (x = g.a.offsetWidth),
              a(),
              s(l, function (e) {
                (v = e), t();
              }),
              i(l, u(o, '"' + o.family + '",sans-serif')),
              s(m, function (e) {
                (_ = e), t();
              }),
              i(m, u(o, '"' + o.family + '",serif')),
              s(g, function (e) {
                (y = e), t();
              }),
              i(g, u(o, '"' + o.family + '",monospace'));
          });
      });
    }),
      "object" == typeof module
        ? (module.exports = o)
        : ((window.FontFaceObserver = o),
          (window.FontFaceObserver.prototype.load = o.prototype.load));
  })(),
  (function (e, t) {
    "object" == typeof exports && "undefined" != typeof module
      ? t(exports)
      : "function" == typeof define && define.amd
      ? define(["exports"], t)
      : t((e.THREE = e.THREE || {}));
  })(this, function (e) {
    function t() {}
    function n(e, t) {
      (this.x = e || 0), (this.y = t || 0);
    }
    function i(e, t, r, s, o, a, l, c, u, h) {
      Object.defineProperty(this, "id", { value: Ps++ }),
        (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.image = void 0 !== e ? e : i.DEFAULT_IMAGE),
        (this.mipmaps = []),
        (this.mapping = void 0 !== t ? t : i.DEFAULT_MAPPING),
        (this.wrapS = void 0 !== r ? r : 1001),
        (this.wrapT = void 0 !== s ? s : 1001),
        (this.magFilter = void 0 !== o ? o : 1006),
        (this.minFilter = void 0 !== a ? a : 1008),
        (this.anisotropy = void 0 !== u ? u : 1),
        (this.format = void 0 !== l ? l : 1023),
        (this.type = void 0 !== c ? c : 1009),
        (this.offset = new n(0, 0)),
        (this.repeat = new n(1, 1)),
        (this.generateMipmaps = !0),
        (this.premultiplyAlpha = !1),
        (this.flipY = !0),
        (this.unpackAlignment = 4),
        (this.encoding = void 0 !== h ? h : 3e3),
        (this.version = 0),
        (this.onUpdate = null);
    }
    function r(e, t, n, i) {
      (this.x = e || 0),
        (this.y = t || 0),
        (this.z = n || 0),
        (this.w = void 0 !== i ? i : 1);
    }
    function s(e, t, n) {
      (this.uuid = ks.generateUUID()),
        (this.width = e),
        (this.height = t),
        (this.scissor = new r(0, 0, e, t)),
        (this.scissorTest = !1),
        (this.viewport = new r(0, 0, e, t)),
        (n = n || {}),
        void 0 === n.minFilter && (n.minFilter = 1006),
        (this.texture = new i(
          void 0,
          void 0,
          n.wrapS,
          n.wrapT,
          n.magFilter,
          n.minFilter,
          n.format,
          n.type,
          n.anisotropy,
          n.encoding
        )),
        (this.depthBuffer = void 0 !== n.depthBuffer ? n.depthBuffer : !0),
        (this.stencilBuffer =
          void 0 !== n.stencilBuffer ? n.stencilBuffer : !0),
        (this.depthTexture = void 0 !== n.depthTexture ? n.depthTexture : null);
    }
    function o(e, t, n) {
      s.call(this, e, t, n), (this.activeMipMapLevel = this.activeCubeFace = 0);
    }
    function a(e, t, n, i) {
      (this._x = e || 0),
        (this._y = t || 0),
        (this._z = n || 0),
        (this._w = void 0 !== i ? i : 1);
    }
    function l(e, t, n) {
      (this.x = e || 0), (this.y = t || 0), (this.z = n || 0);
    }
    function c() {
      (this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]),
        0 < arguments.length &&
          console.error(
            "THREE.Matrix4: the constructor no longer reads arguments. use .set() instead."
          );
    }
    function u(e, t, n, r, s, o, a, l, c, u, h, d) {
      i.call(this, null, o, a, l, c, u, r, s, h, d),
        (this.image = { data: e, width: t, height: n }),
        (this.magFilter = void 0 !== c ? c : 1003),
        (this.minFilter = void 0 !== u ? u : 1003),
        (this.flipY = this.generateMipmaps = !1),
        (this.unpackAlignment = 1);
    }
    function h(e, t, n, r, s, o, a, l, c, u) {
      (e = void 0 !== e ? e : []),
        i.call(this, e, void 0 !== t ? t : 301, n, r, s, o, a, l, c, u),
        (this.flipY = !1);
    }
    function d(e, t, n) {
      var i = e[0];
      if (0 >= i || i > 0) return e;
      var r = t * n,
        s = Os[r];
      if ((void 0 === s && ((s = new Float32Array(r)), (Os[r] = s)), 0 !== t))
        for (i.toArray(s, 0), i = 1, r = 0; i !== t; ++i)
          (r += n), e[i].toArray(s, r);
      return s;
    }
    function p(e, t) {
      var n = Ds[t];
      void 0 === n && ((n = new Int32Array(t)), (Ds[t] = n));
      for (var i = 0; i !== t; ++i) n[i] = e.allocTextureUnit();
      return n;
    }
    function f(e, t) {
      e.uniform1f(this.addr, t);
    }
    function m(e, t) {
      e.uniform1i(this.addr, t);
    }
    function g(e, t) {
      void 0 === t.x
        ? e.uniform2fv(this.addr, t)
        : e.uniform2f(this.addr, t.x, t.y);
    }
    function v(e, t) {
      void 0 !== t.x
        ? e.uniform3f(this.addr, t.x, t.y, t.z)
        : void 0 !== t.r
        ? e.uniform3f(this.addr, t.r, t.g, t.b)
        : e.uniform3fv(this.addr, t);
    }
    function _(e, t) {
      void 0 === t.x
        ? e.uniform4fv(this.addr, t)
        : e.uniform4f(this.addr, t.x, t.y, t.z, t.w);
    }
    function y(e, t) {
      e.uniformMatrix2fv(this.addr, !1, t.elements || t);
    }
    function b(e, t) {
      void 0 === t.elements
        ? e.uniformMatrix3fv(this.addr, !1, t)
        : (Rs.set(t.elements), e.uniformMatrix3fv(this.addr, !1, Rs));
    }
    function w(e, t) {
      void 0 === t.elements
        ? e.uniformMatrix4fv(this.addr, !1, t)
        : (Ms.set(t.elements), e.uniformMatrix4fv(this.addr, !1, Ms));
    }
    function x(e, t, n) {
      var i = n.allocTextureUnit();
      e.uniform1i(this.addr, i), n.setTexture2D(t || Is, i);
    }
    function C(e, t, n) {
      var i = n.allocTextureUnit();
      e.uniform1i(this.addr, i), n.setTextureCube(t || As, i);
    }
    function T(e, t) {
      e.uniform2iv(this.addr, t);
    }
    function S(e, t) {
      e.uniform3iv(this.addr, t);
    }
    function E(e, t) {
      e.uniform4iv(this.addr, t);
    }
    function k(e) {
      switch (e) {
        case 5126:
          return f;
        case 35664:
          return g;
        case 35665:
          return v;
        case 35666:
          return _;
        case 35674:
          return y;
        case 35675:
          return b;
        case 35676:
          return w;
        case 35678:
        case 36198:
          return x;
        case 35680:
          return C;
        case 5124:
        case 35670:
          return m;
        case 35667:
        case 35671:
          return T;
        case 35668:
        case 35672:
          return S;
        case 35669:
        case 35673:
          return E;
      }
    }
    function P(e, t) {
      e.uniform1fv(this.addr, t);
    }
    function I(e, t) {
      e.uniform1iv(this.addr, t);
    }
    function A(e, t) {
      e.uniform2fv(this.addr, d(t, this.size, 2));
    }
    function O(e, t) {
      e.uniform3fv(this.addr, d(t, this.size, 3));
    }
    function D(e, t) {
      e.uniform4fv(this.addr, d(t, this.size, 4));
    }
    function M(e, t) {
      e.uniformMatrix2fv(this.addr, !1, d(t, this.size, 4));
    }
    function R(e, t) {
      e.uniformMatrix3fv(this.addr, !1, d(t, this.size, 9));
    }
    function L(e, t) {
      e.uniformMatrix4fv(this.addr, !1, d(t, this.size, 16));
    }
    function N(e, t, n) {
      var i = t.length,
        r = p(n, i);
      for (e.uniform1iv(this.addr, r), e = 0; e !== i; ++e)
        n.setTexture2D(t[e] || Is, r[e]);
    }
    function U(e, t, n) {
      var i = t.length,
        r = p(n, i);
      for (e.uniform1iv(this.addr, r), e = 0; e !== i; ++e)
        n.setTextureCube(t[e] || As, r[e]);
    }
    function B(e) {
      switch (e) {
        case 5126:
          return P;
        case 35664:
          return A;
        case 35665:
          return O;
        case 35666:
          return D;
        case 35674:
          return M;
        case 35675:
          return R;
        case 35676:
          return L;
        case 35678:
          return N;
        case 35680:
          return U;
        case 5124:
        case 35670:
          return I;
        case 35667:
        case 35671:
          return T;
        case 35668:
        case 35672:
          return S;
        case 35669:
        case 35673:
          return E;
      }
    }
    function F(e, t, n) {
      (this.id = e), (this.addr = n), (this.setValue = k(t.type));
    }
    function j(e, t, n) {
      (this.id = e),
        (this.addr = n),
        (this.size = t.size),
        (this.setValue = B(t.type));
    }
    function H(e) {
      (this.id = e), (this.seq = []), (this.map = {});
    }
    function $(e, t, n) {
      (this.seq = []),
        (this.map = {}),
        (this.renderer = n),
        (n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS));
      for (var i = 0; n > i; ++i) {
        var r = e.getActiveUniform(t, i),
          s = e.getUniformLocation(t, r.name),
          o = this,
          a = r.name,
          l = a.length;
        for (Ls.lastIndex = 0; ; ) {
          var c = Ls.exec(a),
            u = Ls.lastIndex,
            h = c[1],
            d = c[3];
          if (
            ("]" === c[2] && (h |= 0),
            void 0 === d || ("[" === d && u + 2 === l))
          ) {
            (a = o),
              (r = void 0 === d ? new F(h, r, s) : new j(h, r, s)),
              a.seq.push(r),
              (a.map[r.id] = r);
            break;
          }
          (d = o.map[h]),
            void 0 === d &&
              ((d = new H(h)),
              (h = o),
              (o = d),
              h.seq.push(o),
              (h.map[o.id] = o)),
            (o = d);
        }
      }
    }
    function z(e, t, n) {
      return void 0 === t && void 0 === n ? this.set(e) : this.setRGB(e, t, n);
    }
    function W(e, t) {
      (this.min = void 0 !== e ? e : new n(1 / 0, 1 / 0)),
        (this.max = void 0 !== t ? t : new n(-1 / 0, -1 / 0));
    }
    function G(e, t, i, r, s) {
      var o, a, c, u, h, d, p, f, m, g, v, _, y, b, w, x;
      this.render = function (e, C, T, S) {
        if (0 !== e.length) {
          C = new l();
          var E = S.w / S.z,
            k = 0.5 * S.z,
            P = 0.5 * S.w,
            I = 16 / S.w,
            A = new n(I * E, I),
            O = new l(1, 1, 0),
            D = new n(1, 1),
            M = new W();
          if (
            (M.min.set(S.x, S.y),
            M.max.set(S.x + (S.z - 16), S.y + (S.w - 16)),
            void 0 === b)
          ) {
            var I = new Float32Array([
                -1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1,
              ]),
              R = new Uint16Array([0, 1, 2, 0, 2, 3]);
            (v = t.createBuffer()),
              (_ = t.createBuffer()),
              t.bindBuffer(t.ARRAY_BUFFER, v),
              t.bufferData(t.ARRAY_BUFFER, I, t.STATIC_DRAW),
              t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, _),
              t.bufferData(t.ELEMENT_ARRAY_BUFFER, R, t.STATIC_DRAW),
              (w = t.createTexture()),
              (x = t.createTexture()),
              i.bindTexture(t.TEXTURE_2D, w),
              t.texImage2D(
                t.TEXTURE_2D,
                0,
                t.RGB,
                16,
                16,
                0,
                t.RGB,
                t.UNSIGNED_BYTE,
                null
              ),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST),
              i.bindTexture(t.TEXTURE_2D, x),
              t.texImage2D(
                t.TEXTURE_2D,
                0,
                t.RGBA,
                16,
                16,
                0,
                t.RGBA,
                t.UNSIGNED_BYTE,
                null
              ),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_S, t.CLAMP_TO_EDGE),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_WRAP_T, t.CLAMP_TO_EDGE),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MAG_FILTER, t.NEAREST),
              t.texParameteri(t.TEXTURE_2D, t.TEXTURE_MIN_FILTER, t.NEAREST);
            var I = (y = {
                vertexShader:
                  "uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",
                fragmentShader:
                  "uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}",
              }),
              R = t.createProgram(),
              L = t.createShader(t.FRAGMENT_SHADER),
              N = t.createShader(t.VERTEX_SHADER),
              U = "precision " + s.precision + " float;\n";
            t.shaderSource(L, U + I.fragmentShader),
              t.shaderSource(N, U + I.vertexShader),
              t.compileShader(L),
              t.compileShader(N),
              t.attachShader(R, L),
              t.attachShader(R, N),
              t.linkProgram(R),
              (b = R),
              (m = t.getAttribLocation(b, "position")),
              (g = t.getAttribLocation(b, "uv")),
              (o = t.getUniformLocation(b, "renderType")),
              (a = t.getUniformLocation(b, "map")),
              (c = t.getUniformLocation(b, "occlusionMap")),
              (u = t.getUniformLocation(b, "opacity")),
              (h = t.getUniformLocation(b, "color")),
              (d = t.getUniformLocation(b, "scale")),
              (p = t.getUniformLocation(b, "rotation")),
              (f = t.getUniformLocation(b, "screenPosition"));
          }
          for (
            i.useProgram(b),
              i.initAttributes(),
              i.enableAttribute(m),
              i.enableAttribute(g),
              i.disableUnusedAttributes(),
              t.uniform1i(c, 0),
              t.uniform1i(a, 1),
              t.bindBuffer(t.ARRAY_BUFFER, v),
              t.vertexAttribPointer(m, 2, t.FLOAT, !1, 16, 0),
              t.vertexAttribPointer(g, 2, t.FLOAT, !1, 16, 8),
              t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, _),
              i.disable(t.CULL_FACE),
              i.buffers.depth.setMask(!1),
              R = 0,
              L = e.length;
            L > R;
            R++
          )
            if (
              ((I = 16 / S.w),
              A.set(I * E, I),
              (N = e[R]),
              C.set(
                N.matrixWorld.elements[12],
                N.matrixWorld.elements[13],
                N.matrixWorld.elements[14]
              ),
              C.applyMatrix4(T.matrixWorldInverse),
              C.applyMatrix4(T.projectionMatrix),
              O.copy(C),
              (D.x = S.x + O.x * k + k - 8),
              (D.y = S.y + O.y * P + P - 8),
              !0 === M.containsPoint(D))
            ) {
              i.activeTexture(t.TEXTURE0),
                i.bindTexture(t.TEXTURE_2D, null),
                i.activeTexture(t.TEXTURE1),
                i.bindTexture(t.TEXTURE_2D, w),
                t.copyTexImage2D(t.TEXTURE_2D, 0, t.RGB, D.x, D.y, 16, 16, 0),
                t.uniform1i(o, 0),
                t.uniform2f(d, A.x, A.y),
                t.uniform3f(f, O.x, O.y, O.z),
                i.disable(t.BLEND),
                i.enable(t.DEPTH_TEST),
                t.drawElements(t.TRIANGLES, 6, t.UNSIGNED_SHORT, 0),
                i.activeTexture(t.TEXTURE0),
                i.bindTexture(t.TEXTURE_2D, x),
                t.copyTexImage2D(t.TEXTURE_2D, 0, t.RGBA, D.x, D.y, 16, 16, 0),
                t.uniform1i(o, 1),
                i.disable(t.DEPTH_TEST),
                i.activeTexture(t.TEXTURE1),
                i.bindTexture(t.TEXTURE_2D, w),
                t.drawElements(t.TRIANGLES, 6, t.UNSIGNED_SHORT, 0),
                N.positionScreen.copy(O),
                N.customUpdateCallback
                  ? N.customUpdateCallback(N)
                  : N.updateLensFlares(),
                t.uniform1i(o, 2),
                i.enable(t.BLEND);
              for (var U = 0, B = N.lensFlares.length; B > U; U++) {
                var F = N.lensFlares[U];
                0.001 < F.opacity &&
                  0.001 < F.scale &&
                  ((O.x = F.x),
                  (O.y = F.y),
                  (O.z = F.z),
                  (I = (F.size * F.scale) / S.w),
                  (A.x = I * E),
                  (A.y = I),
                  t.uniform3f(f, O.x, O.y, O.z),
                  t.uniform2f(d, A.x, A.y),
                  t.uniform1f(p, F.rotation),
                  t.uniform1f(u, F.opacity),
                  t.uniform3f(h, F.color.r, F.color.g, F.color.b),
                  i.setBlending(
                    F.blending,
                    F.blendEquation,
                    F.blendSrc,
                    F.blendDst
                  ),
                  r.setTexture2D(F.texture, 1),
                  t.drawElements(t.TRIANGLES, 6, t.UNSIGNED_SHORT, 0));
              }
            }
          i.enable(t.CULL_FACE),
            i.enable(t.DEPTH_TEST),
            i.buffers.depth.setMask(!0),
            i.reset();
        }
      };
    }
    function V(e, t, n, r, s, o, a, l, c) {
      i.call(this, e, t, n, r, s, o, a, l, c), (this.needsUpdate = !0);
    }
    function q(e, t, n, i, r) {
      function s(e, t) {
        return e.renderOrder !== t.renderOrder
          ? e.renderOrder - t.renderOrder
          : e.z !== t.z
          ? t.z - e.z
          : t.id - e.id;
      }
      var o,
        c,
        u,
        h,
        d,
        p,
        f,
        m,
        g,
        v,
        _,
        y,
        b,
        w,
        x,
        C,
        T,
        S,
        E,
        k,
        P,
        I = new l(),
        A = new a(),
        O = new l();
      this.render = function (a, l, D) {
        if (0 !== a.length) {
          if (void 0 === k) {
            var M = new Float32Array([
                -0.5, -0.5, 0, 0, 0.5, -0.5, 1, 0, 0.5, 0.5, 1, 1, -0.5, 0.5, 0,
                1,
              ]),
              R = new Uint16Array([0, 1, 2, 0, 2, 3]);
            (S = t.createBuffer()),
              (E = t.createBuffer()),
              t.bindBuffer(t.ARRAY_BUFFER, S),
              t.bufferData(t.ARRAY_BUFFER, M, t.STATIC_DRAW),
              t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, E),
              t.bufferData(t.ELEMENT_ARRAY_BUFFER, R, t.STATIC_DRAW),
              (M = t.createProgram()),
              (R = t.createShader(t.VERTEX_SHADER));
            var L = t.createShader(t.FRAGMENT_SHADER);
            t.shaderSource(
              R,
              [
                "precision " + r.precision + " float;",
                "#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\nvUV = uvOffset + uv * uvScale;\nvec2 alignedPosition = position * scale;\nvec2 rotatedPosition;\nrotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\nrotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\nvec4 finalPosition;\nfinalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\nfinalPosition.xy += rotatedPosition;\nfinalPosition = projectionMatrix * finalPosition;\ngl_Position = finalPosition;\n}",
              ].join("\n")
            ),
              t.shaderSource(
                L,
                [
                  "precision " + r.precision + " float;",
                  "#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvoid main() {\nvec4 texture = texture2D( map, vUV );\nif ( texture.a < alphaTest ) discard;\ngl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\nif ( fogType > 0 ) {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat fogFactor = 0.0;\nif ( fogType == 1 ) {\nfogFactor = smoothstep( fogNear, fogFar, depth );\n} else {\nconst float LOG2 = 1.442695;\nfogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n}\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}\n}",
                ].join("\n")
              ),
              t.compileShader(R),
              t.compileShader(L),
              t.attachShader(M, R),
              t.attachShader(M, L),
              t.linkProgram(M),
              (k = M),
              (C = t.getAttribLocation(k, "position")),
              (T = t.getAttribLocation(k, "uv")),
              (o = t.getUniformLocation(k, "uvOffset")),
              (c = t.getUniformLocation(k, "uvScale")),
              (u = t.getUniformLocation(k, "rotation")),
              (h = t.getUniformLocation(k, "scale")),
              (d = t.getUniformLocation(k, "color")),
              (p = t.getUniformLocation(k, "map")),
              (f = t.getUniformLocation(k, "opacity")),
              (m = t.getUniformLocation(k, "modelViewMatrix")),
              (g = t.getUniformLocation(k, "projectionMatrix")),
              (v = t.getUniformLocation(k, "fogType")),
              (_ = t.getUniformLocation(k, "fogDensity")),
              (y = t.getUniformLocation(k, "fogNear")),
              (b = t.getUniformLocation(k, "fogFar")),
              (w = t.getUniformLocation(k, "fogColor")),
              (x = t.getUniformLocation(k, "alphaTest")),
              (M = document.createElementNS(
                "http://www.w3.org/1999/xhtml",
                "canvas"
              )),
              (M.width = 8),
              (M.height = 8),
              (R = M.getContext("2d")),
              (R.fillStyle = "white"),
              R.fillRect(0, 0, 8, 8),
              (P = new V(M));
          }
          n.useProgram(k),
            n.initAttributes(),
            n.enableAttribute(C),
            n.enableAttribute(T),
            n.disableUnusedAttributes(),
            n.disable(t.CULL_FACE),
            n.enable(t.BLEND),
            t.bindBuffer(t.ARRAY_BUFFER, S),
            t.vertexAttribPointer(C, 2, t.FLOAT, !1, 16, 0),
            t.vertexAttribPointer(T, 2, t.FLOAT, !1, 16, 8),
            t.bindBuffer(t.ELEMENT_ARRAY_BUFFER, E),
            t.uniformMatrix4fv(g, !1, D.projectionMatrix.elements),
            n.activeTexture(t.TEXTURE0),
            t.uniform1i(p, 0),
            (R = M = 0),
            (L = l.fog)
              ? (t.uniform3f(w, L.color.r, L.color.g, L.color.b),
                L.isFog
                  ? (t.uniform1f(y, L.near),
                    t.uniform1f(b, L.far),
                    t.uniform1i(v, 1),
                    (R = M = 1))
                  : L.isFogExp2 &&
                    (t.uniform1f(_, L.density), t.uniform1i(v, 2), (R = M = 2)))
              : (t.uniform1i(v, 0), (R = M = 0));
          for (var N = 0, U = a.length; U > N; N++)
            (L = a[N]),
              L.modelViewMatrix.multiplyMatrices(
                D.matrixWorldInverse,
                L.matrixWorld
              ),
              (L.z = -L.modelViewMatrix.elements[14]);
          a.sort(s);
          for (var B = [], N = 0, U = a.length; U > N; N++) {
            L = a[N];
            var F = L.material;
            if (!1 !== F.visible) {
              L.onBeforeRender(e, l, D, void 0, F, void 0),
                t.uniform1f(x, F.alphaTest),
                t.uniformMatrix4fv(m, !1, L.modelViewMatrix.elements),
                L.matrixWorld.decompose(I, A, O),
                (B[0] = O.x),
                (B[1] = O.y);
              var j = 0;
              l.fog && F.fog && (j = R),
                M !== j && (t.uniform1i(v, j), (M = j)),
                null !== F.map
                  ? (t.uniform2f(o, F.map.offset.x, F.map.offset.y),
                    t.uniform2f(c, F.map.repeat.x, F.map.repeat.y))
                  : (t.uniform2f(o, 0, 0), t.uniform2f(c, 1, 1)),
                t.uniform1f(f, F.opacity),
                t.uniform3f(d, F.color.r, F.color.g, F.color.b),
                t.uniform1f(u, F.rotation),
                t.uniform2fv(h, B),
                n.setBlending(
                  F.blending,
                  F.blendEquation,
                  F.blendSrc,
                  F.blendDst,
                  F.blendEquationAlpha,
                  F.blendSrcAlpha,
                  F.blendDstAlpha,
                  F.premultipliedAlpha
                ),
                n.buffers.depth.setTest(F.depthTest),
                n.buffers.depth.setMask(F.depthWrite),
                i.setTexture2D(F.map || P, 0),
                t.drawElements(t.TRIANGLES, 6, t.UNSIGNED_SHORT, 0),
                L.onAfterRender(e, l, D, void 0, F, void 0);
            }
          }
          n.enable(t.CULL_FACE), n.reset();
        }
      };
    }
    function X() {
      Object.defineProperty(this, "id", { value: Hs++ }),
        (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.type = "Material"),
        (this.lights = this.fog = !0),
        (this.blending = 1),
        (this.side = 0),
        (this.flatShading = !1),
        (this.vertexColors = 0),
        (this.opacity = 1),
        (this.transparent = !1),
        (this.blendSrc = 204),
        (this.blendDst = 205),
        (this.blendEquation = 100),
        (this.blendEquationAlpha =
          this.blendDstAlpha =
          this.blendSrcAlpha =
            null),
        (this.depthFunc = 3),
        (this.depthWrite = this.depthTest = !0),
        (this.clippingPlanes = null),
        (this.clipShadows = this.clipIntersection = !1),
        (this.colorWrite = !0),
        (this.precision = null),
        (this.polygonOffset = !1),
        (this.polygonOffsetUnits = this.polygonOffsetFactor = 0),
        (this.dithering = !1),
        (this.alphaTest = 0),
        (this.premultipliedAlpha = !1),
        (this.overdraw = 0),
        (this.visible = !0),
        (this.userData = {}),
        (this.needsUpdate = !0);
    }
    function Y(e) {
      X.call(this),
        (this.type = "ShaderMaterial"),
        (this.defines = {}),
        (this.uniforms = {}),
        (this.vertexShader =
          "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}"),
        (this.fragmentShader =
          "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}"),
        (this.linewidth = 1),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.morphNormals =
          this.morphTargets =
          this.skinning =
          this.clipping =
          this.lights =
          this.fog =
            !1),
        (this.extensions = {
          derivatives: !1,
          fragDepth: !1,
          drawBuffers: !1,
          shaderTextureLOD: !1,
        }),
        (this.defaultAttributeValues = {
          color: [1, 1, 1],
          uv: [0, 0],
          uv2: [0, 0],
        }),
        (this.index0AttributeName = void 0),
        void 0 !== e &&
          (void 0 !== e.attributes &&
            console.error(
              "THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."
            ),
          this.setValues(e));
    }
    function K(e) {
      X.call(this),
        (this.type = "MeshDepthMaterial"),
        (this.depthPacking = 3200),
        (this.morphTargets = this.skinning = !1),
        (this.displacementMap = this.alphaMap = this.map = null),
        (this.displacementScale = 1),
        (this.displacementBias = 0),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.lights = this.fog = !1),
        this.setValues(e);
    }
    function J(e) {
      X.call(this),
        (this.type = "MeshDistanceMaterial"),
        (this.referencePosition = new l()),
        (this.nearDistance = 1),
        (this.farDistance = 1e3),
        (this.morphTargets = this.skinning = !1),
        (this.displacementMap = this.alphaMap = this.map = null),
        (this.displacementScale = 1),
        (this.displacementBias = 0),
        (this.lights = this.fog = !1),
        this.setValues(e);
    }
    function Q(e, t) {
      (this.min = void 0 !== e ? e : new l(1 / 0, 1 / 0, 1 / 0)),
        (this.max = void 0 !== t ? t : new l(-1 / 0, -1 / 0, -1 / 0));
    }
    function Z(e, t) {
      (this.center = void 0 !== e ? e : new l()),
        (this.radius = void 0 !== t ? t : 0);
    }
    function et() {
      (this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1]),
        0 < arguments.length &&
          console.error(
            "THREE.Matrix3: the constructor no longer reads arguments. use .set() instead."
          );
    }
    function tt(e, t) {
      (this.normal = void 0 !== e ? e : new l(1, 0, 0)),
        (this.constant = void 0 !== t ? t : 0);
    }
    function nt(e, t, n, i, r, s) {
      this.planes = [
        void 0 !== e ? e : new tt(),
        void 0 !== t ? t : new tt(),
        void 0 !== n ? n : new tt(),
        void 0 !== i ? i : new tt(),
        void 0 !== r ? r : new tt(),
        void 0 !== s ? s : new tt(),
      ];
    }
    function it(e, t, i) {
      function o(t, n, i, r, s, o) {
        var a = t.geometry,
          l = g,
          c = t.customDepthMaterial;
        return (
          i && ((l = v), (c = t.customDistanceMaterial)),
          c
            ? (l = c)
            : ((c = !1),
              n.morphTargets &&
                (a && a.isBufferGeometry
                  ? (c =
                      a.morphAttributes &&
                      a.morphAttributes.position &&
                      0 < a.morphAttributes.position.length)
                  : a &&
                    a.isGeometry &&
                    (c = a.morphTargets && 0 < a.morphTargets.length)),
              t.isSkinnedMesh &&
                !1 === n.skinning &&
                console.warn(
                  "THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",
                  t
                ),
              (t = t.isSkinnedMesh && n.skinning),
              (a = 0),
              c && (a |= 1),
              t && (a |= 2),
              (l = l[a])),
          e.localClippingEnabled &&
            !0 === n.clipShadows &&
            0 !== n.clippingPlanes.length &&
            ((a = l.uuid),
            (c = n.uuid),
            (t = _[a]),
            void 0 === t && ((t = {}), (_[a] = t)),
            (a = t[c]),
            void 0 === a && ((a = l.clone()), (t[c] = a)),
            (l = a)),
          (l.visible = n.visible),
          (l.wireframe = n.wireframe),
          (c = n.side),
          S.renderSingleSided && 2 == c && (c = 0),
          S.renderReverseSided && (0 === c ? (c = 1) : 1 === c && (c = 0)),
          (l.side = c),
          (l.clipShadows = n.clipShadows),
          (l.clippingPlanes = n.clippingPlanes),
          (l.clipIntersection = n.clipIntersection),
          (l.wireframeLinewidth = n.wireframeLinewidth),
          (l.linewidth = n.linewidth),
          i &&
            l.isMeshDistanceMaterial &&
            (l.referencePosition.copy(r),
            (l.nearDistance = s),
            (l.farDistance = o)),
          l
        );
      }
      function a(n, i, r, s) {
        var l;
        if (!1 !== n.visible) {
          if (
            n.layers.test(i.layers) &&
            (n.isMesh || n.isLine || n.isPoints) &&
            n.castShadow &&
            (!n.frustumCulled || u.intersectsObject(n))
          ) {
            n.modelViewMatrix.multiplyMatrices(
              r.matrixWorldInverse,
              n.matrixWorld
            );
            var c = t.update(n),
              h = n.material;
            if (Array.isArray(h))
              for (var d = c.groups, p = 0, f = d.length; f > p; p++) {
                var g = d[p];
                (l = h[g.materialIndex]) &&
                  l.visible &&
                  ((l = o(n, l, s, m, r.near, r.far)),
                  e.renderBufferDirect(r, null, c, l, n, g));
              }
            else
              h.visible &&
                ((l = o(n, h, s, m, r.near, r.far)),
                e.renderBufferDirect(r, null, c, l, n, null));
          }
          for (n = n.children, c = 0, h = n.length; h > c; c++)
            a(n[c], i, r, s);
        }
      }
      var u = new nt(),
        h = new c(),
        d = new n(),
        p = new n(i, i),
        f = new l(),
        m = new l(),
        g = Array(4),
        v = Array(4),
        _ = {},
        y = [
          new l(1, 0, 0),
          new l(-1, 0, 0),
          new l(0, 0, 1),
          new l(0, 0, -1),
          new l(0, 1, 0),
          new l(0, -1, 0),
        ],
        b = [
          new l(0, 1, 0),
          new l(0, 1, 0),
          new l(0, 1, 0),
          new l(0, 1, 0),
          new l(0, 0, 1),
          new l(0, 0, -1),
        ],
        w = [new r(), new r(), new r(), new r(), new r(), new r()];
      for (i = 0; 4 !== i; ++i) {
        var x = 0 !== (1 & i),
          C = 0 !== (2 & i),
          T = new K({ depthPacking: 3201, morphTargets: x, skinning: C });
        (g[i] = T), (x = new J({ morphTargets: x, skinning: C })), (v[i] = x);
      }
      var S = this;
      (this.enabled = !1),
        (this.autoUpdate = !0),
        (this.needsUpdate = !1),
        (this.type = 1),
        (this.renderSingleSided = this.renderReverseSided = !0),
        (this.render = function (t, n, i) {
          if (
            !1 !== S.enabled &&
            (!1 !== S.autoUpdate || !1 !== S.needsUpdate) &&
            0 !== t.length
          ) {
            var r = e.state;
            r.disable(e.context.BLEND),
              r.buffers.color.setClear(1, 1, 1, 1),
              r.buffers.depth.setTest(!0),
              r.setScissorTest(!1);
            for (var o, l = 0, c = t.length; c > l; l++) {
              var g = t[l];
              o = g.shadow;
              var v = g && g.isPointLight;
              if (void 0 === o)
                console.warn("THREE.WebGLShadowMap:", g, "has no shadow.");
              else {
                var _ = o.camera;
                if ((d.copy(o.mapSize), d.min(p), v)) {
                  var x = d.x,
                    C = d.y;
                  w[0].set(2 * x, C, x, C),
                    w[1].set(0, C, x, C),
                    w[2].set(3 * x, C, x, C),
                    w[3].set(x, C, x, C),
                    w[4].set(3 * x, 0, x, C),
                    w[5].set(x, 0, x, C),
                    (d.x *= 4),
                    (d.y *= 2);
                }
                for (
                  null === o.map &&
                    ((o.map = new s(d.x, d.y, {
                      minFilter: 1003,
                      magFilter: 1003,
                      format: 1023,
                    })),
                    (o.map.texture.name = g.name + ".shadowMap"),
                    _.updateProjectionMatrix()),
                    o.isSpotLightShadow && o.update(g),
                    x = o.map,
                    C = o.matrix,
                    m.setFromMatrixPosition(g.matrixWorld),
                    _.position.copy(m),
                    v
                      ? ((o = 6), C.makeTranslation(-m.x, -m.y, -m.z))
                      : ((o = 1),
                        f.setFromMatrixPosition(g.target.matrixWorld),
                        _.lookAt(f),
                        _.updateMatrixWorld(),
                        C.set(
                          0.5,
                          0,
                          0,
                          0.5,
                          0,
                          0.5,
                          0,
                          0.5,
                          0,
                          0,
                          0.5,
                          0.5,
                          0,
                          0,
                          0,
                          1
                        ),
                        C.multiply(_.projectionMatrix),
                        C.multiply(_.matrixWorldInverse)),
                    e.setRenderTarget(x),
                    e.clear(),
                    g = 0;
                  o > g;
                  g++
                )
                  v &&
                    (f.copy(_.position),
                    f.add(y[g]),
                    _.up.copy(b[g]),
                    _.lookAt(f),
                    _.updateMatrixWorld(),
                    r.viewport(w[g])),
                    h.multiplyMatrices(
                      _.projectionMatrix,
                      _.matrixWorldInverse
                    ),
                    u.setFromMatrix(h),
                    a(n, i, _, v);
              }
            }
            S.needsUpdate = !1;
          }
        });
    }
    function rt(e) {
      var t = {};
      return {
        get: function (e) {
          return e.isInterleavedBufferAttribute && (e = e.data), t[e.uuid];
        },
        remove: function (n) {
          n.isInterleavedBufferAttribute && (n = n.data);
          var i = t[n.uuid];
          i && (e.deleteBuffer(i.buffer), delete t[n.uuid]);
        },
        update: function (n, i) {
          n.isInterleavedBufferAttribute && (n = n.data);
          var r = t[n.uuid];
          if (void 0 === r) {
            var r = n.uuid,
              s = n.array,
              o = n.dynamic ? e.DYNAMIC_DRAW : e.STATIC_DRAW,
              a = e.createBuffer();
            e.bindBuffer(i, a),
              e.bufferData(i, s, o),
              n.onUploadCallback(),
              (i = e.FLOAT),
              s instanceof Float32Array
                ? (i = e.FLOAT)
                : s instanceof Float64Array
                ? console.warn(
                    "THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."
                  )
                : s instanceof Uint16Array
                ? (i = e.UNSIGNED_SHORT)
                : s instanceof Int16Array
                ? (i = e.SHORT)
                : s instanceof Uint32Array
                ? (i = e.UNSIGNED_INT)
                : s instanceof Int32Array
                ? (i = e.INT)
                : s instanceof Int8Array
                ? (i = e.BYTE)
                : s instanceof Uint8Array && (i = e.UNSIGNED_BYTE),
              (t[r] = {
                buffer: a,
                type: i,
                bytesPerElement: s.BYTES_PER_ELEMENT,
                version: n.version,
              });
          } else
            r.version < n.version &&
              ((s = n),
              (a = s.array),
              (o = s.updateRange),
              e.bindBuffer(i, r.buffer),
              !1 === s.dynamic
                ? e.bufferData(i, a, e.STATIC_DRAW)
                : -1 === o.count
                ? e.bufferSubData(i, 0, a)
                : 0 === o.count
                ? console.error(
                    "THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."
                  )
                : (e.bufferSubData(
                    i,
                    o.offset * a.BYTES_PER_ELEMENT,
                    a.subarray(o.offset, o.offset + o.count)
                  ),
                  (o.count = -1)),
              (r.version = n.version));
        },
      };
    }
    function st(e, t, n, i) {
      (this._x = e || 0),
        (this._y = t || 0),
        (this._z = n || 0),
        (this._order = i || st.DefaultOrder);
    }
    function ot() {
      this.mask = 1;
    }
    function at() {
      Object.defineProperty(this, "id", { value: $s++ }),
        (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.type = "Object3D"),
        (this.parent = null),
        (this.children = []),
        (this.up = at.DefaultUp.clone());
      var e = new l(),
        t = new st(),
        n = new a(),
        i = new l(1, 1, 1);
      t.onChange(function () {
        n.setFromEuler(t, !1);
      }),
        n.onChange(function () {
          t.setFromQuaternion(n, void 0, !1);
        }),
        Object.defineProperties(this, {
          position: { enumerable: !0, value: e },
          rotation: { enumerable: !0, value: t },
          quaternion: { enumerable: !0, value: n },
          scale: { enumerable: !0, value: i },
          modelViewMatrix: { value: new c() },
          normalMatrix: { value: new et() },
        }),
        (this.matrix = new c()),
        (this.matrixWorld = new c()),
        (this.matrixAutoUpdate = at.DefaultMatrixAutoUpdate),
        (this.matrixWorldNeedsUpdate = !1),
        (this.layers = new ot()),
        (this.visible = !0),
        (this.receiveShadow = this.castShadow = !1),
        (this.frustumCulled = !0),
        (this.renderOrder = 0),
        (this.userData = {});
    }
    function lt() {
      at.call(this),
        (this.type = "Camera"),
        (this.matrixWorldInverse = new c()),
        (this.projectionMatrix = new c());
    }
    function ct(e, t, n, i, r, s) {
      lt.call(this),
        (this.type = "OrthographicCamera"),
        (this.zoom = 1),
        (this.view = null),
        (this.left = e),
        (this.right = t),
        (this.top = n),
        (this.bottom = i),
        (this.near = void 0 !== r ? r : 0.1),
        (this.far = void 0 !== s ? s : 2e3),
        this.updateProjectionMatrix();
    }
    function ut(e, t, n, i) {
      lt.call(this),
        (this.type = "PerspectiveCamera"),
        (this.fov = void 0 !== e ? e : 50),
        (this.zoom = 1),
        (this.near = void 0 !== n ? n : 0.1),
        (this.far = void 0 !== i ? i : 2e3),
        (this.focus = 10),
        (this.aspect = void 0 !== t ? t : 1),
        (this.view = null),
        (this.filmGauge = 35),
        (this.filmOffset = 0),
        this.updateProjectionMatrix();
    }
    function ht(e, t, n, i, r, s) {
      (this.a = e),
        (this.b = t),
        (this.c = n),
        (this.normal = i && i.isVector3 ? i : new l()),
        (this.vertexNormals = Array.isArray(i) ? i : []),
        (this.color = r && r.isColor ? r : new z()),
        (this.vertexColors = Array.isArray(r) ? r : []),
        (this.materialIndex = void 0 !== s ? s : 0);
    }
    function dt() {
      Object.defineProperty(this, "id", { value: zs++ }),
        (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.type = "Geometry"),
        (this.vertices = []),
        (this.colors = []),
        (this.faces = []),
        (this.faceVertexUvs = [[]]),
        (this.morphTargets = []),
        (this.morphNormals = []),
        (this.skinWeights = []),
        (this.skinIndices = []),
        (this.lineDistances = []),
        (this.boundingSphere = this.boundingBox = null),
        (this.groupsNeedUpdate =
          this.lineDistancesNeedUpdate =
          this.colorsNeedUpdate =
          this.normalsNeedUpdate =
          this.uvsNeedUpdate =
          this.verticesNeedUpdate =
          this.elementsNeedUpdate =
            !1);
    }
    function pt(e, t, n) {
      if (Array.isArray(e))
        throw new TypeError(
          "THREE.BufferAttribute: array should be a Typed Array."
        );
      (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.array = e),
        (this.itemSize = t),
        (this.count = void 0 !== e ? e.length / t : 0),
        (this.normalized = !0 === n),
        (this.dynamic = !1),
        (this.updateRange = { offset: 0, count: -1 }),
        (this.onUploadCallback = function () {}),
        (this.version = 0);
    }
    function ft(e, t) {
      pt.call(this, new Int8Array(e), t);
    }
    function mt(e, t) {
      pt.call(this, new Uint8Array(e), t);
    }
    function gt(e, t) {
      pt.call(this, new Uint8ClampedArray(e), t);
    }
    function vt(e, t) {
      pt.call(this, new Int16Array(e), t);
    }
    function _t(e, t) {
      pt.call(this, new Uint16Array(e), t);
    }
    function yt(e, t) {
      pt.call(this, new Int32Array(e), t);
    }
    function bt(e, t) {
      pt.call(this, new Uint32Array(e), t);
    }
    function wt(e, t) {
      pt.call(this, new Float32Array(e), t);
    }
    function xt(e, t) {
      pt.call(this, new Float64Array(e), t);
    }
    function Ct() {
      (this.indices = []),
        (this.vertices = []),
        (this.normals = []),
        (this.colors = []),
        (this.uvs = []),
        (this.uvs2 = []),
        (this.groups = []),
        (this.morphTargets = {}),
        (this.skinWeights = []),
        (this.skinIndices = []),
        (this.boundingSphere = this.boundingBox = null),
        (this.groupsNeedUpdate =
          this.uvsNeedUpdate =
          this.colorsNeedUpdate =
          this.normalsNeedUpdate =
          this.verticesNeedUpdate =
            !1);
    }
    function Tt(e) {
      if (0 === e.length) return -1 / 0;
      for (var t = e[0], n = 1, i = e.length; i > n; ++n)
        e[n] > t && (t = e[n]);
      return t;
    }
    function St() {
      Object.defineProperty(this, "id", { value: zs++ }),
        (this.uuid = ks.generateUUID()),
        (this.name = ""),
        (this.type = "BufferGeometry"),
        (this.index = null),
        (this.attributes = {}),
        (this.morphAttributes = {}),
        (this.groups = []),
        (this.boundingSphere = this.boundingBox = null),
        (this.drawRange = { start: 0, count: 1 / 0 });
    }
    function Et(e, t, n, i, r, s) {
      dt.call(this),
        (this.type = "BoxGeometry"),
        (this.parameters = {
          width: e,
          height: t,
          depth: n,
          widthSegments: i,
          heightSegments: r,
          depthSegments: s,
        }),
        this.fromBufferGeometry(new kt(e, t, n, i, r, s)),
        this.mergeVertices();
    }
    function kt(e, t, n, i, r, s) {
      function o(e, t, n, i, r, s, o, m, g, v, _) {
        var y = s / g,
          b = o / v,
          w = s / 2,
          x = o / 2,
          C = m / 2;
        o = g + 1;
        var T,
          S,
          E = v + 1,
          k = (s = 0),
          P = new l();
        for (S = 0; E > S; S++) {
          var I = S * b - x;
          for (T = 0; o > T; T++)
            (P[e] = (T * y - w) * i),
              (P[t] = I * r),
              (P[n] = C),
              u.push(P.x, P.y, P.z),
              (P[e] = 0),
              (P[t] = 0),
              (P[n] = m > 0 ? 1 : -1),
              h.push(P.x, P.y, P.z),
              d.push(T / g),
              d.push(1 - S / v),
              (s += 1);
        }
        for (S = 0; v > S; S++)
          for (T = 0; g > T; T++)
            (e = p + T + o * (S + 1)),
              (t = p + (T + 1) + o * (S + 1)),
              (n = p + (T + 1) + o * S),
              c.push(p + T + o * S, e, n),
              c.push(e, t, n),
              (k += 6);
        a.addGroup(f, k, _), (f += k), (p += s);
      }
      St.call(this),
        (this.type = "BoxBufferGeometry"),
        (this.parameters = {
          width: e,
          height: t,
          depth: n,
          widthSegments: i,
          heightSegments: r,
          depthSegments: s,
        });
      var a = this;
      (i = Math.floor(i) || 1),
        (r = Math.floor(r) || 1),
        (s = Math.floor(s) || 1);
      var c = [],
        u = [],
        h = [],
        d = [],
        p = 0,
        f = 0;
      o("z", "y", "x", -1, -1, n, t, e, s, r, 0),
        o("z", "y", "x", 1, -1, n, t, -e, s, r, 1),
        o("x", "z", "y", 1, 1, e, n, t, i, s, 2),
        o("x", "z", "y", 1, -1, e, n, -t, i, s, 3),
        o("x", "y", "z", 1, -1, e, t, n, i, r, 4),
        o("x", "y", "z", -1, -1, e, t, -n, i, r, 5),
        this.setIndex(c),
        this.addAttribute("position", new wt(u, 3)),
        this.addAttribute("normal", new wt(h, 3)),
        this.addAttribute("uv", new wt(d, 2));
    }
    function Pt(e, t, n, i) {
      dt.call(this),
        (this.type = "PlaneGeometry"),
        (this.parameters = {
          width: e,
          height: t,
          widthSegments: n,
          heightSegments: i,
        }),
        this.fromBufferGeometry(new It(e, t, n, i)),
        this.mergeVertices();
    }
    function It(e, t, n, i) {
      St.call(this),
        (this.type = "PlaneBufferGeometry"),
        (this.parameters = {
          width: e,
          height: t,
          widthSegments: n,
          heightSegments: i,
        });
      var r = e / 2,
        s = t / 2;
      (n = Math.floor(n) || 1), (i = Math.floor(i) || 1);
      var o = n + 1,
        a = i + 1,
        l = e / n,
        c = t / i,
        u = [],
        h = [],
        d = [],
        p = [];
      for (e = 0; a > e; e++) {
        var f = e * c - s;
        for (t = 0; o > t; t++)
          h.push(t * l - r, -f, 0),
            d.push(0, 0, 1),
            p.push(t / n),
            p.push(1 - e / i);
      }
      for (e = 0; i > e; e++)
        for (t = 0; n > t; t++)
          (r = t + o * (e + 1)),
            (s = t + 1 + o * (e + 1)),
            (a = t + 1 + o * e),
            u.push(t + o * e, r, a),
            u.push(r, s, a);
      this.setIndex(u),
        this.addAttribute("position", new wt(h, 3)),
        this.addAttribute("normal", new wt(d, 3)),
        this.addAttribute("uv", new wt(p, 2));
    }
    function At(e) {
      X.call(this),
        (this.type = "MeshBasicMaterial"),
        (this.color = new z(16777215)),
        (this.lightMap = this.map = null),
        (this.lightMapIntensity = 1),
        (this.aoMap = null),
        (this.aoMapIntensity = 1),
        (this.envMap = this.alphaMap = this.specularMap = null),
        (this.combine = 0),
        (this.reflectivity = 1),
        (this.refractionRatio = 0.98),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.wireframeLinejoin = this.wireframeLinecap = "round"),
        (this.lights = this.morphTargets = this.skinning = !1),
        this.setValues(e);
    }
    function Ot(e, t) {
      (this.origin = void 0 !== e ? e : new l()),
        (this.direction = void 0 !== t ? t : new l());
    }
    function Dt(e, t) {
      (this.start = void 0 !== e ? e : new l()),
        (this.end = void 0 !== t ? t : new l());
    }
    function Mt(e, t, n) {
      (this.a = void 0 !== e ? e : new l()),
        (this.b = void 0 !== t ? t : new l()),
        (this.c = void 0 !== n ? n : new l());
    }
    function Rt(e, t) {
      at.call(this),
        (this.type = "Mesh"),
        (this.geometry = void 0 !== e ? e : new St()),
        (this.material =
          void 0 !== t ? t : new At({ color: 16777215 * Math.random() })),
        (this.drawMode = 0),
        this.updateMorphTargets();
    }
    function Lt(e, t, n, i) {
      function r(e, n) {
        t.buffers.color.setClear(e.r, e.g, e.b, n, i);
      }
      var s,
        o,
        a,
        l = new z(0),
        c = 0;
      return {
        getClearColor: function () {
          return l;
        },
        setClearColor: function (e, t) {
          l.set(e), (c = void 0 !== t ? t : 1), r(l, c);
        },
        getClearAlpha: function () {
          return c;
        },
        setClearAlpha: function (e) {
          (c = e), r(l, c);
        },
        render: function (t, i, u, h) {
          (i = i.background),
            null === i ? r(l, c) : i && i.isColor && (r(i, 1), (h = !0)),
            (e.autoClear || h) &&
              e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil),
            i && i.isCubeTexture
              ? (void 0 === a &&
                  ((a = new Rt(
                    new kt(1, 1, 1),
                    new Y({
                      uniforms: js.cube.uniforms,
                      vertexShader: js.cube.vertexShader,
                      fragmentShader: js.cube.fragmentShader,
                      side: 1,
                      depthTest: !0,
                      depthWrite: !1,
                      polygonOffset: !0,
                      fog: !1,
                    })
                  )),
                  a.geometry.removeAttribute("normal"),
                  a.geometry.removeAttribute("uv"),
                  (a.onBeforeRender = function (e, t, n) {
                    (e = n.far),
                      this.matrixWorld.makeScale(e, e, e),
                      this.matrixWorld.copyPosition(n.matrixWorld),
                      (this.material.polygonOffsetUnits = 10 * e);
                  }),
                  n.update(a.geometry)),
                (a.material.uniforms.tCube.value = i),
                t.push(a, a.geometry, a.material, 0, null))
              : i &&
                i.isTexture &&
                (void 0 === s &&
                  ((s = new ct(-1, 1, 1, -1, 0, 1)),
                  (o = new Rt(
                    new It(2, 2),
                    new At({ depthTest: !1, depthWrite: !1, fog: !1 })
                  )),
                  n.update(o.geometry)),
                (o.material.map = i),
                e.renderBufferDirect(s, null, o.geometry, o.material, o, null));
        },
      };
    }
    function Nt(e, t) {
      return e.renderOrder !== t.renderOrder
        ? e.renderOrder - t.renderOrder
        : e.program && t.program && e.program !== t.program
        ? e.program.id - t.program.id
        : e.material.id !== t.material.id
        ? e.material.id - t.material.id
        : e.z !== t.z
        ? e.z - t.z
        : e.id - t.id;
    }
    function Ut(e, t) {
      return e.renderOrder !== t.renderOrder
        ? e.renderOrder - t.renderOrder
        : e.z !== t.z
        ? t.z - e.z
        : e.id - t.id;
    }
    function Bt() {
      var e = [],
        t = 0,
        n = [],
        i = [];
      return {
        opaque: n,
        transparent: i,
        init: function () {
          (t = 0), (n.length = 0), (i.length = 0);
        },
        push: function (r, s, o, a, l) {
          var c = e[t];
          void 0 === c
            ? ((c = {
                id: r.id,
                object: r,
                geometry: s,
                material: o,
                program: o.program,
                renderOrder: r.renderOrder,
                z: a,
                group: l,
              }),
              (e[t] = c))
            : ((c.id = r.id),
              (c.object = r),
              (c.geometry = s),
              (c.material = o),
              (c.program = o.program),
              (c.renderOrder = r.renderOrder),
              (c.z = a),
              (c.group = l)),
            (!0 === o.transparent ? i : n).push(c),
            t++;
        },
        sort: function () {
          1 < n.length && n.sort(Nt), 1 < i.length && i.sort(Ut);
        },
      };
    }
    function Ft() {
      var e = {};
      return {
        get: function (t, n) {
          return (
            (t = t.id + "," + n.id),
            (n = e[t]),
            void 0 === n && ((n = new Bt()), (e[t] = n)),
            n
          );
        },
        dispose: function () {
          e = {};
        },
      };
    }
    function jt(e, t) {
      return Math.abs(t[1]) - Math.abs(e[1]);
    }
    function Ht(e) {
      var t = {},
        n = new Float32Array(8);
      return {
        update: function (i, r, s, o) {
          var a = i.morphTargetInfluences,
            l = a.length;
          if (((i = t[r.id]), void 0 === i)) {
            i = [];
            for (var c = 0; l > c; c++) i[c] = [c, 0];
            t[r.id] = i;
          }
          var u = s.morphTargets && r.morphAttributes.position;
          for (
            s = s.morphNormals && r.morphAttributes.normal, c = 0;
            l > c;
            c++
          ) {
            var h = i[c];
            0 !== h[1] &&
              (u && r.removeAttribute("morphTarget" + c),
              s && r.removeAttribute("morphNormal" + c));
          }
          for (c = 0; l > c; c++) (h = i[c]), (h[0] = c), (h[1] = a[c]);
          for (i.sort(jt), c = 0; 8 > c; c++)
            (h = i[c]) && ((a = h[0]), (h = h[1]))
              ? (u && r.addAttribute("morphTarget" + c, u[a]),
                s && r.addAttribute("morphNormal" + c, s[a]),
                (n[c] = h))
              : (n[c] = 0);
          o.getUniforms().setValue(e, "morphTargetInfluences", n);
        },
      };
    }
    function $t(e, t, n) {
      var i, r, s;
      (this.setMode = function (e) {
        i = e;
      }),
        (this.setIndex = function (e) {
          (r = e.type), (s = e.bytesPerElement);
        }),
        (this.render = function (t, o) {
          e.drawElements(i, o, r, t * s),
            n.calls++,
            (n.vertices += o),
            i === e.TRIANGLES
              ? (n.faces += o / 3)
              : i === e.POINTS && (n.points += o);
        }),
        (this.renderInstances = function (o, a, l) {
          var c = t.get("ANGLE_instanced_arrays");
          null === c
            ? console.error(
                "THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
              )
            : (c.drawElementsInstancedANGLE(
                i,
                l,
                r,
                a * s,
                o.maxInstancedCount
              ),
              n.calls++,
              (n.vertices += l * o.maxInstancedCount),
              i === e.TRIANGLES
                ? (n.faces += (o.maxInstancedCount * l) / 3)
                : i === e.POINTS && (n.points += o.maxInstancedCount * l));
        });
    }
    function zt(e, t, n) {
      var i;
      (this.setMode = function (e) {
        i = e;
      }),
        (this.render = function (t, r) {
          e.drawArrays(i, t, r),
            n.calls++,
            (n.vertices += r),
            i === e.TRIANGLES
              ? (n.faces += r / 3)
              : i === e.POINTS && (n.points += r);
        }),
        (this.renderInstances = function (r, s, o) {
          var a = t.get("ANGLE_instanced_arrays");
          if (null === a)
            console.error(
              "THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
            );
          else {
            var l = r.attributes.position;
            l.isInterleavedBufferAttribute
              ? ((o = l.data.count),
                a.drawArraysInstancedANGLE(i, 0, o, r.maxInstancedCount))
              : a.drawArraysInstancedANGLE(i, s, o, r.maxInstancedCount),
              n.calls++,
              (n.vertices += o * r.maxInstancedCount),
              i === e.TRIANGLES
                ? (n.faces += (r.maxInstancedCount * o) / 3)
                : i === e.POINTS && (n.points += r.maxInstancedCount * o);
          }
        });
    }
    function Wt(e, t, n) {
      function i(e) {
        e = e.target;
        var o = r[e.id];
        null !== o.index && t.remove(o.index);
        for (var a in o.attributes) t.remove(o.attributes[a]);
        e.removeEventListener("dispose", i),
          delete r[e.id],
          (a = s[e.id]) && (t.remove(a), delete s[e.id]),
          (a = s[o.id]) && (t.remove(a), delete s[o.id]),
          n.geometries--;
      }
      var r = {},
        s = {};
      return {
        get: function (e, t) {
          var s = r[t.id];
          return s
            ? s
            : (t.addEventListener("dispose", i),
              t.isBufferGeometry
                ? (s = t)
                : t.isGeometry &&
                  (void 0 === t._bufferGeometry &&
                    (t._bufferGeometry = new St().setFromObject(e)),
                  (s = t._bufferGeometry)),
              (r[t.id] = s),
              n.geometries++,
              s);
        },
        update: function (n) {
          var i = n.index,
            r = n.attributes;
          null !== i && t.update(i, e.ELEMENT_ARRAY_BUFFER);
          for (var s in r) t.update(r[s], e.ARRAY_BUFFER);
          n = n.morphAttributes;
          for (s in n)
            for (var i = n[s], r = 0, o = i.length; o > r; r++)
              t.update(i[r], e.ARRAY_BUFFER);
        },
        getWireframeAttribute: function (n) {
          var i = s[n.id];
          if (i) return i;
          i = [];
          var r = n.index,
            o = n.attributes;
          if (null !== r)
            for (var a = r.array, l = 0, c = a.length; c > l; l += 3) {
              var u = a[l + 0];
              (o = a[l + 1]), (r = a[l + 2]), i.push(u, o, o, r, r, u);
            }
          else
            for (
              a = o.position.array, l = 0, c = a.length / 3 - 1;
              c > l;
              l += 3
            )
              (u = l + 0), (o = l + 1), (r = l + 2), i.push(u, o, o, r, r, u);
          return (
            (i = new (65535 < Tt(i) ? bt : _t)(i, 1)),
            t.update(i, e.ELEMENT_ARRAY_BUFFER),
            (s[n.id] = i)
          );
        },
      };
    }
    function Gt() {
      var e = {};
      return {
        get: function (t) {
          if (void 0 !== e[t.id]) return e[t.id];
          switch (t.type) {
            case "DirectionalLight":
              var i = {
                direction: new l(),
                color: new z(),
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new n(),
              };
              break;
            case "SpotLight":
              i = {
                position: new l(),
                direction: new l(),
                color: new z(),
                distance: 0,
                coneCos: 0,
                penumbraCos: 0,
                decay: 0,
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new n(),
              };
              break;
            case "PointLight":
              i = {
                position: new l(),
                color: new z(),
                distance: 0,
                decay: 0,
                shadow: !1,
                shadowBias: 0,
                shadowRadius: 1,
                shadowMapSize: new n(),
                shadowCameraNear: 1,
                shadowCameraFar: 1e3,
              };
              break;
            case "HemisphereLight":
              i = {
                direction: new l(),
                skyColor: new z(),
                groundColor: new z(),
              };
              break;
            case "RectAreaLight":
              i = {
                color: new z(),
                position: new l(),
                halfWidth: new l(),
                halfHeight: new l(),
              };
          }
          return (e[t.id] = i);
        },
      };
    }
    function Vt() {
      var e = new Gt(),
        t = {
          hash: "",
          ambient: [0, 0, 0],
          directional: [],
          directionalShadowMap: [],
          directionalShadowMatrix: [],
          spot: [],
          spotShadowMap: [],
          spotShadowMatrix: [],
          rectArea: [],
          point: [],
          pointShadowMap: [],
          pointShadowMatrix: [],
          hemi: [],
        },
        n = new l(),
        i = new c(),
        r = new c();
      return {
        setup: function (s, o, a) {
          for (
            var l,
              c = 0,
              u = 0,
              h = 0,
              d = 0,
              p = 0,
              f = 0,
              m = 0,
              g = 0,
              v = a.matrixWorldInverse,
              _ = 0,
              y = s.length;
            y > _;
            _++
          ) {
            var b = s[_];
            l = b.color;
            var w = b.intensity,
              x = b.distance,
              C = b.shadow && b.shadow.map ? b.shadow.map.texture : null;
            b.isAmbientLight
              ? ((c += l.r * w), (u += l.g * w), (h += l.b * w))
              : b.isDirectionalLight
              ? ((a = e.get(b)),
                a.color.copy(b.color).multiplyScalar(b.intensity),
                a.direction.setFromMatrixPosition(b.matrixWorld),
                n.setFromMatrixPosition(b.target.matrixWorld),
                a.direction.sub(n),
                a.direction.transformDirection(v),
                (a.shadow = b.castShadow) &&
                  ((l = b.shadow),
                  (a.shadowBias = l.bias),
                  (a.shadowRadius = l.radius),
                  (a.shadowMapSize = l.mapSize)),
                (t.directionalShadowMap[d] = C),
                (t.directionalShadowMatrix[d] = b.shadow.matrix),
                (t.directional[d] = a),
                d++)
              : b.isSpotLight
              ? ((a = e.get(b)),
                a.position.setFromMatrixPosition(b.matrixWorld),
                a.position.applyMatrix4(v),
                a.color.copy(l).multiplyScalar(w),
                (a.distance = x),
                a.direction.setFromMatrixPosition(b.matrixWorld),
                n.setFromMatrixPosition(b.target.matrixWorld),
                a.direction.sub(n),
                a.direction.transformDirection(v),
                (a.coneCos = Math.cos(b.angle)),
                (a.penumbraCos = Math.cos(b.angle * (1 - b.penumbra))),
                (a.decay = 0 === b.distance ? 0 : b.decay),
                (a.shadow = b.castShadow) &&
                  ((l = b.shadow),
                  (a.shadowBias = l.bias),
                  (a.shadowRadius = l.radius),
                  (a.shadowMapSize = l.mapSize)),
                (t.spotShadowMap[f] = C),
                (t.spotShadowMatrix[f] = b.shadow.matrix),
                (t.spot[f] = a),
                f++)
              : b.isRectAreaLight
              ? ((a = e.get(b)),
                a.color.copy(l).multiplyScalar(w / (b.width * b.height)),
                a.position.setFromMatrixPosition(b.matrixWorld),
                a.position.applyMatrix4(v),
                r.identity(),
                i.copy(b.matrixWorld),
                i.premultiply(v),
                r.extractRotation(i),
                a.halfWidth.set(0.5 * b.width, 0, 0),
                a.halfHeight.set(0, 0.5 * b.height, 0),
                a.halfWidth.applyMatrix4(r),
                a.halfHeight.applyMatrix4(r),
                (t.rectArea[m] = a),
                m++)
              : b.isPointLight
              ? ((a = e.get(b)),
                a.position.setFromMatrixPosition(b.matrixWorld),
                a.position.applyMatrix4(v),
                a.color.copy(b.color).multiplyScalar(b.intensity),
                (a.distance = b.distance),
                (a.decay = 0 === b.distance ? 0 : b.decay),
                (a.shadow = b.castShadow) &&
                  ((l = b.shadow),
                  (a.shadowBias = l.bias),
                  (a.shadowRadius = l.radius),
                  (a.shadowMapSize = l.mapSize),
                  (a.shadowCameraNear = l.camera.near),
                  (a.shadowCameraFar = l.camera.far)),
                (t.pointShadowMap[p] = C),
                (t.pointShadowMatrix[p] = b.shadow.matrix),
                (t.point[p] = a),
                p++)
              : b.isHemisphereLight &&
                ((a = e.get(b)),
                a.direction.setFromMatrixPosition(b.matrixWorld),
                a.direction.transformDirection(v),
                a.direction.normalize(),
                a.skyColor.copy(b.color).multiplyScalar(w),
                a.groundColor.copy(b.groundColor).multiplyScalar(w),
                (t.hemi[g] = a),
                g++);
          }
          (t.ambient[0] = c),
            (t.ambient[1] = u),
            (t.ambient[2] = h),
            (t.directional.length = d),
            (t.spot.length = f),
            (t.rectArea.length = m),
            (t.point.length = p),
            (t.hemi.length = g),
            (t.hash =
              d + "," + p + "," + f + "," + m + "," + g + "," + o.length);
        },
        state: t,
      };
    }
    function qt(e, t) {
      var n = {};
      return {
        update: function (i) {
          var r = t.frame,
            s = i.geometry,
            o = e.get(i, s);
          return (
            n[o.id] !== r &&
              (s.isGeometry && o.updateFromObject(i),
              e.update(o),
              (n[o.id] = r)),
            o
          );
        },
        clear: function () {
          n = {};
        },
      };
    }
    function Xt(e) {
      e = e.split("\n");
      for (var t = 0; t < e.length; t++) e[t] = t + 1 + ": " + e[t];
      return e.join("\n");
    }
    function Yt(e, t, n) {
      var i = e.createShader(t);
      return (
        e.shaderSource(i, n),
        e.compileShader(i),
        !1 === e.getShaderParameter(i, e.COMPILE_STATUS) &&
          console.error("THREE.WebGLShader: Shader couldn't compile."),
        "" !== e.getShaderInfoLog(i) &&
          console.warn(
            "THREE.WebGLShader: gl.getShaderInfoLog()",
            t === e.VERTEX_SHADER ? "vertex" : "fragment",
            e.getShaderInfoLog(i),
            Xt(n)
          ),
        i
      );
    }
    function Kt(e) {
      switch (e) {
        case 3e3:
          return ["Linear", "( value )"];
        case 3001:
          return ["sRGB", "( value )"];
        case 3002:
          return ["RGBE", "( value )"];
        case 3004:
          return ["RGBM", "( value, 7.0 )"];
        case 3005:
          return ["RGBM", "( value, 16.0 )"];
        case 3006:
          return ["RGBD", "( value, 256.0 )"];
        case 3007:
          return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
        default:
          throw Error("unsupported encoding: " + e);
      }
    }
    function Jt(e, t) {
      return (
        (t = Kt(t)),
        "vec4 " +
          e +
          "( vec4 value ) { return " +
          t[0] +
          "ToLinear" +
          t[1] +
          "; }"
      );
    }
    function Qt(e, t) {
      return (
        (t = Kt(t)),
        "vec4 " + e + "( vec4 value ) { return LinearTo" + t[0] + t[1] + "; }"
      );
    }
    function Zt(e, t) {
      switch (t) {
        case 1:
          t = "Linear";
          break;
        case 2:
          t = "Reinhard";
          break;
        case 3:
          t = "Uncharted2";
          break;
        case 4:
          t = "OptimizedCineon";
          break;
        default:
          throw Error("unsupported toneMapping: " + t);
      }
      return (
        "vec3 " + e + "( vec3 color ) { return " + t + "ToneMapping( color ); }"
      );
    }
    function en(e, t, n) {
      return (
        (e = e || {}),
        [
          e.derivatives ||
          t.envMapCubeUV ||
          t.bumpMap ||
          t.normalMap ||
          t.flatShading
            ? "#extension GL_OES_standard_derivatives : enable"
            : "",
          (e.fragDepth || t.logarithmicDepthBuffer) && n.get("EXT_frag_depth")
            ? "#extension GL_EXT_frag_depth : enable"
            : "",
          e.drawBuffers && n.get("WEBGL_draw_buffers")
            ? "#extension GL_EXT_draw_buffers : require"
            : "",
          (e.shaderTextureLOD || t.envMap) && n.get("EXT_shader_texture_lod")
            ? "#extension GL_EXT_shader_texture_lod : enable"
            : "",
        ]
          .filter(nn)
          .join("\n")
      );
    }
    function tn(e) {
      var t,
        n = [];
      for (t in e) {
        var i = e[t];
        !1 !== i && n.push("#define " + t + " " + i);
      }
      return n.join("\n");
    }
    function nn(e) {
      return "" !== e;
    }
    function rn(e, t) {
      return e
        .replace(/NUM_DIR_LIGHTS/g, t.numDirLights)
        .replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights)
        .replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights)
        .replace(/NUM_POINT_LIGHTS/g, t.numPointLights)
        .replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights);
    }
    function sn(e) {
      return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm, function (e, t) {
        if (((e = Fs[t]), void 0 === e))
          throw Error("Can not resolve #include <" + t + ">");
        return sn(e);
      });
    }
    function on(e) {
      return e.replace(
        /for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,
        function (e, t, n, i) {
          for (e = "", t = parseInt(t); t < parseInt(n); t++)
            e += i.replace(/\[ i \]/g, "[ " + t + " ]");
          return e;
        }
      );
    }
    function an(e, t, n, i, r, s) {
      var o = e.context,
        a = i.defines,
        l = r.vertexShader,
        c = r.fragmentShader,
        u = "SHADOWMAP_TYPE_BASIC";
      1 === s.shadowMapType
        ? (u = "SHADOWMAP_TYPE_PCF")
        : 2 === s.shadowMapType && (u = "SHADOWMAP_TYPE_PCF_SOFT");
      var h = "ENVMAP_TYPE_CUBE",
        d = "ENVMAP_MODE_REFLECTION",
        p = "ENVMAP_BLENDING_MULTIPLY";
      if (s.envMap) {
        switch (i.envMap.mapping) {
          case 301:
          case 302:
            h = "ENVMAP_TYPE_CUBE";
            break;
          case 306:
          case 307:
            h = "ENVMAP_TYPE_CUBE_UV";
            break;
          case 303:
          case 304:
            h = "ENVMAP_TYPE_EQUIREC";
            break;
          case 305:
            h = "ENVMAP_TYPE_SPHERE";
        }
        switch (i.envMap.mapping) {
          case 302:
          case 304:
            d = "ENVMAP_MODE_REFRACTION";
        }
        switch (i.combine) {
          case 0:
            p = "ENVMAP_BLENDING_MULTIPLY";
            break;
          case 1:
            p = "ENVMAP_BLENDING_MIX";
            break;
          case 2:
            p = "ENVMAP_BLENDING_ADD";
        }
      }
      var f = 0 < e.gammaFactor ? e.gammaFactor : 1,
        m = en(i.extensions, s, t),
        g = tn(a),
        v = o.createProgram();
      i.isRawShaderMaterial
        ? ((a = [g, "\n"].filter(nn).join("\n")),
          (t = [m, g, "\n"].filter(nn).join("\n")))
        : ((a = [
            "precision " + s.precision + " float;",
            "precision " + s.precision + " int;",
            "#define SHADER_NAME " + r.name,
            g,
            s.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "",
            "#define GAMMA_FACTOR " + f,
            "#define MAX_BONES " + s.maxBones,
            s.useFog && s.fog ? "#define USE_FOG" : "",
            s.useFog && s.fogExp ? "#define FOG_EXP2" : "",
            s.map ? "#define USE_MAP" : "",
            s.envMap ? "#define USE_ENVMAP" : "",
            s.envMap ? "#define " + d : "",
            s.lightMap ? "#define USE_LIGHTMAP" : "",
            s.aoMap ? "#define USE_AOMAP" : "",
            s.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
            s.bumpMap ? "#define USE_BUMPMAP" : "",
            s.normalMap ? "#define USE_NORMALMAP" : "",
            s.displacementMap && s.supportsVertexTextures
              ? "#define USE_DISPLACEMENTMAP"
              : "",
            s.specularMap ? "#define USE_SPECULARMAP" : "",
            s.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
            s.metalnessMap ? "#define USE_METALNESSMAP" : "",
            s.alphaMap ? "#define USE_ALPHAMAP" : "",
            s.vertexColors ? "#define USE_COLOR" : "",
            s.flatShading ? "#define FLAT_SHADED" : "",
            s.skinning ? "#define USE_SKINNING" : "",
            s.useVertexTexture ? "#define BONE_TEXTURE" : "",
            s.morphTargets ? "#define USE_MORPHTARGETS" : "",
            s.morphNormals && !1 === s.flatShading
              ? "#define USE_MORPHNORMALS"
              : "",
            s.doubleSided ? "#define DOUBLE_SIDED" : "",
            s.flipSided ? "#define FLIP_SIDED" : "",
            "#define NUM_CLIPPING_PLANES " + s.numClippingPlanes,
            s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
            s.shadowMapEnabled ? "#define " + u : "",
            s.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "",
            s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
            s.logarithmicDepthBuffer && t.get("EXT_frag_depth")
              ? "#define USE_LOGDEPTHBUF_EXT"
              : "",
            "uniform mat4 modelMatrix;",
            "uniform mat4 modelViewMatrix;",
            "uniform mat4 projectionMatrix;",
            "uniform mat4 viewMatrix;",
            "uniform mat3 normalMatrix;",
            "uniform vec3 cameraPosition;",
            "attribute vec3 position;",
            "attribute vec3 normal;",
            "attribute vec2 uv;",
            "#ifdef USE_COLOR",
            "	attribute vec3 color;",
            "#endif",
            "#ifdef USE_MORPHTARGETS",
            "	attribute vec3 morphTarget0;",
            "	attribute vec3 morphTarget1;",
            "	attribute vec3 morphTarget2;",
            "	attribute vec3 morphTarget3;",
            "	#ifdef USE_MORPHNORMALS",
            "		attribute vec3 morphNormal0;",
            "		attribute vec3 morphNormal1;",
            "		attribute vec3 morphNormal2;",
            "		attribute vec3 morphNormal3;",
            "	#else",
            "		attribute vec3 morphTarget4;",
            "		attribute vec3 morphTarget5;",
            "		attribute vec3 morphTarget6;",
            "		attribute vec3 morphTarget7;",
            "	#endif",
            "#endif",
            "#ifdef USE_SKINNING",
            "	attribute vec4 skinIndex;",
            "	attribute vec4 skinWeight;",
            "#endif",
            "\n",
          ]
            .filter(nn)
            .join("\n")),
          (t = [
            m,
            "precision " + s.precision + " float;",
            "precision " + s.precision + " int;",
            "#define SHADER_NAME " + r.name,
            g,
            s.alphaTest ? "#define ALPHATEST " + s.alphaTest : "",
            "#define GAMMA_FACTOR " + f,
            s.useFog && s.fog ? "#define USE_FOG" : "",
            s.useFog && s.fogExp ? "#define FOG_EXP2" : "",
            s.map ? "#define USE_MAP" : "",
            s.envMap ? "#define USE_ENVMAP" : "",
            s.envMap ? "#define " + h : "",
            s.envMap ? "#define " + d : "",
            s.envMap ? "#define " + p : "",
            s.lightMap ? "#define USE_LIGHTMAP" : "",
            s.aoMap ? "#define USE_AOMAP" : "",
            s.emissiveMap ? "#define USE_EMISSIVEMAP" : "",
            s.bumpMap ? "#define USE_BUMPMAP" : "",
            s.normalMap ? "#define USE_NORMALMAP" : "",
            s.specularMap ? "#define USE_SPECULARMAP" : "",
            s.roughnessMap ? "#define USE_ROUGHNESSMAP" : "",
            s.metalnessMap ? "#define USE_METALNESSMAP" : "",
            s.alphaMap ? "#define USE_ALPHAMAP" : "",
            s.vertexColors ? "#define USE_COLOR" : "",
            s.gradientMap ? "#define USE_GRADIENTMAP" : "",
            s.flatShading ? "#define FLAT_SHADED" : "",
            s.doubleSided ? "#define DOUBLE_SIDED" : "",
            s.flipSided ? "#define FLIP_SIDED" : "",
            "#define NUM_CLIPPING_PLANES " + s.numClippingPlanes,
            "#define UNION_CLIPPING_PLANES " +
              (s.numClippingPlanes - s.numClipIntersection),
            s.shadowMapEnabled ? "#define USE_SHADOWMAP" : "",
            s.shadowMapEnabled ? "#define " + u : "",
            s.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "",
            s.physicallyCorrectLights
              ? "#define PHYSICALLY_CORRECT_LIGHTS"
              : "",
            s.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "",
            s.logarithmicDepthBuffer && t.get("EXT_frag_depth")
              ? "#define USE_LOGDEPTHBUF_EXT"
              : "",
            s.envMap && t.get("EXT_shader_texture_lod")
              ? "#define TEXTURE_LOD_EXT"
              : "",
            "uniform mat4 viewMatrix;",
            "uniform vec3 cameraPosition;",
            0 !== s.toneMapping ? "#define TONE_MAPPING" : "",
            0 !== s.toneMapping ? Fs.tonemapping_pars_fragment : "",
            0 !== s.toneMapping ? Zt("toneMapping", s.toneMapping) : "",
            s.dithering ? "#define DITHERING" : "",
            s.outputEncoding ||
            s.mapEncoding ||
            s.envMapEncoding ||
            s.emissiveMapEncoding
              ? Fs.encodings_pars_fragment
              : "",
            s.mapEncoding ? Jt("mapTexelToLinear", s.mapEncoding) : "",
            s.envMapEncoding ? Jt("envMapTexelToLinear", s.envMapEncoding) : "",
            s.emissiveMapEncoding
              ? Jt("emissiveMapTexelToLinear", s.emissiveMapEncoding)
              : "",
            s.outputEncoding ? Qt("linearToOutputTexel", s.outputEncoding) : "",
            s.depthPacking ? "#define DEPTH_PACKING " + i.depthPacking : "",
            "\n",
          ]
            .filter(nn)
            .join("\n"))),
        (l = sn(l)),
        (l = rn(l, s)),
        (c = sn(c)),
        (c = rn(c, s)),
        i.isShaderMaterial || ((l = on(l)), (c = on(c))),
        (c = t + c),
        (l = Yt(o, o.VERTEX_SHADER, a + l)),
        (c = Yt(o, o.FRAGMENT_SHADER, c)),
        o.attachShader(v, l),
        o.attachShader(v, c),
        void 0 !== i.index0AttributeName
          ? o.bindAttribLocation(v, 0, i.index0AttributeName)
          : !0 === s.morphTargets && o.bindAttribLocation(v, 0, "position"),
        o.linkProgram(v),
        (s = o.getProgramInfoLog(v)),
        (r = o.getShaderInfoLog(l)),
        (u = o.getShaderInfoLog(c)),
        (d = h = !0),
        !1 === o.getProgramParameter(v, o.LINK_STATUS)
          ? ((h = !1),
            console.error(
              "THREE.WebGLProgram: shader error: ",
              o.getError(),
              "gl.VALIDATE_STATUS",
              o.getProgramParameter(v, o.VALIDATE_STATUS),
              "gl.getProgramInfoLog",
              s,
              r,
              u
            ))
          : "" !== s
          ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", s)
          : ("" === r || "" === u) && (d = !1),
        d &&
          (this.diagnostics = {
            runnable: h,
            material: i,
            programLog: s,
            vertexShader: { log: r, prefix: a },
            fragmentShader: { log: u, prefix: t },
          }),
        o.deleteShader(l),
        o.deleteShader(c);
      var _;
      this.getUniforms = function () {
        return void 0 === _ && (_ = new $(o, v, e)), _;
      };
      var y;
      return (
        (this.getAttributes = function () {
          if (void 0 === y) {
            for (
              var e = {},
                t = o.getProgramParameter(v, o.ACTIVE_ATTRIBUTES),
                n = 0;
              t > n;
              n++
            ) {
              var i = o.getActiveAttrib(v, n).name;
              e[i] = o.getAttribLocation(v, i);
            }
            y = e;
          }
          return y;
        }),
        (this.destroy = function () {
          o.deleteProgram(v), (this.program = void 0);
        }),
        Object.defineProperties(this, {
          uniforms: {
            get: function () {
              return (
                console.warn(
                  "THREE.WebGLProgram: .uniforms is now .getUniforms()."
                ),
                this.getUniforms()
              );
            },
          },
          attributes: {
            get: function () {
              return (
                console.warn(
                  "THREE.WebGLProgram: .attributes is now .getAttributes()."
                ),
                this.getAttributes()
              );
            },
          },
        }),
        (this.id = Ws++),
        (this.code = n),
        (this.usedTimes = 1),
        (this.program = v),
        (this.vertexShader = l),
        (this.fragmentShader = c),
        this
      );
    }
    function ln(e, t, n) {
      function i(e, t) {
        if (e)
          e.isTexture
            ? (n = e.encoding)
            : e.isWebGLRenderTarget &&
              (console.warn(
                "THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."
              ),
              (n = e.texture.encoding));
        else var n = 3e3;
        return 3e3 === n && t && (n = 3007), n;
      }
      var r = [],
        s = {
          MeshDepthMaterial: "depth",
          MeshDistanceMaterial: "distanceRGBA",
          MeshNormalMaterial: "normal",
          MeshBasicMaterial: "basic",
          MeshLambertMaterial: "lambert",
          MeshPhongMaterial: "phong",
          MeshToonMaterial: "phong",
          MeshStandardMaterial: "physical",
          MeshPhysicalMaterial: "physical",
          LineBasicMaterial: "basic",
          LineDashedMaterial: "dashed",
          PointsMaterial: "points",
          ShadowMaterial: "shadow",
        },
        o =
          "precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(
            " "
          );
      (this.getParameters = function (t, r, o, a, l, c, u) {
        var h = s[t.type];
        if (u.isSkinnedMesh) {
          var d = u.skeleton.bones;
          if (n.floatVertexTextures) d = 1024;
          else {
            var p = Math.min(
              Math.floor((n.maxVertexUniforms - 20) / 4),
              d.length
            );
            p < d.length
              ? (console.warn(
                  "THREE.WebGLRenderer: Skeleton has " +
                    d.length +
                    " bones. This GPU supports " +
                    p +
                    "."
                ),
                (d = 0))
              : (d = p);
          }
        } else d = 0;
        (p = n.precision),
          null !== t.precision &&
            ((p = n.getMaxPrecision(t.precision)),
            p !== t.precision &&
              console.warn(
                "THREE.WebGLProgram.getParameters:",
                t.precision,
                "not supported, using",
                p,
                "instead."
              ));
        var f = e.getRenderTarget();
        return {
          shaderID: h,
          precision: p,
          supportsVertexTextures: n.vertexTextures,
          outputEncoding: i(f ? f.texture : null, e.gammaOutput),
          map: !!t.map,
          mapEncoding: i(t.map, e.gammaInput),
          envMap: !!t.envMap,
          envMapMode: t.envMap && t.envMap.mapping,
          envMapEncoding: i(t.envMap, e.gammaInput),
          envMapCubeUV:
            !!t.envMap &&
            (306 === t.envMap.mapping || 307 === t.envMap.mapping),
          lightMap: !!t.lightMap,
          aoMap: !!t.aoMap,
          emissiveMap: !!t.emissiveMap,
          emissiveMapEncoding: i(t.emissiveMap, e.gammaInput),
          bumpMap: !!t.bumpMap,
          normalMap: !!t.normalMap,
          displacementMap: !!t.displacementMap,
          roughnessMap: !!t.roughnessMap,
          metalnessMap: !!t.metalnessMap,
          specularMap: !!t.specularMap,
          alphaMap: !!t.alphaMap,
          gradientMap: !!t.gradientMap,
          combine: t.combine,
          vertexColors: t.vertexColors,
          fog: !!a,
          useFog: t.fog,
          fogExp: a && a.isFogExp2,
          flatShading: t.flatShading,
          sizeAttenuation: t.sizeAttenuation,
          logarithmicDepthBuffer: n.logarithmicDepthBuffer,
          skinning: t.skinning && d > 0,
          maxBones: d,
          useVertexTexture: n.floatVertexTextures,
          morphTargets: t.morphTargets,
          morphNormals: t.morphNormals,
          maxMorphTargets: e.maxMorphTargets,
          maxMorphNormals: e.maxMorphNormals,
          numDirLights: r.directional.length,
          numPointLights: r.point.length,
          numSpotLights: r.spot.length,
          numRectAreaLights: r.rectArea.length,
          numHemiLights: r.hemi.length,
          numClippingPlanes: l,
          numClipIntersection: c,
          dithering: t.dithering,
          shadowMapEnabled:
            e.shadowMap.enabled && u.receiveShadow && 0 < o.length,
          shadowMapType: e.shadowMap.type,
          toneMapping: e.toneMapping,
          physicallyCorrectLights: e.physicallyCorrectLights,
          premultipliedAlpha: t.premultipliedAlpha,
          alphaTest: t.alphaTest,
          doubleSided: 2 === t.side,
          flipSided: 1 === t.side,
          depthPacking: void 0 !== t.depthPacking ? t.depthPacking : !1,
        };
      }),
        (this.getProgramCode = function (t, n) {
          var i = [];
          if (
            (n.shaderID
              ? i.push(n.shaderID)
              : (i.push(t.fragmentShader), i.push(t.vertexShader)),
            void 0 !== t.defines)
          )
            for (var r in t.defines) i.push(r), i.push(t.defines[r]);
          for (r = 0; r < o.length; r++) i.push(n[o[r]]);
          return (
            i.push(t.onBeforeCompile.toString()),
            i.push(e.gammaOutput),
            i.join()
          );
        }),
        (this.acquireProgram = function (n, i, s, o) {
          for (var a, l = 0, c = r.length; c > l; l++) {
            var u = r[l];
            if (u.code === o) {
              (a = u), ++a.usedTimes;
              break;
            }
          }
          return void 0 === a && ((a = new an(e, t, o, n, i, s)), r.push(a)), a;
        }),
        (this.releaseProgram = function (e) {
          if (0 === --e.usedTimes) {
            var t = r.indexOf(e);
            (r[t] = r[r.length - 1]), r.pop(), e.destroy();
          }
        }),
        (this.programs = r);
    }
    function cn(e, t, n, i, r, s, o) {
      function a(e, t) {
        if (e.width > t || e.height > t) {
          t /= Math.max(e.width, e.height);
          var n = document.createElementNS(
            "http://www.w3.org/1999/xhtml",
            "canvas"
          );
          return (
            (n.width = Math.floor(e.width * t)),
            (n.height = Math.floor(e.height * t)),
            n
              .getContext("2d")
              .drawImage(e, 0, 0, e.width, e.height, 0, 0, n.width, n.height),
            console.warn(
              "THREE.WebGLRenderer: image is too big (" +
                e.width +
                "x" +
                e.height +
                "). Resized to " +
                n.width +
                "x" +
                n.height,
              e
            ),
            n
          );
        }
        return e;
      }
      function l(e) {
        return ks.isPowerOfTwo(e.width) && ks.isPowerOfTwo(e.height);
      }
      function c(e, t) {
        return (
          e.generateMipmaps && t && 1003 !== e.minFilter && 1006 !== e.minFilter
        );
      }
      function u(t) {
        return 1003 === t || 1004 === t || 1005 === t ? e.NEAREST : e.LINEAR;
      }
      function h(t) {
        (t = t.target), t.removeEventListener("dispose", h);
        e: {
          var n = i.get(t);
          if (t.image && n.__image__webglTextureCube)
            e.deleteTexture(n.__image__webglTextureCube);
          else {
            if (void 0 === n.__webglInit) break e;
            e.deleteTexture(n.__webglTexture);
          }
          i.remove(t);
        }
        o.textures--;
      }
      function d(t) {
        (t = t.target), t.removeEventListener("dispose", d);
        var n = i.get(t),
          r = i.get(t.texture);
        if (t) {
          if (
            (void 0 !== r.__webglTexture && e.deleteTexture(r.__webglTexture),
            t.depthTexture && t.depthTexture.dispose(),
            t.isWebGLRenderTargetCube)
          )
            for (r = 0; 6 > r; r++)
              e.deleteFramebuffer(n.__webglFramebuffer[r]),
                n.__webglDepthbuffer &&
                  e.deleteRenderbuffer(n.__webglDepthbuffer[r]);
          else
            e.deleteFramebuffer(n.__webglFramebuffer),
              n.__webglDepthbuffer &&
                e.deleteRenderbuffer(n.__webglDepthbuffer);
          i.remove(t.texture), i.remove(t);
        }
        o.textures--;
      }
      function p(t, u) {
        var d = i.get(t);
        if (0 < t.version && d.__version !== t.version) {
          var p = t.image;
          if (void 0 === p)
            console.warn(
              "THREE.WebGLRenderer: Texture marked for update but image is undefined",
              t
            );
          else {
            if (!1 !== p.complete) {
              void 0 === d.__webglInit &&
                ((d.__webglInit = !0),
                t.addEventListener("dispose", h),
                (d.__webglTexture = e.createTexture()),
                o.textures++),
                n.activeTexture(e.TEXTURE0 + u),
                n.bindTexture(e.TEXTURE_2D, d.__webglTexture),
                e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t.flipY),
                e.pixelStorei(
                  e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,
                  t.premultiplyAlpha
                ),
                e.pixelStorei(e.UNPACK_ALIGNMENT, t.unpackAlignment);
              var m = a(t.image, r.maxTextureSize);
              (1001 !== t.wrapS ||
                1001 !== t.wrapT ||
                (1003 !== t.minFilter && 1006 !== t.minFilter)) &&
                !1 === l(m) &&
                ((u = m),
                u instanceof HTMLImageElement || u instanceof HTMLCanvasElement
                  ? ((p = document.createElementNS(
                      "http://www.w3.org/1999/xhtml",
                      "canvas"
                    )),
                    (p.width = ks.nearestPowerOfTwo(u.width)),
                    (p.height = ks.nearestPowerOfTwo(u.height)),
                    p.getContext("2d").drawImage(u, 0, 0, p.width, p.height),
                    console.warn(
                      "THREE.WebGLRenderer: image is not power of two (" +
                        u.width +
                        "x" +
                        u.height +
                        "). Resized to " +
                        p.width +
                        "x" +
                        p.height,
                      u
                    ),
                    (m = p))
                  : (m = u)),
                (u = l(m));
              var p = s.convert(t.format),
                g = s.convert(t.type);
              f(e.TEXTURE_2D, t, u);
              var _ = t.mipmaps;
              if (t.isDepthTexture) {
                if (((_ = e.DEPTH_COMPONENT), 1015 === t.type)) {
                  if (!v)
                    throw Error(
                      "Float Depth Texture only supported in WebGL2.0"
                    );
                  _ = e.DEPTH_COMPONENT32F;
                } else v && (_ = e.DEPTH_COMPONENT16);
                1026 === t.format &&
                  _ === e.DEPTH_COMPONENT &&
                  1012 !== t.type &&
                  1014 !== t.type &&
                  (console.warn(
                    "THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."
                  ),
                  (t.type = 1012),
                  (g = s.convert(t.type))),
                  1027 === t.format &&
                    ((_ = e.DEPTH_STENCIL),
                    1020 !== t.type &&
                      (console.warn(
                        "THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."
                      ),
                      (t.type = 1020),
                      (g = s.convert(t.type)))),
                  n.texImage2D(
                    e.TEXTURE_2D,
                    0,
                    _,
                    m.width,
                    m.height,
                    0,
                    p,
                    g,
                    null
                  );
              } else if (t.isDataTexture)
                if (0 < _.length && u) {
                  for (var y = 0, b = _.length; b > y; y++)
                    (m = _[y]),
                      n.texImage2D(
                        e.TEXTURE_2D,
                        y,
                        p,
                        m.width,
                        m.height,
                        0,
                        p,
                        g,
                        m.data
                      );
                  t.generateMipmaps = !1;
                } else
                  n.texImage2D(
                    e.TEXTURE_2D,
                    0,
                    p,
                    m.width,
                    m.height,
                    0,
                    p,
                    g,
                    m.data
                  );
              else if (t.isCompressedTexture)
                for (y = 0, b = _.length; b > y; y++)
                  (m = _[y]),
                    1023 !== t.format && 1022 !== t.format
                      ? -1 < n.getCompressedTextureFormats().indexOf(p)
                        ? n.compressedTexImage2D(
                            e.TEXTURE_2D,
                            y,
                            p,
                            m.width,
                            m.height,
                            0,
                            m.data
                          )
                        : console.warn(
                            "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"
                          )
                      : n.texImage2D(
                          e.TEXTURE_2D,
                          y,
                          p,
                          m.width,
                          m.height,
                          0,
                          p,
                          g,
                          m.data
                        );
              else if (0 < _.length && u) {
                for (y = 0, b = _.length; b > y; y++)
                  (m = _[y]), n.texImage2D(e.TEXTURE_2D, y, p, p, g, m);
                t.generateMipmaps = !1;
              } else n.texImage2D(e.TEXTURE_2D, 0, p, p, g, m);
              return (
                c(t, u) && e.generateMipmap(e.TEXTURE_2D),
                (d.__version = t.version),
                void (t.onUpdate && t.onUpdate(t))
              );
            }
            console.warn(
              "THREE.WebGLRenderer: Texture marked for update but image is incomplete",
              t
            );
          }
        }
        n.activeTexture(e.TEXTURE0 + u),
          n.bindTexture(e.TEXTURE_2D, d.__webglTexture);
      }
      function f(n, o, a) {
        a
          ? (e.texParameteri(n, e.TEXTURE_WRAP_S, s.convert(o.wrapS)),
            e.texParameteri(n, e.TEXTURE_WRAP_T, s.convert(o.wrapT)),
            e.texParameteri(n, e.TEXTURE_MAG_FILTER, s.convert(o.magFilter)),
            e.texParameteri(n, e.TEXTURE_MIN_FILTER, s.convert(o.minFilter)))
          : (e.texParameteri(n, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
            e.texParameteri(n, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
            (1001 === o.wrapS && 1001 === o.wrapT) ||
              console.warn(
                "THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",
                o
              ),
            e.texParameteri(n, e.TEXTURE_MAG_FILTER, u(o.magFilter)),
            e.texParameteri(n, e.TEXTURE_MIN_FILTER, u(o.minFilter)),
            1003 !== o.minFilter &&
              1006 !== o.minFilter &&
              console.warn(
                "THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",
                o
              )),
          !(a = t.get("EXT_texture_filter_anisotropic")) ||
            (1015 === o.type && null === t.get("OES_texture_float_linear")) ||
            (1016 === o.type &&
              null === t.get("OES_texture_half_float_linear")) ||
            !(1 < o.anisotropy || i.get(o).__currentAnisotropy) ||
            (e.texParameterf(
              n,
              a.TEXTURE_MAX_ANISOTROPY_EXT,
              Math.min(o.anisotropy, r.getMaxAnisotropy())
            ),
            (i.get(o).__currentAnisotropy = o.anisotropy));
      }
      function m(t, r, o, a) {
        var l = s.convert(r.texture.format),
          c = s.convert(r.texture.type);
        n.texImage2D(a, 0, l, r.width, r.height, 0, l, c, null),
          e.bindFramebuffer(e.FRAMEBUFFER, t),
          e.framebufferTexture2D(
            e.FRAMEBUFFER,
            o,
            a,
            i.get(r.texture).__webglTexture,
            0
          ),
          e.bindFramebuffer(e.FRAMEBUFFER, null);
      }
      function g(t, n) {
        e.bindRenderbuffer(e.RENDERBUFFER, t),
          n.depthBuffer && !n.stencilBuffer
            ? (e.renderbufferStorage(
                e.RENDERBUFFER,
                e.DEPTH_COMPONENT16,
                n.width,
                n.height
              ),
              e.framebufferRenderbuffer(
                e.FRAMEBUFFER,
                e.DEPTH_ATTACHMENT,
                e.RENDERBUFFER,
                t
              ))
            : n.depthBuffer && n.stencilBuffer
            ? (e.renderbufferStorage(
                e.RENDERBUFFER,
                e.DEPTH_STENCIL,
                n.width,
                n.height
              ),
              e.framebufferRenderbuffer(
                e.FRAMEBUFFER,
                e.DEPTH_STENCIL_ATTACHMENT,
                e.RENDERBUFFER,
                t
              ))
            : e.renderbufferStorage(e.RENDERBUFFER, e.RGBA4, n.width, n.height),
          e.bindRenderbuffer(e.RENDERBUFFER, null);
      }
      var v =
        "undefined" != typeof WebGL2RenderingContext &&
        e instanceof WebGL2RenderingContext;
      (this.setTexture2D = p),
        (this.setTextureCube = function (t, u) {
          var d = i.get(t);
          if (6 === t.image.length)
            if (0 < t.version && d.__version !== t.version) {
              d.__image__webglTextureCube ||
                (t.addEventListener("dispose", h),
                (d.__image__webglTextureCube = e.createTexture()),
                o.textures++),
                n.activeTexture(e.TEXTURE0 + u),
                n.bindTexture(e.TEXTURE_CUBE_MAP, d.__image__webglTextureCube),
                e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL, t.flipY),
                (u = t && t.isCompressedTexture);
              for (
                var p = t.image[0] && t.image[0].isDataTexture, m = [], g = 0;
                6 > g;
                g++
              )
                m[g] =
                  u || p
                    ? p
                      ? t.image[g].image
                      : t.image[g]
                    : a(t.image[g], r.maxCubemapSize);
              var v = l(m[0]),
                _ = s.convert(t.format),
                y = s.convert(t.type);
              for (f(e.TEXTURE_CUBE_MAP, t, v), g = 0; 6 > g; g++)
                if (u)
                  for (var b, w = m[g].mipmaps, x = 0, C = w.length; C > x; x++)
                    (b = w[x]),
                      1023 !== t.format && 1022 !== t.format
                        ? -1 < n.getCompressedTextureFormats().indexOf(_)
                          ? n.compressedTexImage2D(
                              e.TEXTURE_CUBE_MAP_POSITIVE_X + g,
                              x,
                              _,
                              b.width,
                              b.height,
                              0,
                              b.data
                            )
                          : console.warn(
                              "THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"
                            )
                        : n.texImage2D(
                            e.TEXTURE_CUBE_MAP_POSITIVE_X + g,
                            x,
                            _,
                            b.width,
                            b.height,
                            0,
                            _,
                            y,
                            b.data
                          );
                else
                  p
                    ? n.texImage2D(
                        e.TEXTURE_CUBE_MAP_POSITIVE_X + g,
                        0,
                        _,
                        m[g].width,
                        m[g].height,
                        0,
                        _,
                        y,
                        m[g].data
                      )
                    : n.texImage2D(
                        e.TEXTURE_CUBE_MAP_POSITIVE_X + g,
                        0,
                        _,
                        _,
                        y,
                        m[g]
                      );
              c(t, v) && e.generateMipmap(e.TEXTURE_CUBE_MAP),
                (d.__version = t.version),
                t.onUpdate && t.onUpdate(t);
            } else
              n.activeTexture(e.TEXTURE0 + u),
                n.bindTexture(e.TEXTURE_CUBE_MAP, d.__image__webglTextureCube);
        }),
        (this.setTextureCubeDynamic = function (t, r) {
          n.activeTexture(e.TEXTURE0 + r),
            n.bindTexture(e.TEXTURE_CUBE_MAP, i.get(t).__webglTexture);
        }),
        (this.setupRenderTarget = function (t) {
          var r = i.get(t),
            s = i.get(t.texture);
          t.addEventListener("dispose", d),
            (s.__webglTexture = e.createTexture()),
            o.textures++;
          var a = !0 === t.isWebGLRenderTargetCube,
            u = l(t);
          if (a) {
            r.__webglFramebuffer = [];
            for (var h = 0; 6 > h; h++)
              r.__webglFramebuffer[h] = e.createFramebuffer();
          } else r.__webglFramebuffer = e.createFramebuffer();
          if (a) {
            for (
              n.bindTexture(e.TEXTURE_CUBE_MAP, s.__webglTexture),
                f(e.TEXTURE_CUBE_MAP, t.texture, u),
                h = 0;
              6 > h;
              h++
            )
              m(
                r.__webglFramebuffer[h],
                t,
                e.COLOR_ATTACHMENT0,
                e.TEXTURE_CUBE_MAP_POSITIVE_X + h
              );
            c(t.texture, u) && e.generateMipmap(e.TEXTURE_CUBE_MAP),
              n.bindTexture(e.TEXTURE_CUBE_MAP, null);
          } else
            n.bindTexture(e.TEXTURE_2D, s.__webglTexture),
              f(e.TEXTURE_2D, t.texture, u),
              m(r.__webglFramebuffer, t, e.COLOR_ATTACHMENT0, e.TEXTURE_2D),
              c(t.texture, u) && e.generateMipmap(e.TEXTURE_2D),
              n.bindTexture(e.TEXTURE_2D, null);
          if (t.depthBuffer) {
            if (
              ((r = i.get(t)),
              (s = !0 === t.isWebGLRenderTargetCube),
              t.depthTexture)
            ) {
              if (s)
                throw Error(
                  "target.depthTexture not supported in Cube render targets"
                );
              if (t && t.isWebGLRenderTargetCube)
                throw Error(
                  "Depth Texture with cube render targets is not supported"
                );
              if (
                (e.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer),
                !t.depthTexture || !t.depthTexture.isDepthTexture)
              )
                throw Error(
                  "renderTarget.depthTexture must be an instance of THREE.DepthTexture"
                );
              if (
                ((i.get(t.depthTexture).__webglTexture &&
                  t.depthTexture.image.width === t.width &&
                  t.depthTexture.image.height === t.height) ||
                  ((t.depthTexture.image.width = t.width),
                  (t.depthTexture.image.height = t.height),
                  (t.depthTexture.needsUpdate = !0)),
                p(t.depthTexture, 0),
                (r = i.get(t.depthTexture).__webglTexture),
                1026 === t.depthTexture.format)
              )
                e.framebufferTexture2D(
                  e.FRAMEBUFFER,
                  e.DEPTH_ATTACHMENT,
                  e.TEXTURE_2D,
                  r,
                  0
                );
              else {
                if (1027 !== t.depthTexture.format)
                  throw Error("Unknown depthTexture format");
                e.framebufferTexture2D(
                  e.FRAMEBUFFER,
                  e.DEPTH_STENCIL_ATTACHMENT,
                  e.TEXTURE_2D,
                  r,
                  0
                );
              }
            } else if (s)
              for (r.__webglDepthbuffer = [], s = 0; 6 > s; s++)
                e.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer[s]),
                  (r.__webglDepthbuffer[s] = e.createRenderbuffer()),
                  g(r.__webglDepthbuffer[s], t);
            else
              e.bindFramebuffer(e.FRAMEBUFFER, r.__webglFramebuffer),
                (r.__webglDepthbuffer = e.createRenderbuffer()),
                g(r.__webglDepthbuffer, t);
            e.bindFramebuffer(e.FRAMEBUFFER, null);
          }
        }),
        (this.updateRenderTargetMipmap = function (t) {
          var r = t.texture,
            s = l(t);
          c(r, s) &&
            ((t = t.isWebGLRenderTargetCube
              ? e.TEXTURE_CUBE_MAP
              : e.TEXTURE_2D),
            (r = i.get(r).__webglTexture),
            n.bindTexture(t, r),
            e.generateMipmap(t),
            n.bindTexture(t, null));
        });
    }
    function un() {
      var e = {};
      return {
        get: function (t) {
          t = t.uuid;
          var n = e[t];
          return void 0 === n && ((n = {}), (e[t] = n)), n;
        },
        remove: function (t) {
          delete e[t.uuid];
        },
        clear: function () {
          e = {};
        },
      };
    }
    function hn(e, t, n) {
      function i(t, n, i) {
        var r = new Uint8Array(4),
          s = e.createTexture();
        for (
          e.bindTexture(t, s),
            e.texParameteri(t, e.TEXTURE_MIN_FILTER, e.NEAREST),
            e.texParameteri(t, e.TEXTURE_MAG_FILTER, e.NEAREST),
            t = 0;
          i > t;
          t++
        )
          e.texImage2D(n + t, 0, e.RGBA, 1, 1, 0, e.RGBA, e.UNSIGNED_BYTE, r);
        return s;
      }
      function s(t) {
        !0 !== y[t] && (e.enable(t), (y[t] = !0));
      }
      function o(t) {
        !1 !== y[t] && (e.disable(t), (y[t] = !1));
      }
      function a(t, i, r, a, l, c, u, h) {
        if ((0 !== t ? s(e.BLEND) : o(e.BLEND), 5 !== t)) {
          if (t !== x || h !== I)
            switch (t) {
              case 2:
                h
                  ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(e.ONE, e.ONE, e.ONE, e.ONE))
                  : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.SRC_ALPHA, e.ONE));
                break;
              case 3:
                h
                  ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(
                      e.ZERO,
                      e.ZERO,
                      e.ONE_MINUS_SRC_COLOR,
                      e.ONE_MINUS_SRC_ALPHA
                    ))
                  : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.ZERO, e.ONE_MINUS_SRC_COLOR));
                break;
              case 4:
                h
                  ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(
                      e.ZERO,
                      e.SRC_COLOR,
                      e.ZERO,
                      e.SRC_ALPHA
                    ))
                  : (e.blendEquation(e.FUNC_ADD),
                    e.blendFunc(e.ZERO, e.SRC_COLOR));
                break;
              default:
                h
                  ? (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA,
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA
                    ))
                  : (e.blendEquationSeparate(e.FUNC_ADD, e.FUNC_ADD),
                    e.blendFuncSeparate(
                      e.SRC_ALPHA,
                      e.ONE_MINUS_SRC_ALPHA,
                      e.ONE,
                      e.ONE_MINUS_SRC_ALPHA
                    ));
            }
          P = k = E = S = T = C = null;
        } else (l = l || i), (c = c || r), (u = u || a), (i !== C || l !== E) && (e.blendEquationSeparate(n.convert(i), n.convert(l)), (C = i), (E = l)), (r !== T || a !== S || c !== k || u !== P) && (e.blendFuncSeparate(n.convert(r), n.convert(a), n.convert(c), n.convert(u)), (T = r), (S = a), (k = c), (P = u));
        (x = t), (I = h);
      }
      function l(t) {
        A !== t && (e.frontFace(t ? e.CW : e.CCW), (A = t));
      }
      function c(t) {
        0 !== t
          ? (s(e.CULL_FACE),
            t !== O &&
              e.cullFace(
                1 === t ? e.BACK : 2 === t ? e.FRONT : e.FRONT_AND_BACK
              ))
          : o(e.CULL_FACE),
          (O = t);
      }
      function u(t, n, i) {
        t
          ? (s(e.POLYGON_OFFSET_FILL),
            (M !== n || R !== i) && (e.polygonOffset(n, i), (M = n), (R = i)))
          : o(e.POLYGON_OFFSET_FILL);
      }
      function h(t) {
        void 0 === t && (t = e.TEXTURE0 + L - 1),
          U !== t && (e.activeTexture(t), (U = t));
      }
      var d = new (function () {
          var t = !1,
            n = new r(),
            i = null,
            s = new r(0, 0, 0, 0);
          return {
            setMask: function (n) {
              i === n || t || (e.colorMask(n, n, n, n), (i = n));
            },
            setLocked: function (e) {
              t = e;
            },
            setClear: function (t, i, r, o, a) {
              !0 === a && ((t *= o), (i *= o), (r *= o)),
                n.set(t, i, r, o),
                !1 === s.equals(n) && (e.clearColor(t, i, r, o), s.copy(n));
            },
            reset: function () {
              (t = !1), (i = null), s.set(-1, 0, 0, 0);
            },
          };
        })(),
        p = new (function () {
          var t = !1,
            n = null,
            i = null,
            r = null;
          return {
            setTest: function (t) {
              t ? s(e.DEPTH_TEST) : o(e.DEPTH_TEST);
            },
            setMask: function (i) {
              n === i || t || (e.depthMask(i), (n = i));
            },
            setFunc: function (t) {
              if (i !== t) {
                if (t)
                  switch (t) {
                    case 0:
                      e.depthFunc(e.NEVER);
                      break;
                    case 1:
                      e.depthFunc(e.ALWAYS);
                      break;
                    case 2:
                      e.depthFunc(e.LESS);
                      break;
                    case 3:
                      e.depthFunc(e.LEQUAL);
                      break;
                    case 4:
                      e.depthFunc(e.EQUAL);
                      break;
                    case 5:
                      e.depthFunc(e.GEQUAL);
                      break;
                    case 6:
                      e.depthFunc(e.GREATER);
                      break;
                    case 7:
                      e.depthFunc(e.NOTEQUAL);
                      break;
                    default:
                      e.depthFunc(e.LEQUAL);
                  }
                else e.depthFunc(e.LEQUAL);
                i = t;
              }
            },
            setLocked: function (e) {
              t = e;
            },
            setClear: function (t) {
              r !== t && (e.clearDepth(t), (r = t));
            },
            reset: function () {
              (t = !1), (r = i = n = null);
            },
          };
        })(),
        f = new (function () {
          var t = !1,
            n = null,
            i = null,
            r = null,
            a = null,
            l = null,
            c = null,
            u = null,
            h = null;
          return {
            setTest: function (t) {
              t ? s(e.STENCIL_TEST) : o(e.STENCIL_TEST);
            },
            setMask: function (i) {
              n === i || t || (e.stencilMask(i), (n = i));
            },
            setFunc: function (t, n, s) {
              (i !== t || r !== n || a !== s) &&
                (e.stencilFunc(t, n, s), (i = t), (r = n), (a = s));
            },
            setOp: function (t, n, i) {
              (l !== t || c !== n || u !== i) &&
                (e.stencilOp(t, n, i), (l = t), (c = n), (u = i));
            },
            setLocked: function (e) {
              t = e;
            },
            setClear: function (t) {
              h !== t && (e.clearStencil(t), (h = t));
            },
            reset: function () {
              (t = !1), (h = u = c = l = a = r = i = n = null);
            },
          };
        })(),
        m = e.getParameter(e.MAX_VERTEX_ATTRIBS),
        g = new Uint8Array(m),
        v = new Uint8Array(m),
        _ = new Uint8Array(m),
        y = {},
        b = null,
        w = null,
        x = null,
        C = null,
        T = null,
        S = null,
        E = null,
        k = null,
        P = null,
        I = !1,
        A = null,
        O = null,
        D = null,
        M = null,
        R = null,
        L = e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),
        m = parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),
        N = 1 <= parseFloat(m),
        U = null,
        B = {},
        F = new r(),
        j = new r(),
        H = {};
      return (
        (H[e.TEXTURE_2D] = i(e.TEXTURE_2D, e.TEXTURE_2D, 1)),
        (H[e.TEXTURE_CUBE_MAP] = i(
          e.TEXTURE_CUBE_MAP,
          e.TEXTURE_CUBE_MAP_POSITIVE_X,
          6
        )),
        d.setClear(0, 0, 0, 1),
        p.setClear(1),
        f.setClear(0),
        s(e.DEPTH_TEST),
        p.setFunc(3),
        l(!1),
        c(1),
        s(e.CULL_FACE),
        s(e.BLEND),
        a(1),
        {
          buffers: { color: d, depth: p, stencil: f },
          initAttributes: function () {
            for (var e = 0, t = g.length; t > e; e++) g[e] = 0;
          },
          enableAttribute: function (n) {
            (g[n] = 1),
              0 === v[n] && (e.enableVertexAttribArray(n), (v[n] = 1)),
              0 !== _[n] &&
                (t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n, 0),
                (_[n] = 0));
          },
          enableAttributeAndDivisor: function (n, i) {
            (g[n] = 1),
              0 === v[n] && (e.enableVertexAttribArray(n), (v[n] = 1)),
              _[n] !== i &&
                (t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n, i),
                (_[n] = i));
          },
          disableUnusedAttributes: function () {
            for (var t = 0, n = v.length; t !== n; ++t)
              v[t] !== g[t] && (e.disableVertexAttribArray(t), (v[t] = 0));
          },
          enable: s,
          disable: o,
          getCompressedTextureFormats: function () {
            if (
              null === b &&
              ((b = []),
              t.get("WEBGL_compressed_texture_pvrtc") ||
                t.get("WEBGL_compressed_texture_s3tc") ||
                t.get("WEBGL_compressed_texture_etc1"))
            )
              for (
                var n = e.getParameter(e.COMPRESSED_TEXTURE_FORMATS), i = 0;
                i < n.length;
                i++
              )
                b.push(n[i]);
            return b;
          },
          useProgram: function (t) {
            return w !== t ? (e.useProgram(t), (w = t), !0) : !1;
          },
          setBlending: a,
          setMaterial: function (t) {
            2 === t.side ? o(e.CULL_FACE) : s(e.CULL_FACE),
              l(1 === t.side),
              !0 === t.transparent
                ? a(
                    t.blending,
                    t.blendEquation,
                    t.blendSrc,
                    t.blendDst,
                    t.blendEquationAlpha,
                    t.blendSrcAlpha,
                    t.blendDstAlpha,
                    t.premultipliedAlpha
                  )
                : a(0),
              p.setFunc(t.depthFunc),
              p.setTest(t.depthTest),
              p.setMask(t.depthWrite),
              d.setMask(t.colorWrite),
              u(t.polygonOffset, t.polygonOffsetFactor, t.polygonOffsetUnits);
          },
          setFlipSided: l,
          setCullFace: c,
          setLineWidth: function (t) {
            t !== D && (N && e.lineWidth(t), (D = t));
          },
          setPolygonOffset: u,
          setScissorTest: function (t) {
            t ? s(e.SCISSOR_TEST) : o(e.SCISSOR_TEST);
          },
          activeTexture: h,
          bindTexture: function (t, n) {
            null === U && h();
            var i = B[U];
            void 0 === i &&
              ((i = { type: void 0, texture: void 0 }), (B[U] = i)),
              (i.type !== t || i.texture !== n) &&
                (e.bindTexture(t, n || H[t]), (i.type = t), (i.texture = n));
          },
          compressedTexImage2D: function () {
            try {
              e.compressedTexImage2D.apply(e, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          texImage2D: function () {
            try {
              e.texImage2D.apply(e, arguments);
            } catch (t) {
              console.error("THREE.WebGLState:", t);
            }
          },
          scissor: function (t) {
            !1 === F.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), F.copy(t));
          },
          viewport: function (t) {
            !1 === j.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), j.copy(t));
          },
          reset: function () {
            for (var t = 0; t < v.length; t++)
              1 === v[t] && (e.disableVertexAttribArray(t), (v[t] = 0));
            (y = {}),
              (U = b = null),
              (B = {}),
              (O = A = x = w = null),
              d.reset(),
              p.reset(),
              f.reset();
          },
        }
      );
    }
    function dn(e, t, n) {
      function i(t) {
        if ("highp" === t) {
          if (
            0 <
              e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.HIGH_FLOAT)
                .precision &&
            0 <
              e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.HIGH_FLOAT)
                .precision
          )
            return "highp";
          t = "mediump";
        }
        return "mediump" === t &&
          0 <
            e.getShaderPrecisionFormat(e.VERTEX_SHADER, e.MEDIUM_FLOAT)
              .precision &&
          0 <
            e.getShaderPrecisionFormat(e.FRAGMENT_SHADER, e.MEDIUM_FLOAT)
              .precision
          ? "mediump"
          : "lowp";
      }
      var r,
        s = void 0 !== n.precision ? n.precision : "highp",
        o = i(s);
      o !== s &&
        (console.warn(
          "THREE.WebGLRenderer:",
          s,
          "not supported, using",
          o,
          "instead."
        ),
        (s = o)),
        (n = !0 === n.logarithmicDepthBuffer && !!t.get("EXT_frag_depth"));
      var o = e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),
        a = e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
        l = e.getParameter(e.MAX_TEXTURE_SIZE),
        c = e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),
        u = e.getParameter(e.MAX_VERTEX_ATTRIBS),
        h = e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),
        d = e.getParameter(e.MAX_VARYING_VECTORS),
        p = e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),
        f = a > 0,
        m = !!t.get("OES_texture_float");
      return {
        getMaxAnisotropy: function () {
          if (void 0 !== r) return r;
          var n = t.get("EXT_texture_filter_anisotropic");
          return (r =
            null !== n ? e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0);
        },
        getMaxPrecision: i,
        precision: s,
        logarithmicDepthBuffer: n,
        maxTextures: o,
        maxVertexTextures: a,
        maxTextureSize: l,
        maxCubemapSize: c,
        maxAttributes: u,
        maxVertexUniforms: h,
        maxVaryings: d,
        maxFragmentUniforms: p,
        vertexTextures: f,
        floatFragmentTextures: m,
        floatVertexTextures: f && m,
      };
    }
    function pn(e) {
      ut.call(this), (this.cameras = e || []);
    }
    function fn(e) {
      function t() {
        if (null !== i && i.isPresenting) {
          var t = i.getEyeParameters("left"),
            r = t.renderWidth,
            t = t.renderHeight;
          (f = e.getPixelRatio()),
            (p = e.getSize()),
            e.setDrawingBufferSize(2 * r, t, 1);
        } else n.enabled && e.setDrawingBufferSize(p.width, p.height, f);
      }
      var n = this,
        i = null,
        s = null;
      "VRFrameData" in window && (s = new window.VRFrameData());
      var o = new c(),
        a = new c(),
        l = new c(),
        u = new ut();
      (u.bounds = new r(0, 0, 0.5, 1)), u.layers.enable(1);
      var h = new ut();
      (h.bounds = new r(0.5, 0, 0.5, 1)), h.layers.enable(2);
      var d = new pn([u, h]);
      d.layers.enable(1), d.layers.enable(2);
      var p, f;
      window.addEventListener("vrdisplaypresentchange", t, !1),
        (this.standing = this.enabled = !1),
        (this.getDevice = function () {
          return i;
        }),
        (this.setDevice = function (e) {
          void 0 !== e && (i = e);
        }),
        (this.getCamera = function (e) {
          if (null === i) return e;
          (i.depthNear = e.near), (i.depthFar = e.far), i.getFrameData(s);
          var t = s.pose;
          return (
            null !== t.position
              ? e.position.fromArray(t.position)
              : e.position.set(0, 0, 0),
            null !== t.orientation && e.quaternion.fromArray(t.orientation),
            e.updateMatrixWorld(),
            (t = i.stageParameters),
            this.standing &&
              t &&
              (a.fromArray(t.sittingToStandingTransform),
              l.getInverse(a),
              e.matrixWorld.multiply(a),
              e.matrixWorldInverse.multiply(l)),
            !1 === i.isPresenting
              ? e
              : ((u.near = e.near),
                (h.near = e.near),
                (u.far = e.far),
                (h.far = e.far),
                d.matrixWorld.copy(e.matrixWorld),
                d.matrixWorldInverse.copy(e.matrixWorldInverse),
                u.matrixWorldInverse.fromArray(s.leftViewMatrix),
                h.matrixWorldInverse.fromArray(s.rightViewMatrix),
                this.standing &&
                  t &&
                  (u.matrixWorldInverse.multiply(l),
                  h.matrixWorldInverse.multiply(l)),
                (e = e.parent),
                null !== e &&
                  (o.getInverse(e.matrixWorld),
                  u.matrixWorldInverse.multiply(o),
                  h.matrixWorldInverse.multiply(o)),
                u.matrixWorld.getInverse(u.matrixWorldInverse),
                h.matrixWorld.getInverse(h.matrixWorldInverse),
                u.projectionMatrix.fromArray(s.leftProjectionMatrix),
                h.projectionMatrix.fromArray(s.rightProjectionMatrix),
                d.projectionMatrix.copy(u.projectionMatrix),
                (e = i.getLayers()),
                e.length &&
                  ((e = e[0]),
                  null !== e.leftBounds &&
                    4 === e.leftBounds.length &&
                    u.bounds.fromArray(e.leftBounds),
                  null !== e.rightBounds &&
                    4 === e.rightBounds.length &&
                    h.bounds.fromArray(e.rightBounds)),
                d)
          );
        }),
        (this.getStandingMatrix = function () {
          return a;
        }),
        (this.submitFrame = function () {
          i && i.isPresenting && i.submitFrame();
        }),
        (this.dispose = function () {
          window.removeEventListener("vrdisplaypresentchange", t);
        });
    }
    function mn(e) {
      var t = {};
      return {
        get: function (n) {
          if (void 0 !== t[n]) return t[n];
          switch (n) {
            case "WEBGL_depth_texture":
              var i =
                e.getExtension("WEBGL_depth_texture") ||
                e.getExtension("MOZ_WEBGL_depth_texture") ||
                e.getExtension("WEBKIT_WEBGL_depth_texture");
              break;
            case "EXT_texture_filter_anisotropic":
              i =
                e.getExtension("EXT_texture_filter_anisotropic") ||
                e.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
                e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
              break;
            case "WEBGL_compressed_texture_s3tc":
              i =
                e.getExtension("WEBGL_compressed_texture_s3tc") ||
                e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
              break;
            case "WEBGL_compressed_texture_pvrtc":
              i =
                e.getExtension("WEBGL_compressed_texture_pvrtc") ||
                e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
              break;
            case "WEBGL_compressed_texture_etc1":
              i = e.getExtension("WEBGL_compressed_texture_etc1");
              break;
            default:
              i = e.getExtension(n);
          }
          return (
            null === i &&
              console.warn(
                "THREE.WebGLRenderer: " + n + " extension not supported."
              ),
            (t[n] = i)
          );
        },
      };
    }
    function gn() {
      function e() {
        c.value !== i && ((c.value = i), (c.needsUpdate = r > 0)),
          (n.numPlanes = r),
          (n.numIntersection = 0);
      }
      function t(e, t, i, r) {
        var s = null !== e ? e.length : 0,
          o = null;
        if (0 !== s) {
          if (((o = c.value), !0 !== r || null === o))
            for (
              r = i + 4 * s,
                t = t.matrixWorldInverse,
                l.getNormalMatrix(t),
                (null === o || o.length < r) && (o = new Float32Array(r)),
                r = 0;
              r !== s;
              ++r, i += 4
            )
              a.copy(e[r]).applyMatrix4(t, l),
                a.normal.toArray(o, i),
                (o[i + 3] = a.constant);
          (c.value = o), (c.needsUpdate = !0);
        }
        return (n.numPlanes = s), o;
      }
      var n = this,
        i = null,
        r = 0,
        s = !1,
        o = !1,
        a = new tt(),
        l = new et(),
        c = { value: null, needsUpdate: !1 };
      (this.uniform = c),
        (this.numIntersection = this.numPlanes = 0),
        (this.init = function (e, n, o) {
          var a = 0 !== e.length || n || 0 !== r || s;
          return (s = n), (i = t(e, o, 0)), (r = e.length), a;
        }),
        (this.beginShadows = function () {
          (o = !0), t(null);
        }),
        (this.endShadows = function () {
          (o = !1), e();
        }),
        (this.setState = function (n, a, l, u, h, d) {
          if (!s || null === n || 0 === n.length || (o && !l))
            o ? t(null) : e();
          else {
            l = o ? 0 : r;
            var p = 4 * l,
              f = h.clippingState || null;
            for (c.value = f, f = t(n, u, p, d), n = 0; n !== p; ++n)
              f[n] = i[n];
            (h.clippingState = f),
              (this.numIntersection = a ? this.numPlanes : 0),
              (this.numPlanes += l);
          }
        });
    }
    function vn(e, t) {
      return {
        convert: function (n) {
          if (1e3 === n) return e.REPEAT;
          if (1001 === n) return e.CLAMP_TO_EDGE;
          if (1002 === n) return e.MIRRORED_REPEAT;
          if (1003 === n) return e.NEAREST;
          if (1004 === n) return e.NEAREST_MIPMAP_NEAREST;
          if (1005 === n) return e.NEAREST_MIPMAP_LINEAR;
          if (1006 === n) return e.LINEAR;
          if (1007 === n) return e.LINEAR_MIPMAP_NEAREST;
          if (1008 === n) return e.LINEAR_MIPMAP_LINEAR;
          if (1009 === n) return e.UNSIGNED_BYTE;
          if (1017 === n) return e.UNSIGNED_SHORT_4_4_4_4;
          if (1018 === n) return e.UNSIGNED_SHORT_5_5_5_1;
          if (1019 === n) return e.UNSIGNED_SHORT_5_6_5;
          if (1010 === n) return e.BYTE;
          if (1011 === n) return e.SHORT;
          if (1012 === n) return e.UNSIGNED_SHORT;
          if (1013 === n) return e.INT;
          if (1014 === n) return e.UNSIGNED_INT;
          if (1015 === n) return e.FLOAT;
          if (1016 === n) {
            var i = t.get("OES_texture_half_float");
            if (null !== i) return i.HALF_FLOAT_OES;
          }
          if (1021 === n) return e.ALPHA;
          if (1022 === n) return e.RGB;
          if (1023 === n) return e.RGBA;
          if (1024 === n) return e.LUMINANCE;
          if (1025 === n) return e.LUMINANCE_ALPHA;
          if (1026 === n) return e.DEPTH_COMPONENT;
          if (1027 === n) return e.DEPTH_STENCIL;
          if (100 === n) return e.FUNC_ADD;
          if (101 === n) return e.FUNC_SUBTRACT;
          if (102 === n) return e.FUNC_REVERSE_SUBTRACT;
          if (200 === n) return e.ZERO;
          if (201 === n) return e.ONE;
          if (202 === n) return e.SRC_COLOR;
          if (203 === n) return e.ONE_MINUS_SRC_COLOR;
          if (204 === n) return e.SRC_ALPHA;
          if (205 === n) return e.ONE_MINUS_SRC_ALPHA;
          if (206 === n) return e.DST_ALPHA;
          if (207 === n) return e.ONE_MINUS_DST_ALPHA;
          if (208 === n) return e.DST_COLOR;
          if (209 === n) return e.ONE_MINUS_DST_COLOR;
          if (210 === n) return e.SRC_ALPHA_SATURATE;
          if (
            (2001 === n || 2002 === n || 2003 === n || 2004 === n) &&
            ((i = t.get("WEBGL_compressed_texture_s3tc")), null !== i)
          ) {
            if (2001 === n) return i.COMPRESSED_RGB_S3TC_DXT1_EXT;
            if (2002 === n) return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;
            if (2003 === n) return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;
            if (2004 === n) return i.COMPRESSED_RGBA_S3TC_DXT5_EXT;
          }
          if (
            (2100 === n || 2101 === n || 2102 === n || 2103 === n) &&
            ((i = t.get("WEBGL_compressed_texture_pvrtc")), null !== i)
          ) {
            if (2100 === n) return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
            if (2101 === n) return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
            if (2102 === n) return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
            if (2103 === n) return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;
          }
          if (
            2151 === n &&
            ((i = t.get("WEBGL_compressed_texture_etc1")), null !== i)
          )
            return i.COMPRESSED_RGB_ETC1_WEBGL;
          if (
            (103 === n || 104 === n) &&
            ((i = t.get("EXT_blend_minmax")), null !== i)
          ) {
            if (103 === n) return i.MIN_EXT;
            if (104 === n) return i.MAX_EXT;
          }
          return 1020 === n && ((i = t.get("WEBGL_depth_texture")), null !== i)
            ? i.UNSIGNED_INT_24_8_WEBGL
            : 0;
        },
      };
    }
    function _n(e) {
      function t() {
        (dt = new mn(ut)),
          dt.get("WEBGL_depth_texture"),
          dt.get("OES_texture_float"),
          dt.get("OES_texture_float_linear"),
          dt.get("OES_texture_half_float"),
          dt.get("OES_texture_half_float_linear"),
          dt.get("OES_standard_derivatives"),
          dt.get("ANGLE_instanced_arrays"),
          dt.get("OES_element_index_uint") && (St.MaxIndex = 4294967296),
          (At = new vn(ut, dt)),
          (pt = new dn(ut, dt, e)),
          (ft = new hn(ut, dt, At)),
          ft.scissor(H.copy(J).multiplyScalar(Y)),
          ft.viewport(j.copy(K).multiplyScalar(Y)),
          (mt = new un()),
          (gt = new cn(ut, dt, ft, mt, pt, At, lt)),
          (vt = new rt(ut)),
          (_t = new Wt(ut, vt, lt)),
          (yt = new qt(_t, ct)),
          (Tt = new Ht(ut)),
          (wt = new ln(D, dt, pt)),
          (bt = new Vt()),
          (xt = new Ft()),
          (Ct = new Lt(D, ft, _t, S)),
          (Et = new zt(ut, dt, ct)),
          (kt = new $t(ut, dt, ct)),
          (Pt = new G(D, ut, ft, gt, pt)),
          (It = new q(D, ut, ft, gt, pt)),
          (D.info.programs = wt.programs),
          (D.context = ut),
          (D.capabilities = pt),
          (D.extensions = dt),
          (D.properties = mt),
          (D.renderLists = xt),
          (D.state = ft);
      }
      function n(e) {
        e.preventDefault(),
          console.log("THREE.WebGLRenderer: Context Lost."),
          (M = !0);
      }
      function i() {
        console.log("THREE.WebGLRenderer: Context Restored."), (M = !1), t();
      }
      function s(e) {
        (e = e.target), e.removeEventListener("dispose", s), o(e), mt.remove(e);
      }
      function o(e) {
        var t = mt.get(e).program;
        (e.program = void 0), void 0 !== t && wt.releaseProgram(t);
      }
      function a(e, t, n) {
        e.render(function (e) {
          D.renderBufferImmediate(e, t, n);
        });
      }
      function h(e) {
        null !== Rt && Rt(e),
          (Ot.getDevice() || window).requestAnimationFrame(h);
      }
      function d(e, t, n) {
        if (e.visible) {
          if (e.layers.test(t.layers))
            if (e.isLight) k.push(e), e.castShadow && P.push(e);
            else if (e.isSprite)
              (e.frustumCulled && !Z.intersectsSprite(e)) || A.push(e);
            else if (e.isLensFlare) O.push(e);
            else if (e.isImmediateRenderObject)
              n && at.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ot),
                I.push(e, null, e.material, at.z, null);
            else if (
              (e.isMesh || e.isLine || e.isPoints) &&
              (e.isSkinnedMesh && e.skeleton.update(),
              !e.frustumCulled || Z.intersectsObject(e))
            ) {
              n && at.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ot);
              var i = yt.update(e),
                r = e.material;
              if (Array.isArray(r))
                for (var s = i.groups, o = 0, a = s.length; a > o; o++) {
                  var l = s[o],
                    c = r[l.materialIndex];
                  c && c.visible && I.push(e, i, c, at.z, l);
                }
              else r.visible && I.push(e, i, r, at.z, null);
            }
          for (e = e.children, o = 0, a = e.length; a > o; o++) d(e[o], t, n);
        }
      }
      function p(e, t, n, i) {
        for (var r = 0, s = e.length; s > r; r++) {
          var o = e[r],
            a = o.object,
            l = o.geometry,
            c = void 0 === i ? o.material : i,
            o = o.group;
          if (n.isArrayCamera) {
            F = n;
            for (var u = n.cameras, h = 0, d = u.length; d > h; h++) {
              var p = u[h];
              if (a.layers.test(p.layers)) {
                var m = p.bounds;
                ft.viewport(
                  j.set(m.x * V, m.y * X, m.z * V, m.w * X).multiplyScalar(Y)
                ),
                  f(a, t, p, l, c, o);
              }
            }
          } else (F = null), f(a, t, n, l, c, o);
        }
      }
      function f(e, t, n, i, r, s) {
        if (
          (e.onBeforeRender(D, t, n, i, r, s),
          e.modelViewMatrix.multiplyMatrices(
            n.matrixWorldInverse,
            e.matrixWorld
          ),
          e.normalMatrix.getNormalMatrix(e.modelViewMatrix),
          e.isImmediateRenderObject)
        ) {
          ft.setMaterial(r);
          var o = g(n, t.fog, r, e);
          (U = ""), a(e, o, r);
        } else D.renderBufferDirect(n, t.fog, i, r, e, s);
        e.onAfterRender(D, t, n, i, r, s);
      }
      function m(e, t, n) {
        var i = mt.get(e);
        n = wt.getParameters(
          e,
          bt.state,
          P,
          t,
          et.numPlanes,
          et.numIntersection,
          n
        );
        var r = wt.getProgramCode(e, n),
          a = i.program,
          l = !0;
        if (void 0 === a) e.addEventListener("dispose", s);
        else if (a.code !== r) o(e);
        else {
          if (void 0 !== n.shaderID) return;
          l = !1;
        }
        if (
          (l &&
            (n.shaderID
              ? ((a = js[n.shaderID]),
                (i.shader = {
                  name: e.type,
                  uniforms: Bs.clone(a.uniforms),
                  vertexShader: a.vertexShader,
                  fragmentShader: a.fragmentShader,
                }))
              : (i.shader = {
                  name: e.type,
                  uniforms: e.uniforms,
                  vertexShader: e.vertexShader,
                  fragmentShader: e.fragmentShader,
                }),
            e.onBeforeCompile(i.shader),
            (a = wt.acquireProgram(e, i.shader, n, r)),
            (i.program = a),
            (e.program = a)),
          (n = a.getAttributes()),
          e.morphTargets)
        )
          for (r = e.numSupportedMorphTargets = 0; r < D.maxMorphTargets; r++)
            0 <= n["morphTarget" + r] && e.numSupportedMorphTargets++;
        if (e.morphNormals)
          for (r = e.numSupportedMorphNormals = 0; r < D.maxMorphNormals; r++)
            0 <= n["morphNormal" + r] && e.numSupportedMorphNormals++;
        (n = i.shader.uniforms),
          ((!e.isShaderMaterial && !e.isRawShaderMaterial) ||
            !0 === e.clipping) &&
            ((i.numClippingPlanes = et.numPlanes),
            (i.numIntersection = et.numIntersection),
            (n.clippingPlanes = et.uniform)),
          (i.fog = t),
          (i.lightsHash = bt.state.hash),
          e.lights &&
            ((n.ambientLightColor.value = bt.state.ambient),
            (n.directionalLights.value = bt.state.directional),
            (n.spotLights.value = bt.state.spot),
            (n.rectAreaLights.value = bt.state.rectArea),
            (n.pointLights.value = bt.state.point),
            (n.hemisphereLights.value = bt.state.hemi),
            (n.directionalShadowMap.value = bt.state.directionalShadowMap),
            (n.directionalShadowMatrix.value =
              bt.state.directionalShadowMatrix),
            (n.spotShadowMap.value = bt.state.spotShadowMap),
            (n.spotShadowMatrix.value = bt.state.spotShadowMatrix),
            (n.pointShadowMap.value = bt.state.pointShadowMap),
            (n.pointShadowMatrix.value = bt.state.pointShadowMatrix)),
          (e = i.program.getUniforms()),
          (e = $.seqWithValue(e.seq, n)),
          (i.uniformsList = e);
      }
      function g(e, t, n, i) {
        W = 0;
        var r = mt.get(n);
        tt &&
          (st || e !== B) &&
          et.setState(
            n.clippingPlanes,
            n.clipIntersection,
            n.clipShadows,
            e,
            r,
            e === B && n.id === N
          ),
          !1 === n.needsUpdate &&
            (void 0 === r.program
              ? (n.needsUpdate = !0)
              : n.fog && r.fog !== t
              ? (n.needsUpdate = !0)
              : n.lights && r.lightsHash !== bt.state.hash
              ? (n.needsUpdate = !0)
              : void 0 === r.numClippingPlanes ||
                (r.numClippingPlanes === et.numPlanes &&
                  r.numIntersection === et.numIntersection) ||
                (n.needsUpdate = !0)),
          n.needsUpdate && (m(n, t, i), (n.needsUpdate = !1));
        var s = !1,
          o = !1,
          a = !1,
          l = r.program,
          c = l.getUniforms(),
          h = r.shader.uniforms;
        if (
          (ft.useProgram(l.program) && (a = o = s = !0),
          n.id !== N && ((N = n.id), (o = !0)),
          (s || e !== B) &&
            (c.setValue(ut, "projectionMatrix", e.projectionMatrix),
            pt.logarithmicDepthBuffer &&
              c.setValue(
                ut,
                "logDepthBufFC",
                2 / (Math.log(e.far + 1) / Math.LN2)
              ),
            B !== (F || e) && ((B = F || e), (a = o = !0)),
            (n.isShaderMaterial ||
              n.isMeshPhongMaterial ||
              n.isMeshStandardMaterial ||
              n.envMap) &&
              ((s = c.map.cameraPosition),
              void 0 !== s &&
                s.setValue(ut, at.setFromMatrixPosition(e.matrixWorld))),
            (n.isMeshPhongMaterial ||
              n.isMeshLambertMaterial ||
              n.isMeshBasicMaterial ||
              n.isMeshStandardMaterial ||
              n.isShaderMaterial ||
              n.skinning) &&
              c.setValue(ut, "viewMatrix", e.matrixWorldInverse)),
          n.skinning &&
            (c.setOptional(ut, i, "bindMatrix"),
            c.setOptional(ut, i, "bindMatrixInverse"),
            (e = i.skeleton)))
        )
          if (((s = e.bones), pt.floatVertexTextures)) {
            if (void 0 === e.boneTexture) {
              var s = Math.sqrt(4 * s.length),
                s = ks.nextPowerOfTwo(Math.ceil(s)),
                s = Math.max(s, 4),
                d = new Float32Array(s * s * 4);
              d.set(e.boneMatrices);
              var p = new u(d, s, s, 1023, 1015);
              (e.boneMatrices = d),
                (e.boneTexture = p),
                (e.boneTextureSize = s);
            }
            c.setValue(ut, "boneTexture", e.boneTexture),
              c.setValue(ut, "boneTextureSize", e.boneTextureSize);
          } else c.setOptional(ut, e, "boneMatrices");
        return (
          o &&
            (c.setValue(ut, "toneMappingExposure", D.toneMappingExposure),
            c.setValue(ut, "toneMappingWhitePoint", D.toneMappingWhitePoint),
            n.lights &&
              ((o = a),
              (h.ambientLightColor.needsUpdate = o),
              (h.directionalLights.needsUpdate = o),
              (h.pointLights.needsUpdate = o),
              (h.spotLights.needsUpdate = o),
              (h.rectAreaLights.needsUpdate = o),
              (h.hemisphereLights.needsUpdate = o)),
            t &&
              n.fog &&
              ((h.fogColor.value = t.color),
              t.isFog
                ? ((h.fogNear.value = t.near), (h.fogFar.value = t.far))
                : t.isFogExp2 && (h.fogDensity.value = t.density)),
            n.isMeshBasicMaterial
              ? v(h, n)
              : n.isMeshLambertMaterial
              ? (v(h, n),
                n.emissiveMap && (h.emissiveMap.value = n.emissiveMap))
              : n.isMeshPhongMaterial
              ? (v(h, n),
                n.isMeshToonMaterial
                  ? (_(h, n),
                    n.gradientMap && (h.gradientMap.value = n.gradientMap))
                  : _(h, n))
              : n.isMeshStandardMaterial
              ? (v(h, n),
                n.isMeshPhysicalMaterial &&
                  ((h.clearCoat.value = n.clearCoat),
                  (h.clearCoatRoughness.value = n.clearCoatRoughness)),
                (h.roughness.value = n.roughness),
                (h.metalness.value = n.metalness),
                n.roughnessMap && (h.roughnessMap.value = n.roughnessMap),
                n.metalnessMap && (h.metalnessMap.value = n.metalnessMap),
                n.emissiveMap && (h.emissiveMap.value = n.emissiveMap),
                n.bumpMap &&
                  ((h.bumpMap.value = n.bumpMap),
                  (h.bumpScale.value = n.bumpScale)),
                n.normalMap &&
                  ((h.normalMap.value = n.normalMap),
                  h.normalScale.value.copy(n.normalScale)),
                n.displacementMap &&
                  ((h.displacementMap.value = n.displacementMap),
                  (h.displacementScale.value = n.displacementScale),
                  (h.displacementBias.value = n.displacementBias)),
                n.envMap && (h.envMapIntensity.value = n.envMapIntensity))
              : n.isMeshDepthMaterial
              ? (v(h, n),
                n.displacementMap &&
                  ((h.displacementMap.value = n.displacementMap),
                  (h.displacementScale.value = n.displacementScale),
                  (h.displacementBias.value = n.displacementBias)))
              : n.isMeshDistanceMaterial
              ? (v(h, n),
                n.displacementMap &&
                  ((h.displacementMap.value = n.displacementMap),
                  (h.displacementScale.value = n.displacementScale),
                  (h.displacementBias.value = n.displacementBias)),
                h.referencePosition.value.copy(n.referencePosition),
                (h.nearDistance.value = n.nearDistance),
                (h.farDistance.value = n.farDistance))
              : n.isMeshNormalMaterial
              ? (v(h, n),
                n.bumpMap &&
                  ((h.bumpMap.value = n.bumpMap),
                  (h.bumpScale.value = n.bumpScale)),
                n.normalMap &&
                  ((h.normalMap.value = n.normalMap),
                  h.normalScale.value.copy(n.normalScale)),
                n.displacementMap &&
                  ((h.displacementMap.value = n.displacementMap),
                  (h.displacementScale.value = n.displacementScale),
                  (h.displacementBias.value = n.displacementBias)))
              : n.isLineBasicMaterial
              ? ((h.diffuse.value = n.color),
                (h.opacity.value = n.opacity),
                n.isLineDashedMaterial &&
                  ((h.dashSize.value = n.dashSize),
                  (h.totalSize.value = n.dashSize + n.gapSize),
                  (h.scale.value = n.scale)))
              : n.isPointsMaterial
              ? ((h.diffuse.value = n.color),
                (h.opacity.value = n.opacity),
                (h.size.value = n.size * Y),
                (h.scale.value = 0.5 * X),
                (h.map.value = n.map),
                null !== n.map &&
                  ((t = n.map.offset),
                  (n = n.map.repeat),
                  h.offsetRepeat.value.set(t.x, t.y, n.x, n.y)))
              : n.isShadowMaterial &&
                ((h.color.value = n.color), (h.opacity.value = n.opacity)),
            void 0 !== h.ltcMat && (h.ltcMat.value = Us.LTC_MAT_TEXTURE),
            void 0 !== h.ltcMag && (h.ltcMag.value = Us.LTC_MAG_TEXTURE),
            $.upload(ut, r.uniformsList, h, D)),
          c.setValue(ut, "modelViewMatrix", i.modelViewMatrix),
          c.setValue(ut, "normalMatrix", i.normalMatrix),
          c.setValue(ut, "modelMatrix", i.matrixWorld),
          l
        );
      }
      function v(e, t) {
        if (
          ((e.opacity.value = t.opacity),
          t.color && (e.diffuse.value = t.color),
          t.emissive &&
            e.emissive.value
              .copy(t.emissive)
              .multiplyScalar(t.emissiveIntensity),
          t.map && (e.map.value = t.map),
          t.alphaMap && (e.alphaMap.value = t.alphaMap),
          t.specularMap && (e.specularMap.value = t.specularMap),
          t.envMap &&
            ((e.envMap.value = t.envMap),
            (e.flipEnvMap.value = t.envMap && t.envMap.isCubeTexture ? -1 : 1),
            (e.reflectivity.value = t.reflectivity),
            (e.refractionRatio.value = t.refractionRatio)),
          t.lightMap &&
            ((e.lightMap.value = t.lightMap),
            (e.lightMapIntensity.value = t.lightMapIntensity)),
          t.aoMap &&
            ((e.aoMap.value = t.aoMap),
            (e.aoMapIntensity.value = t.aoMapIntensity)),
          t.map)
        )
          var n = t.map;
        else
          t.specularMap
            ? (n = t.specularMap)
            : t.displacementMap
            ? (n = t.displacementMap)
            : t.normalMap
            ? (n = t.normalMap)
            : t.bumpMap
            ? (n = t.bumpMap)
            : t.roughnessMap
            ? (n = t.roughnessMap)
            : t.metalnessMap
            ? (n = t.metalnessMap)
            : t.alphaMap
            ? (n = t.alphaMap)
            : t.emissiveMap && (n = t.emissiveMap);
        void 0 !== n &&
          (n.isWebGLRenderTarget && (n = n.texture),
          (t = n.offset),
          (n = n.repeat),
          e.offsetRepeat.value.set(t.x, t.y, n.x, n.y));
      }
      function _(e, t) {
        (e.specular.value = t.specular),
          (e.shininess.value = Math.max(t.shininess, 1e-4)),
          t.emissiveMap && (e.emissiveMap.value = t.emissiveMap),
          t.bumpMap &&
            ((e.bumpMap.value = t.bumpMap), (e.bumpScale.value = t.bumpScale)),
          t.normalMap &&
            ((e.normalMap.value = t.normalMap),
            e.normalScale.value.copy(t.normalScale)),
          t.displacementMap &&
            ((e.displacementMap.value = t.displacementMap),
            (e.displacementScale.value = t.displacementScale),
            (e.displacementBias.value = t.displacementBias));
      }
      console.log("THREE.WebGLRenderer", "87"), (e = e || {});
      var y =
          void 0 !== e.canvas
            ? e.canvas
            : document.createElementNS(
                "http://www.w3.org/1999/xhtml",
                "canvas"
              ),
        b = void 0 !== e.context ? e.context : null,
        w = void 0 !== e.alpha ? e.alpha : !1,
        x = void 0 !== e.depth ? e.depth : !0,
        C = void 0 !== e.stencil ? e.stencil : !0,
        T = void 0 !== e.antialias ? e.antialias : !1,
        S = void 0 !== e.premultipliedAlpha ? e.premultipliedAlpha : !0,
        E = void 0 !== e.preserveDrawingBuffer ? e.preserveDrawingBuffer : !1,
        k = [],
        P = [],
        I = null,
        A = [],
        O = [];
      (this.domElement = y),
        (this.context = null),
        (this.sortObjects =
          this.autoClearStencil =
          this.autoClearDepth =
          this.autoClearColor =
          this.autoClear =
            !0),
        (this.clippingPlanes = []),
        (this.localClippingEnabled = !1),
        (this.gammaFactor = 2),
        (this.physicallyCorrectLights =
          this.gammaOutput =
          this.gammaInput =
            !1),
        (this.toneMappingWhitePoint =
          this.toneMappingExposure =
          this.toneMapping =
            1),
        (this.maxMorphTargets = 8),
        (this.maxMorphNormals = 4);
      var D = this,
        M = !1,
        R = null,
        L = null,
        N = -1,
        U = "",
        B = null,
        F = null,
        j = new r(),
        H = new r(),
        z = null,
        W = 0,
        V = y.width,
        X = y.height,
        Y = 1,
        K = new r(0, 0, V, X),
        J = new r(0, 0, V, X),
        Q = !1,
        Z = new nt(),
        et = new gn(),
        tt = !1,
        st = !1,
        ot = new c(),
        at = new l(),
        lt = { geometries: 0, textures: 0 },
        ct = { frame: 0, calls: 0, vertices: 0, faces: 0, points: 0 };
      this.info = { render: ct, memory: lt, programs: null };
      try {
        w = {
          alpha: w,
          depth: x,
          stencil: C,
          antialias: T,
          premultipliedAlpha: S,
          preserveDrawingBuffer: E,
        };
        var ut =
          b ||
          y.getContext("webgl", w) ||
          y.getContext("experimental-webgl", w);
        if (null === ut) {
          if (null !== y.getContext("webgl"))
            throw "Error creating WebGL context with your selected attributes.";
          throw "Error creating WebGL context.";
        }
        void 0 === ut.getShaderPrecisionFormat &&
          (ut.getShaderPrecisionFormat = function () {
            return { rangeMin: 1, rangeMax: 1, precision: 1 };
          }),
          y.addEventListener("webglcontextlost", n, !1),
          y.addEventListener("webglcontextrestored", i, !1);
      } catch (ht) {
        console.error("THREE.WebGLRenderer: " + ht);
      }
      var dt,
        pt,
        ft,
        mt,
        gt,
        vt,
        _t,
        yt,
        bt,
        wt,
        xt,
        Ct,
        Tt,
        Et,
        kt,
        Pt,
        It,
        At;
      t();
      var Ot = new fn(D);
      this.vr = Ot;
      var Dt = new it(D, yt, pt.maxTextureSize);
      (this.shadowMap = Dt),
        (this.getContext = function () {
          return ut;
        }),
        (this.getContextAttributes = function () {
          return ut.getContextAttributes();
        }),
        (this.forceContextLoss = function () {
          var e = dt.get("WEBGL_lose_context");
          e && e.loseContext();
        }),
        (this.forceContextRestore = function () {
          var e = dt.get("WEBGL_lose_context");
          e && e.restoreContext();
        }),
        (this.getPixelRatio = function () {
          return Y;
        }),
        (this.setPixelRatio = function (e) {
          void 0 !== e && ((Y = e), this.setSize(V, X, !1));
        }),
        (this.getSize = function () {
          return { width: V, height: X };
        }),
        (this.setSize = function (e, t, n) {
          var i = Ot.getDevice();
          i && i.isPresenting
            ? console.warn(
                "THREE.WebGLRenderer: Can't change size while VR device is presenting."
              )
            : ((V = e),
              (X = t),
              (y.width = e * Y),
              (y.height = t * Y),
              !1 !== n &&
                ((y.style.width = e + "px"), (y.style.height = t + "px")),
              this.setViewport(0, 0, e, t));
        }),
        (this.getDrawingBufferSize = function () {
          return { width: V * Y, height: X * Y };
        }),
        (this.setDrawingBufferSize = function (e, t, n) {
          (V = e),
            (X = t),
            (Y = n),
            (y.width = e * n),
            (y.height = t * n),
            this.setViewport(0, 0, e, t);
        }),
        (this.setViewport = function (e, t, n, i) {
          K.set(e, X - t - i, n, i), ft.viewport(j.copy(K).multiplyScalar(Y));
        }),
        (this.setScissor = function (e, t, n, i) {
          J.set(e, X - t - i, n, i), ft.scissor(H.copy(J).multiplyScalar(Y));
        }),
        (this.setScissorTest = function (e) {
          ft.setScissorTest((Q = e));
        }),
        (this.getClearColor = Ct.getClearColor),
        (this.setClearColor = Ct.setClearColor),
        (this.getClearAlpha = Ct.getClearAlpha),
        (this.setClearAlpha = Ct.setClearAlpha),
        (this.clear = function (e, t, n) {
          var i = 0;
          (void 0 === e || e) && (i |= ut.COLOR_BUFFER_BIT),
            (void 0 === t || t) && (i |= ut.DEPTH_BUFFER_BIT),
            (void 0 === n || n) && (i |= ut.STENCIL_BUFFER_BIT),
            ut.clear(i);
        }),
        (this.clearColor = function () {
          this.clear(!0, !1, !1);
        }),
        (this.clearDepth = function () {
          this.clear(!1, !0, !1);
        }),
        (this.clearStencil = function () {
          this.clear(!1, !1, !0);
        }),
        (this.clearTarget = function (e, t, n, i) {
          this.setRenderTarget(e), this.clear(t, n, i);
        }),
        (this.dispose = function () {
          y.removeEventListener("webglcontextlost", n, !1),
            y.removeEventListener("webglcontextrestored", i, !1),
            xt.dispose(),
            Ot.dispose();
        }),
        (this.renderBufferImmediate = function (e, t, n) {
          ft.initAttributes();
          var i = mt.get(e);
          if (
            (e.hasPositions && !i.position && (i.position = ut.createBuffer()),
            e.hasNormals && !i.normal && (i.normal = ut.createBuffer()),
            e.hasUvs && !i.uv && (i.uv = ut.createBuffer()),
            e.hasColors && !i.color && (i.color = ut.createBuffer()),
            (t = t.getAttributes()),
            e.hasPositions &&
              (ut.bindBuffer(ut.ARRAY_BUFFER, i.position),
              ut.bufferData(ut.ARRAY_BUFFER, e.positionArray, ut.DYNAMIC_DRAW),
              ft.enableAttribute(t.position),
              ut.vertexAttribPointer(t.position, 3, ut.FLOAT, !1, 0, 0)),
            e.hasNormals)
          ) {
            if (
              (ut.bindBuffer(ut.ARRAY_BUFFER, i.normal),
              !n.isMeshPhongMaterial &&
                !n.isMeshStandardMaterial &&
                !n.isMeshNormalMaterial &&
                !0 === n.flatShading)
            )
              for (var r = 0, s = 3 * e.count; s > r; r += 9) {
                var o = e.normalArray,
                  a = (o[r + 0] + o[r + 3] + o[r + 6]) / 3,
                  l = (o[r + 1] + o[r + 4] + o[r + 7]) / 3,
                  c = (o[r + 2] + o[r + 5] + o[r + 8]) / 3;
                (o[r + 0] = a),
                  (o[r + 1] = l),
                  (o[r + 2] = c),
                  (o[r + 3] = a),
                  (o[r + 4] = l),
                  (o[r + 5] = c),
                  (o[r + 6] = a),
                  (o[r + 7] = l),
                  (o[r + 8] = c);
              }
            ut.bufferData(ut.ARRAY_BUFFER, e.normalArray, ut.DYNAMIC_DRAW),
              ft.enableAttribute(t.normal),
              ut.vertexAttribPointer(t.normal, 3, ut.FLOAT, !1, 0, 0);
          }
          e.hasUvs &&
            n.map &&
            (ut.bindBuffer(ut.ARRAY_BUFFER, i.uv),
            ut.bufferData(ut.ARRAY_BUFFER, e.uvArray, ut.DYNAMIC_DRAW),
            ft.enableAttribute(t.uv),
            ut.vertexAttribPointer(t.uv, 2, ut.FLOAT, !1, 0, 0)),
            e.hasColors &&
              0 !== n.vertexColors &&
              (ut.bindBuffer(ut.ARRAY_BUFFER, i.color),
              ut.bufferData(ut.ARRAY_BUFFER, e.colorArray, ut.DYNAMIC_DRAW),
              ft.enableAttribute(t.color),
              ut.vertexAttribPointer(t.color, 3, ut.FLOAT, !1, 0, 0)),
            ft.disableUnusedAttributes(),
            ut.drawArrays(ut.TRIANGLES, 0, e.count),
            (e.count = 0);
        }),
        (this.renderBufferDirect = function (e, t, n, i, r, s) {
          ft.setMaterial(i);
          var o = g(e, t, i, r);
          e = n.id + "_" + o.id + "_" + (!0 === i.wireframe);
          var a = !1;
          e !== U && ((U = e), (a = !0)),
            r.morphTargetInfluences && (Tt.update(r, n, i, o), (a = !0));
          var l = n.index,
            c = n.attributes.position;
          if (
            ((t = 1),
            !0 === i.wireframe && ((l = _t.getWireframeAttribute(n)), (t = 2)),
            (e = Et),
            null !== l)
          ) {
            var u = vt.get(l);
            (e = kt), e.setIndex(u);
          }
          if (a) {
            if (
              ((a = void 0),
              n &&
                n.isInstancedBufferGeometry &&
                null === dt.get("ANGLE_instanced_arrays"))
            )
              console.error(
                "THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."
              );
            else {
              void 0 === a && (a = 0), ft.initAttributes();
              var h = n.attributes,
                o = o.getAttributes(),
                d = i.defaultAttributeValues;
              for (C in o) {
                var p = o[C];
                if (p >= 0) {
                  var f = h[C];
                  if (void 0 !== f) {
                    var m = f.normalized,
                      v = f.itemSize,
                      _ = vt.get(f);
                    if (void 0 !== _) {
                      var y = _.buffer,
                        b = _.type,
                        _ = _.bytesPerElement;
                      if (f.isInterleavedBufferAttribute) {
                        var w = f.data,
                          x = w.stride,
                          f = f.offset;
                        w && w.isInstancedInterleavedBuffer
                          ? (ft.enableAttributeAndDivisor(
                              p,
                              w.meshPerAttribute
                            ),
                            void 0 === n.maxInstancedCount &&
                              (n.maxInstancedCount =
                                w.meshPerAttribute * w.count))
                          : ft.enableAttribute(p),
                          ut.bindBuffer(ut.ARRAY_BUFFER, y),
                          ut.vertexAttribPointer(
                            p,
                            v,
                            b,
                            m,
                            x * _,
                            (a * x + f) * _
                          );
                      } else
                        f.isInstancedBufferAttribute
                          ? (ft.enableAttributeAndDivisor(
                              p,
                              f.meshPerAttribute
                            ),
                            void 0 === n.maxInstancedCount &&
                              (n.maxInstancedCount =
                                f.meshPerAttribute * f.count))
                          : ft.enableAttribute(p),
                          ut.bindBuffer(ut.ARRAY_BUFFER, y),
                          ut.vertexAttribPointer(p, v, b, m, 0, a * v * _);
                    }
                  } else if (void 0 !== d && ((m = d[C]), void 0 !== m))
                    switch (m.length) {
                      case 2:
                        ut.vertexAttrib2fv(p, m);
                        break;
                      case 3:
                        ut.vertexAttrib3fv(p, m);
                        break;
                      case 4:
                        ut.vertexAttrib4fv(p, m);
                        break;
                      default:
                        ut.vertexAttrib1fv(p, m);
                    }
                }
              }
              ft.disableUnusedAttributes();
            }
            null !== l && ut.bindBuffer(ut.ELEMENT_ARRAY_BUFFER, u.buffer);
          }
          (u = 0),
            null !== l ? (u = l.count) : void 0 !== c && (u = c.count),
            (l = n.drawRange.start * t),
            (c = null !== s ? s.start * t : 0);
          var C = Math.max(l, c);
          if (
            ((s = Math.max(
              0,
              Math.min(
                u,
                l + n.drawRange.count * t,
                c + (null !== s ? s.count * t : 1 / 0)
              ) -
                1 -
                C +
                1
            )),
            0 !== s)
          ) {
            if (r.isMesh)
              if (!0 === i.wireframe)
                ft.setLineWidth(i.wireframeLinewidth * (null === R ? Y : 1)),
                  e.setMode(ut.LINES);
              else
                switch (r.drawMode) {
                  case 0:
                    e.setMode(ut.TRIANGLES);
                    break;
                  case 1:
                    e.setMode(ut.TRIANGLE_STRIP);
                    break;
                  case 2:
                    e.setMode(ut.TRIANGLE_FAN);
                }
            else
              r.isLine
                ? ((i = i.linewidth),
                  void 0 === i && (i = 1),
                  ft.setLineWidth(i * (null === R ? Y : 1)),
                  e.setMode(
                    r.isLineSegments
                      ? ut.LINES
                      : r.isLineLoop
                      ? ut.LINE_LOOP
                      : ut.LINE_STRIP
                  ))
                : r.isPoints && e.setMode(ut.POINTS);
            n && n.isInstancedBufferGeometry
              ? 0 < n.maxInstancedCount && e.renderInstances(n, C, s)
              : e.render(C, s);
          }
        }),
        (this.compile = function (e, t) {
          (k.length = 0),
            (P.length = 0),
            e.traverse(function (e) {
              e.isLight && (k.push(e), e.castShadow && P.push(e));
            }),
            bt.setup(k, P, t),
            e.traverse(function (t) {
              if (t.material)
                if (Array.isArray(t.material))
                  for (var n = 0; n < t.material.length; n++)
                    m(t.material[n], e.fog, t);
                else m(t.material, e.fog, t);
            });
        });
      var Mt = !1,
        Rt = null;
      (this.animate = function (e) {
        (Rt = e),
          Mt ||
            ((Ot.getDevice() || window).requestAnimationFrame(h), (Mt = !0));
      }),
        (this.render = function (e, t, n, i) {
          if (t && t.isCamera) {
            if (!M) {
              (U = ""),
                (N = -1),
                (B = null),
                !0 === e.autoUpdate && e.updateMatrixWorld(),
                null === t.parent && t.updateMatrixWorld(),
                Ot.enabled && (t = Ot.getCamera(t)),
                ot.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse),
                Z.setFromMatrix(ot),
                (k.length = 0),
                (P.length = 0),
                (A.length = 0),
                (O.length = 0),
                (st = this.localClippingEnabled),
                (tt = et.init(this.clippingPlanes, st, t)),
                (I = xt.get(e, t)),
                I.init(),
                d(e, t, D.sortObjects),
                !0 === D.sortObjects && I.sort(),
                tt && et.beginShadows(),
                Dt.render(P, e, t),
                bt.setup(k, P, t),
                tt && et.endShadows(),
                ct.frame++,
                (ct.calls = 0),
                (ct.vertices = 0),
                (ct.faces = 0),
                (ct.points = 0),
                void 0 === n && (n = null),
                this.setRenderTarget(n),
                Ct.render(I, e, t, i),
                (i = I.opaque);
              var r = I.transparent;
              if (e.overrideMaterial) {
                var s = e.overrideMaterial;
                i.length && p(i, e, t, s), r.length && p(r, e, t, s);
              } else i.length && p(i, e, t), r.length && p(r, e, t);
              It.render(A, e, t),
                Pt.render(O, e, t, j),
                n && gt.updateRenderTargetMipmap(n),
                ft.buffers.depth.setTest(!0),
                ft.buffers.depth.setMask(!0),
                ft.buffers.color.setMask(!0),
                ft.setPolygonOffset(!1),
                Ot.enabled && Ot.submitFrame();
            }
          } else
            console.error(
              "THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera."
            );
        }),
        (this.setFaceCulling = function (e, t) {
          ft.setCullFace(e), ft.setFlipSided(0 === t);
        }),
        (this.allocTextureUnit = function () {
          var e = W;
          return (
            e >= pt.maxTextures &&
              console.warn(
                "THREE.WebGLRenderer: Trying to use " +
                  e +
                  " texture units while this GPU supports only " +
                  pt.maxTextures
              ),
            (W += 1),
            e
          );
        }),
        (this.setTexture2D = (function () {
          var e = !1;
          return function (t, n) {
            t &&
              t.isWebGLRenderTarget &&
              (e ||
                (console.warn(
                  "THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."
                ),
                (e = !0)),
              (t = t.texture)),
              gt.setTexture2D(t, n);
          };
        })()),
        (this.setTexture = (function () {
          var e = !1;
          return function (t, n) {
            e ||
              (console.warn(
                "THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."
              ),
              (e = !0)),
              gt.setTexture2D(t, n);
          };
        })()),
        (this.setTextureCube = (function () {
          var e = !1;
          return function (t, n) {
            t &&
              t.isWebGLRenderTargetCube &&
              (e ||
                (console.warn(
                  "THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."
                ),
                (e = !0)),
              (t = t.texture)),
              (t && t.isCubeTexture) ||
              (Array.isArray(t.image) && 6 === t.image.length)
                ? gt.setTextureCube(t, n)
                : gt.setTextureCubeDynamic(t, n);
          };
        })()),
        (this.getRenderTarget = function () {
          return R;
        }),
        (this.setRenderTarget = function (e) {
          (R = e) &&
            void 0 === mt.get(e).__webglFramebuffer &&
            gt.setupRenderTarget(e);
          var t = null,
            n = !1;
          e
            ? ((t = mt.get(e).__webglFramebuffer),
              e.isWebGLRenderTargetCube &&
                ((t = t[e.activeCubeFace]), (n = !0)),
              j.copy(e.viewport),
              H.copy(e.scissor),
              (z = e.scissorTest))
            : (j.copy(K).multiplyScalar(Y),
              H.copy(J).multiplyScalar(Y),
              (z = Q)),
            L !== t && (ut.bindFramebuffer(ut.FRAMEBUFFER, t), (L = t)),
            ft.viewport(j),
            ft.scissor(H),
            ft.setScissorTest(z),
            n &&
              ((n = mt.get(e.texture)),
              ut.framebufferTexture2D(
                ut.FRAMEBUFFER,
                ut.COLOR_ATTACHMENT0,
                ut.TEXTURE_CUBE_MAP_POSITIVE_X + e.activeCubeFace,
                n.__webglTexture,
                e.activeMipMapLevel
              ));
        }),
        (this.readRenderTargetPixels = function (e, t, n, i, r, s) {
          if (e && e.isWebGLRenderTarget) {
            var o = mt.get(e).__webglFramebuffer;
            if (o) {
              var a = !1;
              o !== L && (ut.bindFramebuffer(ut.FRAMEBUFFER, o), (a = !0));
              try {
                var l = e.texture,
                  c = l.format,
                  u = l.type;
                1023 !== c &&
                At.convert(c) !==
                  ut.getParameter(ut.IMPLEMENTATION_COLOR_READ_FORMAT)
                  ? console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."
                    )
                  : 1009 === u ||
                    At.convert(u) ===
                      ut.getParameter(ut.IMPLEMENTATION_COLOR_READ_TYPE) ||
                    (1015 === u &&
                      (dt.get("OES_texture_float") ||
                        dt.get("WEBGL_color_buffer_float"))) ||
                    (1016 === u && dt.get("EXT_color_buffer_half_float"))
                  ? ut.checkFramebufferStatus(ut.FRAMEBUFFER) ===
                    ut.FRAMEBUFFER_COMPLETE
                    ? t >= 0 &&
                      t <= e.width - i &&
                      n >= 0 &&
                      n <= e.height - r &&
                      ut.readPixels(t, n, i, r, At.convert(c), At.convert(u), s)
                    : console.error(
                        "THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."
                      )
                  : console.error(
                      "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type."
                    );
              } finally {
                a && ut.bindFramebuffer(ut.FRAMEBUFFER, L);
              }
            }
          } else
            console.error(
              "THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget."
            );
        });
    }
    function yn(e, t) {
      (this.name = ""),
        (this.color = new z(e)),
        (this.density = void 0 !== t ? t : 25e-5);
    }
    function bn(e, t, n) {
      (this.name = ""),
        (this.color = new z(e)),
        (this.near = void 0 !== t ? t : 1),
        (this.far = void 0 !== n ? n : 1e3);
    }
    function wn() {
      at.call(this),
        (this.type = "Scene"),
        (this.overrideMaterial = this.fog = this.background = null),
        (this.autoUpdate = !0);
    }
    function xn(e, t, n, i, r) {
      at.call(this),
        (this.lensFlares = []),
        (this.positionScreen = new l()),
        (this.customUpdateCallback = void 0),
        void 0 !== e && this.add(e, t, n, i, r);
    }
    function Cn(e) {
      X.call(this),
        (this.type = "SpriteMaterial"),
        (this.color = new z(16777215)),
        (this.map = null),
        (this.rotation = 0),
        (this.lights = this.fog = !1),
        this.setValues(e);
    }
    function Tn(e) {
      at.call(this),
        (this.type = "Sprite"),
        (this.material = void 0 !== e ? e : new Cn());
    }
    function Sn() {
      at.call(this),
        (this.type = "LOD"),
        Object.defineProperties(this, {
          levels: { enumerable: !0, value: [] },
        });
    }
    function En(e, t) {
      if (
        ((e = e || []),
        (this.bones = e.slice(0)),
        (this.boneMatrices = new Float32Array(16 * this.bones.length)),
        void 0 === t)
      )
        this.calculateInverses();
      else if (this.bones.length === t.length) this.boneInverses = t.slice(0);
      else
        for (
          console.warn("THREE.Skeleton boneInverses is the wrong length."),
            this.boneInverses = [],
            e = 0,
            t = this.bones.length;
          t > e;
          e++
        )
          this.boneInverses.push(new c());
    }
    function kn() {
      at.call(this), (this.type = "Bone");
    }
    function Pn(e, t) {
      Rt.call(this, e, t),
        (this.type = "SkinnedMesh"),
        (this.bindMode = "attached"),
        (this.bindMatrix = new c()),
        (this.bindMatrixInverse = new c()),
        (e = this.initBones()),
        (e = new En(e)),
        this.bind(e, this.matrixWorld),
        this.normalizeSkinWeights();
    }
    function In(e) {
      X.call(this),
        (this.type = "LineBasicMaterial"),
        (this.color = new z(16777215)),
        (this.linewidth = 1),
        (this.linejoin = this.linecap = "round"),
        (this.lights = !1),
        this.setValues(e);
    }
    function An(e, t, n) {
      return 1 === n
        ? (console.warn(
            "THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."
          ),
          new On(e, t))
        : (at.call(this),
          (this.type = "Line"),
          (this.geometry = void 0 !== e ? e : new St()),
          void (this.material =
            void 0 !== t ? t : new In({ color: 16777215 * Math.random() })));
    }
    function On(e, t) {
      An.call(this, e, t), (this.type = "LineSegments");
    }
    function Dn(e, t) {
      An.call(this, e, t), (this.type = "LineLoop");
    }
    function Mn(e) {
      X.call(this),
        (this.type = "PointsMaterial"),
        (this.color = new z(16777215)),
        (this.map = null),
        (this.size = 1),
        (this.sizeAttenuation = !0),
        (this.lights = !1),
        this.setValues(e);
    }
    function Rn(e, t) {
      at.call(this),
        (this.type = "Points"),
        (this.geometry = void 0 !== e ? e : new St()),
        (this.material =
          void 0 !== t ? t : new Mn({ color: 16777215 * Math.random() }));
    }
    function Ln() {
      at.call(this), (this.type = "Group");
    }
    function Nn(e, t, n, r, s, o, a, l, c) {
      function u() {
        requestAnimationFrame(u),
          e.readyState >= e.HAVE_CURRENT_DATA && (h.needsUpdate = !0);
      }
      i.call(this, e, t, n, r, s, o, a, l, c), (this.generateMipmaps = !1);
      var h = this;
      u();
    }
    function Un(e, t, n, r, s, o, a, l, c, u, h, d) {
      i.call(this, null, o, a, l, c, u, r, s, h, d),
        (this.image = { width: t, height: n }),
        (this.mipmaps = e),
        (this.generateMipmaps = this.flipY = !1);
    }
    function Bn(e, t, n, r, s, o, a, l, c, u) {
      if (((u = void 0 !== u ? u : 1026), 1026 !== u && 1027 !== u))
        throw Error(
          "DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat"
        );
      void 0 === n && 1026 === u && (n = 1012),
        void 0 === n && 1027 === u && (n = 1020),
        i.call(this, null, r, s, o, a, l, u, n, c),
        (this.image = { width: e, height: t }),
        (this.magFilter = void 0 !== a ? a : 1003),
        (this.minFilter = void 0 !== l ? l : 1003),
        (this.generateMipmaps = this.flipY = !1);
    }
    function Fn(e) {
      St.call(this), (this.type = "WireframeGeometry");
      var t,
        n,
        i,
        r = [],
        s = [0, 0],
        o = {},
        a = ["a", "b", "c"];
      if (e && e.isGeometry) {
        var c = e.faces,
          u = 0;
        for (n = c.length; n > u; u++) {
          var h = c[u];
          for (t = 0; 3 > t; t++) {
            var d = h[a[t]],
              p = h[a[(t + 1) % 3]];
            (s[0] = Math.min(d, p)),
              (s[1] = Math.max(d, p)),
              (d = s[0] + "," + s[1]),
              void 0 === o[d] && (o[d] = { index1: s[0], index2: s[1] });
          }
        }
        for (d in o)
          (u = o[d]),
            (a = e.vertices[u.index1]),
            r.push(a.x, a.y, a.z),
            (a = e.vertices[u.index2]),
            r.push(a.x, a.y, a.z);
      } else if (e && e.isBufferGeometry) {
        var a = new l();
        if (null !== e.index) {
          (c = e.attributes.position), (h = e.index);
          var f = e.groups;
          for (
            0 === f.length &&
              (f = [{ start: 0, count: h.count, materialIndex: 0 }]),
              e = 0,
              i = f.length;
            i > e;
            ++e
          )
            for (
              u = f[e], t = u.start, n = u.count, u = t, n = t + n;
              n > u;
              u += 3
            )
              for (t = 0; 3 > t; t++)
                (d = h.getX(u + t)),
                  (p = h.getX(u + ((t + 1) % 3))),
                  (s[0] = Math.min(d, p)),
                  (s[1] = Math.max(d, p)),
                  (d = s[0] + "," + s[1]),
                  void 0 === o[d] && (o[d] = { index1: s[0], index2: s[1] });
          for (d in o)
            (u = o[d]),
              a.fromBufferAttribute(c, u.index1),
              r.push(a.x, a.y, a.z),
              a.fromBufferAttribute(c, u.index2),
              r.push(a.x, a.y, a.z);
        } else
          for (c = e.attributes.position, u = 0, n = c.count / 3; n > u; u++)
            for (t = 0; 3 > t; t++)
              (o = 3 * u + t),
                a.fromBufferAttribute(c, o),
                r.push(a.x, a.y, a.z),
                (o = 3 * u + ((t + 1) % 3)),
                a.fromBufferAttribute(c, o),
                r.push(a.x, a.y, a.z);
      }
      this.addAttribute("position", new wt(r, 3));
    }
    function jn(e, t, n) {
      dt.call(this),
        (this.type = "ParametricGeometry"),
        (this.parameters = { func: e, slices: t, stacks: n }),
        this.fromBufferGeometry(new Hn(e, t, n)),
        this.mergeVertices();
    }
    function Hn(e, t, n) {
      St.call(this),
        (this.type = "ParametricBufferGeometry"),
        (this.parameters = { func: e, slices: t, stacks: n });
      var i,
        r,
        s = [],
        o = [],
        a = [],
        c = [],
        u = new l(),
        h = new l(),
        d = new l(),
        p = new l(),
        f = new l(),
        m = t + 1;
      for (i = 0; n >= i; i++) {
        var g = i / n;
        for (r = 0; t >= r; r++) {
          var v = r / t,
            h = e(v, g, h);
          o.push(h.x, h.y, h.z),
            v - 1e-5 >= 0
              ? ((d = e(v - 1e-5, g, d)), p.subVectors(h, d))
              : ((d = e(v + 1e-5, g, d)), p.subVectors(d, h)),
            g - 1e-5 >= 0
              ? ((d = e(v, g - 1e-5, d)), f.subVectors(h, d))
              : ((d = e(v, g + 1e-5, d)), f.subVectors(d, h)),
            u.crossVectors(p, f).normalize(),
            a.push(u.x, u.y, u.z),
            c.push(v, g);
        }
      }
      for (i = 0; n > i; i++)
        for (r = 0; t > r; r++)
          (e = i * m + r + 1),
            (u = (i + 1) * m + r + 1),
            (h = (i + 1) * m + r),
            s.push(i * m + r, e, h),
            s.push(e, u, h);
      this.setIndex(s),
        this.addAttribute("position", new wt(o, 3)),
        this.addAttribute("normal", new wt(a, 3)),
        this.addAttribute("uv", new wt(c, 2));
    }
    function $n(e, t, n, i) {
      dt.call(this),
        (this.type = "PolyhedronGeometry"),
        (this.parameters = { vertices: e, indices: t, radius: n, detail: i }),
        this.fromBufferGeometry(new zn(e, t, n, i)),
        this.mergeVertices();
    }
    function zn(e, t, i, r) {
      function s(e) {
        c.push(e.x, e.y, e.z);
      }
      function o(t, n) {
        (t *= 3), (n.x = e[t + 0]), (n.y = e[t + 1]), (n.z = e[t + 2]);
      }
      function a(e, t, n, i) {
        0 > i && 1 === e.x && (u[t] = e.x - 1),
          0 === n.x && 0 === n.z && (u[t] = i / 2 / Math.PI + 0.5);
      }
      St.call(this),
        (this.type = "PolyhedronBufferGeometry"),
        (this.parameters = { vertices: e, indices: t, radius: i, detail: r }),
        (i = i || 1),
        (r = r || 0);
      var c = [],
        u = [];
      !(function (e) {
        for (
          var n = new l(), i = new l(), r = new l(), a = 0;
          a < t.length;
          a += 3
        ) {
          o(t[a + 0], n), o(t[a + 1], i), o(t[a + 2], r);
          var c,
            u,
            h = n,
            d = i,
            p = r,
            f = Math.pow(2, e),
            m = [];
          for (u = 0; f >= u; u++) {
            m[u] = [];
            var g = h.clone().lerp(p, u / f),
              v = d.clone().lerp(p, u / f),
              _ = f - u;
            for (c = 0; _ >= c; c++)
              m[u][c] = 0 === c && u === f ? g : g.clone().lerp(v, c / _);
          }
          for (u = 0; f > u; u++)
            for (c = 0; 2 * (f - u) - 1 > c; c++)
              (h = Math.floor(c / 2)),
                0 === c % 2
                  ? (s(m[u][h + 1]), s(m[u + 1][h]), s(m[u][h]))
                  : (s(m[u][h + 1]), s(m[u + 1][h + 1]), s(m[u + 1][h]));
        }
      })(r),
        (function (e) {
          for (var t = new l(), n = 0; n < c.length; n += 3)
            (t.x = c[n + 0]),
              (t.y = c[n + 1]),
              (t.z = c[n + 2]),
              t.normalize().multiplyScalar(e),
              (c[n + 0] = t.x),
              (c[n + 1] = t.y),
              (c[n + 2] = t.z);
        })(i),
        (function () {
          for (var e = new l(), t = 0; t < c.length; t += 3)
            (e.x = c[t + 0]),
              (e.y = c[t + 1]),
              (e.z = c[t + 2]),
              u.push(
                Math.atan2(e.z, -e.x) / 2 / Math.PI + 0.5,
                1 -
                  (Math.atan2(-e.y, Math.sqrt(e.x * e.x + e.z * e.z)) /
                    Math.PI +
                    0.5)
              );
          for (
            var e = new l(),
              t = new l(),
              i = new l(),
              r = new l(),
              s = new n(),
              o = new n(),
              h = new n(),
              d = 0,
              p = 0;
            d < c.length;
            d += 9, p += 6
          ) {
            e.set(c[d + 0], c[d + 1], c[d + 2]),
              t.set(c[d + 3], c[d + 4], c[d + 5]),
              i.set(c[d + 6], c[d + 7], c[d + 8]),
              s.set(u[p + 0], u[p + 1]),
              o.set(u[p + 2], u[p + 3]),
              h.set(u[p + 4], u[p + 5]),
              r.copy(e).add(t).add(i).divideScalar(3);
            var f = Math.atan2(r.z, -r.x);
            a(s, p + 0, e, f), a(o, p + 2, t, f), a(h, p + 4, i, f);
          }
          for (e = 0; e < u.length; e += 6)
            (t = u[e + 0]),
              (i = u[e + 2]),
              (r = u[e + 4]),
              (s = Math.min(t, i, r)),
              0.9 < Math.max(t, i, r) &&
                0.1 > s &&
                (0.2 > t && (u[e + 0] += 1),
                0.2 > i && (u[e + 2] += 1),
                0.2 > r && (u[e + 4] += 1));
        })(),
        this.addAttribute("position", new wt(c, 3)),
        this.addAttribute("normal", new wt(c.slice(), 3)),
        this.addAttribute("uv", new wt(u, 2)),
        0 === r ? this.computeVertexNormals() : this.normalizeNormals();
    }
    function Wn(e, t) {
      dt.call(this),
        (this.type = "TetrahedronGeometry"),
        (this.parameters = { radius: e, detail: t }),
        this.fromBufferGeometry(new Gn(e, t)),
        this.mergeVertices();
    }
    function Gn(e, t) {
      zn.call(
        this,
        [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
        [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1],
        e,
        t
      ),
        (this.type = "TetrahedronBufferGeometry"),
        (this.parameters = { radius: e, detail: t });
    }
    function Vn(e, t) {
      dt.call(this),
        (this.type = "OctahedronGeometry"),
        (this.parameters = { radius: e, detail: t }),
        this.fromBufferGeometry(new qn(e, t)),
        this.mergeVertices();
    }
    function qn(e, t) {
      zn.call(
        this,
        [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
        [
          0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4,
          2,
        ],
        e,
        t
      ),
        (this.type = "OctahedronBufferGeometry"),
        (this.parameters = { radius: e, detail: t });
    }
    function Xn(e, t) {
      dt.call(this),
        (this.type = "IcosahedronGeometry"),
        (this.parameters = { radius: e, detail: t }),
        this.fromBufferGeometry(new Yn(e, t)),
        this.mergeVertices();
    }
    function Yn(e, t) {
      var n = (1 + Math.sqrt(5)) / 2;
      zn.call(
        this,
        [
          -1,
          n,
          0,
          1,
          n,
          0,
          -1,
          -n,
          0,
          1,
          -n,
          0,
          0,
          -1,
          n,
          0,
          1,
          n,
          0,
          -1,
          -n,
          0,
          1,
          -n,
          n,
          0,
          -1,
          n,
          0,
          1,
          -n,
          0,
          -1,
          -n,
          0,
          1,
        ],
        [
          0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4,
          11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3,
          8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1,
        ],
        e,
        t
      ),
        (this.type = "IcosahedronBufferGeometry"),
        (this.parameters = { radius: e, detail: t });
    }
    function Kn(e, t) {
      dt.call(this),
        (this.type = "DodecahedronGeometry"),
        (this.parameters = { radius: e, detail: t }),
        this.fromBufferGeometry(new Jn(e, t)),
        this.mergeVertices();
    }
    function Jn(e, t) {
      var n = (1 + Math.sqrt(5)) / 2,
        i = 1 / n;
      zn.call(
        this,
        [
          -1,
          -1,
          -1,
          -1,
          -1,
          1,
          -1,
          1,
          -1,
          -1,
          1,
          1,
          1,
          -1,
          -1,
          1,
          -1,
          1,
          1,
          1,
          -1,
          1,
          1,
          1,
          0,
          -i,
          -n,
          0,
          -i,
          n,
          0,
          i,
          -n,
          0,
          i,
          n,
          -i,
          -n,
          0,
          -i,
          n,
          0,
          i,
          -n,
          0,
          i,
          n,
          0,
          -n,
          0,
          -i,
          n,
          0,
          -i,
          -n,
          0,
          i,
          n,
          0,
          i,
        ],
        [
          3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4,
          8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1,
          18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2,
          3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8,
          11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1,
          12, 14, 1, 14, 5, 1, 5, 9,
        ],
        e,
        t
      ),
        (this.type = "DodecahedronBufferGeometry"),
        (this.parameters = { radius: e, detail: t });
    }
    function Qn(e, t, n, i, r, s) {
      dt.call(this),
        (this.type = "TubeGeometry"),
        (this.parameters = {
          path: e,
          tubularSegments: t,
          radius: n,
          radialSegments: i,
          closed: r,
        }),
        void 0 !== s &&
          console.warn("THREE.TubeGeometry: taper has been removed."),
        (e = new Zn(e, t, n, i, r)),
        (this.tangents = e.tangents),
        (this.normals = e.normals),
        (this.binormals = e.binormals),
        this.fromBufferGeometry(e),
        this.mergeVertices();
    }
    function Zn(e, t, i, r, s) {
      function o(n) {
        var s = e.getPointAt(n / t),
          o = a.normals[n];
        for (n = a.binormals[n], u = 0; r >= u; u++) {
          var l = (u / r) * Math.PI * 2,
            c = Math.sin(l),
            l = -Math.cos(l);
          (d.x = l * o.x + c * n.x),
            (d.y = l * o.y + c * n.y),
            (d.z = l * o.z + c * n.z),
            d.normalize(),
            m.push(d.x, d.y, d.z),
            (h.x = s.x + i * d.x),
            (h.y = s.y + i * d.y),
            (h.z = s.z + i * d.z),
            f.push(h.x, h.y, h.z);
        }
      }
      St.call(this),
        (this.type = "TubeBufferGeometry"),
        (this.parameters = {
          path: e,
          tubularSegments: t,
          radius: i,
          radialSegments: r,
          closed: s,
        }),
        (t = t || 64),
        (i = i || 1),
        (r = r || 8),
        (s = s || !1);
      var a = e.computeFrenetFrames(t, s);
      (this.tangents = a.tangents),
        (this.normals = a.normals),
        (this.binormals = a.binormals);
      var c,
        u,
        h = new l(),
        d = new l(),
        p = new n(),
        f = [],
        m = [],
        g = [],
        v = [];
      for (c = 0; t > c; c++) o(c);
      for (o(!1 === s ? t : 0), c = 0; t >= c; c++)
        for (u = 0; r >= u; u++) (p.x = c / t), (p.y = u / r), g.push(p.x, p.y);
      !(function () {
        for (u = 1; t >= u; u++)
          for (c = 1; r >= c; c++) {
            var e = (r + 1) * u + (c - 1),
              n = (r + 1) * u + c,
              i = (r + 1) * (u - 1) + c;
            v.push((r + 1) * (u - 1) + (c - 1), e, i), v.push(e, n, i);
          }
      })(),
        this.setIndex(v),
        this.addAttribute("position", new wt(f, 3)),
        this.addAttribute("normal", new wt(m, 3)),
        this.addAttribute("uv", new wt(g, 2));
    }
    function ei(e, t, n, i, r, s, o) {
      dt.call(this),
        (this.type = "TorusKnotGeometry"),
        (this.parameters = {
          radius: e,
          tube: t,
          tubularSegments: n,
          radialSegments: i,
          p: r,
          q: s,
        }),
        void 0 !== o &&
          console.warn(
            "THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."
          ),
        this.fromBufferGeometry(new ti(e, t, n, i, r, s)),
        this.mergeVertices();
    }
    function ti(e, t, n, i, r, s) {
      function o(e, t, n, i, r) {
        var s = Math.sin(e);
        (t = (n / t) * e),
          (n = Math.cos(t)),
          (r.x = i * (2 + n) * 0.5 * Math.cos(e)),
          (r.y = i * (2 + n) * s * 0.5),
          (r.z = i * Math.sin(t) * 0.5);
      }
      St.call(this),
        (this.type = "TorusKnotBufferGeometry"),
        (this.parameters = {
          radius: e,
          tube: t,
          tubularSegments: n,
          radialSegments: i,
          p: r,
          q: s,
        }),
        (e = e || 100),
        (t = t || 40),
        (n = Math.floor(n) || 64),
        (i = Math.floor(i) || 8),
        (r = r || 2),
        (s = s || 3);
      var a,
        c = [],
        u = [],
        h = [],
        d = [],
        p = new l(),
        f = new l(),
        m = new l(),
        g = new l(),
        v = new l(),
        _ = new l(),
        y = new l();
      for (a = 0; n >= a; ++a) {
        var b = (a / n) * r * Math.PI * 2;
        for (
          o(b, r, s, e, m),
            o(b + 0.01, r, s, e, g),
            _.subVectors(g, m),
            y.addVectors(g, m),
            v.crossVectors(_, y),
            y.crossVectors(v, _),
            v.normalize(),
            y.normalize(),
            b = 0;
          i >= b;
          ++b
        ) {
          var w = (b / i) * Math.PI * 2,
            x = -t * Math.cos(w),
            w = t * Math.sin(w);
          (p.x = m.x + (x * y.x + w * v.x)),
            (p.y = m.y + (x * y.y + w * v.y)),
            (p.z = m.z + (x * y.z + w * v.z)),
            u.push(p.x, p.y, p.z),
            f.subVectors(p, m).normalize(),
            h.push(f.x, f.y, f.z),
            d.push(a / n),
            d.push(b / i);
        }
      }
      for (b = 1; n >= b; b++)
        for (a = 1; i >= a; a++)
          (e = (i + 1) * b + (a - 1)),
            (t = (i + 1) * b + a),
            (r = (i + 1) * (b - 1) + a),
            c.push((i + 1) * (b - 1) + (a - 1), e, r),
            c.push(e, t, r);
      this.setIndex(c),
        this.addAttribute("position", new wt(u, 3)),
        this.addAttribute("normal", new wt(h, 3)),
        this.addAttribute("uv", new wt(d, 2));
    }
    function ni(e, t, n, i, r) {
      dt.call(this),
        (this.type = "TorusGeometry"),
        (this.parameters = {
          radius: e,
          tube: t,
          radialSegments: n,
          tubularSegments: i,
          arc: r,
        }),
        this.fromBufferGeometry(new ii(e, t, n, i, r)),
        this.mergeVertices();
    }
    function ii(e, t, n, i, r) {
      St.call(this),
        (this.type = "TorusBufferGeometry"),
        (this.parameters = {
          radius: e,
          tube: t,
          radialSegments: n,
          tubularSegments: i,
          arc: r,
        }),
        (e = e || 100),
        (t = t || 40),
        (n = Math.floor(n) || 8),
        (i = Math.floor(i) || 6),
        (r = r || 2 * Math.PI);
      var s,
        o,
        a = [],
        c = [],
        u = [],
        h = [],
        d = new l(),
        p = new l(),
        f = new l();
      for (s = 0; n >= s; s++)
        for (o = 0; i >= o; o++) {
          var m = (o / i) * r,
            g = (s / n) * Math.PI * 2;
          (p.x = (e + t * Math.cos(g)) * Math.cos(m)),
            (p.y = (e + t * Math.cos(g)) * Math.sin(m)),
            (p.z = t * Math.sin(g)),
            c.push(p.x, p.y, p.z),
            (d.x = e * Math.cos(m)),
            (d.y = e * Math.sin(m)),
            f.subVectors(p, d).normalize(),
            u.push(f.x, f.y, f.z),
            h.push(o / i),
            h.push(s / n);
        }
      for (s = 1; n >= s; s++)
        for (o = 1; i >= o; o++)
          (e = (i + 1) * (s - 1) + o - 1),
            (t = (i + 1) * (s - 1) + o),
            (r = (i + 1) * s + o),
            a.push((i + 1) * s + o - 1, e, r),
            a.push(e, t, r);
      this.setIndex(a),
        this.addAttribute("position", new wt(c, 3)),
        this.addAttribute("normal", new wt(u, 3)),
        this.addAttribute("uv", new wt(h, 2));
    }
    function ri(e, t) {
      dt.call(this),
        (this.type = "ExtrudeGeometry"),
        (this.parameters = { shapes: e, options: t }),
        this.fromBufferGeometry(new si(e, t)),
        this.mergeVertices();
    }
    function si(e, t) {
      "undefined" != typeof e &&
        (St.call(this),
        (this.type = "ExtrudeBufferGeometry"),
        (e = Array.isArray(e) ? e : [e]),
        this.addShapeList(e, t),
        this.computeVertexNormals());
    }
    function oi(e, t) {
      dt.call(this),
        (this.type = "TextGeometry"),
        (this.parameters = { text: e, parameters: t }),
        this.fromBufferGeometry(new ai(e, t)),
        this.mergeVertices();
    }
    function ai(e, t) {
      t = t || {};
      var n = t.font;
      return n && n.isFont
        ? ((e = n.generateShapes(e, t.size, t.curveSegments)),
          (t.amount = void 0 !== t.height ? t.height : 50),
          void 0 === t.bevelThickness && (t.bevelThickness = 10),
          void 0 === t.bevelSize && (t.bevelSize = 8),
          void 0 === t.bevelEnabled && (t.bevelEnabled = !1),
          si.call(this, e, t),
          void (this.type = "TextBufferGeometry"))
        : (console.error(
            "THREE.TextGeometry: font parameter is not an instance of THREE.Font."
          ),
          new dt());
    }
    function li(e, t, n, i, r, s, o) {
      dt.call(this),
        (this.type = "SphereGeometry"),
        (this.parameters = {
          radius: e,
          widthSegments: t,
          heightSegments: n,
          phiStart: i,
          phiLength: r,
          thetaStart: s,
          thetaLength: o,
        }),
        this.fromBufferGeometry(new ci(e, t, n, i, r, s, o)),
        this.mergeVertices();
    }
    function ci(e, t, n, i, r, s, o) {
      St.call(this),
        (this.type = "SphereBufferGeometry"),
        (this.parameters = {
          radius: e,
          widthSegments: t,
          heightSegments: n,
          phiStart: i,
          phiLength: r,
          thetaStart: s,
          thetaLength: o,
        }),
        (e = e || 50),
        (t = Math.max(3, Math.floor(t) || 8)),
        (n = Math.max(2, Math.floor(n) || 6)),
        (i = void 0 !== i ? i : 0),
        (r = void 0 !== r ? r : 2 * Math.PI),
        (s = void 0 !== s ? s : 0),
        (o = void 0 !== o ? o : Math.PI);
      var a,
        c,
        u = s + o,
        h = 0,
        d = [],
        p = new l(),
        f = new l(),
        m = [],
        g = [],
        v = [],
        _ = [];
      for (c = 0; n >= c; c++) {
        var y = [],
          b = c / n;
        for (a = 0; t >= a; a++) {
          var w = a / t;
          (p.x = -e * Math.cos(i + w * r) * Math.sin(s + b * o)),
            (p.y = e * Math.cos(s + b * o)),
            (p.z = e * Math.sin(i + w * r) * Math.sin(s + b * o)),
            g.push(p.x, p.y, p.z),
            f.set(p.x, p.y, p.z).normalize(),
            v.push(f.x, f.y, f.z),
            _.push(w, 1 - b),
            y.push(h++);
        }
        d.push(y);
      }
      for (c = 0; n > c; c++)
        for (a = 0; t > a; a++)
          (e = d[c][a + 1]),
            (i = d[c][a]),
            (r = d[c + 1][a]),
            (o = d[c + 1][a + 1]),
            (0 !== c || s > 0) && m.push(e, i, o),
            (c !== n - 1 || u < Math.PI) && m.push(i, r, o);
      this.setIndex(m),
        this.addAttribute("position", new wt(g, 3)),
        this.addAttribute("normal", new wt(v, 3)),
        this.addAttribute("uv", new wt(_, 2));
    }
    function ui(e, t, n, i, r, s) {
      dt.call(this),
        (this.type = "RingGeometry"),
        (this.parameters = {
          innerRadius: e,
          outerRadius: t,
          thetaSegments: n,
          phiSegments: i,
          thetaStart: r,
          thetaLength: s,
        }),
        this.fromBufferGeometry(new hi(e, t, n, i, r, s)),
        this.mergeVertices();
    }
    function hi(e, t, i, r, s, o) {
      St.call(this),
        (this.type = "RingBufferGeometry"),
        (this.parameters = {
          innerRadius: e,
          outerRadius: t,
          thetaSegments: i,
          phiSegments: r,
          thetaStart: s,
          thetaLength: o,
        }),
        (e = e || 20),
        (t = t || 50),
        (s = void 0 !== s ? s : 0),
        (o = void 0 !== o ? o : 2 * Math.PI),
        (i = void 0 !== i ? Math.max(3, i) : 8),
        (r = void 0 !== r ? Math.max(1, r) : 1);
      var a,
        c,
        u = [],
        h = [],
        d = [],
        p = [],
        f = e,
        m = (t - e) / r,
        g = new l(),
        v = new n();
      for (a = 0; r >= a; a++) {
        for (c = 0; i >= c; c++)
          (e = s + (c / i) * o),
            (g.x = f * Math.cos(e)),
            (g.y = f * Math.sin(e)),
            h.push(g.x, g.y, g.z),
            d.push(0, 0, 1),
            (v.x = (g.x / t + 1) / 2),
            (v.y = (g.y / t + 1) / 2),
            p.push(v.x, v.y);
        f += m;
      }
      for (a = 0; r > a; a++)
        for (t = a * (i + 1), c = 0; i > c; c++)
          (e = c + t),
            (s = e + i + 1),
            (o = e + i + 2),
            (f = e + 1),
            u.push(e, s, f),
            u.push(s, o, f);
      this.setIndex(u),
        this.addAttribute("position", new wt(h, 3)),
        this.addAttribute("normal", new wt(d, 3)),
        this.addAttribute("uv", new wt(p, 2));
    }
    function di(e, t, n, i) {
      dt.call(this),
        (this.type = "LatheGeometry"),
        (this.parameters = {
          points: e,
          segments: t,
          phiStart: n,
          phiLength: i,
        }),
        this.fromBufferGeometry(new pi(e, t, n, i)),
        this.mergeVertices();
    }
    function pi(e, t, i, r) {
      St.call(this),
        (this.type = "LatheBufferGeometry"),
        (this.parameters = {
          points: e,
          segments: t,
          phiStart: i,
          phiLength: r,
        }),
        (t = Math.floor(t) || 12),
        (i = i || 0),
        (r = r || 2 * Math.PI),
        (r = ks.clamp(r, 0, 2 * Math.PI));
      var s,
        o = [],
        a = [],
        c = [],
        u = 1 / t,
        h = new l(),
        d = new n();
      for (s = 0; t >= s; s++) {
        var p = i + s * u * r,
          f = Math.sin(p),
          m = Math.cos(p);
        for (p = 0; p <= e.length - 1; p++)
          (h.x = e[p].x * f),
            (h.y = e[p].y),
            (h.z = e[p].x * m),
            a.push(h.x, h.y, h.z),
            (d.x = s / t),
            (d.y = p / (e.length - 1)),
            c.push(d.x, d.y);
      }
      for (s = 0; t > s; s++)
        for (p = 0; p < e.length - 1; p++)
          (i = p + s * e.length),
            (u = i + e.length),
            (h = i + e.length + 1),
            (d = i + 1),
            o.push(i, u, d),
            o.push(u, h, d);
      if (
        (this.setIndex(o),
        this.addAttribute("position", new wt(a, 3)),
        this.addAttribute("uv", new wt(c, 2)),
        this.computeVertexNormals(),
        r === 2 * Math.PI)
      )
        for (
          r = this.attributes.normal.array,
            o = new l(),
            a = new l(),
            c = new l(),
            i = t * e.length * 3,
            p = s = 0;
          s < e.length;
          s++, p += 3
        )
          (o.x = r[p + 0]),
            (o.y = r[p + 1]),
            (o.z = r[p + 2]),
            (a.x = r[i + p + 0]),
            (a.y = r[i + p + 1]),
            (a.z = r[i + p + 2]),
            c.addVectors(o, a).normalize(),
            (r[p + 0] = r[i + p + 0] = c.x),
            (r[p + 1] = r[i + p + 1] = c.y),
            (r[p + 2] = r[i + p + 2] = c.z);
    }
    function fi(e, t) {
      dt.call(this),
        (this.type = "ShapeGeometry"),
        "object" == typeof t &&
          (console.warn(
            "THREE.ShapeGeometry: Options parameter has been removed."
          ),
          (t = t.curveSegments)),
        (this.parameters = { shapes: e, curveSegments: t }),
        this.fromBufferGeometry(new mi(e, t)),
        this.mergeVertices();
    }
    function mi(e, t) {
      function n(e) {
        var n,
          a = r.length / 3;
        e = e.extractPoints(t);
        var c = e.shape,
          u = e.holes;
        if (!1 === Gs.isClockWise(c))
          for (c = c.reverse(), e = 0, n = u.length; n > e; e++) {
            var h = u[e];
            !0 === Gs.isClockWise(h) && (u[e] = h.reverse());
          }
        var d = Gs.triangulateShape(c, u);
        for (e = 0, n = u.length; n > e; e++) (h = u[e]), (c = c.concat(h));
        for (e = 0, n = c.length; n > e; e++)
          (h = c[e]), r.push(h.x, h.y, 0), s.push(0, 0, 1), o.push(h.x, h.y);
        for (e = 0, n = d.length; n > e; e++)
          (c = d[e]), i.push(c[0] + a, c[1] + a, c[2] + a), (l += 3);
      }
      St.call(this),
        (this.type = "ShapeBufferGeometry"),
        (this.parameters = { shapes: e, curveSegments: t }),
        (t = t || 12);
      var i = [],
        r = [],
        s = [],
        o = [],
        a = 0,
        l = 0;
      if (!1 === Array.isArray(e)) n(e);
      else
        for (var c = 0; c < e.length; c++)
          n(e[c]), this.addGroup(a, l, c), (a += l), (l = 0);
      this.setIndex(i),
        this.addAttribute("position", new wt(r, 3)),
        this.addAttribute("normal", new wt(s, 3)),
        this.addAttribute("uv", new wt(o, 2));
    }
    function gi(e, t) {
      St.call(this),
        (this.type = "EdgesGeometry"),
        (this.parameters = { thresholdAngle: t });
      var n = [];
      t = Math.cos(ks.DEG2RAD * (void 0 !== t ? t : 1));
      var i = [0, 0],
        r = {},
        s = ["a", "b", "c"];
      if (e.isBufferGeometry) {
        var o = new dt();
        o.fromBufferGeometry(e);
      } else o = e.clone();
      o.mergeVertices(),
        o.computeFaceNormals(),
        (e = o.vertices),
        (o = o.faces);
      for (var a = 0, l = o.length; l > a; a++)
        for (var c = o[a], u = 0; 3 > u; u++) {
          var h = c[s[u]],
            d = c[s[(u + 1) % 3]];
          (i[0] = Math.min(h, d)),
            (i[1] = Math.max(h, d)),
            (h = i[0] + "," + i[1]),
            void 0 === r[h]
              ? (r[h] = { index1: i[0], index2: i[1], face1: a, face2: void 0 })
              : (r[h].face2 = a);
        }
      for (h in r)
        (i = r[h]),
          (void 0 === i.face2 ||
            o[i.face1].normal.dot(o[i.face2].normal) <= t) &&
            ((s = e[i.index1]),
            n.push(s.x, s.y, s.z),
            (s = e[i.index2]),
            n.push(s.x, s.y, s.z));
      this.addAttribute("position", new wt(n, 3));
    }
    function vi(e, t, n, i, r, s, o, a) {
      dt.call(this),
        (this.type = "CylinderGeometry"),
        (this.parameters = {
          radiusTop: e,
          radiusBottom: t,
          height: n,
          radialSegments: i,
          heightSegments: r,
          openEnded: s,
          thetaStart: o,
          thetaLength: a,
        }),
        this.fromBufferGeometry(new _i(e, t, n, i, r, s, o, a)),
        this.mergeVertices();
    }
    function _i(e, t, i, r, s, o, a, c) {
      function u(i) {
        var s,
          o = new n(),
          u = new l(),
          v = 0,
          b = !0 === i ? e : t,
          w = !0 === i ? 1 : -1,
          x = g;
        for (s = 1; r >= s; s++)
          p.push(0, _ * w, 0), f.push(0, w, 0), m.push(0.5, 0.5), g++;
        var C = g;
        for (s = 0; r >= s; s++) {
          var T = (s / r) * c + a,
            S = Math.cos(T),
            T = Math.sin(T);
          (u.x = b * T),
            (u.y = _ * w),
            (u.z = b * S),
            p.push(u.x, u.y, u.z),
            f.push(0, w, 0),
            (o.x = 0.5 * S + 0.5),
            (o.y = 0.5 * T * w + 0.5),
            m.push(o.x, o.y),
            g++;
        }
        for (s = 0; r > s; s++)
          (o = x + s),
            (u = C + s),
            !0 === i ? d.push(u, u + 1, o) : d.push(u + 1, u, o),
            (v += 3);
        h.addGroup(y, v, !0 === i ? 1 : 2), (y += v);
      }
      St.call(this),
        (this.type = "CylinderBufferGeometry"),
        (this.parameters = {
          radiusTop: e,
          radiusBottom: t,
          height: i,
          radialSegments: r,
          heightSegments: s,
          openEnded: o,
          thetaStart: a,
          thetaLength: c,
        });
      var h = this;
      (e = void 0 !== e ? e : 20),
        (t = void 0 !== t ? t : 20),
        (i = void 0 !== i ? i : 100),
        (r = Math.floor(r) || 8),
        (s = Math.floor(s) || 1),
        (o = void 0 !== o ? o : !1),
        (a = void 0 !== a ? a : 0),
        (c = void 0 !== c ? c : 2 * Math.PI);
      var d = [],
        p = [],
        f = [],
        m = [],
        g = 0,
        v = [],
        _ = i / 2,
        y = 0;
      !(function () {
        var n,
          o,
          u = new l(),
          b = new l(),
          w = 0,
          x = (t - e) / i;
        for (o = 0; s >= o; o++) {
          var C = [],
            T = o / s,
            S = T * (t - e) + e;
          for (n = 0; r >= n; n++) {
            var E = n / r,
              k = E * c + a,
              P = Math.sin(k),
              k = Math.cos(k);
            (b.x = S * P),
              (b.y = -T * i + _),
              (b.z = S * k),
              p.push(b.x, b.y, b.z),
              u.set(P, x, k).normalize(),
              f.push(u.x, u.y, u.z),
              m.push(E, 1 - T),
              C.push(g++);
          }
          v.push(C);
        }
        for (n = 0; r > n; n++)
          for (o = 0; s > o; o++)
            (u = v[o + 1][n]),
              (b = v[o + 1][n + 1]),
              (x = v[o][n + 1]),
              d.push(v[o][n], u, x),
              d.push(u, b, x),
              (w += 6);
        h.addGroup(y, w, 0), (y += w);
      })(),
        !1 === o && (e > 0 && u(!0), t > 0 && u(!1)),
        this.setIndex(d),
        this.addAttribute("position", new wt(p, 3)),
        this.addAttribute("normal", new wt(f, 3)),
        this.addAttribute("uv", new wt(m, 2));
    }
    function yi(e, t, n, i, r, s, o) {
      vi.call(this, 0, e, t, n, i, r, s, o),
        (this.type = "ConeGeometry"),
        (this.parameters = {
          radius: e,
          height: t,
          radialSegments: n,
          heightSegments: i,
          openEnded: r,
          thetaStart: s,
          thetaLength: o,
        });
    }
    function bi(e, t, n, i, r, s, o) {
      _i.call(this, 0, e, t, n, i, r, s, o),
        (this.type = "ConeBufferGeometry"),
        (this.parameters = {
          radius: e,
          height: t,
          radialSegments: n,
          heightSegments: i,
          openEnded: r,
          thetaStart: s,
          thetaLength: o,
        });
    }
    function wi(e, t, n, i) {
      dt.call(this),
        (this.type = "CircleGeometry"),
        (this.parameters = {
          radius: e,
          segments: t,
          thetaStart: n,
          thetaLength: i,
        }),
        this.fromBufferGeometry(new xi(e, t, n, i)),
        this.mergeVertices();
    }
    function xi(e, t, i, r) {
      St.call(this),
        (this.type = "CircleBufferGeometry"),
        (this.parameters = {
          radius: e,
          segments: t,
          thetaStart: i,
          thetaLength: r,
        }),
        (e = e || 50),
        (t = void 0 !== t ? Math.max(3, t) : 8),
        (i = void 0 !== i ? i : 0),
        (r = void 0 !== r ? r : 2 * Math.PI);
      var s,
        o = [],
        a = [],
        c = [],
        u = [],
        h = new l(),
        d = new n();
      a.push(0, 0, 0), c.push(0, 0, 1), u.push(0.5, 0.5);
      var p = 0;
      for (s = 3; t >= p; p++, s += 3) {
        var f = i + (p / t) * r;
        (h.x = e * Math.cos(f)),
          (h.y = e * Math.sin(f)),
          a.push(h.x, h.y, h.z),
          c.push(0, 0, 1),
          (d.x = (a[s] / e + 1) / 2),
          (d.y = (a[s + 1] / e + 1) / 2),
          u.push(d.x, d.y);
      }
      for (s = 1; t >= s; s++) o.push(s, s + 1, 0);
      this.setIndex(o),
        this.addAttribute("position", new wt(a, 3)),
        this.addAttribute("normal", new wt(c, 3)),
        this.addAttribute("uv", new wt(u, 2));
    }
    function Ci(e) {
      X.call(this),
        (this.type = "ShadowMaterial"),
        (this.color = new z(0)),
        (this.opacity = 1),
        (this.transparent = this.lights = !0),
        this.setValues(e);
    }
    function Ti(e) {
      Y.call(this, e), (this.type = "RawShaderMaterial");
    }
    function Si(e) {
      X.call(this),
        (this.defines = { STANDARD: "" }),
        (this.type = "MeshStandardMaterial"),
        (this.color = new z(16777215)),
        (this.metalness = this.roughness = 0.5),
        (this.lightMap = this.map = null),
        (this.lightMapIntensity = 1),
        (this.aoMap = null),
        (this.aoMapIntensity = 1),
        (this.emissive = new z(0)),
        (this.emissiveIntensity = 1),
        (this.bumpMap = this.emissiveMap = null),
        (this.bumpScale = 1),
        (this.normalMap = null),
        (this.normalScale = new n(1, 1)),
        (this.displacementMap = null),
        (this.displacementScale = 1),
        (this.displacementBias = 0),
        (this.envMap =
          this.alphaMap =
          this.metalnessMap =
          this.roughnessMap =
            null),
        (this.envMapIntensity = 1),
        (this.refractionRatio = 0.98),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.wireframeLinejoin = this.wireframeLinecap = "round"),
        (this.morphNormals = this.morphTargets = this.skinning = !1),
        this.setValues(e);
    }
    function Ei(e) {
      Si.call(this),
        (this.defines = { PHYSICAL: "" }),
        (this.type = "MeshPhysicalMaterial"),
        (this.reflectivity = 0.5),
        (this.clearCoatRoughness = this.clearCoat = 0),
        this.setValues(e);
    }
    function ki(e) {
      X.call(this),
        (this.type = "MeshPhongMaterial"),
        (this.color = new z(16777215)),
        (this.specular = new z(1118481)),
        (this.shininess = 30),
        (this.lightMap = this.map = null),
        (this.lightMapIntensity = 1),
        (this.aoMap = null),
        (this.aoMapIntensity = 1),
        (this.emissive = new z(0)),
        (this.emissiveIntensity = 1),
        (this.bumpMap = this.emissiveMap = null),
        (this.bumpScale = 1),
        (this.normalMap = null),
        (this.normalScale = new n(1, 1)),
        (this.displacementMap = null),
        (this.displacementScale = 1),
        (this.displacementBias = 0),
        (this.envMap = this.alphaMap = this.specularMap = null),
        (this.combine = 0),
        (this.reflectivity = 1),
        (this.refractionRatio = 0.98),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.wireframeLinejoin = this.wireframeLinecap = "round"),
        (this.morphNormals = this.morphTargets = this.skinning = !1),
        this.setValues(e);
    }
    function Pi(e) {
      ki.call(this),
        (this.defines = { TOON: "" }),
        (this.type = "MeshToonMaterial"),
        (this.gradientMap = null),
        this.setValues(e);
    }
    function Ii(e) {
      X.call(this),
        (this.type = "MeshNormalMaterial"),
        (this.bumpMap = null),
        (this.bumpScale = 1),
        (this.normalMap = null),
        (this.normalScale = new n(1, 1)),
        (this.displacementMap = null),
        (this.displacementScale = 1),
        (this.displacementBias = 0),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.morphNormals =
          this.morphTargets =
          this.skinning =
          this.lights =
          this.fog =
            !1),
        this.setValues(e);
    }
    function Ai(e) {
      X.call(this),
        (this.type = "MeshLambertMaterial"),
        (this.color = new z(16777215)),
        (this.lightMap = this.map = null),
        (this.lightMapIntensity = 1),
        (this.aoMap = null),
        (this.aoMapIntensity = 1),
        (this.emissive = new z(0)),
        (this.emissiveIntensity = 1),
        (this.envMap =
          this.alphaMap =
          this.specularMap =
          this.emissiveMap =
            null),
        (this.combine = 0),
        (this.reflectivity = 1),
        (this.refractionRatio = 0.98),
        (this.wireframe = !1),
        (this.wireframeLinewidth = 1),
        (this.wireframeLinejoin = this.wireframeLinecap = "round"),
        (this.morphNormals = this.morphTargets = this.skinning = !1),
        this.setValues(e);
    }
    function Oi(e) {
      In.call(this),
        (this.type = "LineDashedMaterial"),
        (this.scale = 1),
        (this.dashSize = 3),
        (this.gapSize = 1),
        this.setValues(e);
    }
    function Di(e, t, n) {
      var i = this,
        r = !1,
        s = 0,
        o = 0;
      (this.onStart = void 0),
        (this.onLoad = e),
        (this.onProgress = t),
        (this.onError = n),
        (this.itemStart = function (e) {
          o++, !1 === r && void 0 !== i.onStart && i.onStart(e, s, o), (r = !0);
        }),
        (this.itemEnd = function (e) {
          s++,
            void 0 !== i.onProgress && i.onProgress(e, s, o),
            s === o && ((r = !1), void 0 !== i.onLoad) && i.onLoad();
        }),
        (this.itemError = function (e) {
          void 0 !== i.onError && i.onError(e);
        });
    }
    function Mi(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Ri(e) {
      (this.manager = void 0 !== e ? e : Ys), (this._parser = null);
    }
    function Li(e) {
      (this.manager = void 0 !== e ? e : Ys), (this._parser = null);
    }
    function Ni(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Ui(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Bi(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Fi(e, t) {
      at.call(this),
        (this.type = "Light"),
        (this.color = new z(e)),
        (this.intensity = void 0 !== t ? t : 1),
        (this.receiveShadow = void 0);
    }
    function ji(e, t, n) {
      Fi.call(this, e, n),
        (this.type = "HemisphereLight"),
        (this.castShadow = void 0),
        this.position.copy(at.DefaultUp),
        this.updateMatrix(),
        (this.groundColor = new z(t));
    }
    function Hi(e) {
      (this.camera = e),
        (this.bias = 0),
        (this.radius = 1),
        (this.mapSize = new n(512, 512)),
        (this.map = null),
        (this.matrix = new c());
    }
    function $i() {
      Hi.call(this, new ut(50, 1, 0.5, 500));
    }
    function zi(e, t, n, i, r, s) {
      Fi.call(this, e, t),
        (this.type = "SpotLight"),
        this.position.copy(at.DefaultUp),
        this.updateMatrix(),
        (this.target = new at()),
        Object.defineProperty(this, "power", {
          get: function () {
            return this.intensity * Math.PI;
          },
          set: function (e) {
            this.intensity = e / Math.PI;
          },
        }),
        (this.distance = void 0 !== n ? n : 0),
        (this.angle = void 0 !== i ? i : Math.PI / 3),
        (this.penumbra = void 0 !== r ? r : 0),
        (this.decay = void 0 !== s ? s : 1),
        (this.shadow = new $i());
    }
    function Wi(e, t, n, i) {
      Fi.call(this, e, t),
        (this.type = "PointLight"),
        Object.defineProperty(this, "power", {
          get: function () {
            return 4 * this.intensity * Math.PI;
          },
          set: function (e) {
            this.intensity = e / (4 * Math.PI);
          },
        }),
        (this.distance = void 0 !== n ? n : 0),
        (this.decay = void 0 !== i ? i : 1),
        (this.shadow = new Hi(new ut(90, 1, 0.5, 500)));
    }
    function Gi() {
      Hi.call(this, new ct(-5, 5, 5, -5, 0.5, 500));
    }
    function Vi(e, t) {
      Fi.call(this, e, t),
        (this.type = "DirectionalLight"),
        this.position.copy(at.DefaultUp),
        this.updateMatrix(),
        (this.target = new at()),
        (this.shadow = new Gi());
    }
    function qi(e, t) {
      Fi.call(this, e, t),
        (this.type = "AmbientLight"),
        (this.castShadow = void 0);
    }
    function Xi(e, t, n, i) {
      Fi.call(this, e, t),
        (this.type = "RectAreaLight"),
        this.position.set(0, 1, 0),
        this.updateMatrix(),
        (this.width = void 0 !== n ? n : 10),
        (this.height = void 0 !== i ? i : 10);
    }
    function Yi(e, t, n, i) {
      (this.parameterPositions = e),
        (this._cachedIndex = 0),
        (this.resultBuffer = void 0 !== i ? i : new t.constructor(n)),
        (this.sampleValues = t),
        (this.valueSize = n);
    }
    function Ki(e, t, n, i) {
      Yi.call(this, e, t, n, i),
        (this._offsetNext =
          this._weightNext =
          this._offsetPrev =
          this._weightPrev =
            -0);
    }
    function Ji(e, t, n, i) {
      Yi.call(this, e, t, n, i);
    }
    function Qi(e, t, n, i) {
      Yi.call(this, e, t, n, i);
    }
    function Zi(e, t, n, i) {
      if (void 0 === e) throw Error("track name is undefined");
      if (void 0 === t || 0 === t.length)
        throw Error("no keyframes in track named " + e);
      (this.name = e),
        (this.times = Ks.convertArray(t, this.TimeBufferType)),
        (this.values = Ks.convertArray(n, this.ValueBufferType)),
        this.setInterpolation(i || this.DefaultInterpolation),
        this.validate(),
        this.optimize();
    }
    function er(e, t, n, i) {
      Zi.call(this, e, t, n, i);
    }
    function tr(e, t, n, i) {
      Yi.call(this, e, t, n, i);
    }
    function nr(e, t, n, i) {
      Zi.call(this, e, t, n, i);
    }
    function ir(e, t, n, i) {
      Zi.call(this, e, t, n, i);
    }
    function rr(e, t, n, i) {
      Zi.call(this, e, t, n, i);
    }
    function sr(e, t, n) {
      Zi.call(this, e, t, n);
    }
    function or(e, t, n, i) {
      Zi.call(this, e, t, n, i);
    }
    function ar() {
      Zi.apply(this, arguments);
    }
    function lr(e, t, n) {
      (this.name = e),
        (this.tracks = n),
        (this.duration = void 0 !== t ? t : -1),
        (this.uuid = ks.generateUUID()),
        0 > this.duration && this.resetDuration(),
        this.optimize();
    }
    function cr(e) {
      (this.manager = void 0 !== e ? e : Ys), (this.textures = {});
    }
    function ur(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function hr() {
      (this.onLoadStart = function () {}),
        (this.onLoadProgress = function () {}),
        (this.onLoadComplete = function () {});
    }
    function dr(e) {
      "boolean" == typeof e &&
        (console.warn(
          "THREE.JSONLoader: showStatus parameter has been removed from constructor."
        ),
        (e = void 0)),
        (this.manager = void 0 !== e ? e : Ys),
        (this.withCredentials = !1);
    }
    function pr(e) {
      (this.manager = void 0 !== e ? e : Ys), (this.texturePath = "");
    }
    function fr(e, t, n, i, r) {
      (t = 0.5 * (i - t)), (r = 0.5 * (r - n));
      var s = e * e;
      return (
        (2 * n - 2 * i + t + r) * e * s +
        (-3 * n + 3 * i - 2 * t - r) * s +
        t * e +
        n
      );
    }
    function mr(e, t, n, i) {
      var r = 1 - e;
      return r * r * t + 2 * (1 - e) * e * n + e * e * i;
    }
    function gr(e, t, n, i, r) {
      var s = 1 - e,
        o = 1 - e;
      return (
        s * s * s * t +
        3 * o * o * e * n +
        3 * (1 - e) * e * e * i +
        e * e * e * r
      );
    }
    function vr() {
      this.arcLengthDivisions = 200;
    }
    function _r(e, t) {
      (this.arcLengthDivisions = 200), (this.v1 = e), (this.v2 = t);
    }
    function yr() {
      (this.arcLengthDivisions = 200),
        (this.curves = []),
        (this.autoClose = !1);
    }
    function br(e, t, n, i, r, s, o, a) {
      (this.arcLengthDivisions = 200),
        (this.aX = e),
        (this.aY = t),
        (this.xRadius = n),
        (this.yRadius = i),
        (this.aStartAngle = r),
        (this.aEndAngle = s),
        (this.aClockwise = o),
        (this.aRotation = a || 0);
    }
    function wr(e) {
      (this.arcLengthDivisions = 200), (this.points = void 0 === e ? [] : e);
    }
    function xr(e, t, n, i) {
      (this.arcLengthDivisions = 200),
        (this.v0 = e),
        (this.v1 = t),
        (this.v2 = n),
        (this.v3 = i);
    }
    function Cr(e, t, n) {
      (this.arcLengthDivisions = 200),
        (this.v0 = e),
        (this.v1 = t),
        (this.v2 = n);
    }
    function Tr(e) {
      yr.call(this), (this.currentPoint = new n()), e && this.fromPoints(e);
    }
    function Sr() {
      Tr.apply(this, arguments), (this.holes = []);
    }
    function Er() {
      (this.subPaths = []), (this.currentPath = null);
    }
    function kr(e) {
      this.data = e;
    }
    function Pr(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Ir(e) {
      this.manager = void 0 !== e ? e : Ys;
    }
    function Ar() {
      (this.type = "StereoCamera"),
        (this.aspect = 1),
        (this.eyeSep = 0.064),
        (this.cameraL = new ut()),
        this.cameraL.layers.enable(1),
        (this.cameraL.matrixAutoUpdate = !1),
        (this.cameraR = new ut()),
        this.cameraR.layers.enable(2),
        (this.cameraR.matrixAutoUpdate = !1);
    }
    function Or(e, t, n) {
      at.call(this), (this.type = "CubeCamera");
      var i = new ut(90, 1, e, t);
      i.up.set(0, -1, 0), i.lookAt(new l(1, 0, 0)), this.add(i);
      var r = new ut(90, 1, e, t);
      r.up.set(0, -1, 0), r.lookAt(new l(-1, 0, 0)), this.add(r);
      var s = new ut(90, 1, e, t);
      s.up.set(0, 0, 1), s.lookAt(new l(0, 1, 0)), this.add(s);
      var a = new ut(90, 1, e, t);
      a.up.set(0, 0, -1), a.lookAt(new l(0, -1, 0)), this.add(a);
      var c = new ut(90, 1, e, t);
      c.up.set(0, -1, 0), c.lookAt(new l(0, 0, 1)), this.add(c);
      var u = new ut(90, 1, e, t);
      u.up.set(0, -1, 0),
        u.lookAt(new l(0, 0, -1)),
        this.add(u),
        (this.renderTarget = new o(n, n, {
          format: 1022,
          magFilter: 1006,
          minFilter: 1006,
        })),
        (this.renderTarget.texture.name = "CubeCamera"),
        (this.update = function (e, t) {
          null === this.parent && this.updateMatrixWorld();
          var n = this.renderTarget,
            o = n.texture.generateMipmaps;
          (n.texture.generateMipmaps = !1),
            (n.activeCubeFace = 0),
            e.render(t, i, n),
            (n.activeCubeFace = 1),
            e.render(t, r, n),
            (n.activeCubeFace = 2),
            e.render(t, s, n),
            (n.activeCubeFace = 3),
            e.render(t, a, n),
            (n.activeCubeFace = 4),
            e.render(t, c, n),
            (n.texture.generateMipmaps = o),
            (n.activeCubeFace = 5),
            e.render(t, u, n),
            e.setRenderTarget(null);
        }),
        (this.clear = function (e, t, n, i) {
          for (var r = this.renderTarget, s = 0; 6 > s; s++)
            (r.activeCubeFace = s), e.setRenderTarget(r), e.clear(t, n, i);
          e.setRenderTarget(null);
        });
    }
    function Dr() {
      at.call(this),
        (this.type = "AudioListener"),
        (this.context = ro.getContext()),
        (this.gain = this.context.createGain()),
        this.gain.connect(this.context.destination),
        (this.filter = null);
    }
    function Mr(e) {
      at.call(this),
        (this.type = "Audio"),
        (this.context = e.context),
        (this.gain = this.context.createGain()),
        this.gain.connect(e.getInput()),
        (this.autoplay = !1),
        (this.buffer = null),
        (this.loop = !1),
        (this.startTime = 0),
        (this.playbackRate = 1),
        (this.isPlaying = !1),
        (this.hasPlaybackControl = !0),
        (this.sourceType = "empty"),
        (this.filters = []);
    }
    function Rr(e) {
      Mr.call(this, e),
        (this.panner = this.context.createPanner()),
        this.panner.connect(this.gain);
    }
    function Lr(e, t) {
      (this.analyser = e.context.createAnalyser()),
        (this.analyser.fftSize = void 0 !== t ? t : 2048),
        (this.data = new Uint8Array(this.analyser.frequencyBinCount)),
        e.getOutput().connect(this.analyser);
    }
    function Nr(e, t, n) {
      switch (
        ((this.binding = e), (this.valueSize = n), (e = Float64Array), t)
      ) {
        case "quaternion":
          t = this._slerp;
          break;
        case "string":
        case "bool":
          (e = Array), (t = this._select);
          break;
        default:
          t = this._lerp;
      }
      (this.buffer = new e(4 * n)),
        (this._mixBufferRegion = t),
        (this.referenceCount = this.useCount = this.cumulativeWeight = 0);
    }
    function Ur(e, t, n) {
      (n = n || Br.parseTrackName(t)),
        (this._targetGroup = e),
        (this._bindings = e.subscribe_(t, n));
    }
    function Br(e, t, n) {
      (this.path = t),
        (this.parsedPath = n || Br.parseTrackName(t)),
        (this.node = Br.findNode(e, this.parsedPath.nodeName) || e),
        (this.rootNode = e);
    }
    function Fr() {
      (this.uuid = ks.generateUUID()),
        (this._objects = Array.prototype.slice.call(arguments)),
        (this.nCachedObjects_ = 0);
      var e = {};
      this._indicesByUUID = e;
      for (var t = 0, n = arguments.length; t !== n; ++t)
        e[arguments[t].uuid] = t;
      (this._paths = []),
        (this._parsedPaths = []),
        (this._bindings = []),
        (this._bindingsIndicesByPath = {});
      var i = this;
      this.stats = {
        objects: {
          get total() {
            return i._objects.length;
          },
          get inUse() {
            return this.total - i.nCachedObjects_;
          },
        },
        get bindingsPerObject() {
          return i._bindings.length;
        },
      };
    }
    function jr(e, t, n) {
      (this._mixer = e),
        (this._clip = t),
        (this._localRoot = n || null),
        (e = t.tracks),
        (t = e.length),
        (n = Array(t));
      for (
        var i = { endingStart: 2400, endingEnd: 2400 }, r = 0;
        r !== t;
        ++r
      ) {
        var s = e[r].createInterpolant(null);
        (n[r] = s), (s.settings = i);
      }
      (this._interpolantSettings = i),
        (this._interpolants = n),
        (this._propertyBindings = Array(t)),
        (this._weightInterpolant =
          this._timeScaleInterpolant =
          this._byClipCacheIndex =
          this._cacheIndex =
            null),
        (this.loop = 2201),
        (this._loopCount = -1),
        (this._startTime = null),
        (this.time = 0),
        (this._effectiveWeight =
          this.weight =
          this._effectiveTimeScale =
          this.timeScale =
            1),
        (this.repetitions = 1 / 0),
        (this.paused = !1),
        (this.enabled = !0),
        (this.clampWhenFinished = !1),
        (this.zeroSlopeAtEnd = this.zeroSlopeAtStart = !0);
    }
    function Hr(e) {
      (this._root = e),
        this._initMemoryManager(),
        (this.time = this._accuIndex = 0),
        (this.timeScale = 1);
    }
    function $r(e, t) {
      "string" == typeof e &&
        (console.warn("THREE.Uniform: Type parameter is no longer needed."),
        (e = t)),
        (this.value = e);
    }
    function zr() {
      St.call(this),
        (this.type = "InstancedBufferGeometry"),
        (this.maxInstancedCount = void 0);
    }
    function Wr(e, t, n, i) {
      (this.uuid = ks.generateUUID()),
        (this.data = e),
        (this.itemSize = t),
        (this.offset = n),
        (this.normalized = !0 === i);
    }
    function Gr(e, t) {
      (this.uuid = ks.generateUUID()),
        (this.array = e),
        (this.stride = t),
        (this.count = void 0 !== e ? e.length / t : 0),
        (this.dynamic = !1),
        (this.updateRange = { offset: 0, count: -1 }),
        (this.onUploadCallback = function () {}),
        (this.version = 0);
    }
    function Vr(e, t, n) {
      Gr.call(this, e, t), (this.meshPerAttribute = n || 1);
    }
    function qr(e, t, n) {
      pt.call(this, e, t), (this.meshPerAttribute = n || 1);
    }
    function Xr(e, t, n, i) {
      (this.ray = new Ot(e, t)),
        (this.near = n || 0),
        (this.far = i || 1 / 0),
        (this.params = {
          Mesh: {},
          Line: {},
          LOD: {},
          Points: { threshold: 1 },
          Sprite: {},
        }),
        Object.defineProperties(this.params, {
          PointCloud: {
            get: function () {
              return (
                console.warn(
                  "THREE.Raycaster: params.PointCloud has been renamed to params.Points."
                ),
                this.Points
              );
            },
          },
        });
    }
    function Yr(e, t) {
      return e.distance - t.distance;
    }
    function Kr(e, t, n, i) {
      if (!1 !== e.visible && (e.raycast(t, n), !0 === i)) {
        (e = e.children), (i = 0);
        for (var r = e.length; r > i; i++) Kr(e[i], t, n, !0);
      }
    }
    function Jr(e) {
      (this.autoStart = void 0 !== e ? e : !0),
        (this.elapsedTime = this.oldTime = this.startTime = 0),
        (this.running = !1);
    }
    function Qr(e, t, n) {
      return (
        (this.radius = void 0 !== e ? e : 1),
        (this.phi = void 0 !== t ? t : 0),
        (this.theta = void 0 !== n ? n : 0),
        this
      );
    }
    function Zr(e, t, n) {
      return (
        (this.radius = void 0 !== e ? e : 1),
        (this.theta = void 0 !== t ? t : 0),
        (this.y = void 0 !== n ? n : 0),
        this
      );
    }
    function es(e) {
      at.call(this), (this.material = e), (this.render = function () {});
    }
    function ts(e, t, n, i) {
      (this.object = e),
        (this.size = void 0 !== t ? t : 1),
        (e = void 0 !== n ? n : 16711680),
        (i = void 0 !== i ? i : 1),
        (t = 0),
        (n = this.object.geometry) && n.isGeometry
          ? (t = 3 * n.faces.length)
          : n && n.isBufferGeometry && (t = n.attributes.normal.count),
        (n = new St()),
        (t = new wt(6 * t, 3)),
        n.addAttribute("position", t),
        On.call(this, n, new In({ color: e, linewidth: i })),
        (this.matrixAutoUpdate = !1),
        this.update();
    }
    function ns(e, t) {
      at.call(this),
        (this.light = e),
        this.light.updateMatrixWorld(),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        (this.color = t),
        (e = new St()),
        (t = [
          0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1,
          1, 0, 0, 0, 0, -1, 1,
        ]);
      for (var n = 0, i = 1; 32 > n; n++, i++) {
        var r = (n / 32) * Math.PI * 2,
          s = (i / 32) * Math.PI * 2;
        t.push(Math.cos(r), Math.sin(r), 1, Math.cos(s), Math.sin(s), 1);
      }
      e.addAttribute("position", new wt(t, 3)),
        (t = new In({ fog: !1 })),
        (this.cone = new On(e, t)),
        this.add(this.cone),
        this.update();
    }
    function is(e) {
      var t = [];
      e && e.isBone && t.push(e);
      for (var n = 0; n < e.children.length; n++)
        t.push.apply(t, is(e.children[n]));
      return t;
    }
    function rs(e) {
      for (
        var t = is(e),
          n = new St(),
          i = [],
          r = [],
          s = new z(0, 0, 1),
          o = new z(0, 1, 0),
          a = 0;
        a < t.length;
        a++
      ) {
        var l = t[a];
        l.parent &&
          l.parent.isBone &&
          (i.push(0, 0, 0),
          i.push(0, 0, 0),
          r.push(s.r, s.g, s.b),
          r.push(o.r, o.g, o.b));
      }
      n.addAttribute("position", new wt(i, 3)),
        n.addAttribute("color", new wt(r, 3)),
        (i = new In({
          vertexColors: 2,
          depthTest: !1,
          depthWrite: !1,
          transparent: !0,
        })),
        On.call(this, n, i),
        (this.root = e),
        (this.bones = t),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        this.onBeforeRender();
    }
    function ss(e, t, n) {
      (this.light = e),
        this.light.updateMatrixWorld(),
        (this.color = n),
        (e = new ci(t, 4, 2)),
        (t = new At({ wireframe: !0, fog: !1 })),
        Rt.call(this, e, t),
        (this.matrix = this.light.matrixWorld),
        (this.matrixAutoUpdate = !1),
        this.update();
    }
    function os(e, t) {
      at.call(this),
        (this.light = e),
        this.light.updateMatrixWorld(),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        (this.color = t),
        (e = new In({ fog: !1 })),
        (t = new St()),
        t.addAttribute("position", new pt(new Float32Array(15), 3)),
        (this.line = new An(t, e)),
        this.add(this.line),
        this.update();
    }
    function as(e, t, n) {
      at.call(this),
        (this.light = e),
        this.light.updateMatrixWorld(),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        (this.color = n),
        (e = new qn(t)),
        e.rotateY(0.5 * Math.PI),
        (this.material = new At({ wireframe: !0, fog: !1 })),
        void 0 === this.color && (this.material.vertexColors = 2),
        (t = e.getAttribute("position")),
        (t = new Float32Array(3 * t.count)),
        e.addAttribute("color", new pt(t, 3)),
        this.add(new Rt(e, this.material)),
        this.update();
    }
    function ls(e, t, n, i) {
      (e = e || 10),
        (t = t || 10),
        (n = new z(void 0 !== n ? n : 4473924)),
        (i = new z(void 0 !== i ? i : 8947848));
      var r = t / 2,
        s = e / t,
        o = e / 2;
      e = [];
      for (var a = [], l = 0, c = 0, u = -o; t >= l; l++, u += s) {
        e.push(-o, 0, u, o, 0, u), e.push(u, 0, -o, u, 0, o);
        var h = l === r ? n : i;
        h.toArray(a, c),
          (c += 3),
          h.toArray(a, c),
          (c += 3),
          h.toArray(a, c),
          (c += 3),
          h.toArray(a, c),
          (c += 3);
      }
      (t = new St()),
        t.addAttribute("position", new wt(e, 3)),
        t.addAttribute("color", new wt(a, 3)),
        (n = new In({ vertexColors: 2 })),
        On.call(this, t, n);
    }
    function cs(e, t, n, i, r, s) {
      (e = e || 10),
        (t = t || 16),
        (n = n || 8),
        (i = i || 64),
        (r = new z(void 0 !== r ? r : 4473924)),
        (s = new z(void 0 !== s ? s : 8947848));
      var o,
        a = [],
        l = [];
      for (o = 0; t >= o; o++) {
        var c = (o / t) * 2 * Math.PI,
          u = Math.sin(c) * e;
        (c = Math.cos(c) * e), a.push(0, 0, 0), a.push(u, 0, c);
        var h = 1 & o ? r : s;
        l.push(h.r, h.g, h.b), l.push(h.r, h.g, h.b);
      }
      for (o = 0; n >= o; o++) {
        h = 1 & o ? r : s;
        var d = e - (e / n) * o;
        for (t = 0; i > t; t++)
          (c = (t / i) * 2 * Math.PI),
            (u = Math.sin(c) * d),
            (c = Math.cos(c) * d),
            a.push(u, 0, c),
            l.push(h.r, h.g, h.b),
            (c = ((t + 1) / i) * 2 * Math.PI),
            (u = Math.sin(c) * d),
            (c = Math.cos(c) * d),
            a.push(u, 0, c),
            l.push(h.r, h.g, h.b);
      }
      (e = new St()),
        e.addAttribute("position", new wt(a, 3)),
        e.addAttribute("color", new wt(l, 3)),
        (a = new In({ vertexColors: 2 })),
        On.call(this, e, a);
    }
    function us(e, t, n, i) {
      (this.object = e),
        (this.size = void 0 !== t ? t : 1),
        (e = void 0 !== n ? n : 16776960),
        (i = void 0 !== i ? i : 1),
        (t = 0),
        (n = this.object.geometry) && n.isGeometry
          ? (t = n.faces.length)
          : console.warn(
              "THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."
            ),
        (n = new St()),
        (t = new wt(6 * t, 3)),
        n.addAttribute("position", t),
        On.call(this, n, new In({ color: e, linewidth: i })),
        (this.matrixAutoUpdate = !1),
        this.update();
    }
    function hs(e, t, n) {
      at.call(this),
        (this.light = e),
        this.light.updateMatrixWorld(),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        (this.color = n),
        void 0 === t && (t = 1),
        (e = new St()),
        e.addAttribute(
          "position",
          new wt([-t, t, 0, t, t, 0, t, -t, 0, -t, -t, 0, -t, t, 0], 3)
        ),
        (t = new In({ fog: !1 })),
        (this.lightPlane = new An(e, t)),
        this.add(this.lightPlane),
        (e = new St()),
        e.addAttribute("position", new wt([0, 0, 0, 0, 0, 1], 3)),
        (this.targetLine = new An(e, t)),
        this.add(this.targetLine),
        this.update();
    }
    function ds(e) {
      function t(e, t, i) {
        n(e, i), n(t, i);
      }
      function n(e, t) {
        s.push(0, 0, 0),
          o.push(t.r, t.g, t.b),
          void 0 === a[e] && (a[e] = []),
          a[e].push(s.length / 3 - 1);
      }
      var i = new St(),
        r = new In({ color: 16777215, vertexColors: 1 }),
        s = [],
        o = [],
        a = {},
        l = new z(16755200),
        c = new z(16711680),
        u = new z(43775),
        h = new z(16777215),
        d = new z(3355443);
      t("n1", "n2", l),
        t("n2", "n4", l),
        t("n4", "n3", l),
        t("n3", "n1", l),
        t("f1", "f2", l),
        t("f2", "f4", l),
        t("f4", "f3", l),
        t("f3", "f1", l),
        t("n1", "f1", l),
        t("n2", "f2", l),
        t("n3", "f3", l),
        t("n4", "f4", l),
        t("p", "n1", c),
        t("p", "n2", c),
        t("p", "n3", c),
        t("p", "n4", c),
        t("u1", "u2", u),
        t("u2", "u3", u),
        t("u3", "u1", u),
        t("c", "t", h),
        t("p", "c", d),
        t("cn1", "cn2", d),
        t("cn3", "cn4", d),
        t("cf1", "cf2", d),
        t("cf3", "cf4", d),
        i.addAttribute("position", new wt(s, 3)),
        i.addAttribute("color", new wt(o, 3)),
        On.call(this, i, r),
        (this.camera = e),
        this.camera.updateProjectionMatrix &&
          this.camera.updateProjectionMatrix(),
        (this.matrix = e.matrixWorld),
        (this.matrixAutoUpdate = !1),
        (this.pointMap = a),
        this.update();
    }
    function ps(e, t) {
      (this.object = e),
        void 0 === t && (t = 16776960),
        (e = new Uint16Array([
          0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3,
          7,
        ]));
      var n = new Float32Array(24),
        i = new St();
      i.setIndex(new pt(e, 1)),
        i.addAttribute("position", new pt(n, 3)),
        On.call(this, i, new In({ color: t })),
        (this.matrixAutoUpdate = !1),
        this.update();
    }
    function fs(e, t) {
      (this.type = "Box3Helper"),
        (this.box = e),
        (e = void 0 !== t ? t : 16776960),
        (t = new Uint16Array([
          0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3,
          7,
        ]));
      var n = new St();
      n.setIndex(new pt(t, 1)),
        n.addAttribute(
          "position",
          new wt(
            [
              1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1,
              -1, -1, 1, -1, -1,
            ],
            3
          )
        ),
        On.call(this, n, new In({ color: e })),
        this.geometry.computeBoundingSphere(),
        this.onBeforeRender();
    }
    function ms(e, t, n) {
      (this.type = "PlaneHelper"),
        (this.plane = e),
        (this.size = void 0 === t ? 1 : t),
        (e = void 0 !== n ? n : 16776960),
        (t = new St()),
        t.addAttribute(
          "position",
          new wt(
            [
              1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1,
              -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0,
            ],
            3
          )
        ),
        t.computeBoundingSphere(),
        An.call(this, t, new In({ color: e })),
        (t = new St()),
        t.addAttribute(
          "position",
          new wt(
            [1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1],
            3
          )
        ),
        t.computeBoundingSphere(),
        this.add(
          new Rt(
            t,
            new At({ color: e, opacity: 0.2, transparent: !0, depthWrite: !1 })
          )
        ),
        this.onBeforeRender();
    }
    function gs(e, t, n, i, r, s) {
      at.call(this),
        void 0 === i && (i = 16776960),
        void 0 === n && (n = 1),
        void 0 === r && (r = 0.2 * n),
        void 0 === s && (s = 0.2 * r),
        void 0 === so &&
          ((so = new St()),
          so.addAttribute("position", new wt([0, 0, 0, 0, 1, 0], 3)),
          (oo = new _i(0, 0.5, 1, 5, 1)),
          oo.translate(0, -0.5, 0)),
        this.position.copy(t),
        (this.line = new An(so, new In({ color: i }))),
        (this.line.matrixAutoUpdate = !1),
        this.add(this.line),
        (this.cone = new Rt(oo, new At({ color: i }))),
        (this.cone.matrixAutoUpdate = !1),
        this.add(this.cone),
        this.setDirection(e),
        this.setLength(n, r, s);
    }
    function vs(e) {
      e = e || 1;
      var t = [0, 0, 0, e, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e];
      (e = new St()),
        e.addAttribute("position", new wt(t, 3)),
        e.addAttribute(
          "color",
          new wt(
            [1, 0, 0, 1, 0.6, 0, 0, 1, 0, 0.6, 1, 0, 0, 0, 1, 0, 0.6, 1],
            3
          )
        ),
        (t = new In({ vertexColors: 2 })),
        On.call(this, e, t);
    }
    function _s() {
      var e = 0,
        t = 0,
        n = 0,
        i = 0;
      return {
        initCatmullRom: function (r, s, o, a, l) {
          (r = l * (o - r)),
            (a = l * (a - s)),
            (e = s),
            (t = r),
            (n = -3 * s + 3 * o - 2 * r - a),
            (i = 2 * s - 2 * o + r + a);
        },
        initNonuniformCatmullRom: function (r, s, o, a, l, c, u) {
          (r = ((s - r) / l - (o - r) / (l + c) + (o - s) / c) * c),
            (a = ((o - s) / c - (a - s) / (c + u) + (a - o) / u) * c),
            (e = s),
            (t = r),
            (n = -3 * s + 3 * o - 2 * r - a),
            (i = 2 * s - 2 * o + r + a);
        },
        calc: function (r) {
          var s = r * r;
          return e + t * r + n * s + i * s * r;
        },
      };
    }
    function ys(e) {
      (this.arcLengthDivisions = 200),
        2 > e.length &&
          console.warn(
            "THREE.CatmullRomCurve3: Points array needs at least two entries."
          ),
        (this.points = e || []),
        (this.closed = !1);
    }
    function bs(e, t, n, i) {
      (this.arcLengthDivisions = 200),
        (this.v0 = e),
        (this.v1 = t),
        (this.v2 = n),
        (this.v3 = i);
    }
    function ws(e, t, n) {
      (this.arcLengthDivisions = 200),
        (this.v0 = e),
        (this.v1 = t),
        (this.v2 = n);
    }
    function xs(e, t) {
      (this.arcLengthDivisions = 200), (this.v1 = e), (this.v2 = t);
    }
    function Cs(e, t, n, i, r, s) {
      br.call(this, e, t, n, n, i, r, s);
    }
    function Ts(e) {
      console.warn(
        "THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."
      ),
        ys.call(this, e),
        (this.type = "catmullrom"),
        (this.closed = !0);
    }
    function Ss(e) {
      console.warn(
        "THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."
      ),
        ys.call(this, e),
        (this.type = "catmullrom");
    }
    function Es(e) {
      console.warn(
        "THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."
      ),
        ys.call(this, e),
        (this.type = "catmullrom");
    }
    void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)),
      void 0 === Number.isInteger &&
        (Number.isInteger = function (e) {
          return "number" == typeof e && isFinite(e) && Math.floor(e) === e;
        }),
      void 0 === Math.sign &&
        (Math.sign = function (e) {
          return 0 > e ? -1 : e > 0 ? 1 : +e;
        }),
      void 0 === Function.prototype.name &&
        Object.defineProperty(Function.prototype, "name", {
          get: function () {
            return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1];
          },
        }),
      void 0 === Object.assign &&
        (function () {
          Object.assign = function (e) {
            if (void 0 === e || null === e)
              throw new TypeError("Cannot convert undefined or null to object");
            for (var t = Object(e), n = 1; n < arguments.length; n++) {
              var i = arguments[n];
              if (void 0 !== i && null !== i)
                for (var r in i)
                  Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r]);
            }
            return t;
          };
        })(),
      Object.assign(t.prototype, {
        addEventListener: function (e, t) {
          void 0 === this._listeners && (this._listeners = {});
          var n = this._listeners;
          void 0 === n[e] && (n[e] = []),
            -1 === n[e].indexOf(t) && n[e].push(t);
        },
        hasEventListener: function (e, t) {
          if (void 0 === this._listeners) return !1;
          var n = this._listeners;
          return void 0 !== n[e] && -1 !== n[e].indexOf(t);
        },
        removeEventListener: function (e, t) {
          void 0 !== this._listeners &&
            ((e = this._listeners[e]),
            void 0 !== e && ((t = e.indexOf(t)), -1 !== t && e.splice(t, 1)));
        },
        dispatchEvent: function (e) {
          if (void 0 !== this._listeners) {
            var t = this._listeners[e.type];
            if (void 0 !== t) {
              e.target = this;
              for (var t = t.slice(0), n = 0, i = t.length; i > n; n++)
                t[n].call(this, e);
            }
          }
        },
      });
    var ks = {
      DEG2RAD: Math.PI / 180,
      RAD2DEG: 180 / Math.PI,
      generateUUID: (function () {
        var e,
          t =
            "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(
              ""
            ),
          n = Array(36),
          i = 0;
        return function () {
          for (var r = 0; 36 > r; r++)
            8 === r || 13 === r || 18 === r || 23 === r
              ? (n[r] = "-")
              : 14 === r
              ? (n[r] = "4")
              : (2 >= i && (i = (33554432 + 16777216 * Math.random()) | 0),
                (e = 15 & i),
                (i >>= 4),
                (n[r] = t[19 === r ? (3 & e) | 8 : e]));
          return n.join("");
        };
      })(),
      clamp: function (e, t, n) {
        return Math.max(t, Math.min(n, e));
      },
      euclideanModulo: function (e, t) {
        return ((e % t) + t) % t;
      },
      mapLinear: function (e, t, n, i, r) {
        return i + ((e - t) * (r - i)) / (n - t);
      },
      lerp: function (e, t, n) {
        return (1 - n) * e + n * t;
      },
      smoothstep: function (e, t, n) {
        return t >= e
          ? 0
          : e >= n
          ? 1
          : ((e = (e - t) / (n - t)), e * e * (3 - 2 * e));
      },
      smootherstep: function (e, t, n) {
        return t >= e
          ? 0
          : e >= n
          ? 1
          : ((e = (e - t) / (n - t)), e * e * e * (e * (6 * e - 15) + 10));
      },
      randInt: function (e, t) {
        return e + Math.floor(Math.random() * (t - e + 1));
      },
      randFloat: function (e, t) {
        return e + Math.random() * (t - e);
      },
      randFloatSpread: function (e) {
        return e * (0.5 - Math.random());
      },
      degToRad: function (e) {
        return e * ks.DEG2RAD;
      },
      radToDeg: function (e) {
        return e * ks.RAD2DEG;
      },
      isPowerOfTwo: function (e) {
        return 0 === (e & (e - 1)) && 0 !== e;
      },
      nearestPowerOfTwo: function (e) {
        return Math.pow(2, Math.round(Math.log(e) / Math.LN2));
      },
      nextPowerOfTwo: function (e) {
        return (
          e--,
          (e |= e >> 1),
          (e |= e >> 2),
          (e |= e >> 4),
          (e |= e >> 8),
          (e |= e >> 16),
          e++,
          e
        );
      },
    };
    Object.defineProperties(n.prototype, {
      width: {
        get: function () {
          return this.x;
        },
        set: function (e) {
          this.x = e;
        },
      },
      height: {
        get: function () {
          return this.y;
        },
        set: function (e) {
          this.y = e;
        },
      },
    }),
      Object.assign(n.prototype, {
        isVector2: !0,
        set: function (e, t) {
          return (this.x = e), (this.y = t), this;
        },
        setScalar: function (e) {
          return (this.y = this.x = e), this;
        },
        setX: function (e) {
          return (this.x = e), this;
        },
        setY: function (e) {
          return (this.y = e), this;
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            default:
              throw Error("index is out of range: " + e);
          }
          return this;
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            default:
              throw Error("index is out of range: " + e);
          }
        },
        clone: function () {
          return new this.constructor(this.x, this.y);
        },
        copy: function (e) {
          return (this.x = e.x), (this.y = e.y), this;
        },
        add: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
              ),
              this.addVectors(e, t))
            : ((this.x += e.x), (this.y += e.y), this);
        },
        addScalar: function (e) {
          return (this.x += e), (this.y += e), this;
        },
        addVectors: function (e, t) {
          return (this.x = e.x + t.x), (this.y = e.y + t.y), this;
        },
        addScaledVector: function (e, t) {
          return (this.x += e.x * t), (this.y += e.y * t), this;
        },
        sub: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
              ),
              this.subVectors(e, t))
            : ((this.x -= e.x), (this.y -= e.y), this);
        },
        subScalar: function (e) {
          return (this.x -= e), (this.y -= e), this;
        },
        subVectors: function (e, t) {
          return (this.x = e.x - t.x), (this.y = e.y - t.y), this;
        },
        multiply: function (e) {
          return (this.x *= e.x), (this.y *= e.y), this;
        },
        multiplyScalar: function (e) {
          return (this.x *= e), (this.y *= e), this;
        },
        divide: function (e) {
          return (this.x /= e.x), (this.y /= e.y), this;
        },
        divideScalar: function (e) {
          return this.multiplyScalar(1 / e);
        },
        min: function (e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            this
          );
        },
        max: function (e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            this
          );
        },
        clamp: function (e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            this
          );
        },
        clampScalar: (function () {
          var e = new n(),
            t = new n();
          return function (n, i) {
            return e.set(n, n), t.set(i, i), this.clamp(e, t);
          };
        })(),
        clampLength: function (e, t) {
          var n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(e, Math.min(t, n))
          );
        },
        floor: function () {
          return (
            (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), this
          );
        },
        ceil: function () {
          return (
            (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), this
          );
        },
        round: function () {
          return (
            (this.x = Math.round(this.x)), (this.y = Math.round(this.y)), this
          );
        },
        roundToZero: function () {
          return (
            (this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y)),
            this
          );
        },
        negate: function () {
          return (this.x = -this.x), (this.y = -this.y), this;
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y;
        },
        lengthSq: function () {
          return this.x * this.x + this.y * this.y;
        },
        length: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y);
        },
        lengthManhattan: function () {
          return Math.abs(this.x) + Math.abs(this.y);
        },
        normalize: function () {
          return this.divideScalar(this.length() || 1);
        },
        angle: function () {
          var e = Math.atan2(this.y, this.x);
          return 0 > e && (e += 2 * Math.PI), e;
        },
        distanceTo: function (e) {
          return Math.sqrt(this.distanceToSquared(e));
        },
        distanceToSquared: function (e) {
          var t = this.x - e.x;
          return (e = this.y - e.y), t * t + e * e;
        },
        distanceToManhattan: function (e) {
          return Math.abs(this.x - e.x) + Math.abs(this.y - e.y);
        },
        setLength: function (e) {
          return this.normalize().multiplyScalar(e);
        },
        lerp: function (e, t) {
          return (
            (this.x += (e.x - this.x) * t), (this.y += (e.y - this.y) * t), this
          );
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e);
        },
        equals: function (e) {
          return e.x === this.x && e.y === this.y;
        },
        fromArray: function (e, t) {
          return (
            void 0 === t && (t = 0), (this.x = e[t]), (this.y = e[t + 1]), this
          );
        },
        toArray: function (e, t) {
          return (
            void 0 === e && (e = []),
            void 0 === t && (t = 0),
            (e[t] = this.x),
            (e[t + 1] = this.y),
            e
          );
        },
        fromBufferAttribute: function (e, t, n) {
          return (
            void 0 !== n &&
              console.warn(
                "THREE.Vector2: offset has been removed from .fromBufferAttribute()."
              ),
            (this.x = e.getX(t)),
            (this.y = e.getY(t)),
            this
          );
        },
        rotateAround: function (e, t) {
          var n = Math.cos(t);
          t = Math.sin(t);
          var i = this.x - e.x,
            r = this.y - e.y;
          return (
            (this.x = i * n - r * t + e.x), (this.y = i * t + r * n + e.y), this
          );
        },
      });
    var Ps = 0;
    (i.DEFAULT_IMAGE = void 0),
      (i.DEFAULT_MAPPING = 300),
      Object.defineProperty(i.prototype, "needsUpdate", {
        set: function (e) {
          !0 === e && this.version++;
        },
      }),
      Object.assign(i.prototype, t.prototype, {
        constructor: i,
        isTexture: !0,
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return (
            (this.name = e.name),
            (this.image = e.image),
            (this.mipmaps = e.mipmaps.slice(0)),
            (this.mapping = e.mapping),
            (this.wrapS = e.wrapS),
            (this.wrapT = e.wrapT),
            (this.magFilter = e.magFilter),
            (this.minFilter = e.minFilter),
            (this.anisotropy = e.anisotropy),
            (this.format = e.format),
            (this.type = e.type),
            this.offset.copy(e.offset),
            this.repeat.copy(e.repeat),
            (this.generateMipmaps = e.generateMipmaps),
            (this.premultiplyAlpha = e.premultiplyAlpha),
            (this.flipY = e.flipY),
            (this.unpackAlignment = e.unpackAlignment),
            (this.encoding = e.encoding),
            this
          );
        },
        toJSON: function (e) {
          if (void 0 !== e.textures[this.uuid]) return e.textures[this.uuid];
          var t = {
            metadata: {
              version: 4.5,
              type: "Texture",
              generator: "Texture.toJSON",
            },
            uuid: this.uuid,
            name: this.name,
            mapping: this.mapping,
            repeat: [this.repeat.x, this.repeat.y],
            offset: [this.offset.x, this.offset.y],
            wrap: [this.wrapS, this.wrapT],
            minFilter: this.minFilter,
            magFilter: this.magFilter,
            anisotropy: this.anisotropy,
            flipY: this.flipY,
          };
          if (void 0 !== this.image) {
            var n = this.image;
            if (
              (void 0 === n.uuid && (n.uuid = ks.generateUUID()),
              void 0 === e.images[n.uuid])
            ) {
              var i = e.images,
                r = n.uuid,
                s = n.uuid;
              if (n instanceof HTMLCanvasElement) var o = n;
              else {
                (o = document.createElementNS(
                  "http://www.w3.org/1999/xhtml",
                  "canvas"
                )),
                  (o.width = n.width),
                  (o.height = n.height);
                var a = o.getContext("2d");
                n instanceof ImageData
                  ? a.putImageData(n, 0, 0)
                  : a.drawImage(n, 0, 0, n.width, n.height);
              }
              (o =
                2048 < o.width || 2048 < o.height
                  ? o.toDataURL("image/jpeg", 0.6)
                  : o.toDataURL("image/png")),
                (i[r] = { uuid: s, url: o });
            }
            t.image = n.uuid;
          }
          return (e.textures[this.uuid] = t);
        },
        dispose: function () {
          this.dispatchEvent({ type: "dispose" });
        },
        transformUv: function (e) {
          if (300 === this.mapping) {
            if (
              (e.multiply(this.repeat), e.add(this.offset), 0 > e.x || 1 < e.x)
            )
              switch (this.wrapS) {
                case 1e3:
                  e.x -= Math.floor(e.x);
                  break;
                case 1001:
                  e.x = 0 > e.x ? 0 : 1;
                  break;
                case 1002:
                  e.x =
                    1 === Math.abs(Math.floor(e.x) % 2)
                      ? Math.ceil(e.x) - e.x
                      : e.x - Math.floor(e.x);
              }
            if (0 > e.y || 1 < e.y)
              switch (this.wrapT) {
                case 1e3:
                  e.y -= Math.floor(e.y);
                  break;
                case 1001:
                  e.y = 0 > e.y ? 0 : 1;
                  break;
                case 1002:
                  e.y =
                    1 === Math.abs(Math.floor(e.y) % 2)
                      ? Math.ceil(e.y) - e.y
                      : e.y - Math.floor(e.y);
              }
            this.flipY && (e.y = 1 - e.y);
          }
        },
      }),
      Object.assign(r.prototype, {
        isVector4: !0,
        set: function (e, t, n, i) {
          return (this.x = e), (this.y = t), (this.z = n), (this.w = i), this;
        },
        setScalar: function (e) {
          return (this.w = this.z = this.y = this.x = e), this;
        },
        setX: function (e) {
          return (this.x = e), this;
        },
        setY: function (e) {
          return (this.y = e), this;
        },
        setZ: function (e) {
          return (this.z = e), this;
        },
        setW: function (e) {
          return (this.w = e), this;
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            case 3:
              this.w = t;
              break;
            default:
              throw Error("index is out of range: " + e);
          }
          return this;
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            case 3:
              return this.w;
            default:
              throw Error("index is out of range: " + e);
          }
        },
        clone: function () {
          return new this.constructor(this.x, this.y, this.z, this.w);
        },
        copy: function (e) {
          return (
            (this.x = e.x),
            (this.y = e.y),
            (this.z = e.z),
            (this.w = void 0 !== e.w ? e.w : 1),
            this
          );
        },
        add: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
              ),
              this.addVectors(e, t))
            : ((this.x += e.x),
              (this.y += e.y),
              (this.z += e.z),
              (this.w += e.w),
              this);
        },
        addScalar: function (e) {
          return (
            (this.x += e), (this.y += e), (this.z += e), (this.w += e), this
          );
        },
        addVectors: function (e, t) {
          return (
            (this.x = e.x + t.x),
            (this.y = e.y + t.y),
            (this.z = e.z + t.z),
            (this.w = e.w + t.w),
            this
          );
        },
        addScaledVector: function (e, t) {
          return (
            (this.x += e.x * t),
            (this.y += e.y * t),
            (this.z += e.z * t),
            (this.w += e.w * t),
            this
          );
        },
        sub: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
              ),
              this.subVectors(e, t))
            : ((this.x -= e.x),
              (this.y -= e.y),
              (this.z -= e.z),
              (this.w -= e.w),
              this);
        },
        subScalar: function (e) {
          return (
            (this.x -= e), (this.y -= e), (this.z -= e), (this.w -= e), this
          );
        },
        subVectors: function (e, t) {
          return (
            (this.x = e.x - t.x),
            (this.y = e.y - t.y),
            (this.z = e.z - t.z),
            (this.w = e.w - t.w),
            this
          );
        },
        multiplyScalar: function (e) {
          return (
            (this.x *= e), (this.y *= e), (this.z *= e), (this.w *= e), this
          );
        },
        applyMatrix4: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = this.w;
          return (
            (e = e.elements),
            (this.x = e[0] * t + e[4] * n + e[8] * i + e[12] * r),
            (this.y = e[1] * t + e[5] * n + e[9] * i + e[13] * r),
            (this.z = e[2] * t + e[6] * n + e[10] * i + e[14] * r),
            (this.w = e[3] * t + e[7] * n + e[11] * i + e[15] * r),
            this
          );
        },
        divideScalar: function (e) {
          return this.multiplyScalar(1 / e);
        },
        setAxisAngleFromQuaternion: function (e) {
          this.w = 2 * Math.acos(e.w);
          var t = Math.sqrt(1 - e.w * e.w);
          return (
            1e-4 > t
              ? ((this.x = 1), (this.z = this.y = 0))
              : ((this.x = e.x / t), (this.y = e.y / t), (this.z = e.z / t)),
            this
          );
        },
        setAxisAngleFromRotationMatrix: function (e) {
          e = e.elements;
          var t = e[0],
            n = e[4],
            i = e[8],
            r = e[1],
            s = e[5],
            o = e[9],
            a = e[2],
            l = e[6],
            c = e[10];
          return 0.01 > Math.abs(n - r) &&
            0.01 > Math.abs(i - a) &&
            0.01 > Math.abs(o - l)
            ? 0.1 > Math.abs(n + r) &&
              0.1 > Math.abs(i + a) &&
              0.1 > Math.abs(o + l) &&
              0.1 > Math.abs(t + s + c - 3)
              ? (this.set(1, 0, 0, 0), this)
              : ((e = Math.PI),
                (t = (t + 1) / 2),
                (s = (s + 1) / 2),
                (c = (c + 1) / 2),
                (n = (n + r) / 4),
                (i = (i + a) / 4),
                (o = (o + l) / 4),
                t > s && t > c
                  ? 0.01 > t
                    ? ((l = 0), (n = a = 0.707106781))
                    : ((l = Math.sqrt(t)), (a = n / l), (n = i / l))
                  : s > c
                  ? 0.01 > s
                    ? ((l = 0.707106781), (a = 0), (n = 0.707106781))
                    : ((a = Math.sqrt(s)), (l = n / a), (n = o / a))
                  : 0.01 > c
                  ? ((a = l = 0.707106781), (n = 0))
                  : ((n = Math.sqrt(c)), (l = i / n), (a = o / n)),
                this.set(l, a, n, e),
                this)
            : ((e = Math.sqrt(
                (l - o) * (l - o) + (i - a) * (i - a) + (r - n) * (r - n)
              )),
              0.001 > Math.abs(e) && (e = 1),
              (this.x = (l - o) / e),
              (this.y = (i - a) / e),
              (this.z = (r - n) / e),
              (this.w = Math.acos((t + s + c - 1) / 2)),
              this);
        },
        min: function (e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            (this.z = Math.min(this.z, e.z)),
            (this.w = Math.min(this.w, e.w)),
            this
          );
        },
        max: function (e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            (this.z = Math.max(this.z, e.z)),
            (this.w = Math.max(this.w, e.w)),
            this
          );
        },
        clamp: function (e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            (this.z = Math.max(e.z, Math.min(t.z, this.z))),
            (this.w = Math.max(e.w, Math.min(t.w, this.w))),
            this
          );
        },
        clampScalar: (function () {
          var e, t;
          return function (n, i) {
            return (
              void 0 === e && ((e = new r()), (t = new r())),
              e.set(n, n, n, n),
              t.set(i, i, i, i),
              this.clamp(e, t)
            );
          };
        })(),
        clampLength: function (e, t) {
          var n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(e, Math.min(t, n))
          );
        },
        floor: function () {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            (this.w = Math.floor(this.w)),
            this
          );
        },
        ceil: function () {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            (this.w = Math.ceil(this.w)),
            this
          );
        },
        round: function () {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            (this.w = Math.round(this.w)),
            this
          );
        },
        roundToZero: function () {
          return (
            (this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z)),
            (this.w = 0 > this.w ? Math.ceil(this.w) : Math.floor(this.w)),
            this
          );
        },
        negate: function () {
          return (
            (this.x = -this.x),
            (this.y = -this.y),
            (this.z = -this.z),
            (this.w = -this.w),
            this
          );
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w;
        },
        lengthSq: function () {
          return (
            this.x * this.x +
            this.y * this.y +
            this.z * this.z +
            this.w * this.w
          );
        },
        length: function () {
          return Math.sqrt(
            this.x * this.x +
              this.y * this.y +
              this.z * this.z +
              this.w * this.w
          );
        },
        lengthManhattan: function () {
          return (
            Math.abs(this.x) +
            Math.abs(this.y) +
            Math.abs(this.z) +
            Math.abs(this.w)
          );
        },
        normalize: function () {
          return this.divideScalar(this.length() || 1);
        },
        setLength: function (e) {
          return this.normalize().multiplyScalar(e);
        },
        lerp: function (e, t) {
          return (
            (this.x += (e.x - this.x) * t),
            (this.y += (e.y - this.y) * t),
            (this.z += (e.z - this.z) * t),
            (this.w += (e.w - this.w) * t),
            this
          );
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e);
        },
        equals: function (e) {
          return (
            e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
          );
        },
        fromArray: function (e, t) {
          return (
            void 0 === t && (t = 0),
            (this.x = e[t]),
            (this.y = e[t + 1]),
            (this.z = e[t + 2]),
            (this.w = e[t + 3]),
            this
          );
        },
        toArray: function (e, t) {
          return (
            void 0 === e && (e = []),
            void 0 === t && (t = 0),
            (e[t] = this.x),
            (e[t + 1] = this.y),
            (e[t + 2] = this.z),
            (e[t + 3] = this.w),
            e
          );
        },
        fromBufferAttribute: function (e, t, n) {
          return (
            void 0 !== n &&
              console.warn(
                "THREE.Vector4: offset has been removed from .fromBufferAttribute()."
              ),
            (this.x = e.getX(t)),
            (this.y = e.getY(t)),
            (this.z = e.getZ(t)),
            (this.w = e.getW(t)),
            this
          );
        },
      }),
      Object.assign(s.prototype, t.prototype, {
        isWebGLRenderTarget: !0,
        setSize: function (e, t) {
          (this.width !== e || this.height !== t) &&
            ((this.width = e), (this.height = t), this.dispose()),
            this.viewport.set(0, 0, e, t),
            this.scissor.set(0, 0, e, t);
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return (
            (this.width = e.width),
            (this.height = e.height),
            this.viewport.copy(e.viewport),
            (this.texture = e.texture.clone()),
            (this.depthBuffer = e.depthBuffer),
            (this.stencilBuffer = e.stencilBuffer),
            (this.depthTexture = e.depthTexture),
            this
          );
        },
        dispose: function () {
          this.dispatchEvent({ type: "dispose" });
        },
      }),
      (o.prototype = Object.create(s.prototype)),
      (o.prototype.constructor = o),
      (o.prototype.isWebGLRenderTargetCube = !0),
      Object.assign(a, {
        slerp: function (e, t, n, i) {
          return n.copy(e).slerp(t, i);
        },
        slerpFlat: function (e, t, n, i, r, s, o) {
          var a = n[i + 0],
            l = n[i + 1],
            c = n[i + 2];
          (n = n[i + 3]), (i = r[s + 0]);
          var u = r[s + 1],
            h = r[s + 2];
          if (((r = r[s + 3]), n !== r || a !== i || l !== u || c !== h)) {
            s = 1 - o;
            var d = a * i + l * u + c * h + n * r,
              p = d >= 0 ? 1 : -1,
              f = 1 - d * d;
            f > Number.EPSILON &&
              ((f = Math.sqrt(f)),
              (d = Math.atan2(f, d * p)),
              (s = Math.sin(s * d) / f),
              (o = Math.sin(o * d) / f)),
              (p *= o),
              (a = a * s + i * p),
              (l = l * s + u * p),
              (c = c * s + h * p),
              (n = n * s + r * p),
              s === 1 - o &&
                ((o = 1 / Math.sqrt(a * a + l * l + c * c + n * n)),
                (a *= o),
                (l *= o),
                (c *= o),
                (n *= o));
          }
          (e[t] = a), (e[t + 1] = l), (e[t + 2] = c), (e[t + 3] = n);
        },
      }),
      Object.defineProperties(a.prototype, {
        x: {
          get: function () {
            return this._x;
          },
          set: function (e) {
            (this._x = e), this.onChangeCallback();
          },
        },
        y: {
          get: function () {
            return this._y;
          },
          set: function (e) {
            (this._y = e), this.onChangeCallback();
          },
        },
        z: {
          get: function () {
            return this._z;
          },
          set: function (e) {
            (this._z = e), this.onChangeCallback();
          },
        },
        w: {
          get: function () {
            return this._w;
          },
          set: function (e) {
            (this._w = e), this.onChangeCallback();
          },
        },
      }),
      Object.assign(a.prototype, {
        set: function (e, t, n, i) {
          return (
            (this._x = e),
            (this._y = t),
            (this._z = n),
            (this._w = i),
            this.onChangeCallback(),
            this
          );
        },
        clone: function () {
          return new this.constructor(this._x, this._y, this._z, this._w);
        },
        copy: function (e) {
          return (
            (this._x = e.x),
            (this._y = e.y),
            (this._z = e.z),
            (this._w = e.w),
            this.onChangeCallback(),
            this
          );
        },
        setFromEuler: function (e, t) {
          if (!e || !e.isEuler)
            throw Error(
              "THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order."
            );
          var n = e._x,
            i = e._y,
            r = e._z;
          e = e.order;
          var s = Math.cos,
            o = Math.sin,
            a = s(n / 2),
            l = s(i / 2),
            s = s(r / 2),
            n = o(n / 2),
            i = o(i / 2),
            r = o(r / 2);
          return (
            "XYZ" === e
              ? ((this._x = n * l * s + a * i * r),
                (this._y = a * i * s - n * l * r),
                (this._z = a * l * r + n * i * s),
                (this._w = a * l * s - n * i * r))
              : "YXZ" === e
              ? ((this._x = n * l * s + a * i * r),
                (this._y = a * i * s - n * l * r),
                (this._z = a * l * r - n * i * s),
                (this._w = a * l * s + n * i * r))
              : "ZXY" === e
              ? ((this._x = n * l * s - a * i * r),
                (this._y = a * i * s + n * l * r),
                (this._z = a * l * r + n * i * s),
                (this._w = a * l * s - n * i * r))
              : "ZYX" === e
              ? ((this._x = n * l * s - a * i * r),
                (this._y = a * i * s + n * l * r),
                (this._z = a * l * r - n * i * s),
                (this._w = a * l * s + n * i * r))
              : "YZX" === e
              ? ((this._x = n * l * s + a * i * r),
                (this._y = a * i * s + n * l * r),
                (this._z = a * l * r - n * i * s),
                (this._w = a * l * s - n * i * r))
              : "XZY" === e &&
                ((this._x = n * l * s - a * i * r),
                (this._y = a * i * s - n * l * r),
                (this._z = a * l * r + n * i * s),
                (this._w = a * l * s + n * i * r)),
            !1 !== t && this.onChangeCallback(),
            this
          );
        },
        setFromAxisAngle: function (e, t) {
          t /= 2;
          var n = Math.sin(t);
          return (
            (this._x = e.x * n),
            (this._y = e.y * n),
            (this._z = e.z * n),
            (this._w = Math.cos(t)),
            this.onChangeCallback(),
            this
          );
        },
        setFromRotationMatrix: function (e) {
          var t = e.elements,
            n = t[0];
          e = t[4];
          var i = t[8],
            r = t[1],
            s = t[5],
            o = t[9],
            a = t[2],
            l = t[6],
            t = t[10],
            c = n + s + t;
          return (
            c > 0
              ? ((n = 0.5 / Math.sqrt(c + 1)),
                (this._w = 0.25 / n),
                (this._x = (l - o) * n),
                (this._y = (i - a) * n),
                (this._z = (r - e) * n))
              : n > s && n > t
              ? ((n = 2 * Math.sqrt(1 + n - s - t)),
                (this._w = (l - o) / n),
                (this._x = 0.25 * n),
                (this._y = (e + r) / n),
                (this._z = (i + a) / n))
              : s > t
              ? ((n = 2 * Math.sqrt(1 + s - n - t)),
                (this._w = (i - a) / n),
                (this._x = (e + r) / n),
                (this._y = 0.25 * n),
                (this._z = (o + l) / n))
              : ((n = 2 * Math.sqrt(1 + t - n - s)),
                (this._w = (r - e) / n),
                (this._x = (i + a) / n),
                (this._y = (o + l) / n),
                (this._z = 0.25 * n)),
            this.onChangeCallback(),
            this
          );
        },
        setFromUnitVectors: (function () {
          var e,
            t = new l();
          return function (n, i) {
            return (
              void 0 === t && (t = new l()),
              (e = n.dot(i) + 1),
              1e-6 > e
                ? ((e = 0),
                  Math.abs(n.x) > Math.abs(n.z)
                    ? t.set(-n.y, n.x, 0)
                    : t.set(0, -n.z, n.y))
                : t.crossVectors(n, i),
              (this._x = t.x),
              (this._y = t.y),
              (this._z = t.z),
              (this._w = e),
              this.normalize()
            );
          };
        })(),
        inverse: function () {
          return this.conjugate().normalize();
        },
        conjugate: function () {
          return (
            (this._x *= -1),
            (this._y *= -1),
            (this._z *= -1),
            this.onChangeCallback(),
            this
          );
        },
        dot: function (e) {
          return (
            this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
          );
        },
        lengthSq: function () {
          return (
            this._x * this._x +
            this._y * this._y +
            this._z * this._z +
            this._w * this._w
          );
        },
        length: function () {
          return Math.sqrt(
            this._x * this._x +
              this._y * this._y +
              this._z * this._z +
              this._w * this._w
          );
        },
        normalize: function () {
          var e = this.length();
          return (
            0 === e
              ? ((this._z = this._y = this._x = 0), (this._w = 1))
              : ((e = 1 / e),
                (this._x *= e),
                (this._y *= e),
                (this._z *= e),
                (this._w *= e)),
            this.onChangeCallback(),
            this
          );
        },
        multiply: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."
              ),
              this.multiplyQuaternions(e, t))
            : this.multiplyQuaternions(this, e);
        },
        premultiply: function (e) {
          return this.multiplyQuaternions(e, this);
        },
        multiplyQuaternions: function (e, t) {
          var n = e._x,
            i = e._y,
            r = e._z;
          e = e._w;
          var s = t._x,
            o = t._y,
            a = t._z;
          return (
            (t = t._w),
            (this._x = n * t + e * s + i * a - r * o),
            (this._y = i * t + e * o + r * s - n * a),
            (this._z = r * t + e * a + n * o - i * s),
            (this._w = e * t - n * s - i * o - r * a),
            this.onChangeCallback(),
            this
          );
        },
        slerp: function (e, t) {
          if (0 === t) return this;
          if (1 === t) return this.copy(e);
          var n = this._x,
            i = this._y,
            r = this._z,
            s = this._w,
            o = s * e._w + n * e._x + i * e._y + r * e._z;
          if (
            (0 > o
              ? ((this._w = -e._w),
                (this._x = -e._x),
                (this._y = -e._y),
                (this._z = -e._z),
                (o = -o))
              : this.copy(e),
            o >= 1)
          )
            return (
              (this._w = s), (this._x = n), (this._y = i), (this._z = r), this
            );
          if (((e = Math.sqrt(1 - o * o)), 0.001 > Math.abs(e)))
            return (
              (this._w = 0.5 * (s + this._w)),
              (this._x = 0.5 * (n + this._x)),
              (this._y = 0.5 * (i + this._y)),
              (this._z = 0.5 * (r + this._z)),
              this
            );
          var a = Math.atan2(e, o),
            o = Math.sin((1 - t) * a) / e;
          return (
            (t = Math.sin(t * a) / e),
            (this._w = s * o + this._w * t),
            (this._x = n * o + this._x * t),
            (this._y = i * o + this._y * t),
            (this._z = r * o + this._z * t),
            this.onChangeCallback(),
            this
          );
        },
        equals: function (e) {
          return (
            e._x === this._x &&
            e._y === this._y &&
            e._z === this._z &&
            e._w === this._w
          );
        },
        fromArray: function (e, t) {
          return (
            void 0 === t && (t = 0),
            (this._x = e[t]),
            (this._y = e[t + 1]),
            (this._z = e[t + 2]),
            (this._w = e[t + 3]),
            this.onChangeCallback(),
            this
          );
        },
        toArray: function (e, t) {
          return (
            void 0 === e && (e = []),
            void 0 === t && (t = 0),
            (e[t] = this._x),
            (e[t + 1] = this._y),
            (e[t + 2] = this._z),
            (e[t + 3] = this._w),
            e
          );
        },
        onChange: function (e) {
          return (this.onChangeCallback = e), this;
        },
        onChangeCallback: function () {},
      }),
      Object.assign(l.prototype, {
        isVector3: !0,
        set: function (e, t, n) {
          return (this.x = e), (this.y = t), (this.z = n), this;
        },
        setScalar: function (e) {
          return (this.z = this.y = this.x = e), this;
        },
        setX: function (e) {
          return (this.x = e), this;
        },
        setY: function (e) {
          return (this.y = e), this;
        },
        setZ: function (e) {
          return (this.z = e), this;
        },
        setComponent: function (e, t) {
          switch (e) {
            case 0:
              this.x = t;
              break;
            case 1:
              this.y = t;
              break;
            case 2:
              this.z = t;
              break;
            default:
              throw Error("index is out of range: " + e);
          }
          return this;
        },
        getComponent: function (e) {
          switch (e) {
            case 0:
              return this.x;
            case 1:
              return this.y;
            case 2:
              return this.z;
            default:
              throw Error("index is out of range: " + e);
          }
        },
        clone: function () {
          return new this.constructor(this.x, this.y, this.z);
        },
        copy: function (e) {
          return (this.x = e.x), (this.y = e.y), (this.z = e.z), this;
        },
        add: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."
              ),
              this.addVectors(e, t))
            : ((this.x += e.x), (this.y += e.y), (this.z += e.z), this);
        },
        addScalar: function (e) {
          return (this.x += e), (this.y += e), (this.z += e), this;
        },
        addVectors: function (e, t) {
          return (
            (this.x = e.x + t.x),
            (this.y = e.y + t.y),
            (this.z = e.z + t.z),
            this
          );
        },
        addScaledVector: function (e, t) {
          return (
            (this.x += e.x * t), (this.y += e.y * t), (this.z += e.z * t), this
          );
        },
        sub: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."
              ),
              this.subVectors(e, t))
            : ((this.x -= e.x), (this.y -= e.y), (this.z -= e.z), this);
        },
        subScalar: function (e) {
          return (this.x -= e), (this.y -= e), (this.z -= e), this;
        },
        subVectors: function (e, t) {
          return (
            (this.x = e.x - t.x),
            (this.y = e.y - t.y),
            (this.z = e.z - t.z),
            this
          );
        },
        multiply: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."
              ),
              this.multiplyVectors(e, t))
            : ((this.x *= e.x), (this.y *= e.y), (this.z *= e.z), this);
        },
        multiplyScalar: function (e) {
          return (this.x *= e), (this.y *= e), (this.z *= e), this;
        },
        multiplyVectors: function (e, t) {
          return (
            (this.x = e.x * t.x),
            (this.y = e.y * t.y),
            (this.z = e.z * t.z),
            this
          );
        },
        applyEuler: (function () {
          var e = new a();
          return function (t) {
            return (
              (t && t.isEuler) ||
                console.error(
                  "THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."
                ),
              this.applyQuaternion(e.setFromEuler(t))
            );
          };
        })(),
        applyAxisAngle: (function () {
          var e = new a();
          return function (t, n) {
            return this.applyQuaternion(e.setFromAxisAngle(t, n));
          };
        })(),
        applyMatrix3: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z;
          return (
            (e = e.elements),
            (this.x = e[0] * t + e[3] * n + e[6] * i),
            (this.y = e[1] * t + e[4] * n + e[7] * i),
            (this.z = e[2] * t + e[5] * n + e[8] * i),
            this
          );
        },
        applyMatrix4: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z;
          e = e.elements;
          var r = 1 / (e[3] * t + e[7] * n + e[11] * i + e[15]);
          return (
            (this.x = (e[0] * t + e[4] * n + e[8] * i + e[12]) * r),
            (this.y = (e[1] * t + e[5] * n + e[9] * i + e[13]) * r),
            (this.z = (e[2] * t + e[6] * n + e[10] * i + e[14]) * r),
            this
          );
        },
        applyQuaternion: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z,
            r = e.x,
            s = e.y,
            o = e.z;
          e = e.w;
          var a = e * t + s * i - o * n,
            l = e * n + o * t - r * i,
            c = e * i + r * n - s * t,
            t = -r * t - s * n - o * i;
          return (
            (this.x = a * e + t * -r + l * -o - c * -s),
            (this.y = l * e + t * -s + c * -r - a * -o),
            (this.z = c * e + t * -o + a * -s - l * -r),
            this
          );
        },
        project: (function () {
          var e = new c();
          return function (t) {
            return (
              e.multiplyMatrices(
                t.projectionMatrix,
                e.getInverse(t.matrixWorld)
              ),
              this.applyMatrix4(e)
            );
          };
        })(),
        unproject: (function () {
          var e = new c();
          return function (t) {
            return (
              e.multiplyMatrices(
                t.matrixWorld,
                e.getInverse(t.projectionMatrix)
              ),
              this.applyMatrix4(e)
            );
          };
        })(),
        transformDirection: function (e) {
          var t = this.x,
            n = this.y,
            i = this.z;
          return (
            (e = e.elements),
            (this.x = e[0] * t + e[4] * n + e[8] * i),
            (this.y = e[1] * t + e[5] * n + e[9] * i),
            (this.z = e[2] * t + e[6] * n + e[10] * i),
            this.normalize()
          );
        },
        divide: function (e) {
          return (this.x /= e.x), (this.y /= e.y), (this.z /= e.z), this;
        },
        divideScalar: function (e) {
          return this.multiplyScalar(1 / e);
        },
        min: function (e) {
          return (
            (this.x = Math.min(this.x, e.x)),
            (this.y = Math.min(this.y, e.y)),
            (this.z = Math.min(this.z, e.z)),
            this
          );
        },
        max: function (e) {
          return (
            (this.x = Math.max(this.x, e.x)),
            (this.y = Math.max(this.y, e.y)),
            (this.z = Math.max(this.z, e.z)),
            this
          );
        },
        clamp: function (e, t) {
          return (
            (this.x = Math.max(e.x, Math.min(t.x, this.x))),
            (this.y = Math.max(e.y, Math.min(t.y, this.y))),
            (this.z = Math.max(e.z, Math.min(t.z, this.z))),
            this
          );
        },
        clampScalar: (function () {
          var e = new l(),
            t = new l();
          return function (n, i) {
            return e.set(n, n, n), t.set(i, i, i), this.clamp(e, t);
          };
        })(),
        clampLength: function (e, t) {
          var n = this.length();
          return this.divideScalar(n || 1).multiplyScalar(
            Math.max(e, Math.min(t, n))
          );
        },
        floor: function () {
          return (
            (this.x = Math.floor(this.x)),
            (this.y = Math.floor(this.y)),
            (this.z = Math.floor(this.z)),
            this
          );
        },
        ceil: function () {
          return (
            (this.x = Math.ceil(this.x)),
            (this.y = Math.ceil(this.y)),
            (this.z = Math.ceil(this.z)),
            this
          );
        },
        round: function () {
          return (
            (this.x = Math.round(this.x)),
            (this.y = Math.round(this.y)),
            (this.z = Math.round(this.z)),
            this
          );
        },
        roundToZero: function () {
          return (
            (this.x = 0 > this.x ? Math.ceil(this.x) : Math.floor(this.x)),
            (this.y = 0 > this.y ? Math.ceil(this.y) : Math.floor(this.y)),
            (this.z = 0 > this.z ? Math.ceil(this.z) : Math.floor(this.z)),
            this
          );
        },
        negate: function () {
          return (
            (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this
          );
        },
        dot: function (e) {
          return this.x * e.x + this.y * e.y + this.z * e.z;
        },
        lengthSq: function () {
          return this.x * this.x + this.y * this.y + this.z * this.z;
        },
        length: function () {
          return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);
        },
        lengthManhattan: function () {
          return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z);
        },
        normalize: function () {
          return this.divideScalar(this.length() || 1);
        },
        setLength: function (e) {
          return this.normalize().multiplyScalar(e);
        },
        lerp: function (e, t) {
          return (
            (this.x += (e.x - this.x) * t),
            (this.y += (e.y - this.y) * t),
            (this.z += (e.z - this.z) * t),
            this
          );
        },
        lerpVectors: function (e, t, n) {
          return this.subVectors(t, e).multiplyScalar(n).add(e);
        },
        cross: function (e, t) {
          if (void 0 !== t)
            return (
              console.warn(
                "THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."
              ),
              this.crossVectors(e, t)
            );
          t = this.x;
          var n = this.y,
            i = this.z;
          return (
            (this.x = n * e.z - i * e.y),
            (this.y = i * e.x - t * e.z),
            (this.z = t * e.y - n * e.x),
            this
          );
        },
        crossVectors: function (e, t) {
          var n = e.x,
            i = e.y;
          e = e.z;
          var r = t.x,
            s = t.y;
          return (
            (t = t.z),
            (this.x = i * t - e * s),
            (this.y = e * r - n * t),
            (this.z = n * s - i * r),
            this
          );
        },
        projectOnVector: function (e) {
          var t = e.dot(this) / e.lengthSq();
          return this.copy(e).multiplyScalar(t);
        },
        projectOnPlane: (function () {
          var e = new l();
          return function (t) {
            return e.copy(this).projectOnVector(t), this.sub(e);
          };
        })(),
        reflect: (function () {
          var e = new l();
          return function (t) {
            return this.sub(e.copy(t).multiplyScalar(2 * this.dot(t)));
          };
        })(),
        angleTo: function (e) {
          return (
            (e = this.dot(e) / Math.sqrt(this.lengthSq() * e.lengthSq())),
            Math.acos(ks.clamp(e, -1, 1))
          );
        },
        distanceTo: function (e) {
          return Math.sqrt(this.distanceToSquared(e));
        },
        distanceToSquared: function (e) {
          var t = this.x - e.x,
            n = this.y - e.y;
          return (e = this.z - e.z), t * t + n * n + e * e;
        },
        distanceToManhattan: function (e) {
          return (
            Math.abs(this.x - e.x) +
            Math.abs(this.y - e.y) +
            Math.abs(this.z - e.z)
          );
        },
        setFromSpherical: function (e) {
          var t = Math.sin(e.phi) * e.radius;
          return (
            (this.x = t * Math.sin(e.theta)),
            (this.y = Math.cos(e.phi) * e.radius),
            (this.z = t * Math.cos(e.theta)),
            this
          );
        },
        setFromCylindrical: function (e) {
          return (
            (this.x = e.radius * Math.sin(e.theta)),
            (this.y = e.y),
            (this.z = e.radius * Math.cos(e.theta)),
            this
          );
        },
        setFromMatrixPosition: function (e) {
          return (
            (e = e.elements),
            (this.x = e[12]),
            (this.y = e[13]),
            (this.z = e[14]),
            this
          );
        },
        setFromMatrixScale: function (e) {
          var t = this.setFromMatrixColumn(e, 0).length(),
            n = this.setFromMatrixColumn(e, 1).length();
          return (
            (e = this.setFromMatrixColumn(e, 2).length()),
            (this.x = t),
            (this.y = n),
            (this.z = e),
            this
          );
        },
        setFromMatrixColumn: function (e, t) {
          return this.fromArray(e.elements, 4 * t);
        },
        equals: function (e) {
          return e.x === this.x && e.y === this.y && e.z === this.z;
        },
        fromArray: function (e, t) {
          return (
            void 0 === t && (t = 0),
            (this.x = e[t]),
            (this.y = e[t + 1]),
            (this.z = e[t + 2]),
            this
          );
        },
        toArray: function (e, t) {
          return (
            void 0 === e && (e = []),
            void 0 === t && (t = 0),
            (e[t] = this.x),
            (e[t + 1] = this.y),
            (e[t + 2] = this.z),
            e
          );
        },
        fromBufferAttribute: function (e, t, n) {
          return (
            void 0 !== n &&
              console.warn(
                "THREE.Vector3: offset has been removed from .fromBufferAttribute()."
              ),
            (this.x = e.getX(t)),
            (this.y = e.getY(t)),
            (this.z = e.getZ(t)),
            this
          );
        },
      }),
      Object.assign(c.prototype, {
        isMatrix4: !0,
        set: function (e, t, n, i, r, s, o, a, l, c, u, h, d, p, f, m) {
          var g = this.elements;
          return (
            (g[0] = e),
            (g[4] = t),
            (g[8] = n),
            (g[12] = i),
            (g[1] = r),
            (g[5] = s),
            (g[9] = o),
            (g[13] = a),
            (g[2] = l),
            (g[6] = c),
            (g[10] = u),
            (g[14] = h),
            (g[3] = d),
            (g[7] = p),
            (g[11] = f),
            (g[15] = m),
            this
          );
        },
        identity: function () {
          return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this;
        },
        clone: function () {
          return new c().fromArray(this.elements);
        },
        copy: function (e) {
          var t = this.elements;
          return (
            (e = e.elements),
            (t[0] = e[0]),
            (t[1] = e[1]),
            (t[2] = e[2]),
            (t[3] = e[3]),
            (t[4] = e[4]),
            (t[5] = e[5]),
            (t[6] = e[6]),
            (t[7] = e[7]),
            (t[8] = e[8]),
            (t[9] = e[9]),
            (t[10] = e[10]),
            (t[11] = e[11]),
            (t[12] = e[12]),
            (t[13] = e[13]),
            (t[14] = e[14]),
            (t[15] = e[15]),
            this
          );
        },
        copyPosition: function (e) {
          var t = this.elements;
          return (
            (e = e.elements),
            (t[12] = e[12]),
            (t[13] = e[13]),
            (t[14] = e[14]),
            this
          );
        },
        extractBasis: function (e, t, n) {
          return (
            e.setFromMatrixColumn(this, 0),
            t.setFromMatrixColumn(this, 1),
            n.setFromMatrixColumn(this, 2),
            this
          );
        },
        makeBasis: function (e, t, n) {
          return (
            this.set(
              e.x,
              t.x,
              n.x,
              0,
              e.y,
              t.y,
              n.y,
              0,
              e.z,
              t.z,
              n.z,
              0,
              0,
              0,
              0,
              1
            ),
            this
          );
        },
        extractRotation: (function () {
          var e = new l();
          return function (t) {
            var n = this.elements,
              i = t.elements,
              r = 1 / e.setFromMatrixColumn(t, 0).length(),
              s = 1 / e.setFromMatrixColumn(t, 1).length();
            return (
              (t = 1 / e.setFromMatrixColumn(t, 2).length()),
              (n[0] = i[0] * r),
              (n[1] = i[1] * r),
              (n[2] = i[2] * r),
              (n[4] = i[4] * s),
              (n[5] = i[5] * s),
              (n[6] = i[6] * s),
              (n[8] = i[8] * t),
              (n[9] = i[9] * t),
              (n[10] = i[10] * t),
              this
            );
          };
        })(),
        makeRotationFromEuler: function (e) {
          (e && e.isEuler) ||
            console.error(
              "THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order."
            );
          var t = this.elements,
            n = e.x,
            i = e.y,
            r = e.z,
            s = Math.cos(n),
            n = Math.sin(n),
            o = Math.cos(i),
            i = Math.sin(i),
            a = Math.cos(r),
            r = Math.sin(r);
          if ("XYZ" === e.order) {
            var l = s * a,
              c = s * r,
              u = n * a;
            (e = n * r),
              (t[0] = o * a),
              (t[4] = -o * r),
              (t[8] = i),
              (t[1] = c + u * i),
              (t[5] = l - e * i),
              (t[9] = -n * o),
              (t[2] = e - l * i),
              (t[6] = u + c * i),
              (t[10] = s * o);
          } else
            "YXZ" === e.order
              ? ((l = o * a),
                (c = o * r),
                (u = i * a),
                (e = i * r),
                (t[0] = l + e * n),
                (t[4] = u * n - c),
                (t[8] = s * i),
                (t[1] = s * r),
                (t[5] = s * a),
                (t[9] = -n),
                (t[2] = c * n - u),
                (t[6] = e + l * n),
                (t[10] = s * o))
              : "ZXY" === e.order
              ? ((l = o * a),
                (c = o * r),
                (u = i * a),
                (e = i * r),
                (t[0] = l - e * n),
                (t[4] = -s * r),
                (t[8] = u + c * n),
                (t[1] = c + u * n),
                (t[5] = s * a),
                (t[9] = e - l * n),
                (t[2] = -s * i),
                (t[6] = n),
                (t[10] = s * o))
              : "ZYX" === e.order
              ? ((l = s * a),
                (c = s * r),
                (u = n * a),
                (e = n * r),
                (t[0] = o * a),
                (t[4] = u * i - c),
                (t[8] = l * i + e),
                (t[1] = o * r),
                (t[5] = e * i + l),
                (t[9] = c * i - u),
                (t[2] = -i),
                (t[6] = n * o),
                (t[10] = s * o))
              : "YZX" === e.order
              ? ((l = s * o),
                (c = s * i),
                (u = n * o),
                (e = n * i),
                (t[0] = o * a),
                (t[4] = e - l * r),
                (t[8] = u * r + c),
                (t[1] = r),
                (t[5] = s * a),
                (t[9] = -n * a),
                (t[2] = -i * a),
                (t[6] = c * r + u),
                (t[10] = l - e * r))
              : "XZY" === e.order &&
                ((l = s * o),
                (c = s * i),
                (u = n * o),
                (e = n * i),
                (t[0] = o * a),
                (t[4] = -r),
                (t[8] = i * a),
                (t[1] = l * r + e),
                (t[5] = s * a),
                (t[9] = c * r - u),
                (t[2] = u * r - c),
                (t[6] = n * a),
                (t[10] = e * r + l));
          return (
            (t[3] = 0),
            (t[7] = 0),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            this
          );
        },
        makeRotationFromQuaternion: function (e) {
          var t = this.elements,
            n = e._x,
            i = e._y,
            r = e._z,
            s = e._w,
            o = n + n,
            a = i + i,
            l = r + r;
          e = n * o;
          var c = n * a,
            n = n * l,
            u = i * a,
            i = i * l,
            r = r * l,
            o = s * o,
            a = s * a,
            s = s * l;
          return (
            (t[0] = 1 - (u + r)),
            (t[4] = c - s),
            (t[8] = n + a),
            (t[1] = c + s),
            (t[5] = 1 - (e + r)),
            (t[9] = i - o),
            (t[2] = n - a),
            (t[6] = i + o),
            (t[10] = 1 - (e + u)),
            (t[3] = 0),
            (t[7] = 0),
            (t[11] = 0),
            (t[12] = 0),
            (t[13] = 0),
            (t[14] = 0),
            (t[15] = 1),
            this
          );
        },
        lookAt: (function () {
          var e = new l(),
            t = new l(),
            n = new l();
          return function (i, r, s) {
            var o = this.elements;
            return (
              n.subVectors(i, r),
              0 === n.lengthSq() && (n.z = 1),
              n.normalize(),
              e.crossVectors(s, n),
              0 === e.lengthSq() &&
                (1 === Math.abs(s.z) ? (n.x += 1e-4) : (n.z += 1e-4),
                n.normalize(),
                e.crossVectors(s, n)),
              e.normalize(),
              t.crossVectors(n, e),
              (o[0] = e.x),
              (o[4] = t.x),
              (o[8] = n.x),
              (o[1] = e.y),
              (o[5] = t.y),
              (o[9] = n.y),
              (o[2] = e.z),
              (o[6] = t.z),
              (o[10] = n.z),
              this
            );
          };
        })(),
        multiply: function (e, t) {
          return void 0 !== t
            ? (console.warn(
                "THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."
              ),
              this.multiplyMatrices(e, t))
            : this.multiplyMatrices(this, e);
        },
        premultiply: function (e) {
          return this.multiplyMatrices(e, this);
        },
        multiplyMatrices: function (e, t) {
          var n = e.elements,
            i = t.elements;
          (t = this.elements), (e = n[0]);
          var r = n[4],
            s = n[8],
            o = n[12],
            a = n[1],
            l = n[5],
            c = n[9],
            u = n[13],
            h = n[2],
            d = n[6],
            p = n[10],
            f = n[14],
            m = n[3],
            g = n[7],
            v = n[11],
            n = n[15],
            _ = i[0],
            y = i[4],
            b = i[8],
            w = i[12],
            x = i[1],
            C = i[5],
            T = i[9],
            S = i[13],
            E = i[2],
            k = i[6],
            P = i[10],
            I = i[14],
            A = i[3],
            O = i[7],
            D = i[11],
            i = i[15];
          return (
            (t[0] = e * _ + r * x + s * E + o * A),
            (t[4] = e * y + r * C + s * k + o * O),
            (t[8] = e * b + r * T + s * P + o * D),
            (t[12] = e * w + r * S + s * I + o * i),
            (t[1] = a * _ + l * x + c * E + u * A),
            (t[5] = a * y + l * C + c * k + u * O),
            (t[9] = a * b + l * T + c * P + u * D),
            (t[13] = a * w + l * S + c * I + u * i),
            (t[2] = h * _ + d * x + p * E + f * A),
            (t[6] = h * y + d * C + p * k + f * O),
            (t[10] = h * b + d * T + p * P + f * D),
            (t[14] = h * w + d * S + p * I + f * i),
            (t[3] = m * _ + g * x + v * E + n * A),
            (t[7] = m * y + g * C + v * k + n * O),
            (t[11] = m * b + g * T + v * P + n * D),
            (t[15] = m * w + g * S + v * I + n * i),
            this
          );
        },
        multiplyScalar: function (e) {
          var t = this.elements;
          return (
            (t[0] *= e),
            (t[4] *= e),
            (t[8] *= e),
            (t[12] *= e),
            (t[1] *= e),
            (t[5] *= e),
            (t[9] *= e),
            (t[13] *= e),
            (t[2] *= e),
            (t[6] *= e),
            (t[10] *= e),
            (t[14] *= e),
            (t[3] *= e),
            (t[7] *= e),
            (t[11] *= e),
            (t[15] *= e),
            this
          );
        },
        applyToBufferAttribute: (function () {
          var e = new l();
          return function (t) {
            for (var n = 0, i = t.count; i > n; n++)
              (e.x = t.getX(n)),
                (e.y = t.getY(n)),
                (e.z = t.getZ(n)),
                e.applyMatrix4(this),
                t.setXYZ(n, e.x, e.y, e.z);
            return t;
          };
        })(),
        determinant: function () {
          var e = this.elements,
            t = e[0],
            n = e[4],
            i = e[8],
            r = e[12],
            s = e[1],
            o = e[5],
            a = e[9],
            l = e[13],
            c = e[2],
            u = e[6],
            h = e[10],
            d = e[14];
          return (
            e[3] *
              (+r * a * u -
                i * l * u -
                r * o * h +
                n * l * h +
                i * o * d -
                n * a * d) +
            e[7] *
              (+t * a * d -
                t * l * h +
                r * s * h -
                i * s * d +
                i * l * c -
                r * a * c) +
            e[11] *
              (+t * l * u -
                t * o * d -
                r * s * u +
                n * s * d +
                r * o * c -
                n * l * c) +
            e[15] *
              (-i * o * c -
                t * a * u +
                t * o * h +
                i * s * u -
                n * s * h +
                n * a * c)
          );
        },
        transpose: function () {
          var e = this.elements,
            t = e[1];
          return (
            (e[1] = e[4]),
            (e[4] = t),
            (t = e[2]),
            (e[2] = e[8]),
            (e[8] = t),
            (t = e[6]),
            (e[6] = e[9]),
            (e[9] = t),
            (t = e[3]),
            (e[3] = e[12]),
            (e[12] = t),
            (t = e[7]),
            (e[7] = e[13]),
            (e[13] = t),
            (t = e[11]),
            (e[11] = e[14]),
            (e[14] = t),
            this
          );
        },
        setPosition: function (e) {
          var t = this.elements;
          return (t[12] = e.x), (t[13] = e.y), (t[14] = e.z), this;
        },
        getInverse: function (e, t) {
          var n = this.elements,
            i = e.elements;
          e = i[0];
          var r = i[1],
            s = i[2],
            o = i[3],
            a = i[4],
            l = i[5],
            c = i[6],
            u = i[7],
            h = i[8],
            d = i[9],
            p = i[10],
            f = i[11],
            m = i[12],
            g = i[13],
            v = i[14],
            i = i[15],
            _ =
              d * v * u -
              g * p * u +
              g * c * f -
              l * v * f -
              d * c * i +
              l * p * i,
            y =
              m * p * u -
              h * v * u -
              m * c * f +
              a * v * f +
              h * c * i -
              a * p * i,
            b =
              h * g * u -
              m * d * u +
              m * l * f -
              a * g * f -
              h * l * i +
              a * d * i,
            w =
              m * d * c -
              h * g * c -
              m * l * p +
              a * g * p +
              h * l * v -
              a * d * v,
            x = e * _ + r * y + s * b + o * w;
          if (0 === x) {
            if (!0 === t)
              throw Error(
                "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"
              );
            return (
              console.warn(
                "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"
              ),
              this.identity()
            );
          }
          return (
            (t = 1 / x),
            (n[0] = _ * t),
            (n[1] =
              (g * p * o -
                d * v * o -
                g * s * f +
                r * v * f +
                d * s * i -
                r * p * i) *
              t),
            (n[2] =
              (l * v * o -
                g * c * o +
                g * s * u -
                r * v * u -
                l * s * i +
                r * c * i) *
              t),
            (n[3] =
              (d * c * o -
                l * p * o -
                d * s * u +
                r * p * u +
                l * s * f -
                r * c * f) *
              t),
            (n[4] = y * t),
            (n[5] =
              (h * v * o -
                m * p * o +
                m * s * f -
                e * v * f -
                h * s * i +
                e * p * i) *
              t),
            (n[6] =
              (m * c * o -
                a * v * o -
                m * s * u +
                e * v * u +
                a * s * i -
                e * c * i) *
              t),
            (n[7] =
              (a * p * o -
                h * c * o +
                h * s * u -
                e * p * u -
                a * s * f +
                e * c * f) *
              t),
            (n[8] = b * t),
            (n[9] =
              (m * d * o -
                h * g * o -
                m * r * f +
                e * g * f +
                h * r * i -
                e * d * i) *
              t),
            (n[10] =
              (a * g * o -
                m * l * o +
                m * r * u -
                e * g * u -
                a * r * i +
                e * l * i) *
              t),
            (n[11] =
              (h * l * o -
                a * d * o -
                h * r * u +
                e * d * u +
                a * r * f -
                e * l * f) *
              t),
            (n[12] = w * t),
            (n[13] =
              (h * g * s -
                m * d * s +
                m * r * p -
                e * g * p -
                h * r * v +
                e * d * v) *
              t),
            (n[14] =
              (m * l * s -
                a * g * s -
                m * r * c +
                e * g * c +
                a * r * v -
                e * l * v) *
              t),
            (n[15] =
              (a * d * s -
                h * l * s +
                h * r * c -
                e * d * c -
                a * r * p +
                e * l * p) *
              t),
            this
          );
        },
        scale: function (e) {
          var t = this.elements,
            n = e.x,
            i = e.y;
          return (
            (e = e.z),
            (t[0] *= n),
            (t[4] *= i),
            (t[8] *= e),
            (t[1] *= n),
            (t[5] *= i),
            (t[9] *= e),
            (t[2] *= n),
            (t[6] *= i),
            (t[10] *= e),
            (t[3] *= n),
            (t[7] *= i),
            (t[11] *= e),
            this
          );
        },
        getMaxScaleOnAxis: function () {
          var e = this.elements;
          return Math.sqrt(
            Math.max(
              e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
              e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
              e[8] * e[8] + e[9] * e[9] + e[10] * e[10]
            )
          );
        },
        makeTranslation: function (e, t, n) {
          return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this;
        },
        makeRotationX: function (e) {
          var t = Math.cos(e);
          return (
            (e = Math.sin(e)),
            this.set(1, 0, 0, 0, 0, t, -e, 0, 0, e, t, 0, 0, 0, 0, 1),
            this
          );
        },
        makeRotationY: function (e) {
          var t = Math.cos(e);
          return (
            (e = Math.sin(e)),
            this.set(t, 0, e, 0, 0, 1, 0, 0, -e, 0, t, 0, 0, 0, 0, 1),
            this
          );
        },
        makeRotationZ: function (e) {
          var t = Math.cos(e);
          return (
            (e = Math.sin(e)),
            this.set(t, -e, 0, 0, e, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1),
            this
          );
        },
        makeRotationAxis: function (e, t) {
          var n = Math.cos(t);
          t = Math.sin(t);
          var i = 1 - n,
            r = e.x,
            s = e.y;
          e = e.z;
          var o = i * r,
            a = i * s;
          return (
            this.set(
              o * r + n,
              o * s - t * e,
              o * e + t * s,
              0,
              o * s + t * e,
              a * s + n,
              a * e - t * r,
              0,
              o * e - t * s,
              a * e + t * r,
              i * e * e + n,
              0,
              0,
              0,
              0,
              1
            ),
            this
          );
        },
        makeScale: function (e, t, n) {
          return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this;
        },
        makeShear: function (e, t, n) {
          return this.set(1, t, n, 0, e, 1, n, 0, e, t, 1, 0, 0, 0, 0, 1), this;
        },
        compose: function (e, t, n) {
          return (
            this.makeRotationFromQuaternion(t),
            this.scale(n),
            this.setPosition(e),
            this
          );
        },
        decompose: (function () {
          var e = new l(),
            t = new c();
          return function (n, i, r) {
            var s = this.elements,
              o = e.set(s[0], s[1], s[2]).length(),
              a = e.set(s[4], s[5], s[6]).length(),
              l = e.set(s[8], s[9], s[10]).length();
            0 > this.determinant() && (o = -o),
              (n.x = s[12]),
              (n.y = s[13]),
              (n.z = s[14]),
              t.copy(this),
              (n = 1 / o);
            var s = 1 / a,
              c = 1 / l;
            return (
              (t.elements[0] *= n),
              (t.elements[1] *= n),
              (t.elements[2] *= n),
              (t.elements[4] *= s),
              (t.elements[5] *= s),
              (t.elements[6] *= s),
              (t.elements[8] *= c),
              (t.elements[9] *= c),
              (t.elements[10] *= c),
              i.setFromRotationMatrix(t),
              (r.x = o),
              (r.y = a),
              (r.z = l),
              this
            );
          };
        })(),
        makePerspective: function (e, t, n, i, r, s) {
          void 0 === s &&
            console.warn(
              "THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs."
            );
          var o = this.elements;
          return (
            (o[0] = (2 * r) / (t - e)),
            (o[4] = 0),
            (o[8] = (t + e) / (t - e)),
            (o[12] = 0),
            (o[1] = 0),
            (o[5] = (2 * r) / (n - i)),
            (o[9] = (n + i) / (n - i)),
            (o[13] = 0),
            (o[2] = 0),
            (o[6] = 0),
            (o[10] = -(s + r) / (s - r)),
            (o[14] = (-2 * s * r) / (s - r)),
            (o[3] = 0),
            (o[7] = 0),
            (o[11] = -1),
            (o[15] = 0),
            this
          );
        },
        makeOrthographic: function (e, t, n, i, r, s) {
          var o = this.elements,
            a = 1 / (t - e),
            l = 1 / (n - i),
            c = 1 / (s - r);
          return (
            (o[0] = 2 * a),
            (o[4] = 0),
            (o[8] = 0),
            (o[12] = -((t + e) * a)),
            (o[1] = 0),
            (o[5] = 2 * l),
            (o[9] = 0),
            (o[13] = -((n + i) * l)),
            (o[2] = 0),
            (o[6] = 0),
            (o[10] = -2 * c),
            (o[14] = -((s + r) * c)),
            (o[3] = 0),
            (o[7] = 0),
            (o[11] = 0),
            (o[15] = 1),
            this
          );
        },
        equals: function (e) {
          var t = this.elements;
          e = e.elements;
          for (var n = 0; 16 > n; n++) if (t[n] !== e[n]) return !1;
          return !0;
        },
        fromArray: function (e, t) {
          void 0 === t && (t = 0);
          for (var n = 0; 16 > n; n++) this.elements[n] = e[n + t];
          return this;
        },
        toArray: function (e, t) {
          void 0 === e && (e = []), void 0 === t && (t = 0);
          var n = this.elements;
          return (
            (e[t] = n[0]),
            (e[t + 1] = n[1]),
            (e[t + 2] = n[2]),
            (e[t + 3] = n[3]),
            (e[t + 4] = n[4]),
            (e[t + 5] = n[5]),
            (e[t + 6] = n[6]),
            (e[t + 7] = n[7]),
            (e[t + 8] = n[8]),
            (e[t + 9] = n[9]),
            (e[t + 10] = n[10]),
            (e[t + 11] = n[11]),
            (e[t + 12] = n[12]),
            (e[t + 13] = n[13]),
            (e[t + 14] = n[14]),
            (e[t + 15] = n[15]),
            e
          );
        },
      }),
      (u.prototype = Object.create(i.prototype)),
      (u.prototype.constructor = u),
      (u.prototype.isDataTexture = !0),
      (h.prototype = Object.create(i.prototype)),
      (h.prototype.constructor = h),
      (h.prototype.isCubeTexture = !0),
      Object.defineProperty(h.prototype, "images", {
        get: function () {
          return this.image;
        },
        set: function (e) {
          this.image = e;
        },
      });
    var Is = new i(),
      As = new h(),
      Os = [],
      Ds = [],
      Ms = new Float32Array(16),
      Rs = new Float32Array(9);
    H.prototype.setValue = function (e, t) {
      for (var n = this.seq, i = 0, r = n.length; i !== r; ++i) {
        var s = n[i];
        s.setValue(e, t[s.id]);
      }
    };
    var Ls = /([\w\d_]+)(\])?(\[|\.)?/g;
    ($.prototype.setValue = function (e, t, n) {
      (t = this.map[t]), void 0 !== t && t.setValue(e, n, this.renderer);
    }),
      ($.prototype.setOptional = function (e, t, n) {
        (t = t[n]), void 0 !== t && this.setValue(e, n, t);
      }),
      ($.upload = function (e, t, n, i) {
        for (var r = 0, s = t.length; r !== s; ++r) {
          var o = t[r],
            a = n[o.id];
          !1 !== a.needsUpdate && o.setValue(e, a.value, i);
        }
      }),
      ($.seqWithValue = function (e, t) {
        for (var n = [], i = 0, r = e.length; i !== r; ++i) {
          var s = e[i];
          s.id in t && n.push(s);
        }
        return n;
      });
    var Ns = {
      aliceblue: 15792383,
      antiquewhite: 16444375,
      aqua: 65535,
      aquamarine: 8388564,
      azure: 15794175,
      beige: 16119260,
      bisque: 16770244,
      black: 0,
      blanchedalmond: 16772045,
      blue: 255,
      blueviolet: 9055202,
      brown: 10824234,
      burlywood: 14596231,
      cadetblue: 6266528,
      chartreuse: 8388352,
      chocolate: 13789470,
      coral: 16744272,
      cornflowerblue: 6591981,
      cornsilk: 16775388,
      crimson: 14423100,
      cyan: 65535,
      darkblue: 139,
      darkcyan: 35723,
      darkgoldenrod: 12092939,
      darkgray: 11119017,
      darkgreen: 25600,
      darkgrey: 11119017,
      darkkhaki: 12433259,
      darkmagenta: 9109643,
      darkolivegreen: 5597999,
      darkorange: 16747520,
      darkorchid: 10040012,
      darkred: 9109504,
      darksalmon: 15308410,
      darkseagreen: 9419919,
      darkslateblue: 4734347,
      darkslategray: 3100495,
      darkslategrey: 3100495,
      darkturquoise: 52945,
      darkviolet: 9699539,
      deeppink: 16716947,
      deepskyblue: 49151,
      dimgray: 6908265,
      dimgrey: 6908265,
      dodgerblue: 2003199,
      firebrick: 11674146,
      floralwhite: 16775920,
      forestgreen: 2263842,
      fuchsia: 16711935,
      gainsboro: 14474460,
      ghostwhite: 16316671,
      gold: 16766720,
      goldenrod: 14329120,
      gray: 8421504,
      green: 32768,
      greenyellow: 11403055,
      grey: 8421504,
      honeydew: 15794160,
      hotpink: 16738740,
      indianred: 13458524,
      indigo: 4915330,
      ivory: 16777200,
      khaki: 15787660,
      lavender: 15132410,
      lavenderblush: 16773365,
      lawngreen: 8190976,
      lemonchiffon: 16775885,
      lightblue: 11393254,
      lightcoral: 15761536,
      lightcyan: 14745599,
      lightgoldenrodyellow: 16448210,
      lightgray: 13882323,
      lightgreen: 9498256,
      lightgrey: 13882323,
      lightpink: 16758465,
      lightsalmon: 16752762,
      lightseagreen: 2142890,
      lightskyblue: 8900346,
      lightslategray: 7833753,
      lightslategrey: 7833753,
      lightsteelblue: 11584734,
      lightyellow: 16777184,
      lime: 65280,
      limegreen: 3329330,
      linen: 16445670,
      magenta: 16711935,
      maroon: 8388608,
      mediumaquamarine: 6737322,
      mediumblue: 205,
      mediumorchid: 12211667,
      mediumpurple: 9662683,
      mediumseagreen: 3978097,
      mediumslateblue: 8087790,
      mediumspringgreen: 64154,
      mediumturquoise: 4772300,
      mediumvioletred: 13047173,
      midnightblue: 1644912,
      mintcream: 16121850,
      mistyrose: 16770273,
      moccasin: 16770229,
      navajowhite: 16768685,
      navy: 128,
      oldlace: 16643558,
      olive: 8421376,
      olivedrab: 7048739,
      orange: 16753920,
      orangered: 16729344,
      orchid: 14315734,
      palegoldenrod: 15657130,
      palegreen: 10025880,
      paleturquoise: 11529966,
      palevioletred: 14381203,
      papayawhip: 16773077,
      peachpuff: 16767673,
      peru: 13468991,
      pink: 16761035,
      plum: 14524637,
      powderblue: 11591910,
      purple: 8388736,
      rebeccapurple: 6697881,
      red: 16711680,
      rosybrown: 12357519,
      royalblue: 4286945,
      saddlebrown: 9127187,
      salmon: 16416882,
      sandybrown: 16032864,
      seagreen: 3050327,
      seashell: 16774638,
      sienna: 10506797,
      silver: 12632256,
      skyblue: 8900331,
      slateblue: 6970061,
      slategray: 7372944,
      slategrey: 7372944,
      snow: 16775930,
      springgreen: 65407,
      steelblue: 4620980,
      tan: 13808780,
      teal: 32896,
      thistle: 14204888,
      tomato: 16737095,
      turquoise: 4251856,
      violet: 15631086,
      wheat: 16113331,
      white: 16777215,
      whitesmoke: 16119285,
      yellow: 16776960,
      yellowgreen: 10145074,
    };
    Object.assign(z.prototype, {
      isColor: !0,
      r: 1,
      g: 1,
      b: 1,
      set: function (e) {
        return (
          e && e.isColor
            ? this.copy(e)
            : "number" == typeof e
            ? this.setHex(e)
            : "string" == typeof e && this.setStyle(e),
          this
        );
      },
      setScalar: function (e) {
        return (this.b = this.g = this.r = e), this;
      },
      setHex: function (e) {
        return (
          (e = Math.floor(e)),
          (this.r = ((e >> 16) & 255) / 255),
          (this.g = ((e >> 8) & 255) / 255),
          (this.b = (255 & e) / 255),
          this
        );
      },
      setRGB: function (e, t, n) {
        return (this.r = e), (this.g = t), (this.b = n), this;
      },
      setHSL: (function () {
        function e(e, t, n) {
          return (
            0 > n && (n += 1),
            n > 1 && --n,
            1 / 6 > n
              ? e + 6 * (t - e) * n
              : 0.5 > n
              ? t
              : 2 / 3 > n
              ? e + 6 * (t - e) * (2 / 3 - n)
              : e
          );
        }
        return function (t, n, i) {
          return (
            (t = ks.euclideanModulo(t, 1)),
            (n = ks.clamp(n, 0, 1)),
            (i = ks.clamp(i, 0, 1)),
            0 === n
              ? (this.r = this.g = this.b = i)
              : ((n = 0.5 >= i ? i * (1 + n) : i + n - i * n),
                (i = 2 * i - n),
                (this.r = e(i, n, t + 1 / 3)),
                (this.g = e(i, n, t)),
                (this.b = e(i, n, t - 1 / 3))),
            this
          );
        };
      })(),
      setStyle: function (e) {
        function t(t) {
          void 0 !== t &&
            1 > parseFloat(t) &&
            console.warn(
              "THREE.Color: Alpha component of " + e + " will be ignored."
            );
        }
        var n;
        if ((n = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e))) {
          var i = n[2];
          switch (n[1]) {
            case "rgb":
            case "rgba":
              if (
                (n =
                  /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                    i
                  ))
              )
                return (
                  (this.r = Math.min(255, parseInt(n[1], 10)) / 255),
                  (this.g = Math.min(255, parseInt(n[2], 10)) / 255),
                  (this.b = Math.min(255, parseInt(n[3], 10)) / 255),
                  t(n[5]),
                  this
                );
              if (
                (n =
                  /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                    i
                  ))
              )
                return (
                  (this.r = Math.min(100, parseInt(n[1], 10)) / 100),
                  (this.g = Math.min(100, parseInt(n[2], 10)) / 100),
                  (this.b = Math.min(100, parseInt(n[3], 10)) / 100),
                  t(n[5]),
                  this
                );
              break;
            case "hsl":
            case "hsla":
              if (
                (n =
                  /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(
                    i
                  ))
              ) {
                var i = parseFloat(n[1]) / 360,
                  r = parseInt(n[2], 10) / 100,
                  s = parseInt(n[3], 10) / 100;
                return t(n[5]), this.setHSL(i, r, s);
              }
          }
        } else if ((n = /^\#([A-Fa-f0-9]+)$/.exec(e))) {
          if (((n = n[1]), (i = n.length), 3 === i))
            return (
              (this.r = parseInt(n.charAt(0) + n.charAt(0), 16) / 255),
              (this.g = parseInt(n.charAt(1) + n.charAt(1), 16) / 255),
              (this.b = parseInt(n.charAt(2) + n.charAt(2), 16) / 255),
              this
            );
          if (6 === i)
            return (
              (this.r = parseInt(n.charAt(0) + n.charAt(1), 16) / 255),
              (this.g = parseInt(n.charAt(2) + n.charAt(3), 16) / 255),
              (this.b = parseInt(n.charAt(4) + n.charAt(5), 16) / 255),
              this
            );
        }
        return (
          e &&
            0 < e.length &&
            ((n = Ns[e]),
            void 0 !== n
              ? this.setHex(n)
              : console.warn("THREE.Color: Unknown color " + e)),
          this
        );
      },
      clone: function () {
        return new this.constructor(this.r, this.g, this.b);
      },
      copy: function (e) {
        return (this.r = e.r), (this.g = e.g), (this.b = e.b), this;
      },
      copyGammaToLinear: function (e, t) {
        return (
          void 0 === t && (t = 2),
          (this.r = Math.pow(e.r, t)),
          (this.g = Math.pow(e.g, t)),
          (this.b = Math.pow(e.b, t)),
          this
        );
      },
      copyLinearToGamma: function (e, t) {
        return (
          void 0 === t && (t = 2),
          (t = t > 0 ? 1 / t : 1),
          (this.r = Math.pow(e.r, t)),
          (this.g = Math.pow(e.g, t)),
          (this.b = Math.pow(e.b, t)),
          this
        );
      },
      convertGammaToLinear: function () {
        var e = this.r,
          t = this.g,
          n = this.b;
        return (this.r = e * e), (this.g = t * t), (this.b = n * n), this;
      },
      convertLinearToGamma: function () {
        return (
          (this.r = Math.sqrt(this.r)),
          (this.g = Math.sqrt(this.g)),
          (this.b = Math.sqrt(this.b)),
          this
        );
      },
      getHex: function () {
        return (
          ((255 * this.r) << 16) ^ ((255 * this.g) << 8) ^ ((255 * this.b) << 0)
        );
      },
      getHexString: function () {
        return ("000000" + this.getHex().toString(16)).slice(-6);
      },
      getHSL: function (e) {
        e = e || { h: 0, s: 0, l: 0 };
        var t,
          n = this.r,
          i = this.g,
          r = this.b,
          s = Math.max(n, i, r),
          o = Math.min(n, i, r),
          a = (o + s) / 2;
        if (o === s) o = t = 0;
        else {
          var l = s - o,
            o = 0.5 >= a ? l / (s + o) : l / (2 - s - o);
          switch (s) {
            case n:
              t = (i - r) / l + (r > i ? 6 : 0);
              break;
            case i:
              t = (r - n) / l + 2;
              break;
            case r:
              t = (n - i) / l + 4;
          }
          t /= 6;
        }
        return (e.h = t), (e.s = o), (e.l = a), e;
      },
      getStyle: function () {
        return (
          "rgb(" +
          ((255 * this.r) | 0) +
          "," +
          ((255 * this.g) | 0) +
          "," +
          ((255 * this.b) | 0) +
          ")"
        );
      },
      offsetHSL: function (e, t, n) {
        var i = this.getHSL();
        return (
          (i.h += e), (i.s += t), (i.l += n), this.setHSL(i.h, i.s, i.l), this
        );
      },
      add: function (e) {
        return (this.r += e.r), (this.g += e.g), (this.b += e.b), this;
      },
      addColors: function (e, t) {
        return (
          (this.r = e.r + t.r), (this.g = e.g + t.g), (this.b = e.b + t.b), this
        );
      },
      addScalar: function (e) {
        return (this.r += e), (this.g += e), (this.b += e), this;
      },
      sub: function (e) {
        return (
          (this.r = Math.max(0, this.r - e.r)),
          (this.g = Math.max(0, this.g - e.g)),
          (this.b = Math.max(0, this.b - e.b)),
          this
        );
      },
      multiply: function (e) {
        return (this.r *= e.r), (this.g *= e.g), (this.b *= e.b), this;
      },
      multiplyScalar: function (e) {
        return (this.r *= e), (this.g *= e), (this.b *= e), this;
      },
      lerp: function (e, t) {
        return (
          (this.r += (e.r - this.r) * t),
          (this.g += (e.g - this.g) * t),
          (this.b += (e.b - this.b) * t),
          this
        );
      },
      equals: function (e) {
        return e.r === this.r && e.g === this.g && e.b === this.b;
      },
      fromArray: function (e, t) {
        return (
          void 0 === t && (t = 0),
          (this.r = e[t]),
          (this.g = e[t + 1]),
          (this.b = e[t + 2]),
          this
        );
      },
      toArray: function (e, t) {
        return (
          void 0 === e && (e = []),
          void 0 === t && (t = 0),
          (e[t] = this.r),
          (e[t + 1] = this.g),
          (e[t + 2] = this.b),
          e
        );
      },
      toJSON: function () {
        return this.getHex();
      },
    });
    var Us = {
        common: {
          diffuse: { value: new z(15658734) },
          opacity: { value: 1 },
          map: { value: null },
          offsetRepeat: { value: new r(0, 0, 1, 1) },
          alphaMap: { value: null },
        },
        specularmap: { specularMap: { value: null } },
        envmap: {
          envMap: { value: null },
          flipEnvMap: { value: -1 },
          reflectivity: { value: 1 },
          refractionRatio: { value: 0.98 },
        },
        aomap: { aoMap: { value: null }, aoMapIntensity: { value: 1 } },
        lightmap: {
          lightMap: { value: null },
          lightMapIntensity: { value: 1 },
        },
        emissivemap: { emissiveMap: { value: null } },
        bumpmap: { bumpMap: { value: null }, bumpScale: { value: 1 } },
        normalmap: {
          normalMap: { value: null },
          normalScale: { value: new n(1, 1) },
        },
        displacementmap: {
          displacementMap: { value: null },
          displacementScale: { value: 1 },
          displacementBias: { value: 0 },
        },
        roughnessmap: { roughnessMap: { value: null } },
        metalnessmap: { metalnessMap: { value: null } },
        gradientmap: { gradientMap: { value: null } },
        fog: {
          fogDensity: { value: 25e-5 },
          fogNear: { value: 1 },
          fogFar: { value: 2e3 },
          fogColor: { value: new z(16777215) },
        },
        lights: {
          ambientLightColor: { value: [] },
          directionalLights: {
            value: [],
            properties: {
              direction: {},
              color: {},
              shadow: {},
              shadowBias: {},
              shadowRadius: {},
              shadowMapSize: {},
            },
          },
          directionalShadowMap: { value: [] },
          directionalShadowMatrix: { value: [] },
          spotLights: {
            value: [],
            properties: {
              color: {},
              position: {},
              direction: {},
              distance: {},
              coneCos: {},
              penumbraCos: {},
              decay: {},
              shadow: {},
              shadowBias: {},
              shadowRadius: {},
              shadowMapSize: {},
            },
          },
          spotShadowMap: { value: [] },
          spotShadowMatrix: { value: [] },
          pointLights: {
            value: [],
            properties: {
              color: {},
              position: {},
              decay: {},
              distance: {},
              shadow: {},
              shadowBias: {},
              shadowRadius: {},
              shadowMapSize: {},
              shadowCameraNear: {},
              shadowCameraFar: {},
            },
          },
          pointShadowMap: { value: [] },
          pointShadowMatrix: { value: [] },
          hemisphereLights: {
            value: [],
            properties: { direction: {}, skyColor: {}, groundColor: {} },
          },
          rectAreaLights: {
            value: [],
            properties: { color: {}, position: {}, width: {}, height: {} },
          },
        },
        points: {
          diffuse: { value: new z(15658734) },
          opacity: { value: 1 },
          size: { value: 1 },
          scale: { value: 1 },
          map: { value: null },
          offsetRepeat: { value: new r(0, 0, 1, 1) },
        },
      },
      Bs = {
        merge: function (e) {
          for (var t = {}, n = 0; n < e.length; n++) {
            var i,
              r = this.clone(e[n]);
            for (i in r) t[i] = r[i];
          }
          return t;
        },
        clone: function (e) {
          var t,
            n = {};
          for (t in e) {
            n[t] = {};
            for (var i in e[t]) {
              var r = e[t][i];
              n[t][i] =
                r &&
                (r.isColor ||
                  r.isMatrix3 ||
                  r.isMatrix4 ||
                  r.isVector2 ||
                  r.isVector3 ||
                  r.isVector4 ||
                  r.isTexture)
                  ? r.clone()
                  : Array.isArray(r)
                  ? r.slice()
                  : r;
            }
          }
          return n;
        },
      },
      Fs = {
        alphamap_fragment:
          "#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",
        alphamap_pars_fragment:
          "#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",
        alphatest_fragment:
          "#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",
        aomap_fragment:
          "#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n",
        aomap_pars_fragment:
          "#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",
        begin_vertex: "\nvec3 transformed = vec3( position );\n",
        beginnormal_vertex: "\nvec3 objectNormal = vec3( normal );\n",
        bsdfs:
          "float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		return distanceFalloff * maxDistanceCutoffFactor;\n#else\n		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n	}\n	return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS  = 0.5 / LUT_SIZE;\n	float theta = acos( dot( N, V ) );\n	vec2 uv = vec2(\n		sqrt( saturate( roughness ) ),\n		saturate( theta / ( 0.5 * PI ) ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n	float b = 3.45068 + (4.18814 + y) * y;\n	float v = a / b;\n	float theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	vec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n	return result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",
        bumpmap_pars_fragment:
          "#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",
        clipping_planes_fragment:
          "#if NUM_CLIPPING_PLANES > 0\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n		vec4 plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n		\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n			vec4 plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	\n	#endif\n#endif\n",
        clipping_planes_pars_fragment:
          "#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",
        clipping_planes_pars_vertex:
          "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	varying vec3 vViewPosition;\n#endif\n",
        clipping_planes_vertex:
          "#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	vViewPosition = - mvPosition.xyz;\n#endif\n",
        color_fragment: "#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",
        color_pars_fragment: "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",
        color_pars_vertex: "#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",
        color_vertex: "#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",
        common:
          "#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n	mat3 tmp;\n	tmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n	tmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n	tmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n	return tmp;\n}\n",
        cube_uv_reflection_fragment:
          "#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif\n",
        defaultnormal_vertex:
          "vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n",
        displacementmap_pars_vertex:
          "#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",
        displacementmap_vertex:
          "#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",
        emissivemap_fragment:
          "#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",
        emissivemap_pars_fragment:
          "#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",
        encodings_fragment:
          "  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",
        encodings_pars_fragment:
          "\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M            = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float D      = max( maxRange / maxRGB, 1.0 );\n	D            = min( floor( D ) / 255.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract(Le);\n	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n	return vec4( max(vRGB, 0.0), 1.0 );\n}\n",
        envmap_fragment:
          "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		reflectVec = normalize( reflectVec );\n		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		reflectVec = normalize( reflectVec );\n		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",
        envmap_pars_fragment:
          "#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",
        envmap_pars_vertex:
          "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif\n",
        envmap_vertex:
          "#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif\n",
        fog_vertex: "\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",
        fog_pars_vertex: "#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",
        fog_fragment:
          "#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",
        fog_pars_fragment:
          "#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif\n",
        gradientmap_pars_fragment:
          "#ifdef TOON\n	uniform sampler2D gradientMap;\n	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n		float dotNL = dot( normal, lightDirection );\n		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n		#ifdef USE_GRADIENTMAP\n			return texture2D( gradientMap, coord ).rgb;\n		#else\n			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n		#endif\n	}\n#endif\n",
        lightmap_fragment:
          "#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",
        lightmap_pars_fragment:
          "#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",
        lights_lambert_vertex:
          "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",
        lights_pars:
          "uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n		float shadowCameraNear;\n		float shadowCameraFar;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltcMat;	uniform sampler2D ltcMag;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",
        lights_phong_fragment:
          "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",
        lights_phong_pars_fragment:
          "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifdef TOON\n		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#else\n		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n		vec3 irradiance = dotNL * directLight.color;\n	#endif\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",
        lights_physical_fragment:
          "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",
        lights_physical_pars_fragment:
          "struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		float norm = texture2D( ltcMag, uv ).a;\n		vec4 t = texture2D( ltcMat, uv );\n		mat3 mInv = mat3(\n			vec3(   1,   0, t.y ),\n			vec3(   0, t.z,   0 ),\n			vec3( t.w,   0, t.x )\n		);\n		reflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",
        lights_template:
          "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n		irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n	#endif\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n	#ifndef STANDARD\n		vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n	#else\n		vec3 clearCoatRadiance = vec3( 0.0 );\n	#endif\n	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",
        logdepthbuf_fragment:
          "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",
        logdepthbuf_pars_fragment:
          "#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",
        logdepthbuf_pars_vertex:
          "#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",
        logdepthbuf_vertex:
          "#ifdef USE_LOGDEPTHBUF\n	gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n	#endif\n#endif\n",
        map_fragment:
          "#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n",
        map_pars_fragment: "#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n",
        map_particle_fragment:
          "#ifdef USE_MAP\n	vec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",
        map_particle_pars_fragment:
          "#ifdef USE_MAP\n	uniform vec4 offsetRepeat;\n	uniform sampler2D map;\n#endif\n",
        metalnessmap_fragment:
          "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif\n",
        metalnessmap_pars_fragment:
          "#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",
        morphnormal_vertex:
          "#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",
        morphtarget_pars_vertex:
          "#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",
        morphtarget_vertex:
          "#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",
        normal_fragment:
          "#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n#endif\n#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",
        normalmap_pars_fragment:
          "#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",
        packing:
          "vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",
        premultiplied_alpha_fragment:
          "#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",
        project_vertex:
          "vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",
        dithering_fragment:
          "#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",
        dithering_pars_fragment:
          "#if defined( DITHERING )\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif\n",
        roughnessmap_fragment:
          "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif\n",
        roughnessmap_pars_fragment:
          "#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",
        shadowmap_pars_fragment:
          "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",
        shadowmap_pars_vertex:
          "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",
        shadowmap_vertex:
          "#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",
        shadowmask_pars_fragment:
          "float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",
        skinbase_vertex:
          "#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
        skinning_pars_vertex:
          "#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureSize;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureSize ) );\n			float y = floor( j / float( boneTextureSize ) );\n			float dx = 1.0 / float( boneTextureSize );\n			float dy = 1.0 / float( boneTextureSize );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",
        skinning_vertex:
          "#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",
        skinnormal_vertex:
          "#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",
        specularmap_fragment:
          "float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",
        specularmap_pars_fragment:
          "#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",
        tonemapping_fragment:
          "#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",
        tonemapping_pars_fragment:
          "#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",
        uv_pars_fragment:
          "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",
        uv_pars_vertex:
          "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n#endif\n",
        uv_vertex:
          "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",
        uv2_pars_fragment:
          "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",
        uv2_pars_vertex:
          "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",
        uv2_vertex:
          "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",
        worldpos_vertex:
          "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",
        cube_frag:
          "uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	gl_FragColor.a *= opacity;\n}\n",
        cube_vert:
          "varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",
        depth_frag:
          "#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}\n",
        depth_vert:
          "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",
        distanceRGBA_frag:
          "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}\n",
        distanceRGBA_vert:
          "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}\n",
        equirect_frag:
          "uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",
        equirect_vert:
          "varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",
        linedashed_frag:
          "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",
        linedashed_vert:
          "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}\n",
        meshbasic_frag:
          "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",
        meshbasic_vert:
          "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}\n",
        meshlambert_frag:
          "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",
        meshlambert_vert:
          "#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",
        meshphong_frag:
          "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",
        meshphong_vert:
          "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",
        meshphysical_frag:
          "#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_template>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",
        meshphysical_vert:
          "#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",
        normal_frag:
          "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",
        normal_vert:
          "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}\n",
        points_frag:
          "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",
        points_vert:
          "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",
        shadow_frag:
          "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n",
        shadow_vert:
          "#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n}\n",
      },
      js = {
        basic: {
          uniforms: Bs.merge([
            Us.common,
            Us.specularmap,
            Us.envmap,
            Us.aomap,
            Us.lightmap,
            Us.fog,
          ]),
          vertexShader: Fs.meshbasic_vert,
          fragmentShader: Fs.meshbasic_frag,
        },
        lambert: {
          uniforms: Bs.merge([
            Us.common,
            Us.specularmap,
            Us.envmap,
            Us.aomap,
            Us.lightmap,
            Us.emissivemap,
            Us.fog,
            Us.lights,
            { emissive: { value: new z(0) } },
          ]),
          vertexShader: Fs.meshlambert_vert,
          fragmentShader: Fs.meshlambert_frag,
        },
        phong: {
          uniforms: Bs.merge([
            Us.common,
            Us.specularmap,
            Us.envmap,
            Us.aomap,
            Us.lightmap,
            Us.emissivemap,
            Us.bumpmap,
            Us.normalmap,
            Us.displacementmap,
            Us.gradientmap,
            Us.fog,
            Us.lights,
            {
              emissive: { value: new z(0) },
              specular: { value: new z(1118481) },
              shininess: { value: 30 },
            },
          ]),
          vertexShader: Fs.meshphong_vert,
          fragmentShader: Fs.meshphong_frag,
        },
        standard: {
          uniforms: Bs.merge([
            Us.common,
            Us.envmap,
            Us.aomap,
            Us.lightmap,
            Us.emissivemap,
            Us.bumpmap,
            Us.normalmap,
            Us.displacementmap,
            Us.roughnessmap,
            Us.metalnessmap,
            Us.fog,
            Us.lights,
            {
              emissive: { value: new z(0) },
              roughness: { value: 0.5 },
              metalness: { value: 0.5 },
              envMapIntensity: { value: 1 },
            },
          ]),
          vertexShader: Fs.meshphysical_vert,
          fragmentShader: Fs.meshphysical_frag,
        },
        points: {
          uniforms: Bs.merge([Us.points, Us.fog]),
          vertexShader: Fs.points_vert,
          fragmentShader: Fs.points_frag,
        },
        dashed: {
          uniforms: Bs.merge([
            Us.common,
            Us.fog,
            {
              scale: { value: 1 },
              dashSize: { value: 1 },
              totalSize: { value: 2 },
            },
          ]),
          vertexShader: Fs.linedashed_vert,
          fragmentShader: Fs.linedashed_frag,
        },
        depth: {
          uniforms: Bs.merge([Us.common, Us.displacementmap]),
          vertexShader: Fs.depth_vert,
          fragmentShader: Fs.depth_frag,
        },
        normal: {
          uniforms: Bs.merge([
            Us.common,
            Us.bumpmap,
            Us.normalmap,
            Us.displacementmap,
            { opacity: { value: 1 } },
          ]),
          vertexShader: Fs.normal_vert,
          fragmentShader: Fs.normal_frag,
        },
        cube: {
          uniforms: {
            tCube: { value: null },
            tFlip: { value: -1 },
            opacity: { value: 1 },
          },
          vertexShader: Fs.cube_vert,
          fragmentShader: Fs.cube_frag,
        },
        equirect: {
          uniforms: { tEquirect: { value: null } },
          vertexShader: Fs.equirect_vert,
          fragmentShader: Fs.equirect_frag,
        },
        distanceRGBA: {
          uniforms: Bs.merge([
            Us.common,
            Us.displacementmap,
            {
              referencePosition: { value: new l() },
              nearDistance: { value: 1 },
              farDistance: { value: 1e3 },
            },
          ]),
          vertexShader: Fs.distanceRGBA_vert,
          fragmentShader: Fs.distanceRGBA_frag,
        },
        shadow: {
          uniforms: Bs.merge([
            Us.lights,
            { color: { value: new z(0) }, opacity: { value: 1 } },
          ]),
          vertexShader: Fs.shadow_vert,
          fragmentShader: Fs.shadow_frag,
        },
      };
    (js.physical = {
      uniforms: Bs.merge([
        js.standard.uniforms,
        { clearCoat: { value: 0 }, clearCoatRoughness: { value: 0 } },
      ]),
      vertexShader: Fs.meshphysical_vert,
      fragmentShader: Fs.meshphysical_frag,
    }),
      Object.assign(W.prototype, {
        set: function (e, t) {
          return this.min.copy(e), this.max.copy(t), this;
        },
        setFromPoints: function (e) {
          this.makeEmpty();
          for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
          return this;
        },
        setFromCenterAndSize: (function () {
          var e = new n();
          return function (t, n) {
            return (
              (n = e.copy(n).multiplyScalar(0.5)),
              this.min.copy(t).sub(n),
              this.max.copy(t).add(n),
              this
            );
          };
        })(),
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.min.copy(e.min), this.max.copy(e.max), this;
        },
        makeEmpty: function () {
          return (
            (this.min.x = this.min.y = 1 / 0),
            (this.max.x = this.max.y = -1 / 0),
            this
          );
        },
        isEmpty: function () {
          return this.max.x < this.min.x || this.max.y < this.min.y;
        },
        getCenter: function (e) {
          return (
            (e = e || new n()),
            this.isEmpty()
              ? e.set(0, 0)
              : e.addVectors(this.min, this.max).multiplyScalar(0.5)
          );
        },
        getSize: function (e) {
          return (
            (e = e || new n()),
            this.isEmpty() ? e.set(0, 0) : e.subVectors(this.max, this.min)
          );
        },
        expandByPoint: function (e) {
          return this.min.min(e), this.max.max(e), this;
        },
        expandByVector: function (e) {
          return this.min.sub(e), this.max.add(e), this;
        },
        expandByScalar: function (e) {
          return this.min.addScalar(-e), this.max.addScalar(e), this;
        },
        containsPoint: function (e) {
          return e.x < this.min.x ||
            e.x > this.max.x ||
            e.y < this.min.y ||
            e.y > this.max.y
            ? !1
            : !0;
        },
        containsBox: function (e) {
          return (
            this.min.x <= e.min.x &&
            e.max.x <= this.max.x &&
            this.min.y <= e.min.y &&
            e.max.y <= this.max.y
          );
        },
        getParameter: function (e, t) {
          return (t || new n()).set(
            (e.x - this.min.x) / (this.max.x - this.min.x),
            (e.y - this.min.y) / (this.max.y - this.min.y)
          );
        },
        intersectsBox: function (e) {
          return e.max.x < this.min.x ||
            e.min.x > this.max.x ||
            e.max.y < this.min.y ||
            e.min.y > this.max.y
            ? !1
            : !0;
        },
        clampPoint: function (e, t) {
          return (t || new n()).copy(e).clamp(this.min, this.max);
        },
        distanceToPoint: (function () {
          var e = new n();
          return function (t) {
            return e.copy(t).clamp(this.min, this.max).sub(t).length();
          };
        })(),
        intersect: function (e) {
          return this.min.max(e.min), this.max.min(e.max), this;
        },
        union: function (e) {
          return this.min.min(e.min), this.max.max(e.max), this;
        },
        translate: function (e) {
          return this.min.add(e), this.max.add(e), this;
        },
        equals: function (e) {
          return e.min.equals(this.min) && e.max.equals(this.max);
        },
      }),
      (V.prototype = Object.create(i.prototype)),
      (V.prototype.constructor = V);
    var Hs = 0;
    Object.assign(X.prototype, t.prototype, {
      isMaterial: !0,
      onBeforeCompile: function () {},
      setValues: function (e) {
        if (void 0 !== e)
          for (var t in e) {
            var n = e[t];
            if (void 0 === n)
              console.warn(
                "THREE.Material: '" + t + "' parameter is undefined."
              );
            else if ("shading" === t)
              console.warn(
                "THREE." +
                  this.type +
                  ": .shading has been removed. Use the boolean .flatShading instead."
              ),
                (this.flatShading = 1 === n ? !0 : !1);
            else {
              var i = this[t];
              void 0 === i
                ? console.warn(
                    "THREE." +
                      this.type +
                      ": '" +
                      t +
                      "' is not a property of this material."
                  )
                : i && i.isColor
                ? i.set(n)
                : i && i.isVector3 && n && n.isVector3
                ? i.copy(n)
                : (this[t] = "overdraw" === t ? Number(n) : n);
            }
          }
      },
      toJSON: function (e) {
        function t(e) {
          var t,
            n = [];
          for (t in e) {
            var i = e[t];
            delete i.metadata, n.push(i);
          }
          return n;
        }
        var n = void 0 === e;
        n && (e = { textures: {}, images: {} });
        var i = {
          metadata: {
            version: 4.5,
            type: "Material",
            generator: "Material.toJSON",
          },
        };
        return (
          (i.uuid = this.uuid),
          (i.type = this.type),
          "" !== this.name && (i.name = this.name),
          this.color && this.color.isColor && (i.color = this.color.getHex()),
          void 0 !== this.roughness && (i.roughness = this.roughness),
          void 0 !== this.metalness && (i.metalness = this.metalness),
          this.emissive &&
            this.emissive.isColor &&
            (i.emissive = this.emissive.getHex()),
          this.specular &&
            this.specular.isColor &&
            (i.specular = this.specular.getHex()),
          void 0 !== this.shininess && (i.shininess = this.shininess),
          void 0 !== this.clearCoat && (i.clearCoat = this.clearCoat),
          void 0 !== this.clearCoatRoughness &&
            (i.clearCoatRoughness = this.clearCoatRoughness),
          this.map && this.map.isTexture && (i.map = this.map.toJSON(e).uuid),
          this.alphaMap &&
            this.alphaMap.isTexture &&
            (i.alphaMap = this.alphaMap.toJSON(e).uuid),
          this.lightMap &&
            this.lightMap.isTexture &&
            (i.lightMap = this.lightMap.toJSON(e).uuid),
          this.bumpMap &&
            this.bumpMap.isTexture &&
            ((i.bumpMap = this.bumpMap.toJSON(e).uuid),
            (i.bumpScale = this.bumpScale)),
          this.normalMap &&
            this.normalMap.isTexture &&
            ((i.normalMap = this.normalMap.toJSON(e).uuid),
            (i.normalScale = this.normalScale.toArray())),
          this.displacementMap &&
            this.displacementMap.isTexture &&
            ((i.displacementMap = this.displacementMap.toJSON(e).uuid),
            (i.displacementScale = this.displacementScale),
            (i.displacementBias = this.displacementBias)),
          this.roughnessMap &&
            this.roughnessMap.isTexture &&
            (i.roughnessMap = this.roughnessMap.toJSON(e).uuid),
          this.metalnessMap &&
            this.metalnessMap.isTexture &&
            (i.metalnessMap = this.metalnessMap.toJSON(e).uuid),
          this.emissiveMap &&
            this.emissiveMap.isTexture &&
            (i.emissiveMap = this.emissiveMap.toJSON(e).uuid),
          this.specularMap &&
            this.specularMap.isTexture &&
            (i.specularMap = this.specularMap.toJSON(e).uuid),
          this.envMap &&
            this.envMap.isTexture &&
            ((i.envMap = this.envMap.toJSON(e).uuid),
            (i.reflectivity = this.reflectivity)),
          this.gradientMap &&
            this.gradientMap.isTexture &&
            (i.gradientMap = this.gradientMap.toJSON(e).uuid),
          void 0 !== this.size && (i.size = this.size),
          void 0 !== this.sizeAttenuation &&
            (i.sizeAttenuation = this.sizeAttenuation),
          1 !== this.blending && (i.blending = this.blending),
          !0 === this.flatShading && (i.flatShading = this.flatShading),
          0 !== this.side && (i.side = this.side),
          0 !== this.vertexColors && (i.vertexColors = this.vertexColors),
          1 > this.opacity && (i.opacity = this.opacity),
          !0 === this.transparent && (i.transparent = this.transparent),
          (i.depthFunc = this.depthFunc),
          (i.depthTest = this.depthTest),
          (i.depthWrite = this.depthWrite),
          !0 === this.dithering && (i.dithering = !0),
          0 < this.alphaTest && (i.alphaTest = this.alphaTest),
          !0 === this.premultipliedAlpha &&
            (i.premultipliedAlpha = this.premultipliedAlpha),
          !0 === this.wireframe && (i.wireframe = this.wireframe),
          1 < this.wireframeLinewidth &&
            (i.wireframeLinewidth = this.wireframeLinewidth),
          "round" !== this.wireframeLinecap &&
            (i.wireframeLinecap = this.wireframeLinecap),
          "round" !== this.wireframeLinejoin &&
            (i.wireframeLinejoin = this.wireframeLinejoin),
          !0 === this.morphTargets && (i.morphTargets = !0),
          !0 === this.skinning && (i.skinning = !0),
          !1 === this.visible && (i.visible = !1),
          "{}" !== JSON.stringify(this.userData) &&
            (i.userData = this.userData),
          n &&
            ((n = t(e.textures)),
            (e = t(e.images)),
            0 < n.length && (i.textures = n),
            0 < e.length && (i.images = e)),
          i
        );
      },
      clone: function () {
        return new this.constructor().copy(this);
      },
      copy: function (e) {
        (this.name = e.name),
          (this.fog = e.fog),
          (this.lights = e.lights),
          (this.blending = e.blending),
          (this.side = e.side),
          (this.flatShading = e.flatShading),
          (this.vertexColors = e.vertexColors),
          (this.opacity = e.opacity),
          (this.transparent = e.transparent),
          (this.blendSrc = e.blendSrc),
          (this.blendDst = e.blendDst),
          (this.blendEquation = e.blendEquation),
          (this.blendSrcAlpha = e.blendSrcAlpha),
          (this.blendDstAlpha = e.blendDstAlpha),
          (this.blendEquationAlpha = e.blendEquationAlpha),
          (this.depthFunc = e.depthFunc),
          (this.depthTest = e.depthTest),
          (this.depthWrite = e.depthWrite),
          (this.colorWrite = e.colorWrite),
          (this.precision = e.precision),
          (this.polygonOffset = e.polygonOffset),
          (this.polygonOffsetFactor = e.polygonOffsetFactor),
          (this.polygonOffsetUnits = e.polygonOffsetUnits),
          (this.dithering = e.dithering),
          (this.alphaTest = e.alphaTest),
          (this.premultipliedAlpha = e.premultipliedAlpha),
          (this.overdraw = e.overdraw),
          (this.visible = e.visible),
          (this.userData = JSON.parse(JSON.stringify(e.userData))),
          (this.clipShadows = e.clipShadows),
          (this.clipIntersection = e.clipIntersection),
          (e = e.clippingPlanes);
        var t = null;
        if (null !== e)
          for (var n = e.length, t = Array(n), i = 0; i !== n; ++i)
            t[i] = e[i].clone();
        return (this.clippingPlanes = t), this;
      },
      dispose: function () {
        this.dispatchEvent({ type: "dispose" });
      },
    }),
      (Y.prototype = Object.create(X.prototype)),
      (Y.prototype.constructor = Y),
      (Y.prototype.isShaderMaterial = !0),
      (Y.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          (this.fragmentShader = e.fragmentShader),
          (this.vertexShader = e.vertexShader),
          (this.uniforms = Bs.clone(e.uniforms)),
          (this.defines = e.defines),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.lights = e.lights),
          (this.clipping = e.clipping),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.morphNormals = e.morphNormals),
          (this.extensions = e.extensions),
          this
        );
      }),
      (Y.prototype.toJSON = function (e) {
        return (
          (e = X.prototype.toJSON.call(this, e)),
          (e.uniforms = this.uniforms),
          (e.vertexShader = this.vertexShader),
          (e.fragmentShader = this.fragmentShader),
          e
        );
      }),
      (K.prototype = Object.create(X.prototype)),
      (K.prototype.constructor = K),
      (K.prototype.isMeshDepthMaterial = !0),
      (K.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          (this.depthPacking = e.depthPacking),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.map = e.map),
          (this.alphaMap = e.alphaMap),
          (this.displacementMap = e.displacementMap),
          (this.displacementScale = e.displacementScale),
          (this.displacementBias = e.displacementBias),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          this
        );
      }),
      (J.prototype = Object.create(X.prototype)),
      (J.prototype.constructor = J),
      (J.prototype.isMeshDistanceMaterial = !0),
      (J.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.referencePosition.copy(e.referencePosition),
          (this.nearDistance = e.nearDistance),
          (this.farDistance = e.farDistance),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.map = e.map),
          (this.alphaMap = e.alphaMap),
          (this.displacementMap = e.displacementMap),
          (this.displacementScale = e.displacementScale),
          (this.displacementBias = e.displacementBias),
          this
        );
      }),
      Object.assign(Q.prototype, {
        isBox3: !0,
        set: function (e, t) {
          return this.min.copy(e), this.max.copy(t), this;
        },
        setFromArray: function (e) {
          for (
            var t = 1 / 0,
              n = 1 / 0,
              i = 1 / 0,
              r = -1 / 0,
              s = -1 / 0,
              o = -1 / 0,
              a = 0,
              l = e.length;
            l > a;
            a += 3
          ) {
            var c = e[a],
              u = e[a + 1],
              h = e[a + 2];
            t > c && (t = c),
              n > u && (n = u),
              i > h && (i = h),
              c > r && (r = c),
              u > s && (s = u),
              h > o && (o = h);
          }
          return this.min.set(t, n, i), this.max.set(r, s, o), this;
        },
        setFromBufferAttribute: function (e) {
          for (
            var t = 1 / 0,
              n = 1 / 0,
              i = 1 / 0,
              r = -1 / 0,
              s = -1 / 0,
              o = -1 / 0,
              a = 0,
              l = e.count;
            l > a;
            a++
          ) {
            var c = e.getX(a),
              u = e.getY(a),
              h = e.getZ(a);
            t > c && (t = c),
              n > u && (n = u),
              i > h && (i = h),
              c > r && (r = c),
              u > s && (s = u),
              h > o && (o = h);
          }
          return this.min.set(t, n, i), this.max.set(r, s, o), this;
        },
        setFromPoints: function (e) {
          this.makeEmpty();
          for (var t = 0, n = e.length; n > t; t++) this.expandByPoint(e[t]);
          return this;
        },
        setFromCenterAndSize: (function () {
          var e = new l();
          return function (t, n) {
            return (
              (n = e.copy(n).multiplyScalar(0.5)),
              this.min.copy(t).sub(n),
              this.max.copy(t).add(n),
              this
            );
          };
        })(),
        setFromObject: function (e) {
          return this.makeEmpty(), this.expandByObject(e);
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.min.copy(e.min), this.max.copy(e.max), this;
        },
        makeEmpty: function () {
          return (
            (this.min.x = this.min.y = this.min.z = 1 / 0),
            (this.max.x = this.max.y = this.max.z = -1 / 0),
            this
          );
        },
        isEmpty: function () {
          return (
            this.max.x < this.min.x ||
            this.max.y < this.min.y ||
            this.max.z < this.min.z
          );
        },
        getCenter: function (e) {
          return (
            (e = e || new l()),
            this.isEmpty()
              ? e.set(0, 0, 0)
              : e.addVectors(this.min, this.max).multiplyScalar(0.5)
          );
        },
        getSize: function (e) {
          return (
            (e = e || new l()),
            this.isEmpty() ? e.set(0, 0, 0) : e.subVectors(this.max, this.min)
          );
        },
        expandByPoint: function (e) {
          return this.min.min(e), this.max.max(e), this;
        },
        expandByVector: function (e) {
          return this.min.sub(e), this.max.add(e), this;
        },
        expandByScalar: function (e) {
          return this.min.addScalar(-e), this.max.addScalar(e), this;
        },
        expandByObject: (function () {
          var e = new l();
          return function (t) {
            var n = this;
            return (
              t.updateMatrixWorld(!0),
              t.traverse(function (t) {
                var i,
                  r = t.geometry;
                if (void 0 !== r)
                  if (r.isGeometry) {
                    var s = r.vertices;
                    for (r = 0, i = s.length; i > r; r++)
                      e.copy(s[r]),
                        e.applyMatrix4(t.matrixWorld),
                        n.expandByPoint(e);
                  } else if (
                    r.isBufferGeometry &&
                    ((s = r.attributes.position), void 0 !== s)
                  )
                    for (r = 0, i = s.count; i > r; r++)
                      e.fromBufferAttribute(s, r).applyMatrix4(t.matrixWorld),
                        n.expandByPoint(e);
              }),
              this
            );
          };
        })(),
        containsPoint: function (e) {
          return e.x < this.min.x ||
            e.x > this.max.x ||
            e.y < this.min.y ||
            e.y > this.max.y ||
            e.z < this.min.z ||
            e.z > this.max.z
            ? !1
            : !0;
        },
        containsBox: function (e) {
          return (
            this.min.x <= e.min.x &&
            e.max.x <= this.max.x &&
            this.min.y <= e.min.y &&
            e.max.y <= this.max.y &&
            this.min.z <= e.min.z &&
            e.max.z <= this.max.z
          );
        },
        getParameter: function (e, t) {
          return (t || new l()).set(
            (e.x - this.min.x) / (this.max.x - this.min.x),
            (e.y - this.min.y) / (this.max.y - this.min.y),
            (e.z - this.min.z) / (this.max.z - this.min.z)
          );
        },
        intersectsBox: function (e) {
          return e.max.x < this.min.x ||
            e.min.x > this.max.x ||
            e.max.y < this.min.y ||
            e.min.y > this.max.y ||
            e.max.z < this.min.z ||
            e.min.z > this.max.z
            ? !1
            : !0;
        },
        intersectsSphere: (function () {
          var e = new l();
          return function (t) {
            return (
              this.clampPoint(t.center, e),
              e.distanceToSquared(t.center) <= t.radius * t.radius
            );
          };
        })(),
        intersectsPlane: function (e) {
          if (0 < e.normal.x)
            var t = e.normal.x * this.min.x,
              n = e.normal.x * this.max.x;
          else (t = e.normal.x * this.max.x), (n = e.normal.x * this.min.x);
          return (
            0 < e.normal.y
              ? ((t += e.normal.y * this.min.y), (n += e.normal.y * this.max.y))
              : ((t += e.normal.y * this.max.y),
                (n += e.normal.y * this.min.y)),
            0 < e.normal.z
              ? ((t += e.normal.z * this.min.z), (n += e.normal.z * this.max.z))
              : ((t += e.normal.z * this.max.z),
                (n += e.normal.z * this.min.z)),
            t <= e.constant && n >= e.constant
          );
        },
        clampPoint: function (e, t) {
          return (t || new l()).copy(e).clamp(this.min, this.max);
        },
        distanceToPoint: (function () {
          var e = new l();
          return function (t) {
            return e.copy(t).clamp(this.min, this.max).sub(t).length();
          };
        })(),
        getBoundingSphere: (function () {
          var e = new l();
          return function (t) {
            return (
              (t = t || new Z()),
              this.getCenter(t.center),
              (t.radius = 0.5 * this.getSize(e).length()),
              t
            );
          };
        })(),
        intersect: function (e) {
          return (
            this.min.max(e.min),
            this.max.min(e.max),
            this.isEmpty() && this.makeEmpty(),
            this
          );
        },
        union: function (e) {
          return this.min.min(e.min), this.max.max(e.max), this;
        },
        applyMatrix4: (function () {
          var e = [
            new l(),
            new l(),
            new l(),
            new l(),
            new l(),
            new l(),
            new l(),
            new l(),
          ];
          return function (t) {
            return this.isEmpty()
              ? this
              : (e[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(t),
                e[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(t),
                e[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(t),
                e[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(t),
                e[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(t),
                e[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(t),
                e[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(t),
                e[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(t),
                this.setFromPoints(e),
                this);
          };
        })(),
        translate: function (e) {
          return this.min.add(e), this.max.add(e), this;
        },
        equals: function (e) {
          return e.min.equals(this.min) && e.max.equals(this.max);
        },
      }),
      Object.assign(Z.prototype, {
        set: function (e, t) {
          return this.center.copy(e), (this.radius = t), this;
        },
        setFromPoints: (function () {
          var e = new Q();
          return function (t, n) {
            var i = this.center;
            void 0 !== n ? i.copy(n) : e.setFromPoints(t).getCenter(i);
            for (var r = (n = 0), s = t.length; s > r; r++)
              n = Math.max(n, i.distanceToSquared(t[r]));
            return (this.radius = Math.sqrt(n)), this;
          };
        })(),
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.center.copy(e.center), (this.radius = e.radius), this;
        },
        empty: function () {
          return 0 >= this.radius;
        },
        containsPoint: function (e) {
          return e.distanceToSquared(this.center) <= this.radius * this.radius;
        },
        distanceToPoint: function (e) {
          return e.distanceTo(this.center) - this.radius;
        },
        intersectsSphere: function (e) {
          var t = this.radius + e.radius;
          return e.center.distanceToSquared(this.center) <= t * t;
        },
        intersectsBox: function (e) {
          return e.intersectsSphere(this);
        },
        intersectsPlane: function (e) {
          return Math.abs(e.distanceToPoint(this.center)) <= this.radius;
        },
        clampPoint: function (e, t) {
          var n = this.center.distanceToSquared(e);
          return (
            (t = t || new l()),
            t.copy(e),
            n > this.radius * this.radius &&
              (t.sub(this.center).normalize(),
              t.multiplyScalar(this.radius).add(this.center)),
            t
          );
        },
        getBoundingBox: function (e) {
          return (
            (e = e || new Q()),
            e.set(this.center, this.center),
            e.expandByScalar(this.radius),
            e
          );
        },
        applyMatrix4: function (e) {
          return (
            this.center.applyMatrix4(e),
            (this.radius *= e.getMaxScaleOnAxis()),
            this
          );
        },
        translate: function (e) {
          return this.center.add(e), this;
        },
        equals: function (e) {
          return e.center.equals(this.center) && e.radius === this.radius;
        },
      }),
      Object.assign(et.prototype, {
        isMatrix3: !0,
        set: function (e, t, n, i, r, s, o, a, l) {
          var c = this.elements;
          return (
            (c[0] = e),
            (c[1] = i),
            (c[2] = o),
            (c[3] = t),
            (c[4] = r),
            (c[5] = a),
            (c[6] = n),
            (c[7] = s),
            (c[8] = l),
            this
          );
        },
        identity: function () {
          return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this;
        },
        clone: function () {
          return new this.constructor().fromArray(this.elements);
        },
        copy: function (e) {
          var t = this.elements;
          return (
            (e = e.elements),
            (t[0] = e[0]),
            (t[1] = e[1]),
            (t[2] = e[2]),
            (t[3] = e[3]),
            (t[4] = e[4]),
            (t[5] = e[5]),
            (t[6] = e[6]),
            (t[7] = e[7]),
            (t[8] = e[8]),
            this
          );
        },
        setFromMatrix4: function (e) {
          return (
            (e = e.elements),
            this.set(e[0], e[4], e[8], e[1], e[5], e[9], e[2], e[6], e[10]),
            this
          );
        },
        applyToBufferAttribute: (function () {
          var e = new l();
          return function (t) {
            for (var n = 0, i = t.count; i > n; n++)
              (e.x = t.getX(n)),
                (e.y = t.getY(n)),
                (e.z = t.getZ(n)),
                e.applyMatrix3(this),
                t.setXYZ(n, e.x, e.y, e.z);
            return t;
          };
        })(),
        multiply: function (e) {
          return this.multiplyMatrices(this, e);
        },
        premultiply: function (e) {
          return this.multiplyMatrices(e, this);
        },
        multiplyMatrices: function (e, t) {
          var n = e.elements,
            i = t.elements;
          (t = this.elements), (e = n[0]);
          var r = n[3],
            s = n[6],
            o = n[1],
            a = n[4],
            l = n[7],
            c = n[2],
            u = n[5],
            n = n[8],
            h = i[0],
            d = i[3],
            p = i[6],
            f = i[1],
            m = i[4],
            g = i[7],
            v = i[2],
            _ = i[5],
            i = i[8];
          return (
            (t[0] = e * h + r * f + s * v),
            (t[3] = e * d + r * m + s * _),
            (t[6] = e * p + r * g + s * i),
            (t[1] = o * h + a * f + l * v),
            (t[4] = o * d + a * m + l * _),
            (t[7] = o * p + a * g + l * i),
            (t[2] = c * h + u * f + n * v),
            (t[5] = c * d + u * m + n * _),
            (t[8] = c * p + u * g + n * i),
            this
          );
        },
        multiplyScalar: function (e) {
          var t = this.elements;
          return (
            (t[0] *= e),
            (t[3] *= e),
            (t[6] *= e),
            (t[1] *= e),
            (t[4] *= e),
            (t[7] *= e),
            (t[2] *= e),
            (t[5] *= e),
            (t[8] *= e),
            this
          );
        },
        determinant: function () {
          var e = this.elements,
            t = e[0],
            n = e[1],
            i = e[2],
            r = e[3],
            s = e[4],
            o = e[5],
            a = e[6],
            l = e[7],
            e = e[8];
          return (
            t * s * e -
            t * o * l -
            n * r * e +
            n * o * a +
            i * r * l -
            i * s * a
          );
        },
        getInverse: function (e, t) {
          e &&
            e.isMatrix4 &&
            console.error(
              "THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument."
            );
          var n = e.elements;
          e = this.elements;
          var i = n[0],
            r = n[1],
            s = n[2],
            o = n[3],
            a = n[4],
            l = n[5],
            c = n[6],
            u = n[7],
            n = n[8],
            h = n * a - l * u,
            d = l * c - n * o,
            p = u * o - a * c,
            f = i * h + r * d + s * p;
          if (0 === f) {
            if (!0 === t)
              throw Error(
                "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"
              );
            return (
              console.warn(
                "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"
              ),
              this.identity()
            );
          }
          return (
            (t = 1 / f),
            (e[0] = h * t),
            (e[1] = (s * u - n * r) * t),
            (e[2] = (l * r - s * a) * t),
            (e[3] = d * t),
            (e[4] = (n * i - s * c) * t),
            (e[5] = (s * o - l * i) * t),
            (e[6] = p * t),
            (e[7] = (r * c - u * i) * t),
            (e[8] = (a * i - r * o) * t),
            this
          );
        },
        transpose: function () {
          var e = this.elements,
            t = e[1];
          return (
            (e[1] = e[3]),
            (e[3] = t),
            (t = e[2]),
            (e[2] = e[6]),
            (e[6] = t),
            (t = e[5]),
            (e[5] = e[7]),
            (e[7] = t),
            this
          );
        },
        getNormalMatrix: function (e) {
          return this.setFromMatrix4(e).getInverse(this).transpose();
        },
        transposeIntoArray: function (e) {
          var t = this.elements;
          return (
            (e[0] = t[0]),
            (e[1] = t[3]),
            (e[2] = t[6]),
            (e[3] = t[1]),
            (e[4] = t[4]),
            (e[5] = t[7]),
            (e[6] = t[2]),
            (e[7] = t[5]),
            (e[8] = t[8]),
            this
          );
        },
        equals: function (e) {
          var t = this.elements;
          e = e.elements;
          for (var n = 0; 9 > n; n++) if (t[n] !== e[n]) return !1;
          return !0;
        },
        fromArray: function (e, t) {
          void 0 === t && (t = 0);
          for (var n = 0; 9 > n; n++) this.elements[n] = e[n + t];
          return this;
        },
        toArray: function (e, t) {
          void 0 === e && (e = []), void 0 === t && (t = 0);
          var n = this.elements;
          return (
            (e[t] = n[0]),
            (e[t + 1] = n[1]),
            (e[t + 2] = n[2]),
            (e[t + 3] = n[3]),
            (e[t + 4] = n[4]),
            (e[t + 5] = n[5]),
            (e[t + 6] = n[6]),
            (e[t + 7] = n[7]),
            (e[t + 8] = n[8]),
            e
          );
        },
      }),
      Object.assign(tt.prototype, {
        set: function (e, t) {
          return this.normal.copy(e), (this.constant = t), this;
        },
        setComponents: function (e, t, n, i) {
          return this.normal.set(e, t, n), (this.constant = i), this;
        },
        setFromNormalAndCoplanarPoint: function (e, t) {
          return (
            this.normal.copy(e), (this.constant = -t.dot(this.normal)), this
          );
        },
        setFromCoplanarPoints: (function () {
          var e = new l(),
            t = new l();
          return function (n, i, r) {
            return (
              (i = e.subVectors(r, i).cross(t.subVectors(n, i)).normalize()),
              this.setFromNormalAndCoplanarPoint(i, n),
              this
            );
          };
        })(),
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.normal.copy(e.normal), (this.constant = e.constant), this;
        },
        normalize: function () {
          var e = 1 / this.normal.length();
          return this.normal.multiplyScalar(e), (this.constant *= e), this;
        },
        negate: function () {
          return (this.constant *= -1), this.normal.negate(), this;
        },
        distanceToPoint: function (e) {
          return this.normal.dot(e) + this.constant;
        },
        distanceToSphere: function (e) {
          return this.distanceToPoint(e.center) - e.radius;
        },
        projectPoint: function (e, t) {
          return (t || new l())
            .copy(this.normal)
            .multiplyScalar(-this.distanceToPoint(e))
            .add(e);
        },
        intersectLine: (function () {
          var e = new l();
          return function (t, n) {
            n = n || new l();
            var i = t.delta(e),
              r = this.normal.dot(i);
            if (0 === r) {
              if (0 === this.distanceToPoint(t.start)) return n.copy(t.start);
            } else if (
              ((r = -(t.start.dot(this.normal) + this.constant) / r),
              !(0 > r || r > 1))
            )
              return n.copy(i).multiplyScalar(r).add(t.start);
          };
        })(),
        intersectsLine: function (e) {
          var t = this.distanceToPoint(e.start);
          return (
            (e = this.distanceToPoint(e.end)),
            (0 > t && e > 0) || (0 > e && t > 0)
          );
        },
        intersectsBox: function (e) {
          return e.intersectsPlane(this);
        },
        intersectsSphere: function (e) {
          return e.intersectsPlane(this);
        },
        coplanarPoint: function (e) {
          return (e || new l())
            .copy(this.normal)
            .multiplyScalar(-this.constant);
        },
        applyMatrix4: (function () {
          var e = new l(),
            t = new et();
          return function (n, i) {
            return (
              (i = i || t.getNormalMatrix(n)),
              (n = this.coplanarPoint(e).applyMatrix4(n)),
              (i = this.normal.applyMatrix3(i).normalize()),
              (this.constant = -n.dot(i)),
              this
            );
          };
        })(),
        translate: function (e) {
          return (this.constant -= e.dot(this.normal)), this;
        },
        equals: function (e) {
          return e.normal.equals(this.normal) && e.constant === this.constant;
        },
      }),
      Object.assign(nt.prototype, {
        set: function (e, t, n, i, r, s) {
          var o = this.planes;
          return (
            o[0].copy(e),
            o[1].copy(t),
            o[2].copy(n),
            o[3].copy(i),
            o[4].copy(r),
            o[5].copy(s),
            this
          );
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          for (var t = this.planes, n = 0; 6 > n; n++) t[n].copy(e.planes[n]);
          return this;
        },
        setFromMatrix: function (e) {
          var t = this.planes,
            n = e.elements;
          e = n[0];
          var i = n[1],
            r = n[2],
            s = n[3],
            o = n[4],
            a = n[5],
            l = n[6],
            c = n[7],
            u = n[8],
            h = n[9],
            d = n[10],
            p = n[11],
            f = n[12],
            m = n[13],
            g = n[14],
            n = n[15];
          return (
            t[0].setComponents(s - e, c - o, p - u, n - f).normalize(),
            t[1].setComponents(s + e, c + o, p + u, n + f).normalize(),
            t[2].setComponents(s + i, c + a, p + h, n + m).normalize(),
            t[3].setComponents(s - i, c - a, p - h, n - m).normalize(),
            t[4].setComponents(s - r, c - l, p - d, n - g).normalize(),
            t[5].setComponents(s + r, c + l, p + d, n + g).normalize(),
            this
          );
        },
        intersectsObject: (function () {
          var e = new Z();
          return function (t) {
            var n = t.geometry;
            return (
              null === n.boundingSphere && n.computeBoundingSphere(),
              e.copy(n.boundingSphere).applyMatrix4(t.matrixWorld),
              this.intersectsSphere(e)
            );
          };
        })(),
        intersectsSprite: (function () {
          var e = new Z();
          return function (t) {
            return (
              e.center.set(0, 0, 0),
              (e.radius = 0.7071067811865476),
              e.applyMatrix4(t.matrixWorld),
              this.intersectsSphere(e)
            );
          };
        })(),
        intersectsSphere: function (e) {
          var t = this.planes,
            n = e.center;
          e = -e.radius;
          for (var i = 0; 6 > i; i++)
            if (t[i].distanceToPoint(n) < e) return !1;
          return !0;
        },
        intersectsBox: (function () {
          var e = new l(),
            t = new l();
          return function (n) {
            for (var i = this.planes, r = 0; 6 > r; r++) {
              var s = i[r];
              (e.x = 0 < s.normal.x ? n.min.x : n.max.x),
                (t.x = 0 < s.normal.x ? n.max.x : n.min.x),
                (e.y = 0 < s.normal.y ? n.min.y : n.max.y),
                (t.y = 0 < s.normal.y ? n.max.y : n.min.y),
                (e.z = 0 < s.normal.z ? n.min.z : n.max.z),
                (t.z = 0 < s.normal.z ? n.max.z : n.min.z);
              var o = s.distanceToPoint(e),
                s = s.distanceToPoint(t);
              if (0 > o && 0 > s) return !1;
            }
            return !0;
          };
        })(),
        containsPoint: function (e) {
          for (var t = this.planes, n = 0; 6 > n; n++)
            if (0 > t[n].distanceToPoint(e)) return !1;
          return !0;
        },
      }),
      (st.RotationOrders = "XYZ YZX ZXY XZY YXZ ZYX".split(" ")),
      (st.DefaultOrder = "XYZ"),
      Object.defineProperties(st.prototype, {
        x: {
          get: function () {
            return this._x;
          },
          set: function (e) {
            (this._x = e), this.onChangeCallback();
          },
        },
        y: {
          get: function () {
            return this._y;
          },
          set: function (e) {
            (this._y = e), this.onChangeCallback();
          },
        },
        z: {
          get: function () {
            return this._z;
          },
          set: function (e) {
            (this._z = e), this.onChangeCallback();
          },
        },
        order: {
          get: function () {
            return this._order;
          },
          set: function (e) {
            (this._order = e), this.onChangeCallback();
          },
        },
      }),
      Object.assign(st.prototype, {
        isEuler: !0,
        set: function (e, t, n, i) {
          return (
            (this._x = e),
            (this._y = t),
            (this._z = n),
            (this._order = i || this._order),
            this.onChangeCallback(),
            this
          );
        },
        clone: function () {
          return new this.constructor(this._x, this._y, this._z, this._order);
        },
        copy: function (e) {
          return (
            (this._x = e._x),
            (this._y = e._y),
            (this._z = e._z),
            (this._order = e._order),
            this.onChangeCallback(),
            this
          );
        },
        setFromRotationMatrix: function (e, t, n) {
          var i = ks.clamp,
            r = e.elements;
          e = r[0];
          var s = r[4],
            o = r[8],
            a = r[1],
            l = r[5],
            c = r[9],
            u = r[2],
            h = r[6],
            r = r[10];
          return (
            (t = t || this._order),
            "XYZ" === t
              ? ((this._y = Math.asin(i(o, -1, 1))),
                0.99999 > Math.abs(o)
                  ? ((this._x = Math.atan2(-c, r)),
                    (this._z = Math.atan2(-s, e)))
                  : ((this._x = Math.atan2(h, l)), (this._z = 0)))
              : "YXZ" === t
              ? ((this._x = Math.asin(-i(c, -1, 1))),
                0.99999 > Math.abs(c)
                  ? ((this._y = Math.atan2(o, r)), (this._z = Math.atan2(a, l)))
                  : ((this._y = Math.atan2(-u, e)), (this._z = 0)))
              : "ZXY" === t
              ? ((this._x = Math.asin(i(h, -1, 1))),
                0.99999 > Math.abs(h)
                  ? ((this._y = Math.atan2(-u, r)),
                    (this._z = Math.atan2(-s, l)))
                  : ((this._y = 0), (this._z = Math.atan2(a, e))))
              : "ZYX" === t
              ? ((this._y = Math.asin(-i(u, -1, 1))),
                0.99999 > Math.abs(u)
                  ? ((this._x = Math.atan2(h, r)), (this._z = Math.atan2(a, e)))
                  : ((this._x = 0), (this._z = Math.atan2(-s, l))))
              : "YZX" === t
              ? ((this._z = Math.asin(i(a, -1, 1))),
                0.99999 > Math.abs(a)
                  ? ((this._x = Math.atan2(-c, l)),
                    (this._y = Math.atan2(-u, e)))
                  : ((this._x = 0), (this._y = Math.atan2(o, r))))
              : "XZY" === t
              ? ((this._z = Math.asin(-i(s, -1, 1))),
                0.99999 > Math.abs(s)
                  ? ((this._x = Math.atan2(h, l)), (this._y = Math.atan2(o, e)))
                  : ((this._x = Math.atan2(-c, r)), (this._y = 0)))
              : console.warn(
                  "THREE.Euler: .setFromRotationMatrix() given unsupported order: " +
                    t
                ),
            (this._order = t),
            !1 !== n && this.onChangeCallback(),
            this
          );
        },
        setFromQuaternion: (function () {
          var e = new c();
          return function (t, n, i) {
            return (
              e.makeRotationFromQuaternion(t),
              this.setFromRotationMatrix(e, n, i)
            );
          };
        })(),
        setFromVector3: function (e, t) {
          return this.set(e.x, e.y, e.z, t || this._order);
        },
        reorder: (function () {
          var e = new a();
          return function (t) {
            return e.setFromEuler(this), this.setFromQuaternion(e, t);
          };
        })(),
        equals: function (e) {
          return (
            e._x === this._x &&
            e._y === this._y &&
            e._z === this._z &&
            e._order === this._order
          );
        },
        fromArray: function (e) {
          return (
            (this._x = e[0]),
            (this._y = e[1]),
            (this._z = e[2]),
            void 0 !== e[3] && (this._order = e[3]),
            this.onChangeCallback(),
            this
          );
        },
        toArray: function (e, t) {
          return (
            void 0 === e && (e = []),
            void 0 === t && (t = 0),
            (e[t] = this._x),
            (e[t + 1] = this._y),
            (e[t + 2] = this._z),
            (e[t + 3] = this._order),
            e
          );
        },
        toVector3: function (e) {
          return e
            ? e.set(this._x, this._y, this._z)
            : new l(this._x, this._y, this._z);
        },
        onChange: function (e) {
          return (this.onChangeCallback = e), this;
        },
        onChangeCallback: function () {},
      }),
      Object.assign(ot.prototype, {
        set: function (e) {
          this.mask = (1 << e) | 0;
        },
        enable: function (e) {
          this.mask = this.mask | (1 << e) | 0;
        },
        toggle: function (e) {
          this.mask ^= (1 << e) | 0;
        },
        disable: function (e) {
          this.mask &= ~((1 << e) | 0);
        },
        test: function (e) {
          return 0 !== (this.mask & e.mask);
        },
      });
    var $s = 0;
    (at.DefaultUp = new l(0, 1, 0)),
      (at.DefaultMatrixAutoUpdate = !0),
      Object.assign(at.prototype, t.prototype, {
        isObject3D: !0,
        onBeforeRender: function () {},
        onAfterRender: function () {},
        applyMatrix: function (e) {
          this.matrix.multiplyMatrices(e, this.matrix),
            this.matrix.decompose(this.position, this.quaternion, this.scale);
        },
        applyQuaternion: function (e) {
          return this.quaternion.premultiply(e), this;
        },
        setRotationFromAxisAngle: function (e, t) {
          this.quaternion.setFromAxisAngle(e, t);
        },
        setRotationFromEuler: function (e) {
          this.quaternion.setFromEuler(e, !0);
        },
        setRotationFromMatrix: function (e) {
          this.quaternion.setFromRotationMatrix(e);
        },
        setRotationFromQuaternion: function (e) {
          this.quaternion.copy(e);
        },
        rotateOnAxis: (function () {
          var e = new a();
          return function (t, n) {
            return e.setFromAxisAngle(t, n), this.quaternion.multiply(e), this;
          };
        })(),
        rotateX: (function () {
          var e = new l(1, 0, 0);
          return function (t) {
            return this.rotateOnAxis(e, t);
          };
        })(),
        rotateY: (function () {
          var e = new l(0, 1, 0);
          return function (t) {
            return this.rotateOnAxis(e, t);
          };
        })(),
        rotateZ: (function () {
          var e = new l(0, 0, 1);
          return function (t) {
            return this.rotateOnAxis(e, t);
          };
        })(),
        translateOnAxis: (function () {
          var e = new l();
          return function (t, n) {
            return (
              e.copy(t).applyQuaternion(this.quaternion),
              this.position.add(e.multiplyScalar(n)),
              this
            );
          };
        })(),
        translateX: (function () {
          var e = new l(1, 0, 0);
          return function (t) {
            return this.translateOnAxis(e, t);
          };
        })(),
        translateY: (function () {
          var e = new l(0, 1, 0);
          return function (t) {
            return this.translateOnAxis(e, t);
          };
        })(),
        translateZ: (function () {
          var e = new l(0, 0, 1);
          return function (t) {
            return this.translateOnAxis(e, t);
          };
        })(),
        localToWorld: function (e) {
          return e.applyMatrix4(this.matrixWorld);
        },
        worldToLocal: (function () {
          var e = new c();
          return function (t) {
            return t.applyMatrix4(e.getInverse(this.matrixWorld));
          };
        })(),
        lookAt: (function () {
          var e = new c();
          return function (t) {
            this.isCamera
              ? e.lookAt(this.position, t, this.up)
              : e.lookAt(t, this.position, this.up),
              this.quaternion.setFromRotationMatrix(e);
          };
        })(),
        add: function (e) {
          if (1 < arguments.length) {
            for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
            return this;
          }
          return e === this
            ? (console.error(
                "THREE.Object3D.add: object can't be added as a child of itself.",
                e
              ),
              this)
            : (e && e.isObject3D
                ? (null !== e.parent && e.parent.remove(e),
                  (e.parent = this),
                  e.dispatchEvent({ type: "added" }),
                  this.children.push(e))
                : console.error(
                    "THREE.Object3D.add: object not an instance of THREE.Object3D.",
                    e
                  ),
              this);
        },
        remove: function (e) {
          if (1 < arguments.length) {
            for (var t = 0; t < arguments.length; t++)
              this.remove(arguments[t]);
            return this;
          }
          return (
            (t = this.children.indexOf(e)),
            -1 !== t &&
              ((e.parent = null),
              e.dispatchEvent({ type: "removed" }),
              this.children.splice(t, 1)),
            this
          );
        },
        getObjectById: function (e) {
          return this.getObjectByProperty("id", e);
        },
        getObjectByName: function (e) {
          return this.getObjectByProperty("name", e);
        },
        getObjectByProperty: function (e, t) {
          if (this[e] === t) return this;
          for (var n = 0, i = this.children.length; i > n; n++) {
            var r = this.children[n].getObjectByProperty(e, t);
            if (void 0 !== r) return r;
          }
        },
        getWorldPosition: function (e) {
          return (
            (e = e || new l()),
            this.updateMatrixWorld(!0),
            e.setFromMatrixPosition(this.matrixWorld)
          );
        },
        getWorldQuaternion: (function () {
          var e = new l(),
            t = new l();
          return function (n) {
            return (
              (n = n || new a()),
              this.updateMatrixWorld(!0),
              this.matrixWorld.decompose(e, n, t),
              n
            );
          };
        })(),
        getWorldRotation: (function () {
          var e = new a();
          return function (t) {
            return (
              (t = t || new st()),
              this.getWorldQuaternion(e),
              t.setFromQuaternion(e, this.rotation.order, !1)
            );
          };
        })(),
        getWorldScale: (function () {
          var e = new l(),
            t = new a();
          return function (n) {
            return (
              (n = n || new l()),
              this.updateMatrixWorld(!0),
              this.matrixWorld.decompose(e, t, n),
              n
            );
          };
        })(),
        getWorldDirection: (function () {
          var e = new a();
          return function (t) {
            return (
              (t = t || new l()),
              this.getWorldQuaternion(e),
              t.set(0, 0, 1).applyQuaternion(e)
            );
          };
        })(),
        raycast: function () {},
        traverse: function (e) {
          e(this);
          for (var t = this.children, n = 0, i = t.length; i > n; n++)
            t[n].traverse(e);
        },
        traverseVisible: function (e) {
          if (!1 !== this.visible) {
            e(this);
            for (var t = this.children, n = 0, i = t.length; i > n; n++)
              t[n].traverseVisible(e);
          }
        },
        traverseAncestors: function (e) {
          var t = this.parent;
          null !== t && (e(t), t.traverseAncestors(e));
        },
        updateMatrix: function () {
          this.matrix.compose(this.position, this.quaternion, this.scale),
            (this.matrixWorldNeedsUpdate = !0);
        },
        updateMatrixWorld: function (e) {
          this.matrixAutoUpdate && this.updateMatrix(),
            (this.matrixWorldNeedsUpdate || e) &&
              (null === this.parent
                ? this.matrixWorld.copy(this.matrix)
                : this.matrixWorld.multiplyMatrices(
                    this.parent.matrixWorld,
                    this.matrix
                  ),
              (this.matrixWorldNeedsUpdate = !1),
              (e = !0));
          for (var t = this.children, n = 0, i = t.length; i > n; n++)
            t[n].updateMatrixWorld(e);
        },
        toJSON: function (e) {
          function t(t, n) {
            return void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)), n.uuid;
          }
          function n(e) {
            var t,
              n = [];
            for (t in e) {
              var i = e[t];
              delete i.metadata, n.push(i);
            }
            return n;
          }
          var i = void 0 === e || "" === e,
            r = {};
          i &&
            ((e = { geometries: {}, materials: {}, textures: {}, images: {} }),
            (r.metadata = {
              version: 4.5,
              type: "Object",
              generator: "Object3D.toJSON",
            }));
          var s = {};
          if (
            ((s.uuid = this.uuid),
            (s.type = this.type),
            "" !== this.name && (s.name = this.name),
            !0 === this.castShadow && (s.castShadow = !0),
            !0 === this.receiveShadow && (s.receiveShadow = !0),
            !1 === this.visible && (s.visible = !1),
            "{}" !== JSON.stringify(this.userData) &&
              (s.userData = this.userData),
            (s.matrix = this.matrix.toArray()),
            void 0 !== this.geometry &&
              (s.geometry = t(e.geometries, this.geometry)),
            void 0 !== this.material)
          )
            if (Array.isArray(this.material)) {
              for (var o = [], a = 0, l = this.material.length; l > a; a++)
                o.push(t(e.materials, this.material[a]));
              s.material = o;
            } else s.material = t(e.materials, this.material);
          if (0 < this.children.length)
            for (s.children = [], a = 0; a < this.children.length; a++)
              s.children.push(this.children[a].toJSON(e).object);
          return (
            i &&
              ((i = n(e.geometries)),
              (o = n(e.materials)),
              (a = n(e.textures)),
              (l = n(e.images)),
              0 < i.length && (r.geometries = i),
              0 < o.length && (r.materials = o),
              0 < a.length && (r.textures = a),
              0 < l.length && (r.images = l)),
            (r.object = s),
            r
          );
        },
        clone: function (e) {
          return new this.constructor().copy(this, e);
        },
        copy: function (e, t) {
          if (
            (void 0 === t && (t = !0),
            (this.name = e.name),
            this.up.copy(e.up),
            this.position.copy(e.position),
            this.quaternion.copy(e.quaternion),
            this.scale.copy(e.scale),
            this.matrix.copy(e.matrix),
            this.matrixWorld.copy(e.matrixWorld),
            (this.matrixAutoUpdate = e.matrixAutoUpdate),
            (this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate),
            (this.layers.mask = e.layers.mask),
            (this.visible = e.visible),
            (this.castShadow = e.castShadow),
            (this.receiveShadow = e.receiveShadow),
            (this.frustumCulled = e.frustumCulled),
            (this.renderOrder = e.renderOrder),
            (this.userData = JSON.parse(JSON.stringify(e.userData))),
            !0 === t)
          )
            for (t = 0; t < e.children.length; t++)
              this.add(e.children[t].clone());
          return this;
        },
      }),
      (lt.prototype = Object.assign(Object.create(at.prototype), {
        constructor: lt,
        isCamera: !0,
        copy: function (e, t) {
          return (
            at.prototype.copy.call(this, e, t),
            this.matrixWorldInverse.copy(e.matrixWorldInverse),
            this.projectionMatrix.copy(e.projectionMatrix),
            this
          );
        },
        getWorldDirection: (function () {
          var e = new a();
          return function (t) {
            return (
              (t = t || new l()),
              this.getWorldQuaternion(e),
              t.set(0, 0, -1).applyQuaternion(e)
            );
          };
        })(),
        updateMatrixWorld: function (e) {
          at.prototype.updateMatrixWorld.call(this, e),
            this.matrixWorldInverse.getInverse(this.matrixWorld);
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
      })),
      (ct.prototype = Object.assign(Object.create(lt.prototype), {
        constructor: ct,
        isOrthographicCamera: !0,
        copy: function (e, t) {
          return (
            lt.prototype.copy.call(this, e, t),
            (this.left = e.left),
            (this.right = e.right),
            (this.top = e.top),
            (this.bottom = e.bottom),
            (this.near = e.near),
            (this.far = e.far),
            (this.zoom = e.zoom),
            (this.view = null === e.view ? null : Object.assign({}, e.view)),
            this
          );
        },
        setViewOffset: function (e, t, n, i, r, s) {
          (this.view = {
            fullWidth: e,
            fullHeight: t,
            offsetX: n,
            offsetY: i,
            width: r,
            height: s,
          }),
            this.updateProjectionMatrix();
        },
        clearViewOffset: function () {
          (this.view = null), this.updateProjectionMatrix();
        },
        updateProjectionMatrix: function () {
          var e = (this.right - this.left) / (2 * this.zoom),
            t = (this.top - this.bottom) / (2 * this.zoom),
            n = (this.right + this.left) / 2,
            i = (this.top + this.bottom) / 2,
            r = n - e,
            n = n + e,
            e = i + t,
            t = i - t;
          if (null !== this.view)
            var n = this.zoom / (this.view.width / this.view.fullWidth),
              t = this.zoom / (this.view.height / this.view.fullHeight),
              s = (this.right - this.left) / this.view.width,
              i = (this.top - this.bottom) / this.view.height,
              r = r + (this.view.offsetX / n) * s,
              n = r + (this.view.width / n) * s,
              e = e - (this.view.offsetY / t) * i,
              t = e - (this.view.height / t) * i;
          this.projectionMatrix.makeOrthographic(
            r,
            n,
            e,
            t,
            this.near,
            this.far
          );
        },
        toJSON: function (e) {
          return (
            (e = at.prototype.toJSON.call(this, e)),
            (e.object.zoom = this.zoom),
            (e.object.left = this.left),
            (e.object.right = this.right),
            (e.object.top = this.top),
            (e.object.bottom = this.bottom),
            (e.object.near = this.near),
            (e.object.far = this.far),
            null !== this.view &&
              (e.object.view = Object.assign({}, this.view)),
            e
          );
        },
      })),
      (ut.prototype = Object.assign(Object.create(lt.prototype), {
        constructor: ut,
        isPerspectiveCamera: !0,
        copy: function (e, t) {
          return (
            lt.prototype.copy.call(this, e, t),
            (this.fov = e.fov),
            (this.zoom = e.zoom),
            (this.near = e.near),
            (this.far = e.far),
            (this.focus = e.focus),
            (this.aspect = e.aspect),
            (this.view = null === e.view ? null : Object.assign({}, e.view)),
            (this.filmGauge = e.filmGauge),
            (this.filmOffset = e.filmOffset),
            this
          );
        },
        setFocalLength: function (e) {
          (e = (0.5 * this.getFilmHeight()) / e),
            (this.fov = 2 * ks.RAD2DEG * Math.atan(e)),
            this.updateProjectionMatrix();
        },
        getFocalLength: function () {
          var e = Math.tan(0.5 * ks.DEG2RAD * this.fov);
          return (0.5 * this.getFilmHeight()) / e;
        },
        getEffectiveFOV: function () {
          return (
            2 *
            ks.RAD2DEG *
            Math.atan(Math.tan(0.5 * ks.DEG2RAD * this.fov) / this.zoom)
          );
        },
        getFilmWidth: function () {
          return this.filmGauge * Math.min(this.aspect, 1);
        },
        getFilmHeight: function () {
          return this.filmGauge / Math.max(this.aspect, 1);
        },
        setViewOffset: function (e, t, n, i, r, s) {
          (this.aspect = e / t),
            (this.view = {
              fullWidth: e,
              fullHeight: t,
              offsetX: n,
              offsetY: i,
              width: r,
              height: s,
            }),
            this.updateProjectionMatrix();
        },
        clearViewOffset: function () {
          (this.view = null), this.updateProjectionMatrix();
        },
        updateProjectionMatrix: function () {
          var e = this.near,
            t = (e * Math.tan(0.5 * ks.DEG2RAD * this.fov)) / this.zoom,
            n = 2 * t,
            i = this.aspect * n,
            r = -0.5 * i,
            s = this.view;
          if (null !== s)
            var o = s.fullWidth,
              a = s.fullHeight,
              r = r + (s.offsetX * i) / o,
              t = t - (s.offsetY * n) / a,
              i = (s.width / o) * i,
              n = (s.height / a) * n;
          (s = this.filmOffset),
            0 !== s && (r += (e * s) / this.getFilmWidth()),
            this.projectionMatrix.makePerspective(
              r,
              r + i,
              t,
              t - n,
              e,
              this.far
            );
        },
        toJSON: function (e) {
          return (
            (e = at.prototype.toJSON.call(this, e)),
            (e.object.fov = this.fov),
            (e.object.zoom = this.zoom),
            (e.object.near = this.near),
            (e.object.far = this.far),
            (e.object.focus = this.focus),
            (e.object.aspect = this.aspect),
            null !== this.view &&
              (e.object.view = Object.assign({}, this.view)),
            (e.object.filmGauge = this.filmGauge),
            (e.object.filmOffset = this.filmOffset),
            e
          );
        },
      })),
      Object.assign(ht.prototype, {
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          (this.a = e.a),
            (this.b = e.b),
            (this.c = e.c),
            this.normal.copy(e.normal),
            this.color.copy(e.color),
            (this.materialIndex = e.materialIndex);
          for (var t = 0, n = e.vertexNormals.length; n > t; t++)
            this.vertexNormals[t] = e.vertexNormals[t].clone();
          for (t = 0, n = e.vertexColors.length; n > t; t++)
            this.vertexColors[t] = e.vertexColors[t].clone();
          return this;
        },
      });
    var zs = 0;
    Object.assign(dt.prototype, t.prototype, {
      isGeometry: !0,
      applyMatrix: function (e) {
        for (
          var t = new et().getNormalMatrix(e), n = 0, i = this.vertices.length;
          i > n;
          n++
        )
          this.vertices[n].applyMatrix4(e);
        for (n = 0, i = this.faces.length; i > n; n++) {
          (e = this.faces[n]), e.normal.applyMatrix3(t).normalize();
          for (var r = 0, s = e.vertexNormals.length; s > r; r++)
            e.vertexNormals[r].applyMatrix3(t).normalize();
        }
        return (
          null !== this.boundingBox && this.computeBoundingBox(),
          null !== this.boundingSphere && this.computeBoundingSphere(),
          (this.normalsNeedUpdate = this.verticesNeedUpdate = !0),
          this
        );
      },
      rotateX: (function () {
        var e = new c();
        return function (t) {
          return e.makeRotationX(t), this.applyMatrix(e), this;
        };
      })(),
      rotateY: (function () {
        var e = new c();
        return function (t) {
          return e.makeRotationY(t), this.applyMatrix(e), this;
        };
      })(),
      rotateZ: (function () {
        var e = new c();
        return function (t) {
          return e.makeRotationZ(t), this.applyMatrix(e), this;
        };
      })(),
      translate: (function () {
        var e = new c();
        return function (t, n, i) {
          return e.makeTranslation(t, n, i), this.applyMatrix(e), this;
        };
      })(),
      scale: (function () {
        var e = new c();
        return function (t, n, i) {
          return e.makeScale(t, n, i), this.applyMatrix(e), this;
        };
      })(),
      lookAt: (function () {
        var e = new at();
        return function (t) {
          e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix);
        };
      })(),
      fromBufferGeometry: function (e) {
        function t(e, t, n, r) {
          var s =
              void 0 !== a ? [d[e].clone(), d[t].clone(), d[n].clone()] : [],
            o =
              void 0 !== c
                ? [
                    i.colors[e].clone(),
                    i.colors[t].clone(),
                    i.colors[n].clone(),
                  ]
                : [];
          (r = new ht(e, t, n, s, o, r)),
            i.faces.push(r),
            void 0 !== u &&
              i.faceVertexUvs[0].push([
                p[e].clone(),
                p[t].clone(),
                p[n].clone(),
              ]),
            void 0 !== h &&
              i.faceVertexUvs[1].push([
                f[e].clone(),
                f[t].clone(),
                f[n].clone(),
              ]);
        }
        var i = this,
          r = null !== e.index ? e.index.array : void 0,
          s = e.attributes,
          o = s.position.array,
          a = void 0 !== s.normal ? s.normal.array : void 0,
          c = void 0 !== s.color ? s.color.array : void 0,
          u = void 0 !== s.uv ? s.uv.array : void 0,
          h = void 0 !== s.uv2 ? s.uv2.array : void 0;
        void 0 !== h && (this.faceVertexUvs[1] = []);
        for (
          var d = [], p = [], f = [], m = (s = 0);
          s < o.length;
          s += 3, m += 2
        )
          i.vertices.push(new l(o[s], o[s + 1], o[s + 2])),
            void 0 !== a && d.push(new l(a[s], a[s + 1], a[s + 2])),
            void 0 !== c && i.colors.push(new z(c[s], c[s + 1], c[s + 2])),
            void 0 !== u && p.push(new n(u[m], u[m + 1])),
            void 0 !== h && f.push(new n(h[m], h[m + 1]));
        var g = e.groups;
        if (0 < g.length)
          for (s = 0; s < g.length; s++)
            for (
              var o = g[s], v = o.start, _ = o.count, m = v, v = v + _;
              v > m;
              m += 3
            )
              void 0 !== r
                ? t(r[m], r[m + 1], r[m + 2], o.materialIndex)
                : t(m, m + 1, m + 2, o.materialIndex);
        else if (void 0 !== r)
          for (s = 0; s < r.length; s += 3) t(r[s], r[s + 1], r[s + 2]);
        else for (s = 0; s < o.length / 3; s += 3) t(s, s + 1, s + 2);
        return (
          this.computeFaceNormals(),
          null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()),
          null !== e.boundingSphere &&
            (this.boundingSphere = e.boundingSphere.clone()),
          this
        );
      },
      center: function () {
        this.computeBoundingBox();
        var e = this.boundingBox.getCenter().negate();
        return this.translate(e.x, e.y, e.z), e;
      },
      normalize: function () {
        this.computeBoundingSphere();
        var e = this.boundingSphere.center,
          t = this.boundingSphere.radius,
          t = 0 === t ? 1 : 1 / t,
          n = new c();
        return (
          n.set(
            t,
            0,
            0,
            -t * e.x,
            0,
            t,
            0,
            -t * e.y,
            0,
            0,
            t,
            -t * e.z,
            0,
            0,
            0,
            1
          ),
          this.applyMatrix(n),
          this
        );
      },
      computeFaceNormals: function () {
        for (
          var e = new l(), t = new l(), n = 0, i = this.faces.length;
          i > n;
          n++
        ) {
          var r = this.faces[n],
            s = this.vertices[r.a],
            o = this.vertices[r.b];
          e.subVectors(this.vertices[r.c], o),
            t.subVectors(s, o),
            e.cross(t),
            e.normalize(),
            r.normal.copy(e);
        }
      },
      computeVertexNormals: function (e) {
        void 0 === e && (e = !0);
        var t,
          n = Array(this.vertices.length),
          i = 0;
        for (t = this.vertices.length; t > i; i++) n[i] = new l();
        if (e) {
          var r = new l(),
            s = new l();
          for (e = 0, i = this.faces.length; i > e; e++) {
            t = this.faces[e];
            var o = this.vertices[t.a],
              a = this.vertices[t.b],
              c = this.vertices[t.c];
            r.subVectors(c, a),
              s.subVectors(o, a),
              r.cross(s),
              n[t.a].add(r),
              n[t.b].add(r),
              n[t.c].add(r);
          }
        } else
          for (
            this.computeFaceNormals(), e = 0, i = this.faces.length;
            i > e;
            e++
          )
            (t = this.faces[e]),
              n[t.a].add(t.normal),
              n[t.b].add(t.normal),
              n[t.c].add(t.normal);
        for (i = 0, t = this.vertices.length; t > i; i++) n[i].normalize();
        for (e = 0, i = this.faces.length; i > e; e++)
          (t = this.faces[e]),
            (o = t.vertexNormals),
            3 === o.length
              ? (o[0].copy(n[t.a]), o[1].copy(n[t.b]), o[2].copy(n[t.c]))
              : ((o[0] = n[t.a].clone()),
                (o[1] = n[t.b].clone()),
                (o[2] = n[t.c].clone()));
        0 < this.faces.length && (this.normalsNeedUpdate = !0);
      },
      computeFlatVertexNormals: function () {
        var e;
        this.computeFaceNormals();
        var t = 0;
        for (e = this.faces.length; e > t; t++) {
          var n = this.faces[t],
            i = n.vertexNormals;
          3 === i.length
            ? (i[0].copy(n.normal), i[1].copy(n.normal), i[2].copy(n.normal))
            : ((i[0] = n.normal.clone()),
              (i[1] = n.normal.clone()),
              (i[2] = n.normal.clone()));
        }
        0 < this.faces.length && (this.normalsNeedUpdate = !0);
      },
      computeMorphNormals: function () {
        var e,
          t,
          n = 0;
        for (t = this.faces.length; t > n; n++) {
          var i = this.faces[n];
          i.__originalFaceNormal
            ? i.__originalFaceNormal.copy(i.normal)
            : (i.__originalFaceNormal = i.normal.clone()),
            i.__originalVertexNormals || (i.__originalVertexNormals = []);
          var r = 0;
          for (e = i.vertexNormals.length; e > r; r++)
            i.__originalVertexNormals[r]
              ? i.__originalVertexNormals[r].copy(i.vertexNormals[r])
              : (i.__originalVertexNormals[r] = i.vertexNormals[r].clone());
        }
        var s = new dt();
        for (
          s.faces = this.faces, r = 0, e = this.morphTargets.length;
          e > r;
          r++
        ) {
          if (!this.morphNormals[r]) {
            (this.morphNormals[r] = {}),
              (this.morphNormals[r].faceNormals = []),
              (this.morphNormals[r].vertexNormals = []),
              (i = this.morphNormals[r].faceNormals);
            var o = this.morphNormals[r].vertexNormals;
            for (n = 0, t = this.faces.length; t > n; n++) {
              var a = new l(),
                c = { a: new l(), b: new l(), c: new l() };
              i.push(a), o.push(c);
            }
          }
          for (
            o = this.morphNormals[r],
              s.vertices = this.morphTargets[r].vertices,
              s.computeFaceNormals(),
              s.computeVertexNormals(),
              n = 0,
              t = this.faces.length;
            t > n;
            n++
          )
            (i = this.faces[n]),
              (a = o.faceNormals[n]),
              (c = o.vertexNormals[n]),
              a.copy(i.normal),
              c.a.copy(i.vertexNormals[0]),
              c.b.copy(i.vertexNormals[1]),
              c.c.copy(i.vertexNormals[2]);
        }
        for (n = 0, t = this.faces.length; t > n; n++)
          (i = this.faces[n]),
            (i.normal = i.__originalFaceNormal),
            (i.vertexNormals = i.__originalVertexNormals);
      },
      computeLineDistances: function () {
        for (var e = 0, t = this.vertices, n = 0, i = t.length; i > n; n++)
          n > 0 && (e += t[n].distanceTo(t[n - 1])),
            (this.lineDistances[n] = e);
      },
      computeBoundingBox: function () {
        null === this.boundingBox && (this.boundingBox = new Q()),
          this.boundingBox.setFromPoints(this.vertices);
      },
      computeBoundingSphere: function () {
        null === this.boundingSphere && (this.boundingSphere = new Z()),
          this.boundingSphere.setFromPoints(this.vertices);
      },
      merge: function (e, t, n) {
        if (e && e.isGeometry) {
          var i,
            r = this.vertices.length,
            s = this.vertices,
            o = e.vertices,
            a = this.faces,
            l = e.faces,
            c = this.faceVertexUvs[0],
            u = e.faceVertexUvs[0],
            h = this.colors,
            d = e.colors;
          void 0 === n && (n = 0),
            void 0 !== t && (i = new et().getNormalMatrix(t)),
            (e = 0);
          for (var p = o.length; p > e; e++) {
            var f = o[e].clone();
            void 0 !== t && f.applyMatrix4(t), s.push(f);
          }
          for (e = 0, p = d.length; p > e; e++) h.push(d[e].clone());
          for (e = 0, p = l.length; p > e; e++) {
            var o = l[e],
              m = o.vertexNormals,
              d = o.vertexColors,
              h = new ht(o.a + r, o.b + r, o.c + r);
            for (
              h.normal.copy(o.normal),
                void 0 !== i && h.normal.applyMatrix3(i).normalize(),
                t = 0,
                s = m.length;
              s > t;
              t++
            )
              (f = m[t].clone()),
                void 0 !== i && f.applyMatrix3(i).normalize(),
                h.vertexNormals.push(f);
            for (h.color.copy(o.color), t = 0, s = d.length; s > t; t++)
              (f = d[t]), h.vertexColors.push(f.clone());
            (h.materialIndex = o.materialIndex + n), a.push(h);
          }
          for (e = 0, p = u.length; p > e; e++)
            if (((n = u[e]), (i = []), void 0 !== n)) {
              for (t = 0, s = n.length; s > t; t++) i.push(n[t].clone());
              c.push(i);
            }
        } else
          console.error(
            "THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",
            e
          );
      },
      mergeMesh: function (e) {
        e && e.isMesh
          ? (e.matrixAutoUpdate && e.updateMatrix(),
            this.merge(e.geometry, e.matrix))
          : console.error(
              "THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",
              e
            );
      },
      mergeVertices: function () {
        var e,
          t = {},
          n = [],
          i = [],
          r = Math.pow(10, 4),
          s = 0;
        for (e = this.vertices.length; e > s; s++) {
          var o = this.vertices[s];
          (o =
            Math.round(o.x * r) +
            "_" +
            Math.round(o.y * r) +
            "_" +
            Math.round(o.z * r)),
            void 0 === t[o]
              ? ((t[o] = s), n.push(this.vertices[s]), (i[s] = n.length - 1))
              : (i[s] = i[t[o]]);
        }
        for (t = [], s = 0, e = this.faces.length; e > s; s++)
          for (
            r = this.faces[s],
              r.a = i[r.a],
              r.b = i[r.b],
              r.c = i[r.c],
              r = [r.a, r.b, r.c],
              o = 0;
            3 > o;
            o++
          )
            if (r[o] === r[(o + 1) % 3]) {
              t.push(s);
              break;
            }
        for (s = t.length - 1; s >= 0; s--)
          for (
            r = t[s],
              this.faces.splice(r, 1),
              i = 0,
              e = this.faceVertexUvs.length;
            e > i;
            i++
          )
            this.faceVertexUvs[i].splice(r, 1);
        return (s = this.vertices.length - n.length), (this.vertices = n), s;
      },
      sortFacesByMaterialIndex: function () {
        for (var e = this.faces, t = e.length, n = 0; t > n; n++) e[n]._id = n;
        e.sort(function (e, t) {
          return e.materialIndex - t.materialIndex;
        });
        var i,
          r,
          s = this.faceVertexUvs[0],
          o = this.faceVertexUvs[1];
        for (
          s && s.length === t && (i = []),
            o && o.length === t && (r = []),
            n = 0;
          t > n;
          n++
        ) {
          var a = e[n]._id;
          i && i.push(s[a]), r && r.push(o[a]);
        }
        i && (this.faceVertexUvs[0] = i), r && (this.faceVertexUvs[1] = r);
      },
      toJSON: function () {
        function e(e, t, n) {
          return n ? e | (1 << t) : e & ~(1 << t);
        }
        function t(e) {
          var t = e.x.toString() + e.y.toString() + e.z.toString();
          return void 0 !== c[t]
            ? c[t]
            : ((c[t] = l.length / 3), l.push(e.x, e.y, e.z), c[t]);
        }
        function n(e) {
          var t = e.r.toString() + e.g.toString() + e.b.toString();
          return void 0 !== h[t]
            ? h[t]
            : ((h[t] = u.length), u.push(e.getHex()), h[t]);
        }
        function i(e) {
          var t = e.x.toString() + e.y.toString();
          return void 0 !== p[t]
            ? p[t]
            : ((p[t] = d.length / 2), d.push(e.x, e.y), p[t]);
        }
        var r = {
          metadata: {
            version: 4.5,
            type: "Geometry",
            generator: "Geometry.toJSON",
          },
        };
        if (
          ((r.uuid = this.uuid),
          (r.type = this.type),
          "" !== this.name && (r.name = this.name),
          void 0 !== this.parameters)
        ) {
          var s,
            o = this.parameters;
          for (s in o) void 0 !== o[s] && (r[s] = o[s]);
          return r;
        }
        for (o = [], s = 0; s < this.vertices.length; s++) {
          var a = this.vertices[s];
          o.push(a.x, a.y, a.z);
        }
        var a = [],
          l = [],
          c = {},
          u = [],
          h = {},
          d = [],
          p = {};
        for (s = 0; s < this.faces.length; s++) {
          var f = this.faces[s],
            m = void 0 !== this.faceVertexUvs[0][s],
            g = 0 < f.normal.length(),
            v = 0 < f.vertexNormals.length,
            _ = 1 !== f.color.r || 1 !== f.color.g || 1 !== f.color.b,
            y = 0 < f.vertexColors.length,
            b = 0,
            b = e(b, 0, 0),
            b = e(b, 1, !0),
            b = e(b, 2, !1),
            b = e(b, 3, m),
            b = e(b, 4, g),
            b = e(b, 5, v),
            b = e(b, 6, _),
            b = e(b, 7, y);
          a.push(b),
            a.push(f.a, f.b, f.c),
            a.push(f.materialIndex),
            m &&
              ((m = this.faceVertexUvs[0][s]),
              a.push(i(m[0]), i(m[1]), i(m[2]))),
            g && a.push(t(f.normal)),
            v && ((g = f.vertexNormals), a.push(t(g[0]), t(g[1]), t(g[2]))),
            _ && a.push(n(f.color)),
            y && ((f = f.vertexColors), a.push(n(f[0]), n(f[1]), n(f[2])));
        }
        return (
          (r.data = {}),
          (r.data.vertices = o),
          (r.data.normals = l),
          0 < u.length && (r.data.colors = u),
          0 < d.length && (r.data.uvs = [d]),
          (r.data.faces = a),
          r
        );
      },
      clone: function () {
        return new dt().copy(this);
      },
      copy: function (e) {
        var t, n, i;
        (this.vertices = []),
          (this.colors = []),
          (this.faces = []),
          (this.faceVertexUvs = [[]]),
          (this.morphTargets = []),
          (this.morphNormals = []),
          (this.skinWeights = []),
          (this.skinIndices = []),
          (this.lineDistances = []),
          (this.boundingSphere = this.boundingBox = null),
          (this.name = e.name);
        var r = e.vertices,
          s = 0;
        for (t = r.length; t > s; s++) this.vertices.push(r[s].clone());
        for (r = e.colors, s = 0, t = r.length; t > s; s++)
          this.colors.push(r[s].clone());
        for (r = e.faces, s = 0, t = r.length; t > s; s++)
          this.faces.push(r[s].clone());
        for (s = 0, t = e.faceVertexUvs.length; t > s; s++) {
          var o = e.faceVertexUvs[s];
          for (
            void 0 === this.faceVertexUvs[s] && (this.faceVertexUvs[s] = []),
              r = 0,
              n = o.length;
            n > r;
            r++
          ) {
            var a = o[r],
              l = [],
              c = 0;
            for (i = a.length; i > c; c++) l.push(a[c].clone());
            this.faceVertexUvs[s].push(l);
          }
        }
        for (c = e.morphTargets, s = 0, t = c.length; t > s; s++) {
          if (((i = {}), (i.name = c[s].name), void 0 !== c[s].vertices))
            for (i.vertices = [], r = 0, n = c[s].vertices.length; n > r; r++)
              i.vertices.push(c[s].vertices[r].clone());
          if (void 0 !== c[s].normals)
            for (i.normals = [], r = 0, n = c[s].normals.length; n > r; r++)
              i.normals.push(c[s].normals[r].clone());
          this.morphTargets.push(i);
        }
        for (c = e.morphNormals, s = 0, t = c.length; t > s; s++) {
          if (((i = {}), void 0 !== c[s].vertexNormals))
            for (
              i.vertexNormals = [], r = 0, n = c[s].vertexNormals.length;
              n > r;
              r++
            )
              (o = c[s].vertexNormals[r]),
                (a = {}),
                (a.a = o.a.clone()),
                (a.b = o.b.clone()),
                (a.c = o.c.clone()),
                i.vertexNormals.push(a);
          if (void 0 !== c[s].faceNormals)
            for (
              i.faceNormals = [], r = 0, n = c[s].faceNormals.length;
              n > r;
              r++
            )
              i.faceNormals.push(c[s].faceNormals[r].clone());
          this.morphNormals.push(i);
        }
        for (r = e.skinWeights, s = 0, t = r.length; t > s; s++)
          this.skinWeights.push(r[s].clone());
        for (r = e.skinIndices, s = 0, t = r.length; t > s; s++)
          this.skinIndices.push(r[s].clone());
        for (r = e.lineDistances, s = 0, t = r.length; t > s; s++)
          this.lineDistances.push(r[s]);
        return (
          (s = e.boundingBox),
          null !== s && (this.boundingBox = s.clone()),
          (s = e.boundingSphere),
          null !== s && (this.boundingSphere = s.clone()),
          (this.elementsNeedUpdate = e.elementsNeedUpdate),
          (this.verticesNeedUpdate = e.verticesNeedUpdate),
          (this.uvsNeedUpdate = e.uvsNeedUpdate),
          (this.normalsNeedUpdate = e.normalsNeedUpdate),
          (this.colorsNeedUpdate = e.colorsNeedUpdate),
          (this.lineDistancesNeedUpdate = e.lineDistancesNeedUpdate),
          (this.groupsNeedUpdate = e.groupsNeedUpdate),
          this
        );
      },
      dispose: function () {
        this.dispatchEvent({ type: "dispose" });
      },
    }),
      Object.defineProperty(pt.prototype, "needsUpdate", {
        set: function (e) {
          !0 === e && this.version++;
        },
      }),
      Object.assign(pt.prototype, {
        isBufferAttribute: !0,
        setArray: function (e) {
          if (Array.isArray(e))
            throw new TypeError(
              "THREE.BufferAttribute: array should be a Typed Array."
            );
          (this.count = void 0 !== e ? e.length / this.itemSize : 0),
            (this.array = e);
        },
        setDynamic: function (e) {
          return (this.dynamic = e), this;
        },
        copy: function (e) {
          return (
            (this.array = new e.array.constructor(e.array)),
            (this.itemSize = e.itemSize),
            (this.count = e.count),
            (this.normalized = e.normalized),
            (this.dynamic = e.dynamic),
            this
          );
        },
        copyAt: function (e, t, n) {
          (e *= this.itemSize), (n *= t.itemSize);
          for (var i = 0, r = this.itemSize; r > i; i++)
            this.array[e + i] = t.array[n + i];
          return this;
        },
        copyArray: function (e) {
          return this.array.set(e), this;
        },
        copyColorsArray: function (e) {
          for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
            var s = e[i];
            void 0 === s &&
              (console.warn(
                "THREE.BufferAttribute.copyColorsArray(): color is undefined",
                i
              ),
              (s = new z())),
              (t[n++] = s.r),
              (t[n++] = s.g),
              (t[n++] = s.b);
          }
          return this;
        },
        copyIndicesArray: function (e) {
          for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
            var s = e[i];
            (t[n++] = s.a), (t[n++] = s.b), (t[n++] = s.c);
          }
          return this;
        },
        copyVector2sArray: function (e) {
          for (var t = this.array, i = 0, r = 0, s = e.length; s > r; r++) {
            var o = e[r];
            void 0 === o &&
              (console.warn(
                "THREE.BufferAttribute.copyVector2sArray(): vector is undefined",
                r
              ),
              (o = new n())),
              (t[i++] = o.x),
              (t[i++] = o.y);
          }
          return this;
        },
        copyVector3sArray: function (e) {
          for (var t = this.array, n = 0, i = 0, r = e.length; r > i; i++) {
            var s = e[i];
            void 0 === s &&
              (console.warn(
                "THREE.BufferAttribute.copyVector3sArray(): vector is undefined",
                i
              ),
              (s = new l())),
              (t[n++] = s.x),
              (t[n++] = s.y),
              (t[n++] = s.z);
          }
          return this;
        },
        copyVector4sArray: function (e) {
          for (var t = this.array, n = 0, i = 0, s = e.length; s > i; i++) {
            var o = e[i];
            void 0 === o &&
              (console.warn(
                "THREE.BufferAttribute.copyVector4sArray(): vector is undefined",
                i
              ),
              (o = new r())),
              (t[n++] = o.x),
              (t[n++] = o.y),
              (t[n++] = o.z),
              (t[n++] = o.w);
          }
          return this;
        },
        set: function (e, t) {
          return void 0 === t && (t = 0), this.array.set(e, t), this;
        },
        getX: function (e) {
          return this.array[e * this.itemSize];
        },
        setX: function (e, t) {
          return (this.array[e * this.itemSize] = t), this;
        },
        getY: function (e) {
          return this.array[e * this.itemSize + 1];
        },
        setY: function (e, t) {
          return (this.array[e * this.itemSize + 1] = t), this;
        },
        getZ: function (e) {
          return this.array[e * this.itemSize + 2];
        },
        setZ: function (e, t) {
          return (this.array[e * this.itemSize + 2] = t), this;
        },
        getW: function (e) {
          return this.array[e * this.itemSize + 3];
        },
        setW: function (e, t) {
          return (this.array[e * this.itemSize + 3] = t), this;
        },
        setXY: function (e, t, n) {
          return (
            (e *= this.itemSize),
            (this.array[e + 0] = t),
            (this.array[e + 1] = n),
            this
          );
        },
        setXYZ: function (e, t, n, i) {
          return (
            (e *= this.itemSize),
            (this.array[e + 0] = t),
            (this.array[e + 1] = n),
            (this.array[e + 2] = i),
            this
          );
        },
        setXYZW: function (e, t, n, i, r) {
          return (
            (e *= this.itemSize),
            (this.array[e + 0] = t),
            (this.array[e + 1] = n),
            (this.array[e + 2] = i),
            (this.array[e + 3] = r),
            this
          );
        },
        onUpload: function (e) {
          return (this.onUploadCallback = e), this;
        },
        clone: function () {
          return new this.constructor(this.array, this.itemSize).copy(this);
        },
      }),
      (ft.prototype = Object.create(pt.prototype)),
      (ft.prototype.constructor = ft),
      (mt.prototype = Object.create(pt.prototype)),
      (mt.prototype.constructor = mt),
      (gt.prototype = Object.create(pt.prototype)),
      (gt.prototype.constructor = gt),
      (vt.prototype = Object.create(pt.prototype)),
      (vt.prototype.constructor = vt),
      (_t.prototype = Object.create(pt.prototype)),
      (_t.prototype.constructor = _t),
      (yt.prototype = Object.create(pt.prototype)),
      (yt.prototype.constructor = yt),
      (bt.prototype = Object.create(pt.prototype)),
      (bt.prototype.constructor = bt),
      (wt.prototype = Object.create(pt.prototype)),
      (wt.prototype.constructor = wt),
      (xt.prototype = Object.create(pt.prototype)),
      (xt.prototype.constructor = xt),
      Object.assign(Ct.prototype, {
        computeGroups: function (e) {
          var t = [],
            n = void 0;
          e = e.faces;
          for (var i = 0; i < e.length; i++) {
            var r = e[i];
            if (r.materialIndex !== n) {
              (n = r.materialIndex),
                void 0 !== s && ((s.count = 3 * i - s.start), t.push(s));
              var s = { start: 3 * i, materialIndex: n };
            }
          }
          void 0 !== s && ((s.count = 3 * i - s.start), t.push(s)),
            (this.groups = t);
        },
        fromGeometry: function (e) {
          var t = e.faces,
            i = e.vertices,
            r = e.faceVertexUvs,
            s = r[0] && 0 < r[0].length,
            o = r[1] && 0 < r[1].length,
            a = e.morphTargets,
            l = a.length;
          if (l > 0) {
            for (var c = [], u = 0; l > u; u++) c[u] = [];
            this.morphTargets.position = c;
          }
          var h = e.morphNormals,
            d = h.length;
          if (d > 0) {
            var p = [];
            for (u = 0; d > u; u++) p[u] = [];
            this.morphTargets.normal = p;
          }
          for (
            var f = e.skinIndices,
              m = e.skinWeights,
              g = f.length === i.length,
              v = m.length === i.length,
              u = 0;
            u < t.length;
            u++
          ) {
            var _ = t[u];
            this.vertices.push(i[_.a], i[_.b], i[_.c]);
            var y = _.vertexNormals;
            for (
              3 === y.length
                ? this.normals.push(y[0], y[1], y[2])
                : ((y = _.normal), this.normals.push(y, y, y)),
                y = _.vertexColors,
                3 === y.length
                  ? this.colors.push(y[0], y[1], y[2])
                  : ((y = _.color), this.colors.push(y, y, y)),
                !0 === s &&
                  ((y = r[0][u]),
                  void 0 !== y
                    ? this.uvs.push(y[0], y[1], y[2])
                    : (console.warn(
                        "THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",
                        u
                      ),
                      this.uvs.push(new n(), new n(), new n()))),
                !0 === o &&
                  ((y = r[1][u]),
                  void 0 !== y
                    ? this.uvs2.push(y[0], y[1], y[2])
                    : (console.warn(
                        "THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",
                        u
                      ),
                      this.uvs2.push(new n(), new n(), new n()))),
                y = 0;
              l > y;
              y++
            ) {
              var b = a[y].vertices;
              c[y].push(b[_.a], b[_.b], b[_.c]);
            }
            for (y = 0; d > y; y++)
              (b = h[y].vertexNormals[u]), p[y].push(b.a, b.b, b.c);
            g && this.skinIndices.push(f[_.a], f[_.b], f[_.c]),
              v && this.skinWeights.push(m[_.a], m[_.b], m[_.c]);
          }
          return (
            this.computeGroups(e),
            (this.verticesNeedUpdate = e.verticesNeedUpdate),
            (this.normalsNeedUpdate = e.normalsNeedUpdate),
            (this.colorsNeedUpdate = e.colorsNeedUpdate),
            (this.uvsNeedUpdate = e.uvsNeedUpdate),
            (this.groupsNeedUpdate = e.groupsNeedUpdate),
            this
          );
        },
      }),
      (St.MaxIndex = 65535),
      Object.assign(St.prototype, t.prototype, {
        isBufferGeometry: !0,
        getIndex: function () {
          return this.index;
        },
        setIndex: function (e) {
          this.index = Array.isArray(e)
            ? new (65535 < Tt(e) ? bt : _t)(e, 1)
            : e;
        },
        addAttribute: function (e, t, n) {
          if (
            (t && t.isBufferAttribute) ||
            (t && t.isInterleavedBufferAttribute)
          ) {
            if ("index" !== e) return (this.attributes[e] = t), this;
            console.warn(
              "THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."
            ),
              this.setIndex(t);
          } else
            console.warn(
              "THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."
            ),
              this.addAttribute(e, new pt(t, n));
        },
        getAttribute: function (e) {
          return this.attributes[e];
        },
        removeAttribute: function (e) {
          return delete this.attributes[e], this;
        },
        addGroup: function (e, t, n) {
          this.groups.push({
            start: e,
            count: t,
            materialIndex: void 0 !== n ? n : 0,
          });
        },
        clearGroups: function () {
          this.groups = [];
        },
        setDrawRange: function (e, t) {
          (this.drawRange.start = e), (this.drawRange.count = t);
        },
        applyMatrix: function (e) {
          var t = this.attributes.position;
          return (
            void 0 !== t && (e.applyToBufferAttribute(t), (t.needsUpdate = !0)),
            (t = this.attributes.normal),
            void 0 !== t &&
              (new et().getNormalMatrix(e).applyToBufferAttribute(t),
              (t.needsUpdate = !0)),
            null !== this.boundingBox && this.computeBoundingBox(),
            null !== this.boundingSphere && this.computeBoundingSphere(),
            this
          );
        },
        rotateX: (function () {
          var e = new c();
          return function (t) {
            return e.makeRotationX(t), this.applyMatrix(e), this;
          };
        })(),
        rotateY: (function () {
          var e = new c();
          return function (t) {
            return e.makeRotationY(t), this.applyMatrix(e), this;
          };
        })(),
        rotateZ: (function () {
          var e = new c();
          return function (t) {
            return e.makeRotationZ(t), this.applyMatrix(e), this;
          };
        })(),
        translate: (function () {
          var e = new c();
          return function (t, n, i) {
            return e.makeTranslation(t, n, i), this.applyMatrix(e), this;
          };
        })(),
        scale: (function () {
          var e = new c();
          return function (t, n, i) {
            return e.makeScale(t, n, i), this.applyMatrix(e), this;
          };
        })(),
        lookAt: (function () {
          var e = new at();
          return function (t) {
            e.lookAt(t), e.updateMatrix(), this.applyMatrix(e.matrix);
          };
        })(),
        center: function () {
          this.computeBoundingBox();
          var e = this.boundingBox.getCenter().negate();
          return this.translate(e.x, e.y, e.z), e;
        },
        setFromObject: function (e) {
          var t = e.geometry;
          if (e.isPoints || e.isLine) {
            e = new wt(3 * t.vertices.length, 3);
            var n = new wt(3 * t.colors.length, 3);
            this.addAttribute("position", e.copyVector3sArray(t.vertices)),
              this.addAttribute("color", n.copyColorsArray(t.colors)),
              t.lineDistances &&
                t.lineDistances.length === t.vertices.length &&
                ((e = new wt(t.lineDistances.length, 1)),
                this.addAttribute(
                  "lineDistance",
                  e.copyArray(t.lineDistances)
                )),
              null !== t.boundingSphere &&
                (this.boundingSphere = t.boundingSphere.clone()),
              null !== t.boundingBox &&
                (this.boundingBox = t.boundingBox.clone());
          } else e.isMesh && t && t.isGeometry && this.fromGeometry(t);
          return this;
        },
        updateFromObject: function (e) {
          var t = e.geometry;
          if (e.isMesh) {
            var n = t.__directGeometry;
            if (
              (!0 === t.elementsNeedUpdate &&
                ((n = void 0), (t.elementsNeedUpdate = !1)),
              void 0 === n)
            )
              return this.fromGeometry(t);
            (n.verticesNeedUpdate = t.verticesNeedUpdate),
              (n.normalsNeedUpdate = t.normalsNeedUpdate),
              (n.colorsNeedUpdate = t.colorsNeedUpdate),
              (n.uvsNeedUpdate = t.uvsNeedUpdate),
              (n.groupsNeedUpdate = t.groupsNeedUpdate),
              (t.verticesNeedUpdate = !1),
              (t.normalsNeedUpdate = !1),
              (t.colorsNeedUpdate = !1),
              (t.uvsNeedUpdate = !1),
              (t.groupsNeedUpdate = !1),
              (t = n);
          }
          return (
            !0 === t.verticesNeedUpdate &&
              ((n = this.attributes.position),
              void 0 !== n &&
                (n.copyVector3sArray(t.vertices), (n.needsUpdate = !0)),
              (t.verticesNeedUpdate = !1)),
            !0 === t.normalsNeedUpdate &&
              ((n = this.attributes.normal),
              void 0 !== n &&
                (n.copyVector3sArray(t.normals), (n.needsUpdate = !0)),
              (t.normalsNeedUpdate = !1)),
            !0 === t.colorsNeedUpdate &&
              ((n = this.attributes.color),
              void 0 !== n &&
                (n.copyColorsArray(t.colors), (n.needsUpdate = !0)),
              (t.colorsNeedUpdate = !1)),
            t.uvsNeedUpdate &&
              ((n = this.attributes.uv),
              void 0 !== n &&
                (n.copyVector2sArray(t.uvs), (n.needsUpdate = !0)),
              (t.uvsNeedUpdate = !1)),
            t.lineDistancesNeedUpdate &&
              ((n = this.attributes.lineDistance),
              void 0 !== n &&
                (n.copyArray(t.lineDistances), (n.needsUpdate = !0)),
              (t.lineDistancesNeedUpdate = !1)),
            t.groupsNeedUpdate &&
              (t.computeGroups(e.geometry),
              (this.groups = t.groups),
              (t.groupsNeedUpdate = !1)),
            this
          );
        },
        fromGeometry: function (e) {
          return (
            (e.__directGeometry = new Ct().fromGeometry(e)),
            this.fromDirectGeometry(e.__directGeometry)
          );
        },
        fromDirectGeometry: function (e) {
          var t = new Float32Array(3 * e.vertices.length);
          this.addAttribute(
            "position",
            new pt(t, 3).copyVector3sArray(e.vertices)
          ),
            0 < e.normals.length &&
              ((t = new Float32Array(3 * e.normals.length)),
              this.addAttribute(
                "normal",
                new pt(t, 3).copyVector3sArray(e.normals)
              )),
            0 < e.colors.length &&
              ((t = new Float32Array(3 * e.colors.length)),
              this.addAttribute(
                "color",
                new pt(t, 3).copyColorsArray(e.colors)
              )),
            0 < e.uvs.length &&
              ((t = new Float32Array(2 * e.uvs.length)),
              this.addAttribute("uv", new pt(t, 2).copyVector2sArray(e.uvs))),
            0 < e.uvs2.length &&
              ((t = new Float32Array(2 * e.uvs2.length)),
              this.addAttribute("uv2", new pt(t, 2).copyVector2sArray(e.uvs2))),
            0 < e.indices.length &&
              ((t = new (65535 < Tt(e.indices) ? Uint32Array : Uint16Array)(
                3 * e.indices.length
              )),
              this.setIndex(new pt(t, 1).copyIndicesArray(e.indices))),
            (this.groups = e.groups);
          for (var n in e.morphTargets) {
            for (
              var t = [], i = e.morphTargets[n], r = 0, s = i.length;
              s > r;
              r++
            ) {
              var o = i[r],
                a = new wt(3 * o.length, 3);
              t.push(a.copyVector3sArray(o));
            }
            this.morphAttributes[n] = t;
          }
          return (
            0 < e.skinIndices.length &&
              ((n = new wt(4 * e.skinIndices.length, 4)),
              this.addAttribute(
                "skinIndex",
                n.copyVector4sArray(e.skinIndices)
              )),
            0 < e.skinWeights.length &&
              ((n = new wt(4 * e.skinWeights.length, 4)),
              this.addAttribute(
                "skinWeight",
                n.copyVector4sArray(e.skinWeights)
              )),
            null !== e.boundingSphere &&
              (this.boundingSphere = e.boundingSphere.clone()),
            null !== e.boundingBox &&
              (this.boundingBox = e.boundingBox.clone()),
            this
          );
        },
        computeBoundingBox: function () {
          null === this.boundingBox && (this.boundingBox = new Q());
          var e = this.attributes.position;
          void 0 !== e
            ? this.boundingBox.setFromBufferAttribute(e)
            : this.boundingBox.makeEmpty(),
            (isNaN(this.boundingBox.min.x) ||
              isNaN(this.boundingBox.min.y) ||
              isNaN(this.boundingBox.min.z)) &&
              console.error(
                'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',
                this
              );
        },
        computeBoundingSphere: (function () {
          var e = new Q(),
            t = new l();
          return function () {
            null === this.boundingSphere && (this.boundingSphere = new Z());
            var n = this.attributes.position;
            if (n) {
              var i = this.boundingSphere.center;
              e.setFromBufferAttribute(n), e.getCenter(i);
              for (var r = 0, s = 0, o = n.count; o > s; s++)
                (t.x = n.getX(s)),
                  (t.y = n.getY(s)),
                  (t.z = n.getZ(s)),
                  (r = Math.max(r, i.distanceToSquared(t)));
              (this.boundingSphere.radius = Math.sqrt(r)),
                isNaN(this.boundingSphere.radius) &&
                  console.error(
                    'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',
                    this
                  );
            }
          };
        })(),
        computeFaceNormals: function () {},
        computeVertexNormals: function () {
          var e = this.index,
            t = this.attributes,
            n = this.groups;
          if (t.position) {
            var i = t.position.array;
            if (void 0 === t.normal)
              this.addAttribute(
                "normal",
                new pt(new Float32Array(i.length), 3)
              );
            else
              for (var r = t.normal.array, s = 0, o = r.length; o > s; s++)
                r[s] = 0;
            var r = t.normal.array,
              a = new l(),
              c = new l(),
              u = new l(),
              h = new l(),
              d = new l();
            if (e) {
              (e = e.array), 0 === n.length && this.addGroup(0, e.length);
              for (var p = 0, f = n.length; f > p; ++p) {
                (s = n[p]), (o = s.start);
                var m = s.count;
                for (s = o, o += m; o > s; s += 3) {
                  m = 3 * e[s + 0];
                  var g = 3 * e[s + 1],
                    v = 3 * e[s + 2];
                  a.fromArray(i, m),
                    c.fromArray(i, g),
                    u.fromArray(i, v),
                    h.subVectors(u, c),
                    d.subVectors(a, c),
                    h.cross(d),
                    (r[m] += h.x),
                    (r[m + 1] += h.y),
                    (r[m + 2] += h.z),
                    (r[g] += h.x),
                    (r[g + 1] += h.y),
                    (r[g + 2] += h.z),
                    (r[v] += h.x),
                    (r[v + 1] += h.y),
                    (r[v + 2] += h.z);
                }
              }
            } else
              for (s = 0, o = i.length; o > s; s += 9)
                a.fromArray(i, s),
                  c.fromArray(i, s + 3),
                  u.fromArray(i, s + 6),
                  h.subVectors(u, c),
                  d.subVectors(a, c),
                  h.cross(d),
                  (r[s] = h.x),
                  (r[s + 1] = h.y),
                  (r[s + 2] = h.z),
                  (r[s + 3] = h.x),
                  (r[s + 4] = h.y),
                  (r[s + 5] = h.z),
                  (r[s + 6] = h.x),
                  (r[s + 7] = h.y),
                  (r[s + 8] = h.z);
            this.normalizeNormals(), (t.normal.needsUpdate = !0);
          }
        },
        merge: function (e, t) {
          if (e && e.isBufferGeometry) {
            void 0 === t && (t = 0);
            var n,
              i = this.attributes;
            for (n in i)
              if (void 0 !== e.attributes[n])
                for (
                  var r = i[n].array,
                    s = e.attributes[n],
                    o = s.array,
                    a = 0,
                    s = s.itemSize * t;
                  a < o.length;
                  a++, s++
                )
                  r[s] = o[a];
            return this;
          }
          console.error(
            "THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",
            e
          );
        },
        normalizeNormals: (function () {
          var e = new l();
          return function () {
            for (var t = this.attributes.normal, n = 0, i = t.count; i > n; n++)
              (e.x = t.getX(n)),
                (e.y = t.getY(n)),
                (e.z = t.getZ(n)),
                e.normalize(),
                t.setXYZ(n, e.x, e.y, e.z);
          };
        })(),
        toNonIndexed: function () {
          if (null === this.index)
            return (
              console.warn(
                "THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."
              ),
              this
            );
          var e,
            t = new St(),
            n = this.index.array,
            i = this.attributes;
          for (e in i) {
            for (
              var r,
                s = i[e],
                o = s.array,
                s = s.itemSize,
                a = new o.constructor(n.length * s),
                l = 0,
                c = 0,
                u = n.length;
              u > c;
              c++
            ) {
              r = n[c] * s;
              for (var h = 0; s > h; h++) a[l++] = o[r++];
            }
            t.addAttribute(e, new pt(a, s));
          }
          return t;
        },
        toJSON: function () {
          var e = {
            metadata: {
              version: 4.5,
              type: "BufferGeometry",
              generator: "BufferGeometry.toJSON",
            },
          };
          if (
            ((e.uuid = this.uuid),
            (e.type = this.type),
            "" !== this.name && (e.name = this.name),
            void 0 !== this.parameters)
          ) {
            var t = this.parameters;
            for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
            return e;
          }
          e.data = { attributes: {} };
          var i = this.index;
          null !== i &&
            ((t = Array.prototype.slice.call(i.array)),
            (e.data.index = { type: i.array.constructor.name, array: t })),
            (i = this.attributes);
          for (n in i) {
            var r = i[n];
            (t = Array.prototype.slice.call(r.array)),
              (e.data.attributes[n] = {
                itemSize: r.itemSize,
                type: r.array.constructor.name,
                array: t,
                normalized: r.normalized,
              });
          }
          return (
            (n = this.groups),
            0 < n.length && (e.data.groups = JSON.parse(JSON.stringify(n))),
            (n = this.boundingSphere),
            null !== n &&
              (e.data.boundingSphere = {
                center: n.center.toArray(),
                radius: n.radius,
              }),
            e
          );
        },
        clone: function () {
          return new St().copy(this);
        },
        copy: function (e) {
          var t;
          (this.index = null),
            (this.attributes = {}),
            (this.morphAttributes = {}),
            (this.groups = []),
            (this.boundingSphere = this.boundingBox = null),
            (this.name = e.name);
          var n = e.index;
          null !== n && this.setIndex(n.clone()), (n = e.attributes);
          for (o in n) this.addAttribute(o, n[o].clone());
          var i = e.morphAttributes;
          for (o in i) {
            var r = [],
              s = i[o];
            for (n = 0, t = s.length; t > n; n++) r.push(s[n].clone());
            this.morphAttributes[o] = r;
          }
          var o = e.groups;
          for (n = 0, t = o.length; t > n; n++)
            (i = o[n]), this.addGroup(i.start, i.count, i.materialIndex);
          return (
            (o = e.boundingBox),
            null !== o && (this.boundingBox = o.clone()),
            (o = e.boundingSphere),
            null !== o && (this.boundingSphere = o.clone()),
            (this.drawRange.start = e.drawRange.start),
            (this.drawRange.count = e.drawRange.count),
            this
          );
        },
        dispose: function () {
          this.dispatchEvent({ type: "dispose" });
        },
      }),
      (Et.prototype = Object.create(dt.prototype)),
      (Et.prototype.constructor = Et),
      (kt.prototype = Object.create(St.prototype)),
      (kt.prototype.constructor = kt),
      (Pt.prototype = Object.create(dt.prototype)),
      (Pt.prototype.constructor = Pt),
      (It.prototype = Object.create(St.prototype)),
      (It.prototype.constructor = It),
      (At.prototype = Object.create(X.prototype)),
      (At.prototype.constructor = At),
      (At.prototype.isMeshBasicMaterial = !0),
      (At.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.map = e.map),
          (this.lightMap = e.lightMap),
          (this.lightMapIntensity = e.lightMapIntensity),
          (this.aoMap = e.aoMap),
          (this.aoMapIntensity = e.aoMapIntensity),
          (this.specularMap = e.specularMap),
          (this.alphaMap = e.alphaMap),
          (this.envMap = e.envMap),
          (this.combine = e.combine),
          (this.reflectivity = e.reflectivity),
          (this.refractionRatio = e.refractionRatio),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.wireframeLinecap = e.wireframeLinecap),
          (this.wireframeLinejoin = e.wireframeLinejoin),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          this
        );
      }),
      Object.assign(Ot.prototype, {
        set: function (e, t) {
          return this.origin.copy(e), this.direction.copy(t), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return (
            this.origin.copy(e.origin), this.direction.copy(e.direction), this
          );
        },
        at: function (e, t) {
          return (t || new l())
            .copy(this.direction)
            .multiplyScalar(e)
            .add(this.origin);
        },
        lookAt: function (e) {
          return this.direction.copy(e).sub(this.origin).normalize(), this;
        },
        recast: (function () {
          var e = new l();
          return function (t) {
            return this.origin.copy(this.at(t, e)), this;
          };
        })(),
        closestPointToPoint: function (e, t) {
          return (
            (t = t || new l()),
            t.subVectors(e, this.origin),
            (e = t.dot(this.direction)),
            0 > e
              ? t.copy(this.origin)
              : t.copy(this.direction).multiplyScalar(e).add(this.origin)
          );
        },
        distanceToPoint: function (e) {
          return Math.sqrt(this.distanceSqToPoint(e));
        },
        distanceSqToPoint: (function () {
          var e = new l();
          return function (t) {
            var n = e.subVectors(t, this.origin).dot(this.direction);
            return 0 > n
              ? this.origin.distanceToSquared(t)
              : (e.copy(this.direction).multiplyScalar(n).add(this.origin),
                e.distanceToSquared(t));
          };
        })(),
        distanceSqToSegment: (function () {
          var e = new l(),
            t = new l(),
            n = new l();
          return function (i, r, s, o) {
            e.copy(i).add(r).multiplyScalar(0.5),
              t.copy(r).sub(i).normalize(),
              n.copy(this.origin).sub(e);
            var a = 0.5 * i.distanceTo(r),
              l = -this.direction.dot(t),
              c = n.dot(this.direction),
              u = -n.dot(t),
              h = n.lengthSq(),
              d = Math.abs(1 - l * l);
            if (d > 0) {
              (i = l * u - c), (r = l * c - u);
              var p = a * d;
              i >= 0
                ? r >= -p
                  ? p >= r
                    ? ((a = 1 / d),
                      (i *= a),
                      (r *= a),
                      (l =
                        i * (i + l * r + 2 * c) + r * (l * i + r + 2 * u) + h))
                    : ((r = a),
                      (i = Math.max(0, -(l * r + c))),
                      (l = -i * i + r * (r + 2 * u) + h))
                  : ((r = -a),
                    (i = Math.max(0, -(l * r + c))),
                    (l = -i * i + r * (r + 2 * u) + h))
                : -p >= r
                ? ((i = Math.max(0, -(-l * a + c))),
                  (r = i > 0 ? -a : Math.min(Math.max(-a, -u), a)),
                  (l = -i * i + r * (r + 2 * u) + h))
                : p >= r
                ? ((i = 0),
                  (r = Math.min(Math.max(-a, -u), a)),
                  (l = r * (r + 2 * u) + h))
                : ((i = Math.max(0, -(l * a + c))),
                  (r = i > 0 ? a : Math.min(Math.max(-a, -u), a)),
                  (l = -i * i + r * (r + 2 * u) + h));
            } else
              (r = l > 0 ? -a : a),
                (i = Math.max(0, -(l * r + c))),
                (l = -i * i + r * (r + 2 * u) + h);
            return (
              s && s.copy(this.direction).multiplyScalar(i).add(this.origin),
              o && o.copy(t).multiplyScalar(r).add(e),
              l
            );
          };
        })(),
        intersectSphere: (function () {
          var e = new l();
          return function (t, n) {
            e.subVectors(t.center, this.origin);
            var i = e.dot(this.direction),
              r = e.dot(e) - i * i;
            return (
              (t = t.radius * t.radius),
              r > t
                ? null
                : ((t = Math.sqrt(t - r)),
                  (r = i - t),
                  (i += t),
                  0 > r && 0 > i ? null : 0 > r ? this.at(i, n) : this.at(r, n))
            );
          };
        })(),
        intersectsSphere: function (e) {
          return this.distanceToPoint(e.center) <= e.radius;
        },
        distanceToPlane: function (e) {
          var t = e.normal.dot(this.direction);
          return 0 === t
            ? 0 === e.distanceToPoint(this.origin)
              ? 0
              : null
            : ((e = -(this.origin.dot(e.normal) + e.constant) / t),
              e >= 0 ? e : null);
        },
        intersectPlane: function (e, t) {
          return (
            (e = this.distanceToPlane(e)), null === e ? null : this.at(e, t)
          );
        },
        intersectsPlane: function (e) {
          var t = e.distanceToPoint(this.origin);
          return 0 === t || 0 > e.normal.dot(this.direction) * t ? !0 : !1;
        },
        intersectBox: function (e, t) {
          var n = 1 / this.direction.x,
            i = 1 / this.direction.y,
            r = 1 / this.direction.z,
            s = this.origin;
          if (n >= 0) {
            var o = (e.min.x - s.x) * n;
            n *= e.max.x - s.x;
          } else (o = (e.max.x - s.x) * n), (n *= e.min.x - s.x);
          if (i >= 0) {
            var a = (e.min.y - s.y) * i;
            i *= e.max.y - s.y;
          } else (a = (e.max.y - s.y) * i), (i *= e.min.y - s.y);
          return o > i || a > n
            ? null
            : ((a > o || o !== o) && (o = a),
              (n > i || n !== n) && (n = i),
              r >= 0
                ? ((a = (e.min.z - s.z) * r), (e = (e.max.z - s.z) * r))
                : ((a = (e.max.z - s.z) * r), (e = (e.min.z - s.z) * r)),
              o > e || a > n
                ? null
                : ((a > o || o !== o) && (o = a),
                  (n > e || n !== n) && (n = e),
                  0 > n ? null : this.at(o >= 0 ? o : n, t)));
        },
        intersectsBox: (function () {
          var e = new l();
          return function (t) {
            return null !== this.intersectBox(t, e);
          };
        })(),
        intersectTriangle: (function () {
          var e = new l(),
            t = new l(),
            n = new l(),
            i = new l();
          return function (r, s, o, a, l) {
            if (
              (t.subVectors(s, r),
              n.subVectors(o, r),
              i.crossVectors(t, n),
              (s = this.direction.dot(i)),
              s > 0)
            ) {
              if (a) return null;
              a = 1;
            } else {
              if (!(0 > s)) return null;
              (a = -1), (s = -s);
            }
            return (
              e.subVectors(this.origin, r),
              (r = a * this.direction.dot(n.crossVectors(e, n))),
              0 > r
                ? null
                : ((o = a * this.direction.dot(t.cross(e))),
                  0 > o || r + o > s
                    ? null
                    : ((r = -a * e.dot(i)), 0 > r ? null : this.at(r / s, l)))
            );
          };
        })(),
        applyMatrix4: function (e) {
          return (
            this.origin.applyMatrix4(e),
            this.direction.transformDirection(e),
            this
          );
        },
        equals: function (e) {
          return (
            e.origin.equals(this.origin) && e.direction.equals(this.direction)
          );
        },
      }),
      Object.assign(Dt.prototype, {
        set: function (e, t) {
          return this.start.copy(e), this.end.copy(t), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.start.copy(e.start), this.end.copy(e.end), this;
        },
        getCenter: function (e) {
          return (e || new l())
            .addVectors(this.start, this.end)
            .multiplyScalar(0.5);
        },
        delta: function (e) {
          return (e || new l()).subVectors(this.end, this.start);
        },
        distanceSq: function () {
          return this.start.distanceToSquared(this.end);
        },
        distance: function () {
          return this.start.distanceTo(this.end);
        },
        at: function (e, t) {
          return (
            (t = t || new l()), this.delta(t).multiplyScalar(e).add(this.start)
          );
        },
        closestPointToPointParameter: (function () {
          var e = new l(),
            t = new l();
          return function (n, i) {
            return (
              e.subVectors(n, this.start),
              t.subVectors(this.end, this.start),
              (n = t.dot(t)),
              (n = t.dot(e) / n),
              i && (n = ks.clamp(n, 0, 1)),
              n
            );
          };
        })(),
        closestPointToPoint: function (e, t, n) {
          return (
            (e = this.closestPointToPointParameter(e, t)),
            (n = n || new l()),
            this.delta(n).multiplyScalar(e).add(this.start)
          );
        },
        applyMatrix4: function (e) {
          return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this;
        },
        equals: function (e) {
          return e.start.equals(this.start) && e.end.equals(this.end);
        },
      }),
      Object.assign(Mt, {
        normal: (function () {
          var e = new l();
          return function (t, n, i, r) {
            return (
              (r = r || new l()),
              r.subVectors(i, n),
              e.subVectors(t, n),
              r.cross(e),
              (t = r.lengthSq()),
              t > 0 ? r.multiplyScalar(1 / Math.sqrt(t)) : r.set(0, 0, 0)
            );
          };
        })(),
        barycoordFromPoint: (function () {
          var e = new l(),
            t = new l(),
            n = new l();
          return function (i, r, s, o, a) {
            e.subVectors(o, r),
              t.subVectors(s, r),
              n.subVectors(i, r),
              (i = e.dot(e)),
              (r = e.dot(t)),
              (s = e.dot(n));
            var c = t.dot(t);
            o = t.dot(n);
            var u = i * c - r * r;
            return (
              (a = a || new l()),
              0 === u
                ? a.set(-2, -1, -1)
                : ((u = 1 / u),
                  (c = (c * s - r * o) * u),
                  (i = (i * o - r * s) * u),
                  a.set(1 - c - i, i, c))
            );
          };
        })(),
        containsPoint: (function () {
          var e = new l();
          return function (t, n, i, r) {
            return (
              (t = Mt.barycoordFromPoint(t, n, i, r, e)),
              0 <= t.x && 0 <= t.y && 1 >= t.x + t.y
            );
          };
        })(),
      }),
      Object.assign(Mt.prototype, {
        set: function (e, t, n) {
          return this.a.copy(e), this.b.copy(t), this.c.copy(n), this;
        },
        setFromPointsAndIndices: function (e, t, n, i) {
          return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[i]), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this;
        },
        area: (function () {
          var e = new l(),
            t = new l();
          return function () {
            return (
              e.subVectors(this.c, this.b),
              t.subVectors(this.a, this.b),
              0.5 * e.cross(t).length()
            );
          };
        })(),
        midpoint: function (e) {
          return (e || new l())
            .addVectors(this.a, this.b)
            .add(this.c)
            .multiplyScalar(1 / 3);
        },
        normal: function (e) {
          return Mt.normal(this.a, this.b, this.c, e);
        },
        plane: function (e) {
          return (e || new tt()).setFromCoplanarPoints(this.a, this.b, this.c);
        },
        barycoordFromPoint: function (e, t) {
          return Mt.barycoordFromPoint(e, this.a, this.b, this.c, t);
        },
        containsPoint: function (e) {
          return Mt.containsPoint(e, this.a, this.b, this.c);
        },
        closestPointToPoint: (function () {
          var e = new tt(),
            t = [new Dt(), new Dt(), new Dt()],
            n = new l(),
            i = new l();
          return function (r, s) {
            s = s || new l();
            var o = 1 / 0;
            if (
              (e.setFromCoplanarPoints(this.a, this.b, this.c),
              e.projectPoint(r, n),
              !0 === this.containsPoint(n))
            )
              s.copy(n);
            else
              for (
                t[0].set(this.a, this.b),
                  t[1].set(this.b, this.c),
                  t[2].set(this.c, this.a),
                  r = 0;
                r < t.length;
                r++
              ) {
                t[r].closestPointToPoint(n, !0, i);
                var a = n.distanceToSquared(i);
                o > a && ((o = a), s.copy(i));
              }
            return s;
          };
        })(),
        equals: function (e) {
          return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c);
        },
      }),
      (Rt.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Rt,
        isMesh: !0,
        setDrawMode: function (e) {
          this.drawMode = e;
        },
        copy: function (e) {
          return (
            at.prototype.copy.call(this, e), (this.drawMode = e.drawMode), this
          );
        },
        updateMorphTargets: function () {
          var e = this.geometry;
          if (e.isBufferGeometry) {
            e = e.morphAttributes;
            var t = Object.keys(e);
            if (0 < t.length) {
              var n = e[t[0]];
              if (void 0 !== n)
                for (
                  this.morphTargetInfluences = [],
                    this.morphTargetDictionary = {},
                    e = 0,
                    t = n.length;
                  t > e;
                  e++
                ) {
                  var i = n[e].name || String(e);
                  this.morphTargetInfluences.push(0),
                    (this.morphTargetDictionary[i] = e);
                }
            }
          } else if (((n = e.morphTargets), void 0 !== n && 0 < n.length))
            for (
              this.morphTargetInfluences = [],
                this.morphTargetDictionary = {},
                e = 0,
                t = n.length;
              t > e;
              e++
            )
              (i = n[e].name || String(e)),
                this.morphTargetInfluences.push(0),
                (this.morphTargetDictionary[i] = e);
        },
        raycast: (function () {
          function e(e, t, n, i, r, s, o) {
            return (
              Mt.barycoordFromPoint(e, t, n, i, _),
              r.multiplyScalar(_.x),
              s.multiplyScalar(_.y),
              o.multiplyScalar(_.z),
              r.add(s).add(o),
              r.clone()
            );
          }
          function t(e, t, n, i, r, s, o, a) {
            return null ===
              (1 === t.side
                ? i.intersectTriangle(o, s, r, !0, a)
                : i.intersectTriangle(r, s, o, 2 !== t.side, a))
              ? null
              : (b.copy(a),
                b.applyMatrix4(e.matrixWorld),
                (t = n.ray.origin.distanceTo(b)),
                t < n.near || t > n.far
                  ? null
                  : { distance: t, point: b.clone(), object: e });
          }
          function i(n, i, r, s, o, l, c, d) {
            return (
              a.fromBufferAttribute(s, l),
              u.fromBufferAttribute(s, c),
              h.fromBufferAttribute(s, d),
              (n = t(n, n.material, i, r, a, u, h, y)) &&
                (o &&
                  (m.fromBufferAttribute(o, l),
                  g.fromBufferAttribute(o, c),
                  v.fromBufferAttribute(o, d),
                  (n.uv = e(y, a, u, h, m, g, v))),
                (n.face = new ht(l, c, d, Mt.normal(a, u, h))),
                (n.faceIndex = l)),
              n
            );
          }
          var r = new c(),
            s = new Ot(),
            o = new Z(),
            a = new l(),
            u = new l(),
            h = new l(),
            d = new l(),
            p = new l(),
            f = new l(),
            m = new n(),
            g = new n(),
            v = new n(),
            _ = new l(),
            y = new l(),
            b = new l();
          return function (n, l) {
            var c = this.geometry,
              _ = this.material,
              b = this.matrixWorld;
            if (
              void 0 !== _ &&
              (null === c.boundingSphere && c.computeBoundingSphere(),
              o.copy(c.boundingSphere),
              o.applyMatrix4(b),
              !1 !== n.ray.intersectsSphere(o) &&
                (r.getInverse(b),
                s.copy(n.ray).applyMatrix4(r),
                null === c.boundingBox ||
                  !1 !== s.intersectsBox(c.boundingBox)))
            ) {
              var w;
              if (c.isBufferGeometry) {
                var x,
                  _ = c.index,
                  C = c.attributes.position,
                  b = c.attributes.uv;
                if (null !== _) {
                  var T = 0;
                  for (x = _.count; x > T; T += 3) {
                    c = _.getX(T);
                    var S = _.getX(T + 1),
                      E = _.getX(T + 2);
                    (w = i(this, n, s, C, b, c, S, E)) &&
                      ((w.faceIndex = Math.floor(T / 3)), l.push(w));
                  }
                } else
                  for (T = 0, x = C.count; x > T; T += 3)
                    (c = T),
                      (S = T + 1),
                      (E = T + 2),
                      (w = i(this, n, s, C, b, c, S, E)) &&
                        ((w.index = c), l.push(w));
              } else if (c.isGeometry) {
                var b = Array.isArray(_);
                (T = c.vertices),
                  (x = c.faces),
                  (S = c.faceVertexUvs[0]),
                  0 < S.length && (C = S);
                for (var k = 0, P = x.length; P > k; k++) {
                  var I = x[k];
                  if (((w = b ? _[I.materialIndex] : _), void 0 !== w)) {
                    (S = T[I.a]), (E = T[I.b]);
                    var A = T[I.c];
                    if (!0 === w.morphTargets) {
                      var O = c.morphTargets,
                        D = this.morphTargetInfluences;
                      a.set(0, 0, 0), u.set(0, 0, 0), h.set(0, 0, 0);
                      for (var M = 0, R = O.length; R > M; M++) {
                        var L = D[M];
                        if (0 !== L) {
                          var N = O[M].vertices;
                          a.addScaledVector(d.subVectors(N[I.a], S), L),
                            u.addScaledVector(p.subVectors(N[I.b], E), L),
                            h.addScaledVector(f.subVectors(N[I.c], A), L);
                        }
                      }
                      a.add(S), u.add(E), h.add(A), (S = a), (E = u), (A = h);
                    }
                    (w = t(this, w, n, s, S, E, A, y)) &&
                      (C &&
                        C[k] &&
                        ((O = C[k]),
                        m.copy(O[0]),
                        g.copy(O[1]),
                        v.copy(O[2]),
                        (w.uv = e(y, S, E, A, m, g, v))),
                      (w.face = I),
                      (w.faceIndex = k),
                      l.push(w));
                  }
                }
              }
            }
          };
        })(),
        clone: function () {
          return new this.constructor(this.geometry, this.material).copy(this);
        },
      }));
    var Ws = 0;
    (pn.prototype = Object.assign(Object.create(ut.prototype), {
      constructor: pn,
      isArrayCamera: !0,
    })),
      (yn.prototype.isFogExp2 = !0),
      (yn.prototype.clone = function () {
        return new yn(this.color.getHex(), this.density);
      }),
      (yn.prototype.toJSON = function () {
        return {
          type: "FogExp2",
          color: this.color.getHex(),
          density: this.density,
        };
      }),
      (bn.prototype.isFog = !0),
      (bn.prototype.clone = function () {
        return new bn(this.color.getHex(), this.near, this.far);
      }),
      (bn.prototype.toJSON = function () {
        return {
          type: "Fog",
          color: this.color.getHex(),
          near: this.near,
          far: this.far,
        };
      }),
      (wn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: wn,
        copy: function (e, t) {
          return (
            at.prototype.copy.call(this, e, t),
            null !== e.background && (this.background = e.background.clone()),
            null !== e.fog && (this.fog = e.fog.clone()),
            null !== e.overrideMaterial &&
              (this.overrideMaterial = e.overrideMaterial.clone()),
            (this.autoUpdate = e.autoUpdate),
            (this.matrixAutoUpdate = e.matrixAutoUpdate),
            this
          );
        },
        toJSON: function (e) {
          var t = at.prototype.toJSON.call(this, e);
          return (
            null !== this.background &&
              (t.object.background = this.background.toJSON(e)),
            null !== this.fog && (t.object.fog = this.fog.toJSON()),
            t
          );
        },
      })),
      (xn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: xn,
        isLensFlare: !0,
        copy: function (e) {
          at.prototype.copy.call(this, e),
            this.positionScreen.copy(e.positionScreen),
            (this.customUpdateCallback = e.customUpdateCallback);
          for (var t = 0, n = e.lensFlares.length; n > t; t++)
            this.lensFlares.push(e.lensFlares[t]);
          return this;
        },
        add: function (e, t, n, i, r, s) {
          void 0 === t && (t = -1),
            void 0 === n && (n = 0),
            void 0 === s && (s = 1),
            void 0 === r && (r = new z(16777215)),
            void 0 === i && (i = 1),
            (n = Math.min(n, Math.max(0, n))),
            this.lensFlares.push({
              texture: e,
              size: t,
              distance: n,
              x: 0,
              y: 0,
              z: 0,
              scale: 1,
              rotation: 0,
              opacity: s,
              color: r,
              blending: i,
            });
        },
        updateLensFlares: function () {
          var e,
            t = this.lensFlares.length,
            n = 2 * -this.positionScreen.x,
            i = 2 * -this.positionScreen.y;
          for (e = 0; t > e; e++) {
            var r = this.lensFlares[e];
            (r.x = this.positionScreen.x + n * r.distance),
              (r.y = this.positionScreen.y + i * r.distance),
              (r.wantedRotation = r.x * Math.PI * 0.25),
              (r.rotation += 0.25 * (r.wantedRotation - r.rotation));
          }
        },
      })),
      (Cn.prototype = Object.create(X.prototype)),
      (Cn.prototype.constructor = Cn),
      (Cn.prototype.isSpriteMaterial = !0),
      (Cn.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.map = e.map),
          (this.rotation = e.rotation),
          this
        );
      }),
      (Tn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Tn,
        isSprite: !0,
        raycast: (function () {
          var e = new l(),
            t = new l(),
            n = new l();
          return function (i, r) {
            t.setFromMatrixPosition(this.matrixWorld),
              i.ray.closestPointToPoint(t, e),
              n.setFromMatrixScale(this.matrixWorld);
            var s = (n.x * n.y) / 4;
            t.distanceToSquared(e) > s ||
              ((s = i.ray.origin.distanceTo(e)),
              s < i.near ||
                s > i.far ||
                r.push({
                  distance: s,
                  point: e.clone(),
                  face: null,
                  object: this,
                }));
          };
        })(),
        clone: function () {
          return new this.constructor(this.material).copy(this);
        },
      })),
      (Sn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Sn,
        copy: function (e) {
          at.prototype.copy.call(this, e, !1), (e = e.levels);
          for (var t = 0, n = e.length; n > t; t++) {
            var i = e[t];
            this.addLevel(i.object.clone(), i.distance);
          }
          return this;
        },
        addLevel: function (e, t) {
          void 0 === t && (t = 0), (t = Math.abs(t));
          for (
            var n = this.levels, i = 0;
            i < n.length && !(t < n[i].distance);
            i++
          );
          n.splice(i, 0, { distance: t, object: e }), this.add(e);
        },
        getObjectForDistance: function (e) {
          for (
            var t = this.levels, n = 1, i = t.length;
            i > n && !(e < t[n].distance);
            n++
          );
          return t[n - 1].object;
        },
        raycast: (function () {
          var e = new l();
          return function (t, n) {
            e.setFromMatrixPosition(this.matrixWorld);
            var i = t.ray.origin.distanceTo(e);
            this.getObjectForDistance(i).raycast(t, n);
          };
        })(),
        update: (function () {
          var e = new l(),
            t = new l();
          return function (n) {
            var i = this.levels;
            if (1 < i.length) {
              e.setFromMatrixPosition(n.matrixWorld),
                t.setFromMatrixPosition(this.matrixWorld),
                (n = e.distanceTo(t)),
                (i[0].object.visible = !0);
              for (var r = 1, s = i.length; s > r && n >= i[r].distance; r++)
                (i[r - 1].object.visible = !1), (i[r].object.visible = !0);
              for (; s > r; r++) i[r].object.visible = !1;
            }
          };
        })(),
        toJSON: function (e) {
          (e = at.prototype.toJSON.call(this, e)), (e.object.levels = []);
          for (var t = this.levels, n = 0, i = t.length; i > n; n++) {
            var r = t[n];
            e.object.levels.push({
              object: r.object.uuid,
              distance: r.distance,
            });
          }
          return e;
        },
      })),
      Object.assign(En.prototype, {
        calculateInverses: function () {
          this.boneInverses = [];
          for (var e = 0, t = this.bones.length; t > e; e++) {
            var n = new c();
            this.bones[e] && n.getInverse(this.bones[e].matrixWorld),
              this.boneInverses.push(n);
          }
        },
        pose: function () {
          var e,
            t,
            n = 0;
          for (t = this.bones.length; t > n; n++)
            (e = this.bones[n]) &&
              e.matrixWorld.getInverse(this.boneInverses[n]);
          for (n = 0, t = this.bones.length; t > n; n++)
            (e = this.bones[n]) &&
              (e.parent && e.parent.isBone
                ? (e.matrix.getInverse(e.parent.matrixWorld),
                  e.matrix.multiply(e.matrixWorld))
                : e.matrix.copy(e.matrixWorld),
              e.matrix.decompose(e.position, e.quaternion, e.scale));
        },
        update: (function () {
          var e = new c(),
            t = new c();
          return function () {
            for (
              var n = this.bones,
                i = this.boneInverses,
                r = this.boneMatrices,
                s = this.boneTexture,
                o = 0,
                a = n.length;
              a > o;
              o++
            )
              e.multiplyMatrices(n[o] ? n[o].matrixWorld : t, i[o]),
                e.toArray(r, 16 * o);
            void 0 !== s && (s.needsUpdate = !0);
          };
        })(),
        clone: function () {
          return new En(this.bones, this.boneInverses);
        },
      }),
      (kn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: kn,
        isBone: !0,
      })),
      (Pn.prototype = Object.assign(Object.create(Rt.prototype), {
        constructor: Pn,
        isSkinnedMesh: !0,
        initBones: function () {
          var e,
            t = [];
          if (this.geometry && void 0 !== this.geometry.bones) {
            var n = 0;
            for (e = this.geometry.bones.length; e > n; n++) {
              var i = this.geometry.bones[n],
                r = new kn();
              t.push(r),
                (r.name = i.name),
                r.position.fromArray(i.pos),
                r.quaternion.fromArray(i.rotq),
                void 0 !== i.scl && r.scale.fromArray(i.scl);
            }
            for (n = 0, e = this.geometry.bones.length; e > n; n++)
              (i = this.geometry.bones[n]),
                -1 !== i.parent && null !== i.parent && void 0 !== t[i.parent]
                  ? t[i.parent].add(t[n])
                  : this.add(t[n]);
          }
          return this.updateMatrixWorld(!0), t;
        },
        bind: function (e, t) {
          (this.skeleton = e),
            void 0 === t &&
              (this.updateMatrixWorld(!0),
              this.skeleton.calculateInverses(),
              (t = this.matrixWorld)),
            this.bindMatrix.copy(t),
            this.bindMatrixInverse.getInverse(t);
        },
        pose: function () {
          this.skeleton.pose();
        },
        normalizeSkinWeights: function () {
          var e;
          if (this.geometry && this.geometry.isGeometry)
            for (e = 0; e < this.geometry.skinWeights.length; e++) {
              var t = this.geometry.skinWeights[e],
                n = 1 / t.lengthManhattan();
              1 / 0 !== n ? t.multiplyScalar(n) : t.set(1, 0, 0, 0);
            }
          else if (this.geometry && this.geometry.isBufferGeometry) {
            var t = new r(),
              i = this.geometry.attributes.skinWeight;
            for (e = 0; e < i.count; e++)
              (t.x = i.getX(e)),
                (t.y = i.getY(e)),
                (t.z = i.getZ(e)),
                (t.w = i.getW(e)),
                (n = 1 / t.lengthManhattan()),
                1 / 0 !== n ? t.multiplyScalar(n) : t.set(1, 0, 0, 0),
                i.setXYZW(e, t.x, t.y, t.z, t.w);
          }
        },
        updateMatrixWorld: function (e) {
          Rt.prototype.updateMatrixWorld.call(this, e),
            "attached" === this.bindMode
              ? this.bindMatrixInverse.getInverse(this.matrixWorld)
              : "detached" === this.bindMode
              ? this.bindMatrixInverse.getInverse(this.bindMatrix)
              : console.warn(
                  "THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode
                );
        },
        clone: function () {
          return new this.constructor(this.geometry, this.material).copy(this);
        },
      })),
      (In.prototype = Object.create(X.prototype)),
      (In.prototype.constructor = In),
      (In.prototype.isLineBasicMaterial = !0),
      (In.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.linewidth = e.linewidth),
          (this.linecap = e.linecap),
          (this.linejoin = e.linejoin),
          this
        );
      }),
      (An.prototype = Object.assign(Object.create(at.prototype), {
        constructor: An,
        isLine: !0,
        raycast: (function () {
          var e = new c(),
            t = new Ot(),
            n = new Z();
          return function (i, r) {
            var s = i.linePrecision,
              s = s * s,
              o = this.geometry,
              a = this.matrixWorld;
            if (
              (null === o.boundingSphere && o.computeBoundingSphere(),
              n.copy(o.boundingSphere),
              n.applyMatrix4(a),
              !1 !== i.ray.intersectsSphere(n))
            ) {
              e.getInverse(a), t.copy(i.ray).applyMatrix4(e);
              var c = new l(),
                u = new l(),
                a = new l(),
                h = new l(),
                d = this && this.isLineSegments ? 2 : 1;
              if (o.isBufferGeometry) {
                var p = o.index,
                  f = o.attributes.position.array;
                if (null !== p)
                  for (var m = p.array, o = 0, g = m.length - 1; g > o; o += d)
                    (p = m[o + 1]),
                      c.fromArray(f, 3 * m[o]),
                      u.fromArray(f, 3 * p),
                      (p = t.distanceSqToSegment(c, u, h, a)),
                      p > s ||
                        (h.applyMatrix4(this.matrixWorld),
                        (p = i.ray.origin.distanceTo(h)),
                        p < i.near ||
                          p > i.far ||
                          r.push({
                            distance: p,
                            point: a.clone().applyMatrix4(this.matrixWorld),
                            index: o,
                            face: null,
                            faceIndex: null,
                            object: this,
                          }));
                else
                  for (o = 0, g = f.length / 3 - 1; g > o; o += d)
                    c.fromArray(f, 3 * o),
                      u.fromArray(f, 3 * o + 3),
                      (p = t.distanceSqToSegment(c, u, h, a)),
                      p > s ||
                        (h.applyMatrix4(this.matrixWorld),
                        (p = i.ray.origin.distanceTo(h)),
                        p < i.near ||
                          p > i.far ||
                          r.push({
                            distance: p,
                            point: a.clone().applyMatrix4(this.matrixWorld),
                            index: o,
                            face: null,
                            faceIndex: null,
                            object: this,
                          }));
              } else if (o.isGeometry)
                for (c = o.vertices, u = c.length, o = 0; u - 1 > o; o += d)
                  (p = t.distanceSqToSegment(c[o], c[o + 1], h, a)),
                    p > s ||
                      (h.applyMatrix4(this.matrixWorld),
                      (p = i.ray.origin.distanceTo(h)),
                      p < i.near ||
                        p > i.far ||
                        r.push({
                          distance: p,
                          point: a.clone().applyMatrix4(this.matrixWorld),
                          index: o,
                          face: null,
                          faceIndex: null,
                          object: this,
                        }));
            }
          };
        })(),
        clone: function () {
          return new this.constructor(this.geometry, this.material).copy(this);
        },
      })),
      (On.prototype = Object.assign(Object.create(An.prototype), {
        constructor: On,
        isLineSegments: !0,
      })),
      (Dn.prototype = Object.assign(Object.create(An.prototype), {
        constructor: Dn,
        isLineLoop: !0,
      })),
      (Mn.prototype = Object.create(X.prototype)),
      (Mn.prototype.constructor = Mn),
      (Mn.prototype.isPointsMaterial = !0),
      (Mn.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.map = e.map),
          (this.size = e.size),
          (this.sizeAttenuation = e.sizeAttenuation),
          this
        );
      }),
      (Rn.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Rn,
        isPoints: !0,
        raycast: (function () {
          var e = new c(),
            t = new Ot(),
            n = new Z();
          return function (i, r) {
            function s(e, n) {
              var s = t.distanceSqToPoint(e);
              if (h > s) {
                (e = t.closestPointToPoint(e)), e.applyMatrix4(c);
                var a = i.ray.origin.distanceTo(e);
                a < i.near ||
                  a > i.far ||
                  r.push({
                    distance: a,
                    distanceToRay: Math.sqrt(s),
                    point: e.clone(),
                    index: n,
                    face: null,
                    object: o,
                  });
              }
            }
            var o = this,
              a = this.geometry,
              c = this.matrixWorld,
              u = i.params.Points.threshold;
            if (
              (null === a.boundingSphere && a.computeBoundingSphere(),
              n.copy(a.boundingSphere),
              n.applyMatrix4(c),
              (n.radius += u),
              !1 !== i.ray.intersectsSphere(n))
            ) {
              e.getInverse(c), t.copy(i.ray).applyMatrix4(e);
              var u = u / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                h = u * u,
                u = new l();
              if (a.isBufferGeometry) {
                var d = a.index,
                  a = a.attributes.position.array;
                if (null !== d)
                  for (var p = d.array, d = 0, f = p.length; f > d; d++) {
                    var m = p[d];
                    u.fromArray(a, 3 * m), s(u, m);
                  }
                else
                  for (d = 0, p = a.length / 3; p > d; d++)
                    u.fromArray(a, 3 * d), s(u, d);
              } else
                for (u = a.vertices, d = 0, p = u.length; p > d; d++)
                  s(u[d], d);
            }
          };
        })(),
        clone: function () {
          return new this.constructor(this.geometry, this.material).copy(this);
        },
      })),
      (Ln.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Ln,
      })),
      (Nn.prototype = Object.create(i.prototype)),
      (Nn.prototype.constructor = Nn),
      (Un.prototype = Object.create(i.prototype)),
      (Un.prototype.constructor = Un),
      (Un.prototype.isCompressedTexture = !0),
      (Bn.prototype = Object.create(i.prototype)),
      (Bn.prototype.constructor = Bn),
      (Bn.prototype.isDepthTexture = !0),
      (Fn.prototype = Object.create(St.prototype)),
      (Fn.prototype.constructor = Fn),
      (jn.prototype = Object.create(dt.prototype)),
      (jn.prototype.constructor = jn),
      (Hn.prototype = Object.create(St.prototype)),
      (Hn.prototype.constructor = Hn),
      ($n.prototype = Object.create(dt.prototype)),
      ($n.prototype.constructor = $n),
      (zn.prototype = Object.create(St.prototype)),
      (zn.prototype.constructor = zn),
      (Wn.prototype = Object.create(dt.prototype)),
      (Wn.prototype.constructor = Wn),
      (Gn.prototype = Object.create(zn.prototype)),
      (Gn.prototype.constructor = Gn),
      (Vn.prototype = Object.create(dt.prototype)),
      (Vn.prototype.constructor = Vn),
      (qn.prototype = Object.create(zn.prototype)),
      (qn.prototype.constructor = qn),
      (Xn.prototype = Object.create(dt.prototype)),
      (Xn.prototype.constructor = Xn),
      (Yn.prototype = Object.create(zn.prototype)),
      (Yn.prototype.constructor = Yn),
      (Kn.prototype = Object.create(dt.prototype)),
      (Kn.prototype.constructor = Kn),
      (Jn.prototype = Object.create(zn.prototype)),
      (Jn.prototype.constructor = Jn),
      (Qn.prototype = Object.create(dt.prototype)),
      (Qn.prototype.constructor = Qn),
      (Zn.prototype = Object.create(St.prototype)),
      (Zn.prototype.constructor = Zn),
      (ei.prototype = Object.create(dt.prototype)),
      (ei.prototype.constructor = ei),
      (ti.prototype = Object.create(St.prototype)),
      (ti.prototype.constructor = ti),
      (ni.prototype = Object.create(dt.prototype)),
      (ni.prototype.constructor = ni),
      (ii.prototype = Object.create(St.prototype)),
      (ii.prototype.constructor = ii);
    var Gs = {
      area: function (e) {
        for (var t = e.length, n = 0, i = t - 1, r = 0; t > r; i = r++)
          n += e[i].x * e[r].y - e[r].x * e[i].y;
        return 0.5 * n;
      },
      triangulate: (function () {
        return function (e, t) {
          var n = e.length;
          if (3 > n) return null;
          var i,
            r = [],
            s = [],
            o = [];
          if (0 < Gs.area(e)) for (i = 0; n > i; i++) s[i] = i;
          else for (i = 0; n > i; i++) s[i] = n - 1 - i;
          var a = 2 * n;
          for (i = n - 1; n > 2; ) {
            if (0 >= a--) {
              console.warn(
                "THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"
              );
              break;
            }
            var l = i;
            l >= n && (l = 0), (i = l + 1), i >= n && (i = 0);
            var c = i + 1;
            c >= n && (c = 0);
            e: {
              var u,
                h = e[s[l]].x,
                d = e[s[l]].y,
                p = e[s[i]].x,
                f = e[s[i]].y,
                m = e[s[c]].x,
                g = e[s[c]].y;
              if (0 >= (p - h) * (g - d) - (f - d) * (m - h)) var v = !1;
              else {
                var _ = m - p,
                  y = g - f,
                  b = h - m,
                  w = d - g,
                  x = p - h;
                for (v = f - d, u = 0; n > u; u++) {
                  var C = e[s[u]].x,
                    T = e[s[u]].y;
                  if (
                    !(
                      (C === h && T === d) ||
                      (C === p && T === f) ||
                      (C === m && T === g)
                    )
                  ) {
                    var S = C - h,
                      E = T - d,
                      k = C - p,
                      P = T - f;
                    if (
                      ((C -= m),
                      (T -= g),
                      (P = _ * P - y * k),
                      (E = x * E - v * S),
                      (C = b * T - w * C),
                      P >= -Number.EPSILON &&
                        C >= -Number.EPSILON &&
                        E >= -Number.EPSILON)
                    ) {
                      v = !1;
                      break e;
                    }
                  }
                }
                v = !0;
              }
            }
            if (v) {
              for (
                r.push([e[s[l]], e[s[i]], e[s[c]]]),
                  o.push([s[l], s[i], s[c]]),
                  l = i,
                  c = i + 1;
                n > c;
                l++, c++
              )
                s[l] = s[c];
              n--, (a = 2 * n);
            }
          }
          return t ? o : r;
        };
      })(),
      triangulateShape: function (e, t) {
        function n(e) {
          var t = e.length;
          t > 2 && e[t - 1].equals(e[0]) && e.pop();
        }
        function i(e, t, n) {
          return e.x !== t.x
            ? e.x < t.x
              ? e.x <= n.x && n.x <= t.x
              : t.x <= n.x && n.x <= e.x
            : e.y < t.y
            ? e.y <= n.y && n.y <= t.y
            : t.y <= n.y && n.y <= e.y;
        }
        function r(e, t, n, r, s) {
          var o = t.x - e.x,
            a = t.y - e.y,
            l = r.x - n.x,
            c = r.y - n.y,
            u = e.x - n.x,
            h = e.y - n.y,
            d = a * l - o * c,
            p = a * u - o * h;
          if (Math.abs(d) > Number.EPSILON) {
            if (d > 0) {
              if (0 > p || p > d) return [];
              if (((l = c * u - l * h), 0 > l || l > d)) return [];
            } else {
              if (p > 0 || d > p) return [];
              if (((l = c * u - l * h), l > 0 || d > l)) return [];
            }
            return 0 === l
              ? !s || (0 !== p && p !== d)
                ? [e]
                : []
              : l === d
              ? !s || (0 !== p && p !== d)
                ? [t]
                : []
              : 0 === p
              ? [n]
              : p === d
              ? [r]
              : ((s = l / d), [{ x: e.x + s * o, y: e.y + s * a }]);
          }
          return 0 !== p || c * u !== l * h
            ? []
            : ((a = 0 === o && 0 === a),
              (l = 0 === l && 0 === c),
              a && l
                ? e.x !== n.x || e.y !== n.y
                  ? []
                  : [e]
                : a
                ? i(n, r, e)
                  ? [e]
                  : []
                : l
                ? i(e, t, n)
                  ? [n]
                  : []
                : (0 !== o
                    ? (e.x < t.x
                        ? ((o = e), (l = e.x), (a = t), (e = t.x))
                        : ((o = t), (l = t.x), (a = e), (e = e.x)),
                      n.x < r.x
                        ? ((t = n), (d = n.x), (c = r), (n = r.x))
                        : ((t = r), (d = r.x), (c = n), (n = n.x)))
                    : (e.y < t.y
                        ? ((o = e), (l = e.y), (a = t), (e = t.y))
                        : ((o = t), (l = t.y), (a = e), (e = e.y)),
                      n.y < r.y
                        ? ((t = n), (d = n.y), (c = r), (n = r.y))
                        : ((t = r), (d = r.y), (c = n), (n = n.y))),
                  d >= l
                    ? d > e
                      ? []
                      : e === d
                      ? s
                        ? []
                        : [t]
                      : n >= e
                      ? [t, a]
                      : [t, c]
                    : l > n
                    ? []
                    : l === n
                    ? s
                      ? []
                      : [o]
                    : n >= e
                    ? [o, a]
                    : [o, c]));
        }
        function s(e, t, n, i) {
          var r = t.x - e.x,
            s = t.y - e.y;
          (t = n.x - e.x), (n = n.y - e.y);
          var o = i.x - e.x;
          return (
            (i = i.y - e.y),
            (e = r * n - s * t),
            (r = r * i - s * o),
            Math.abs(e) > Number.EPSILON
              ? ((t = o * n - i * t),
                e > 0 ? r >= 0 && t >= 0 : r >= 0 || t >= 0)
              : r > 0
          );
        }
        n(e), t.forEach(n);
        var o,
          a = {},
          l = e.concat(),
          c = 0;
        for (o = t.length; o > c; c++) Array.prototype.push.apply(l, t[c]);
        for (c = 0, o = l.length; o > c; c++) {
          var u = l[c].x + ":" + l[c].y;
          void 0 !== a[u] &&
            console.warn("THREE.ShapeUtils: Duplicate point", u, c),
            (a[u] = c);
        }
        for (
          c = (function (e, t) {
            function n(e, t) {
              var n = c.length - 1,
                i = e - 1;
              0 > i && (i = n);
              var r = e + 1;
              return (
                r > n && (r = 0),
                (n = s(c[e], c[i], c[r], _[t]))
                  ? ((n = _.length - 1),
                    (i = t - 1),
                    0 > i && (i = n),
                    (r = t + 1),
                    r > n && (r = 0),
                    (n = s(_[t], _[i], _[r], c[e])) ? !0 : !1)
                  : !1
              );
            }
            function i(e, t) {
              var n;
              for (n = 0; n < c.length; n++) {
                var i = n + 1;
                if (
                  ((i %= c.length), (i = r(e, t, c[n], c[i], !0)), 0 < i.length)
                )
                  return !0;
              }
              return !1;
            }
            function o(e, n) {
              var i, s;
              for (i = 0; i < u.length; i++) {
                var o = t[u[i]];
                for (s = 0; s < o.length; s++) {
                  var a = s + 1;
                  if (
                    ((a %= o.length),
                    (a = r(e, n, o[s], o[a], !0)),
                    0 < a.length)
                  )
                    return !0;
                }
              }
              return !1;
            }
            var a,
              l,
              c = e.concat(),
              u = [];
            e = [];
            var h,
              d = 0;
            for (a = t.length; a > d; d++) u.push(d);
            for (var p = 0, f = 2 * u.length; 0 < u.length; ) {
              if ((f--, 0 > f)) {
                console.log(
                  'THREE.ShapeUtils: Infinite Loop! Holes left:" + indepHoles.length + ", Probably Hole outside Shape!'
                );
                break;
              }
              for (l = p; l < c.length; l++) {
                var m = c[l];
                for (a = -1, d = 0; d < u.length; d++) {
                  var g = u[d],
                    v = m.x + ":" + m.y + ":" + g;
                  if (void 0 === e[v]) {
                    var _ = t[g];
                    for (h = 0; h < _.length; h++)
                      if (((g = _[h]), n(l, h) && !i(m, g) && !o(m, g))) {
                        (a = h),
                          u.splice(d, 1),
                          (p = c.slice(0, l + 1)),
                          (g = c.slice(l)),
                          (h = _.slice(a));
                        var y = _.slice(0, a + 1);
                        (c = p.concat(h).concat(y).concat(g)), (p = l);
                        break;
                      }
                    if (a >= 0) break;
                    e[v] = !0;
                  }
                }
                if (a >= 0) break;
              }
            }
            return c;
          })(e, t),
            l = Gs.triangulate(c, !1),
            c = 0,
            o = l.length;
          o > c;
          c++
        )
          for (t = l[c], e = 0; 3 > e; e++)
            (u = t[e].x + ":" + t[e].y), (u = a[u]), void 0 !== u && (t[e] = u);
        return l.concat();
      },
      isClockWise: function (e) {
        return 0 > Gs.area(e);
      },
    };
    (ri.prototype = Object.create(dt.prototype)),
      (ri.prototype.constructor = ri),
      (si.prototype = Object.create(St.prototype)),
      (si.prototype.constructor = si),
      (si.prototype.getArrays = function () {
        var e = this.getAttribute("position"),
          e = e ? Array.prototype.slice.call(e.array) : [],
          t = this.getAttribute("uv"),
          t = t ? Array.prototype.slice.call(t.array) : [],
          n = this.index,
          n = n ? Array.prototype.slice.call(n.array) : [];
        return { position: e, uv: t, index: n };
      }),
      (si.prototype.addShapeList = function (e, t) {
        var n = e.length;
        t.arrays = this.getArrays();
        for (var i = 0; n > i; i++) this.addShape(e[i], t);
        this.setIndex(t.arrays.index),
          this.addAttribute("position", new wt(t.arrays.position, 3)),
          this.addAttribute("uv", new wt(t.arrays.uv, 2));
      }),
      (si.prototype.addShape = function (e, t) {
        function i(e, t, n) {
          return (
            t || console.error("THREE.ExtrudeGeometry: vec does not exist"),
            t.clone().multiplyScalar(n).add(e)
          );
        }
        function r(e, t, i) {
          var r = e.x - t.x,
            s = e.y - t.y,
            o = i.x - e.x,
            a = i.y - e.y,
            l = r * r + s * s;
          if (Math.abs(r * a - s * o) > Number.EPSILON) {
            var c = Math.sqrt(l),
              u = Math.sqrt(o * o + a * a),
              l = t.x - s / c;
            if (
              ((t = t.y + r / c),
              (a =
                ((i.x - a / u - l) * a - (i.y + o / u - t) * o) /
                (r * a - s * o)),
              (o = l + r * a - e.x),
              (r = t + s * a - e.y),
              (s = o * o + r * r),
              2 >= s)
            )
              return new n(o, r);
            s = Math.sqrt(s / 2);
          } else
            (e = !1),
              r > Number.EPSILON
                ? o > Number.EPSILON && (e = !0)
                : r < -Number.EPSILON
                ? o < -Number.EPSILON && (e = !0)
                : Math.sign(s) === Math.sign(a) && (e = !0),
              e
                ? ((o = -s), (s = Math.sqrt(l)))
                : ((o = r), (r = s), (s = Math.sqrt(l / 2)));
          return new n(o / s, r / s);
        }
        function s(e, t) {
          for (H = e.length; 0 <= --H; ) {
            var n = H,
              i = H - 1;
            0 > i && (i = e.length - 1);
            var r,
              s = w + 2 * _;
            for (r = 0; s > r; r++) {
              var o = F * r,
                a = F * (r + 1),
                l = t + i + o,
                h = t + i + a,
                a = t + n + a;
              c(t + n + o),
                c(l),
                c(a),
                c(l),
                c(h),
                c(a),
                (o = d.length / 3),
                (o = T.generateSideWallUV(O, d, o - 6, o - 3, o - 2, o - 1)),
                u(o[0]),
                u(o[1]),
                u(o[3]),
                u(o[1]),
                u(o[2]),
                u(o[3]);
            }
          }
        }
        function o(e, t, n) {
          m.push(e), m.push(t), m.push(n);
        }
        function a(e, t, n) {
          c(e),
            c(t),
            c(n),
            (e = d.length / 3),
            (e = T.generateTopUV(O, d, e - 3, e - 2, e - 1)),
            u(e[0]),
            u(e[1]),
            u(e[2]);
        }
        function c(e) {
          p.push(d.length / 3),
            d.push(m[3 * e + 0]),
            d.push(m[3 * e + 1]),
            d.push(m[3 * e + 2]);
        }
        function u(e) {
          f.push(e.x), f.push(e.y);
        }
        var h = t.arrays ? t.arrays : this.getArrays(),
          d = h.position,
          p = h.index,
          f = h.uv,
          m = [],
          h = void 0 !== t.amount ? t.amount : 100,
          g = void 0 !== t.bevelThickness ? t.bevelThickness : 6,
          v = void 0 !== t.bevelSize ? t.bevelSize : g - 2,
          _ = void 0 !== t.bevelSegments ? t.bevelSegments : 3,
          y = void 0 !== t.bevelEnabled ? t.bevelEnabled : !0,
          b = void 0 !== t.curveSegments ? t.curveSegments : 12,
          w = void 0 !== t.steps ? t.steps : 1,
          x = t.extrudePath,
          C = !1,
          T = void 0 !== t.UVGenerator ? t.UVGenerator : ri.WorldUVGenerator;
        if (x) {
          var S = x.getSpacedPoints(w);
          (C = !0), (y = !1);
          var E = void 0 !== t.frames ? t.frames : x.computeFrenetFrames(w, !1),
            k = new l(),
            P = new l(),
            I = new l();
        }
        y || (v = g = _ = 0);
        var A,
          O = this,
          b = e.extractPoints(b);
        e = b.shape;
        var D = b.holes;
        if (!Gs.isClockWise(e)) {
          e = e.reverse();
          var M = 0;
          for (A = D.length; A > M; M++) {
            var R = D[M];
            Gs.isClockWise(R) && (D[M] = R.reverse());
          }
        }
        var L = Gs.triangulateShape(e, D),
          N = e;
        for (M = 0, A = D.length; A > M; M++) (R = D[M]), (e = e.concat(R));
        var U,
          B,
          F = e.length,
          j = L.length,
          b = [],
          H = 0,
          $ = N.length,
          z = $ - 1;
        for (U = H + 1; $ > H; H++, z++, U++)
          z === $ && (z = 0), U === $ && (U = 0), (b[H] = r(N[H], N[z], N[U]));
        var x = [],
          W = b.concat();
        for (M = 0, A = D.length; A > M; M++) {
          R = D[M];
          var G = [];
          for (H = 0, $ = R.length, z = $ - 1, U = H + 1; $ > H; H++, z++, U++)
            z === $ && (z = 0),
              U === $ && (U = 0),
              (G[H] = r(R[H], R[z], R[U]));
          x.push(G), (W = W.concat(G));
        }
        for (z = 0; _ > z; z++) {
          $ = z / _;
          var V = g * Math.cos(($ * Math.PI) / 2);
          for (
            U = v * Math.sin(($ * Math.PI) / 2), H = 0, $ = N.length;
            $ > H;
            H++
          ) {
            var q = i(N[H], b[H], U);
            o(q.x, q.y, -V);
          }
          for (M = 0, A = D.length; A > M; M++)
            for (R = D[M], G = x[M], H = 0, $ = R.length; $ > H; H++)
              (q = i(R[H], G[H], U)), o(q.x, q.y, -V);
        }
        for (U = v, H = 0; F > H; H++)
          (q = y ? i(e[H], W[H], U) : e[H]),
            C
              ? (P.copy(E.normals[0]).multiplyScalar(q.x),
                k.copy(E.binormals[0]).multiplyScalar(q.y),
                I.copy(S[0]).add(P).add(k),
                o(I.x, I.y, I.z))
              : o(q.x, q.y, 0);
        for ($ = 1; w >= $; $++)
          for (H = 0; F > H; H++)
            (q = y ? i(e[H], W[H], U) : e[H]),
              C
                ? (P.copy(E.normals[$]).multiplyScalar(q.x),
                  k.copy(E.binormals[$]).multiplyScalar(q.y),
                  I.copy(S[$]).add(P).add(k),
                  o(I.x, I.y, I.z))
                : o(q.x, q.y, (h / w) * $);
        for (z = _ - 1; z >= 0; z--) {
          for (
            $ = z / _,
              V = g * Math.cos(($ * Math.PI) / 2),
              U = v * Math.sin(($ * Math.PI) / 2),
              H = 0,
              $ = N.length;
            $ > H;
            H++
          )
            (q = i(N[H], b[H], U)), o(q.x, q.y, h + V);
          for (M = 0, A = D.length; A > M; M++)
            for (R = D[M], G = x[M], H = 0, $ = R.length; $ > H; H++)
              (q = i(R[H], G[H], U)),
                C
                  ? o(q.x, q.y + S[w - 1].y, S[w - 1].x + V)
                  : o(q.x, q.y, h + V);
        }
        !(function () {
          var e = d.length / 3;
          if (y) {
            var n = 0 * F;
            for (H = 0; j > H; H++) (B = L[H]), a(B[2] + n, B[1] + n, B[0] + n);
            for (n = F * (w + 2 * _), H = 0; j > H; H++)
              (B = L[H]), a(B[0] + n, B[1] + n, B[2] + n);
          } else {
            for (H = 0; j > H; H++) (B = L[H]), a(B[2], B[1], B[0]);
            for (H = 0; j > H; H++)
              (B = L[H]), a(B[0] + F * w, B[1] + F * w, B[2] + F * w);
          }
          O.addGroup(
            e,
            d.length / 3 - e,
            void 0 !== t.material ? t.material : 0
          );
        })(),
          (function () {
            var e = d.length / 3,
              n = 0;
            for (s(N, n), n += N.length, M = 0, A = D.length; A > M; M++)
              (R = D[M]), s(R, n), (n += R.length);
            O.addGroup(
              e,
              d.length / 3 - e,
              void 0 !== t.extrudeMaterial ? t.extrudeMaterial : 1
            );
          })(),
          t.arrays ||
            (this.setIndex(p),
            this.addAttribute("position", new wt(d, 3)),
            this.addAttribute("uv", new wt(t.arrays.uv, 2)));
      }),
      (ri.WorldUVGenerator = {
        generateTopUV: function (e, t, i, r, s) {
          (e = t[3 * r]), (r = t[3 * r + 1]);
          var o = t[3 * s];
          return (
            (s = t[3 * s + 1]),
            [new n(t[3 * i], t[3 * i + 1]), new n(e, r), new n(o, s)]
          );
        },
        generateSideWallUV: function (e, t, i, r, s, o) {
          e = t[3 * i];
          var a = t[3 * i + 1];
          i = t[3 * i + 2];
          var l = t[3 * r],
            c = t[3 * r + 1];
          r = t[3 * r + 2];
          var u = t[3 * s],
            h = t[3 * s + 1];
          s = t[3 * s + 2];
          var d = t[3 * o],
            p = t[3 * o + 1];
          return (
            (t = t[3 * o + 2]),
            0.01 > Math.abs(a - c)
              ? [
                  new n(e, 1 - i),
                  new n(l, 1 - r),
                  new n(u, 1 - s),
                  new n(d, 1 - t),
                ]
              : [
                  new n(a, 1 - i),
                  new n(c, 1 - r),
                  new n(h, 1 - s),
                  new n(p, 1 - t),
                ]
          );
        },
      }),
      (oi.prototype = Object.create(dt.prototype)),
      (oi.prototype.constructor = oi),
      (ai.prototype = Object.create(si.prototype)),
      (ai.prototype.constructor = ai),
      (li.prototype = Object.create(dt.prototype)),
      (li.prototype.constructor = li),
      (ci.prototype = Object.create(St.prototype)),
      (ci.prototype.constructor = ci),
      (ui.prototype = Object.create(dt.prototype)),
      (ui.prototype.constructor = ui),
      (hi.prototype = Object.create(St.prototype)),
      (hi.prototype.constructor = hi),
      (di.prototype = Object.create(dt.prototype)),
      (di.prototype.constructor = di),
      (pi.prototype = Object.create(St.prototype)),
      (pi.prototype.constructor = pi),
      (fi.prototype = Object.create(dt.prototype)),
      (fi.prototype.constructor = fi),
      (mi.prototype = Object.create(St.prototype)),
      (mi.prototype.constructor = mi),
      (gi.prototype = Object.create(St.prototype)),
      (gi.prototype.constructor = gi),
      (vi.prototype = Object.create(dt.prototype)),
      (vi.prototype.constructor = vi),
      (_i.prototype = Object.create(St.prototype)),
      (_i.prototype.constructor = _i),
      (yi.prototype = Object.create(vi.prototype)),
      (yi.prototype.constructor = yi),
      (bi.prototype = Object.create(_i.prototype)),
      (bi.prototype.constructor = bi),
      (wi.prototype = Object.create(dt.prototype)),
      (wi.prototype.constructor = wi),
      (xi.prototype = Object.create(St.prototype)),
      (xi.prototype.constructor = xi);
    var Vs = Object.freeze({
      WireframeGeometry: Fn,
      ParametricGeometry: jn,
      ParametricBufferGeometry: Hn,
      TetrahedronGeometry: Wn,
      TetrahedronBufferGeometry: Gn,
      OctahedronGeometry: Vn,
      OctahedronBufferGeometry: qn,
      IcosahedronGeometry: Xn,
      IcosahedronBufferGeometry: Yn,
      DodecahedronGeometry: Kn,
      DodecahedronBufferGeometry: Jn,
      PolyhedronGeometry: $n,
      PolyhedronBufferGeometry: zn,
      TubeGeometry: Qn,
      TubeBufferGeometry: Zn,
      TorusKnotGeometry: ei,
      TorusKnotBufferGeometry: ti,
      TorusGeometry: ni,
      TorusBufferGeometry: ii,
      TextGeometry: oi,
      TextBufferGeometry: ai,
      SphereGeometry: li,
      SphereBufferGeometry: ci,
      RingGeometry: ui,
      RingBufferGeometry: hi,
      PlaneGeometry: Pt,
      PlaneBufferGeometry: It,
      LatheGeometry: di,
      LatheBufferGeometry: pi,
      ShapeGeometry: fi,
      ShapeBufferGeometry: mi,
      ExtrudeGeometry: ri,
      ExtrudeBufferGeometry: si,
      EdgesGeometry: gi,
      ConeGeometry: yi,
      ConeBufferGeometry: bi,
      CylinderGeometry: vi,
      CylinderBufferGeometry: _i,
      CircleGeometry: wi,
      CircleBufferGeometry: xi,
      BoxGeometry: Et,
      BoxBufferGeometry: kt,
    });
    (Ci.prototype = Object.create(X.prototype)),
      (Ci.prototype.constructor = Ci),
      (Ci.prototype.isShadowMaterial = !0),
      (Ti.prototype = Object.create(Y.prototype)),
      (Ti.prototype.constructor = Ti),
      (Ti.prototype.isRawShaderMaterial = !0),
      (Si.prototype = Object.create(X.prototype)),
      (Si.prototype.constructor = Si),
      (Si.prototype.isMeshStandardMaterial = !0),
      (Si.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          (this.defines = { STANDARD: "" }),
          this.color.copy(e.color),
          (this.roughness = e.roughness),
          (this.metalness = e.metalness),
          (this.map = e.map),
          (this.lightMap = e.lightMap),
          (this.lightMapIntensity = e.lightMapIntensity),
          (this.aoMap = e.aoMap),
          (this.aoMapIntensity = e.aoMapIntensity),
          this.emissive.copy(e.emissive),
          (this.emissiveMap = e.emissiveMap),
          (this.emissiveIntensity = e.emissiveIntensity),
          (this.bumpMap = e.bumpMap),
          (this.bumpScale = e.bumpScale),
          (this.normalMap = e.normalMap),
          this.normalScale.copy(e.normalScale),
          (this.displacementMap = e.displacementMap),
          (this.displacementScale = e.displacementScale),
          (this.displacementBias = e.displacementBias),
          (this.roughnessMap = e.roughnessMap),
          (this.metalnessMap = e.metalnessMap),
          (this.alphaMap = e.alphaMap),
          (this.envMap = e.envMap),
          (this.envMapIntensity = e.envMapIntensity),
          (this.refractionRatio = e.refractionRatio),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.wireframeLinecap = e.wireframeLinecap),
          (this.wireframeLinejoin = e.wireframeLinejoin),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.morphNormals = e.morphNormals),
          this
        );
      }),
      (Ei.prototype = Object.create(Si.prototype)),
      (Ei.prototype.constructor = Ei),
      (Ei.prototype.isMeshPhysicalMaterial = !0),
      (Ei.prototype.copy = function (e) {
        return (
          Si.prototype.copy.call(this, e),
          (this.defines = { PHYSICAL: "" }),
          (this.reflectivity = e.reflectivity),
          (this.clearCoat = e.clearCoat),
          (this.clearCoatRoughness = e.clearCoatRoughness),
          this
        );
      }),
      (ki.prototype = Object.create(X.prototype)),
      (ki.prototype.constructor = ki),
      (ki.prototype.isMeshPhongMaterial = !0),
      (ki.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          this.specular.copy(e.specular),
          (this.shininess = e.shininess),
          (this.map = e.map),
          (this.lightMap = e.lightMap),
          (this.lightMapIntensity = e.lightMapIntensity),
          (this.aoMap = e.aoMap),
          (this.aoMapIntensity = e.aoMapIntensity),
          this.emissive.copy(e.emissive),
          (this.emissiveMap = e.emissiveMap),
          (this.emissiveIntensity = e.emissiveIntensity),
          (this.bumpMap = e.bumpMap),
          (this.bumpScale = e.bumpScale),
          (this.normalMap = e.normalMap),
          this.normalScale.copy(e.normalScale),
          (this.displacementMap = e.displacementMap),
          (this.displacementScale = e.displacementScale),
          (this.displacementBias = e.displacementBias),
          (this.specularMap = e.specularMap),
          (this.alphaMap = e.alphaMap),
          (this.envMap = e.envMap),
          (this.combine = e.combine),
          (this.reflectivity = e.reflectivity),
          (this.refractionRatio = e.refractionRatio),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.wireframeLinecap = e.wireframeLinecap),
          (this.wireframeLinejoin = e.wireframeLinejoin),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.morphNormals = e.morphNormals),
          this
        );
      }),
      (Pi.prototype = Object.create(ki.prototype)),
      (Pi.prototype.constructor = Pi),
      (Pi.prototype.isMeshToonMaterial = !0),
      (Pi.prototype.copy = function (e) {
        return (
          ki.prototype.copy.call(this, e),
          (this.gradientMap = e.gradientMap),
          this
        );
      }),
      (Ii.prototype = Object.create(X.prototype)),
      (Ii.prototype.constructor = Ii),
      (Ii.prototype.isMeshNormalMaterial = !0),
      (Ii.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          (this.bumpMap = e.bumpMap),
          (this.bumpScale = e.bumpScale),
          (this.normalMap = e.normalMap),
          this.normalScale.copy(e.normalScale),
          (this.displacementMap = e.displacementMap),
          (this.displacementScale = e.displacementScale),
          (this.displacementBias = e.displacementBias),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.morphNormals = e.morphNormals),
          this
        );
      }),
      (Ai.prototype = Object.create(X.prototype)),
      (Ai.prototype.constructor = Ai),
      (Ai.prototype.isMeshLambertMaterial = !0),
      (Ai.prototype.copy = function (e) {
        return (
          X.prototype.copy.call(this, e),
          this.color.copy(e.color),
          (this.map = e.map),
          (this.lightMap = e.lightMap),
          (this.lightMapIntensity = e.lightMapIntensity),
          (this.aoMap = e.aoMap),
          (this.aoMapIntensity = e.aoMapIntensity),
          this.emissive.copy(e.emissive),
          (this.emissiveMap = e.emissiveMap),
          (this.emissiveIntensity = e.emissiveIntensity),
          (this.specularMap = e.specularMap),
          (this.alphaMap = e.alphaMap),
          (this.envMap = e.envMap),
          (this.combine = e.combine),
          (this.reflectivity = e.reflectivity),
          (this.refractionRatio = e.refractionRatio),
          (this.wireframe = e.wireframe),
          (this.wireframeLinewidth = e.wireframeLinewidth),
          (this.wireframeLinecap = e.wireframeLinecap),
          (this.wireframeLinejoin = e.wireframeLinejoin),
          (this.skinning = e.skinning),
          (this.morphTargets = e.morphTargets),
          (this.morphNormals = e.morphNormals),
          this
        );
      }),
      (Oi.prototype = Object.create(In.prototype)),
      (Oi.prototype.constructor = Oi),
      (Oi.prototype.isLineDashedMaterial = !0),
      (Oi.prototype.copy = function (e) {
        return (
          In.prototype.copy.call(this, e),
          (this.scale = e.scale),
          (this.dashSize = e.dashSize),
          (this.gapSize = e.gapSize),
          this
        );
      });
    var qs = Object.freeze({
        ShadowMaterial: Ci,
        SpriteMaterial: Cn,
        RawShaderMaterial: Ti,
        ShaderMaterial: Y,
        PointsMaterial: Mn,
        MeshPhysicalMaterial: Ei,
        MeshStandardMaterial: Si,
        MeshPhongMaterial: ki,
        MeshToonMaterial: Pi,
        MeshNormalMaterial: Ii,
        MeshLambertMaterial: Ai,
        MeshDepthMaterial: K,
        MeshDistanceMaterial: J,
        MeshBasicMaterial: At,
        LineDashedMaterial: Oi,
        LineBasicMaterial: In,
        Material: X,
      }),
      Xs = {
        enabled: !1,
        files: {},
        add: function (e, t) {
          !1 !== this.enabled && (this.files[e] = t);
        },
        get: function (e) {
          return !1 !== this.enabled ? this.files[e] : void 0;
        },
        remove: function (e) {
          delete this.files[e];
        },
        clear: function () {
          this.files = {};
        },
      },
      Ys = new Di();
    Object.assign(Mi.prototype, {
      load: function (e, t, n, i) {
        void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e);
        var r = this,
          s = Xs.get(e);
        if (void 0 !== s)
          return (
            r.manager.itemStart(e),
            setTimeout(function () {
              t && t(s), r.manager.itemEnd(e);
            }, 0),
            s
          );
        var o = e.match(/^data:(.*?)(;base64)?,(.*)$/);
        if (o) {
          var a = o[1],
            l = !!o[2],
            o = o[3],
            o = window.decodeURIComponent(o);
          l && (o = window.atob(o));
          try {
            var c = (this.responseType || "").toLowerCase();
            switch (c) {
              case "arraybuffer":
              case "blob":
                for (
                  var u = new ArrayBuffer(o.length),
                    h = new Uint8Array(u),
                    l = 0;
                  l < o.length;
                  l++
                )
                  h[l] = o.charCodeAt(l);
                "blob" === c && (u = new Blob([u], { type: a }));
                break;
              case "document":
                u = new DOMParser().parseFromString(o, a);
                break;
              case "json":
                u = JSON.parse(o);
                break;
              default:
                u = o;
            }
            window.setTimeout(function () {
              t && t(u), r.manager.itemEnd(e);
            }, 0);
          } catch (d) {
            window.setTimeout(function () {
              i && i(d), r.manager.itemEnd(e), r.manager.itemError(e);
            }, 0);
          }
        } else {
          var p = new XMLHttpRequest();
          p.open("GET", e, !0),
            p.addEventListener(
              "load",
              function (n) {
                var s = n.target.response;
                Xs.add(e, s),
                  200 === this.status
                    ? (t && t(s), r.manager.itemEnd(e))
                    : 0 === this.status
                    ? (console.warn(
                        "THREE.FileLoader: HTTP Status 0 received."
                      ),
                      t && t(s),
                      r.manager.itemEnd(e))
                    : (i && i(n), r.manager.itemEnd(e), r.manager.itemError(e));
              },
              !1
            ),
            void 0 !== n &&
              p.addEventListener(
                "progress",
                function (e) {
                  n(e);
                },
                !1
              ),
            p.addEventListener(
              "error",
              function (t) {
                i && i(t), r.manager.itemEnd(e), r.manager.itemError(e);
              },
              !1
            ),
            void 0 !== this.responseType &&
              (p.responseType = this.responseType),
            void 0 !== this.withCredentials &&
              (p.withCredentials = this.withCredentials),
            p.overrideMimeType &&
              p.overrideMimeType(
                void 0 !== this.mimeType ? this.mimeType : "text/plain"
              );
          for (a in this.requestHeader)
            p.setRequestHeader(a, this.requestHeader[a]);
          p.send(null);
        }
        return r.manager.itemStart(e), p;
      },
      setPath: function (e) {
        return (this.path = e), this;
      },
      setResponseType: function (e) {
        return (this.responseType = e), this;
      },
      setWithCredentials: function (e) {
        return (this.withCredentials = e), this;
      },
      setMimeType: function (e) {
        return (this.mimeType = e), this;
      },
      setRequestHeader: function (e) {
        return (this.requestHeader = e), this;
      },
    }),
      Object.assign(Ri.prototype, {
        load: function (e, t, n, i) {
          function r(r) {
            c.load(
              e[r],
              function (e) {
                (e = o._parser(e, !0)),
                  (a[r] = {
                    width: e.width,
                    height: e.height,
                    format: e.format,
                    mipmaps: e.mipmaps,
                  }),
                  (s += 1),
                  6 === s &&
                    (1 === e.mipmapCount && (l.minFilter = 1006),
                    (l.format = e.format),
                    (l.needsUpdate = !0),
                    t && t(l));
              },
              n,
              i
            );
          }
          var s,
            o = this,
            a = [],
            l = new Un();
          l.image = a;
          var c = new Mi(this.manager);
          if (
            (c.setPath(this.path),
            c.setResponseType("arraybuffer"),
            Array.isArray(e))
          )
            for (var u = (s = 0), h = e.length; h > u; ++u) r(u);
          else
            c.load(
              e,
              function (e) {
                if (((e = o._parser(e, !0)), e.isCubemap))
                  for (
                    var n = e.mipmaps.length / e.mipmapCount, i = 0;
                    n > i;
                    i++
                  ) {
                    a[i] = { mipmaps: [] };
                    for (var r = 0; r < e.mipmapCount; r++)
                      a[i].mipmaps.push(e.mipmaps[i * e.mipmapCount + r]),
                        (a[i].format = e.format),
                        (a[i].width = e.width),
                        (a[i].height = e.height);
                  }
                else
                  (l.image.width = e.width),
                    (l.image.height = e.height),
                    (l.mipmaps = e.mipmaps);
                1 === e.mipmapCount && (l.minFilter = 1006),
                  (l.format = e.format),
                  (l.needsUpdate = !0),
                  t && t(l);
              },
              n,
              i
            );
          return l;
        },
        setPath: function (e) {
          return (this.path = e), this;
        },
      }),
      Object.assign(Li.prototype, {
        load: function (e, t, n, i) {
          var r = this,
            s = new u(),
            o = new Mi(this.manager);
          return (
            o.setResponseType("arraybuffer"),
            o.load(
              e,
              function (e) {
                (e = r._parser(e)) &&
                  (void 0 !== e.image
                    ? (s.image = e.image)
                    : void 0 !== e.data &&
                      ((s.image.width = e.width),
                      (s.image.height = e.height),
                      (s.image.data = e.data)),
                  (s.wrapS = void 0 !== e.wrapS ? e.wrapS : 1001),
                  (s.wrapT = void 0 !== e.wrapT ? e.wrapT : 1001),
                  (s.magFilter = void 0 !== e.magFilter ? e.magFilter : 1006),
                  (s.minFilter = void 0 !== e.minFilter ? e.minFilter : 1008),
                  (s.anisotropy = void 0 !== e.anisotropy ? e.anisotropy : 1),
                  void 0 !== e.format && (s.format = e.format),
                  void 0 !== e.type && (s.type = e.type),
                  void 0 !== e.mipmaps && (s.mipmaps = e.mipmaps),
                  1 === e.mipmapCount && (s.minFilter = 1006),
                  (s.needsUpdate = !0),
                  t && t(s, e));
              },
              n,
              i
            ),
            s
          );
        },
      }),
      Object.assign(Ni.prototype, {
        crossOrigin: "Anonymous",
        load: function (e, t, n, i) {
          void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e);
          var r = this,
            s = Xs.get(e);
          return void 0 !== s
            ? (r.manager.itemStart(e),
              setTimeout(function () {
                t && t(s), r.manager.itemEnd(e);
              }, 0),
              s)
            : ((n = document.createElementNS(
                "http://www.w3.org/1999/xhtml",
                "img"
              )),
              n.addEventListener(
                "load",
                function () {
                  Xs.add(e, this), t && t(this), r.manager.itemEnd(e);
                },
                !1
              ),
              n.addEventListener(
                "error",
                function (t) {
                  i && i(t), r.manager.itemEnd(e), r.manager.itemError(e);
                },
                !1
              ),
              "data:" !== e.substr(0, 5) &&
                void 0 !== this.crossOrigin &&
                (n.crossOrigin = this.crossOrigin),
              r.manager.itemStart(e),
              (n.src = e),
              n);
        },
        setCrossOrigin: function (e) {
          return (this.crossOrigin = e), this;
        },
        setPath: function (e) {
          return (this.path = e), this;
        },
      }),
      Object.assign(Ui.prototype, {
        crossOrigin: "Anonymous",
        load: function (e, t, n, i) {
          function r(n) {
            o.load(
              e[n],
              function (e) {
                (s.images[n] = e),
                  a++,
                  6 === a && ((s.needsUpdate = !0), t && t(s));
              },
              void 0,
              i
            );
          }
          var s = new h(),
            o = new Ni(this.manager);
          o.setCrossOrigin(this.crossOrigin), o.setPath(this.path);
          var a = 0;
          for (n = 0; n < e.length; ++n) r(n);
          return s;
        },
        setCrossOrigin: function (e) {
          return (this.crossOrigin = e), this;
        },
        setPath: function (e) {
          return (this.path = e), this;
        },
      }),
      Object.assign(Bi.prototype, {
        crossOrigin: "Anonymous",
        load: function (e, t, n, r) {
          var s = new Ni(this.manager);
          s.setCrossOrigin(this.crossOrigin), s.setPath(this.path);
          var o = new i();
          return (
            (o.image = s.load(
              e,
              function () {
                var n =
                  0 < e.search(/\.(jpg|jpeg)$/) ||
                  0 === e.search(/^data\:image\/jpeg/);
                (o.format = n ? 1022 : 1023),
                  (o.needsUpdate = !0),
                  void 0 !== t && t(o);
              },
              n,
              r
            )),
            o
          );
        },
        setCrossOrigin: function (e) {
          return (this.crossOrigin = e), this;
        },
        setPath: function (e) {
          return (this.path = e), this;
        },
      }),
      (Fi.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Fi,
        isLight: !0,
        copy: function (e) {
          return (
            at.prototype.copy.call(this, e),
            this.color.copy(e.color),
            (this.intensity = e.intensity),
            this
          );
        },
        toJSON: function (e) {
          return (
            (e = at.prototype.toJSON.call(this, e)),
            (e.object.color = this.color.getHex()),
            (e.object.intensity = this.intensity),
            void 0 !== this.groundColor &&
              (e.object.groundColor = this.groundColor.getHex()),
            void 0 !== this.distance && (e.object.distance = this.distance),
            void 0 !== this.angle && (e.object.angle = this.angle),
            void 0 !== this.decay && (e.object.decay = this.decay),
            void 0 !== this.penumbra && (e.object.penumbra = this.penumbra),
            void 0 !== this.shadow && (e.object.shadow = this.shadow.toJSON()),
            e
          );
        },
      })),
      (ji.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: ji,
        isHemisphereLight: !0,
        copy: function (e) {
          return (
            Fi.prototype.copy.call(this, e),
            this.groundColor.copy(e.groundColor),
            this
          );
        },
      })),
      Object.assign(Hi.prototype, {
        copy: function (e) {
          return (
            (this.camera = e.camera.clone()),
            (this.bias = e.bias),
            (this.radius = e.radius),
            this.mapSize.copy(e.mapSize),
            this
          );
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        toJSON: function () {
          var e = {};
          return (
            0 !== this.bias && (e.bias = this.bias),
            1 !== this.radius && (e.radius = this.radius),
            (512 !== this.mapSize.x || 512 !== this.mapSize.y) &&
              (e.mapSize = this.mapSize.toArray()),
            (e.camera = this.camera.toJSON(!1).object),
            delete e.camera.matrix,
            e
          );
        },
      }),
      ($i.prototype = Object.assign(Object.create(Hi.prototype), {
        constructor: $i,
        isSpotLightShadow: !0,
        update: function (e) {
          var t = this.camera,
            n = 2 * ks.RAD2DEG * e.angle,
            i = this.mapSize.width / this.mapSize.height;
          (e = e.distance || t.far),
            (n !== t.fov || i !== t.aspect || e !== t.far) &&
              ((t.fov = n),
              (t.aspect = i),
              (t.far = e),
              t.updateProjectionMatrix());
        },
      })),
      (zi.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: zi,
        isSpotLight: !0,
        copy: function (e) {
          return (
            Fi.prototype.copy.call(this, e),
            (this.distance = e.distance),
            (this.angle = e.angle),
            (this.penumbra = e.penumbra),
            (this.decay = e.decay),
            (this.target = e.target.clone()),
            (this.shadow = e.shadow.clone()),
            this
          );
        },
      })),
      (Wi.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: Wi,
        isPointLight: !0,
        copy: function (e) {
          return (
            Fi.prototype.copy.call(this, e),
            (this.distance = e.distance),
            (this.decay = e.decay),
            (this.shadow = e.shadow.clone()),
            this
          );
        },
      })),
      (Gi.prototype = Object.assign(Object.create(Hi.prototype), {
        constructor: Gi,
      })),
      (Vi.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: Vi,
        isDirectionalLight: !0,
        copy: function (e) {
          return (
            Fi.prototype.copy.call(this, e),
            (this.target = e.target.clone()),
            (this.shadow = e.shadow.clone()),
            this
          );
        },
      })),
      (qi.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: qi,
        isAmbientLight: !0,
      })),
      (Xi.prototype = Object.assign(Object.create(Fi.prototype), {
        constructor: Xi,
        isRectAreaLight: !0,
        copy: function (e) {
          return (
            Fi.prototype.copy.call(this, e),
            (this.width = e.width),
            (this.height = e.height),
            this
          );
        },
        toJSON: function (e) {
          return (
            (e = Fi.prototype.toJSON.call(this, e)),
            (e.object.width = this.width),
            (e.object.height = this.height),
            e
          );
        },
      }));
    var Ks = {
      arraySlice: function (e, t, n) {
        return Ks.isTypedArray(e)
          ? new e.constructor(e.subarray(t, void 0 !== n ? n : e.length))
          : e.slice(t, n);
      },
      convertArray: function (e, t, n) {
        return !e || (!n && e.constructor === t)
          ? e
          : "number" == typeof t.BYTES_PER_ELEMENT
          ? new t(e)
          : Array.prototype.slice.call(e);
      },
      isTypedArray: function (e) {
        return ArrayBuffer.isView(e) && !(e instanceof DataView);
      },
      getKeyframeOrder: function (e) {
        for (var t = e.length, n = Array(t), i = 0; i !== t; ++i) n[i] = i;
        return (
          n.sort(function (t, n) {
            return e[t] - e[n];
          }),
          n
        );
      },
      sortedArray: function (e, t, n) {
        for (
          var i = e.length, r = new e.constructor(i), s = 0, o = 0;
          o !== i;
          ++s
        )
          for (var a = n[s] * t, l = 0; l !== t; ++l) r[o++] = e[a + l];
        return r;
      },
      flattenJSON: function (e, t, n, i) {
        for (var r = 1, s = e[0]; void 0 !== s && void 0 === s[i]; ) s = e[r++];
        if (void 0 !== s) {
          var o = s[i];
          if (void 0 !== o)
            if (Array.isArray(o)) {
              do
                (o = s[i]),
                  void 0 !== o && (t.push(s.time), n.push.apply(n, o)),
                  (s = e[r++]);
              while (void 0 !== s);
            } else if (void 0 !== o.toArray) {
              do
                (o = s[i]),
                  void 0 !== o && (t.push(s.time), o.toArray(n, n.length)),
                  (s = e[r++]);
              while (void 0 !== s);
            } else
              do
                (o = s[i]),
                  void 0 !== o && (t.push(s.time), n.push(o)),
                  (s = e[r++]);
              while (void 0 !== s);
        }
      },
    };
    Object.assign(Yi.prototype, {
      evaluate: function (e) {
        var t = this.parameterPositions,
          n = this._cachedIndex,
          i = t[n],
          r = t[n - 1];
        e: {
          t: {
            n: {
              i: if (!(i > e)) {
                for (var s = n + 2; ; ) {
                  if (void 0 === i) {
                    if (r > e) break i;
                    return (
                      (this._cachedIndex = n = t.length),
                      this.afterEnd_(n - 1, e, r)
                    );
                  }
                  if (n === s) break;
                  if (((r = i), (i = t[++n]), i > e)) break t;
                }
                i = t.length;
                break n;
              }
              if (e >= r) break e;
              for (s = t[1], s > e && ((n = 2), (r = s)), s = n - 2; ; ) {
                if (void 0 === r)
                  return (this._cachedIndex = 0), this.beforeStart_(0, e, i);
                if (n === s) break;
                if (((i = r), (r = t[--n - 1]), e >= r)) break t;
              }
              (i = n), (n = 0);
            }
            for (; i > n; )
              (r = (n + i) >>> 1), e < t[r] ? (i = r) : (n = r + 1);
            if (((i = t[n]), (r = t[n - 1]), void 0 === r))
              return (this._cachedIndex = 0), this.beforeStart_(0, e, i);
            if (void 0 === i)
              return (
                (this._cachedIndex = n = t.length), this.afterEnd_(n - 1, r, e)
              );
          }
          (this._cachedIndex = n), this.intervalChanged_(n, r, i);
        }
        return this.interpolate_(n, r, e, i);
      },
      settings: null,
      DefaultSettings_: {},
      getSettings_: function () {
        return this.settings || this.DefaultSettings_;
      },
      copySampleValue_: function (e) {
        var t = this.resultBuffer,
          n = this.sampleValues,
          i = this.valueSize;
        e *= i;
        for (var r = 0; r !== i; ++r) t[r] = n[e + r];
        return t;
      },
      interpolate_: function () {
        throw Error("call to abstract method");
      },
      intervalChanged_: function () {},
    }),
      Object.assign(Yi.prototype, {
        beforeStart_: Yi.prototype.copySampleValue_,
        afterEnd_: Yi.prototype.copySampleValue_,
      }),
      (Ki.prototype = Object.assign(Object.create(Yi.prototype), {
        constructor: Ki,
        DefaultSettings_: { endingStart: 2400, endingEnd: 2400 },
        intervalChanged_: function (e, t, n) {
          var i = this.parameterPositions,
            r = e - 2,
            s = e + 1,
            o = i[r],
            a = i[s];
          if (void 0 === o)
            switch (this.getSettings_().endingStart) {
              case 2401:
                (r = e), (o = 2 * t - n);
                break;
              case 2402:
                (r = i.length - 2), (o = t + i[r] - i[r + 1]);
                break;
              default:
                (r = e), (o = n);
            }
          if (void 0 === a)
            switch (this.getSettings_().endingEnd) {
              case 2401:
                (s = e), (a = 2 * n - t);
                break;
              case 2402:
                (s = 1), (a = n + i[1] - i[0]);
                break;
              default:
                (s = e - 1), (a = t);
            }
          (e = 0.5 * (n - t)),
            (i = this.valueSize),
            (this._weightPrev = e / (t - o)),
            (this._weightNext = e / (a - n)),
            (this._offsetPrev = r * i),
            (this._offsetNext = s * i);
        },
        interpolate_: function (e, t, n, i) {
          var r = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize;
          e *= o;
          var a = e - o,
            l = this._offsetPrev,
            c = this._offsetNext,
            u = this._weightPrev,
            h = this._weightNext,
            d = (n - t) / (i - t);
          for (
            n = d * d,
              i = n * d,
              t = -u * i + 2 * u * n - u * d,
              u = (1 + u) * i + (-1.5 - 2 * u) * n + (-0.5 + u) * d + 1,
              d = (-1 - h) * i + (1.5 + h) * n + 0.5 * d,
              h = h * i - h * n,
              n = 0;
            n !== o;
            ++n
          )
            r[n] = t * s[l + n] + u * s[a + n] + d * s[e + n] + h * s[c + n];
          return r;
        },
      })),
      (Ji.prototype = Object.assign(Object.create(Yi.prototype), {
        constructor: Ji,
        interpolate_: function (e, t, n, i) {
          var r = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize;
          e *= o;
          var a = e - o;
          for (t = (n - t) / (i - t), n = 1 - t, i = 0; i !== o; ++i)
            r[i] = s[a + i] * n + s[e + i] * t;
          return r;
        },
      })),
      (Qi.prototype = Object.assign(Object.create(Yi.prototype), {
        constructor: Qi,
        interpolate_: function (e) {
          return this.copySampleValue_(e - 1);
        },
      }));
    var Js = {
      TimeBufferType: Float32Array,
      ValueBufferType: Float32Array,
      DefaultInterpolation: 2301,
      InterpolantFactoryMethodDiscrete: function (e) {
        return new Qi(this.times, this.values, this.getValueSize(), e);
      },
      InterpolantFactoryMethodLinear: function (e) {
        return new Ji(this.times, this.values, this.getValueSize(), e);
      },
      InterpolantFactoryMethodSmooth: function (e) {
        return new Ki(this.times, this.values, this.getValueSize(), e);
      },
      setInterpolation: function (e) {
        switch (e) {
          case 2300:
            var t = this.InterpolantFactoryMethodDiscrete;
            break;
          case 2301:
            t = this.InterpolantFactoryMethodLinear;
            break;
          case 2302:
            t = this.InterpolantFactoryMethodSmooth;
        }
        if (void 0 === t) {
          if (
            ((t =
              "unsupported interpolation for " +
              this.ValueTypeName +
              " keyframe track named " +
              this.name),
            void 0 === this.createInterpolant)
          ) {
            if (e === this.DefaultInterpolation) throw Error(t);
            this.setInterpolation(this.DefaultInterpolation);
          }
          console.warn("THREE.KeyframeTrackPrototype:", t);
        } else this.createInterpolant = t;
      },
      getInterpolation: function () {
        switch (this.createInterpolant) {
          case this.InterpolantFactoryMethodDiscrete:
            return 2300;
          case this.InterpolantFactoryMethodLinear:
            return 2301;
          case this.InterpolantFactoryMethodSmooth:
            return 2302;
        }
      },
      getValueSize: function () {
        return this.values.length / this.times.length;
      },
      shift: function (e) {
        if (0 !== e)
          for (var t = this.times, n = 0, i = t.length; n !== i; ++n) t[n] += e;
        return this;
      },
      scale: function (e) {
        if (1 !== e)
          for (var t = this.times, n = 0, i = t.length; n !== i; ++n) t[n] *= e;
        return this;
      },
      trim: function (e, t) {
        for (
          var n = this.times, i = n.length, r = 0, s = i - 1;
          r !== i && n[r] < e;

        )
          ++r;
        for (; -1 !== s && n[s] > t; ) --s;
        return (
          ++s,
          (0 !== r || s !== i) &&
            (r >= s && ((s = Math.max(s, 1)), (r = s - 1)),
            (e = this.getValueSize()),
            (this.times = Ks.arraySlice(n, r, s)),
            (this.values = Ks.arraySlice(this.values, r * e, s * e))),
          this
        );
      },
      validate: function () {
        var e = !0,
          t = this.getValueSize();
        0 !== t - Math.floor(t) &&
          (console.error(
            "THREE.KeyframeTrackPrototype: Invalid value size in track.",
            this
          ),
          (e = !1));
        var n = this.times,
          t = this.values,
          i = n.length;
        0 === i &&
          (console.error("THREE.KeyframeTrackPrototype: Track is empty.", this),
          (e = !1));
        for (var r = null, s = 0; s !== i; s++) {
          var o = n[s];
          if ("number" == typeof o && isNaN(o)) {
            console.error(
              "THREE.KeyframeTrackPrototype: Time is not a valid number.",
              this,
              s,
              o
            ),
              (e = !1);
            break;
          }
          if (null !== r && r > o) {
            console.error(
              "THREE.KeyframeTrackPrototype: Out of order keys.",
              this,
              s,
              o,
              r
            ),
              (e = !1);
            break;
          }
          r = o;
        }
        if (void 0 !== t && Ks.isTypedArray(t))
          for (s = 0, n = t.length; s !== n; ++s)
            if (((i = t[s]), isNaN(i))) {
              console.error(
                "THREE.KeyframeTrackPrototype: Value is not a valid number.",
                this,
                s,
                i
              ),
                (e = !1);
              break;
            }
        return e;
      },
      optimize: function () {
        for (
          var e,
            t,
            n = this.times,
            i = this.values,
            r = this.getValueSize(),
            s = 2302 === this.getInterpolation(),
            o = 1,
            a = n.length - 1,
            l = 1;
          a > l;
          ++l
        ) {
          e = !1;
          var c = n[l];
          if (c !== n[l + 1] && (1 !== l || c !== c[0]))
            if (s) e = !0;
            else {
              t = l * r;
              for (var u = t - r, h = t + r, c = 0; c !== r; ++c) {
                var d = i[t + c];
                if (d !== i[u + c] || d !== i[h + c]) {
                  e = !0;
                  break;
                }
              }
            }
          if (e) {
            if (l !== o)
              for (n[o] = n[l], t = l * r, e = o * r, c = 0; c !== r; ++c)
                i[e + c] = i[t + c];
            ++o;
          }
        }
        if (a > 0) {
          for (n[o] = n[a], t = a * r, e = o * r, c = 0; c !== r; ++c)
            i[e + c] = i[t + c];
          ++o;
        }
        return (
          o !== n.length &&
            ((this.times = Ks.arraySlice(n, 0, o)),
            (this.values = Ks.arraySlice(i, 0, o * r))),
          this
        );
      },
    };
    (er.prototype = Object.assign(Object.create(Js), {
      constructor: er,
      ValueTypeName: "vector",
    })),
      (tr.prototype = Object.assign(Object.create(Yi.prototype), {
        constructor: tr,
        interpolate_: function (e, t, n, i) {
          var r = this.resultBuffer,
            s = this.sampleValues,
            o = this.valueSize;
          for (e *= o, t = (n - t) / (i - t), n = e + o; e !== n; e += 4)
            a.slerpFlat(r, 0, s, e - o, s, e, t);
          return r;
        },
      })),
      (nr.prototype = Object.assign(Object.create(Js), {
        constructor: nr,
        ValueTypeName: "quaternion",
        DefaultInterpolation: 2301,
        InterpolantFactoryMethodLinear: function (e) {
          return new tr(this.times, this.values, this.getValueSize(), e);
        },
        InterpolantFactoryMethodSmooth: void 0,
      })),
      (ir.prototype = Object.assign(Object.create(Js), {
        constructor: ir,
        ValueTypeName: "number",
      })),
      (rr.prototype = Object.assign(Object.create(Js), {
        constructor: rr,
        ValueTypeName: "string",
        ValueBufferType: Array,
        DefaultInterpolation: 2300,
        InterpolantFactoryMethodLinear: void 0,
        InterpolantFactoryMethodSmooth: void 0,
      })),
      (sr.prototype = Object.assign(Object.create(Js), {
        constructor: sr,
        ValueTypeName: "bool",
        ValueBufferType: Array,
        DefaultInterpolation: 2300,
        InterpolantFactoryMethodLinear: void 0,
        InterpolantFactoryMethodSmooth: void 0,
      })),
      (or.prototype = Object.assign(Object.create(Js), {
        constructor: or,
        ValueTypeName: "color",
      })),
      (ar.prototype = Js),
      (Js.constructor = ar),
      Object.assign(ar, {
        parse: function (e) {
          if (void 0 === e.type)
            throw Error("track type undefined, can not parse");
          var t = ar._getTrackTypeForValueTypeName(e.type);
          if (void 0 === e.times) {
            var n = [],
              i = [];
            Ks.flattenJSON(e.keys, n, i, "value"),
              (e.times = n),
              (e.values = i);
          }
          return void 0 !== t.parse
            ? t.parse(e)
            : new t(e.name, e.times, e.values, e.interpolation);
        },
        toJSON: function (e) {
          var t = e.constructor;
          if (void 0 !== t.toJSON) t = t.toJSON(e);
          else {
            var t = {
                name: e.name,
                times: Ks.convertArray(e.times, Array),
                values: Ks.convertArray(e.values, Array),
              },
              n = e.getInterpolation();
            n !== e.DefaultInterpolation && (t.interpolation = n);
          }
          return (t.type = e.ValueTypeName), t;
        },
        _getTrackTypeForValueTypeName: function (e) {
          switch (e.toLowerCase()) {
            case "scalar":
            case "double":
            case "float":
            case "number":
            case "integer":
              return ir;
            case "vector":
            case "vector2":
            case "vector3":
            case "vector4":
              return er;
            case "color":
              return or;
            case "quaternion":
              return nr;
            case "bool":
            case "boolean":
              return sr;
            case "string":
              return rr;
          }
          throw Error("Unsupported typeName: " + e);
        },
      }),
      Object.assign(lr, {
        parse: function (e) {
          for (
            var t = [], n = e.tracks, i = 1 / (e.fps || 1), r = 0, s = n.length;
            r !== s;
            ++r
          )
            t.push(ar.parse(n[r]).scale(i));
          return new lr(e.name, e.duration, t);
        },
        toJSON: function (e) {
          var t = [],
            n = e.tracks;
          e = { name: e.name, duration: e.duration, tracks: t };
          for (var i = 0, r = n.length; i !== r; ++i) t.push(ar.toJSON(n[i]));
          return e;
        },
        CreateFromMorphTargetSequence: function (e, t, n, i) {
          for (var r = t.length, s = [], o = 0; r > o; o++) {
            var a = [],
              l = [];
            a.push((o + r - 1) % r, o, (o + 1) % r), l.push(0, 1, 0);
            var c = Ks.getKeyframeOrder(a),
              a = Ks.sortedArray(a, 1, c),
              l = Ks.sortedArray(l, 1, c);
            i || 0 !== a[0] || (a.push(r), l.push(l[0])),
              s.push(
                new ir(".morphTargetInfluences[" + t[o].name + "]", a, l).scale(
                  1 / n
                )
              );
          }
          return new lr(e, -1, s);
        },
        findByName: function (e, t) {
          var n = e;
          for (
            Array.isArray(e) ||
              (n = (e.geometry && e.geometry.animations) || e.animations),
              e = 0;
            e < n.length;
            e++
          )
            if (n[e].name === t) return n[e];
          return null;
        },
        CreateClipsFromMorphTargetSequences: function (e, t, n) {
          for (
            var i, r = {}, s = /^([\w-]*?)([\d]+)$/, o = 0, a = e.length;
            a > o;
            o++
          ) {
            var l = e[o],
              c = l.name.match(s);
            c &&
              1 < c.length &&
              ((i = c[1]), (c = r[i]) || (r[i] = c = []), c.push(l));
          }
          e = [];
          for (i in r) e.push(lr.CreateFromMorphTargetSequence(i, r[i], t, n));
          return e;
        },
        parseAnimation: function (e, t) {
          if (!e)
            return (
              console.error(
                "THREE.AnimationClip: No animation in JSONLoader data."
              ),
              null
            );
          var n = function (e, t, n, i, r) {
              if (0 !== n.length) {
                var s = [],
                  o = [];
                Ks.flattenJSON(n, s, o, i),
                  0 !== s.length && r.push(new e(t, s, o));
              }
            },
            i = [],
            r = e.name || "default",
            s = e.length || -1,
            o = e.fps || 30;
          e = e.hierarchy || [];
          for (var a = 0; a < e.length; a++) {
            var l = e[a].keys;
            if (l && 0 !== l.length)
              if (l[0].morphTargets) {
                for (var s = {}, c = 0; c < l.length; c++)
                  if (l[c].morphTargets)
                    for (var u = 0; u < l[c].morphTargets.length; u++)
                      s[l[c].morphTargets[u]] = -1;
                for (var h in s) {
                  for (
                    var d = [], p = [], u = 0;
                    u !== l[c].morphTargets.length;
                    ++u
                  ) {
                    var f = l[c];
                    d.push(f.time), p.push(f.morphTarget === h ? 1 : 0);
                  }
                  i.push(new ir(".morphTargetInfluence[" + h + "]", d, p));
                }
                s = s.length * (o || 1);
              } else
                (c = ".bones[" + t[a].name + "]"),
                  n(er, c + ".position", l, "pos", i),
                  n(nr, c + ".quaternion", l, "rot", i),
                  n(er, c + ".scale", l, "scl", i);
          }
          return 0 === i.length ? null : new lr(r, s, i);
        },
      }),
      Object.assign(lr.prototype, {
        resetDuration: function () {
          for (var e = 0, t = 0, n = this.tracks.length; t !== n; ++t)
            var i = this.tracks[t],
              e = Math.max(e, i.times[i.times.length - 1]);
          this.duration = e;
        },
        trim: function () {
          for (var e = 0; e < this.tracks.length; e++)
            this.tracks[e].trim(0, this.duration);
          return this;
        },
        optimize: function () {
          for (var e = 0; e < this.tracks.length; e++)
            this.tracks[e].optimize();
          return this;
        },
      }),
      Object.assign(cr.prototype, {
        load: function (e, t, n, i) {
          var r = this;
          new Mi(r.manager).load(
            e,
            function (e) {
              t(r.parse(JSON.parse(e)));
            },
            n,
            i
          );
        },
        setTextures: function (e) {
          this.textures = e;
        },
        parse: function (e) {
          function t(e) {
            return (
              void 0 === i[e] &&
                console.warn("THREE.MaterialLoader: Undefined texture", e),
              i[e]
            );
          }
          var i = this.textures,
            r = new qs[e.type]();
          if (
            (void 0 !== e.uuid && (r.uuid = e.uuid),
            void 0 !== e.name && (r.name = e.name),
            void 0 !== e.color && r.color.setHex(e.color),
            void 0 !== e.roughness && (r.roughness = e.roughness),
            void 0 !== e.metalness && (r.metalness = e.metalness),
            void 0 !== e.emissive && r.emissive.setHex(e.emissive),
            void 0 !== e.specular && r.specular.setHex(e.specular),
            void 0 !== e.shininess && (r.shininess = e.shininess),
            void 0 !== e.clearCoat && (r.clearCoat = e.clearCoat),
            void 0 !== e.clearCoatRoughness &&
              (r.clearCoatRoughness = e.clearCoatRoughness),
            void 0 !== e.uniforms && (r.uniforms = e.uniforms),
            void 0 !== e.vertexShader && (r.vertexShader = e.vertexShader),
            void 0 !== e.fragmentShader &&
              (r.fragmentShader = e.fragmentShader),
            void 0 !== e.vertexColors && (r.vertexColors = e.vertexColors),
            void 0 !== e.fog && (r.fog = e.fog),
            void 0 !== e.flatShading && (r.flatShading = e.flatShading),
            void 0 !== e.blending && (r.blending = e.blending),
            void 0 !== e.side && (r.side = e.side),
            void 0 !== e.opacity && (r.opacity = e.opacity),
            void 0 !== e.transparent && (r.transparent = e.transparent),
            void 0 !== e.alphaTest && (r.alphaTest = e.alphaTest),
            void 0 !== e.depthTest && (r.depthTest = e.depthTest),
            void 0 !== e.depthWrite && (r.depthWrite = e.depthWrite),
            void 0 !== e.colorWrite && (r.colorWrite = e.colorWrite),
            void 0 !== e.wireframe && (r.wireframe = e.wireframe),
            void 0 !== e.wireframeLinewidth &&
              (r.wireframeLinewidth = e.wireframeLinewidth),
            void 0 !== e.wireframeLinecap &&
              (r.wireframeLinecap = e.wireframeLinecap),
            void 0 !== e.wireframeLinejoin &&
              (r.wireframeLinejoin = e.wireframeLinejoin),
            void 0 !== e.skinning && (r.skinning = e.skinning),
            void 0 !== e.morphTargets && (r.morphTargets = e.morphTargets),
            void 0 !== e.dithering && (r.dithering = e.dithering),
            void 0 !== e.visible && (r.visible = e.visible),
            void 0 !== e.userData && (r.userData = e.userData),
            void 0 !== e.shading && (r.flatShading = 1 === e.shading),
            void 0 !== e.size && (r.size = e.size),
            void 0 !== e.sizeAttenuation &&
              (r.sizeAttenuation = e.sizeAttenuation),
            void 0 !== e.map && (r.map = t(e.map)),
            void 0 !== e.alphaMap &&
              ((r.alphaMap = t(e.alphaMap)), (r.transparent = !0)),
            void 0 !== e.bumpMap && (r.bumpMap = t(e.bumpMap)),
            void 0 !== e.bumpScale && (r.bumpScale = e.bumpScale),
            void 0 !== e.normalMap && (r.normalMap = t(e.normalMap)),
            void 0 !== e.normalScale)
          ) {
            var s = e.normalScale;
            !1 === Array.isArray(s) && (s = [s, s]),
              (r.normalScale = new n().fromArray(s));
          }
          return (
            void 0 !== e.displacementMap &&
              (r.displacementMap = t(e.displacementMap)),
            void 0 !== e.displacementScale &&
              (r.displacementScale = e.displacementScale),
            void 0 !== e.displacementBias &&
              (r.displacementBias = e.displacementBias),
            void 0 !== e.roughnessMap && (r.roughnessMap = t(e.roughnessMap)),
            void 0 !== e.metalnessMap && (r.metalnessMap = t(e.metalnessMap)),
            void 0 !== e.emissiveMap && (r.emissiveMap = t(e.emissiveMap)),
            void 0 !== e.emissiveIntensity &&
              (r.emissiveIntensity = e.emissiveIntensity),
            void 0 !== e.specularMap && (r.specularMap = t(e.specularMap)),
            void 0 !== e.envMap && (r.envMap = t(e.envMap)),
            void 0 !== e.reflectivity && (r.reflectivity = e.reflectivity),
            void 0 !== e.lightMap && (r.lightMap = t(e.lightMap)),
            void 0 !== e.lightMapIntensity &&
              (r.lightMapIntensity = e.lightMapIntensity),
            void 0 !== e.aoMap && (r.aoMap = t(e.aoMap)),
            void 0 !== e.aoMapIntensity &&
              (r.aoMapIntensity = e.aoMapIntensity),
            void 0 !== e.gradientMap && (r.gradientMap = t(e.gradientMap)),
            r
          );
        },
      }),
      Object.assign(ur.prototype, {
        load: function (e, t, n, i) {
          var r = this;
          new Mi(r.manager).load(
            e,
            function (e) {
              t(r.parse(JSON.parse(e)));
            },
            n,
            i
          );
        },
        parse: function (e) {
          var t = new St(),
            n = e.data.index;
          void 0 !== n &&
            ((n = new Qs[n.type](n.array)), t.setIndex(new pt(n, 1)));
          var i = e.data.attributes;
          for (s in i) {
            var r = i[s];
            (n = new Qs[r.type](r.array)),
              t.addAttribute(s, new pt(n, r.itemSize, r.normalized));
          }
          var s = e.data.groups || e.data.drawcalls || e.data.offsets;
          if (void 0 !== s)
            for (n = 0, i = s.length; n !== i; ++n)
              (r = s[n]), t.addGroup(r.start, r.count, r.materialIndex);
          return (
            (e = e.data.boundingSphere),
            void 0 !== e &&
              ((s = new l()),
              void 0 !== e.center && s.fromArray(e.center),
              (t.boundingSphere = new Z(s, e.radius))),
            t
          );
        },
      });
    var Qs = {
      Int8Array: Int8Array,
      Uint8Array: Uint8Array,
      Uint8ClampedArray:
        "undefined" != typeof Uint8ClampedArray
          ? Uint8ClampedArray
          : Uint8Array,
      Int16Array: Int16Array,
      Uint16Array: Uint16Array,
      Int32Array: Int32Array,
      Uint32Array: Uint32Array,
      Float32Array: Float32Array,
      Float64Array: Float64Array,
    };
    (hr.Handlers = {
      handlers: [],
      add: function (e, t) {
        this.handlers.push(e, t);
      },
      get: function (e) {
        for (var t = this.handlers, n = 0, i = t.length; i > n; n += 2) {
          var r = t[n + 1];
          if (t[n].test(e)) return r;
        }
        return null;
      },
    }),
      Object.assign(hr.prototype, {
        crossOrigin: void 0,
        extractUrlBase: function (e) {
          return (
            (e = e.split("/")),
            1 === e.length ? "./" : (e.pop(), e.join("/") + "/")
          );
        },
        initMaterials: function (e, t, n) {
          for (var i = [], r = 0; r < e.length; ++r)
            i[r] = this.createMaterial(e[r], t, n);
          return i;
        },
        createMaterial: (function () {
          var e = {
              NoBlending: 0,
              NormalBlending: 1,
              AdditiveBlending: 2,
              SubtractiveBlending: 3,
              MultiplyBlending: 4,
              CustomBlending: 5,
            },
            t = new z(),
            n = new Bi(),
            i = new cr();
          return function (r, s, o) {
            function a(e, t, i, r, a) {
              e = s + e;
              var l = hr.Handlers.get(e);
              return (
                null !== l
                  ? (e = l.load(e))
                  : (n.setCrossOrigin(o), (e = n.load(e))),
                void 0 !== t &&
                  (e.repeat.fromArray(t),
                  1 !== t[0] && (e.wrapS = 1e3),
                  1 !== t[1] && (e.wrapT = 1e3)),
                void 0 !== i && e.offset.fromArray(i),
                void 0 !== r &&
                  ("repeat" === r[0] && (e.wrapS = 1e3),
                  "mirror" === r[0] && (e.wrapS = 1002),
                  "repeat" === r[1] && (e.wrapT = 1e3),
                  "mirror" === r[1] && (e.wrapT = 1002)),
                void 0 !== a && (e.anisotropy = a),
                (t = ks.generateUUID()),
                (c[t] = e),
                t
              );
            }
            var l,
              c = {},
              u = { uuid: ks.generateUUID(), type: "MeshLambertMaterial" };
            for (l in r) {
              var h = r[l];
              switch (l) {
                case "DbgColor":
                case "DbgIndex":
                case "opticalDensity":
                case "illumination":
                  break;
                case "DbgName":
                  u.name = h;
                  break;
                case "blending":
                  u.blending = e[h];
                  break;
                case "colorAmbient":
                case "mapAmbient":
                  console.warn(
                    "THREE.Loader.createMaterial:",
                    l,
                    "is no longer supported."
                  );
                  break;
                case "colorDiffuse":
                  u.color = t.fromArray(h).getHex();
                  break;
                case "colorSpecular":
                  u.specular = t.fromArray(h).getHex();
                  break;
                case "colorEmissive":
                  u.emissive = t.fromArray(h).getHex();
                  break;
                case "specularCoef":
                  u.shininess = h;
                  break;
                case "shading":
                  "basic" === h.toLowerCase() && (u.type = "MeshBasicMaterial"),
                    "phong" === h.toLowerCase() &&
                      (u.type = "MeshPhongMaterial"),
                    "standard" === h.toLowerCase() &&
                      (u.type = "MeshStandardMaterial");
                  break;
                case "mapDiffuse":
                  u.map = a(
                    h,
                    r.mapDiffuseRepeat,
                    r.mapDiffuseOffset,
                    r.mapDiffuseWrap,
                    r.mapDiffuseAnisotropy
                  );
                  break;
                case "mapDiffuseRepeat":
                case "mapDiffuseOffset":
                case "mapDiffuseWrap":
                case "mapDiffuseAnisotropy":
                  break;
                case "mapEmissive":
                  u.emissiveMap = a(
                    h,
                    r.mapEmissiveRepeat,
                    r.mapEmissiveOffset,
                    r.mapEmissiveWrap,
                    r.mapEmissiveAnisotropy
                  );
                  break;
                case "mapEmissiveRepeat":
                case "mapEmissiveOffset":
                case "mapEmissiveWrap":
                case "mapEmissiveAnisotropy":
                  break;
                case "mapLight":
                  u.lightMap = a(
                    h,
                    r.mapLightRepeat,
                    r.mapLightOffset,
                    r.mapLightWrap,
                    r.mapLightAnisotropy
                  );
                  break;
                case "mapLightRepeat":
                case "mapLightOffset":
                case "mapLightWrap":
                case "mapLightAnisotropy":
                  break;
                case "mapAO":
                  u.aoMap = a(
                    h,
                    r.mapAORepeat,
                    r.mapAOOffset,
                    r.mapAOWrap,
                    r.mapAOAnisotropy
                  );
                  break;
                case "mapAORepeat":
                case "mapAOOffset":
                case "mapAOWrap":
                case "mapAOAnisotropy":
                  break;
                case "mapBump":
                  u.bumpMap = a(
                    h,
                    r.mapBumpRepeat,
                    r.mapBumpOffset,
                    r.mapBumpWrap,
                    r.mapBumpAnisotropy
                  );
                  break;
                case "mapBumpScale":
                  u.bumpScale = h;
                  break;
                case "mapBumpRepeat":
                case "mapBumpOffset":
                case "mapBumpWrap":
                case "mapBumpAnisotropy":
                  break;
                case "mapNormal":
                  u.normalMap = a(
                    h,
                    r.mapNormalRepeat,
                    r.mapNormalOffset,
                    r.mapNormalWrap,
                    r.mapNormalAnisotropy
                  );
                  break;
                case "mapNormalFactor":
                  u.normalScale = [h, h];
                  break;
                case "mapNormalRepeat":
                case "mapNormalOffset":
                case "mapNormalWrap":
                case "mapNormalAnisotropy":
                  break;
                case "mapSpecular":
                  u.specularMap = a(
                    h,
                    r.mapSpecularRepeat,
                    r.mapSpecularOffset,
                    r.mapSpecularWrap,
                    r.mapSpecularAnisotropy
                  );
                  break;
                case "mapSpecularRepeat":
                case "mapSpecularOffset":
                case "mapSpecularWrap":
                case "mapSpecularAnisotropy":
                  break;
                case "mapMetalness":
                  u.metalnessMap = a(
                    h,
                    r.mapMetalnessRepeat,
                    r.mapMetalnessOffset,
                    r.mapMetalnessWrap,
                    r.mapMetalnessAnisotropy
                  );
                  break;
                case "mapMetalnessRepeat":
                case "mapMetalnessOffset":
                case "mapMetalnessWrap":
                case "mapMetalnessAnisotropy":
                  break;
                case "mapRoughness":
                  u.roughnessMap = a(
                    h,
                    r.mapRoughnessRepeat,
                    r.mapRoughnessOffset,
                    r.mapRoughnessWrap,
                    r.mapRoughnessAnisotropy
                  );
                  break;
                case "mapRoughnessRepeat":
                case "mapRoughnessOffset":
                case "mapRoughnessWrap":
                case "mapRoughnessAnisotropy":
                  break;
                case "mapAlpha":
                  u.alphaMap = a(
                    h,
                    r.mapAlphaRepeat,
                    r.mapAlphaOffset,
                    r.mapAlphaWrap,
                    r.mapAlphaAnisotropy
                  );
                  break;
                case "mapAlphaRepeat":
                case "mapAlphaOffset":
                case "mapAlphaWrap":
                case "mapAlphaAnisotropy":
                  break;
                case "flipSided":
                  u.side = 1;
                  break;
                case "doubleSided":
                  u.side = 2;
                  break;
                case "transparency":
                  console.warn(
                    "THREE.Loader.createMaterial: transparency has been renamed to opacity"
                  ),
                    (u.opacity = h);
                  break;
                case "depthTest":
                case "depthWrite":
                case "colorWrite":
                case "opacity":
                case "reflectivity":
                case "transparent":
                case "visible":
                case "wireframe":
                  u[l] = h;
                  break;
                case "vertexColors":
                  !0 === h && (u.vertexColors = 2),
                    "face" === h && (u.vertexColors = 1);
                  break;
                default:
                  console.error(
                    "THREE.Loader.createMaterial: Unsupported",
                    l,
                    h
                  );
              }
            }
            return (
              "MeshBasicMaterial" === u.type && delete u.emissive,
              "MeshPhongMaterial" !== u.type && delete u.specular,
              1 > u.opacity && (u.transparent = !0),
              i.setTextures(c),
              i.parse(u)
            );
          };
        })(),
      }),
      Object.assign(dr.prototype, {
        load: function (e, t, n, i) {
          var r = this,
            s =
              this.texturePath && "string" == typeof this.texturePath
                ? this.texturePath
                : hr.prototype.extractUrlBase(e),
            o = new Mi(this.manager);
          o.setWithCredentials(this.withCredentials),
            o.load(
              e,
              function (n) {
                n = JSON.parse(n);
                var i = n.metadata;
                if (void 0 !== i && ((i = i.type), void 0 !== i)) {
                  if ("object" === i.toLowerCase())
                    return void console.error(
                      "THREE.JSONLoader: " +
                        e +
                        " should be loaded with THREE.ObjectLoader instead."
                    );
                  if ("scene" === i.toLowerCase())
                    return void console.error(
                      "THREE.JSONLoader: " +
                        e +
                        " should be loaded with THREE.SceneLoader instead."
                    );
                }
                (n = r.parse(n, s)), t(n.geometry, n.materials);
              },
              n,
              i
            );
        },
        setTexturePath: function (e) {
          this.texturePath = e;
        },
        parse: (function () {
          return function (e, t) {
            void 0 !== e.data && (e = e.data),
              (e.scale = void 0 !== e.scale ? 1 / e.scale : 1);
            var i,
              s,
              o,
              a = new dt(),
              c = e,
              u = c.faces,
              h = c.vertices,
              d = c.normals,
              p = c.colors,
              f = c.scale,
              m = 0;
            if (void 0 !== c.uvs) {
              for (i = 0; i < c.uvs.length; i++) c.uvs[i].length && m++;
              for (i = 0; m > i; i++) a.faceVertexUvs[i] = [];
            }
            var g = 0;
            for (o = h.length; o > g; )
              (i = new l()),
                (i.x = h[g++] * f),
                (i.y = h[g++] * f),
                (i.z = h[g++] * f),
                a.vertices.push(i);
            for (g = 0, o = u.length; o > g; ) {
              h = u[g++];
              var v = 1 & h,
                _ = 2 & h;
              i = 8 & h;
              var y = 16 & h,
                b = 32 & h;
              if (((f = 64 & h), (h &= 128), v)) {
                (v = new ht()),
                  (v.a = u[g]),
                  (v.b = u[g + 1]),
                  (v.c = u[g + 3]);
                var w = new ht();
                if (
                  ((w.a = u[g + 1]),
                  (w.b = u[g + 2]),
                  (w.c = u[g + 3]),
                  (g += 4),
                  _ &&
                    ((_ = u[g++]),
                    (v.materialIndex = _),
                    (w.materialIndex = _)),
                  (_ = a.faces.length),
                  i)
                )
                  for (i = 0; m > i; i++) {
                    var x = c.uvs[i];
                    for (
                      a.faceVertexUvs[i][_] = [],
                        a.faceVertexUvs[i][_ + 1] = [],
                        s = 0;
                      4 > s;
                      s++
                    ) {
                      var C = u[g++],
                        T = x[2 * C];
                      (C = x[2 * C + 1]),
                        (T = new n(T, C)),
                        2 !== s && a.faceVertexUvs[i][_].push(T),
                        0 !== s && a.faceVertexUvs[i][_ + 1].push(T);
                    }
                  }
                if (
                  (y &&
                    ((y = 3 * u[g++]),
                    v.normal.set(d[y++], d[y++], d[y]),
                    w.normal.copy(v.normal)),
                  b)
                )
                  for (i = 0; 4 > i; i++)
                    (y = 3 * u[g++]),
                      (b = new l(d[y++], d[y++], d[y])),
                      2 !== i && v.vertexNormals.push(b),
                      0 !== i && w.vertexNormals.push(b);
                if (
                  (f &&
                    ((f = u[g++]),
                    (f = p[f]),
                    v.color.setHex(f),
                    w.color.setHex(f)),
                  h)
                )
                  for (i = 0; 4 > i; i++)
                    (f = u[g++]),
                      (f = p[f]),
                      2 !== i && v.vertexColors.push(new z(f)),
                      0 !== i && w.vertexColors.push(new z(f));
                a.faces.push(v), a.faces.push(w);
              } else {
                if (
                  ((v = new ht()),
                  (v.a = u[g++]),
                  (v.b = u[g++]),
                  (v.c = u[g++]),
                  _ && ((_ = u[g++]), (v.materialIndex = _)),
                  (_ = a.faces.length),
                  i)
                )
                  for (i = 0; m > i; i++)
                    for (
                      x = c.uvs[i], a.faceVertexUvs[i][_] = [], s = 0;
                      3 > s;
                      s++
                    )
                      (C = u[g++]),
                        (T = x[2 * C]),
                        (C = x[2 * C + 1]),
                        (T = new n(T, C)),
                        a.faceVertexUvs[i][_].push(T);
                if (
                  (y && ((y = 3 * u[g++]), v.normal.set(d[y++], d[y++], d[y])),
                  b)
                )
                  for (i = 0; 3 > i; i++)
                    (y = 3 * u[g++]),
                      (b = new l(d[y++], d[y++], d[y])),
                      v.vertexNormals.push(b);
                if ((f && ((f = u[g++]), v.color.setHex(p[f])), h))
                  for (i = 0; 3 > i; i++)
                    (f = u[g++]), v.vertexColors.push(new z(p[f]));
                a.faces.push(v);
              }
            }
            if (
              ((c = e),
              (g =
                void 0 !== c.influencesPerVertex ? c.influencesPerVertex : 2),
              c.skinWeights)
            )
              for (o = 0, u = c.skinWeights.length; u > o; o += g)
                a.skinWeights.push(
                  new r(
                    c.skinWeights[o],
                    g > 1 ? c.skinWeights[o + 1] : 0,
                    g > 2 ? c.skinWeights[o + 2] : 0,
                    g > 3 ? c.skinWeights[o + 3] : 0
                  )
                );
            if (c.skinIndices)
              for (o = 0, u = c.skinIndices.length; u > o; o += g)
                a.skinIndices.push(
                  new r(
                    c.skinIndices[o],
                    g > 1 ? c.skinIndices[o + 1] : 0,
                    g > 2 ? c.skinIndices[o + 2] : 0,
                    g > 3 ? c.skinIndices[o + 3] : 0
                  )
                );
            if (
              ((a.bones = c.bones),
              a.bones &&
                0 < a.bones.length &&
                (a.skinWeights.length !== a.skinIndices.length ||
                  a.skinIndices.length !== a.vertices.length) &&
                console.warn(
                  "When skinning, number of vertices (" +
                    a.vertices.length +
                    "), skinIndices (" +
                    a.skinIndices.length +
                    "), and skinWeights (" +
                    a.skinWeights.length +
                    ") should match."
                ),
              (o = e),
              (u = o.scale),
              void 0 !== o.morphTargets)
            )
              for (c = 0, g = o.morphTargets.length; g > c; c++)
                for (
                  a.morphTargets[c] = {},
                    a.morphTargets[c].name = o.morphTargets[c].name,
                    a.morphTargets[c].vertices = [],
                    d = a.morphTargets[c].vertices,
                    p = o.morphTargets[c].vertices,
                    m = 0,
                    h = p.length;
                  h > m;
                  m += 3
                )
                  (f = new l()),
                    (f.x = p[m] * u),
                    (f.y = p[m + 1] * u),
                    (f.z = p[m + 2] * u),
                    d.push(f);
            if (void 0 !== o.morphColors && 0 < o.morphColors.length)
              for (
                console.warn(
                  'THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'
                ),
                  u = a.faces,
                  o = o.morphColors[0].colors,
                  c = 0,
                  g = u.length;
                g > c;
                c++
              )
                u[c].color.fromArray(o, 3 * c);
            for (
              o = e,
                c = [],
                g = [],
                void 0 !== o.animation && g.push(o.animation),
                void 0 !== o.animations &&
                  (o.animations.length
                    ? (g = g.concat(o.animations))
                    : g.push(o.animations)),
                o = 0;
              o < g.length;
              o++
            )
              (u = lr.parseAnimation(g[o], a.bones)) && c.push(u);
            return (
              a.morphTargets &&
                ((g = lr.CreateClipsFromMorphTargetSequences(
                  a.morphTargets,
                  10
                )),
                (c = c.concat(g))),
              0 < c.length && (a.animations = c),
              a.computeFaceNormals(),
              a.computeBoundingSphere(),
              void 0 === e.materials || 0 === e.materials.length
                ? { geometry: a }
                : ((e = hr.prototype.initMaterials(
                    e.materials,
                    t,
                    this.crossOrigin
                  )),
                  { geometry: a, materials: e })
            );
          };
        })(),
      }),
      Object.assign(pr.prototype, {
        load: function (e, t, n, i) {
          "" === this.texturePath &&
            (this.texturePath = e.substring(0, e.lastIndexOf("/") + 1));
          var r = this;
          new Mi(r.manager).load(
            e,
            function (n) {
              var s = null;
              try {
                s = JSON.parse(n);
              } catch (o) {
                return (
                  void 0 !== i && i(o),
                  void console.error(
                    "THREE:ObjectLoader: Can't parse " + e + ".",
                    o.message
                  )
                );
              }
              (n = s.metadata),
                void 0 === n ||
                void 0 === n.type ||
                "geometry" === n.type.toLowerCase()
                  ? console.error(
                      "THREE.ObjectLoader: Can't load " +
                        e +
                        ". Use THREE.JSONLoader instead."
                    )
                  : r.parse(s, t);
            },
            n,
            i
          );
        },
        setTexturePath: function (e) {
          this.texturePath = e;
        },
        setCrossOrigin: function (e) {
          this.crossOrigin = e;
        },
        parse: function (e, t) {
          var n = this.parseGeometries(e.geometries),
            i = this.parseImages(e.images, function () {
              void 0 !== t && t(r);
            }),
            i = this.parseTextures(e.textures, i),
            i = this.parseMaterials(e.materials, i),
            r = this.parseObject(e.object, n, i);
          return (
            e.animations && (r.animations = this.parseAnimations(e.animations)),
            (void 0 !== e.images && 0 !== e.images.length) ||
              void 0 === t ||
              t(r),
            r
          );
        },
        parseGeometries: function (e) {
          var t = {};
          if (void 0 !== e)
            for (
              var n = new dr(), i = new ur(), r = 0, s = e.length;
              s > r;
              r++
            ) {
              var o = e[r];
              switch (o.type) {
                case "PlaneGeometry":
                case "PlaneBufferGeometry":
                  var a = new Vs[o.type](
                    o.width,
                    o.height,
                    o.widthSegments,
                    o.heightSegments
                  );
                  break;
                case "BoxGeometry":
                case "BoxBufferGeometry":
                case "CubeGeometry":
                  a = new Vs[o.type](
                    o.width,
                    o.height,
                    o.depth,
                    o.widthSegments,
                    o.heightSegments,
                    o.depthSegments
                  );
                  break;
                case "CircleGeometry":
                case "CircleBufferGeometry":
                  a = new Vs[o.type](
                    o.radius,
                    o.segments,
                    o.thetaStart,
                    o.thetaLength
                  );
                  break;
                case "CylinderGeometry":
                case "CylinderBufferGeometry":
                  a = new Vs[o.type](
                    o.radiusTop,
                    o.radiusBottom,
                    o.height,
                    o.radialSegments,
                    o.heightSegments,
                    o.openEnded,
                    o.thetaStart,
                    o.thetaLength
                  );
                  break;
                case "ConeGeometry":
                case "ConeBufferGeometry":
                  a = new Vs[o.type](
                    o.radius,
                    o.height,
                    o.radialSegments,
                    o.heightSegments,
                    o.openEnded,
                    o.thetaStart,
                    o.thetaLength
                  );
                  break;
                case "SphereGeometry":
                case "SphereBufferGeometry":
                  a = new Vs[o.type](
                    o.radius,
                    o.widthSegments,
                    o.heightSegments,
                    o.phiStart,
                    o.phiLength,
                    o.thetaStart,
                    o.thetaLength
                  );
                  break;
                case "DodecahedronGeometry":
                case "IcosahedronGeometry":
                case "OctahedronGeometry":
                case "TetrahedronGeometry":
                  a = new Vs[o.type](o.radius, o.detail);
                  break;
                case "RingGeometry":
                case "RingBufferGeometry":
                  a = new Vs[o.type](
                    o.innerRadius,
                    o.outerRadius,
                    o.thetaSegments,
                    o.phiSegments,
                    o.thetaStart,
                    o.thetaLength
                  );
                  break;
                case "TorusGeometry":
                case "TorusBufferGeometry":
                  a = new Vs[o.type](
                    o.radius,
                    o.tube,
                    o.radialSegments,
                    o.tubularSegments,
                    o.arc
                  );
                  break;
                case "TorusKnotGeometry":
                case "TorusKnotBufferGeometry":
                  a = new Vs[o.type](
                    o.radius,
                    o.tube,
                    o.tubularSegments,
                    o.radialSegments,
                    o.p,
                    o.q
                  );
                  break;
                case "LatheGeometry":
                case "LatheBufferGeometry":
                  a = new Vs[o.type](
                    o.points,
                    o.segments,
                    o.phiStart,
                    o.phiLength
                  );
                  break;
                case "BufferGeometry":
                  a = i.parse(o);
                  break;
                case "Geometry":
                  a = n.parse(o, this.texturePath).geometry;
                  break;
                default:
                  console.warn(
                    'THREE.ObjectLoader: Unsupported geometry type "' +
                      o.type +
                      '"'
                  );
                  continue;
              }
              (a.uuid = o.uuid),
                void 0 !== o.name && (a.name = o.name),
                (t[o.uuid] = a);
            }
          return t;
        },
        parseMaterials: function (e, t) {
          var n = {};
          if (void 0 !== e) {
            var i = new cr();
            i.setTextures(t), (t = 0);
            for (var r = e.length; r > t; t++) {
              var s = e[t];
              if ("MultiMaterial" === s.type) {
                for (var o = [], a = 0; a < s.materials.length; a++)
                  o.push(i.parse(s.materials[a]));
                n[s.uuid] = o;
              } else n[s.uuid] = i.parse(s);
            }
          }
          return n;
        },
        parseAnimations: function (e) {
          for (var t = [], n = 0; n < e.length; n++) {
            var i = lr.parse(e[n]);
            t.push(i);
          }
          return t;
        },
        parseImages: function (e, t) {
          function n(e) {
            return (
              i.manager.itemStart(e),
              s.load(
                e,
                function () {
                  i.manager.itemEnd(e);
                },
                void 0,
                function () {
                  i.manager.itemEnd(e), i.manager.itemError(e);
                }
              )
            );
          }
          var i = this,
            r = {};
          if (void 0 !== e && 0 < e.length) {
            t = new Di(t);
            var s = new Ni(t);
            s.setCrossOrigin(this.crossOrigin), (t = 0);
            for (var o = e.length; o > t; t++) {
              var a = e[t],
                l = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(a.url)
                  ? a.url
                  : i.texturePath + a.url;
              r[a.uuid] = n(l);
            }
          }
          return r;
        },
        parseTextures: function (e, t) {
          function n(e, t) {
            return "number" == typeof e
              ? e
              : (console.warn(
                  "THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",
                  e
                ),
                t[e]);
          }
          var r = {};
          if (void 0 !== e)
            for (var s = 0, o = e.length; o > s; s++) {
              var a = e[s];
              void 0 === a.image &&
                console.warn(
                  'THREE.ObjectLoader: No "image" specified for',
                  a.uuid
                ),
                void 0 === t[a.image] &&
                  console.warn("THREE.ObjectLoader: Undefined image", a.image);
              var l = new i(t[a.image]);
              (l.needsUpdate = !0),
                (l.uuid = a.uuid),
                void 0 !== a.name && (l.name = a.name),
                void 0 !== a.mapping && (l.mapping = n(a.mapping, Zs)),
                void 0 !== a.offset && l.offset.fromArray(a.offset),
                void 0 !== a.repeat && l.repeat.fromArray(a.repeat),
                void 0 !== a.wrap &&
                  ((l.wrapS = n(a.wrap[0], eo)), (l.wrapT = n(a.wrap[1], eo))),
                void 0 !== a.minFilter && (l.minFilter = n(a.minFilter, to)),
                void 0 !== a.magFilter && (l.magFilter = n(a.magFilter, to)),
                void 0 !== a.anisotropy && (l.anisotropy = a.anisotropy),
                void 0 !== a.flipY && (l.flipY = a.flipY),
                (r[a.uuid] = l);
            }
          return r;
        },
        parseObject: (function () {
          var e = new c();
          return function (t, n, i) {
            function r(e) {
              return (
                void 0 === n[e] &&
                  console.warn("THREE.ObjectLoader: Undefined geometry", e),
                n[e]
              );
            }
            function s(e) {
              if (void 0 !== e) {
                if (Array.isArray(e)) {
                  for (var t = [], n = 0, r = e.length; r > n; n++) {
                    var s = e[n];
                    void 0 === i[s] &&
                      console.warn("THREE.ObjectLoader: Undefined material", s),
                      t.push(i[s]);
                  }
                  return t;
                }
                return (
                  void 0 === i[e] &&
                    console.warn("THREE.ObjectLoader: Undefined material", e),
                  i[e]
                );
              }
            }
            switch (t.type) {
              case "Scene":
                var o = new wn();
                void 0 !== t.background &&
                  Number.isInteger(t.background) &&
                  (o.background = new z(t.background)),
                  void 0 !== t.fog &&
                    ("Fog" === t.fog.type
                      ? (o.fog = new bn(t.fog.color, t.fog.near, t.fog.far))
                      : "FogExp2" === t.fog.type &&
                        (o.fog = new yn(t.fog.color, t.fog.density)));
                break;
              case "PerspectiveCamera":
                (o = new ut(t.fov, t.aspect, t.near, t.far)),
                  void 0 !== t.focus && (o.focus = t.focus),
                  void 0 !== t.zoom && (o.zoom = t.zoom),
                  void 0 !== t.filmGauge && (o.filmGauge = t.filmGauge),
                  void 0 !== t.filmOffset && (o.filmOffset = t.filmOffset),
                  void 0 !== t.view && (o.view = Object.assign({}, t.view));
                break;
              case "OrthographicCamera":
                o = new ct(t.left, t.right, t.top, t.bottom, t.near, t.far);
                break;
              case "AmbientLight":
                o = new qi(t.color, t.intensity);
                break;
              case "DirectionalLight":
                o = new Vi(t.color, t.intensity);
                break;
              case "PointLight":
                o = new Wi(t.color, t.intensity, t.distance, t.decay);
                break;
              case "RectAreaLight":
                o = new Xi(t.color, t.intensity, t.width, t.height);
                break;
              case "SpotLight":
                o = new zi(
                  t.color,
                  t.intensity,
                  t.distance,
                  t.angle,
                  t.penumbra,
                  t.decay
                );
                break;
              case "HemisphereLight":
                o = new ji(t.color, t.groundColor, t.intensity);
                break;
              case "SkinnedMesh":
                console.warn(
                  "THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet."
                );
              case "Mesh":
                o = r(t.geometry);
                var a = s(t.material);
                o = o.bones && 0 < o.bones.length ? new Pn(o, a) : new Rt(o, a);
                break;
              case "LOD":
                o = new Sn();
                break;
              case "Line":
                o = new An(r(t.geometry), s(t.material), t.mode);
                break;
              case "LineLoop":
                o = new Dn(r(t.geometry), s(t.material));
                break;
              case "LineSegments":
                o = new On(r(t.geometry), s(t.material));
                break;
              case "PointCloud":
              case "Points":
                o = new Rn(r(t.geometry), s(t.material));
                break;
              case "Sprite":
                o = new Tn(s(t.material));
                break;
              case "Group":
                o = new Ln();
                break;
              default:
                o = new at();
            }
            if (
              ((o.uuid = t.uuid),
              void 0 !== t.name && (o.name = t.name),
              void 0 !== t.matrix
                ? (e.fromArray(t.matrix),
                  e.decompose(o.position, o.quaternion, o.scale))
                : (void 0 !== t.position && o.position.fromArray(t.position),
                  void 0 !== t.rotation && o.rotation.fromArray(t.rotation),
                  void 0 !== t.quaternion &&
                    o.quaternion.fromArray(t.quaternion),
                  void 0 !== t.scale && o.scale.fromArray(t.scale)),
              void 0 !== t.castShadow && (o.castShadow = t.castShadow),
              void 0 !== t.receiveShadow && (o.receiveShadow = t.receiveShadow),
              t.shadow &&
                (void 0 !== t.shadow.bias && (o.shadow.bias = t.shadow.bias),
                void 0 !== t.shadow.radius &&
                  (o.shadow.radius = t.shadow.radius),
                void 0 !== t.shadow.mapSize &&
                  o.shadow.mapSize.fromArray(t.shadow.mapSize),
                void 0 !== t.shadow.camera &&
                  (o.shadow.camera = this.parseObject(t.shadow.camera))),
              void 0 !== t.visible && (o.visible = t.visible),
              void 0 !== t.userData && (o.userData = t.userData),
              void 0 !== t.children)
            )
              for (var a = t.children, l = 0; l < a.length; l++)
                o.add(this.parseObject(a[l], n, i));
            if ("LOD" === t.type)
              for (t = t.levels, a = 0; a < t.length; a++) {
                var l = t[a],
                  c = o.getObjectByProperty("uuid", l.object);
                void 0 !== c && o.addLevel(c, l.distance);
              }
            return o;
          };
        })(),
      });
    var Zs = {
        UVMapping: 300,
        CubeReflectionMapping: 301,
        CubeRefractionMapping: 302,
        EquirectangularReflectionMapping: 303,
        EquirectangularRefractionMapping: 304,
        SphericalReflectionMapping: 305,
        CubeUVReflectionMapping: 306,
        CubeUVRefractionMapping: 307,
      },
      eo = {
        RepeatWrapping: 1e3,
        ClampToEdgeWrapping: 1001,
        MirroredRepeatWrapping: 1002,
      },
      to = {
        NearestFilter: 1003,
        NearestMipMapNearestFilter: 1004,
        NearestMipMapLinearFilter: 1005,
        LinearFilter: 1006,
        LinearMipMapNearestFilter: 1007,
        LinearMipMapLinearFilter: 1008,
      };
    Object.assign(vr.prototype, {
      getPoint: function () {
        return console.warn("THREE.Curve: .getPoint() not implemented."), null;
      },
      getPointAt: function (e) {
        return (e = this.getUtoTmapping(e)), this.getPoint(e);
      },
      getPoints: function (e) {
        void 0 === e && (e = 5);
        for (var t = [], n = 0; e >= n; n++) t.push(this.getPoint(n / e));
        return t;
      },
      getSpacedPoints: function (e) {
        void 0 === e && (e = 5);
        for (var t = [], n = 0; e >= n; n++) t.push(this.getPointAt(n / e));
        return t;
      },
      getLength: function () {
        var e = this.getLengths();
        return e[e.length - 1];
      },
      getLengths: function (e) {
        if (
          (void 0 === e && (e = this.arcLengthDivisions),
          this.cacheArcLengths &&
            this.cacheArcLengths.length === e + 1 &&
            !this.needsUpdate)
        )
          return this.cacheArcLengths;
        this.needsUpdate = !1;
        var t,
          n = [],
          i = this.getPoint(0),
          r = 0;
        for (n.push(0), t = 1; e >= t; t++) {
          var s = this.getPoint(t / e);
          (r += s.distanceTo(i)), n.push(r), (i = s);
        }
        return (this.cacheArcLengths = n);
      },
      updateArcLengths: function () {
        (this.needsUpdate = !0), this.getLengths();
      },
      getUtoTmapping: function (e, t) {
        var n = this.getLengths(),
          i = n.length;
        t = t ? t : e * n[i - 1];
        for (var r, s = 0, o = i - 1; o >= s; )
          if (((e = Math.floor(s + (o - s) / 2)), (r = n[e] - t), 0 > r))
            s = e + 1;
          else {
            if (!(r > 0)) {
              o = e;
              break;
            }
            o = e - 1;
          }
        return (
          (e = o),
          n[e] === t
            ? e / (i - 1)
            : ((s = n[e]), (e + (t - s) / (n[e + 1] - s)) / (i - 1))
        );
      },
      getTangent: function (e) {
        var t = e - 1e-4;
        return (
          (e += 1e-4),
          0 > t && (t = 0),
          e > 1 && (e = 1),
          (t = this.getPoint(t)),
          this.getPoint(e).clone().sub(t).normalize()
        );
      },
      getTangentAt: function (e) {
        return (e = this.getUtoTmapping(e)), this.getTangent(e);
      },
      computeFrenetFrames: function (e, t) {
        var n,
          i = new l(),
          r = [],
          s = [],
          o = [],
          a = new l(),
          u = new c();
        for (n = 0; e >= n; n++) {
          var h = n / e;
          (r[n] = this.getTangentAt(h)), r[n].normalize();
        }
        (s[0] = new l()),
          (o[0] = new l()),
          (n = Number.MAX_VALUE),
          (h = Math.abs(r[0].x));
        var d = Math.abs(r[0].y),
          p = Math.abs(r[0].z);
        for (
          n >= h && ((n = h), i.set(1, 0, 0)),
            n >= d && ((n = d), i.set(0, 1, 0)),
            n >= p && i.set(0, 0, 1),
            a.crossVectors(r[0], i).normalize(),
            s[0].crossVectors(r[0], a),
            o[0].crossVectors(r[0], s[0]),
            n = 1;
          e >= n;
          n++
        )
          (s[n] = s[n - 1].clone()),
            (o[n] = o[n - 1].clone()),
            a.crossVectors(r[n - 1], r[n]),
            a.length() > Number.EPSILON &&
              (a.normalize(),
              (i = Math.acos(ks.clamp(r[n - 1].dot(r[n]), -1, 1))),
              s[n].applyMatrix4(u.makeRotationAxis(a, i))),
            o[n].crossVectors(r[n], s[n]);
        if (!0 === t)
          for (
            i = Math.acos(ks.clamp(s[0].dot(s[e]), -1, 1)),
              i /= e,
              0 < r[0].dot(a.crossVectors(s[0], s[e])) && (i = -i),
              n = 1;
            e >= n;
            n++
          )
            s[n].applyMatrix4(u.makeRotationAxis(r[n], i * n)),
              o[n].crossVectors(r[n], s[n]);
        return { tangents: r, normals: s, binormals: o };
      },
    }),
      (_r.prototype = Object.create(vr.prototype)),
      (_r.prototype.constructor = _r),
      (_r.prototype.isLineCurve = !0),
      (_r.prototype.getPoint = function (e) {
        if (1 === e) return this.v2.clone();
        var t = this.v2.clone().sub(this.v1);
        return t.multiplyScalar(e).add(this.v1), t;
      }),
      (_r.prototype.getPointAt = function (e) {
        return this.getPoint(e);
      }),
      (_r.prototype.getTangent = function () {
        return this.v2.clone().sub(this.v1).normalize();
      }),
      (yr.prototype = Object.assign(Object.create(vr.prototype), {
        constructor: yr,
        add: function (e) {
          this.curves.push(e);
        },
        closePath: function () {
          var e = this.curves[0].getPoint(0),
            t = this.curves[this.curves.length - 1].getPoint(1);
          e.equals(t) || this.curves.push(new _r(t, e));
        },
        getPoint: function (e) {
          var t = e * this.getLength(),
            n = this.getCurveLengths();
          for (e = 0; e < n.length; ) {
            if (n[e] >= t)
              return (
                (t = n[e] - t),
                (e = this.curves[e]),
                (n = e.getLength()),
                e.getPointAt(0 === n ? 0 : 1 - t / n)
              );
            e++;
          }
          return null;
        },
        getLength: function () {
          var e = this.getCurveLengths();
          return e[e.length - 1];
        },
        updateArcLengths: function () {
          (this.needsUpdate = !0),
            (this.cacheLengths = null),
            this.getCurveLengths();
        },
        getCurveLengths: function () {
          if (
            this.cacheLengths &&
            this.cacheLengths.length === this.curves.length
          )
            return this.cacheLengths;
          for (var e = [], t = 0, n = 0, i = this.curves.length; i > n; n++)
            (t += this.curves[n].getLength()), e.push(t);
          return (this.cacheLengths = e);
        },
        getSpacedPoints: function (e) {
          void 0 === e && (e = 40);
          for (var t = [], n = 0; e >= n; n++) t.push(this.getPoint(n / e));
          return this.autoClose && t.push(t[0]), t;
        },
        getPoints: function (e) {
          e = e || 12;
          for (var t, n = [], i = 0, r = this.curves; i < r.length; i++)
            for (
              var s = r[i],
                s = s.getPoints(
                  s && s.isEllipseCurve
                    ? 2 * e
                    : s && s.isLineCurve
                    ? 1
                    : s && s.isSplineCurve
                    ? e * s.points.length
                    : e
                ),
                o = 0;
              o < s.length;
              o++
            ) {
              var a = s[o];
              (t && t.equals(a)) || (n.push(a), (t = a));
            }
          return (
            this.autoClose &&
              1 < n.length &&
              !n[n.length - 1].equals(n[0]) &&
              n.push(n[0]),
            n
          );
        },
        createPointsGeometry: function (e) {
          return (e = this.getPoints(e)), this.createGeometry(e);
        },
        createSpacedPointsGeometry: function (e) {
          return (e = this.getSpacedPoints(e)), this.createGeometry(e);
        },
        createGeometry: function (e) {
          for (var t = new dt(), n = 0, i = e.length; i > n; n++) {
            var r = e[n];
            t.vertices.push(new l(r.x, r.y, r.z || 0));
          }
          return t;
        },
      })),
      (br.prototype = Object.create(vr.prototype)),
      (br.prototype.constructor = br),
      (br.prototype.isEllipseCurve = !0),
      (br.prototype.getPoint = function (e) {
        for (
          var t = 2 * Math.PI,
            i = this.aEndAngle - this.aStartAngle,
            r = Math.abs(i) < Number.EPSILON;
          0 > i;

        )
          i += t;
        for (; i > t; ) i -= t;
        i < Number.EPSILON && (i = r ? 0 : t),
          !0 !== this.aClockwise || r || (i = i === t ? -t : i - t),
          (t = this.aStartAngle + e * i),
          (e = this.aX + this.xRadius * Math.cos(t));
        var s = this.aY + this.yRadius * Math.sin(t);
        return (
          0 !== this.aRotation &&
            ((t = Math.cos(this.aRotation)),
            (i = Math.sin(this.aRotation)),
            (r = e - this.aX),
            (s -= this.aY),
            (e = r * t - s * i + this.aX),
            (s = r * i + s * t + this.aY)),
          new n(e, s)
        );
      }),
      (wr.prototype = Object.create(vr.prototype)),
      (wr.prototype.constructor = wr),
      (wr.prototype.isSplineCurve = !0),
      (wr.prototype.getPoint = function (e) {
        var t = this.points,
          i = (t.length - 1) * e;
        e = Math.floor(i);
        var i = i - e,
          r = t[0 === e ? e : e - 1],
          s = t[e],
          o = t[e > t.length - 2 ? t.length - 1 : e + 1],
          t = t[e > t.length - 3 ? t.length - 1 : e + 2];
        return new n(fr(i, r.x, s.x, o.x, t.x), fr(i, r.y, s.y, o.y, t.y));
      }),
      (xr.prototype = Object.create(vr.prototype)),
      (xr.prototype.constructor = xr),
      (xr.prototype.getPoint = function (e) {
        var t = this.v0,
          i = this.v1,
          r = this.v2,
          s = this.v3;
        return new n(gr(e, t.x, i.x, r.x, s.x), gr(e, t.y, i.y, r.y, s.y));
      }),
      (Cr.prototype = Object.create(vr.prototype)),
      (Cr.prototype.constructor = Cr),
      (Cr.prototype.getPoint = function (e) {
        var t = this.v0,
          i = this.v1,
          r = this.v2;
        return new n(mr(e, t.x, i.x, r.x), mr(e, t.y, i.y, r.y));
      });
    var no = Object.assign(Object.create(yr.prototype), {
      fromPoints: function (e) {
        this.moveTo(e[0].x, e[0].y);
        for (var t = 1, n = e.length; n > t; t++) this.lineTo(e[t].x, e[t].y);
      },
      moveTo: function (e, t) {
        this.currentPoint.set(e, t);
      },
      lineTo: function (e, t) {
        var i = new _r(this.currentPoint.clone(), new n(e, t));
        this.curves.push(i), this.currentPoint.set(e, t);
      },
      quadraticCurveTo: function (e, t, i, r) {
        (e = new Cr(this.currentPoint.clone(), new n(e, t), new n(i, r))),
          this.curves.push(e),
          this.currentPoint.set(i, r);
      },
      bezierCurveTo: function (e, t, i, r, s, o) {
        (e = new xr(
          this.currentPoint.clone(),
          new n(e, t),
          new n(i, r),
          new n(s, o)
        )),
          this.curves.push(e),
          this.currentPoint.set(s, o);
      },
      splineThru: function (e) {
        var t = [this.currentPoint.clone()].concat(e),
          t = new wr(t);
        this.curves.push(t), this.currentPoint.copy(e[e.length - 1]);
      },
      arc: function (e, t, n, i, r, s) {
        this.absarc(
          e + this.currentPoint.x,
          t + this.currentPoint.y,
          n,
          i,
          r,
          s
        );
      },
      absarc: function (e, t, n, i, r, s) {
        this.absellipse(e, t, n, n, i, r, s);
      },
      ellipse: function (e, t, n, i, r, s, o, a) {
        this.absellipse(
          e + this.currentPoint.x,
          t + this.currentPoint.y,
          n,
          i,
          r,
          s,
          o,
          a
        );
      },
      absellipse: function (e, t, n, i, r, s, o, a) {
        (e = new br(e, t, n, i, r, s, o, a)),
          0 < this.curves.length &&
            ((t = e.getPoint(0)),
            t.equals(this.currentPoint) || this.lineTo(t.x, t.y)),
          this.curves.push(e),
          (e = e.getPoint(1)),
          this.currentPoint.copy(e);
      },
    });
    (Tr.prototype = no),
      (no.constructor = Tr),
      (Sr.prototype = Object.assign(Object.create(no), {
        constructor: Sr,
        getPointsHoles: function (e) {
          for (var t = [], n = 0, i = this.holes.length; i > n; n++)
            t[n] = this.holes[n].getPoints(e);
          return t;
        },
        extractAllPoints: function (e) {
          return { shape: this.getPoints(e), holes: this.getPointsHoles(e) };
        },
        extractPoints: function (e) {
          return this.extractAllPoints(e);
        },
      })),
      Object.assign(Er.prototype, {
        moveTo: function (e, t) {
          (this.currentPath = new Tr()),
            this.subPaths.push(this.currentPath),
            this.currentPath.moveTo(e, t);
        },
        lineTo: function (e, t) {
          this.currentPath.lineTo(e, t);
        },
        quadraticCurveTo: function (e, t, n, i) {
          this.currentPath.quadraticCurveTo(e, t, n, i);
        },
        bezierCurveTo: function (e, t, n, i, r, s) {
          this.currentPath.bezierCurveTo(e, t, n, i, r, s);
        },
        splineThru: function (e) {
          this.currentPath.splineThru(e);
        },
        toShapes: function (e, t) {
          function n(e) {
            for (var t = [], n = 0, i = e.length; i > n; n++) {
              var r = e[n],
                s = new Sr();
              (s.curves = r.curves), t.push(s);
            }
            return t;
          }
          function i(e, t) {
            for (var n = t.length, i = !1, r = n - 1, s = 0; n > s; r = s++) {
              var o = t[r],
                a = t[s],
                l = a.x - o.x,
                c = a.y - o.y;
              if (Math.abs(c) > Number.EPSILON) {
                if (
                  (0 > c && ((o = t[s]), (l = -l), (a = t[r]), (c = -c)),
                  !(e.y < o.y || e.y > a.y))
                )
                  if (e.y === o.y) {
                    if (e.x === o.x) return !0;
                  } else {
                    if (((r = c * (e.x - o.x) - l * (e.y - o.y)), 0 === r))
                      return !0;
                    0 > r || (i = !i);
                  }
              } else if (
                e.y === o.y &&
                ((a.x <= e.x && e.x <= o.x) || (o.x <= e.x && e.x <= a.x))
              )
                return !0;
            }
            return i;
          }
          var r = Gs.isClockWise,
            s = this.subPaths;
          if (0 === s.length) return [];
          if (!0 === t) return n(s);
          if (((t = []), 1 === s.length)) {
            var o = s[0],
              a = new Sr();
            return (a.curves = o.curves), t.push(a), t;
          }
          var l = !r(s[0].getPoints()),
            l = e ? !l : l;
          a = [];
          var c = [],
            u = [],
            h = 0;
          (c[h] = void 0), (u[h] = []);
          for (var d = 0, p = s.length; p > d; d++) {
            o = s[d];
            var f = o.getPoints(),
              m = r(f);
            (m = e ? !m : m)
              ? (!l && c[h] && h++,
                (c[h] = { s: new Sr(), p: f }),
                (c[h].s.curves = o.curves),
                l && h++,
                (u[h] = []))
              : u[h].push({ h: o, p: f[0] });
          }
          if (!c[0]) return n(s);
          if (1 < c.length) {
            for (d = !1, e = [], r = 0, s = c.length; s > r; r++) a[r] = [];
            for (r = 0, s = c.length; s > r; r++)
              for (o = u[r], m = 0; m < o.length; m++) {
                for (l = o[m], h = !0, f = 0; f < c.length; f++)
                  i(l.p, c[f].p) &&
                    (r !== f && e.push({ froms: r, tos: f, hole: m }),
                    h ? ((h = !1), a[f].push(l)) : (d = !0));
                h && a[r].push(l);
              }
            0 < e.length && (d || (u = a));
          }
          for (d = 0, r = c.length; r > d; d++)
            for (
              a = c[d].s, t.push(a), e = u[d], s = 0, o = e.length;
              o > s;
              s++
            )
              a.holes.push(e[s].h);
          return t;
        },
      }),
      Object.assign(kr.prototype, {
        isFont: !0,
        generateShapes: function (e, t, n) {
          void 0 === t && (t = 100), void 0 === n && (n = 4);
          var i = this.data;
          e = String(e).split("");
          var r = t / i.resolution,
            s =
              (i.boundingBox.yMax - i.boundingBox.yMin + i.underlineThickness) *
              r,
            o = 0,
            a = 0;
          t = [];
          for (var l = 0; l < e.length; l++) {
            var c = e[l];
            if ("\n" === c) (o = 0), (a -= s);
            else {
              var u,
                h = r,
                d = o,
                p = a;
              if ((c = i.glyphs[c] || i.glyphs["?"])) {
                var f = new Er(),
                  m = [];
                if (c.o)
                  for (
                    var g =
                        c._cachedOutline || (c._cachedOutline = c.o.split(" ")),
                      v = 0,
                      _ = g.length;
                    _ > v;

                  )
                    switch (g[v++]) {
                      case "m":
                        var y = g[v++] * h + d,
                          b = g[v++] * h + p;
                        f.moveTo(y, b);
                        break;
                      case "l":
                        (y = g[v++] * h + d),
                          (b = g[v++] * h + p),
                          f.lineTo(y, b);
                        break;
                      case "q":
                        var w = g[v++] * h + d,
                          x = g[v++] * h + p,
                          C = g[v++] * h + d,
                          T = g[v++] * h + p;
                        if (
                          (f.quadraticCurveTo(C, T, w, x),
                          (u = m[m.length - 1]))
                        ) {
                          var S = u.x;
                          u = u.y;
                          for (var E = 1; n >= E; E++) {
                            var k = E / n;
                            mr(k, S, C, w), mr(k, u, T, x);
                          }
                        }
                        break;
                      case "b":
                        if (
                          ((w = g[v++] * h + d),
                          (x = g[v++] * h + p),
                          (C = g[v++] * h + d),
                          (T = g[v++] * h + p),
                          (y = g[v++] * h + d),
                          (b = g[v++] * h + p),
                          f.bezierCurveTo(C, T, y, b, w, x),
                          (u = m[m.length - 1]))
                        )
                          for (S = u.x, u = u.y, E = 1; n >= E; E++)
                            (k = E / n), gr(k, S, C, y, w), gr(k, u, T, b, x);
                    }
                h = { offsetX: c.ha * h, path: f };
              } else h = void 0;
              (o += h.offsetX), t.push(h.path);
            }
          }
          for (n = [], i = 0, e = t.length; e > i; i++)
            Array.prototype.push.apply(n, t[i].toShapes());
          return n;
        },
      }),
      Object.assign(Pr.prototype, {
        load: function (e, t, n, i) {
          var r = this;
          new Mi(this.manager).load(
            e,
            function (e) {
              try {
                var n = JSON.parse(e);
              } catch (i) {
                console.warn(
                  "THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."
                ),
                  (n = JSON.parse(e.substring(65, e.length - 2)));
              }
              (e = r.parse(n)), t && t(e);
            },
            n,
            i
          );
        },
        parse: function (e) {
          return new kr(e);
        },
      });
    var io,
      ro = {
        getContext: function () {
          return (
            void 0 === io &&
              (io = new (window.AudioContext || window.webkitAudioContext)()),
            io
          );
        },
        setContext: function (e) {
          io = e;
        },
      };
    Object.assign(Ir.prototype, {
      load: function (e, t, n, i) {
        var r = new Mi(this.manager);
        r.setResponseType("arraybuffer"),
          r.load(
            e,
            function (e) {
              ro.getContext().decodeAudioData(e, function (e) {
                t(e);
              });
            },
            n,
            i
          );
      },
    }),
      Object.assign(Ar.prototype, {
        update: (function () {
          var e,
            t,
            n,
            i,
            r,
            s,
            o,
            a,
            l = new c(),
            u = new c();
          return function (c) {
            if (
              e !== this ||
              t !== c.focus ||
              n !== c.fov ||
              i !== c.aspect * this.aspect ||
              r !== c.near ||
              s !== c.far ||
              o !== c.zoom ||
              a !== this.eyeSep
            ) {
              (e = this),
                (t = c.focus),
                (n = c.fov),
                (i = c.aspect * this.aspect),
                (r = c.near),
                (s = c.far),
                (o = c.zoom);
              var h = c.projectionMatrix.clone();
              a = this.eyeSep / 2;
              var d = (a * r) / t,
                p = (r * Math.tan(ks.DEG2RAD * n * 0.5)) / o;
              (u.elements[12] = -a), (l.elements[12] = a);
              var f = -p * i + d,
                m = p * i + d;
              (h.elements[0] = (2 * r) / (m - f)),
                (h.elements[8] = (m + f) / (m - f)),
                this.cameraL.projectionMatrix.copy(h),
                (f = -p * i - d),
                (m = p * i - d),
                (h.elements[0] = (2 * r) / (m - f)),
                (h.elements[8] = (m + f) / (m - f)),
                this.cameraR.projectionMatrix.copy(h);
            }
            this.cameraL.matrixWorld.copy(c.matrixWorld).multiply(u),
              this.cameraR.matrixWorld.copy(c.matrixWorld).multiply(l);
          };
        })(),
      }),
      (Or.prototype = Object.create(at.prototype)),
      (Or.prototype.constructor = Or),
      (Dr.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Dr,
        getInput: function () {
          return this.gain;
        },
        removeFilter: function () {
          null !== this.filter &&
            (this.gain.disconnect(this.filter),
            this.filter.disconnect(this.context.destination),
            this.gain.connect(this.context.destination),
            (this.filter = null));
        },
        getFilter: function () {
          return this.filter;
        },
        setFilter: function (e) {
          null !== this.filter
            ? (this.gain.disconnect(this.filter),
              this.filter.disconnect(this.context.destination))
            : this.gain.disconnect(this.context.destination),
            (this.filter = e),
            this.gain.connect(this.filter),
            this.filter.connect(this.context.destination);
        },
        getMasterVolume: function () {
          return this.gain.gain.value;
        },
        setMasterVolume: function (e) {
          this.gain.gain.value = e;
        },
        updateMatrixWorld: (function () {
          var e = new l(),
            t = new a(),
            n = new l(),
            i = new l();
          return function (r) {
            at.prototype.updateMatrixWorld.call(this, r),
              (r = this.context.listener);
            var s = this.up;
            this.matrixWorld.decompose(e, t, n),
              i.set(0, 0, -1).applyQuaternion(t),
              r.positionX
                ? (r.positionX.setValueAtTime(e.x, this.context.currentTime),
                  r.positionY.setValueAtTime(e.y, this.context.currentTime),
                  r.positionZ.setValueAtTime(e.z, this.context.currentTime),
                  r.forwardX.setValueAtTime(i.x, this.context.currentTime),
                  r.forwardY.setValueAtTime(i.y, this.context.currentTime),
                  r.forwardZ.setValueAtTime(i.z, this.context.currentTime),
                  r.upX.setValueAtTime(s.x, this.context.currentTime),
                  r.upY.setValueAtTime(s.y, this.context.currentTime),
                  r.upZ.setValueAtTime(s.z, this.context.currentTime))
                : (r.setPosition(e.x, e.y, e.z),
                  r.setOrientation(i.x, i.y, i.z, s.x, s.y, s.z));
          };
        })(),
      })),
      (Mr.prototype = Object.assign(Object.create(at.prototype), {
        constructor: Mr,
        getOutput: function () {
          return this.gain;
        },
        setNodeSource: function (e) {
          return (
            (this.hasPlaybackControl = !1),
            (this.sourceType = "audioNode"),
            (this.source = e),
            this.connect(),
            this
          );
        },
        setBuffer: function (e) {
          return (
            (this.buffer = e),
            (this.sourceType = "buffer"),
            this.autoplay && this.play(),
            this
          );
        },
        play: function () {
          if (!0 === this.isPlaying)
            console.warn("THREE.Audio: Audio is already playing.");
          else {
            if (!1 !== this.hasPlaybackControl) {
              var e = this.context.createBufferSource();
              return (
                (e.buffer = this.buffer),
                (e.loop = this.loop),
                (e.onended = this.onEnded.bind(this)),
                e.playbackRate.setValueAtTime(
                  this.playbackRate,
                  this.startTime
                ),
                e.start(0, this.startTime),
                (this.isPlaying = !0),
                (this.source = e),
                this.connect()
              );
            }
            console.warn("THREE.Audio: this Audio has no playback control.");
          }
        },
        pause: function () {
          return !1 !== this.hasPlaybackControl
            ? (this.source.stop(),
              (this.startTime = this.context.currentTime),
              (this.isPlaying = !1),
              this)
            : void console.warn(
                "THREE.Audio: this Audio has no playback control."
              );
        },
        stop: function () {
          return !1 !== this.hasPlaybackControl
            ? (this.source.stop(),
              (this.startTime = 0),
              (this.isPlaying = !1),
              this)
            : void console.warn(
                "THREE.Audio: this Audio has no playback control."
              );
        },
        connect: function () {
          if (0 < this.filters.length) {
            this.source.connect(this.filters[0]);
            for (var e = 1, t = this.filters.length; t > e; e++)
              this.filters[e - 1].connect(this.filters[e]);
            this.filters[this.filters.length - 1].connect(this.getOutput());
          } else this.source.connect(this.getOutput());
          return this;
        },
        disconnect: function () {
          if (0 < this.filters.length) {
            this.source.disconnect(this.filters[0]);
            for (var e = 1, t = this.filters.length; t > e; e++)
              this.filters[e - 1].disconnect(this.filters[e]);
            this.filters[this.filters.length - 1].disconnect(this.getOutput());
          } else this.source.disconnect(this.getOutput());
          return this;
        },
        getFilters: function () {
          return this.filters;
        },
        setFilters: function (e) {
          return (
            e || (e = []),
            !0 === this.isPlaying
              ? (this.disconnect(), (this.filters = e), this.connect())
              : (this.filters = e),
            this
          );
        },
        getFilter: function () {
          return this.getFilters()[0];
        },
        setFilter: function (e) {
          return this.setFilters(e ? [e] : []);
        },
        setPlaybackRate: function (e) {
          return !1 !== this.hasPlaybackControl
            ? ((this.playbackRate = e),
              !0 === this.isPlaying &&
                this.source.playbackRate.setValueAtTime(
                  this.playbackRate,
                  this.context.currentTime
                ),
              this)
            : void console.warn(
                "THREE.Audio: this Audio has no playback control."
              );
        },
        getPlaybackRate: function () {
          return this.playbackRate;
        },
        onEnded: function () {
          this.isPlaying = !1;
        },
        getLoop: function () {
          return !1 === this.hasPlaybackControl
            ? (console.warn("THREE.Audio: this Audio has no playback control."),
              !1)
            : this.loop;
        },
        setLoop: function (e) {
          return !1 !== this.hasPlaybackControl
            ? ((this.loop = e),
              !0 === this.isPlaying && (this.source.loop = this.loop),
              this)
            : void console.warn(
                "THREE.Audio: this Audio has no playback control."
              );
        },
        getVolume: function () {
          return this.gain.gain.value;
        },
        setVolume: function (e) {
          return (this.gain.gain.value = e), this;
        },
      })),
      (Rr.prototype = Object.assign(Object.create(Mr.prototype), {
        constructor: Rr,
        getOutput: function () {
          return this.panner;
        },
        getRefDistance: function () {
          return this.panner.refDistance;
        },
        setRefDistance: function (e) {
          this.panner.refDistance = e;
        },
        getRolloffFactor: function () {
          return this.panner.rolloffFactor;
        },
        setRolloffFactor: function (e) {
          this.panner.rolloffFactor = e;
        },
        getDistanceModel: function () {
          return this.panner.distanceModel;
        },
        setDistanceModel: function (e) {
          this.panner.distanceModel = e;
        },
        getMaxDistance: function () {
          return this.panner.maxDistance;
        },
        setMaxDistance: function (e) {
          this.panner.maxDistance = e;
        },
        updateMatrixWorld: (function () {
          var e = new l();
          return function (t) {
            at.prototype.updateMatrixWorld.call(this, t),
              e.setFromMatrixPosition(this.matrixWorld),
              this.panner.setPosition(e.x, e.y, e.z);
          };
        })(),
      })),
      Object.assign(Lr.prototype, {
        getFrequencyData: function () {
          return this.analyser.getByteFrequencyData(this.data), this.data;
        },
        getAverageFrequency: function () {
          for (var e = 0, t = this.getFrequencyData(), n = 0; n < t.length; n++)
            e += t[n];
          return e / t.length;
        },
      }),
      Object.assign(Nr.prototype, {
        accumulate: function (e, t) {
          var n = this.buffer,
            i = this.valueSize;
          e = e * i + i;
          var r = this.cumulativeWeight;
          if (0 === r) {
            for (r = 0; r !== i; ++r) n[e + r] = n[r];
            r = t;
          } else (r += t), this._mixBufferRegion(n, e, 0, t / r, i);
          this.cumulativeWeight = r;
        },
        apply: function (e) {
          var t = this.valueSize,
            n = this.buffer;
          e = e * t + t;
          var i = this.cumulativeWeight,
            r = this.binding;
          (this.cumulativeWeight = 0),
            1 > i && this._mixBufferRegion(n, e, 3 * t, 1 - i, t);
          for (var i = t, s = t + t; i !== s; ++i)
            if (n[i] !== n[i + t]) {
              r.setValue(n, e);
              break;
            }
        },
        saveOriginalState: function () {
          var e = this.buffer,
            t = this.valueSize,
            n = 3 * t;
          this.binding.getValue(e, n);
          for (var i = t; i !== n; ++i) e[i] = e[n + (i % t)];
          this.cumulativeWeight = 0;
        },
        restoreOriginalState: function () {
          this.binding.setValue(this.buffer, 3 * this.valueSize);
        },
        _select: function (e, t, n, i, r) {
          if (i >= 0.5) for (i = 0; i !== r; ++i) e[t + i] = e[n + i];
        },
        _slerp: function (e, t, n, i) {
          a.slerpFlat(e, t, e, t, e, n, i);
        },
        _lerp: function (e, t, n, i, r) {
          for (var s = 1 - i, o = 0; o !== r; ++o) {
            var a = t + o;
            e[a] = e[a] * s + e[n + o] * i;
          }
        },
      }),
      Object.assign(Ur.prototype, {
        getValue: function (e, t) {
          this.bind();
          var n = this._bindings[this._targetGroup.nCachedObjects_];
          void 0 !== n && n.getValue(e, t);
        },
        setValue: function (e, t) {
          for (
            var n = this._bindings,
              i = this._targetGroup.nCachedObjects_,
              r = n.length;
            i !== r;
            ++i
          )
            n[i].setValue(e, t);
        },
        bind: function () {
          for (
            var e = this._bindings,
              t = this._targetGroup.nCachedObjects_,
              n = e.length;
            t !== n;
            ++t
          )
            e[t].bind();
        },
        unbind: function () {
          for (
            var e = this._bindings,
              t = this._targetGroup.nCachedObjects_,
              n = e.length;
            t !== n;
            ++t
          )
            e[t].unbind();
        },
      }),
      Object.assign(Br, {
        Composite: Ur,
        create: function (e, t, n) {
          return e && e.isAnimationObjectGroup
            ? new Br.Composite(e, t, n)
            : new Br(e, t, n);
        },
        sanitizeNodeName: function (e) {
          return e.replace(/\s/g, "_").replace(/[^\w-]/g, "");
        },
        parseTrackName: (function () {
          var e = new RegExp(
              "^" +
                /((?:[\w-]+[\/:])*)/.source +
                /([\w-\.]+)?/.source +
                /(?:\.([\w-]+)(?:\[(.+)\])?)?/.source +
                /\.([\w-]+)(?:\[(.+)\])?/.source +
                "$"
            ),
            t = ["material", "materials", "bones"];
          return function (n) {
            var i = e.exec(n);
            if (!i)
              throw Error("PropertyBinding: Cannot parse trackName: " + n);
            var i = {
                nodeName: i[2],
                objectName: i[3],
                objectIndex: i[4],
                propertyName: i[5],
                propertyIndex: i[6],
              },
              r = i.nodeName && i.nodeName.lastIndexOf(".");
            if (void 0 !== r && -1 !== r) {
              var s = i.nodeName.substring(r + 1);
              -1 !== t.indexOf(s) &&
                ((i.nodeName = i.nodeName.substring(0, r)), (i.objectName = s));
            }
            if (null === i.propertyName || 0 === i.propertyName.length)
              throw Error(
                "PropertyBinding: can not parse propertyName from trackName: " +
                  n
              );
            return i;
          };
        })(),
        findNode: function (e, t) {
          if (
            !t ||
            "" === t ||
            "root" === t ||
            "." === t ||
            -1 === t ||
            t === e.name ||
            t === e.uuid
          )
            return e;
          if (e.skeleton) {
            var n = (function (e) {
              for (var n = 0; n < e.bones.length; n++) {
                var i = e.bones[n];
                if (i.name === t) return i;
              }
              return null;
            })(e.skeleton);
            if (n) return n;
          }
          if (e.children) {
            var i = function (e) {
              for (var n = 0; n < e.length; n++) {
                var r = e[n];
                if (r.name === t || r.uuid === t || (r = i(r.children)))
                  return r;
              }
              return null;
            };
            if ((e = i(e.children))) return e;
          }
          return null;
        },
      }),
      Object.assign(Br.prototype, {
        _getValue_unavailable: function () {},
        _setValue_unavailable: function () {},
        BindingType: {
          Direct: 0,
          EntireArray: 1,
          ArrayElement: 2,
          HasFromToArray: 3,
        },
        Versioning: { None: 0, NeedsUpdate: 1, MatrixWorldNeedsUpdate: 2 },
        GetterByBindingType: [
          function (e, t) {
            e[t] = this.node[this.propertyName];
          },
          function (e, t) {
            for (
              var n = this.resolvedProperty, i = 0, r = n.length;
              i !== r;
              ++i
            )
              e[t++] = n[i];
          },
          function (e, t) {
            e[t] = this.resolvedProperty[this.propertyIndex];
          },
          function (e, t) {
            this.resolvedProperty.toArray(e, t);
          },
        ],
        SetterByBindingTypeAndVersioning: [
          [
            function (e, t) {
              this.node[this.propertyName] = e[t];
            },
            function (e, t) {
              (this.node[this.propertyName] = e[t]),
                (this.targetObject.needsUpdate = !0);
            },
            function (e, t) {
              (this.node[this.propertyName] = e[t]),
                (this.targetObject.matrixWorldNeedsUpdate = !0);
            },
          ],
          [
            function (e, t) {
              for (
                var n = this.resolvedProperty, i = 0, r = n.length;
                i !== r;
                ++i
              )
                n[i] = e[t++];
            },
            function (e, t) {
              for (
                var n = this.resolvedProperty, i = 0, r = n.length;
                i !== r;
                ++i
              )
                n[i] = e[t++];
              this.targetObject.needsUpdate = !0;
            },
            function (e, t) {
              for (
                var n = this.resolvedProperty, i = 0, r = n.length;
                i !== r;
                ++i
              )
                n[i] = e[t++];
              this.targetObject.matrixWorldNeedsUpdate = !0;
            },
          ],
          [
            function (e, t) {
              this.resolvedProperty[this.propertyIndex] = e[t];
            },
            function (e, t) {
              (this.resolvedProperty[this.propertyIndex] = e[t]),
                (this.targetObject.needsUpdate = !0);
            },
            function (e, t) {
              (this.resolvedProperty[this.propertyIndex] = e[t]),
                (this.targetObject.matrixWorldNeedsUpdate = !0);
            },
          ],
          [
            function (e, t) {
              this.resolvedProperty.fromArray(e, t);
            },
            function (e, t) {
              this.resolvedProperty.fromArray(e, t),
                (this.targetObject.needsUpdate = !0);
            },
            function (e, t) {
              this.resolvedProperty.fromArray(e, t),
                (this.targetObject.matrixWorldNeedsUpdate = !0);
            },
          ],
        ],
        getValue: function (e, t) {
          this.bind(), this.getValue(e, t);
        },
        setValue: function (e, t) {
          this.bind(), this.setValue(e, t);
        },
        bind: function () {
          var e = this.node,
            t = this.parsedPath,
            n = t.objectName,
            i = t.propertyName,
            r = t.propertyIndex;
          if (
            (e ||
              (this.node = e =
                Br.findNode(this.rootNode, t.nodeName) || this.rootNode),
            (this.getValue = this._getValue_unavailable),
            (this.setValue = this._setValue_unavailable),
            e)
          ) {
            if (n) {
              var s = t.objectIndex;
              switch (n) {
                case "materials":
                  if (!e.material)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to material as node does not have a material.",
                      this
                    );
                  if (!e.material.materials)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",
                      this
                    );
                  e = e.material.materials;
                  break;
                case "bones":
                  if (!e.skeleton)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",
                      this
                    );
                  for (e = e.skeleton.bones, n = 0; n < e.length; n++)
                    if (e[n].name === s) {
                      s = n;
                      break;
                    }
                  break;
                default:
                  if (void 0 === e[n])
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to objectName of node undefined.",
                      this
                    );
                  e = e[n];
              }
              if (void 0 !== s) {
                if (void 0 === e[s])
                  return void console.error(
                    "THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",
                    this,
                    e
                  );
                e = e[s];
              }
            }
            if (((s = e[i]), void 0 === s))
              console.error(
                "THREE.PropertyBinding: Trying to update property for track: " +
                  t.nodeName +
                  "." +
                  i +
                  " but it wasn't found.",
                e
              );
            else {
              if (
                ((t = this.Versioning.None),
                void 0 !== e.needsUpdate
                  ? ((t = this.Versioning.NeedsUpdate), (this.targetObject = e))
                  : void 0 !== e.matrixWorldNeedsUpdate &&
                    ((t = this.Versioning.MatrixWorldNeedsUpdate),
                    (this.targetObject = e)),
                (n = this.BindingType.Direct),
                void 0 !== r)
              ) {
                if ("morphTargetInfluences" === i) {
                  if (!e.geometry)
                    return void console.error(
                      "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",
                      this
                    );
                  if (e.geometry.isBufferGeometry) {
                    if (!e.geometry.morphAttributes)
                      return void console.error(
                        "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",
                        this
                      );
                    for (
                      n = 0;
                      n < this.node.geometry.morphAttributes.position.length;
                      n++
                    )
                      if (e.geometry.morphAttributes.position[n].name === r) {
                        r = n;
                        break;
                      }
                  } else {
                    if (!e.geometry.morphTargets)
                      return void console.error(
                        "THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",
                        this
                      );
                    for (n = 0; n < this.node.geometry.morphTargets.length; n++)
                      if (e.geometry.morphTargets[n].name === r) {
                        r = n;
                        break;
                      }
                  }
                }
                (n = this.BindingType.ArrayElement),
                  (this.resolvedProperty = s),
                  (this.propertyIndex = r);
              } else
                void 0 !== s.fromArray && void 0 !== s.toArray
                  ? ((n = this.BindingType.HasFromToArray),
                    (this.resolvedProperty = s))
                  : Array.isArray(s)
                  ? ((n = this.BindingType.EntireArray),
                    (this.resolvedProperty = s))
                  : (this.propertyName = i);
              (this.getValue = this.GetterByBindingType[n]),
                (this.setValue = this.SetterByBindingTypeAndVersioning[n][t]);
            }
          } else
            console.error(
              "THREE.PropertyBinding: Trying to update node for track: " +
                this.path +
                " but it wasn't found."
            );
        },
        unbind: function () {
          (this.node = null),
            (this.getValue = this._getValue_unbound),
            (this.setValue = this._setValue_unbound);
        },
      }),
      Object.assign(Br.prototype, {
        _getValue_unbound: Br.prototype.getValue,
        _setValue_unbound: Br.prototype.setValue,
      }),
      Object.assign(Fr.prototype, {
        isAnimationObjectGroup: !0,
        add: function () {
          for (
            var e = this._objects,
              t = e.length,
              n = this.nCachedObjects_,
              i = this._indicesByUUID,
              r = this._paths,
              s = this._parsedPaths,
              o = this._bindings,
              a = o.length,
              l = 0,
              c = arguments.length;
            l !== c;
            ++l
          ) {
            var u = arguments[l],
              h = u.uuid,
              d = i[h];
            if (void 0 === d) {
              (d = t++), (i[h] = d), e.push(u);
              for (var h = 0, p = a; h !== p; ++h)
                o[h].push(new Br(u, r[h], s[h]));
            } else if (n > d) {
              var f = --n,
                p = e[f];
              for (
                i[p.uuid] = d, e[d] = p, i[h] = f, e[f] = u, h = 0, p = a;
                h !== p;
                ++h
              ) {
                var m = o[h],
                  g = m[d];
                (m[d] = m[f]),
                  void 0 === g && (g = new Br(u, r[h], s[h])),
                  (m[f] = g);
              }
            } else
              void 0 !== e[d] &&
                console.error(
                  "THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes."
                );
          }
          this.nCachedObjects_ = n;
        },
        remove: function () {
          for (
            var e = this._objects,
              t = this.nCachedObjects_,
              n = this._indicesByUUID,
              i = this._bindings,
              r = i.length,
              s = 0,
              o = arguments.length;
            s !== o;
            ++s
          ) {
            var a = arguments[s],
              l = a.uuid,
              c = n[l];
            if (void 0 !== c && c >= t) {
              var u = t++,
                h = e[u];
              for (
                n[h.uuid] = c, e[c] = h, n[l] = u, e[u] = a, a = 0, l = r;
                a !== l;
                ++a
              ) {
                var h = i[a],
                  d = h[c];
                (h[c] = h[u]), (h[u] = d);
              }
            }
          }
          this.nCachedObjects_ = t;
        },
        uncache: function () {
          for (
            var e,
              t,
              n = this._objects,
              i = n.length,
              r = this.nCachedObjects_,
              s = this._indicesByUUID,
              o = this._bindings,
              a = o.length,
              l = 0,
              c = arguments.length;
            l !== c;
            ++l
          ) {
            t = arguments[l].uuid;
            var u = s[t];
            if (void 0 !== u)
              if ((delete s[t], r > u)) {
                var h = --r,
                  d = n[h];
                (t = --i),
                  (e = n[t]),
                  (s[d.uuid] = u),
                  (n[u] = d),
                  (s[e.uuid] = h),
                  (n[h] = e),
                  n.pop();
                for (var d = 0, p = a; d !== p; ++d) {
                  e = o[d];
                  var f = e[t];
                  (e[u] = e[h]), (e[h] = f), e.pop();
                }
              } else
                for (
                  t = --i,
                    e = n[t],
                    s[e.uuid] = u,
                    n[u] = e,
                    n.pop(),
                    d = 0,
                    p = a;
                  d !== p;
                  ++d
                )
                  (e = o[d]), (e[u] = e[t]), e.pop();
          }
          this.nCachedObjects_ = r;
        },
        subscribe_: function (e, t) {
          var n = this._bindingsIndicesByPath,
            i = n[e],
            r = this._bindings;
          if (void 0 !== i) return r[i];
          var s = this._paths,
            o = this._parsedPaths,
            a = this._objects,
            l = this.nCachedObjects_,
            c = Array(a.length),
            i = r.length;
          for (
            n[e] = i, s.push(e), o.push(t), r.push(c), n = l, i = a.length;
            n !== i;
            ++n
          )
            c[n] = new Br(a[n], e, t);
          return c;
        },
        unsubscribe_: function (e) {
          var t = this._bindingsIndicesByPath,
            n = t[e];
          if (void 0 !== n) {
            var i = this._paths,
              r = this._parsedPaths,
              s = this._bindings,
              o = s.length - 1,
              a = s[o];
            (t[e[o]] = n),
              (s[n] = a),
              s.pop(),
              (r[n] = r[o]),
              r.pop(),
              (i[n] = i[o]),
              i.pop();
          }
        },
      }),
      Object.assign(jr.prototype, {
        play: function () {
          return this._mixer._activateAction(this), this;
        },
        stop: function () {
          return this._mixer._deactivateAction(this), this.reset();
        },
        reset: function () {
          return (
            (this.paused = !1),
            (this.enabled = !0),
            (this.time = 0),
            (this._loopCount = -1),
            (this._startTime = null),
            this.stopFading().stopWarping()
          );
        },
        isRunning: function () {
          return (
            this.enabled &&
            !this.paused &&
            0 !== this.timeScale &&
            null === this._startTime &&
            this._mixer._isActiveAction(this)
          );
        },
        isScheduled: function () {
          return this._mixer._isActiveAction(this);
        },
        startAt: function (e) {
          return (this._startTime = e), this;
        },
        setLoop: function (e, t) {
          return (this.loop = e), (this.repetitions = t), this;
        },
        setEffectiveWeight: function (e) {
          return (
            (this.weight = e),
            (this._effectiveWeight = this.enabled ? e : 0),
            this.stopFading()
          );
        },
        getEffectiveWeight: function () {
          return this._effectiveWeight;
        },
        fadeIn: function (e) {
          return this._scheduleFading(e, 0, 1);
        },
        fadeOut: function (e) {
          return this._scheduleFading(e, 1, 0);
        },
        crossFadeFrom: function (e, t, n) {
          if ((e.fadeOut(t), this.fadeIn(t), n)) {
            n = this._clip.duration;
            var i = e._clip.duration,
              r = n / i;
            e.warp(1, i / n, t), this.warp(r, 1, t);
          }
          return this;
        },
        crossFadeTo: function (e, t, n) {
          return e.crossFadeFrom(this, t, n);
        },
        stopFading: function () {
          var e = this._weightInterpolant;
          return (
            null !== e &&
              ((this._weightInterpolant = null),
              this._mixer._takeBackControlInterpolant(e)),
            this
          );
        },
        setEffectiveTimeScale: function (e) {
          return (
            (this.timeScale = e),
            (this._effectiveTimeScale = this.paused ? 0 : e),
            this.stopWarping()
          );
        },
        getEffectiveTimeScale: function () {
          return this._effectiveTimeScale;
        },
        setDuration: function (e) {
          return (this.timeScale = this._clip.duration / e), this.stopWarping();
        },
        syncWith: function (e) {
          return (
            (this.time = e.time),
            (this.timeScale = e.timeScale),
            this.stopWarping()
          );
        },
        halt: function (e) {
          return this.warp(this._effectiveTimeScale, 0, e);
        },
        warp: function (e, t, n) {
          var i = this._mixer,
            r = i.time,
            s = this._timeScaleInterpolant,
            o = this.timeScale;
          return (
            null === s &&
              (this._timeScaleInterpolant = s = i._lendControlInterpolant()),
            (i = s.parameterPositions),
            (s = s.sampleValues),
            (i[0] = r),
            (i[1] = r + n),
            (s[0] = e / o),
            (s[1] = t / o),
            this
          );
        },
        stopWarping: function () {
          var e = this._timeScaleInterpolant;
          return (
            null !== e &&
              ((this._timeScaleInterpolant = null),
              this._mixer._takeBackControlInterpolant(e)),
            this
          );
        },
        getMixer: function () {
          return this._mixer;
        },
        getClip: function () {
          return this._clip;
        },
        getRoot: function () {
          return this._localRoot || this._mixer._root;
        },
        _update: function (e, t, n, i) {
          if (this.enabled) {
            var r = this._startTime;
            if (null !== r) {
              if (((t = (e - r) * n), 0 > t || 0 === n)) return;
              (this._startTime = null), (t *= n);
            }
            if (
              ((t *= this._updateTimeScale(e)),
              (n = this._updateTime(t)),
              (e = this._updateWeight(e)),
              e > 0)
            ) {
              t = this._interpolants;
              for (
                var r = this._propertyBindings, s = 0, o = t.length;
                s !== o;
                ++s
              )
                t[s].evaluate(n), r[s].accumulate(i, e);
            }
          } else this._updateWeight(e);
        },
        _updateWeight: function (e) {
          var t = 0;
          if (this.enabled) {
            var t = this.weight,
              n = this._weightInterpolant;
            if (null !== n) {
              var i = n.evaluate(e)[0],
                t = t * i;
              e > n.parameterPositions[1] &&
                (this.stopFading(), 0 === i && (this.enabled = !1));
            }
          }
          return (this._effectiveWeight = t);
        },
        _updateTimeScale: function (e) {
          var t = 0;
          if (!this.paused) {
            var t = this.timeScale,
              n = this._timeScaleInterpolant;
            if (null !== n) {
              var i = n.evaluate(e)[0],
                t = t * i;
              e > n.parameterPositions[1] &&
                (this.stopWarping(),
                0 === t ? (this.paused = !0) : (this.timeScale = t));
            }
          }
          return (this._effectiveTimeScale = t);
        },
        _updateTime: function (e) {
          var t = this.time + e;
          if (0 === e) return t;
          var n = this._clip.duration,
            i = this.loop,
            r = this._loopCount;
          if (2200 === i)
            e: {
              if (
                (-1 === r &&
                  ((this._loopCount = 0), this._setEndings(!0, !0, !1)),
                t >= n)
              )
                t = n;
              else {
                if (!(0 > t)) break e;
                t = 0;
              }
              this.clampWhenFinished ? (this.paused = !0) : (this.enabled = !1),
                this._mixer.dispatchEvent({
                  type: "finished",
                  action: this,
                  direction: 0 > e ? -1 : 1,
                });
            }
          else {
            if (
              ((i = 2202 === i),
              -1 === r &&
                (e >= 0
                  ? ((r = 0), this._setEndings(!0, 0 === this.repetitions, i))
                  : this._setEndings(0 === this.repetitions, !0, i)),
              t >= n || 0 > t)
            ) {
              var s = Math.floor(t / n),
                t = t - n * s,
                r = r + Math.abs(s),
                o = this.repetitions - r;
              0 > o
                ? (this.clampWhenFinished
                    ? (this.paused = !0)
                    : (this.enabled = !1),
                  (t = e > 0 ? n : 0),
                  this._mixer.dispatchEvent({
                    type: "finished",
                    action: this,
                    direction: e > 0 ? 1 : -1,
                  }))
                : (0 === o
                    ? ((e = 0 > e), this._setEndings(e, !e, i))
                    : this._setEndings(!1, !1, i),
                  (this._loopCount = r),
                  this._mixer.dispatchEvent({
                    type: "loop",
                    action: this,
                    loopDelta: s,
                  }));
            }
            if (i && 1 === (1 & r)) return (this.time = t), n - t;
          }
          return (this.time = t);
        },
        _setEndings: function (e, t, n) {
          var i = this._interpolantSettings;
          n
            ? ((i.endingStart = 2401), (i.endingEnd = 2401))
            : ((i.endingStart = e
                ? this.zeroSlopeAtStart
                  ? 2401
                  : 2400
                : 2402),
              (i.endingEnd = t ? (this.zeroSlopeAtEnd ? 2401 : 2400) : 2402));
        },
        _scheduleFading: function (e, t, n) {
          var i = this._mixer,
            r = i.time,
            s = this._weightInterpolant;
          return (
            null === s &&
              (this._weightInterpolant = s = i._lendControlInterpolant()),
            (i = s.parameterPositions),
            (s = s.sampleValues),
            (i[0] = r),
            (s[0] = t),
            (i[1] = r + e),
            (s[1] = n),
            this
          );
        },
      }),
      Object.assign(Hr.prototype, t.prototype, {
        _bindAction: function (e, t) {
          var n = e._localRoot || this._root,
            i = e._clip.tracks,
            r = i.length,
            s = e._propertyBindings;
          e = e._interpolants;
          var o = n.uuid,
            a = this._bindingsByRootAndName,
            l = a[o];
          for (void 0 === l && ((l = {}), (a[o] = l)), a = 0; a !== r; ++a) {
            var c = i[a],
              u = c.name,
              h = l[u];
            if (void 0 === h) {
              if (((h = s[a]), void 0 !== h)) {
                null === h._cacheIndex &&
                  (++h.referenceCount, this._addInactiveBinding(h, o, u));
                continue;
              }
              (h = new Nr(
                Br.create(n, u, t && t._propertyBindings[a].binding.parsedPath),
                c.ValueTypeName,
                c.getValueSize()
              )),
                ++h.referenceCount,
                this._addInactiveBinding(h, o, u);
            }
            (s[a] = h), (e[a].resultBuffer = h.buffer);
          }
        },
        _activateAction: function (e) {
          if (!this._isActiveAction(e)) {
            if (null === e._cacheIndex) {
              var t = (e._localRoot || this._root).uuid,
                n = e._clip.uuid,
                i = this._actionsByClip[n];
              this._bindAction(e, i && i.knownActions[0]),
                this._addInactiveAction(e, n, t);
            }
            for (t = e._propertyBindings, n = 0, i = t.length; n !== i; ++n) {
              var r = t[n];
              0 === r.useCount++ &&
                (this._lendBinding(r), r.saveOriginalState());
            }
            this._lendAction(e);
          }
        },
        _deactivateAction: function (e) {
          if (this._isActiveAction(e)) {
            for (
              var t = e._propertyBindings, n = 0, i = t.length;
              n !== i;
              ++n
            ) {
              var r = t[n];
              0 === --r.useCount &&
                (r.restoreOriginalState(), this._takeBackBinding(r));
            }
            this._takeBackAction(e);
          }
        },
        _initMemoryManager: function () {
          (this._actions = []),
            (this._nActiveActions = 0),
            (this._actionsByClip = {}),
            (this._bindings = []),
            (this._nActiveBindings = 0),
            (this._bindingsByRootAndName = {}),
            (this._controlInterpolants = []),
            (this._nActiveControlInterpolants = 0);
          var e = this;
          this.stats = {
            actions: {
              get total() {
                return e._actions.length;
              },
              get inUse() {
                return e._nActiveActions;
              },
            },
            bindings: {
              get total() {
                return e._bindings.length;
              },
              get inUse() {
                return e._nActiveBindings;
              },
            },
            controlInterpolants: {
              get total() {
                return e._controlInterpolants.length;
              },
              get inUse() {
                return e._nActiveControlInterpolants;
              },
            },
          };
        },
        _isActiveAction: function (e) {
          return (e = e._cacheIndex), null !== e && e < this._nActiveActions;
        },
        _addInactiveAction: function (e, t, n) {
          var i = this._actions,
            r = this._actionsByClip,
            s = r[t];
          void 0 === s
            ? ((s = { knownActions: [e], actionByRoot: {} }),
              (e._byClipCacheIndex = 0),
              (r[t] = s))
            : ((t = s.knownActions),
              (e._byClipCacheIndex = t.length),
              t.push(e)),
            (e._cacheIndex = i.length),
            i.push(e),
            (s.actionByRoot[n] = e);
        },
        _removeInactiveAction: function (e) {
          var t = this._actions,
            n = t[t.length - 1],
            i = e._cacheIndex;
          (n._cacheIndex = i), (t[i] = n), t.pop(), (e._cacheIndex = null);
          var t = e._clip.uuid,
            n = this._actionsByClip,
            i = n[t],
            r = i.knownActions,
            s = r[r.length - 1],
            o = e._byClipCacheIndex;
          (s._byClipCacheIndex = o),
            (r[o] = s),
            r.pop(),
            (e._byClipCacheIndex = null),
            delete i.actionByRoot[(e._localRoot || this._root).uuid],
            0 === r.length && delete n[t],
            this._removeInactiveBindingsForAction(e);
        },
        _removeInactiveBindingsForAction: function (e) {
          e = e._propertyBindings;
          for (var t = 0, n = e.length; t !== n; ++t) {
            var i = e[t];
            0 === --i.referenceCount && this._removeInactiveBinding(i);
          }
        },
        _lendAction: function (e) {
          var t = this._actions,
            n = e._cacheIndex,
            i = this._nActiveActions++,
            r = t[i];
          (e._cacheIndex = i), (t[i] = e), (r._cacheIndex = n), (t[n] = r);
        },
        _takeBackAction: function (e) {
          var t = this._actions,
            n = e._cacheIndex,
            i = --this._nActiveActions,
            r = t[i];
          (e._cacheIndex = i), (t[i] = e), (r._cacheIndex = n), (t[n] = r);
        },
        _addInactiveBinding: function (e, t, n) {
          var i = this._bindingsByRootAndName,
            r = i[t],
            s = this._bindings;
          void 0 === r && ((r = {}), (i[t] = r)),
            (r[n] = e),
            (e._cacheIndex = s.length),
            s.push(e);
        },
        _removeInactiveBinding: function (e) {
          var t = this._bindings,
            n = e.binding,
            i = n.rootNode.uuid,
            n = n.path,
            r = this._bindingsByRootAndName,
            s = r[i],
            o = t[t.length - 1];
          (e = e._cacheIndex),
            (o._cacheIndex = e),
            (t[e] = o),
            t.pop(),
            delete s[n];
          e: {
            for (var a in s) break e;
            delete r[i];
          }
        },
        _lendBinding: function (e) {
          var t = this._bindings,
            n = e._cacheIndex,
            i = this._nActiveBindings++,
            r = t[i];
          (e._cacheIndex = i), (t[i] = e), (r._cacheIndex = n), (t[n] = r);
        },
        _takeBackBinding: function (e) {
          var t = this._bindings,
            n = e._cacheIndex,
            i = --this._nActiveBindings,
            r = t[i];
          (e._cacheIndex = i), (t[i] = e), (r._cacheIndex = n), (t[n] = r);
        },
        _lendControlInterpolant: function () {
          var e = this._controlInterpolants,
            t = this._nActiveControlInterpolants++,
            n = e[t];
          return (
            void 0 === n &&
              ((n = new Ji(
                new Float32Array(2),
                new Float32Array(2),
                1,
                this._controlInterpolantsResultBuffer
              )),
              (n.__cacheIndex = t),
              (e[t] = n)),
            n
          );
        },
        _takeBackControlInterpolant: function (e) {
          var t = this._controlInterpolants,
            n = e.__cacheIndex,
            i = --this._nActiveControlInterpolants,
            r = t[i];
          (e.__cacheIndex = i), (t[i] = e), (r.__cacheIndex = n), (t[n] = r);
        },
        _controlInterpolantsResultBuffer: new Float32Array(1),
        clipAction: function (e, t) {
          var n = t || this._root,
            i = n.uuid,
            n = "string" == typeof e ? lr.findByName(n, e) : e;
          e = null !== n ? n.uuid : e;
          var r = this._actionsByClip[e],
            s = null;
          if (void 0 !== r) {
            if (((s = r.actionByRoot[i]), void 0 !== s)) return s;
            (s = r.knownActions[0]), null === n && (n = s._clip);
          }
          return null === n
            ? null
            : ((t = new jr(this, n, t)),
              this._bindAction(t, s),
              this._addInactiveAction(t, e, i),
              t);
        },
        existingAction: function (e, t) {
          var n = t || this._root;
          return (
            (t = n.uuid),
            (n = "string" == typeof e ? lr.findByName(n, e) : e),
            (e = this._actionsByClip[n ? n.uuid : e]),
            void 0 !== e ? e.actionByRoot[t] || null : null
          );
        },
        stopAllAction: function () {
          for (
            var e = this._actions,
              t = this._nActiveActions,
              n = this._bindings,
              i = this._nActiveBindings,
              r = (this._nActiveBindings = this._nActiveActions = 0);
            r !== t;
            ++r
          )
            e[r].reset();
          for (r = 0; r !== i; ++r) n[r].useCount = 0;
          return this;
        },
        update: function (e) {
          e *= this.timeScale;
          for (
            var t = this._actions,
              n = this._nActiveActions,
              i = (this.time += e),
              r = Math.sign(e),
              s = (this._accuIndex ^= 1),
              o = 0;
            o !== n;
            ++o
          )
            t[o]._update(i, e, r, s);
          for (
            e = this._bindings, t = this._nActiveBindings, o = 0;
            o !== t;
            ++o
          )
            e[o].apply(s);
          return this;
        },
        getRoot: function () {
          return this._root;
        },
        uncacheClip: function (e) {
          var t = this._actions;
          e = e.uuid;
          var n = this._actionsByClip,
            i = n[e];
          if (void 0 !== i) {
            for (var i = i.knownActions, r = 0, s = i.length; r !== s; ++r) {
              var o = i[r];
              this._deactivateAction(o);
              var a = o._cacheIndex,
                l = t[t.length - 1];
              (o._cacheIndex = null),
                (o._byClipCacheIndex = null),
                (l._cacheIndex = a),
                (t[a] = l),
                t.pop(),
                this._removeInactiveBindingsForAction(o);
            }
            delete n[e];
          }
        },
        uncacheRoot: function (e) {
          e = e.uuid;
          var t = this._actionsByClip;
          for (i in t) {
            var n = t[i].actionByRoot[e];
            void 0 !== n &&
              (this._deactivateAction(n), this._removeInactiveAction(n));
          }
          var i = this._bindingsByRootAndName[e];
          if (void 0 !== i)
            for (var r in i)
              (e = i[r]),
                e.restoreOriginalState(),
                this._removeInactiveBinding(e);
        },
        uncacheAction: function (e, t) {
          (e = this.existingAction(e, t)),
            null !== e &&
              (this._deactivateAction(e), this._removeInactiveAction(e));
        },
      }),
      ($r.prototype.clone = function () {
        return new $r(
          void 0 === this.value.clone ? this.value : this.value.clone()
        );
      }),
      (zr.prototype = Object.assign(Object.create(St.prototype), {
        constructor: zr,
        isInstancedBufferGeometry: !0,
        addGroup: function (e, t, n) {
          this.groups.push({ start: e, count: t, materialIndex: n });
        },
        copy: function (e) {
          var t = e.index;
          null !== t && this.setIndex(t.clone());
          var t = e.attributes;
          for (n in t) this.addAttribute(n, t[n].clone());
          e = e.groups;
          var n = 0;
          for (t = e.length; t > n; n++) {
            var i = e[n];
            this.addGroup(i.start, i.count, i.materialIndex);
          }
          return this;
        },
      })),
      Object.defineProperties(Wr.prototype, {
        count: {
          get: function () {
            return this.data.count;
          },
        },
        array: {
          get: function () {
            return this.data.array;
          },
        },
      }),
      Object.assign(Wr.prototype, {
        isInterleavedBufferAttribute: !0,
        setX: function (e, t) {
          return (
            (this.data.array[e * this.data.stride + this.offset] = t), this
          );
        },
        setY: function (e, t) {
          return (
            (this.data.array[e * this.data.stride + this.offset + 1] = t), this
          );
        },
        setZ: function (e, t) {
          return (
            (this.data.array[e * this.data.stride + this.offset + 2] = t), this
          );
        },
        setW: function (e, t) {
          return (
            (this.data.array[e * this.data.stride + this.offset + 3] = t), this
          );
        },
        getX: function (e) {
          return this.data.array[e * this.data.stride + this.offset];
        },
        getY: function (e) {
          return this.data.array[e * this.data.stride + this.offset + 1];
        },
        getZ: function (e) {
          return this.data.array[e * this.data.stride + this.offset + 2];
        },
        getW: function (e) {
          return this.data.array[e * this.data.stride + this.offset + 3];
        },
        setXY: function (e, t, n) {
          return (
            (e = e * this.data.stride + this.offset),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = n),
            this
          );
        },
        setXYZ: function (e, t, n, i) {
          return (
            (e = e * this.data.stride + this.offset),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = n),
            (this.data.array[e + 2] = i),
            this
          );
        },
        setXYZW: function (e, t, n, i, r) {
          return (
            (e = e * this.data.stride + this.offset),
            (this.data.array[e + 0] = t),
            (this.data.array[e + 1] = n),
            (this.data.array[e + 2] = i),
            (this.data.array[e + 3] = r),
            this
          );
        },
      }),
      Object.defineProperty(Gr.prototype, "needsUpdate", {
        set: function (e) {
          !0 === e && this.version++;
        },
      }),
      Object.assign(Gr.prototype, {
        isInterleavedBuffer: !0,
        setArray: function (e) {
          if (Array.isArray(e))
            throw new TypeError(
              "THREE.BufferAttribute: array should be a Typed Array."
            );
          (this.count = void 0 !== e ? e.length / this.stride : 0),
            (this.array = e);
        },
        setDynamic: function (e) {
          return (this.dynamic = e), this;
        },
        copy: function (e) {
          return (
            (this.array = new e.array.constructor(e.array)),
            (this.count = e.count),
            (this.stride = e.stride),
            (this.dynamic = e.dynamic),
            this
          );
        },
        copyAt: function (e, t, n) {
          (e *= this.stride), (n *= t.stride);
          for (var i = 0, r = this.stride; r > i; i++)
            this.array[e + i] = t.array[n + i];
          return this;
        },
        set: function (e, t) {
          return void 0 === t && (t = 0), this.array.set(e, t), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        onUpload: function (e) {
          return (this.onUploadCallback = e), this;
        },
      }),
      (Vr.prototype = Object.assign(Object.create(Gr.prototype), {
        constructor: Vr,
        isInstancedInterleavedBuffer: !0,
        copy: function (e) {
          return (
            Gr.prototype.copy.call(this, e),
            (this.meshPerAttribute = e.meshPerAttribute),
            this
          );
        },
      })),
      (qr.prototype = Object.assign(Object.create(pt.prototype), {
        constructor: qr,
        isInstancedBufferAttribute: !0,
        copy: function (e) {
          return (
            pt.prototype.copy.call(this, e),
            (this.meshPerAttribute = e.meshPerAttribute),
            this
          );
        },
      })),
      Object.assign(Xr.prototype, {
        linePrecision: 1,
        set: function (e, t) {
          this.ray.set(e, t);
        },
        setFromCamera: function (e, t) {
          t && t.isPerspectiveCamera
            ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld),
              this.ray.direction
                .set(e.x, e.y, 0.5)
                .unproject(t)
                .sub(this.ray.origin)
                .normalize())
            : t && t.isOrthographicCamera
            ? (this.ray.origin
                .set(e.x, e.y, (t.near + t.far) / (t.near - t.far))
                .unproject(t),
              this.ray.direction
                .set(0, 0, -1)
                .transformDirection(t.matrixWorld))
            : console.error("THREE.Raycaster: Unsupported camera type.");
        },
        intersectObject: function (e, t) {
          var n = [];
          return Kr(e, this, n, t), n.sort(Yr), n;
        },
        intersectObjects: function (e, t) {
          var n = [];
          if (!1 === Array.isArray(e))
            return (
              console.warn(
                "THREE.Raycaster.intersectObjects: objects is not an Array."
              ),
              n
            );
          for (var i = 0, r = e.length; r > i; i++) Kr(e[i], this, n, t);
          return n.sort(Yr), n;
        },
      }),
      Object.assign(Jr.prototype, {
        start: function () {
          (this.oldTime = this.startTime =
            ("undefined" == typeof performance ? Date : performance).now()),
            (this.elapsedTime = 0),
            (this.running = !0);
        },
        stop: function () {
          this.getElapsedTime(), (this.autoStart = this.running = !1);
        },
        getElapsedTime: function () {
          return this.getDelta(), this.elapsedTime;
        },
        getDelta: function () {
          var e = 0;
          if (this.autoStart && !this.running) return this.start(), 0;
          if (this.running) {
            var t = (
                "undefined" == typeof performance ? Date : performance
              ).now(),
              e = (t - this.oldTime) / 1e3;
            (this.oldTime = t), (this.elapsedTime += e);
          }
          return e;
        },
      }),
      Object.assign(Qr.prototype, {
        set: function (e, t, n) {
          return (this.radius = e), (this.phi = t), (this.theta = n), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return (
            (this.radius = e.radius),
            (this.phi = e.phi),
            (this.theta = e.theta),
            this
          );
        },
        makeSafe: function () {
          return (
            (this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi))),
            this
          );
        },
        setFromVector3: function (e) {
          return (
            (this.radius = e.length()),
            0 === this.radius
              ? (this.phi = this.theta = 0)
              : ((this.theta = Math.atan2(e.x, e.z)),
                (this.phi = Math.acos(ks.clamp(e.y / this.radius, -1, 1)))),
            this
          );
        },
      }),
      Object.assign(Zr.prototype, {
        set: function (e, t, n) {
          return (this.radius = e), (this.theta = t), (this.y = n), this;
        },
        clone: function () {
          return new this.constructor().copy(this);
        },
        copy: function (e) {
          return (
            (this.radius = e.radius),
            (this.theta = e.theta),
            (this.y = e.y),
            this
          );
        },
        setFromVector3: function (e) {
          return (
            (this.radius = Math.sqrt(e.x * e.x + e.z * e.z)),
            (this.theta = Math.atan2(e.x, e.z)),
            (this.y = e.y),
            this
          );
        },
      }),
      (es.prototype = Object.create(at.prototype)),
      (es.prototype.constructor = es),
      (es.prototype.isImmediateRenderObject = !0),
      (ts.prototype = Object.create(On.prototype)),
      (ts.prototype.constructor = ts),
      (ts.prototype.update = (function () {
        var e = new l(),
          t = new l(),
          n = new et();
        return function () {
          var i,
            r = ["a", "b", "c"];
          this.object.updateMatrixWorld(!0),
            n.getNormalMatrix(this.object.matrixWorld);
          var s = this.object.matrixWorld,
            o = this.geometry.attributes.position;
          if ((i = this.object.geometry) && i.isGeometry)
            for (
              var a = i.vertices, l = i.faces, c = (i = 0), u = l.length;
              u > c;
              c++
            )
              for (
                var h = l[c], d = 0, p = h.vertexNormals.length;
                p > d;
                d++
              ) {
                var f = h.vertexNormals[d];
                e.copy(a[h[r[d]]]).applyMatrix4(s),
                  t
                    .copy(f)
                    .applyMatrix3(n)
                    .normalize()
                    .multiplyScalar(this.size)
                    .add(e),
                  o.setXYZ(i, e.x, e.y, e.z),
                  (i += 1),
                  o.setXYZ(i, t.x, t.y, t.z),
                  (i += 1);
              }
          else if (i && i.isBufferGeometry)
            for (
              r = i.attributes.position,
                a = i.attributes.normal,
                d = i = 0,
                p = r.count;
              p > d;
              d++
            )
              e.set(r.getX(d), r.getY(d), r.getZ(d)).applyMatrix4(s),
                t.set(a.getX(d), a.getY(d), a.getZ(d)),
                t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),
                o.setXYZ(i, e.x, e.y, e.z),
                (i += 1),
                o.setXYZ(i, t.x, t.y, t.z),
                (i += 1);
          o.needsUpdate = !0;
        };
      })()),
      (ns.prototype = Object.create(at.prototype)),
      (ns.prototype.constructor = ns),
      (ns.prototype.dispose = function () {
        this.cone.geometry.dispose(), this.cone.material.dispose();
      }),
      (ns.prototype.update = (function () {
        var e = new l(),
          t = new l();
        return function () {
          this.light.updateMatrixWorld();
          var n = this.light.distance ? this.light.distance : 1e3,
            i = n * Math.tan(this.light.angle);
          this.cone.scale.set(i, i, n),
            e.setFromMatrixPosition(this.light.matrixWorld),
            t.setFromMatrixPosition(this.light.target.matrixWorld),
            this.cone.lookAt(t.sub(e)),
            void 0 !== this.color
              ? this.cone.material.color.set(this.color)
              : this.cone.material.color.copy(this.light.color);
        };
      })()),
      (rs.prototype = Object.create(On.prototype)),
      (rs.prototype.constructor = rs),
      (rs.prototype.onBeforeRender = (function () {
        var e = new l(),
          t = new c(),
          n = new c();
        return function () {
          var i = this.bones,
            r = this.geometry,
            s = r.getAttribute("position");
          n.getInverse(this.root.matrixWorld);
          for (var o = 0, a = 0; o < i.length; o++) {
            var l = i[o];
            l.parent &&
              l.parent.isBone &&
              (t.multiplyMatrices(n, l.matrixWorld),
              e.setFromMatrixPosition(t),
              s.setXYZ(a, e.x, e.y, e.z),
              t.multiplyMatrices(n, l.parent.matrixWorld),
              e.setFromMatrixPosition(t),
              s.setXYZ(a + 1, e.x, e.y, e.z),
              (a += 2));
          }
          r.getAttribute("position").needsUpdate = !0;
        };
      })()),
      (ss.prototype = Object.create(Rt.prototype)),
      (ss.prototype.constructor = ss),
      (ss.prototype.dispose = function () {
        this.geometry.dispose(), this.material.dispose();
      }),
      (ss.prototype.update = function () {
        void 0 !== this.color
          ? this.material.color.set(this.color)
          : this.material.color.copy(this.light.color);
      }),
      (os.prototype = Object.create(at.prototype)),
      (os.prototype.constructor = os),
      (os.prototype.dispose = function () {
        this.children[0].geometry.dispose(),
          this.children[0].material.dispose();
      }),
      (os.prototype.update = function () {
        var e = 0.5 * this.light.width,
          t = 0.5 * this.light.height,
          n = this.line.geometry.attributes.position,
          i = n.array;
        (i[0] = e),
          (i[1] = -t),
          (i[2] = 0),
          (i[3] = e),
          (i[4] = t),
          (i[5] = 0),
          (i[6] = -e),
          (i[7] = t),
          (i[8] = 0),
          (i[9] = -e),
          (i[10] = -t),
          (i[11] = 0),
          (i[12] = e),
          (i[13] = -t),
          (i[14] = 0),
          (n.needsUpdate = !0),
          void 0 !== this.color
            ? this.line.material.color.set(this.color)
            : this.line.material.color.copy(this.light.color);
      }),
      (as.prototype = Object.create(at.prototype)),
      (as.prototype.constructor = as),
      (as.prototype.dispose = function () {
        this.children[0].geometry.dispose(),
          this.children[0].material.dispose();
      }),
      (as.prototype.update = (function () {
        var e = new l(),
          t = new z(),
          n = new z();
        return function () {
          var i = this.children[0];
          if (void 0 !== this.color) this.material.color.set(this.color);
          else {
            var r = i.geometry.getAttribute("color");
            t.copy(this.light.color), n.copy(this.light.groundColor);
            for (var s = 0, o = r.count; o > s; s++) {
              var a = o / 2 > s ? t : n;
              r.setXYZ(s, a.r, a.g, a.b);
            }
            r.needsUpdate = !0;
          }
          i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate());
        };
      })()),
      (ls.prototype = Object.create(On.prototype)),
      (ls.prototype.constructor = ls),
      (cs.prototype = Object.create(On.prototype)),
      (cs.prototype.constructor = cs),
      (us.prototype = Object.create(On.prototype)),
      (us.prototype.constructor = us),
      (us.prototype.update = (function () {
        var e = new l(),
          t = new l(),
          n = new et();
        return function () {
          this.object.updateMatrixWorld(!0),
            n.getNormalMatrix(this.object.matrixWorld);
          for (
            var i = this.object.matrixWorld,
              r = this.geometry.attributes.position,
              s = this.object.geometry,
              o = s.vertices,
              s = s.faces,
              a = 0,
              l = 0,
              c = s.length;
            c > l;
            l++
          ) {
            var u = s[l],
              h = u.normal;
            e
              .copy(o[u.a])
              .add(o[u.b])
              .add(o[u.c])
              .divideScalar(3)
              .applyMatrix4(i),
              t
                .copy(h)
                .applyMatrix3(n)
                .normalize()
                .multiplyScalar(this.size)
                .add(e),
              r.setXYZ(a, e.x, e.y, e.z),
              (a += 1),
              r.setXYZ(a, t.x, t.y, t.z),
              (a += 1);
          }
          r.needsUpdate = !0;
        };
      })()),
      (hs.prototype = Object.create(at.prototype)),
      (hs.prototype.constructor = hs),
      (hs.prototype.dispose = function () {
        this.lightPlane.geometry.dispose(),
          this.lightPlane.material.dispose(),
          this.targetLine.geometry.dispose(),
          this.targetLine.material.dispose();
      }),
      (hs.prototype.update = (function () {
        var e = new l(),
          t = new l(),
          n = new l();
        return function () {
          e.setFromMatrixPosition(this.light.matrixWorld),
            t.setFromMatrixPosition(this.light.target.matrixWorld),
            n.subVectors(t, e),
            this.lightPlane.lookAt(n),
            void 0 !== this.color
              ? (this.lightPlane.material.color.set(this.color),
                this.targetLine.material.color.set(this.color))
              : (this.lightPlane.material.color.copy(this.light.color),
                this.targetLine.material.color.copy(this.light.color)),
            this.targetLine.lookAt(n),
            (this.targetLine.scale.z = n.length());
        };
      })()),
      (ds.prototype = Object.create(On.prototype)),
      (ds.prototype.constructor = ds),
      (ds.prototype.update = (function () {
        function e(e, s, o, a) {
          if ((i.set(s, o, a).unproject(r), (e = n[e]), void 0 !== e))
            for (
              s = t.getAttribute("position"), o = 0, a = e.length;
              a > o;
              o++
            )
              s.setXYZ(e[o], i.x, i.y, i.z);
        }
        var t,
          n,
          i = new l(),
          r = new lt();
        return function () {
          (t = this.geometry),
            (n = this.pointMap),
            r.projectionMatrix.copy(this.camera.projectionMatrix),
            e("c", 0, 0, -1),
            e("t", 0, 0, 1),
            e("n1", -1, -1, -1),
            e("n2", 1, -1, -1),
            e("n3", -1, 1, -1),
            e("n4", 1, 1, -1),
            e("f1", -1, -1, 1),
            e("f2", 1, -1, 1),
            e("f3", -1, 1, 1),
            e("f4", 1, 1, 1),
            e("u1", 0.7, 1.1, -1),
            e("u2", -0.7, 1.1, -1),
            e("u3", 0, 2, -1),
            e("cf1", -1, 0, 1),
            e("cf2", 1, 0, 1),
            e("cf3", 0, -1, 1),
            e("cf4", 0, 1, 1),
            e("cn1", -1, 0, -1),
            e("cn2", 1, 0, -1),
            e("cn3", 0, -1, -1),
            e("cn4", 0, 1, -1),
            (t.getAttribute("position").needsUpdate = !0);
        };
      })()),
      (ps.prototype = Object.create(On.prototype)),
      (ps.prototype.constructor = ps),
      (ps.prototype.update = (function () {
        var e = new Q();
        return function (t) {
          if (
            (void 0 !== t &&
              console.warn(
                "THREE.BoxHelper: .update() has no longer arguments."
              ),
            void 0 !== this.object && e.setFromObject(this.object),
            !e.isEmpty())
          ) {
            t = e.min;
            var n = e.max,
              i = this.geometry.attributes.position,
              r = i.array;
            (r[0] = n.x),
              (r[1] = n.y),
              (r[2] = n.z),
              (r[3] = t.x),
              (r[4] = n.y),
              (r[5] = n.z),
              (r[6] = t.x),
              (r[7] = t.y),
              (r[8] = n.z),
              (r[9] = n.x),
              (r[10] = t.y),
              (r[11] = n.z),
              (r[12] = n.x),
              (r[13] = n.y),
              (r[14] = t.z),
              (r[15] = t.x),
              (r[16] = n.y),
              (r[17] = t.z),
              (r[18] = t.x),
              (r[19] = t.y),
              (r[20] = t.z),
              (r[21] = n.x),
              (r[22] = t.y),
              (r[23] = t.z),
              (i.needsUpdate = !0),
              this.geometry.computeBoundingSphere();
          }
        };
      })()),
      (ps.prototype.setFromObject = function (e) {
        return (this.object = e), this.update(), this;
      }),
      (fs.prototype = Object.create(On.prototype)),
      (fs.prototype.constructor = fs),
      (fs.prototype.onBeforeRender = function () {
        var e = this.box;
        e.isEmpty() ||
          (e.getCenter(this.position),
          e.getSize(this.scale),
          this.scale.multiplyScalar(0.5));
      }),
      (ms.prototype = Object.create(An.prototype)),
      (ms.prototype.constructor = ms),
      (ms.prototype.onBeforeRender = function () {
        var e = -this.plane.constant;
        1e-8 > Math.abs(e) && (e = 1e-8),
          this.scale.set(0.5 * this.size, 0.5 * this.size, e),
          this.lookAt(this.plane.normal),
          this.updateMatrixWorld();
      });
    var so, oo;
    (gs.prototype = Object.create(at.prototype)),
      (gs.prototype.constructor = gs),
      (gs.prototype.setDirection = (function () {
        var e,
          t = new l();
        return function (n) {
          0.99999 < n.y
            ? this.quaternion.set(0, 0, 0, 1)
            : -0.99999 > n.y
            ? this.quaternion.set(1, 0, 0, 0)
            : (t.set(n.z, 0, -n.x).normalize(),
              (e = Math.acos(n.y)),
              this.quaternion.setFromAxisAngle(t, e));
        };
      })()),
      (gs.prototype.setLength = function (e, t, n) {
        void 0 === t && (t = 0.2 * e),
          void 0 === n && (n = 0.2 * t),
          this.line.scale.set(1, Math.max(0, e - t), 1),
          this.line.updateMatrix(),
          this.cone.scale.set(n, t, n),
          (this.cone.position.y = e),
          this.cone.updateMatrix();
      }),
      (gs.prototype.setColor = function (e) {
        this.line.material.color.copy(e), this.cone.material.color.copy(e);
      }),
      (vs.prototype = Object.create(On.prototype)),
      (vs.prototype.constructor = vs);
    var ao = new l(),
      lo = new _s(),
      co = new _s(),
      uo = new _s();
    (ys.prototype = Object.create(vr.prototype)),
      (ys.prototype.constructor = ys),
      (ys.prototype.getPoint = function (e) {
        var t = this.points,
          n = t.length;
        e *= n - (this.closed ? 0 : 1);
        var i = Math.floor(e);
        if (
          ((e -= i),
          this.closed
            ? (i +=
                i > 0 ? 0 : (Math.floor(Math.abs(i) / t.length) + 1) * t.length)
            : 0 === e && i === n - 1 && ((i = n - 2), (e = 1)),
          this.closed || i > 0)
        )
          var r = t[(i - 1) % n];
        else ao.subVectors(t[0], t[1]).add(t[0]), (r = ao);
        var s = t[i % n],
          o = t[(i + 1) % n];
        if (
          (this.closed || n > i + 2
            ? (t = t[(i + 2) % n])
            : (ao.subVectors(t[n - 1], t[n - 2]).add(t[n - 1]), (t = ao)),
          void 0 === this.type ||
            "centripetal" === this.type ||
            "chordal" === this.type)
        ) {
          var a = "chordal" === this.type ? 0.5 : 0.25,
            n = Math.pow(r.distanceToSquared(s), a),
            i = Math.pow(s.distanceToSquared(o), a),
            a = Math.pow(o.distanceToSquared(t), a);
          1e-4 > i && (i = 1),
            1e-4 > n && (n = i),
            1e-4 > a && (a = i),
            lo.initNonuniformCatmullRom(r.x, s.x, o.x, t.x, n, i, a),
            co.initNonuniformCatmullRom(r.y, s.y, o.y, t.y, n, i, a),
            uo.initNonuniformCatmullRom(r.z, s.z, o.z, t.z, n, i, a);
        } else
          "catmullrom" === this.type &&
            ((n = void 0 !== this.tension ? this.tension : 0.5),
            lo.initCatmullRom(r.x, s.x, o.x, t.x, n),
            co.initCatmullRom(r.y, s.y, o.y, t.y, n),
            uo.initCatmullRom(r.z, s.z, o.z, t.z, n));
        return new l(lo.calc(e), co.calc(e), uo.calc(e));
      }),
      (bs.prototype = Object.create(vr.prototype)),
      (bs.prototype.constructor = bs),
      (bs.prototype.getPoint = function (e) {
        var t = this.v0,
          n = this.v1,
          i = this.v2,
          r = this.v3;
        return new l(
          gr(e, t.x, n.x, i.x, r.x),
          gr(e, t.y, n.y, i.y, r.y),
          gr(e, t.z, n.z, i.z, r.z)
        );
      }),
      (ws.prototype = Object.create(vr.prototype)),
      (ws.prototype.constructor = ws),
      (ws.prototype.getPoint = function (e) {
        var t = this.v0,
          n = this.v1,
          i = this.v2;
        return new l(
          mr(e, t.x, n.x, i.x),
          mr(e, t.y, n.y, i.y),
          mr(e, t.z, n.z, i.z)
        );
      }),
      (xs.prototype = Object.create(vr.prototype)),
      (xs.prototype.constructor = xs),
      (xs.prototype.getPoint = function (e) {
        if (1 === e) return this.v2.clone();
        var t = new l();
        return (
          t.subVectors(this.v2, this.v1), t.multiplyScalar(e), t.add(this.v1), t
        );
      }),
      (Cs.prototype = Object.create(br.prototype)),
      (Cs.prototype.constructor = Cs),
      (vr.create = function (e, t) {
        return (
          console.log("THREE.Curve.create() has been deprecated"),
          (e.prototype = Object.create(vr.prototype)),
          (e.prototype.constructor = e),
          (e.prototype.getPoint = t),
          e
        );
      }),
      (Ts.prototype = Object.create(ys.prototype)),
      (Ss.prototype = Object.create(ys.prototype)),
      (Es.prototype = Object.create(ys.prototype)),
      Object.assign(Es.prototype, {
        initFromArray: function () {
          console.error("THREE.Spline: .initFromArray() has been removed.");
        },
        getControlPointsArray: function () {
          console.error(
            "THREE.Spline: .getControlPointsArray() has been removed."
          );
        },
        reparametrizeByArcLength: function () {
          console.error(
            "THREE.Spline: .reparametrizeByArcLength() has been removed."
          );
        },
      }),
      (ls.prototype.setColors = function () {
        console.error(
          "THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead."
        );
      }),
      (rs.prototype.update = function () {
        console.error(
          "THREE.SkeletonHelper: update() no longer needs to be called."
        );
      }),
      Object.assign(W.prototype, {
        center: function (e) {
          return (
            console.warn(
              "THREE.Box2: .center() has been renamed to .getCenter()."
            ),
            this.getCenter(e)
          );
        },
        empty: function () {
          return (
            console.warn(
              "THREE.Box2: .empty() has been renamed to .isEmpty()."
            ),
            this.isEmpty()
          );
        },
        isIntersectionBox: function (e) {
          return (
            console.warn(
              "THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."
            ),
            this.intersectsBox(e)
          );
        },
        size: function (e) {
          return (
            console.warn("THREE.Box2: .size() has been renamed to .getSize()."),
            this.getSize(e)
          );
        },
      }),
      Object.assign(Q.prototype, {
        center: function (e) {
          return (
            console.warn(
              "THREE.Box3: .center() has been renamed to .getCenter()."
            ),
            this.getCenter(e)
          );
        },
        empty: function () {
          return (
            console.warn(
              "THREE.Box3: .empty() has been renamed to .isEmpty()."
            ),
            this.isEmpty()
          );
        },
        isIntersectionBox: function (e) {
          return (
            console.warn(
              "THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."
            ),
            this.intersectsBox(e)
          );
        },
        isIntersectionSphere: function (e) {
          return (
            console.warn(
              "THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."
            ),
            this.intersectsSphere(e)
          );
        },
        size: function (e) {
          return (
            console.warn("THREE.Box3: .size() has been renamed to .getSize()."),
            this.getSize(e)
          );
        },
      }),
      (Dt.prototype.center = function (e) {
        return (
          console.warn(
            "THREE.Line3: .center() has been renamed to .getCenter()."
          ),
          this.getCenter(e)
        );
      }),
      (ks.random16 = function () {
        return (
          console.warn(
            "THREE.Math.random16() has been deprecated. Use Math.random() instead."
          ),
          Math.random()
        );
      }),
      Object.assign(et.prototype, {
        flattenToArrayOffset: function (e, t) {
          return (
            console.warn(
              "THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
            ),
            this.toArray(e, t)
          );
        },
        multiplyVector3: function (e) {
          return (
            console.warn(
              "THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."
            ),
            e.applyMatrix3(this)
          );
        },
        multiplyVector3Array: function () {
          console.error(
            "THREE.Matrix3: .multiplyVector3Array() has been removed."
          );
        },
        applyToBuffer: function (e) {
          return (
            console.warn(
              "THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."
            ),
            this.applyToBufferAttribute(e)
          );
        },
        applyToVector3Array: function () {
          console.error(
            "THREE.Matrix3: .applyToVector3Array() has been removed."
          );
        },
      }),
      Object.assign(c.prototype, {
        extractPosition: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."
            ),
            this.copyPosition(e)
          );
        },
        flattenToArrayOffset: function (e, t) {
          return (
            console.warn(
              "THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."
            ),
            this.toArray(e, t)
          );
        },
        getPosition: (function () {
          var e;
          return function () {
            return (
              void 0 === e && (e = new l()),
              console.warn(
                "THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."
              ),
              e.setFromMatrixColumn(this, 3)
            );
          };
        })(),
        setRotationFromQuaternion: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."
            ),
            this.makeRotationFromQuaternion(e)
          );
        },
        multiplyToArray: function () {
          console.warn("THREE.Matrix4: .multiplyToArray() has been removed.");
        },
        multiplyVector3: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."
            ),
            e.applyMatrix4(this)
          );
        },
        multiplyVector4: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."
            ),
            e.applyMatrix4(this)
          );
        },
        multiplyVector3Array: function () {
          console.error(
            "THREE.Matrix4: .multiplyVector3Array() has been removed."
          );
        },
        rotateAxis: function (e) {
          console.warn(
            "THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."
          ),
            e.transformDirection(this);
        },
        crossVector: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."
            ),
            e.applyMatrix4(this)
          );
        },
        translate: function () {
          console.error("THREE.Matrix4: .translate() has been removed.");
        },
        rotateX: function () {
          console.error("THREE.Matrix4: .rotateX() has been removed.");
        },
        rotateY: function () {
          console.error("THREE.Matrix4: .rotateY() has been removed.");
        },
        rotateZ: function () {
          console.error("THREE.Matrix4: .rotateZ() has been removed.");
        },
        rotateByAxis: function () {
          console.error("THREE.Matrix4: .rotateByAxis() has been removed.");
        },
        applyToBuffer: function (e) {
          return (
            console.warn(
              "THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."
            ),
            this.applyToBufferAttribute(e)
          );
        },
        applyToVector3Array: function () {
          console.error(
            "THREE.Matrix4: .applyToVector3Array() has been removed."
          );
        },
        makeFrustum: function (e, t, n, i, r, s) {
          return (
            console.warn(
              "THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."
            ),
            this.makePerspective(e, t, i, n, r, s)
          );
        },
      }),
      (tt.prototype.isIntersectionLine = function (e) {
        return (
          console.warn(
            "THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."
          ),
          this.intersectsLine(e)
        );
      }),
      (a.prototype.multiplyVector3 = function (e) {
        return (
          console.warn(
            "THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."
          ),
          e.applyQuaternion(this)
        );
      }),
      Object.assign(Ot.prototype, {
        isIntersectionBox: function (e) {
          return (
            console.warn(
              "THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."
            ),
            this.intersectsBox(e)
          );
        },
        isIntersectionPlane: function (e) {
          return (
            console.warn(
              "THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."
            ),
            this.intersectsPlane(e)
          );
        },
        isIntersectionSphere: function (e) {
          return (
            console.warn(
              "THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."
            ),
            this.intersectsSphere(e)
          );
        },
      }),
      Object.assign(Sr.prototype, {
        extrude: function (e) {
          return (
            console.warn(
              "THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."
            ),
            new ri(this, e)
          );
        },
        makeGeometry: function (e) {
          return (
            console.warn(
              "THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."
            ),
            new fi(this, e)
          );
        },
      }),
      Object.assign(n.prototype, {
        fromAttribute: function (e, t, n) {
          return (
            console.error(
              "THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."
            ),
            this.fromBufferAttribute(e, t, n)
          );
        },
      }),
      Object.assign(l.prototype, {
        setEulerFromRotationMatrix: function () {
          console.error(
            "THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead."
          );
        },
        setEulerFromQuaternion: function () {
          console.error(
            "THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead."
          );
        },
        getPositionFromMatrix: function (e) {
          return (
            console.warn(
              "THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."
            ),
            this.setFromMatrixPosition(e)
          );
        },
        getScaleFromMatrix: function (e) {
          return (
            console.warn(
              "THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."
            ),
            this.setFromMatrixScale(e)
          );
        },
        getColumnFromMatrix: function (e, t) {
          return (
            console.warn(
              "THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."
            ),
            this.setFromMatrixColumn(t, e)
          );
        },
        applyProjection: function (e) {
          return (
            console.warn(
              "THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."
            ),
            this.applyMatrix4(e)
          );
        },
        fromAttribute: function (e, t, n) {
          return (
            console.error(
              "THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."
            ),
            this.fromBufferAttribute(e, t, n)
          );
        },
      }),
      Object.assign(r.prototype, {
        fromAttribute: function (e, t, n) {
          return (
            console.error(
              "THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."
            ),
            this.fromBufferAttribute(e, t, n)
          );
        },
      }),
      (dt.prototype.computeTangents = function () {
        console.warn("THREE.Geometry: .computeTangents() has been removed.");
      }),
      Object.assign(at.prototype, {
        getChildByName: function (e) {
          return (
            console.warn(
              "THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."
            ),
            this.getObjectByName(e)
          );
        },
        renderDepth: function () {
          console.warn(
            "THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead."
          );
        },
        translate: function (e, t) {
          return (
            console.warn(
              "THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."
            ),
            this.translateOnAxis(t, e)
          );
        },
      }),
      Object.defineProperties(at.prototype, {
        eulerOrder: {
          get: function () {
            return (
              console.warn(
                "THREE.Object3D: .eulerOrder is now .rotation.order."
              ),
              this.rotation.order
            );
          },
          set: function (e) {
            console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),
              (this.rotation.order = e);
          },
        },
        useQuaternion: {
          get: function () {
            console.warn(
              "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
            );
          },
          set: function () {
            console.warn(
              "THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default."
            );
          },
        },
      }),
      Object.defineProperties(Sn.prototype, {
        objects: {
          get: function () {
            return (
              console.warn("THREE.LOD: .objects has been renamed to .levels."),
              this.levels
            );
          },
        },
      }),
      Object.defineProperty(En.prototype, "useVertexTexture", {
        get: function () {
          console.warn("THREE.Skeleton: useVertexTexture has been removed.");
        },
        set: function () {
          console.warn("THREE.Skeleton: useVertexTexture has been removed.");
        },
      }),
      Object.defineProperty(vr.prototype, "__arcLengthDivisions", {
        get: function () {
          return (
            console.warn(
              "THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."
            ),
            this.arcLengthDivisions
          );
        },
        set: function (e) {
          console.warn(
            "THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."
          ),
            (this.arcLengthDivisions = e);
        },
      }),
      (ut.prototype.setLens = function (e, t) {
        console.warn(
          "THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."
        ),
          void 0 !== t && (this.filmGauge = t),
          this.setFocalLength(e);
      }),
      Object.defineProperties(Fi.prototype, {
        onlyShadow: {
          set: function () {
            console.warn("THREE.Light: .onlyShadow has been removed.");
          },
        },
        shadowCameraFov: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraFov is now .shadow.camera.fov."
            ),
              (this.shadow.camera.fov = e);
          },
        },
        shadowCameraLeft: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraLeft is now .shadow.camera.left."
            ),
              (this.shadow.camera.left = e);
          },
        },
        shadowCameraRight: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraRight is now .shadow.camera.right."
            ),
              (this.shadow.camera.right = e);
          },
        },
        shadowCameraTop: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraTop is now .shadow.camera.top."
            ),
              (this.shadow.camera.top = e);
          },
        },
        shadowCameraBottom: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."
            ),
              (this.shadow.camera.bottom = e);
          },
        },
        shadowCameraNear: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraNear is now .shadow.camera.near."
            ),
              (this.shadow.camera.near = e);
          },
        },
        shadowCameraFar: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowCameraFar is now .shadow.camera.far."
            ),
              (this.shadow.camera.far = e);
          },
        },
        shadowCameraVisible: {
          set: function () {
            console.warn(
              "THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead."
            );
          },
        },
        shadowBias: {
          set: function (e) {
            console.warn("THREE.Light: .shadowBias is now .shadow.bias."),
              (this.shadow.bias = e);
          },
        },
        shadowDarkness: {
          set: function () {
            console.warn("THREE.Light: .shadowDarkness has been removed.");
          },
        },
        shadowMapWidth: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."
            ),
              (this.shadow.mapSize.width = e);
          },
        },
        shadowMapHeight: {
          set: function (e) {
            console.warn(
              "THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."
            ),
              (this.shadow.mapSize.height = e);
          },
        },
      }),
      Object.defineProperties(pt.prototype, {
        length: {
          get: function () {
            return (
              console.warn(
                "THREE.BufferAttribute: .length has been deprecated. Use .count instead."
              ),
              this.array.length
            );
          },
        },
      }),
      Object.assign(St.prototype, {
        addIndex: function (e) {
          console.warn(
            "THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."
          ),
            this.setIndex(e);
        },
        addDrawCall: function (e, t, n) {
          void 0 !== n &&
            console.warn(
              "THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."
            ),
            console.warn(
              "THREE.BufferGeometry: .addDrawCall() is now .addGroup()."
            ),
            this.addGroup(e, t);
        },
        clearDrawCalls: function () {
          console.warn(
            "THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."
          ),
            this.clearGroups();
        },
        computeTangents: function () {
          console.warn(
            "THREE.BufferGeometry: .computeTangents() has been removed."
          );
        },
        computeOffsets: function () {
          console.warn(
            "THREE.BufferGeometry: .computeOffsets() has been removed."
          );
        },
      }),
      Object.defineProperties(St.prototype, {
        drawcalls: {
          get: function () {
            return (
              console.error(
                "THREE.BufferGeometry: .drawcalls has been renamed to .groups."
              ),
              this.groups
            );
          },
        },
        offsets: {
          get: function () {
            return (
              console.warn(
                "THREE.BufferGeometry: .offsets has been renamed to .groups."
              ),
              this.groups
            );
          },
        },
      }),
      Object.defineProperties($r.prototype, {
        dynamic: {
          set: function () {
            console.warn(
              "THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead."
            );
          },
        },
        onUpdate: {
          value: function () {
            return (
              console.warn(
                "THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."
              ),
              this
            );
          },
        },
      }),
      Object.defineProperties(X.prototype, {
        wrapAround: {
          get: function () {
            console.warn("THREE.Material: .wrapAround has been removed.");
          },
          set: function () {
            console.warn("THREE.Material: .wrapAround has been removed.");
          },
        },
        wrapRGB: {
          get: function () {
            return (
              console.warn("THREE.Material: .wrapRGB has been removed."),
              new z()
            );
          },
        },
        shading: {
          get: function () {
            console.error(
              "THREE." +
                this.type +
                ": .shading has been removed. Use the boolean .flatShading instead."
            );
          },
          set: function (e) {
            console.warn(
              "THREE." +
                this.type +
                ": .shading has been removed. Use the boolean .flatShading instead."
            ),
              (this.flatShading = 1 === e);
          },
        },
      }),
      Object.defineProperties(ki.prototype, {
        metal: {
          get: function () {
            return (
              console.warn(
                "THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."
              ),
              !1
            );
          },
          set: function () {
            console.warn(
              "THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead"
            );
          },
        },
      }),
      Object.defineProperties(Y.prototype, {
        derivatives: {
          get: function () {
            return (
              console.warn(
                "THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
              ),
              this.extensions.derivatives
            );
          },
          set: function (e) {
            console.warn(
              "THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."
            ),
              (this.extensions.derivatives = e);
          },
        },
      }),
      Object.assign(_n.prototype, {
        getCurrentRenderTarget: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."
            ),
            this.getRenderTarget()
          );
        },
        getMaxAnisotropy: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."
            ),
            this.capabilities.getMaxAnisotropy()
          );
        },
        getPrecision: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."
            ),
            this.capabilities.precision
          );
        },
        supportsFloatTextures: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."
            ),
            this.extensions.get("OES_texture_float")
          );
        },
        supportsHalfFloatTextures: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."
            ),
            this.extensions.get("OES_texture_half_float")
          );
        },
        supportsStandardDerivatives: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."
            ),
            this.extensions.get("OES_standard_derivatives")
          );
        },
        supportsCompressedTextureS3TC: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."
            ),
            this.extensions.get("WEBGL_compressed_texture_s3tc")
          );
        },
        supportsCompressedTexturePVRTC: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."
            ),
            this.extensions.get("WEBGL_compressed_texture_pvrtc")
          );
        },
        supportsBlendMinMax: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."
            ),
            this.extensions.get("EXT_blend_minmax")
          );
        },
        supportsVertexTextures: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."
            ),
            this.capabilities.vertexTextures
          );
        },
        supportsInstancedArrays: function () {
          return (
            console.warn(
              "THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."
            ),
            this.extensions.get("ANGLE_instanced_arrays")
          );
        },
        enableScissorTest: function (e) {
          console.warn(
            "THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."
          ),
            this.setScissorTest(e);
        },
        initMaterial: function () {
          console.warn(
            "THREE.WebGLRenderer: .initMaterial() has been removed."
          );
        },
        addPrePlugin: function () {
          console.warn(
            "THREE.WebGLRenderer: .addPrePlugin() has been removed."
          );
        },
        addPostPlugin: function () {
          console.warn(
            "THREE.WebGLRenderer: .addPostPlugin() has been removed."
          );
        },
        updateShadowMap: function () {
          console.warn(
            "THREE.WebGLRenderer: .updateShadowMap() has been removed."
          );
        },
      }),
      Object.defineProperties(_n.prototype, {
        shadowMapEnabled: {
          get: function () {
            return this.shadowMap.enabled;
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."
            ),
              (this.shadowMap.enabled = e);
          },
        },
        shadowMapType: {
          get: function () {
            return this.shadowMap.type;
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."
            ),
              (this.shadowMap.type = e);
          },
        },
        shadowMapCullFace: {
          get: function () {
            return this.shadowMap.cullFace;
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."
            ),
              (this.shadowMap.cullFace = e);
          },
        },
      }),
      Object.defineProperties(it.prototype, {
        cullFace: {
          get: function () {
            return this.renderReverseSided ? 2 : 1;
          },
          set: function (e) {
            (e = 1 !== e),
              console.warn(
                "WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to " +
                  e +
                  "."
              ),
              (this.renderReverseSided = e);
          },
        },
      }),
      Object.defineProperties(s.prototype, {
        wrapS: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
              ),
              this.texture.wrapS
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."
            ),
              (this.texture.wrapS = e);
          },
        },
        wrapT: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
              ),
              this.texture.wrapT
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."
            ),
              (this.texture.wrapT = e);
          },
        },
        magFilter: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
              ),
              this.texture.magFilter
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."
            ),
              (this.texture.magFilter = e);
          },
        },
        minFilter: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
              ),
              this.texture.minFilter
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."
            ),
              (this.texture.minFilter = e);
          },
        },
        anisotropy: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
              ),
              this.texture.anisotropy
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."
            ),
              (this.texture.anisotropy = e);
          },
        },
        offset: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .offset is now .texture.offset."
              ),
              this.texture.offset
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .offset is now .texture.offset."
            ),
              (this.texture.offset = e);
          },
        },
        repeat: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
              ),
              this.texture.repeat
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .repeat is now .texture.repeat."
            ),
              (this.texture.repeat = e);
          },
        },
        format: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .format is now .texture.format."
              ),
              this.texture.format
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .format is now .texture.format."
            ),
              (this.texture.format = e);
          },
        },
        type: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .type is now .texture.type."
              ),
              this.texture.type
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .type is now .texture.type."
            ),
              (this.texture.type = e);
          },
        },
        generateMipmaps: {
          get: function () {
            return (
              console.warn(
                "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
              ),
              this.texture.generateMipmaps
            );
          },
          set: function (e) {
            console.warn(
              "THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."
            ),
              (this.texture.generateMipmaps = e);
          },
        },
      }),
      (Mr.prototype.load = function (e) {
        console.warn(
          "THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead."
        );
        var t = this;
        return (
          new Ir().load(e, function (e) {
            t.setBuffer(e);
          }),
          this
        );
      }),
      (Lr.prototype.getData = function () {
        return (
          console.warn(
            "THREE.AudioAnalyser: .getData() is now .getFrequencyData()."
          ),
          this.getFrequencyData()
        );
      }),
      (Or.prototype.updateCubeMap = function (e, t) {
        return (
          console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),
          this.update(e, t)
        );
      }),
      (e.WebGLRenderTargetCube = o),
      (e.WebGLRenderTarget = s),
      (e.WebGLRenderer = _n),
      (e.ShaderLib = js),
      (e.UniformsLib = Us),
      (e.UniformsUtils = Bs),
      (e.ShaderChunk = Fs),
      (e.FogExp2 = yn),
      (e.Fog = bn),
      (e.Scene = wn),
      (e.LensFlare = xn),
      (e.Sprite = Tn),
      (e.LOD = Sn),
      (e.SkinnedMesh = Pn),
      (e.Skeleton = En),
      (e.Bone = kn),
      (e.Mesh = Rt),
      (e.LineSegments = On),
      (e.LineLoop = Dn),
      (e.Line = An),
      (e.Points = Rn),
      (e.Group = Ln),
      (e.VideoTexture = Nn),
      (e.DataTexture = u),
      (e.CompressedTexture = Un),
      (e.CubeTexture = h),
      (e.CanvasTexture = V),
      (e.DepthTexture = Bn),
      (e.Texture = i),
      (e.CompressedTextureLoader = Ri),
      (e.DataTextureLoader = Li),
      (e.CubeTextureLoader = Ui),
      (e.TextureLoader = Bi),
      (e.ObjectLoader = pr),
      (e.MaterialLoader = cr),
      (e.BufferGeometryLoader = ur),
      (e.DefaultLoadingManager = Ys),
      (e.LoadingManager = Di),
      (e.JSONLoader = dr),
      (e.ImageLoader = Ni),
      (e.FontLoader = Pr),
      (e.FileLoader = Mi),
      (e.Loader = hr),
      (e.Cache = Xs),
      (e.AudioLoader = Ir),
      (e.SpotLightShadow = $i),
      (e.SpotLight = zi),
      (e.PointLight = Wi),
      (e.RectAreaLight = Xi),
      (e.HemisphereLight = ji),
      (e.DirectionalLightShadow = Gi),
      (e.DirectionalLight = Vi),
      (e.AmbientLight = qi),
      (e.LightShadow = Hi),
      (e.Light = Fi),
      (e.StereoCamera = Ar),
      (e.PerspectiveCamera = ut),
      (e.OrthographicCamera = ct),
      (e.CubeCamera = Or),
      (e.ArrayCamera = pn),
      (e.Camera = lt),
      (e.AudioListener = Dr),
      (e.PositionalAudio = Rr),
      (e.AudioContext = ro),
      (e.AudioAnalyser = Lr),
      (e.Audio = Mr),
      (e.VectorKeyframeTrack = er),
      (e.StringKeyframeTrack = rr),
      (e.QuaternionKeyframeTrack = nr),
      (e.NumberKeyframeTrack = ir),
      (e.ColorKeyframeTrack = or),
      (e.BooleanKeyframeTrack = sr),
      (e.PropertyMixer = Nr),
      (e.PropertyBinding = Br),
      (e.KeyframeTrack = ar),
      (e.AnimationUtils = Ks),
      (e.AnimationObjectGroup = Fr),
      (e.AnimationMixer = Hr),
      (e.AnimationClip = lr),
      (e.Uniform = $r),
      (e.InstancedBufferGeometry = zr),
      (e.BufferGeometry = St),
      (e.GeometryIdCount = function () {
        return zs++;
      }),
      (e.Geometry = dt),
      (e.InterleavedBufferAttribute = Wr),
      (e.InstancedInterleavedBuffer = Vr),
      (e.InterleavedBuffer = Gr),
      (e.InstancedBufferAttribute = qr),
      (e.Face3 = ht),
      (e.Object3D = at),
      (e.Raycaster = Xr),
      (e.Layers = ot),
      (e.EventDispatcher = t),
      (e.Clock = Jr),
      (e.QuaternionLinearInterpolant = tr),
      (e.LinearInterpolant = Ji),
      (e.DiscreteInterpolant = Qi),
      (e.CubicInterpolant = Ki),
      (e.Interpolant = Yi),
      (e.Triangle = Mt),
      (e.Math = ks),
      (e.Spherical = Qr),
      (e.Cylindrical = Zr),
      (e.Plane = tt),
      (e.Frustum = nt),
      (e.Sphere = Z),
      (e.Ray = Ot),
      (e.Matrix4 = c),
      (e.Matrix3 = et),
      (e.Box3 = Q),
      (e.Box2 = W),
      (e.Line3 = Dt),
      (e.Euler = st),
      (e.Vector4 = r),
      (e.Vector3 = l),
      (e.Vector2 = n),
      (e.Quaternion = a),
      (e.Color = z),
      (e.ImmediateRenderObject = es),
      (e.VertexNormalsHelper = ts),
      (e.SpotLightHelper = ns),
      (e.SkeletonHelper = rs),
      (e.PointLightHelper = ss),
      (e.RectAreaLightHelper = os),
      (e.HemisphereLightHelper = as),
      (e.GridHelper = ls),
      (e.PolarGridHelper = cs),
      (e.FaceNormalsHelper = us),
      (e.DirectionalLightHelper = hs),
      (e.CameraHelper = ds),
      (e.BoxHelper = ps),
      (e.Box3Helper = fs),
      (e.PlaneHelper = ms),
      (e.ArrowHelper = gs),
      (e.AxisHelper = vs),
      (e.CatmullRomCurve3 = ys),
      (e.CubicBezierCurve3 = bs),
      (e.QuadraticBezierCurve3 = ws),
      (e.LineCurve3 = xs),
      (e.ArcCurve = Cs),
      (e.EllipseCurve = br),
      (e.SplineCurve = wr),
      (e.CubicBezierCurve = xr),
      (e.QuadraticBezierCurve = Cr),
      (e.LineCurve = _r),
      (e.Shape = Sr),
      (e.Path = Tr),
      (e.ShapePath = Er),
      (e.Font = kr),
      (e.CurvePath = yr),
      (e.Curve = vr),
      (e.ShapeUtils = Gs),
      (e.SceneUtils = {
        createMultiMaterialObject: function (e, t) {
          for (var n = new Ln(), i = 0, r = t.length; r > i; i++)
            n.add(new Rt(e, t[i]));
          return n;
        },
        detach: function (e, t, n) {
          e.applyMatrix(t.matrixWorld), t.remove(e), n.add(e);
        },
        attach: function (e, t, n) {
          e.applyMatrix(new c().getInverse(n.matrixWorld)),
            t.remove(e),
            n.add(e);
        },
      }),
      (e.WebGLUtils = vn),
      (e.WireframeGeometry = Fn),
      (e.ParametricGeometry = jn),
      (e.ParametricBufferGeometry = Hn),
      (e.TetrahedronGeometry = Wn),
      (e.TetrahedronBufferGeometry = Gn),
      (e.OctahedronGeometry = Vn),
      (e.OctahedronBufferGeometry = qn),
      (e.IcosahedronGeometry = Xn),
      (e.IcosahedronBufferGeometry = Yn),
      (e.DodecahedronGeometry = Kn),
      (e.DodecahedronBufferGeometry = Jn),
      (e.PolyhedronGeometry = $n),
      (e.PolyhedronBufferGeometry = zn),
      (e.TubeGeometry = Qn),
      (e.TubeBufferGeometry = Zn),
      (e.TorusKnotGeometry = ei),
      (e.TorusKnotBufferGeometry = ti),
      (e.TorusGeometry = ni),
      (e.TorusBufferGeometry = ii),
      (e.TextGeometry = oi),
      (e.TextBufferGeometry = ai),
      (e.SphereGeometry = li),
      (e.SphereBufferGeometry = ci),
      (e.RingGeometry = ui),
      (e.RingBufferGeometry = hi),
      (e.PlaneGeometry = Pt),
      (e.PlaneBufferGeometry = It),
      (e.LatheGeometry = di),
      (e.LatheBufferGeometry = pi),
      (e.ShapeGeometry = fi),
      (e.ShapeBufferGeometry = mi),
      (e.ExtrudeGeometry = ri),
      (e.ExtrudeBufferGeometry = si),
      (e.EdgesGeometry = gi),
      (e.ConeGeometry = yi),
      (e.ConeBufferGeometry = bi),
      (e.CylinderGeometry = vi),
      (e.CylinderBufferGeometry = _i),
      (e.CircleGeometry = wi),
      (e.CircleBufferGeometry = xi),
      (e.BoxGeometry = Et),
      (e.BoxBufferGeometry = kt),
      (e.ShadowMaterial = Ci),
      (e.SpriteMaterial = Cn),
      (e.RawShaderMaterial = Ti),
      (e.ShaderMaterial = Y),
      (e.PointsMaterial = Mn),
      (e.MeshPhysicalMaterial = Ei),
      (e.MeshStandardMaterial = Si),
      (e.MeshPhongMaterial = ki),
      (e.MeshToonMaterial = Pi),
      (e.MeshNormalMaterial = Ii),
      (e.MeshLambertMaterial = Ai),
      (e.MeshDepthMaterial = K),
      (e.MeshDistanceMaterial = J),
      (e.MeshBasicMaterial = At),
      (e.LineDashedMaterial = Oi),
      (e.LineBasicMaterial = In),
      (e.Material = X),
      (e.Float64BufferAttribute = xt),
      (e.Float32BufferAttribute = wt),
      (e.Uint32BufferAttribute = bt),
      (e.Int32BufferAttribute = yt),
      (e.Uint16BufferAttribute = _t),
      (e.Int16BufferAttribute = vt),
      (e.Uint8ClampedBufferAttribute = gt),
      (e.Uint8BufferAttribute = mt),
      (e.Int8BufferAttribute = ft),
      (e.BufferAttribute = pt),
      (e.REVISION = "87"),
      (e.MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2 }),
      (e.CullFaceNone = 0),
      (e.CullFaceBack = 1),
      (e.CullFaceFront = 2),
      (e.CullFaceFrontBack = 3),
      (e.FrontFaceDirectionCW = 0),
      (e.FrontFaceDirectionCCW = 1),
      (e.BasicShadowMap = 0),
      (e.PCFShadowMap = 1),
      (e.PCFSoftShadowMap = 2),
      (e.FrontSide = 0),
      (e.BackSide = 1),
      (e.DoubleSide = 2),
      (e.FlatShading = 1),
      (e.SmoothShading = 2),
      (e.NoColors = 0),
      (e.FaceColors = 1),
      (e.VertexColors = 2),
      (e.NoBlending = 0),
      (e.NormalBlending = 1),
      (e.AdditiveBlending = 2),
      (e.SubtractiveBlending = 3),
      (e.MultiplyBlending = 4),
      (e.CustomBlending = 5),
      (e.AddEquation = 100),
      (e.SubtractEquation = 101),
      (e.ReverseSubtractEquation = 102),
      (e.MinEquation = 103),
      (e.MaxEquation = 104),
      (e.ZeroFactor = 200),
      (e.OneFactor = 201),
      (e.SrcColorFactor = 202),
      (e.OneMinusSrcColorFactor = 203),
      (e.SrcAlphaFactor = 204),
      (e.OneMinusSrcAlphaFactor = 205),
      (e.DstAlphaFactor = 206),
      (e.OneMinusDstAlphaFactor = 207),
      (e.DstColorFactor = 208),
      (e.OneMinusDstColorFactor = 209),
      (e.SrcAlphaSaturateFactor = 210),
      (e.NeverDepth = 0),
      (e.AlwaysDepth = 1),
      (e.LessDepth = 2),
      (e.LessEqualDepth = 3),
      (e.EqualDepth = 4),
      (e.GreaterEqualDepth = 5),
      (e.GreaterDepth = 6),
      (e.NotEqualDepth = 7),
      (e.MultiplyOperation = 0),
      (e.MixOperation = 1),
      (e.AddOperation = 2),
      (e.NoToneMapping = 0),
      (e.LinearToneMapping = 1),
      (e.ReinhardToneMapping = 2),
      (e.Uncharted2ToneMapping = 3),
      (e.CineonToneMapping = 4),
      (e.UVMapping = 300),
      (e.CubeReflectionMapping = 301),
      (e.CubeRefractionMapping = 302),
      (e.EquirectangularReflectionMapping = 303),
      (e.EquirectangularRefractionMapping = 304),
      (e.SphericalReflectionMapping = 305),
      (e.CubeUVReflectionMapping = 306),
      (e.CubeUVRefractionMapping = 307),
      (e.RepeatWrapping = 1e3),
      (e.ClampToEdgeWrapping = 1001),
      (e.MirroredRepeatWrapping = 1002),
      (e.NearestFilter = 1003),
      (e.NearestMipMapNearestFilter = 1004),
      (e.NearestMipMapLinearFilter = 1005),
      (e.LinearFilter = 1006),
      (e.LinearMipMapNearestFilter = 1007),
      (e.LinearMipMapLinearFilter = 1008),
      (e.UnsignedByteType = 1009),
      (e.ByteType = 1010),
      (e.ShortType = 1011),
      (e.UnsignedShortType = 1012),
      (e.IntType = 1013),
      (e.UnsignedIntType = 1014),
      (e.FloatType = 1015),
      (e.HalfFloatType = 1016),
      (e.UnsignedShort4444Type = 1017),
      (e.UnsignedShort5551Type = 1018),
      (e.UnsignedShort565Type = 1019),
      (e.UnsignedInt248Type = 1020),
      (e.AlphaFormat = 1021),
      (e.RGBFormat = 1022),
      (e.RGBAFormat = 1023),
      (e.LuminanceFormat = 1024),
      (e.LuminanceAlphaFormat = 1025),
      (e.RGBEFormat = 1023),
      (e.DepthFormat = 1026),
      (e.DepthStencilFormat = 1027),
      (e.RGB_S3TC_DXT1_Format = 2001),
      (e.RGBA_S3TC_DXT1_Format = 2002),
      (e.RGBA_S3TC_DXT3_Format = 2003),
      (e.RGBA_S3TC_DXT5_Format = 2004),
      (e.RGB_PVRTC_4BPPV1_Format = 2100),
      (e.RGB_PVRTC_2BPPV1_Format = 2101),
      (e.RGBA_PVRTC_4BPPV1_Format = 2102),
      (e.RGBA_PVRTC_2BPPV1_Format = 2103),
      (e.RGB_ETC1_Format = 2151),
      (e.LoopOnce = 2200),
      (e.LoopRepeat = 2201),
      (e.LoopPingPong = 2202),
      (e.InterpolateDiscrete = 2300),
      (e.InterpolateLinear = 2301),
      (e.InterpolateSmooth = 2302),
      (e.ZeroCurvatureEnding = 2400),
      (e.ZeroSlopeEnding = 2401),
      (e.WrapAroundEnding = 2402),
      (e.TrianglesDrawMode = 0),
      (e.TriangleStripDrawMode = 1),
      (e.TriangleFanDrawMode = 2),
      (e.LinearEncoding = 3e3),
      (e.sRGBEncoding = 3001),
      (e.GammaEncoding = 3007),
      (e.RGBEEncoding = 3002),
      (e.LogLuvEncoding = 3003),
      (e.RGBM7Encoding = 3004),
      (e.RGBM16Encoding = 3005),
      (e.RGBDEncoding = 3006),
      (e.BasicDepthPacking = 3200),
      (e.RGBADepthPacking = 3201),
      (e.CubeGeometry = Et),
      (e.Face4 = function (e, t, n, i, r, s, o) {
        return (
          console.warn(
            "THREE.Face4 has been removed. A THREE.Face3 will be created instead."
          ),
          new ht(e, t, n, r, s, o)
        );
      }),
      (e.LineStrip = 0),
      (e.LinePieces = 1),
      (e.MeshFaceMaterial = function (e) {
        return (
          console.warn(
            "THREE.MeshFaceMaterial has been removed. Use an Array instead."
          ),
          e
        );
      }),
      (e.MultiMaterial = function (e) {
        return (
          void 0 === e && (e = []),
          console.warn(
            "THREE.MultiMaterial has been removed. Use an Array instead."
          ),
          (e.isMultiMaterial = !0),
          (e.materials = e),
          (e.clone = function () {
            return e.slice();
          }),
          e
        );
      }),
      (e.PointCloud = function (e, t) {
        return (
          console.warn("THREE.PointCloud has been renamed to THREE.Points."),
          new Rn(e, t)
        );
      }),
      (e.Particle = function (e) {
        return (
          console.warn("THREE.Particle has been renamed to THREE.Sprite."),
          new Tn(e)
        );
      }),
      (e.ParticleSystem = function (e, t) {
        return (
          console.warn(
            "THREE.ParticleSystem has been renamed to THREE.Points."
          ),
          new Rn(e, t)
        );
      }),
      (e.PointCloudMaterial = function (e) {
        return (
          console.warn(
            "THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."
          ),
          new Mn(e)
        );
      }),
      (e.ParticleBasicMaterial = function (e) {
        return (
          console.warn(
            "THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."
          ),
          new Mn(e)
        );
      }),
      (e.ParticleSystemMaterial = function (e) {
        return (
          console.warn(
            "THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."
          ),
          new Mn(e)
        );
      }),
      (e.Vertex = function (e, t, n) {
        return (
          console.warn(
            "THREE.Vertex has been removed. Use THREE.Vector3 instead."
          ),
          new l(e, t, n)
        );
      }),
      (e.DynamicBufferAttribute = function (e, t) {
        return (
          console.warn(
            "THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."
          ),
          new pt(e, t).setDynamic(!0)
        );
      }),
      (e.Int8Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."
          ),
          new ft(e, t)
        );
      }),
      (e.Uint8Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."
          ),
          new mt(e, t)
        );
      }),
      (e.Uint8ClampedAttribute = function (e, t) {
        return (
          console.warn(
            "THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."
          ),
          new gt(e, t)
        );
      }),
      (e.Int16Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."
          ),
          new vt(e, t)
        );
      }),
      (e.Uint16Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."
          ),
          new _t(e, t)
        );
      }),
      (e.Int32Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."
          ),
          new yt(e, t)
        );
      }),
      (e.Uint32Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."
          ),
          new bt(e, t)
        );
      }),
      (e.Float32Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."
          ),
          new wt(e, t)
        );
      }),
      (e.Float64Attribute = function (e, t) {
        return (
          console.warn(
            "THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."
          ),
          new xt(e, t)
        );
      }),
      (e.ClosedSplineCurve3 = Ts),
      (e.SplineCurve3 = Ss),
      (e.Spline = Es),
      (e.BoundingBoxHelper = function (e, t) {
        return (
          console.warn(
            "THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."
          ),
          new ps(e, t)
        );
      }),
      (e.EdgesHelper = function (e, t) {
        return (
          console.warn(
            "THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."
          ),
          new On(
            new gi(e.geometry),
            new In({ color: void 0 !== t ? t : 16777215 })
          )
        );
      }),
      (e.WireframeHelper = function (e, t) {
        return (
          console.warn(
            "THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."
          ),
          new On(
            new Fn(e.geometry),
            new In({ color: void 0 !== t ? t : 16777215 })
          )
        );
      }),
      (e.XHRLoader = function (e) {
        return (
          console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),
          new Mi(e)
        );
      }),
      (e.BinaryTextureLoader = function (e) {
        return (
          console.warn(
            "THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."
          ),
          new Li(e)
        );
      }),
      (e.GeometryUtils = {
        merge: function (e, t, n) {
          if (
            (console.warn(
              "THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."
            ),
            t.isMesh)
          ) {
            t.matrixAutoUpdate && t.updateMatrix();
            var i = t.matrix;
            t = t.geometry;
          }
          e.merge(t, i, n);
        },
        center: function (e) {
          return (
            console.warn(
              "THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."
            ),
            e.center()
          );
        },
      }),
      (e.ImageUtils = {
        crossOrigin: void 0,
        loadTexture: function (e, t, n, i) {
          console.warn(
            "THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead."
          );
          var r = new Bi();
          return (
            r.setCrossOrigin(this.crossOrigin),
            (e = r.load(e, n, void 0, i)),
            t && (e.mapping = t),
            e
          );
        },
        loadTextureCube: function (e, t, n, i) {
          console.warn(
            "THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead."
          );
          var r = new Ui();
          return (
            r.setCrossOrigin(this.crossOrigin),
            (e = r.load(e, n, void 0, i)),
            t && (e.mapping = t),
            e
          );
        },
        loadCompressedTexture: function () {
          console.error(
            "THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead."
          );
        },
        loadCompressedTextureCube: function () {
          console.error(
            "THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead."
          );
        },
      }),
      (e.Projector = function () {
        console.error(
          "THREE.Projector has been moved to /examples/js/renderers/Projector.js."
        ),
          (this.projectVector = function (e, t) {
            console.warn(
              "THREE.Projector: .projectVector() is now vector.project()."
            ),
              e.project(t);
          }),
          (this.unprojectVector = function (e, t) {
            console.warn(
              "THREE.Projector: .unprojectVector() is now vector.unproject()."
            ),
              e.unproject(t);
          }),
          (this.pickingRay = function () {
            console.error(
              "THREE.Projector: .pickingRay() is now raycaster.setFromCamera()."
            );
          });
      }),
      (e.CanvasRenderer = function () {
        console.error(
          "THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"
        ),
          (this.domElement = document.createElementNS(
            "http://www.w3.org/1999/xhtml",
            "canvas"
          )),
          (this.clear = function () {}),
          (this.render = function () {}),
          (this.setClearColor = function () {}),
          (this.setSize = function () {});
      }),
      Object.defineProperty(e, "__esModule", { value: !0 });
  }),
  "function" == typeof require && require("neon"),
  Class("Chameleon")({
    COLOR_NAMES: {
      aliceblue: "#f0f8ff",
      antiquewhite: "#faebd7",
      aqua: "#00ffff",
      aquamarine: "#7fffd4",
      azure: "#f0ffff",
      beige: "#f5f5dc",
      bisque: "#ffe4c4",
      black: "#000000",
      blanchedalmond: "#ffebcd",
      blue: "#0000ff",
      blueviolet: "#8a2be2",
      brown: "#a52a2a",
      burlywood: "#deb887",
      cadetblue: "#5f9ea0",
      chartreuse: "#7fff00",
      chocolate: "#d2691e",
      coral: "#ff7f50",
      cornflowerblue: "#6495ed",
      cornsilk: "#fff8dc",
      crimson: "#dc143c",
      cyan: "#00ffff",
      darkblue: "#00008b",
      darkcyan: "#008b8b",
      darkgoldenrod: "#b8860b",
      darkgray: "#a9a9a9",
      darkgreen: "#006400",
      darkkhaki: "#bdb76b",
      darkmagenta: "#8b008b",
      darkolivegreen: "#556b2f",
      darkorange: "#ff8c00",
      darkorchid: "#9932cc",
      darkred: "#8b0000",
      darksalmon: "#e9967a",
      darkseagreen: "#8fbc8f",
      darkslateblue: "#483d8b",
      darkslategray: "#2f4f4f",
      darkturquoise: "#00ced1",
      darkviolet: "#9400d3",
      deeppink: "#ff1493",
      deepskyblue: "#00bfff",
      dimgray: "#696969",
      dodgerblue: "#1e90ff",
      firebrick: "#b22222",
      floralwhite: "#fffaf0",
      forestgreen: "#228b22",
      fuchsia: "#ff00ff",
      gainsboro: "#dcdcdc",
      ghostwhite: "#f8f8ff",
      gold: "#ffd700",
      goldenrod: "#daa520",
      gray: "#808080",
      green: "#008000",
      greenyellow: "#adff2f",
      honeydew: "#f0fff0",
      hotpink: "#ff69b4",
      "indianred ": "#cd5c5c",
      "indigo ": "#4b0082",
      ivory: "#fffff0",
      khaki: "#f0e68c",
      lavender: "#e6e6fa",
      lavenderblush: "#fff0f5",
      lawngreen: "#7cfc00",
      lemonchiffon: "#fffacd",
      lightblue: "#add8e6",
      lightcoral: "#f08080",
      lightcyan: "#e0ffff",
      lightgoldenrodyellow: "#fafad2",
      lightgrey: "#d3d3d3",
      lightgreen: "#90ee90",
      lightpink: "#ffb6c1",
      lightsalmon: "#ffa07a",
      lightseagreen: "#20b2aa",
      lightskyblue: "#87cefa",
      lightslategray: "#778899",
      lightsteelblue: "#b0c4de",
      lightyellow: "#ffffe0",
      lime: "#00ff00",
      limegreen: "#32cd32",
      linen: "#faf0e6",
      magenta: "#ff00ff",
      maroon: "#800000",
      mediumaquamarine: "#66cdaa",
      mediumblue: "#0000cd",
      mediumorchid: "#ba55d3",
      mediumpurple: "#9370d8",
      mediumseagreen: "#3cb371",
      mediumslateblue: "#7b68ee",
      mediumspringgreen: "#00fa9a",
      mediumturquoise: "#48d1cc",
      mediumvioletred: "#c71585",
      midnightblue: "#191970",
      mintcream: "#f5fffa",
      mistyrose: "#ffe4e1",
      moccasin: "#ffe4b5",
      navajowhite: "#ffdead",
      navy: "#000080",
      oldlace: "#fdf5e6",
      olive: "#808000",
      olivedrab: "#6b8e23",
      orange: "#ffa500",
      orangered: "#ff4500",
      orchid: "#da70d6",
      palegoldenrod: "#eee8aa",
      palegreen: "#98fb98",
      paleturquoise: "#afeeee",
      palevioletred: "#d87093",
      papayawhip: "#ffefd5",
      peachpuff: "#ffdab9",
      peru: "#cd853f",
      pink: "#ffc0cb",
      plum: "#dda0dd",
      powderblue: "#b0e0e6",
      purple: "#800080",
      red: "#ff0000",
      rosybrown: "#bc8f8f",
      royalblue: "#4169e1",
      saddlebrown: "#8b4513",
      salmon: "#fa8072",
      sandybrown: "#f4a460",
      seagreen: "#2e8b57",
      seashell: "#fff5ee",
      sienna: "#a0522d",
      silver: "#c0c0c0",
      skyblue: "#87ceeb",
      slateblue: "#6a5acd",
      slategray: "#708090",
      snow: "#fffafa",
      springgreen: "#00ff7f",
      steelblue: "#4682b4",
      tan: "#d2b48c",
      teal: "#008080",
      thistle: "#d8bfd8",
      tomato: "#ff6347",
      turquoise: "#40e0d0",
      violet: "#ee82ee",
      wheat: "#f5deb3",
      white: "#ffffff",
      whitesmoke: "#f5f5f5",
      yellow: "#ffff00",
      yellowgreen: "#9acd32",
    },
    RGBRegExp:
      /^\s*rgba?\s*\((\d+)\,\s*(\d+)\,\s*(\d+)(,\s*(\d+(\.\d+)?))?\)\s*$/,
    HTMLRegExp: /^\#([0-9A-Fa-f]{6})$/,
    HTMLShortRegExp: /^\#([0-9A-Fa-f]{3})$/,
    RGBToHSV: function (e, t, n) {
      (e /= 255), (t /= 255), (n /= 255);
      var i,
        r,
        s,
        o = Math.max(e, t, n),
        a = Math.min(e, t, n);
      return (
        o === a
          ? (i = 0)
          : o === e
          ? (i = (60 * ((t - n) / (o - a)) + 360) % 360)
          : o === t
          ? (i = 60 * ((n - e) / (o - a)) + 120)
          : o === n && (i = 60 * ((e - t) / (o - a)) + 240),
        (r = 0 === o ? 0 : (o - a) / o),
        (s = o),
        (i = Math.round(i)),
        (r = Math.round(100 * r)),
        (s = Math.round(100 * s)),
        { h: i, s: r, v: s }
      );
    },
    HexStringToHSV: function (e) {
      var t = parseInt(e.substr(0, 2), 16),
        n = parseInt(e.substr(2, 2), 16),
        i = parseInt(e.substr(4, 2), 16);
      return isNaN(t) || isNaN(n) || isNaN(i) ? void 0 : this.RGBToHSV(t, n, i);
    },
    HSVToRGB: function (e, t, n) {
      var i, r, s;
      if (0 === t) i = r = s = Math.round(2.55 * n);
      else {
        (e /= 60), (t /= 100), (n /= 100);
        var o = Math.floor(e),
          a = e - o,
          l = n * (1 - t),
          c = n * (1 - t * a),
          u = n * (1 - t * (1 - a));
        switch (o) {
          case 0:
            (i = n), (r = u), (s = l);
            break;
          case 1:
            (i = c), (r = n), (s = l);
            break;
          case 2:
            (i = l), (r = n), (s = u);
            break;
          case 3:
            (i = l), (r = c), (s = n);
            break;
          case 4:
            (i = u), (r = l), (s = n);
            break;
          default:
            (i = n), (r = l), (s = c);
        }
        (i = Math.round(255 * i)),
          (r = Math.round(255 * r)),
          (s = Math.round(255 * s));
      }
      return { r: i, g: r, b: s };
    },
    HSVToLAB: function (e, t, n) {
      var i,
        r,
        s,
        o,
        a,
        l,
        c = [
          [0.4124, 0.3576, 0.1805],
          [0.2126, 0.7152, 0.0722],
          [0.0193, 0.1192, 0.9505],
        ],
        u = [],
        h = [],
        d = [],
        p = this.HSVToRGB(e, t, n);
      for (
        u.push(p.r / 255), u.push(p.g / 255), u.push(p.b / 255), o = 0;
        o < u.length;
        o++
      )
        u[o] =
          u[o] > 0.04045 ? Math.pow((u[o] + 0.055) / 1.055, 2.4) : u[o] / 12.92;
      for (a = 0; a < u.length; a++)
        h.push(u[0] * c[a][0] + u[1] * c[a][1] + u[2] * c[a][2]);
      for (
        h[0] = (100 * h[0]) / 95.047,
          h[1] = (100 * h[1]) / 100,
          h[2] = (100 * h[2]) / 108.883,
          l = 0;
        l < h.length;
        l++
      )
        d.push(
          h[l] > 0.008856 ? Math.pow(h[l], 1 / 3) : (903.3 * h[l] + 16) / 116
        );
      return (
        (i = Math.round(116 * d[1] - 16)),
        (r = Math.round(500 * (d[0] - d[1]))),
        (s = Math.round(200 * (d[1] - d[2]))),
        { l: i, a: r, b: s }
      );
    },
    LABToHSV: function (e, t, n) {
      var i,
        r,
        s,
        o = [],
        a = [];
      for (
        o[1] = (e + 16) / 116,
          o[0] = t / 500 + o[1],
          o[2] = o[1] - n / 200,
          i = 0;
        i < o.length;
        i++
      )
        (o[i] = Math.pow(o[i], 3)),
          !o[i] > 0.008856 && (o[i] = (o[i] - 16 / 116) / 7.787);
      for (
        o[0] = 0.95047 * o[0],
          o[1] = 1 * o[1],
          o[2] = 1.08883 * o[2],
          a[0] = 3.2406 * o[0] + -1.5372 * o[1] + o[2] * -0.4986,
          a[1] = o[0] * -0.9689 + 1.8758 * o[1] + 0.0415 * o[2],
          a[2] = 0.0557 * o[0] + o[1] * -0.204 + 1.057 * o[2],
          r = 0;
        r < a.length;
        r++
      )
        (a[r] =
          a[r] > 0.0031308
            ? 1.055 * Math.pow(a[r], 1 / 2.4) - 0.055
            : 12.92 * a[r]),
          (a[r] = 255 * Math.min(Math.max(0, a[r]), 1));
      return (s = this.RGBToHSV(a[0], a[1], a[2])), { h: s.h, s: s.s, v: s.v };
    },
    prototype: {
      _h: 0,
      _s: 0,
      _v: 0,
      _a: 100,
      _o: 1,
      isAchromatic: !1,
      init: function (e) {
        if (e instanceof Chameleon)
          (this._h = e.getHue()),
            (this._s = e.getSaturation()),
            (this._v = e.getValue());
        else if ("transparent" === e) this._a = 0;
        else if ("string" == typeof e && this.constructor.RGBRegExp.test(e)) {
          var t = this.constructor.RGBToHSV(
            parseInt(RegExp.$1),
            parseInt(RegExp.$2),
            parseInt(RegExp.$3)
          );
          (this._h = t.h),
            (this._s = t.s),
            (this._v = t.v),
            (this._o = RegExp.$5);
        } else if (
          "string" == typeof e &&
          this.constructor.HTMLRegExp.test(e)
        ) {
          var t = this.constructor.HexStringToHSV(RegExp.$1);
          (this._h = t.h), (this._s = t.s), (this._v = t.v);
        } else if (
          "string" == typeof e &&
          this.constructor.HTMLShortRegExp.test(e)
        ) {
          for (
            var n = e.match(this.constructor.HTMLShortRegExp)[1].split(""),
              i = [],
              r = 0;
            r < n.length;
            r++
          )
            i.push(n[r]), i.push(n[r]);
          var s = i.join(""),
            t = this.constructor.HexStringToHSV(s);
          (this._h = t.h), (this._s = t.s), (this._v = t.v);
        } else if (
          "string" == typeof e &&
          this.constructor.COLOR_NAMES[e.toLowerCase()]
        ) {
          var o = this.constructor.COLOR_NAMES[e.toLowerCase()].replace(
              "#",
              ""
            ),
            t = this.constructor.HexStringToHSV(o);
          (this._h = t.h), (this._s = t.s), (this._v = t.v);
        } else if (
          e instanceof Object &&
          e.hasOwnProperty("r") &&
          e.hasOwnProperty("g") &&
          e.hasOwnProperty("b")
        ) {
          var t = this.constructor.RGBToHSV(e.r, e.g, e.b);
          (this._h = t.h), (this._s = t.s), (this._v = t.v);
        } else {
          if (
            !(
              e instanceof Object &&
              e.hasOwnProperty("h") &&
              e.hasOwnProperty("s") &&
              e.hasOwnProperty("v")
            )
          )
            throw (
              (console.log("color could not be parsed"),
              console.log("color", typeof e),
              console.log(e),
              new Error("unparseable color"))
            );
          (this._h = e.h), (this._s = e.s), (this._v = e.v);
        }
        0 === this._s && (this.isAchromatic = !0);
      },
      getHue: function () {
        return this._h;
      },
      getSaturation: function () {
        return this._s;
      },
      getValue: function () {
        return this._v;
      },
      setHue: function (e) {
        return (this._h = e), this;
      },
      setSaturation: function (e) {
        return (
          (this._s = e), (this.isAchromatic = 0 === this._s ? !0 : !1), this
        );
      },
      setValue: function (e) {
        return (this._v = e), this;
      },
      iluminateBy: function (e) {
        return (this._v = this._v + e), this._v > 100 && (this._v = 100), this;
      },
      obscureBy: function (e) {
        return (this._v = this._v - e), this._v < 0 && (this._v = 0), this;
      },
      saturateBy: function (e) {
        return (
          0 === this._s
            ? (this.isAchromatic = !0)
            : this.setSaturation(this._s + e),
          this._s > 100 && (this._s = 100),
          this.isAchromatic === !0 && (this._s = 0),
          this
        );
      },
      desaturateBy: function (e) {
        return (
          this.setSaturation(this._s - e),
          this._s < 0 && ((this._s = 0), (this.isAchromatic = !0)),
          1 == this.isAchromatic && (this._s = 0),
          this
        );
      },
      rotateBy: function (e) {
        var t = this.copy();
        return (
          (t._h += e),
          t._h >= 360 && (t._h -= 360),
          t._h < 0 && (t._h += 360),
          t
        );
      },
      warmBy: function () {},
      coolBy: function () {},
      transform: function (e, t, n) {
        return (
          e > -1 && (this._h = e),
          t > -1 && (this._s = t),
          n > -1 && (this._v = n),
          0 === this._s && (this.isAchromatic = !0),
          this.isAchromatic === !0 && (this._s = 0),
          this
        );
      },
      setSV: function (e, t) {
        return this.transform(-1, e, t), this;
      },
      setBalancedSV: function (e, t) {
        var n = this.toGray();
        return (
          n._v > 50
            ? (e > -1 && this.desaturateBy(e), t > -1 && this.obscureBy(t))
            : (e > -1 && this.saturateBy(e), t > -1 && this.iluminateBy(t)),
          this
        );
      },
      gradientSV: function (e, t) {
        return (
          this._v > 50
            ? (e > -1 && 100 == this.saturation
                ? this.desaturateBy(e)
                : e > -1 && 0 === this.saturation && this.saturateBy(e),
              t > -1 && this.obscureBy(t))
            : (e > -1 && 0 === this.saturation
                ? this.saturateBy(e)
                : e > -1 && 100 == this.saturation && this.desaturateBy(e),
              t > -1 && this.iluminateBy(t)),
          this
        );
      },
      copy: function () {
        return new this.constructor(this);
      },
      getLuminance: function () {
        var e = this.toLAB();
        return e.l;
      },
      isLegible: function (e) {
        var t = e.toGray(),
          n = this.toGray();
        return Math.abs(t.getValue() - n.getValue()) > 30 ? !0 : !1;
      },
      getLegibles: function (e) {
        var t = [];
        this.isLegible(e) && t.push(e);
        var n,
          i = e.getHue();
        if (e.isAchromatic)
          for (var r = 0; 100 >= r; r += 1)
            (n = new this.constructor({ h: i, s: 0, v: r })),
              this.isLegible(n) && t.push(n);
        else
          for (var s = 0; 100 >= s; s += 10)
            for (var r = 0; 100 >= r; r += 10)
              (n = new this.constructor({ h: i, s: s, v: r })),
                this.isLegible(n) && t.push(n);
        for (var o = {}, a = 0; a < t.length; a++) o[t[a].toHTML()] = !0;
        var l = [];
        for (var a in o) l.push(a);
        for (var c = [], u = [], h = l.length, a = 0; h > a; a++) {
          var e = new Chameleon(l[a]),
            d = e._s + e._v;
          130 >= d ? u.push(l[a]) : c.push(l[a]);
        }
        c.sort(function (e, t) {
          return (
            parseInt(e.substr(1, e.length - 2), 16) -
            parseInt(t.substr(1, t.length - 2), 16)
          );
        }),
          u.sort(function (e, t) {
            return (
              parseInt(e.substr(1, e.length - 2), 16) -
              parseInt(t.substr(1, t.length - 2), 16)
            );
          }),
          (l = u.concat(c));
        for (var p = [], f = Math.round(l.length / 10), a = 0; 9 > a; a++)
          p.push(l[f * a]);
        return p;
      },
      getLegible: function (e) {
        if (this.isLegible(e)) return this;
        for (var t = this.getLegibles(e), n = [], i = 0; i < t.length; i++)
          n.push(new Chameleon(t[i].toString()));
        return this.byNearestColor(n)[0];
      },
      byNearestColor: function (e) {
        var t = this;
        return e.sort(function (e, n) {
          return (
            Math.abs(e.toHex() - t.toHex()) - Math.abs(n.toHex() - t.toHex())
          );
        });
      },
      toGray: function () {
        var e,
          t,
          n,
          i = this.toRGB();
        return (
          (e = t = n = Math.round((11 * i.r + 16 * i.g + 5 * i.b) / 32)),
          new this.constructor({ r: e, g: t, b: n })
        );
      },
      toRGB: function () {
        return this.constructor.HSVToRGB(this._h, this._s, this._v);
      },
      toHSV: function () {
        return { h: this._h, s: this._s, v: this._v };
      },
      toLAB: function () {
        return this.constructor.HSVToLAB(this._h, this._s, this._v);
      },
      toHex: function f() {
        var f = Number(this.toHTML().toString().replace("#", "0x"));
        return f;
      },
      toHTML: function () {
        if (0 === this._a) return "transparent";
        var e = this.toRGB(),
          t = e.r.toString(16),
          n = e.g.toString(16),
          i = e.b.toString(16);
        return (
          1 === t.length && (t = "0" + t),
          1 === n.length && (n = "0" + n),
          1 === i.length && (i = "0" + i),
          "#" + t.toString() + n.toString() + i.toString()
        );
      },
      toHTMLRGB: function () {
        if (0 === this._a) return "transparent";
        var e = this.toRGB();
        return (!this._o && 0 !== this._o) || 1 == this._o
          ? "rgb(" + e.r + ", " + e.g + "," + e.b + ")"
          : "rgba(" + e.r + ", " + e.g + "," + e.b + ", " + this._o / 100 + ")";
      },
      complementary: function () {
        return this.rotateBy(180);
      },
      triadic: function (e, t) {
        return (
          (e = e || "1"), (t = t || 120), this.rotateBy("1" == e ? t : -1 * t)
        );
      },
      analogous: function (e, t) {
        return (
          (e = e || "1"), (t = t || 30), this.rotateBy("1" == e ? t : -1 * t)
        );
      },
      split: function (e, t) {
        return (
          (e = e || "1"), (t = t || 150), this.rotateBy("1" == e ? t : -1 * t)
        );
      },
      balanceChoose: function (e, t) {
        var n = this.toGray();
        return n._v > 50 ? t : e;
      },
    },
  }),
  "undefined" != typeof module &&
    "undefined" != typeof module.exports &&
    (module.exports = Chameleon),
  (THREE.ColladaLoader = function (e) {
    this.manager = void 0 !== e ? e : THREE.DefaultLoadingManager;
  }),
  (THREE.ColladaLoader.prototype = {
    constructor: THREE.ColladaLoader,
    crossOrigin: "Anonymous",
    load: function (e, t, n, i, r) {
      var s = this,
        o = THREE.Loader.prototype.extractUrlBase(e),
        a = new THREE.FileLoader(s.manager);
      a.load(
        e,
        function (e) {
          n(s.parse(e, o, t));
        },
        i,
        r
      );
    },
    options: {
      set convertUpAxis(e) {
        console.log("THREE.ColladaLoader.options.convertUpAxis: TODO");
      },
    },
    setCrossOrigin: function (e) {
      this.crossOrigin = e;
    },
    parse: function (e, t, n) {
      function i(e, t) {
        for (var n = [], i = e.childNodes, r = 0, s = i.length; s > r; r++) {
          var o = i[r];
          o.nodeName === t && n.push(o);
        }
        return n;
      }
      function r(e) {
        if (0 === e.length) return [];
        for (
          var t = e.trim().split(/\s+/),
            n = new Array(t.length),
            i = 0,
            r = t.length;
          r > i;
          i++
        )
          n[i] = t[i];
        return n;
      }
      function s(e) {
        if (0 === e.length) return [];
        for (
          var t = e.trim().split(/\s+/),
            n = new Array(t.length),
            i = 0,
            r = t.length;
          r > i;
          i++
        )
          n[i] = parseFloat(t[i]);
        return n;
      }
      function o(e) {
        if (0 === e.length) return [];
        for (
          var t = e.trim().split(/\s+/),
            n = new Array(t.length),
            i = 0,
            r = t.length;
          r > i;
          i++
        )
          n[i] = parseInt(t[i]);
        return n;
      }
      function a(e) {
        return e.substring(1);
      }
      function l(e) {
        return 0 === Object.keys(e).length;
      }
      function c(e) {
        return { unit: u(i(e, "unit")[0]), upAxis: h(i(e, "up_axis")[0]) };
      }
      function u(e) {
        return void 0 !== e ? parseFloat(e.getAttribute("meter")) : 1;
      }
      function h(e) {
        return void 0 !== e ? e.textContent : "Y_UP";
      }
      function d(e, t, n, r) {
        var s = i(e, t)[0];
        if (void 0 !== s)
          for (var o = i(s, n), a = 0; a < o.length; a++) r(o[a]);
      }
      function p(e, t) {
        for (var n in e) {
          var i = e[n];
          i.build = t(e[n]);
        }
      }
      function f(e, t) {
        return void 0 !== e.build ? e.build : ((e.build = t(e)), e.build);
      }
      function m(e) {
        for (
          var t = { sources: {}, samplers: {}, channels: {} },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType) {
            var s;
            switch (r.nodeName) {
              case "source":
                (s = r.getAttribute("id")), (t.sources[s] = mt(r));
                break;
              case "sampler":
                (s = r.getAttribute("id")), (t.samplers[s] = g(r));
                break;
              case "channel":
                (s = r.getAttribute("target")), (t.channels[s] = v(r));
                break;
              default:
                console.log(r);
            }
          }
        }
        un.animations[e.getAttribute("id")] = t;
      }
      function g(e) {
        for (
          var t = { inputs: {} }, n = 0, i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "input":
                var s = a(r.getAttribute("source")),
                  o = r.getAttribute("semantic");
                t.inputs[o] = s;
            }
        }
        return t;
      }
      function v(e) {
        var t = {},
          n = e.getAttribute("target"),
          i = n.split("/"),
          r = i.shift(),
          s = i.shift(),
          o = -1 !== s.indexOf("("),
          l = -1 !== s.indexOf(".");
        if (l) (i = s.split(".")), (s = i.shift()), (t.member = i.shift());
        else if (o) {
          var c = s.split("(");
          s = c.shift();
          for (var u = 0; u < c.length; u++)
            c[u] = parseInt(c[u].replace(/\)/, ""));
          t.indices = c;
        }
        return (
          (t.id = r),
          (t.sid = s),
          (t.arraySyntax = o),
          (t.memberSyntax = l),
          (t.sampler = a(e.getAttribute("source"))),
          t
        );
      }
      function _(e) {
        var t = [],
          n = e.channels,
          i = e.samplers,
          r = e.sources;
        for (var s in n)
          if (n.hasOwnProperty(s)) {
            var o = n[s],
              a = i[o.sampler],
              l = a.inputs.INPUT,
              c = a.inputs.OUTPUT,
              u = a.inputs.INTERPOLATION,
              h = r[l],
              d = r[c],
              p = r[u],
              f = b(o, h, d, p);
            x(f, t);
          }
        return t;
      }
      function y(e) {
        return f(un.animations[e], _);
      }
      function b(e, t, n) {
        var i,
          r,
          s,
          o,
          a,
          l,
          c = un.nodes[e.id],
          u = Gt(c.id),
          h = c.transforms[e.sid],
          d = c.matrix.clone().transpose(),
          p = {};
        switch (h) {
          case "matrix":
            for (s = 0, o = t.array.length; o > s; s++)
              if (
                ((i = t.array[s]),
                (r = s * n.stride),
                void 0 === p[i] && (p[i] = {}),
                e.arraySyntax === !0)
              ) {
                var f = n.array[r],
                  m = e.indices[0] + 4 * e.indices[1];
                p[i][m] = f;
              } else
                for (a = 0, l = n.stride; l > a; a++) p[i][a] = n.array[r + a];
            break;
          case "translate":
            console.warn(
              'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',
              h
            );
            break;
          case "rotate":
            console.warn(
              'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',
              h
            );
            break;
          case "scale":
            console.warn(
              'THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',
              h
            );
        }
        var g = w(p, d),
          v = { name: u.uuid, keyframes: g };
        return v;
      }
      function w(e, t) {
        function n(e, t) {
          return e.time - t.time;
        }
        var i = [];
        for (var r in e) i.push({ time: parseFloat(r), value: e[r] });
        i.sort(n);
        for (var s = 0; 16 > s; s++) C(i, s, t.elements[s]);
        return i;
      }
      function x(e, t) {
        for (
          var n = e.keyframes,
            i = e.name,
            r = [],
            s = [],
            o = [],
            a = [],
            l = 0,
            c = n.length;
          c > l;
          l++
        ) {
          var u = n[l],
            h = u.time,
            d = u.value;
          en.fromArray(d).transpose(),
            en.decompose(Jt, Zt, Qt),
            r.push(h),
            s.push(Jt.x, Jt.y, Jt.z),
            o.push(Zt.x, Zt.y, Zt.z, Zt.w),
            a.push(Qt.x, Qt.y, Qt.z);
        }
        return (
          s.length > 0 &&
            t.push(new THREE.VectorKeyframeTrack(i + ".position", r, s)),
          o.length > 0 &&
            t.push(new THREE.QuaternionKeyframeTrack(i + ".quaternion", r, o)),
          a.length > 0 &&
            t.push(new THREE.VectorKeyframeTrack(i + ".scale", r, a)),
          t
        );
      }
      function C(e, t, n) {
        var i,
          r,
          s,
          o = !0;
        for (r = 0, s = e.length; s > r; r++)
          (i = e[r]), void 0 === i.value[t] ? (i.value[t] = null) : (o = !1);
        if (o === !0)
          for (r = 0, s = e.length; s > r; r++) (i = e[r]), (i.value[t] = n);
        else T(e, t);
      }
      function T(e, t) {
        for (var n, i, r = 0, s = e.length; s > r; r++) {
          var o = e[r];
          if (null === o.value[t]) {
            if (((n = S(e, r, t)), (i = E(e, r, t)), null === n)) {
              o.value[t] = i.value[t];
              continue;
            }
            if (null === i) {
              o.value[t] = n.value[t];
              continue;
            }
            k(o, n, i, t);
          }
        }
      }
      function S(e, t, n) {
        for (; t >= 0; ) {
          var i = e[t];
          if (null !== i.value[n]) return i;
          t--;
        }
        return null;
      }
      function E(e, t, n) {
        for (; t < e.length; ) {
          var i = e[t];
          if (null !== i.value[n]) return i;
          t++;
        }
        return null;
      }
      function k(e, t, n, i) {
        return n.time - t.time === 0
          ? void (e.value[i] = t.value[i])
          : void (e.value[i] =
              ((e.time - t.time) * (n.value[i] - t.value[i])) /
                (n.time - t.time) +
              t.value[i]);
      }
      function P(e) {
        for (
          var t = {
              name: e.getAttribute("id") || "default",
              start: parseFloat(e.getAttribute("start") || 0),
              end: parseFloat(e.getAttribute("end") || 0),
              animations: [],
            },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "instance_animation":
                t.animations.push(a(r.getAttribute("url")));
            }
        }
        un.clips[e.getAttribute("id")] = t;
      }
      function I(e) {
        for (
          var t = [],
            n = e.name,
            i = e.end - e.start || -1,
            r = e.animations,
            s = 0,
            o = r.length;
          o > s;
          s++
        )
          for (var a = y(r[s]), l = 0, c = a.length; c > l; l++) t.push(a[l]);
        return new THREE.AnimationClip(n, i, t);
      }
      function A(e) {
        return f(un.clips[e], I);
      }
      function O(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "skin":
                (t.id = a(r.getAttribute("source"))), (t.skin = D(r));
            }
        }
        un.controllers[e.getAttribute("id")] = t;
      }
      function D(e) {
        for (
          var t = { sources: {} }, n = 0, i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "bind_shape_matrix":
                t.bindShapeMatrix = s(r.textContent);
                break;
              case "source":
                var o = r.getAttribute("id");
                t.sources[o] = mt(r);
                break;
              case "joints":
                t.joints = M(r);
                break;
              case "vertex_weights":
                t.vertexWeights = R(r);
            }
        }
        return t;
      }
      function M(e) {
        for (
          var t = { inputs: {} }, n = 0, i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "input":
                var s = r.getAttribute("semantic"),
                  o = a(r.getAttribute("source"));
                t.inputs[s] = o;
            }
        }
        return t;
      }
      function R(e) {
        for (
          var t = { inputs: {} }, n = 0, i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "input":
                var s = r.getAttribute("semantic"),
                  l = a(r.getAttribute("source")),
                  c = parseInt(r.getAttribute("offset"));
                t.inputs[s] = { id: l, offset: c };
                break;
              case "vcount":
                t.vcount = o(r.textContent);
                break;
              case "v":
                t.v = o(r.textContent);
            }
        }
        return t;
      }
      function L(e) {
        var t = {};
        (t.id = e.id), (t.skin = N(e.skin));
        var n = un.geometries[t.id];
        return (
          (n.sources.skinIndices = t.skin.indices),
          (n.sources.skinWeights = t.skin.weights),
          t
        );
      }
      function N(e) {
        function t(e, t) {
          return t.weight - e.weight;
        }
        var n,
          i,
          r,
          s = 4,
          o = {
            joints: [],
            indices: { array: [], stride: s },
            weights: { array: [], stride: s },
          },
          a = e.sources,
          l = e.vertexWeights,
          c = l.vcount,
          u = l.v,
          h = l.inputs.JOINT.offset,
          d = l.inputs.WEIGHT.offset,
          p = e.sources[e.joints.inputs.JOINT],
          f = e.sources[e.joints.inputs.INV_BIND_MATRIX],
          m = a[l.inputs.WEIGHT.id].array,
          g = 0;
        for (n = 0, r = c.length; r > n; n++) {
          var v = c[n],
            _ = [];
          for (i = 0; v > i; i++) {
            var y = u[g + h],
              b = u[g + d],
              w = m[b];
            _.push({ index: y, weight: w }), (g += 2);
          }
          for (_.sort(t), i = 0; s > i; i++) {
            var x = _[i];
            void 0 !== x
              ? (o.indices.array.push(x.index), o.weights.array.push(x.weight))
              : (o.indices.array.push(0), o.weights.array.push(0));
          }
        }
        for (
          o.bindMatrix = new THREE.Matrix4()
            .fromArray(e.bindShapeMatrix)
            .transpose(),
            n = 0,
            r = p.array.length;
          r > n;
          n++
        ) {
          var C = p.array[n],
            T = new THREE.Matrix4()
              .fromArray(f.array, n * f.stride)
              .transpose();
          o.joints.push({ name: C, boneInverse: T });
        }
        return o;
      }
      function U(e) {
        return f(un.controllers[e], L);
      }
      function B(e) {
        var t = { init_from: i(e, "init_from")[0].textContent };
        un.images[e.getAttribute("id")] = t;
      }
      function F(e) {
        return void 0 !== e.build ? e.build : e.init_from;
      }
      function j(e) {
        return f(un.images[e], F);
      }
      function H(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "profile_COMMON":
                t.profile = $(r);
            }
        }
        un.effects[e.getAttribute("id")] = t;
      }
      function $(e) {
        for (
          var t = { surfaces: {}, samplers: {} },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "newparam":
                z(r, t);
                break;
              case "technique":
                t.technique = V(r);
            }
        }
        return t;
      }
      function z(e, t) {
        for (
          var n = e.getAttribute("sid"), i = 0, r = e.childNodes.length;
          r > i;
          i++
        ) {
          var s = e.childNodes[i];
          if (1 === s.nodeType)
            switch (s.nodeName) {
              case "surface":
                t.surfaces[n] = W(s);
                break;
              case "sampler2D":
                t.samplers[n] = G(s);
            }
        }
      }
      function W(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "init_from":
                t.init_from = r.textContent;
            }
        }
        return t;
      }
      function G(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "source":
                t.source = r.textContent;
            }
        }
        return t;
      }
      function V(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "constant":
              case "lambert":
              case "blinn":
              case "phong":
                (t.type = r.nodeName), (t.parameters = q(r));
            }
        }
        return t;
      }
      function q(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "emission":
              case "diffuse":
              case "specular":
              case "shininess":
              case "transparent":
              case "transparency":
                t[r.nodeName] = X(r);
            }
        }
        return t;
      }
      function X(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "color":
                t[r.nodeName] = s(r.textContent);
                break;
              case "float":
                t[r.nodeName] = parseFloat(r.textContent);
                break;
              case "texture":
                t[r.nodeName] = { id: r.getAttribute("texture"), extra: Y(r) };
            }
        }
        return t;
      }
      function Y(e) {
        for (
          var t = { technique: {} }, n = 0, i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "extra":
                K(r, t);
            }
        }
        return t;
      }
      function K(e, t) {
        for (var n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "technique":
                J(r, t);
            }
        }
      }
      function J(e, t) {
        for (var n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "repeatU":
              case "repeatV":
              case "offsetU":
              case "offsetV":
                t.technique[r.nodeName] = parseFloat(r.textContent);
                break;
              case "wrapU":
              case "wrapV":
                t.technique[r.nodeName] =
                  "TRUE" === r.textContent.toUpperCase()
                    ? 1
                    : "FALSE" === r.textContent.toUpperCase()
                    ? 0
                    : parseInt(r.textContent);
            }
        }
      }
      function Q(e) {
        return e;
      }
      function Z(e) {
        return f(un.effects[e], Q);
      }
      function et(e) {
        for (
          var t = { name: e.getAttribute("name") },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "instance_effect":
                t.url = a(r.getAttribute("url"));
            }
        }
        un.materials[e.getAttribute("id")] = t;
      }
      function tt(e) {
        function t(e) {
          if (n) return n;
          var t = r.profile.samplers[e.id];
          if (void 0 !== t) {
            var i = r.profile.surfaces[t.source],
              s = an.load(j(i.init_from)),
              o = e.extra;
            if (
              void 0 !== o &&
              void 0 !== o.technique &&
              l(o.technique) === !1
            ) {
              var a = o.technique;
              (s.wrapS = a.wrapU
                ? THREE.RepeatWrapping
                : THREE.ClampToEdgeWrapping),
                (s.wrapT = a.wrapV
                  ? THREE.RepeatWrapping
                  : THREE.ClampToEdgeWrapping),
                s.offset.set(a.offsetU || 0, a.offsetV || 0),
                s.repeat.set(a.repeatU || 1, a.repeatV || 1);
            } else
              (s.wrapS = THREE.RepeatWrapping),
                (s.wrapT = THREE.RepeatWrapping);
            return s;
          }
          return (
            console.error("THREE.ColladaLoader: Undefined sampler", e.id), null
          );
        }
        var i,
          r = Z(e.url),
          s = r.profile.technique;
        switch (s.type) {
          case "phong":
          case "blinn":
            i = new THREE.MeshPhongMaterial();
            break;
          case "lambert":
            i = new THREE.MeshLambertMaterial();
            break;
          default:
            i = new THREE.MeshBasicMaterial();
        }
        i.name = e.name;
        var o = s.parameters;
        for (var a in o) {
          var c = o[a];
          switch (a) {
            case "diffuse":
              c.color && i.color.fromArray(c.color),
                c.texture && (i.map = t(c.texture));
              break;
            case "specular":
              c.color && i.specular && i.specular.fromArray(c.color),
                c.texture && (i.specularMap = t(c.texture));
              break;
            case "shininess":
              c["float"] && i.shininess && (i.shininess = c["float"]);
              break;
            case "emission":
              c.color && i.emissive && i.emissive.fromArray(c.color);
              break;
            case "transparent":
              i.transparent = !0;
              break;
            case "transparency":
              void 0 !== c["float"] && (i.opacity = c["float"]),
                (i.transparent = !0);
          }
        }
        return i;
      }
      function nt(e) {
        return f(un.materials[e], tt);
      }
      function it(e) {
        for (
          var t = { name: e.getAttribute("name") },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "optics":
                t.optics = rt(r);
            }
        }
        un.cameras[e.getAttribute("id")] = t;
      }
      function rt(e) {
        for (var t = 0; t < e.childNodes.length; t++) {
          var n = e.childNodes[t];
          switch (n.nodeName) {
            case "technique_common":
              return st(n);
          }
        }
        return {};
      }
      function st(e) {
        for (var t = {}, n = 0; n < e.childNodes.length; n++) {
          var i = e.childNodes[n];
          switch (i.nodeName) {
            case "perspective":
            case "orthographic":
              (t.technique = i.nodeName), (t.parameters = ot(i));
          }
        }
        return t;
      }
      function ot(e) {
        for (var t = {}, n = 0; n < e.childNodes.length; n++) {
          var i = e.childNodes[n];
          switch (i.nodeName) {
            case "xfov":
            case "yfov":
            case "xmag":
            case "ymag":
            case "znear":
            case "zfar":
            case "aspect_ratio":
              t[i.nodeName] = parseFloat(i.textContent);
          }
        }
        return t;
      }
      function at(e) {
        var t;
        switch (e.optics.technique) {
          case "perspective":
            t = new THREE.PerspectiveCamera(
              e.optics.parameters.yfov,
              e.optics.parameters.aspect_ratio,
              e.optics.parameters.znear,
              e.optics.parameters.zfar
            );
            break;
          case "orthographic":
            var n = e.optics.parameters.ymag,
              i = e.optics.parameters.xmag,
              r = e.optics.parameters.aspect_ratio;
            (i = void 0 === i ? n * r : i),
              (n = void 0 === n ? i / r : n),
              (i *= 0.5),
              (n *= 0.5),
              (t = new THREE.OrthographicCamera(
                -i,
                i,
                n,
                -n,
                e.optics.parameters.znear,
                e.optics.parameters.zfar
              ));
            break;
          default:
            t = new THREE.PerspectiveCamera();
        }
        return (t.name = e.name), t;
      }
      function lt(e) {
        return f(un.cameras[e], at);
      }
      function ct(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "technique_common":
                t = ut(r);
            }
        }
        un.lights[e.getAttribute("id")] = t;
      }
      function ut(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "directional":
              case "point":
              case "spot":
              case "ambient":
                (t.technique = r.nodeName), (t.parameters = ht(r));
            }
        }
        return t;
      }
      function ht(e) {
        for (var t = {}, n = 0, i = e.childNodes.length; i > n; n++) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "color":
                var o = s(r.textContent);
                t.color = new THREE.Color().fromArray(o);
                break;
              case "falloff_angle":
                t.falloffAngle = parseFloat(r.textContent);
                break;
              case "quadratic_attenuation":
                var a = parseFloat(r.textContent);
                t.distance = a ? Math.sqrt(1 / a) : 0;
            }
        }
        return t;
      }
      function dt(e) {
        var t;
        switch (e.technique) {
          case "directional":
            t = new THREE.DirectionalLight();
            break;
          case "point":
            t = new THREE.PointLight();
            break;
          case "spot":
            t = new THREE.SpotLight();
            break;
          case "ambient":
            t = new THREE.AmbientLight();
        }
        return (
          e.parameters.color && t.color.copy(e.parameters.color),
          e.parameters.distance && (t.distance = e.parameters.distance),
          t
        );
      }
      function pt(e) {
        return f(un.lights[e], dt);
      }
      function ft(e) {
        for (
          var t = {
              name: e.getAttribute("name"),
              sources: {},
              vertices: {},
              primitives: [],
            },
            n = i(e, "mesh")[0],
            r = 0;
          r < n.childNodes.length;
          r++
        ) {
          var s = n.childNodes[r];
          if (1 === s.nodeType) {
            var o = s.getAttribute("id");
            switch (s.nodeName) {
              case "source":
                t.sources[o] = mt(s);
                break;
              case "vertices":
                t.vertices = gt(s);
                break;
              case "polygons":
                console.warn(
                  "THREE.ColladaLoader: Unsupported primitive type: ",
                  s.nodeName
                );
                break;
              case "lines":
              case "linestrips":
              case "polylist":
              case "triangles":
                t.primitives.push(vt(s));
                break;
              default:
                console.log(s);
            }
          }
        }
        un.geometries[e.getAttribute("id")] = t;
      }
      function mt(e) {
        for (
          var t = { array: [], stride: 3 }, n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var o = e.childNodes[n];
          if (1 === o.nodeType)
            switch (o.nodeName) {
              case "float_array":
                t.array = s(o.textContent);
                break;
              case "Name_array":
                t.array = r(o.textContent);
                break;
              case "technique_common":
                var a = i(o, "accessor")[0];
                void 0 !== a && (t.stride = parseInt(a.getAttribute("stride")));
            }
        }
        return t;
      }
      function gt(e) {
        for (var t = {}, n = 0; n < e.childNodes.length; n++) {
          var i = e.childNodes[n];
          1 === i.nodeType &&
            (t[i.getAttribute("semantic")] = a(i.getAttribute("source")));
        }
        return t;
      }
      function vt(e) {
        for (
          var t = {
              type: e.nodeName,
              material: e.getAttribute("material"),
              count: parseInt(e.getAttribute("count")),
              inputs: {},
              stride: 0,
            },
            n = 0,
            i = e.childNodes.length;
          i > n;
          n++
        ) {
          var r = e.childNodes[n];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "input":
                var s = a(r.getAttribute("source")),
                  l = r.getAttribute("semantic"),
                  c = parseInt(r.getAttribute("offset"));
                (t.inputs[l] = { id: s, offset: c }),
                  (t.stride = Math.max(t.stride, c + 1));
                break;
              case "vcount":
                t.vcount = o(r.textContent);
                break;
              case "p":
                t.p = o(r.textContent);
            }
        }
        return t;
      }
      function _t(e) {
        for (var t = {}, n = 0; n < e.length; n++) {
          var i = e[n];
          void 0 === t[i.type] && (t[i.type] = []), t[i.type].push(i);
        }
        return t;
      }
      function yt(e) {
        var t = {},
          n = e.sources,
          i = e.vertices,
          r = e.primitives;
        if (0 === r.length) return {};
        var s = _t(r);
        for (var o in s) t[o] = bt(s[o], n, i);
        return t;
      }
      function bt(e, t, n) {
        for (
          var i = {},
            r = { array: [], stride: 0 },
            s = { array: [], stride: 0 },
            o = { array: [], stride: 0 },
            a = { array: [], stride: 0 },
            l = { array: [], stride: 4 },
            c = { array: [], stride: 4 },
            u = new THREE.BufferGeometry(),
            h = [],
            d = 0,
            p = 0,
            f = 0;
          f < e.length;
          f++
        ) {
          var m = e[f],
            g = m.inputs,
            v = 1;
          m.vcount && 4 === m.vcount[0] && (v = 2),
            (p =
              "lines" === m.type || "linestrips" === m.type
                ? 2 * m.count
                : 3 * m.count * v),
            u.addGroup(d, p, f),
            (d += p),
            m.material && h.push(m.material);
          for (var _ in g) {
            var y = g[_];
            switch (_) {
              case "VERTEX":
                for (var b in n) {
                  var w = n[b];
                  switch (b) {
                    case "POSITION":
                      wt(m, t[w], y.offset, r.array),
                        (r.stride = t[w].stride),
                        t.skinWeights &&
                          t.skinIndices &&
                          (wt(m, t.skinIndices, y.offset, l.array),
                          wt(m, t.skinWeights, y.offset, c.array));
                      break;
                    case "NORMAL":
                      wt(m, t[w], y.offset, s.array), (s.stride = t[w].stride);
                      break;
                    case "COLOR":
                      wt(m, t[w], y.offset, a.array), (a.stride = t[w].stride);
                      break;
                    case "TEXCOORD":
                      wt(m, t[w], y.offset, o.array), (o.stride = t[w].stride);
                      break;
                    default:
                      console.warn(
                        'THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',
                        b
                      );
                  }
                }
                break;
              case "NORMAL":
                wt(m, t[y.id], y.offset, s.array), (s.stride = t[y.id].stride);
                break;
              case "COLOR":
                wt(m, t[y.id], y.offset, a.array), (a.stride = t[y.id].stride);
                break;
              case "TEXCOORD":
                wt(m, t[y.id], y.offset, o.array), (o.stride = t[y.id].stride);
            }
          }
        }
        return (
          r.array.length > 0 &&
            u.addAttribute(
              "position",
              new THREE.Float32BufferAttribute(r.array, r.stride)
            ),
          s.array.length > 0 &&
            u.addAttribute(
              "normal",
              new THREE.Float32BufferAttribute(s.array, s.stride)
            ),
          a.array.length > 0 &&
            u.addAttribute(
              "color",
              new THREE.Float32BufferAttribute(a.array, a.stride)
            ),
          o.array.length > 0 &&
            u.addAttribute(
              "uv",
              new THREE.Float32BufferAttribute(o.array, o.stride)
            ),
          l.array.length > 0 &&
            u.addAttribute(
              "skinIndex",
              new THREE.Float32BufferAttribute(l.array, l.stride)
            ),
          c.array.length > 0 &&
            u.addAttribute(
              "skinWeight",
              new THREE.Float32BufferAttribute(c.array, c.stride)
            ),
          (i.data = u),
          (i.type = e[0].type),
          (i.materialKeys = h),
          i
        );
      }
      function wt(e, t, n, i) {
        function r(e) {
          for (var t = s[e + n] * u, r = t + u; r > t; t++) i.push(c[t]);
        }
        var s = e.p,
          o = e.stride,
          a = e.vcount,
          l = 0,
          c = t.array,
          u = t.stride;
        if (void 0 !== e.vcount) {
          for (var h = 0, d = 0, p = a.length; p > d; d++) {
            var f = a[d];
            if (4 === f) {
              var m = h + 0 * o,
                g = h + 1 * o,
                v = h + 2 * o,
                _ = h + 3 * o;
              r(m), r(g), r(_), r(g), r(v), r(_);
            } else if (3 === f) {
              var m = h + 0 * o,
                g = h + 1 * o,
                v = h + 2 * o;
              r(m), r(g), r(v);
            } else l = Math.max(l, f);
            h += o * f;
          }
          l > 0 &&
            console.log(
              "THREE.ColladaLoader: Geometry has faces with more than 4 vertices."
            );
        } else for (var d = 0, p = s.length; p > d; d += o) r(d);
      }
      function xt(e) {
        return f(un.geometries[e], yt);
      }
      function Ct(e) {
        for (
          var t = { name: e.getAttribute("name") || "", joints: [], links: [] },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "technique_common":
                Et(i, t);
            }
        }
        un.kinematicsModels[e.getAttribute("id")] = t;
      }
      function Tt(e) {
        return void 0 !== e.build ? e.build : e;
      }
      function St(e) {
        return f(un.kinematicsModels[e], Tt);
      }
      function Et(e, t) {
        for (var n = 0; n < e.childNodes.length; n++) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "joint":
                t.joints.push(kt(i));
                break;
              case "link":
                t.links.push(It(i));
            }
        }
      }
      function kt(e) {
        for (var t, n = 0; n < e.childNodes.length; n++) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "prismatic":
              case "revolute":
                t = Pt(i);
            }
        }
        return t;
      }
      function Pt(e, t) {
        for (
          var t = {
              sid: e.getAttribute("sid"),
              name: e.getAttribute("name") || "",
              axis: new THREE.Vector3(),
              limits: { min: 0, max: 0 },
              type: e.nodeName,
              static: !1,
              zeroPosition: 0,
              middlePosition: 0,
            },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "axis":
                var r = s(i.textContent);
                t.axis.fromArray(r);
                break;
              case "limits":
                var o = i.getElementsByTagName("max")[0],
                  a = i.getElementsByTagName("min")[0];
                (t.limits.max = parseFloat(o.textContent)),
                  (t.limits.min = parseFloat(a.textContent));
            }
        }
        return (
          t.limits.min >= t.limits.max && (t["static"] = !0),
          (t.middlePosition = (t.limits.min + t.limits.max) / 2),
          t
        );
      }
      function It(e) {
        for (
          var t = {
              sid: e.getAttribute("sid"),
              name: e.getAttribute("name") || "",
              attachments: [],
              transforms: [],
            },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "attachment_full":
                t.attachments.push(At(i));
                break;
              case "matrix":
              case "translate":
              case "rotate":
                t.transforms.push(Ot(i));
            }
        }
        return t;
      }
      function At(e) {
        for (
          var t = {
              joint: e.getAttribute("joint").split("/").pop(),
              transforms: [],
              links: [],
            },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "link":
                t.links.push(It(i));
                break;
              case "matrix":
              case "translate":
              case "rotate":
                t.transforms.push(Ot(i));
            }
        }
        return t;
      }
      function Ot(e) {
        var t = { type: e.nodeName },
          n = s(e.textContent);
        switch (t.type) {
          case "matrix":
            (t.obj = new THREE.Matrix4()), t.obj.fromArray(n).transpose();
            break;
          case "translate":
            (t.obj = new THREE.Vector3()), t.obj.fromArray(n);
            break;
          case "rotate":
            (t.obj = new THREE.Vector3()),
              t.obj.fromArray(n),
              (t.angle = THREE.Math.degToRad(n[3]));
        }
        return t;
      }
      function Dt(e) {
        for (
          var t = { bindJointAxis: [] }, n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "bind_joint_axis":
                t.bindJointAxis.push(Mt(i));
            }
        }
        un.kinematicsScenes[a(e.getAttribute("url"))] = t;
      }
      function Mt(e) {
        for (
          var t = { target: e.getAttribute("target").split("/").pop() }, n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "axis":
                var r = i.getElementsByTagName("param")[0];
                (t.axis = r.textContent),
                  (t.jointIndex = parseInt(
                    t.axis.split("joint").pop().split(".")[0]
                  ));
            }
        }
        return t;
      }
      function Rt(e) {
        return void 0 !== e.build ? e.build : e;
      }
      function Lt(e) {
        return f(un.kinematicsScenes[e], Rt);
      }
      function Nt() {
        function e(e, t) {
          var n = (t.getAttribute("id"), t.getAttribute("name")),
            i = r.joints[e];
          o.traverse(function (r) {
            r.name === n &&
              (l[e] = {
                object: r,
                transforms: Ut(t),
                joint: i,
                position: i.zeroPosition,
              });
          });
        }
        var t = Object.keys(un.kinematicsModels)[0],
          n = Object.keys(un.kinematicsScenes)[0],
          i = Object.keys(un.visualScenes)[0];
        if (void 0 !== t && void 0 !== n) {
          for (
            var r = St(t),
              s = Lt(n),
              o = Xt(i),
              a = s.bindJointAxis,
              l = {},
              c = 0,
              u = a.length;
            u > c;
            c++
          ) {
            var h = a[c],
              d = rn.querySelector('[sid="' + h.target + '"]');
            if (d) {
              var p = d.parentElement;
              e(h.jointIndex, p);
            }
          }
          var f = new THREE.Matrix4();
          cn = {
            joints: r && r.joints,
            getJointValue: function (e) {
              var t = l[e];
              return t
                ? t.position
                : void console.warn(
                    "THREE.ColladaLoader: Joint " + e + " doesn't exist."
                  );
            },
            setJointValue: function (e, t) {
              var n = l[e];
              if (n) {
                var i = n.joint;
                if (t > i.limits.max || t < i.limits.min)
                  console.warn(
                    "THREE.ColladaLoader: Joint " +
                      e +
                      " value " +
                      t +
                      " outside of limits (min: " +
                      i.limits.min +
                      ", max: " +
                      i.limits.max +
                      ")."
                  );
                else if (i["static"])
                  console.warn(
                    "THREE.ColladaLoader: Joint " + e + " is static."
                  );
                else {
                  var r = n.object,
                    s = i.axis,
                    o = n.transforms;
                  en.identity();
                  for (var a = 0; a < o.length; a++) {
                    var c = o[a];
                    if (c.sid && -1 !== c.sid.indexOf("joint" + e))
                      switch (i.type) {
                        case "revolute":
                          en.multiply(
                            f.makeRotationAxis(s, THREE.Math.degToRad(t))
                          );
                          break;
                        case "prismatic":
                          en.multiply(
                            f.makeTranslation(s.x * t, s.y * t, s.z * t)
                          );
                          break;
                        default:
                          console.warn(
                            "THREE.ColladaLoader: Unknown joint type: " + i.type
                          );
                      }
                    else
                      switch (c.type) {
                        case "matrix":
                          en.multiply(c.obj);
                          break;
                        case "translate":
                          en.multiply(
                            f.makeTranslation(c.obj.x, c.obj.y, c.obj.z)
                          );
                          break;
                        case "scale":
                          en.scale(c.obj);
                          break;
                        case "rotate":
                          en.multiply(f.makeRotationAxis(c.obj, c.angle));
                      }
                  }
                  r.matrix.copy(en),
                    r.matrix.decompose(r.position, r.quaternion, r.scale),
                    (l[e].position = t);
                }
              } else
                console.log("THREE.ColladaLoader: " + e + " does not exist.");
            },
          };
        }
      }
      function Ut(e) {
        for (
          var t = [], n = rn.querySelector('[id="' + e.id + '"]'), i = 0;
          i < n.childNodes.length;
          i++
        ) {
          var r = n.childNodes[i];
          if (1 === r.nodeType)
            switch (r.nodeName) {
              case "matrix":
                var o = s(r.textContent),
                  a = new THREE.Matrix4().fromArray(o).transpose();
                t.push({
                  sid: r.getAttribute("sid"),
                  type: r.nodeName,
                  obj: a,
                });
                break;
              case "translate":
              case "scale":
                var o = s(r.textContent),
                  l = new THREE.Vector3().fromArray(o);
                t.push({
                  sid: r.getAttribute("sid"),
                  type: r.nodeName,
                  obj: l,
                });
                break;
              case "rotate":
                var o = s(r.textContent),
                  l = new THREE.Vector3().fromArray(o),
                  c = THREE.Math.degToRad(o[3]);
                t.push({
                  sid: r.getAttribute("sid"),
                  type: r.nodeName,
                  obj: l,
                  angle: c,
                });
            }
        }
        return t;
      }
      function Bt(e) {
        for (
          var t = {
              name: e.getAttribute("name"),
              type: e.getAttribute("type"),
              id: e.getAttribute("id"),
              sid: e.getAttribute("sid"),
              matrix: new THREE.Matrix4(),
              nodes: [],
              instanceCameras: [],
              instanceControllers: [],
              instanceLights: [],
              instanceGeometries: [],
              instanceNodes: [],
              transforms: {},
            },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          if (1 === i.nodeType)
            switch (i.nodeName) {
              case "node":
                i.hasAttribute("id") &&
                  (t.nodes.push(i.getAttribute("id")), Bt(i));
                break;
              case "instance_camera":
                t.instanceCameras.push(a(i.getAttribute("url")));
                break;
              case "instance_controller":
                t.instanceControllers.push(Ft(i));
                break;
              case "instance_light":
                t.instanceLights.push(a(i.getAttribute("url")));
                break;
              case "instance_geometry":
                t.instanceGeometries.push(Ft(i));
                break;
              case "instance_node":
                t.instanceNodes.push(a(i.getAttribute("url")));
                break;
              case "matrix":
                var r = s(i.textContent);
                t.matrix.multiply(en.fromArray(r).transpose()),
                  (t.transforms[i.getAttribute("sid")] = i.nodeName);
                break;
              case "translate":
                var r = s(i.textContent);
                tn.fromArray(r),
                  t.matrix.multiply(en.makeTranslation(tn.x, tn.y, tn.z)),
                  (t.transforms[i.getAttribute("sid")] = i.nodeName);
                break;
              case "rotate":
                var r = s(i.textContent),
                  o = THREE.Math.degToRad(r[3]);
                t.matrix.multiply(en.makeRotationAxis(tn.fromArray(r), o)),
                  (t.transforms[i.getAttribute("sid")] = i.nodeName);
                break;
              case "scale":
                var r = s(i.textContent);
                t.matrix.scale(tn.fromArray(r)),
                  (t.transforms[i.getAttribute("sid")] = i.nodeName);
                break;
              case "extra":
                break;
              default:
                console.log(i);
            }
        }
        return e.hasAttribute("id") && (un.nodes[e.getAttribute("id")] = t), t;
      }
      function Ft(e) {
        for (
          var t = {
              id: a(e.getAttribute("url")),
              materials: {},
              skeletons: [],
            },
            n = 0;
          n < e.childNodes.length;
          n++
        ) {
          var i = e.childNodes[n];
          switch (i.nodeName) {
            case "bind_material":
              for (
                var r = i.getElementsByTagName("instance_material"), s = 0;
                s < r.length;
                s++
              ) {
                var o = r[s],
                  l = o.getAttribute("symbol"),
                  c = o.getAttribute("target");
                t.materials[l] = a(c);
              }
              break;
            case "skeleton":
              t.skeletons.push(a(i.textContent));
          }
        }
        return t;
      }
      function jt(e, t) {
        var n,
          i,
          r,
          s = [],
          o = [];
        for (n = 0; n < e.length; n++) {
          var a = e[n],
            l = Gt(a);
          Ht(l, t, s);
        }
        for (n = 0; n < t.length; n++)
          for (i = 0; i < s.length; i++)
            if (((r = s[i]), r.bone.name === t[n].name)) {
              (o[n] = r), (r.processed = !0);
              break;
            }
        for (n = 0; n < s.length; n++)
          (r = s[n]), r.processed === !1 && (o.push(r), (r.processed = !0));
        var c = [],
          u = [];
        for (n = 0; n < o.length; n++)
          (r = o[n]), c.push(r.bone), u.push(r.boneInverse);
        return new THREE.Skeleton(c, u);
      }
      function Ht(e, t, n) {
        e.traverse(function (e) {
          if (e.isBone === !0) {
            for (var i, r = 0; r < t.length; r++) {
              var s = t[r];
              if (s.name === e.name) {
                i = s.boneInverse;
                break;
              }
            }
            void 0 === i && (i = new THREE.Matrix4()),
              n.push({ bone: e, boneInverse: i, processed: !1 });
          }
        });
      }
      function $t(e) {
        for (
          var t = [],
            n = e.matrix,
            i = e.nodes,
            r = e.type,
            s = e.instanceCameras,
            o = e.instanceControllers,
            a = e.instanceLights,
            l = e.instanceGeometries,
            c = e.instanceNodes,
            u = 0,
            h = i.length;
          h > u;
          u++
        )
          t.push(Gt(i[u]));
        for (var u = 0, h = s.length; h > u; u++) t.push(lt(s[u]).clone());
        for (var u = 0, h = o.length; h > u; u++)
          for (
            var d = o[u],
              p = U(d.id),
              f = xt(p.id),
              m = Wt(f, d.materials),
              g = d.skeletons,
              v = p.skin.joints,
              _ = jt(g, v),
              y = 0,
              b = m.length;
            b > y;
            y++
          ) {
            var w = m[y];
            w.isSkinnedMesh &&
              (w.bind(_, p.skin.bindMatrix), w.normalizeSkinWeights()),
              t.push(w);
          }
        for (var u = 0, h = a.length; h > u; u++) t.push(pt(a[u]).clone());
        for (var u = 0, h = l.length; h > u; u++)
          for (
            var d = l[u],
              f = xt(d.id),
              m = Wt(f, d.materials),
              y = 0,
              b = m.length;
            b > y;
            y++
          )
            t.push(m[y]);
        for (var u = 0, h = c.length; h > u; u++) t.push(Gt(c[u]).clone());
        var w;
        if (0 === i.length && 1 === t.length) w = t[0];
        else {
          w = "JOINT" === r ? new THREE.Bone() : new THREE.Group();
          for (var u = 0; u < t.length; u++) w.add(t[u]);
        }
        return (
          (w.name = "JOINT" === r ? e.sid : e.name),
          w.matrix.copy(n),
          w.matrix.decompose(w.position, w.quaternion, w.scale),
          w
        );
      }
      function zt(e, t) {
        for (var n = [], i = 0, r = e.length; r > i; i++) {
          var s = t[e[i]];
          n.push(nt(s));
        }
        return n;
      }
      function Wt(e, t) {
        var n = [];
        for (var i in e) {
          var r = e[i],
            s = zt(r.materialKeys, t);
          0 === s.length &&
            s.push(
              "lines" === i || "linestrips" === i
                ? new THREE.LineBasicMaterial()
                : new THREE.MeshPhongMaterial()
            );
          var o = void 0 !== r.data.attributes.skinIndex;
          if (o) for (var a = 0, l = s.length; l > a; a++) s[a].skinning = !0;
          var c,
            u = 1 === s.length ? s[0] : s;
          switch (i) {
            case "lines":
              c = new THREE.LineSegments(r.data, u);
              break;
            case "linestrips":
              c = new THREE.Line(r.data, u);
              break;
            case "triangles":
            case "polylist":
              c = o
                ? new THREE.SkinnedMesh(r.data, u)
                : new THREE.Mesh(r.data, u);
          }
          n.push(c);
        }
        return n;
      }
      function Gt(e) {
        return f(un.nodes[e], $t);
      }
      function Vt(e) {
        for (
          var t = { name: e.getAttribute("name"), children: [] },
            n = i(e, "node"),
            r = 0;
          r < n.length;
          r++
        )
          t.children.push(Bt(n[r]));
        un.visualScenes[e.getAttribute("id")] = t;
      }
      function qt(e) {
        var t = new THREE.Group();
        t.name = e.name;
        for (var n = e.children, i = 0; i < n.length; i++) {
          var r = n[i];
          t.add(null === r.id ? $t(r) : Gt(r.id));
        }
        return t;
      }
      function Xt(e) {
        return f(un.visualScenes[e], qt);
      }
      function Yt(e) {
        var t = i(e, "instance_visual_scene")[0];
        return Xt(a(t.getAttribute("url")));
      }
      function Kt() {
        var e = un.clips;
        if (l(e) === !0) {
          if (l(un.animations) === !1) {
            var t = [];
            for (var n in un.animations)
              for (var i = y(n), r = 0, s = i.length; s > r; r++) t.push(i[r]);
            ln.push(new THREE.AnimationClip("default", -1, t));
          }
        } else for (var n in e) ln.push(A(n));
      }
      var Jt = new THREE.Vector3(),
        Qt = new THREE.Vector3(),
        Zt = new THREE.Quaternion(),
        en = new THREE.Matrix4(),
        tn = new THREE.Vector3();
      if ((console.time("THREE.ColladaLoader"), 0 === e.length))
        return { scene: new THREE.Scene() };
      console.time("THREE.ColladaLoader: DOMParser");
      var nn = new DOMParser().parseFromString(e, "application/xml");
      console.timeEnd("THREE.ColladaLoader: DOMParser");
      var rn = i(nn, "COLLADA")[0],
        sn = rn.getAttribute("version");
      console.log("THREE.ColladaLoader: File version", sn);
      var on = c(i(rn, "asset")[0]),
        an = new THREE.TextureLoader(this.manager);
      an.setPath(t).setCrossOrigin(this.crossOrigin);
      var ln = [],
        cn = {},
        un = {
          animations: {},
          clips: {},
          controllers: {},
          images: {},
          effects: {},
          materials: {},
          cameras: {},
          lights: {},
          geometries: {},
          nodes: {},
          visualScenes: {},
          kinematicsModels: {},
          kinematicsScenes: {},
        };
      console.time("THREE.ColladaLoader: Parse"),
        d(rn, "library_animations", "animation", m),
        d(rn, "library_animation_clips", "animation_clip", P),
        d(rn, "library_controllers", "controller", O),
        d(rn, "library_images", "image", B),
        d(rn, "library_effects", "effect", H),
        d(rn, "library_materials", "material", et),
        d(rn, "library_cameras", "camera", it),
        d(rn, "library_lights", "light", ct),
        d(rn, "library_geometries", "geometry", ft),
        d(rn, "library_nodes", "node", Bt),
        d(rn, "library_visual_scenes", "visual_scene", Vt),
        d(rn, "library_kinematics_models", "kinematics_model", Ct),
        d(rn, "scene", "instance_kinematics_scene", Dt),
        console.timeEnd("THREE.ColladaLoader: Parse"),
        console.time("THREE.ColladaLoader: Build"),
        p(un.animations, _),
        p(un.clips, I),
        p(un.controllers, L),
        p(un.images, F),
        p(un.effects, Q),
        p(un.materials, tt),
        p(un.cameras, at),
        p(un.lights, dt),
        p(un.geometries, yt),
        p(un.visualScenes, qt),
        console.timeEnd("THREE.ColladaLoader: Build"),
        Kt(),
        Nt();
      var hn = Yt(i(rn, "scene")[0]);
      return (
        "Z_UP" === on.upAxis && (hn.rotation.x = -Math.PI / 2),
        hn.scale.multiplyScalar(on.unit),
        console.timeEnd("THREE.ColladaLoader"),
        { animations: ln, kinematics: cn, library: un, scene: hn }
      );
    },
  });
var rule = {},
  styleAction = {},
  virtualSpaceEnabled,
  startingState = void 0,
  layersInfo = [],
  resizeFactor = 0,
  canvas,
  strokeFilterX,
  strokeFilter10,
  safebox,
  texts,
  graphics,
  gap,
  structure,
  virtualLayers,
  virtualLinks,
  ignoreRulesFlag = !1,
  debugTextArr = [];
(app = {}),
  (app.activeDocument = {}),
  (ElementPlacement = {}),
  (ElementPlacement.PLACEBEFORE = function (e, t) {
    (e = e.parent.removeChild(e)),
      t.parent.addChildAt(e, t.parent.getChildIndex(t) + 1),
      (app.activeDocument.activeLayer = e);
  }),
  (ElementPlacement.PLACEAFTER = function (e, t) {
    (e = e.parent.removeChild(e)),
      t.parent.addChildAt(e, t.parent.getChildIndex(t)),
      (app.activeDocument.activeLayer = e);
  }),
  (ElementPlacement.INSIDE = function (e, t) {
    !t.children ||
      t.children.length <= 0 ||
      ((e = e.parent.removeChild(e)),
      t.addChildAt(e, 0),
      (app.activeDocument.activeLayer = e));
  }),
  (rule._setDocument = function () {
    var e = engine.getCanvasSize();
    (app.activeDocument.layers = engine._stage.children[0].layers),
      (app.activeDocument.activeLayer = engine._stage.children[0]),
      (app.activeDocument.width = e.width),
      (app.activeDocument.height = e.height),
      (texts = null),
      (graphics = null),
      (safebox = null),
      (canvas = null);
  });
var fromBoundsToPointSize = function (e) {
    return (
      (e.x = e.bounds[0]),
      (e.y = e.bounds[1]),
      (e.width = e.bounds[2] - e.bounds[0]),
      (e.height = e.bounds[3] - e.bounds[1]),
      e
    );
  },
  UnitValue = function (e) {
    return e;
  },
  instanciateLayer = function (e) {
    var t = {};
    t.layer = virtualSpaceEnabled ? new VirtualLayer(e) : e;
    var n = e.getGlobalPosition();
    (t.xGlobalDiff = e.layerData.x - n.x),
      (t.yGlobalDiff = e.layerData.y - n.y);
    var i = {};
    return (
      (i.x = 0),
      (i.y = 0),
      e.anchor && ((i.x = e.anchor.x), (i.y = e.anchor.y)),
      (e.anchor = i),
      (t.x = e.x - i.x * e.width),
      (t.y = e.y - i.y * e.height),
      (t.width = e.width),
      (t.height = e.height),
      (t.bounds = [t.x, t.y, t.x + t.width, t.y + t.height]),
      (t.scale = {}),
      (t.scale.x = t.layer.scale.x),
      (t.scale.y = t.layer.scale.y),
      (t.visible = e.visible),
      t
    );
  },
  blankVisibility = function (e) {
    var t = engine.hasVisibleContent(e);
    e.visible = t;
  },
  getWidth = function (e) {
    return e.width || 0;
  },
  getHeight = function (e) {
    return e.height || 0;
  },
  getSafeboxRef = function () {
    var e = engine._getObjectByName("Safeboxes");
    return e;
  },
  getGraphicsRef = function () {
    var e = engine._getObjectByName("Graphics");
    return e;
  },
  getUserGraphicsRef = function () {
    var e = engine._getObjectByName(Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME);
    return e;
  },
  getTextsRef = function () {
    var e = engine._getObjectByName("Text");
    return e;
  },
  getTexts = function () {
    return (texts = this.instanciateLayer(this.getTextsRef()));
  },
  getGraphics = function () {
    var e = this.getGraphicsRef();
    return (
      "undefined" != typeof e &&
        Object.keys(e).length > 0 &&
        1 === e.layers.length &&
        (e = e.layers[0]),
      this.blankVisibility(e),
      (graphics = this.instanciateLayer(e))
    );
  },
  getSafebox = function () {
    var e;
    return (
      (e = this.getSafeboxRef()),
      (e.visible = !0),
      engine._treeWalker(e, "children", function (e) {
        e.visible = !0;
      }),
      (safebox = this.instanciateLayer(e)),
      engine._treeWalker(e, "children", function (e) {
        e.visible = !1;
      }),
      (e.visible = !1),
      (safebox.x = e.layerData.x),
      (safebox.y = e.layerData.y),
      safebox
    );
  },
  initializeTexts = function () {
    if (texts || this.getTexts()) {
      var e, t;
      for (e = "text", t = 0; t < texts.layer.children.length; t++)
        (e = e + "" + (t + 1)),
          (texts[e] = this.instanciateLayer(
            texts.layer.children[texts.layer.children.length - t - 1]
          )),
          (e = "text");
      return texts;
    }
  },
  initializeGraphics = function () {
    if (graphics || this.getGraphics()) {
      var e, t, n;
      for (
        e = "graphic", t = this.getGraphicsRef(), t.visible = !0, n = 0;
        n < t.children.length;
        n++
      )
        (e = e + "" + (n + 1)),
          this.blankVisibility(t.children[t.children.length - n - 1]),
          (graphics[e] = this.instanciateLayer(
            t.children[t.children.length - n - 1]
          )),
          (e = "graphic");
      return graphics;
    }
  },
  initializeSafeboxes = function () {
    if (safebox || getSafebox()) {
      var e, t;
      for (e = "safebox", t = 0; t < safebox.layer.children.length; t++)
        (e = e + "" + (t + 1)),
          (safebox[e] = this.instanciateLayer(
            safebox.layer.children[safebox.layer.children.length - t - 1]
          )),
          (safebox[e].visible = !0),
          (e = "safebox");
      return safebox;
    }
  },
  initialize = function (e) {
    e &&
      (e.canvas && (canvas = engine.getCanvas()),
      e.texts && !e.initTexts && (texts = this.getTexts()),
      e.graphics && this.getGraphics(),
      e.safebox && (safebox = this.getSafebox()),
      e.initTexts && this.initializeTexts(),
      e.initGraphics && this.initializeGraphics(),
      e.initSafeboxes && this.initializeSafeboxes());
  },
  initializeAll = function () {
    this.initialize({
      canvas: !0,
      texts: !0,
      graphics: !0,
      safebox: !0,
      initTexts: !0,
      initGraphics: !0,
      initSafeboxes: !0,
    });
  },
  moveToPosition = function (e, t, n) {
    if (e.visible)
      if (e.layers) {
        var i;
        for (i = 0; i < e.layers.length; i++)
          (px = e.layers[i].layer.x - e.x + t),
            (py = e.layers[i].layer.y - e.y + n),
            (e.layers[i].x = e.layers[i].x - e.x + t),
            (e.layers[i].y = e.layers[i].y - e.y + n),
            e.layers[i].layer.translate(px, py);
        (e.x = t),
          (e.y = n),
          (app.activeDocument.activeLayer = e.layers[0].layer);
      } else
        (e.x = t),
          (e.y = n),
          (t += e.layer.anchor.x * e.width),
          (n += e.layer.anchor.y * e.height),
          e.layer.translate(t, n),
          (app.activeDocument.activeLayer = e.layer);
  },
  resizeLayer = function (e, t, n) {
    if (e.visible) {
      var i, r, s, o, a, l, c;
      if (e.layers) {
        {
          var u = {};
          t / e.width;
        }
        for (
          u.x = t / e.width, u.y = n / e.height, c = 0;
          c < e.layers.length;
          c++
        )
          (i = e.x + (e.layers[c].layer.x - e.x) * u.x),
            (r = e.y + (e.layers[c].layer.y - e.y) * u.y),
            (s = e.layers[c].scale.x * u.x),
            (o = e.layers[c].scale.y * u.y),
            e.layers[c].layer.translate(i, r),
            e.layers[c].layer.resize(u.x, u.y),
            (e.layers[c].x =
              i - e.layers[c].layer.anchor.x * e.layers[c].layer.width),
            (e.layers[c].y =
              r - e.layers[c].layer.anchor.y * e.layers[c].layer.height),
            (e.layers[c].scale.x = s),
            (e.layers[c].scale.y = o),
            (e.layers[c].width = e.layers[c].layer.width),
            (e.layers[c].height = e.layers[c].layer.height);
        setVirtualBounds(e),
          (app.activeDocument.activeLayer = e.layers[0].layer);
      } else {
        var h = e.layer.getBounds();
        (a = h.right - h.left),
          (l = h.bottom - h.top),
          (s = t / a),
          (o = n / l),
          e.layer.resize(s, o),
          (e.scale.x = e.layer.scale.x),
          (e.scale.y = e.layer.scale.y),
          (e.width = e.layer.width),
          (e.height = e.layer.height),
          (app.activeDocument.activeLayer = e.layer);
      }
    }
  },
  resizeTextLayer = function (e, t, n) {
    var i = e.layer.style.clone(),
      r = i.fontSize,
      s = i.padding,
      o = e.width / e.scale.x,
      a = (e.height / e.scale.y, t / o);
    return (
      (i.fontSize = Math.ceil(r * a)),
      (i.padding = Math.ceil(s * a)),
      e.layer.setStyle(i),
      (e.scale.x = e.layer.scale.x),
      (e.scale.y = e.layer.scale.y),
      (e.width = e.layer.width),
      (e.height = e.layer.height),
      e
    );
  },
  resizeArcTextLayer = function (e, t) {
    (layer = e.layer.children[0]),
      (t = t || 1),
      (arcOptions = {
        contents: layer.rulesData.contents,
        diameter: layer.layerData.path.diameter,
        startAngle: layer.layerData.path.startAngle,
        justification: layer.layerData.justification,
        textInside: !1,
        outwardFacing: layer.layerData.flip,
        fontFamily: layer.rulesData.font,
        fontSize: layer.layerData.fontSize,
        kerning: layer.layerData.kerning,
        color: layer.rulesData.color,
        sizeConstant: t,
      }),
      (textItem = engine._drawArcText(arcOptions));
    (arcOptions.diameter + 2 * arcOptions.fontSize) / textItem.width;
    return (
      (trimmedData = engine._trimCanvas(textItem)),
      (textItem = trimmedData.canvas),
      (texture = PIXI.Texture.fromCanvas(textItem)),
      (layer.texture = texture),
      e
    );
  },
  getProportion = function (e) {
    return e.visible && 0 !== e.height ? e.width / e.height : 0;
  },
  alignLeft = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, t.x - e.width + n, e.y));
  },
  alignRight = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, t.x + t.width + n, e.y));
  },
  alignHorizontalCenter = function (e, t, n) {
    if (void 0 !== e && void 0 !== t && e.visible && t.visible) {
      n = n || 0;
      var i = t.x + t.width / 2,
        r = e.width / 2;
      this.moveToPosition(e, i - r + n, e.y);
    }
  },
  alignTop = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, e.x, t.y - e.height + n));
  },
  alignBottom = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, e.x, t.y + t.height + n));
  },
  alignVerticalCenter = function (e, t, n) {
    if (void 0 !== e && void 0 !== t && e.visible && t.visible) {
      n = n || 0;
      var i = t.y + t.height / 2,
        r = e.height / 2;
      this.moveToPosition(e, e.x, i - r + n);
    }
  },
  leftMostAlign = function () {
    if (arguments.length < 1) return void 0;
    for (var e = arguments[0].x, t = 0; t < arguments.length; t++)
      arguments[t].visible && arguments[t].x < e && (e = arguments[t].x);
    for (var t = 0; t < arguments.length; t++)
      (arguments[t].x = e),
        this.moveToPosition(arguments[t], e, arguments[t].y);
  },
  rightMostAlign = function () {
    if (arguments.length < 1) return void 0;
    for (
      var e = arguments[0].x + arguments[0].width, t = 0;
      t < arguments.length;
      t++
    )
      arguments[t].visible &&
        arguments[t].x + arguments[t].width > e &&
        (e = arguments[t].x + arguments[t].width);
    for (var t = 0; t < arguments.length; t++)
      (arguments[t].x = e - arguments[t].width),
        this.moveToPosition(arguments[t], e, arguments[t].y);
  },
  alignLeftEdge = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, t.x + n, e.y));
  },
  alignRightEdge = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), this.moveToPosition(e, t.x + t.width - e.width + n, e.y));
  },
  resizeObj = function (e, t, n) {
    1 === t
      ? (t = n * this.getProportion(e))
      : 1 === n && (n = t / this.getProportion(e)),
      this.resizeLayer(e, t, n);
  },
  resizeToFill = function (e, t) {
    var n = this.getProportion(t),
      i = this.getProportion(e);
    n > i ? this.resizeObj(e, t.width, 1) : this.resizeObj(e, 1, t.height),
      this.alignHorizontalCenter(e, t),
      this.alignVerticalCenter(e, t);
  },
  resizeToFit = function (e, t) {
    var n = this.getProportion(t),
      i = this.getProportion(e);
    n > i ? this.resizeObj(e, 1, t.height) : this.resizeObj(e, t.width, 1);
  },
  resizeWithLimits = function (e, t, n, i, r) {
    if (e && e.visible) {
      var s = this.getProportion(e),
        o = i / r;
      1 === t ? (t = n * s) : 1 === n && (n = t / s),
        s > o
          ? t > i && ((t = i), (n = t / s))
          : n > r && ((n = r), (t = n * s)),
        this.resizeObj(e, t, n);
    }
  },
  resizeWithRatio = function (e) {
    if (!(e.target && e.source && e.source.visible && e.target.visible))
      return void 0;
    var t = e.ratio || 1,
      n = e.target,
      i = e.source,
      r = this.getHeight(i) * this.getWidth(i),
      s = this.getProportion(n),
      o = r * t,
      a = Math.sqrt(o / s),
      l = e.widthLimit || o / a,
      c = e.heightLimit || a;
    this.resizeWithLimits(n, 1, a, l, c);
  },
  fitCenter = function (e, t, n) {
    if (e && e.visible) {
      canvas || engine.getCanvas(), (t = t || 100), (n = n || 100);
      var i = (canvas.width * t) / 100,
        r = (canvas.height * n) / 100;
      t > n
        ? this.resizeWithLimits(e, i, 1, i, r)
        : this.resizeWithLimits(e, 1, r, i, r),
        this.alignHorizontalCenter(e, canvas),
        this.alignVerticalCenter(e, canvas);
    }
  },
  makeVirtualGroup = function () {
    if (arguments.length < 2) return arguments[0];
    var e = {};
    for (
      e.layers = [],
        e.x = 0,
        e.y = 0,
        e.xGlobalDiff = 0,
        e.yGlobalDiff = 0,
        e.scale = {},
        e.scale.x = 1,
        e.scale.y = 1,
        i = 0;
      i < arguments.length;
      i++
    )
      (layer = arguments[i]), layer.visible && e.layers.push(layer);
    return (e.visible = e.layers.length > 0), setVirtualBounds(e), e;
  },
  setVirtualBounds = function (e) {
    var t,
      n,
      i = 1e5,
      r = 1e5,
      s = 0,
      o = 0;
    if (0 !== e.layers.length) {
      for (t = 0; t < e.layers.length; t++)
        (n = e.layers[t]),
          n.x < i && (i = n.x),
          n.y < r && (r = n.y),
          n.x + n.width > s && (s = n.x + n.width),
          n.y + n.height > o && (o = n.y + n.height);
      return (e.x = i), (e.y = r), (e.width = s - i), (e.height = o - r), e;
    }
  };
(rule.isNotExcluded = function (e) {
  return e.visible;
}),
  (rule.getFirstNotExcluded = function () {
    for (
      var e = Array.prototype.slice.call(arguments), t = null, n = 0;
      n < e.length;
      n++
    )
      if (((t = e[n]), t.visible === !0)) return e[n];
  });
var addCustomText = function (e, t, n) {
    if ("undefined" != typeof e && null != e && "" !== e) {
      canvas || engine.getCanvas();
      var i = t || "Arial",
        r = Number(n) || 12;
      return lowerText(e, i, r);
    }
  },
  lowerText = function (e, t, n) {
    var i = new PIXI.Text(e, {
      fontFamily: t,
      fontSize: n,
      fill: "white",
      trim: !0,
      strokeThickness: 0.2 * n,
    });
    return (
      i.position.set(
        canvas.width - i.width - 10,
        canvas.height - i.height - 10
      ),
      canvas.layer.addChild(i),
      canvas.layer.children[canvas.layer.children.length - 1]
    );
  },
  makeGroup = function () {
    return makeVirtualGroup.apply(this, arguments);
  };
(rule.makeGroup = function () {
  return makeVirtualGroup.apply(this, arguments);
}),
  (styleAction.getTextContents = function (e) {
    return engine._getCurrentTextContents(e.layerData.name);
  }),
  (styleAction.getOverlayColor = function (e) {
    return engine._getCurrentOverlayColor(e.layerData.name);
  }),
  (styleAction.getTemplateColor = function (e) {
    return styleAction.getOverlayColor(e);
  }),
  (styleAction._getAssetColor = function (e, t) {
    return engine._getAssetColor(e.layerData.name, t);
  }),
  (styleAction.getHexContrastColors = function (e) {
    var t, n, i, r, s, i, o, a, l;
    return (
      (o = { lights: "#FFFFFF", shadow: "#000000", main: e }),
      (t = new Chameleon(e)),
      (a = t.getHue()),
      (l = t.getSaturation()),
      (n = t.toLAB()),
      n.l > 85
        ? ((o.lights = e),
          (i = Chameleon.LABToHSV(n.l - 15, n.a, n.b)),
          (i.h = a),
          (r = Chameleon.LABToHSV((n.l - 30) * (40 / 70), n.a, n.b)),
          (r.h = a),
          0 === l && ((i.s = 0), (r.s = 0)),
          (o.main = new Chameleon(i).toHTML()),
          (o.shadow = new Chameleon(r).toHTML()))
        : n.l < 15
        ? ((o.shadow = e),
          (s = Chameleon.LABToHSV(n.l + 35, n.a, n.b)),
          (s.h = a),
          (i = Chameleon.LABToHSV(n.l + 15, n.a, n.b)),
          (i.h = a),
          0 === l && ((s.s = 0), (i.s = 0)),
          (o.lights = new Chameleon(s).toHTML()),
          (o.main = new Chameleon(i).toHTML()))
        : ((o.main = e),
          (s = Chameleon.LABToHSV(n.l + 15, n.a, n.b)),
          (s.h = a),
          (r = Chameleon.LABToHSV((n.l - 15) * (40 / 70), n.a, n.b)),
          (r.h = a),
          0 === l && ((s.s = 0), (r.s = 0)),
          (o.lights = new Chameleon(s).toHTML()),
          (o.shadow = new Chameleon(r).toHTML())),
      o
    );
  }),
  (styleAction.applyColorOverlay = function (e, t) {
    engine._reapplyColor(e, t);
  }),
  (styleAction.hideEffects = function (e) {
    e.visible && engine._hideEffects(e);
  }),
  (styleAction.skew = function (e, t, n) {
    var i, r, s, o, a, l, c, u, h, d, p, f, m;
    if (
      ((d = 2 * Math.PI),
      (r = (t * Math.PI) / 180),
      (s = (n * Math.PI) / 180),
      (i = { x: r, y: s }),
      (m = Math.abs(i.x) + Math.abs(i.y) > 0),
      e.layers)
    ) {
      for (f = [], p = 1; p < e.layers.length; p++)
        f.push(e.layers[p].y - e.layers[p - 1].y);
      for (p = 1; p < e.layers.length; p++)
        (o = f[p - 1]),
          (a = {}),
          (l = {}),
          (a.x = e.layers[p - 1].x),
          (a.y = e.layers[p - 1].y),
          (l.x = e.layers[p - 1].x + e.layers[p - 1].width),
          (l.y = e.layers[p - 1].width * Math.tan(i.y) + e.layers[p - 1].y),
          (c = (l.y - a.y) / (l.x - a.x)),
          (u = a.y - c * a.x),
          (h = o * Math.pow(Math.pow(c, 2) + 1, 0.5) + u),
          moveToPosition(e.layers[p], e.layers[p].x, c * e.layers[p].x + h);
      for (p = 0; p < e.layers.length; p++)
        e.layers[p].layer._skew(i), (e.layers[p].layer.layerData.hasSkew = m);
    } else e.layer._skew(i), (e.layer.layerData.hasSkew = m);
  }),
  (styleAction.rotate = function (e, t) {
    var n;
    (n = (t * Math.PI) / 180), e.rotate(n);
  }),
  (styleAction.stroke = function (e, t, n) {
    if (e.visible) {
      var i;
      (i = Math.floor(0.92 * t)), engine._applyRuleStroke(e, i, n);
    }
  });
var _sweepPixelMatrix = function (e) {
    for (
      var t = e.getContext("2d").getImageData(0, 0, e.width, e.height),
        n = [],
        i = [],
        r = [],
        s = [],
        o = 3;
      o < t.data.length;
      o += 4
    )
      i.push(t.data[o] > 240 ? 1 : 0),
        s.push(t.data[o]),
        ((o + 1) / 4) % e.width === 0 &&
          (n.push(i), (i = []), r.push(s), (s = []));
    return { matrix: n, rawMatrix: r };
  },
  _detectFit = function (e, t, n, i, r) {
    layersInfo = [];
    var s = function (e, t) {
        return !(t[0] > e[2] || t[2] < e[0] || t[1] > e[3] || t[3] < e[1]);
      },
      o = function () {
        var e,
          t,
          n = !1,
          i = [x.x, x.y, x.x + x[0].length, x.y + x.length],
          r = a(C, i);
        e: for (var s = r[0]; s <= r[2]; s++)
          for (var o = r[1]; o <= r[3]; o++) {
            if (void 0 === o || void 0 === s) break e;
            if (
              ((e = b[o][s]),
              (t = 0),
              x[o - x.y] && x[o - x.y][s - x.x] && (t = x[o - x.y][s - x.x]),
              e + t === 2)
            ) {
              n = !0;
              break e;
            }
          }
        return n;
      },
      a = function (e, t) {
        var n = [void 0, void 0, void 0, void 0];
        return s(e, t) === !1
          ? n
          : ((n[0] = Math.max(e[0], t[0])),
            (n[1] = Math.max(e[1], t[1])),
            (n[2] = Math.min(e[2], t[2])),
            (n[3] = Math.min(e[3], t[3])),
            n);
      },
      l = engine.getDocumentDimensions(),
      c = l.width,
      u = l.height,
      h = c / u,
      d = 80,
      p = 120,
      f = d / p;
    h > f ? (d = p * (c / u)) : (p = d / (c / u));
    {
      var m = c / d,
        g = engine._resizeCanvas(t.canvas, d, p),
        v = engine._resizeCanvas(
          e.canvas,
          e.canvas.width / m,
          e.canvas.height / m
        ),
        _ = e.bounds,
        y = _sweepPixelMatrix(g),
        b = y.matrix,
        w = (y.rawMatrix, _sweepPixelMatrix(v)),
        x = w.matrix;
      w.rawMatrix;
    }
    (x.x = Math.round(_.x / m)), (x.y = Math.round(_.y / m));
    var C = t.bounds;
    (C = [C.x, C.y, C.width + C.x, C.height + C.y]),
      (C = C.map(function (e) {
        return Math.round(e / m);
      }));
    var T = Math.round(C[0] + (C[2] - C[0]) / 2),
      S = Math.round(C[1] + (C[3] - C[1]) / 2),
      E = _;
    (E = [E.x, E.y, E.width + E.x, E.height + E.y]),
      (E = E.map(function (e) {
        return Math.round(e / m);
      }));
    var k =
      (Math.round(E[0] + (E[2] - E[0]) / 2),
      Math.round(E[1] + (E[3] - E[1]) / 2));
    if (S > k) var P = "up";
    else var P = "down";
    var I =
        (Math.max(C[0] - 3 * Math.floor((E[2] - E[0]) / 4), 0),
        Math.min(
          C[2] - Math.round((E[2] - E[0]) / 4),
          b[0].length - (E[2] - E[0])
        ),
        E[2] - E[0]),
      A = E[3] - E[1],
      O = a(
        [0, 0, b[0].length - I, b.length - A],
        [C[0] - I, C[1] - A, C[2] + I, C[3] + A]
      );
    "up" === P &&
      (O[3] = O[1] + Math.floor((O[3] - O[1]) / 2) - Math.floor(A / 2)),
      "down" === P &&
        (O[1] = O[1] + Math.ceil((O[3] - O[1]) / 2) - Math.floor(A / 2)),
      void 0 !== n && ((i = i || Math.abs(n) - 5), (r = r || Math.abs(n) + 5));
    for (var D = [], M = O[0]; M <= O[2]; M++)
      for (var R = O[1]; R <= O[3]; R++)
        if (((x.x = M), (x.y = R), o() === !1)) {
          var L =
              (180 *
                Math.atan2(
                  R + Math.round(A / 2) - S,
                  M + Math.round(I / 2) - T
                )) /
              Math.PI,
            N = void 0 === n && 30 < Math.abs(L) && Math.abs(L) < 150,
            U = void 0 !== n && i < Math.abs(L) && Math.abs(L) < r,
            B = N || U;
          if (!B) continue;
          D.push({
            x: M,
            y: R,
            distance: Math.sqrt(
              Math.pow(M + Math.round(I / 2) - T, 2) +
                Math.pow(R + Math.round(A / 2) - S, 2)
            ),
            angle: L,
          });
        }
    var F = D.sort(function (e, t) {
      return (e = e.distance), (t = t.distance), t > e ? -1 : e > t ? 1 : 0;
    });
    return {
      x: F[0].x * m,
      y: F[0].y * m,
      anchor: g,
      target: v,
      resizeFactor: m,
    };
  };
rule.fit = function (e, t, n, i, r) {
  if (void 0 !== e && void 0 !== t && e.visible && t.visible) {
    var s = engine.flattenRuleGroup([e]),
      o = s.children[0].x,
      a = s.children[0].y;
    s.children[0].x = s.children[0].y = 0;
    var l = engine._renderTextForFitting(s);
    (s.children[0].x = o), (s.children[0].y = a);
    var c = { canvas: l.view, bounds: e.layer.getBounds() },
      u = engine.flattenRuleGroup(t.layer ? [t] : t.layers),
      h = engine._renderTextForFitting(u, !0),
      d = { canvas: h.view, bounds: u.getBounds() },
      p = _detectFit(c, d, n, i, r);
    e.layer.translate(p.x, p.y), (e.x = p.x), (e.y = p.y);
  }
};
var resizeSingleLineTexts = function () {
    if (!(arguments.length < 1))
      for (var e = 0; e < arguments.length; e++) {
        var t = arguments[e],
          n = 1;
        "undefined" != typeof valueOptions &&
          valueOptions["textSizes" + (t - 1)] &&
          (n = valueOptions["textSizes" + (t - 1)] / 100),
          resizeWithLimits(
            texts["text" + t],
            1,
            getHeight(safebox["safebox" + t]) * n,
            getWidth(safebox["safebox" + t]) * n,
            getHeight(safebox["safebox" + t]) * n
          );
      }
  },
  resizeMultilineTexts = function () {
    if (!(arguments.length < 1))
      for (var e = 0; e < arguments.length; e++) {
        var t = arguments[e],
          n = engine._uiJSON.text[t - 1].contents.split("\r"),
          i = 1;
        "undefined" != typeof valueOptions &&
          valueOptions["textSizes" + (t - 1)] &&
          (i = valueOptions["textSizes" + (t - 1)] / 100);
        for (var r = 0, s = 0; s < n.length; s++) n[s].length > 0 && r++;
        var o = r / engine._uiJSON.text[t - 1].maxLines;
        resizeWithLimits(
          texts["text" + t],
          1,
          getHeight(safebox["safebox" + t]) * i * o,
          getWidth(safebox["safebox" + t]) * i,
          getHeight(safebox["safebox" + t]) * i
        );
      }
  },
  resizeGraphics = function () {
    if (!(arguments.length < 1))
      for (var e = 0; e < arguments.length; e++) {
        var t = arguments[e],
          n = getTextsRef().layers.length;
        resizeToFit(graphics["graphic" + t], safebox["safebox" + (e + 1 + n)]);
      }
  },
  getGap = function () {
    gap = getHeight(safebox["safebox" + getSafeboxRef().layers.length]);
  },
  alignMultipleLayers = function () {
    if (!(arguments.length < 1))
      for (
        var e = arguments[arguments.length - 1],
          t = arguments[arguments.length - 2],
          n = 0;
        n < arguments.length - 2;
        n++
      ) {
        var i = arguments[n];
        t(i, e);
      }
  },
  alignVerticalSerie = function () {
    var e = Array.prototype.slice.call(arguments);
    e = e.filter(function (e) {
      return "object" == typeof e;
    });
    for (var t = [], n = 0; n < e.length - 2; n++) {
      var i = e.slice(0, n + 2).reverse();
      t[n] = rule.getFirstNotExcluded.apply(this, i);
    }
    for (var n = 0, r = -1; n < arguments.length; ) {
      var s = 0 === n ? arguments[n] : t[r];
      "number" == typeof arguments[n + 1]
        ? (alignBottom(arguments[n + 2], s, arguments[n + 1]), (n += 2))
        : (alignBottom(arguments[n + 1], s), n++),
        r++;
    }
  },
  linkLayerVisibility = function () {
    if (!(arguments.length < 1))
      for (var e = arguments[0], t = 1; !arguments[t].visible; t++)
        if (t === arguments.length - 1)
          return (e.visible = !1), void (e.layer.visible = !1);
  },
  alignTopEdge = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), moveToPosition(e, e.x, t.y + n));
  },
  alignBottomEdge = function (e, t, n) {
    void 0 !== e &&
      void 0 !== t &&
      e.visible &&
      t.visible &&
      ((n = n || 0), moveToPosition(e, e.x, t.y + t.height - e.height + n));
  },
  makeVirtualGroup = function () {
    if (arguments.length < 2) return arguments[0];
    var e = {};
    for (
      e.layers = [],
        e.x = 0,
        e.y = 0,
        e.xGlobalDiff = 0,
        e.yGlobalDiff = 0,
        e.scale = {},
        e.scale.x = 1,
        e.scale.y = 1,
        i = 0;
      i < arguments.length;
      i++
    )
      if (void 0 === arguments[i].layers)
        (layer = arguments[i]), layer.visible && e.layers.push(layer);
      else
        for (var t = 0; t < arguments[i].layers.length; t++)
          (layer = arguments[i].layers[t]),
            layer.visible && e.layers.push(layer);
    return (e.visible = e.layers.length > 0), setVirtualBounds(e), e;
  },
  getLayerByName = function (e) {
    return engine._getObjectByName(e);
  },
  getColor = function (e) {
    var t = engine._getLayerFromUiJson(e + " Color", "graphic").color;
    if (!t)
      throw new Error("This template does not have a color with name: " + e);
    return t;
  },
  _hexToRgb = function (e) {
    var e = e.replace("#", "");
    return {
      red: parseInt(e.substring(0, 2), 16),
      green: parseInt(e.substring(2, 4), 16),
      blue: parseInt(e.substring(4, 6), 16),
    };
  },
  _unpackLayerOrGroup = function (e) {
    var t = [];
    return (
      e.layers
        ? e.layers.forEach(function (e) {
            e.layer && (e = e.layer), t.push(e);
          })
        : (e.layer && (e = e.layer), (t = [e])),
      t
    );
  },
  _getNewLayerData = function (e, t, n) {
    var i, r, s, o, a, l, c, u;
    return (
      (e = e || ""),
      (t = t || ""),
      (n = n || []),
      (o = []),
      (r = s = !1),
      (a = function (e) {
        return (
          engine._getLayerFromUiJson(e.layerData.name, "graphic") ||
          engine._getLayerFromUiJson(e.layerData.name, "text")
        );
      }),
      (l = function (e) {
        var t, n;
        return (
          (t = e.layerData && e.layerData.allowMove),
          (n = a(e)),
          t || (n && n.allowMove)
        );
      }),
      (c = function (e) {
        var t, n;
        return (
          (t = e.layerData && e.layerData.allowScale),
          (n = a(e)),
          t || (n && n.allowScale)
        );
      }),
      (u = function (e, t) {
        return e && t;
      }),
      e &&
        e.length &&
        ((r = e.map(l).reduce(u)),
        (s = e.map(c).reduce(u)),
        (o = e.map(function (e) {
          return e.layerData.name;
        }))),
      (n[0] = o),
      (i = {
        name: "Rules_strokes" + engine.newLayerSuffix,
        type: "Graphic",
        source: o,
        isRuleLayer: !0,
        ruleEffect: t,
        allowMove: r,
        allowScale: s,
        params: n,
        styles: { layerEffects: { ruleFX: "ruleFX" } },
      })
    );
  },
  _copyCanvas = function (e) {
    var t = document.createElement("canvas");
    return (
      (t.width = e.width),
      (t.height = e.height),
      (ctx = t.getContext("2d")),
      ctx.drawImage(e, 0, 0),
      t
    );
  },
  getLinearTransitionStops = function (e, t, n, i) {
    return [0, e, t, 4096, n, i];
  },
  getHardTransitionStops = function (e) {
    return (
      (e = e || "#000000"), [0, e, 0.3, 2048, e, 0.3, 2052, e, 0, 4096, e, 0]
    );
  },
  getSmoothTransitionStops = function (e) {
    return (
      (e = e || "#000000"),
      [
        0,
        e,
        0.03,
        900,
        e,
        0.05,
        1024,
        e,
        0.1,
        2048,
        e,
        0.25,
        2052,
        e,
        0,
        4096,
        e,
        0,
      ]
    );
  },
  createRectWithText = function (e, t, n) {
    var i = new PIXI.Graphics(),
      r = e.layer.getBounds();
    return (
      (n = n.replace("#", "0x")),
      e.layer.children.forEach(function (e) {
        (e.x += t), (e.y += t);
      }),
      (e.layer.x -= t),
      (e.layer.y -= t),
      i.beginFill(n),
      i.lineStyle(0, 0),
      i.drawRect(0, 0, r.width + 2 * t, r.height + 2 * t),
      (i.layerData = {
        name: e.layer.layerData.name + "_rectangle",
        type: "Graphic",
      }),
      e.layer.addChildAt(i, 0),
      e
    );
  },
  applyLinearGradient = function (e, t, n, i) {
    var r,
      s,
      o = _unpackLayerOrGroup(e),
      a = [],
      l = [],
      c = [];
    if (((n = n || 90), (i = i || 1), (i *= 100), t.length % 3 !== 0))
      throw new Error("Number of stops must be a multiple of 3");
    s = t[t.length - 3];
    for (var u = 0; u < t.length; u += 3)
      a.push({ location: t[u], color: _hexToRgb(t[u + 1]) }),
        l.push({ location: t[u], opacity: 100 * t[u + 2] });
    return (
      (r = {
        enabled: !0,
        mode: "normal",
        opacity: i,
        gradient: { interpolation: s, colors: a, transparency: l },
        angle: n,
        type: "linear",
        reverse: !1,
        dither: !1,
        align: !0,
        scale: 100,
        offset: { horizontal: 0, vertical: 0 },
      }),
      o.forEach(function (e) {
        var t,
          n = e.layerData.styles,
          i = n && n.layerEffects,
          s = e.parent;
        (n.layerEffects = { gradientFill: r }),
          (t = engine._applyGradientOverlay(s, e)),
          (n.layerEffects = i),
          (e.visible = !1),
          (t.layerData = _getNewLayerData()),
          s.addChild(t),
          c.push(t);
      }),
      makeVirtualGroup.apply(null, c)
    );
  },
  mapper = {},
  whoisthis = "TF";
(mapper.whoisthis = "mapper"),
  (mapper.initializeAll = initializeAll),
  (mapper.canvas = canvas),
  (mapper.safebox = safebox),
  (mapper.texts = texts),
  (mapper.graphics = graphics),
  (mapper.gap = gap),
  (mapper.structure = structure),
  (mapper.instanciateLayer = instanciateLayer),
  (mapper.blankVisibility = blankVisibility),
  (mapper.getWidth = getWidth),
  (mapper.getHeight = getHeight),
  (mapper.getSafeboxRef = getSafeboxRef),
  (mapper.getGraphicsRef = getGraphicsRef),
  (mapper.getTextsRef = getTextsRef),
  (mapper.getTexts = getTexts),
  (mapper.getGraphics = getGraphics),
  (mapper.getSafebox = getSafebox),
  (mapper.initializeTexts = initializeTexts),
  (mapper.initializeGraphics = initializeGraphics),
  (mapper.initializeSafeboxes = initializeSafeboxes),
  (mapper.initialize = initialize),
  (mapper.initializeAll = initializeAll),
  (mapper.moveToPosition = moveToPosition),
  (mapper.resizeLayer = resizeLayer),
  (mapper.resizeTextLayer = resizeTextLayer),
  (mapper.resizeArcTextLayer = resizeArcTextLayer),
  (mapper.getProportion = getProportion),
  (mapper.alignLeft = alignLeft),
  (mapper.alignRight = alignRight),
  (mapper.alignHorizontalCenter = alignHorizontalCenter),
  (mapper.alignTop = alignTop),
  (mapper.alignBottom = alignBottom),
  (mapper.alignVerticalCenter = alignVerticalCenter),
  (mapper.leftMostAlign = leftMostAlign),
  (mapper.rightMostAlign = rightMostAlign),
  (mapper.alignLeftEdge = alignLeftEdge),
  (mapper.alignRightEdge = alignRightEdge),
  (mapper.resizeObj = resizeObj),
  (mapper.resizeToFill = resizeToFill),
  (mapper.resizeToFit = resizeToFit),
  (mapper.resizeWithLimits = resizeWithLimits),
  (mapper.resizeWithRatio = resizeWithRatio),
  (mapper.fitCenter = fitCenter),
  (mapper.makeVirtualGroup = makeVirtualGroup),
  (mapper.setVirtualBounds = setVirtualBounds),
  (mapper.addCustomText = addCustomText),
  (mapper.lowerText = lowerText),
  (mapper.makeGroup = makeGroup),
  (mapper._sweepPixelMatrix = _sweepPixelMatrix),
  (mapper._detectFit = _detectFit),
  (mapper.resizeSingleLineTexts = resizeSingleLineTexts),
  (mapper.resizeMultilineTexts = resizeMultilineTexts),
  (mapper.resizeGraphics = resizeGraphics),
  (mapper.getGap = getGap),
  (mapper.alignMultipleLayers = alignMultipleLayers),
  (mapper.alignVerticalSerie = alignVerticalSerie),
  (mapper.linkLayerVisibility = linkLayerVisibility),
  (mapper.alignTopEdge = alignTopEdge),
  (mapper.alignBottomEdge = alignBottomEdge),
  (mapper.makeVirtualGroup = makeVirtualGroup);
var useXHeightBox = function () {
    new Error("This templating function is not supported");
  },
  getXHeight = function () {
    new Error("This templating function is not supported");
  },
  destroyVirtualGroup = function () {
    new Error("This templating function is not supported");
  },
  uid = function () {
    new Error("This templating function is not supported");
  },
  exportToJpeg = function () {
    new Error("This templating function is not supported");
  },
  sweepPixelMatrix = function () {
    new Error("This templating function is not supported");
  },
  sweepLayer = function () {
    new Error("This templating function is not supported");
  },
  detectFit = function () {
    new Error("This templating function is not supported");
  },
  fit2 = function () {
    new Error("This templating function is not supported");
  },
  setupDocument = function () {
    new Error("This templating function is not supported");
  },
  executeAndClose = function () {
    new Error("This templating function is not supported");
  },
  createRectangle = function () {
    new Error("This templating function is not supported");
  },
  showSafebox = function () {
    new Error("This templating function is not supported");
  },
  ignoreRules = function () {
    new Error("This templating function is not supported");
  },
  executeRules = function () {
    new Error("This templating function is not supported");
  },
  buildDebugText = function () {
    new Error("This templating function is not supported");
  },
  printDebugText = function () {
    new Error("This templating function is not supported");
  },
  debug = function () {
    new Error("This templating function is not supported");
  },
  linkLayers = function () {
    new Error("This templating function is not supported");
  },
  unlinkAllFrom = function () {
    new Error("This templating function is not supported");
  },
  cropBySizebox = function () {
    new Error("This templating function is not supported");
  },
  getLayerStructure = function () {
    new Error("This templating function is not supported");
  },
  addLayerSet = function () {
    new Error("This templating function is not supported");
  },
  getLayerStructureIfNeeded = function () {
    new Error("This templating function is not supported");
  },
  restoreStructureIfNeeded = function () {
    new Error("This templating function is not supported");
  },
  restoreStructure = function () {
    new Error("This templating function is not supported");
  },
  restoreLayerSet = function () {
    new Error("This templating function is not supported");
  },
  handleOrfanLayers = function () {
    new Error("This templating function is not supported");
  },
  moveLayerTo = function () {
    new Error("This templating function is not supported");
  },
  findLowestIndex = function () {
    new Error("This templating function is not supported");
  },
  useVirtualSpace = function () {
    new Error("This templating function is not supported");
  },
  VirtualLayer = function () {
    new Error("This templating function is not supported");
  },
  commit = function () {
    new Error("This templating function is not supported");
  };
(Transformations = {}),
  Class(
    Transformations,
    "Pipeline"
  )({
    prototype: {
      effects: null,
      init: function (e) {
        var t = e.effects;
        (this.effects = []),
          t.forEach(function (e) {
            this.effects.push(new Transformations[e.name](e.config));
          }, this);
      },
      process: function (e) {
        var t = Promise.resolve(e);
        return (
          this.effects.forEach(function (e) {
            t = t.then(e.process.bind(e));
          }),
          t
        );
      },
    },
  }),
  Class(
    Transformations,
    "MeshLiquify"
  )({
    prototype: {
      viewport: null,
      meshURI: null,
      camera: null,
      scene: null,
      renderer: null,
      plane: null,
      texture: null,
      init: function (e) {
        Transformations.MeshLiquify.renderer ||
          ((Transformations.MeshLiquify.renderer = new THREE.WebGLRenderer({
            alpha: !0,
            preserveDrawingBuffer: !0,
          })),
          Transformations.MeshLiquify.renderer.setSize(0, 0)),
          (this.meshURI = e.meshURI),
          (this.viewport = e.viewport);
      },
      getGridAndImageSizesFromMesh: function (e) {
        var t = {};
        return (
          (t.gridWidth = e.getInt32(16, !0)),
          (t.gridHeight = e.getInt32(20, !0)),
          (t.imgWidth = e.getInt32(60, !0)),
          (t.imgHeight = e.getInt32(56, !0)),
          t
        );
      },
      getUVsFromOriginalMesh: function (e, t) {
        for (
          var n = t.gridWidth,
            i = t.gridHeight,
            r = (t.imgWidth, t.imgHeight, new Float32Array(n * i * 2)),
            s = new Float32Array(n * i * 2),
            o = [],
            a = 64,
            l = 0;
          i > l;
          l++
        ) {
          for (var c = !0, u = 0, h = new Float32Array(2 * n); n > u; ) {
            if (c) {
              var d = e.getInt32(a, !0);
              (a += 4), (u += d);
            } else {
              var p = e.getInt32(a, !0);
              a += 4;
              for (var f = 0; p > f; f++) {
                var m = u + f,
                  g = e.getFloat32(a, !0) / (n - 1);
                a += 4;
                var v = e.getFloat32(a, !0) / (i - 1);
                (a += 4), (h[2 * m + 0] = g), (h[2 * m + 1] = v);
              }
              u += p;
            }
            c = !c;
          }
          for (var m = 0; n > m; m++) {
            var g = -h[2 * m + 0],
              v = -h[2 * m + 1],
              _ = 1 - m / (n - 1),
              y = 1 - l / (i - 1),
              b = m + l * n;
            if (
              ((r[2 * b + 0] = _),
              (r[2 * b + 1] = y),
              (s[2 * b + 0] = g),
              (s[2 * b + 1] = v),
              m !== n - 1 && l !== i - 1)
            ) {
              var w = m + 1 + l * n,
                x = m + 1 + (l + 1) * n,
                C = m + (l + 1) * n;
              o.push(b, x, w), o.push(x, C, b);
            }
          }
        }
        return s;
      },
      createMeshDataFromUVs: function (e, t) {
        for (
          var n = t.gridWidth,
            i = t.gridHeight,
            r =
              (t.imgWidth,
              t.imgHeight,
              new Float32Array((n + 1) * (i + 1) * 3)),
            s = new Float32Array((n + 1) * (i + 1) * 2),
            o = [],
            a = function (e) {
              return Math.max(0, Math.min(n - 1, e));
            },
            l = function (e) {
              return Math.max(0, Math.min(i - 1, e));
            },
            c = function (t, i) {
              return e[2 * (i * n + t) + 0];
            },
            u = function (t, i) {
              return e[2 * (i * n + t) + 1];
            },
            h = 0,
            d = 0;
          i + 1 > d;
          d++
        )
          for (var p = 0; n + 1 > p; p++) {
            var f = a(p - 1),
              m = l(d - 1),
              g = a(p - 1),
              v = l(d - 0),
              _ = a(p - 0),
              y = l(d - 1),
              b = a(p - 0),
              w = l(d - 0),
              x = c(f, m),
              C = u(f, m),
              T = c(g, v),
              S = u(g, v),
              E = c(_, y),
              k = u(_, y),
              P = c(b, w),
              I = u(b, w),
              A = (x + T + E + P) / 4,
              O = (C + S + k + I) / 4,
              D = p + d * (n + 1),
              M = 1 - p / n,
              R = 1 - d / i;
            if (
              ((r[2 * D + 0 + h] = M),
              (r[2 * D + 1 + h] = R),
              (r[2 * D + 2 + h] = 0),
              (h += 1),
              (s[2 * D + 0] = M + A),
              (s[2 * D + 1] = R + O),
              p !== n && d !== i)
            ) {
              var L = p + 1 + d * (n + 1),
                N = p + 1 + (d + 1) * (n + 1),
                U = p + (d + 1) * (n + 1);
              o.push(D, N, L), o.push(N, U, D);
            }
          }
        return { positions: r, uvs: s, indices: o };
      },
      createThreeMesh: function (e) {
        var t, n, i;
        return (
          (t = new THREE.BufferGeometry()),
          t.addAttribute("position", new THREE.BufferAttribute(e.positions, 3)),
          t.addAttribute("uv", new THREE.BufferAttribute(e.uvs, 2)),
          t.setIndex(e.indices),
          (n = new THREE.MeshBasicMaterial({ color: 16711680 })),
          (i = new THREE.Mesh(t, n))
        );
      },
      getMesh: function (e) {
        var t, n, i, r, s;
        return (
          (t = new DataView(e)),
          (n = this.getGridAndImageSizesFromMesh(t)),
          (i = this.getUVsFromOriginalMesh(t, n)),
          (r = this.createMeshDataFromUVs(i, n)),
          (s = this.createThreeMesh(r))
        );
      },
      applyMeshLiquify: function (e) {
        var t = Transformations.MeshLiquify.renderer;
        t.setSize(this.viewport.width, this.viewport.height),
          (t.domElement.style.width = "" + this.viewport.width + "px"),
          (t.domElement.style.height = "" + this.viewport.height + "px");
        var n = 0.5,
          i = new THREE.Scene(),
          r = new THREE.OrthographicCamera(n, -n, n, -n, 0.1, 100);
        r.position.z = 10;
        var s = new THREE.Vector3(0, 0, 0);
        r.lookAt(s);
        var o = new THREE.Texture(e);
        (o.offset.x = 1),
          (o.repeat.x = -1),
          (o.wrapS = o.wrapT = THREE.ClampToEdgeWrapping),
          (o.magFilter = THREE.LinearFilter),
          (o.minFilter = THREE.LinearFilter),
          (o.premultiplyAlpha = !0),
          (o.needsUpdate = !0);
        var a = this.getMesh(this.meshURI);
        (a.material = new THREE.MeshBasicMaterial({
          map: o,
          side: THREE.DoubleSide,
          transparent: !0,
          blending: THREE.CustomBlending,
          blendSrc: THREE.OneFactor,
        })),
          (a.material.transparent = !0),
          (a.material.needsUpdate = !0),
          (a.position.x -= 0.5),
          (a.position.y -= 0.5),
          (a.scale.z = -1),
          i.add(a),
          t.render(i, r);
        var l = _copyCanvas(t.domElement);
        return l;
      },
      process: function (e) {
        return new Promise(
          function (t) {
            var n = this.applyMeshLiquify(e);
            t(n);
          }.bind(this)
        );
      },
    },
  }),
  Class(
    Transformations,
    "Liquify"
  )({
    prototype: {
      viewport: null,
      colladaURI: null,
      camera: null,
      scene: null,
      renderer: null,
      plane: null,
      texture: null,
      init: function (e) {
        Transformations.Liquify.renderer ||
          (Transformations.Liquify.renderer = new THREE.WebGLRenderer({
            view: Engine._webGLRenderer.view,
            alpha: !0,
            antialias: !0,
            preserveDrawingBuffer: !0,
          })),
          (this.colladaURI = e.colladaURI),
          (this.viewport = e.viewport);
      },
      _renderScene: function (e) {
        var t,
          n = e.scene;
        return (
          (this.plane = n.getObjectByProperty("type", "Mesh")),
          (this.plane.material = new THREE.MeshBasicMaterial({
            map: this.texture,
            blending: THREE.CustomBlending,
            blendSrc: THREE.OneFactor,
            transparent: !0,
          })),
          (this.plane.material.needsUpdate = !0),
          this.scene.add(n),
          this.renderer.setSize(this.viewport.width, this.viewport.height),
          this.renderer.render(this.scene, this.camera),
          (t = _copyCanvas(this.renderer.domElement)),
          this.texture.dispose(),
          this.renderer.setSize(0, 0),
          t
        );
      },
      process: function (e) {
        var t, n, i, r, s, o;
        if (this.renderer)
          return (
            (this.texture = new THREE.Texture(e)),
            (this.texture.premultiplyAlpha = !0),
            (this.texture.needsUpdate = !0),
            (this.plane.material.map = this.texture),
            this.renderer.setSize(this.viewport.width, this.viewport.height),
            this.renderer.render(this.scene, this.camera),
            (o = _copyCanvas(this.renderer.domElement)),
            this.texture.dispose(),
            this.renderer.setSize(0, 0),
            Promise.resolve(o)
          );
        (t = 2),
          (n = t),
          (i = 2 * Math.atan(t / (2 * n))),
          (r = (180 * i) / Math.PI),
          (this.camera = new THREE.PerspectiveCamera(
            r,
            this.viewport.width / this.viewport.height,
            0.1,
            100
          )),
          this.camera.position.set(0, n, 0),
          this.camera.lookAt(new THREE.Vector3(0, 0, 0)),
          (this.scene = new THREE.Scene()),
          (s =
            "IMG" == e.tagName
              ? e.src
              : "CANVAS" == e.tagName
              ? e.toDataURL()
              : e),
          (this.texture = new THREE.ImageUtils.loadTexture(s)),
          (this.texture.premultiplyAlpha = !0),
          (this.texture.needsUpdate = !0),
          (this.renderer = Transformations.Liquify.renderer);
        var a = new THREE.ColladaLoader();
        return (
          (a.options.convertUpAxis = !0),
          new Promise(
            function (e, t) {
              a.load(
                this.colladaURI,
                this.texture,
                function (t) {
                  e(this._renderScene(t));
                }.bind(this),
                function () {},
                function () {
                  t(new Error("Error loading collada URI"));
                }
              );
            }.bind(this)
          )
        );
      },
    },
  }),
  Class(
    Transformations,
    "Perspective"
  )({
    prototype: {
      viewport: null,
      controlPoints: null,
      mainCanvas: null,
      _2DCanvas: null,
      settings: null,
      sourcePoints: null,
      destPoints: null,
      init: function (e) {
        var t, n, i;
        (t = {}),
          (this.viewport = {
            width: 2 * e.viewport.width,
            height: 2 * e.viewport.height,
          }),
          (this.controlPoints = []),
          e.bounds.forEach(function (e, n) {
            var i = n % 2 === 0 ? "x" : "y";
            (t[i] = e),
              "y" === i && this.controlPoints.push({ x: 2 * t.x, y: 2 * t.y });
          }, this),
          (n = { x: this.controlPoints[2].x, y: this.controlPoints[2].y }),
          (this.controlPoints[2].x = this.controlPoints[3].x),
          (this.controlPoints[2].y = this.controlPoints[3].y),
          (this.controlPoints[3].x = n.x),
          (this.controlPoints[3].y = n.y),
          Transformations.Perspective.mainCanvas ||
            ((i = document.createElement("canvas")),
            engine._uiJSON.highResolution
              ? ((i.width = 2 * engine._structureJSON.width),
                (i.height = 2 * engine._structureJSON.height))
              : ((i.width = 1), (i.height = 1)),
            (Transformations.Perspective.mainCanvas = i),
            (Transformations.Perspective.settings =
              this._setupWebGLContext(i))),
          (this.mainCanvas = Transformations.Perspective.mainCanvas),
          (this.settings = Transformations.Perspective.settings);
      },
      _nextHighestPowerOfTwo: function (e) {
        --e;
        for (var t = 1; 32 > t; t <<= 1) e |= e >> t;
        return e + 1;
      },
      _transformationFromQuadCorners: function (e, t) {
        for (
          var n = numeric.transpose([
              [t[0].x, t[0].y, t[1].x, t[1].y, t[2].x, t[2].y, t[3].x, t[3].y],
            ]),
            i = [],
            r = 0;
          r < e.length;
          r++
        )
          i.push([
            e[r].x,
            0,
            -t[r].x * e[r].x,
            e[r].y,
            0,
            -t[r].x * e[r].y,
            1,
            0,
          ]),
            i.push([
              0,
              e[r].x,
              -t[r].y * e[r].x,
              0,
              e[r].y,
              -t[r].y * e[r].y,
              0,
              1,
            ]);
        return numeric.transpose(numeric.dot(numeric.inv(i), n))[0];
      },
      _setupWebGLContext: function (e) {
        var t = { antialias: !0, depth: !1, preserveDrawingBuffer: !0 },
          n = { linearFiltering: !0, anisotropicFiltering: !1, mipMapping: !1 },
          i = e.getContext("webgl", t) || e.getContext("experimental-webgl", t);
        if (!i) throw new Error("Your browser doesn't seem to support WebGL.");
        var r =
          i.getExtension("EXT_texture_filter_anisotropic") ||
          i.getExtension("MOZ_EXT_texture_filter_anisotropic") ||
          i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
        r
          ? (n.anisotropicFiltering = !0)
          : ((n.mipMapping = !0),
            console.warn(
              "Your browser doesn't support anisotropic filtering. Ordinary MIP mapping will be used."
            ));
        var s = {},
          o = [
            "attribute vec2 aVertCoord;",
            "uniform mat4 uTransformMatrix;",
            "varying vec2 vTextureCoord;",
            "void main(void) {",
            "    vTextureCoord = aVertCoord;",
            "    gl_Position = uTransformMatrix * vec4(aVertCoord, 0.0, 1.0);",
            "}",
          ].join("\n"),
          a = i.createShader(i.VERTEX_SHADER);
        if (
          (i.shaderSource(a, o),
          i.compileShader(a),
          !i.getShaderParameter(a, i.COMPILE_STATUS))
        )
          throw new Error(
            "Failed to compile vertex shader:" + i.getShaderInfoLog(a)
          );
        var l = [
            "precision mediump float;",
            "varying vec2 vTextureCoord;",
            "uniform sampler2D uSampler;",
            "void main(void)  {",
            "    gl_FragColor = texture2D(uSampler, vTextureCoord);",
            "}",
          ].join("\n"),
          c = i.createShader(i.FRAGMENT_SHADER);
        if (
          (i.shaderSource(c, l),
          i.compileShader(c),
          !i.getShaderParameter(c, i.COMPILE_STATUS))
        )
          throw new Error(
            "Failed to compile fragment shader:" + i.getShaderInfoLog(c)
          );
        if (
          ((s.shaderProgram = i.createProgram()),
          i.attachShader(s.shaderProgram, a),
          i.attachShader(s.shaderProgram, c),
          i.linkProgram(s.shaderProgram),
          !i.getProgramParameter(s.shaderProgram, i.LINK_STATUS))
        )
          throw new Error("Shader linking failed.");
        return (
          (s.vertexBuffer = i.createBuffer()),
          i.useProgram(s.shaderProgram),
          (s.vertAttrib = i.getAttribLocation(s.shaderProgram, "aVertCoord")),
          (s.transMatUniform = i.getUniformLocation(
            s.shaderProgram,
            "uTransformMatrix"
          )),
          (s.samplerUniform = i.getUniformLocation(
            s.shaderProgram,
            "uSampler"
          )),
          (s.texture = i.createTexture()),
          i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !0),
          i.clearColor(0, 0, 0, 0),
          i.enable(i.BLEND),
          i.blendFunc(i.ONE, i.ONE_MINUS_SRC_ALPHA),
          i.blendEquation(i.FUNC_ADD),
          i.activeTexture(i.TEXTURE0),
          i.uniform1i(s.samplerUniform, 0),
          i.bindTexture(i.TEXTURE_2D, s.texture),
          i.bindBuffer(i.ARRAY_BUFFER, s.vertexBuffer),
          n.linearFiltering
            ? (i.texParameteri(
                i.TEXTURE_2D,
                i.TEXTURE_MIN_FILTER,
                n.mipMapping ? i.LINEAR_MIPMAP_LINEAR : i.LINEAR
              ),
              i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.LINEAR))
            : (i.texParameteri(
                i.TEXTURE_2D,
                i.TEXTURE_MIN_FILTER,
                n.mipMapping ? i.NEAREST_MIPMAP_NEAREST : i.LINEAR
              ),
              i.texParameteri(i.TEXTURE_2D, i.TEXTURE_MAG_FILTER, i.NEAREST)),
          { qualityOptions: n, anisoExt: r, glContext: i, glResources: s }
        );
      },
      process: function (e) {
        var t, n, i, r, s;
        engine._uiJSON.highResolution ||
          ((this.mainCanvas.width = this.viewport.width),
          (this.mainCanvas.height = this.viewport.height)),
          (i = this.settings.qualityOptions),
          (r = this.settings.glContext),
          (s = this.settings.glResources);
        var o = { w: e.width, h: e.height };
        (this._2DCanvas = document.createElement("canvas")),
          (this._2DCanvas.width = this._nextHighestPowerOfTwo(o.w)),
          (this._2DCanvas.height = this._nextHighestPowerOfTwo(o.h)),
          (t = this._2DCanvas.getContext("2d")),
          t.drawImage(e, 0, 0, e.width, e.height);
        try {
          if (
            (r.texImage2D(
              r.TEXTURE_2D,
              0,
              r.RGBA,
              r.RGBA,
              r.UNSIGNED_BYTE,
              this._2DCanvas
            ),
            this.settings.anisoExt)
          ) {
            var a = i.anisotropicFiltering
              ? r.getParameter(
                  this.settings.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT
                )
              : 1;
            r.texParameterf(
              r.TEXTURE_2D,
              this.settings.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,
              a
            );
          }
          i.mipMapping && r.generateMipmap(r.TEXTURE_2D);
          var l = o.w / this._2DCanvas.width,
            c = o.h / this._2DCanvas.height;
          (this.sourcePoints = [
            { x: 0, y: 0 },
            { x: l, y: 0 },
            { x: 0, y: c },
            { x: l, y: c },
          ]),
            (n = []);
          for (var u = 0; u < this.sourcePoints.length; u++)
            n.push(this.sourcePoints[u].x), n.push(this.sourcePoints[u].y);
          r.bufferData(r.ARRAY_BUFFER, new Float32Array(n), r.STATIC_DRAW),
            (this.destPoints = []);
          for (var u = 0; u < this.controlPoints.length; u++)
            this.destPoints.push({
              x: (2 * this.controlPoints[u].x) / this.viewport.width - 1,
              y: -((2 * this.controlPoints[u].y) / this.viewport.height) + 1,
            });
          var h = this._transformationFromQuadCorners(
            this.sourcePoints,
            this.destPoints
          );
          return (
            r.viewport(0, 0, this.viewport.width, this.viewport.height),
            r.enableVertexAttribArray(s.vertAttrib),
            r.vertexAttribPointer(s.vertAttrib, 2, r.FLOAT, !1, 0, 0),
            r.uniformMatrix4fv(s.transMatUniform, !1, [
              h[0],
              h[1],
              0,
              h[2],
              h[3],
              h[4],
              0,
              h[5],
              0,
              0,
              0,
              0,
              h[6],
              h[7],
              0,
              1,
            ]),
            t.clearRect(0, 0, this._2DCanvas.width, this._2DCanvas.height),
            (this._2DCanvas.width = this.viewport.width / 2),
            (this._2DCanvas.height = this.viewport.height / 2),
            r.clear(r.COLOR_BUFFER_BIT),
            r.drawArrays(r.TRIANGLE_STRIP, 0, 4),
            t.drawImage(
              this.mainCanvas,
              0,
              0,
              this.viewport.width,
              this.viewport.height,
              0,
              0,
              this._2DCanvas.width,
              this._2DCanvas.height
            ),
            engine._uiJSON.highResolution ||
              ((this.mainCanvas.width = 1), (this.mainCanvas.height = 1)),
            r.texImage2D(
              r.TEXTURE_2D,
              0,
              r.RGBA,
              r.RGBA,
              r.UNSIGNED_BYTE,
              this.mainCanvas
            ),
            Promise.resolve(this._2DCanvas)
          );
        } catch (d) {
          return Promise.reject(d);
        }
      },
    },
  }),
  Class(
    Transformations,
    "MeshWarp"
  )({
    prototype: {
      viewport: null,
      points: null,
      _2DCanvas: null,
      context: null,
      _renderSettings: {
        antialias: !0,
        transparent: !0,
        resolution: 1,
        preserveDrawingBuffer: !0,
      },
      init: function (e) {
        (this.viewport = e.viewport),
          (this.points = []),
          (this.meshPoints = e.meshPoints),
          e.meshPoints.forEach(function (e) {
            var t = [];
            t.push(e.x), t.push(e.y), this.points.push(t);
          }, this);
      },
      _warp: function (e) {
        var t, n, i;
        (t = this.viewport), (n = this.points), (i = 0);
        var r =
            (this && this.__extends) ||
            function (e, t) {
              function n() {
                this.constructor = e;
              }
              for (var i in t) t.hasOwnProperty(i) && (e[i] = t[i]);
              e.prototype =
                null === t
                  ? Object.create(t)
                  : ((n.prototype = t.prototype), new n());
            },
          s = function (e) {
            var s = (function () {
                function e(e, t) {
                  void 0 === e && (e = 0),
                    void 0 === t && (t = 0),
                    (this.x = e),
                    (this.y = t);
                }
                return (
                  (e.fromBezier = function (t, n) {
                    var i = t[0],
                      r = t[1],
                      s = t[2],
                      o = t[3],
                      a = e.lerp(i, r, n),
                      l = e.lerp(r, s, n),
                      c = e.lerp(s, o, n);
                    return a.lerp(l, n), l.lerp(c, n), a.lerp(l, n);
                  }),
                  (e.lerp = function (t, n, i) {
                    var r = t.x + (n.x - t.x) * i,
                      s = t.y + (n.y - t.y) * i;
                    return new e(r, s);
                  }),
                  (e.prototype.copy = function (e) {
                    return this.set(e.x, e.y);
                  }),
                  (e.prototype.lerp = function (e, t) {
                    return (
                      (this.x += (e.x - this.x) * t),
                      (this.y += (e.y - this.y) * t),
                      this
                    );
                  }),
                  (e.prototype.set = function (e, t) {
                    return (
                      (this.x = e || 0), (this.y = t || (0 !== t ? e : 0)), this
                    );
                  }),
                  e
                );
              })(),
              o = (function (e) {
                function t(t, n, i, r) {
                  var o = e.call(this, t, n, i, r) || this;
                  return (
                    (o.cp0 = null),
                    (o.cp1 = null),
                    (o.last = new s()),
                    (o.config = {}),
                    o.last.copy(o),
                    o
                  );
                }
                return (
                  r(t, e),
                  (t.prototype.addControlPoints = function (e, t) {
                    (this.cp0 = e),
                      (this.cp1 = t),
                      (e.handle = t),
                      (t.handle = e),
                      (e.anchor = this),
                      (t.anchor = this),
                      this.last.copy(this);
                  }),
                  t
                );
              })(PIXI.ObservablePoint),
              a = (function () {
                function e(e) {
                  (this.point = e),
                    (this.container = new PIXI.Container()),
                    (this.config = this.point.config),
                    (this.position = new PIXI.ObservablePoint(function () {},
                    this));
                  h.scale, e.config;
                  this.position.copy(e);
                }
                return e;
              })(),
              l = (function () {
                function e() {
                  (this.tl = null),
                    (this.tr = null),
                    (this.br = null),
                    (this.bl = null),
                    (this.cps = null),
                    (this.cpT0 = null),
                    (this.cpT1 = null),
                    (this.cpB0 = null),
                    (this.cpB1 = null),
                    (this.cpL0 = null),
                    (this.cpL1 = null),
                    (this.cpR0 = null),
                    (this.cpR1 = null),
                    (this.bezierT = null),
                    (this.bezierB = null),
                    (this.bezierL = null),
                    (this.bezierR = null),
                    (this.anchors = null),
                    (this.bezHandles = []),
                    (this.scale = 1),
                    (this.points = []);
                }
                return (
                  (e.prototype.init = function (e) {
                    (this.grid = e), (this.scale = e.scale);
                    var t, n;
                    (t = n = e.size),
                      (this.tl = e.tl),
                      (this.tr = e.tr),
                      (this.br = e.br),
                      (this.bl = e.bl),
                      this.createGrid();
                  }),
                  (e.prototype.createGrid = function () {
                    var e = function () {},
                      t = 0.15,
                      n = 0.85,
                      i = 1.15,
                      r = this.grid.width,
                      s = this.grid.height,
                      o = this.grid;
                    (this.cpT0 = new PIXI.ObservablePoint(e, o, r * t, -s * t)),
                      (this.cpT1 = new PIXI.ObservablePoint(
                        e,
                        o,
                        r * n,
                        -s * t
                      )),
                      (this.cpB0 = new PIXI.ObservablePoint(
                        e,
                        o,
                        r * t,
                        s * i
                      )),
                      (this.cpB1 = new PIXI.ObservablePoint(
                        e,
                        o,
                        r * n,
                        s * i
                      )),
                      (this.cpL0 = new PIXI.ObservablePoint(
                        e,
                        o,
                        -r * t,
                        s * t
                      )),
                      (this.cpL1 = new PIXI.ObservablePoint(
                        e,
                        o,
                        -r * t,
                        s * n
                      )),
                      (this.cpR0 = new PIXI.ObservablePoint(
                        e,
                        o,
                        r * i,
                        s * t
                      )),
                      (this.cpR1 = new PIXI.ObservablePoint(
                        e,
                        o,
                        r * i,
                        s * n
                      )),
                      (this.bezierT = [this.tl, this.cpT0, this.cpT1, this.tr]),
                      (this.bezierB = [this.bl, this.cpB0, this.cpB1, this.br]),
                      (this.bezierL = [this.tl, this.cpL0, this.cpL1, this.bl]),
                      (this.bezierR = [this.tr, this.cpR0, this.cpR1, this.br]);
                    [this.bezierT, this.bezierB, this.bezierL, this.bezierR];
                    (this.cps = [
                      this.cpL0,
                      this.cpL1,
                      this.cpR0,
                      this.cpR1,
                      this.cpT0,
                      this.cpT1,
                      this.cpB0,
                      this.cpB1,
                    ]),
                      (this.anchors = [
                        this.tl,
                        this.bl,
                        this.tr,
                        this.br,
                        this.tl,
                        this.tr,
                        this.bl,
                        this.br,
                      ]),
                      this.tl.addControlPoints(this.cpT0, this.cpL0),
                      this.tr.addControlPoints(this.cpT1, this.cpR0),
                      this.bl.addControlPoints(this.cpB0, this.cpL1),
                      this.br.addControlPoints(this.cpB1, this.cpR1),
                      (this.bezHandles = this.cps.map(function (e) {
                        var t = new a(e);
                        return t;
                      }));
                  }),
                  (e.prototype.update = function () {
                    var e,
                      t,
                      n,
                      i,
                      r,
                      o,
                      a = this.grid.size,
                      l = this.grid.size;
                    for (i = 0; a > i; i++) {
                      o = i / (a - 1);
                      var c = s.fromBezier(this.bezierL, o),
                        u = s.fromBezier(this.bezierR, o),
                        h = s.lerp(this.cpT0, this.cpB0, o),
                        d = s.lerp(this.cpT1, this.cpB1, o);
                      for (n = 0; l > n; n++) {
                        (t = n + i * l),
                          (e = this.grid.points[t]),
                          (r = n / (l - 1));
                        var p = s.fromBezier([c, h, d, u], r);
                        e.copy(p);
                      }
                    }
                  }),
                  e
                );
              })(),
              c = new l(),
              u = (function () {
                function e() {
                  (this.bezierGrid = c),
                    (this.scale = 1),
                    (this.tl = null),
                    (this.tr = null),
                    (this.bl = null),
                    (this.br = null),
                    (this.points = []);
                }
                return (
                  (e.prototype.init = function (e, t, n, i) {
                    (this.scale = i),
                      (this.width = e),
                      (this.height = t),
                      (this.size = n),
                      (this.sizeSq = Math.pow(n, 2)),
                      this.createGrid();
                  }),
                  (e.prototype.createGrid = function () {
                    for (
                      var e,
                        t,
                        n = this.width,
                        i = this.height,
                        r = this.size,
                        s = this.size,
                        a = this.size * this.size,
                        l = 0,
                        c = 0;
                      r > c;
                      c++
                    )
                      for (var u = c / (r - 1), h = 0; s > h; l++, h++) {
                        (e = h / (s - 1)),
                          (t = ""),
                          0 === l && (t = "tl"),
                          l === s - 1 && (t = "tr"),
                          l === a - 1 && (t = "br"),
                          l === a - s && (t = "bl");
                        var d;
                        t
                          ? ((d = new o(function () {}, this, e * n, u * i)),
                            (d._index = l),
                            (this[t] = d))
                          : ((d = new PIXI.ObservablePoint(
                              function () {},
                              this,
                              e * n,
                              u * i
                            )),
                            (d._index = l)),
                          this.points.push(d);
                      }
                    this.bezierGrid.init(this);
                  }),
                  (e.prototype.update = function (e) {
                    for (
                      var t = this.points.length, n = e.vertices, i = 0;
                      t > i;
                      i++
                    ) {
                      var r = this.points[i],
                        s = 2 * i;
                      (n[s] = r.x), (n[s + 1] = r.y);
                    }
                  }),
                  e
                );
              })(),
              h = new u();
            h.init(t.width, t.height, 16, 1);
            var d,
              p = h.bezierGrid,
              f = -129.54,
              m = 33.124;
            i = (i * Math.PI) / 180;
            for (
              var g = n[0][0],
                v = n[0][1],
                _ = n[0][0],
                y = n[0][1],
                b = 0,
                w = 0,
                d = 1;
              d < n.length;
              d++
            )
              n[d][0] < g && (g = n[d][0]),
                n[d][1] < v && (v = n[d][1]),
                n[d][0] > _ && (_ = n[d][0]),
                n[d][1] > y && (y = n[d][1]);
            (w = y - v), (b = _ - g);
            var x = [g + b / 4, v + w / 4];
            for (
              g = 100 * t.width,
                v = 100 * t.height,
                _ = 100 * -t.width,
                y = 100 * -t.height,
                d = n.length - 1;
              d >= 0;
              d--
            ) {
              var C, T;
              (C =
                1 *
                Math.sqrt(
                  Math.pow(n[d][0] - x[0], 2) + Math.pow(n[d][1] - x[1], 2)
                )),
                (T = Math.atan2(n[d][1] - x[1], n[d][0] - x[0]) + i),
                C * Math.cos(T) + f < g && (g = C * Math.cos(T) + f),
                C * Math.sin(T) + m < v && (v = C * Math.sin(T) + m),
                C * Math.cos(T) + f > _ && (_ = C * Math.cos(T) + f),
                C * Math.sin(T) + m > y && (y = C * Math.sin(T) + m),
                (n[d][0] = C * Math.cos(T) + f),
                (n[d][1] = C * Math.sin(T) + m);
            }
            for (d = 0; d < n.length; d++)
              (n[d][0] = n[d][0] - g), (n[d][1] = n[d][1] - v);
            (h.tl._x = n[0][0]),
              (h.tl._y = n[0][1]),
              (h.tr._x = n[3][0]),
              (h.tr._y = n[3][1]),
              (h.bl._x = n[12][0]),
              (h.bl._y = n[12][1]),
              (h.br._x = n[15][0]),
              (h.br._y = n[15][1]),
              (p.cpT0._x = n[1][0]),
              (p.cpT0._y = n[1][1]),
              (p.cpT1._x = n[2][0]),
              (p.cpT1._y = n[2][1]),
              (p.cpB0._x = n[13][0]),
              (p.cpB0._y = n[13][1]),
              (p.cpB1._x = n[14][0]),
              (p.cpB1._y = n[14][1]),
              (p.cpL0._x = n[4][0]),
              (p.cpL0._y = n[4][1]),
              (p.cpL1._x = n[8][0]),
              (p.cpL1._y = n[8][1]),
              (p.cpR0._x = n[7][0]),
              (p.cpR0._y = n[7][1]),
              (p.cpR1._x = n[11][0]),
              (p.cpR1._y = n[11][1]),
              p.update(),
              h.update(e);
          },
          o = new PIXI.mesh.Plane(PIXI.Texture.fromCanvas(e), 16, 16);
        s(o), (e = null);
        for (
          var a = this.meshPoints,
            l = a[0].x,
            c = a[0].y,
            u = a[0].x,
            h = a[0].y,
            d = 1;
          d < a.length;
          d++
        )
          (l = Math.max(l, a[d].x)),
            (u = Math.min(u, a[d].x)),
            (c = Math.max(c, a[d].y)),
            (h = Math.min(h, a[d].y));
        var p = { width: l - u, height: c - h };
        return { meshPlane: o, viewport: p };
      },
      process: function (e) {
        var t, n, i, r, s;
        return (
          (t = this._warp(e)),
          (n = t.viewport),
          (i = t.meshPlane),
          (r = engine._webGLRenderer),
          Transformations.program && r.gl.useProgram(Transformations.program),
          r.resize(n.width, n.height),
          r.render(i),
          (Transformations.program = r.gl.getParameter(r.gl.CURRENT_PROGRAM)),
          i.texture.baseTexture.destroy(),
          i.texture.destroy(),
          i.destroy(),
          this._2DCanvas
            ? ((s = this._2DCanvas.getContext("2d")),
              s.clearRect(0, 0, this._2DCanvas.width, this._2DCanvas.height))
            : (this._2DCanvas = document.createElement("canvas")),
          (this._2DCanvas.width = r.view.width),
          (this._2DCanvas.height = r.view.height),
          (s = this._2DCanvas.getContext("2d")),
          s.drawImage(
            r.view,
            0,
            0,
            this._2DCanvas.width,
            this._2DCanvas.height
          ),
          r.resize(0, 0),
          Promise.resolve(this._2DCanvas)
        );
      },
    },
  }),
  (window.Effects = {}),
  Class(
    Effects,
    "Queue"
  )({
    prototype: {
      _queue: null,
      init: function (e) {
        (this._queue = []), (this._engine = e.engine);
      },
      reset: function () {
        this._queue = [];
      },
      push: function (e) {
        e.children.length > 0 &&
          /_original/.test(e.children[0].layerData.name) &&
          (e = e.children[0]);
        var t = this._engine._getLayerParents(e);
        t.unshift(e), this._queue.push(t);
      },
      process: function () {
        var e = this._engine._getUniqueParents(this._queue);
        (e = e.filter(function (e) {
          var t, n, i, r;
          return (
            (t = e.layerData.name),
            (n = t.lastIndexOf("_")),
            (i = t.substr(n + 1, t.length)),
            (r = t.lastIndexOf("Rules_strokes")),
            r >= 0 ? !0 : n >= 0 ? "original" === i : !0
          );
        })),
          this._engine._applyEffects2(e),
          (this._queue = []);
      },
      getQueue: function () {
        return this._queue;
      },
      setQueue: function (e) {
        this._queue = e;
      },
    },
  }),
  Uint8ClampedArray.prototype.forEach ||
    (Uint8ClampedArray.prototype.forEach = function (e) {
      Array.prototype.forEach.call(this, e);
    }),
  Uint8Array.prototype.forEach ||
    (Uint8Array.prototype.forEach = function (e) {
      Array.prototype.forEach.call(this, e);
    }),
  Uint8ClampedArray.prototype.slice ||
    (Uint8ClampedArray.prototype.slice = function (e, t) {
      Array.prototype.slice.call(this, e, t);
    }),
  Uint8Array.prototype.slice ||
    (Uint8Array.prototype.slice = function (e, t) {
      Array.prototype.slice.call(this, e, t);
    }),
  (function () {
    "Uint8Array" in self &&
      "function" != typeof Uint8Array.prototype.reduce &&
      (Uint8Array.prototype.reduce = Array.prototype.reduce);
  })(self),
  (app = {}),
  (app.activeDocument = {}),
  (PIXI.DisplayObject.prototype.getChildren = function () {
    if (this.children && !(this.children.length <= 0)) {
      for (var e = [], t = this.children.length - 1; t >= 0; t--)
        e.push(this.children[t]);
      return e;
    }
  }),
  (PIXI.DisplayObject.prototype.move = function (e, t) {
    if (e && "undefined" != typeof e) {
      var n = this.parent,
        i = e.parent;
      t(this, e),
        (n.layers = n.getChildren()),
        (i.layers = i.getChildren()),
        (e.layers = e.getChildren());
    }
  }),
  (PIXI.DisplayObject.prototype._skew = function (e) {
    var t, n;
    (t = e.x || 0), (n = e.y || 0), (this.skew.x = t), (this.skew.y = n);
  }),
  (PIXI.Container.prototype.renderCanvas = function (e) {
    if (this.visible && !(this.worldAlpha <= 0) && this.renderable) {
      if (this._mask) {
        e.maskManager.pushMask(this._mask);
        var t = e.context.getImageData(0, 0, e.width, e.height);
        e.context.clearRect(0, 0, e.width, e.height);
      }
      this._renderCanvas(e);
      for (var n = 0, i = this.children.length; i > n; ++n)
        this.children[n].renderCanvas(e);
      if (this._mask) {
        e.context.save(),
          e.context.setTransform(1, 0, 0, 1, 0, 0),
          (e.context.globalAlpha = 1),
          (e.context.globalCompositeOperation = "destination-in"),
          e.context.drawImage(this._mask.texture.baseTexture.source, 0, 0),
          (e.context.globalCompositeOperation = "source-over");
        var r = e.context.getImageData(0, 0, e.width, e.height);
        e.context.clearRect(0, 0, e.width, e.height),
          e.context.putImageData(t, 0, 0);
        var s = document.createElement("canvas"),
          o = s.getContext("2d");
        (s.width = e.width),
          (s.height = e.height),
          o.putImageData(r, 0, 0),
          e.context.drawImage(s, 0, 0),
          e.context.restore(),
          e.maskManager.popMask(e);
      }
    }
  }),
  (PIXI.Text.prototype._overlapTexts = function (e) {
    var t, n, i, r, s, o, a, l, c, u, h, d, p, f;
    for (
      i = this.style.clone(),
        t = new PIXI.Text(this.text, i),
        t.x = 0,
        t.y = 0,
        r = e.style.clone(),
        n = new PIXI.Text(e.text, r),
        n.x = 0,
        n.y = 0,
        l = new PIXI.Container(),
        l.addChild(t),
        l.addChild(n),
        o = Math.max(t.width, n.width),
        a = Math.max(t.height, n.height),
        s = new PIXI.CanvasRenderer(o, a, {
          transparent: !0,
          antialias: !0,
          resolution: 1,
        }),
        t.visible = !0,
        n.visible = !1,
        s.render(l),
        c = s.view.getContext("2d"),
        u = c.getImageData(0, 0, t.width, t.height),
        h = u.data,
        f = 3;
      f < h.length && !h[f];
      f += 4
    );
    for (
      d = { x: ((f - 3) / 4) % u.width, y: Math.floor((f - 3) / 4 / u.width) },
        t.visible = !1,
        n.visible = !0,
        s.render(l),
        c = s.view.getContext("2d"),
        u = c.getImageData(0, 0, n.width, n.height),
        h = u.data,
        f = 3;
      f < h.length && !h[f];
      f += 4
    );
    (p = { x: ((f - 3) / 4) % u.width, y: Math.floor((f - 3) / 4 / u.width) }),
      (this.x =
        -(this.width * this.anchor.x) + e.x - e.width * e.anchor.x + p.x - d.x),
      (this.y =
        -(this.height * this.anchor.y) +
        e.y -
        e.height * e.anchor.y +
        p.y -
        d.y);
  }),
  (PIXI.DisplayObject.prototype.rotate = function (e) {
    var t, n;
    (t = n = 0),
      this.anchor && ((t = this.anchor.x), (n = this.anchor.y)),
      0 === this.pivot.x &&
        0 === this.pivot.y &&
        (this.pivot.set(
          (this.width / this.scale.x) * (0.5 - t),
          (this.height / this.scale.y) * (0.5 - n)
        ),
        (this.x += this.width * (0.5 - t)),
        (this.y += this.height * (0.5 - n))),
      (this.rotation = e);
  }),
  (PIXI.DisplayObject.prototype.resetPivot = function () {
    this.pivot.set(0, 0), (this.rotation = 0);
  }),
  (PIXI.DisplayObject.prototype.resetSkew = function () {
    (this.skew.x = 0), (this.skew.y = 0);
  }),
  (PIXI.Graphics.prototype.resize = PIXI.Sprite.prototype.resize =
    function (e, t) {
      var n, i, r, s, o;
      (r = this.getBounds()),
        (n = r.right - r.left),
        (i = r.bottom - r.top),
        (s = n * e),
        (o = i * t);
      var a = s / n,
        l = o / i;
      (this.scale.x = this.scale.x * a),
        (this.scale.y = this.scale.y * l),
        engine._effectsQ.push(this);
    }),
  (PIXI.Container.prototype.resize = function (e, t) {
    this.children.forEach(function (n) {
      n.resize(e, t), (n.x *= e), (n.y *= t);
    });
  }),
  (PIXI.DisplayObject.prototype.setGlobalPosition = function (e, t) {
    var n = {
      x: (this.parent || this).toLocal(new PIXI.Point(e, t), app.stage).x,
      y: (this.parent || this).toLocal(new PIXI.Point(e, t), app.stage).y,
    };
    (this.x = n.x), (this.y = n.y);
  }),
  (PIXI.DisplayObject.prototype.translate = function (e, t) {
    (this.position.x = e), (this.position.y = t);
  }),
  (PIXI.DisplayObject.prototype.getRotatedDiff = function () {
    var e, t;
    return (
      (t = {}),
      (e = this.getRotatedDimensions()),
      (t.width = (e.width - this.width) / 2),
      (t.height = (e.height - this.height) / 2),
      t
    );
  }),
  (PIXI.DisplayObject.prototype.getRotatedDimensions = function () {
    var e, t, n;
    return (
      (n = {}),
      (e = Math.abs(Math.cos(this.rotation))),
      (t = Math.abs(Math.sin(this.rotation))),
      (n.width = this.width * e + this.height * t),
      (n.height = this.width * t + this.height * e),
      n
    );
  }),
  (PIXI.DisplayObject.prototype.getPosition = function () {
    var e, t, n;
    return (
      (t = this.getRotatedDiff()),
      (n = this.getScaledPivot()),
      (e = { x: this.x - n.x - t.width, y: this.y - n.y - t.height })
    );
  }),
  (PIXI.DisplayObject.prototype.getScaledPivot = function () {
    var e = { x: this.pivot.x * this.scale.x, y: this.pivot.y * this.scale.y };
    return e;
  }),
  (PIXI.DisplayObject.prototype.hasVisibleContent = function () {
    var e = !1,
      t = this.visible,
      n = this.rotation;
    if (
      ((this.rotation = 0),
      0 === Math.floor(this.width) || 0 === Math.floor(this.height))
    )
      return e;
    var i, r, s;
    (this.visible = !0),
      (r = this.x),
      (s = this.y),
      this.translate(0, 0),
      (i = new PIXI.CanvasRenderer(
        this.width,
        this.height,
        engine._renderSettings
      )),
      i.render(this);
    for (
      var o = i.context.getImageData(0, 0, i.width, i.height), a = 3;
      a < o.data.length;
      a += 4
    )
      if (o.data[a] > 255 * 0.02) {
        e = !0;
        break;
      }
    return (
      this.translate(r, s),
      i.destroy(),
      (this.visible = t),
      (this.rotation = n),
      e
    );
  }),
  (PIXI.DisplayObject.prototype.getQuadrantLocation = function (e) {
    var t = {
      x: Math.floor(this.x + this.width / 2 - e.width / 2),
      y: Math.floor(-(this.y + this.height / 2 - e.height / 2)),
    };
    return 0 === t.x && 0 === t.y
      ? "center"
      : t.x >= 0 && t.y >= 0
      ? "top-right"
      : t.x >= 0 && t.y < 0
      ? "bottom-right"
      : t.x < 0 && t.y >= 0
      ? "top-left"
      : t.x < 0 && t.y < 0
      ? "bottom-left"
      : void 0;
  });
var foobar = function (e, t, n, i) {
  var r, s, o, a, l, n, c, u;
  (i = i || 0),
    (r = e.width),
    (s = e.height),
    (l = e.getContext("2d").getImageData(0, 0, r, s)),
    (c = t.getContext("2d").getImageData(0, 0, r, s)),
    (u = c.data.length),
    (o = document.createElement("canvas")),
    (a = o.getContext("2d")),
    (o.width = r),
    (o.height = s);
  for (var h = 0; u > h; h++)
    h % 4 === 0 &&
      0 !== c.data[h + 3] &&
      ((l.data[h] = n[i]),
      (l.data[h + 1] = n[i + 1]),
      (l.data[h + 2] = n[i + 2]),
      (l.data[h + 3] = n[i + 3]),
      (i += 4));
  return a.putImageData(l, 0, 0), { index: i, canvas: o };
};
(SVG = {}),
  Class(
    SVG,
    "Exporter"
  )({
    prototype: {
      init: function (e) {
        (this.engine = e),
          (this.engine._svgDocument = null),
          (this.engine._curvesCounter = 0),
          (this.engine._SVGNAMESPACE = "http://www.w3.org/2000/svg"),
          (this.engine._layerNames = {});
      },
      export: function (e) {
        var t,
          n,
          i,
          r,
          s = this.engine;
        return (
          (svgTranspiler = new SVG.Transpiler(s)),
          svgTranspiler._removeLayerNameDuplication(),
          (s._layerNames = {}),
          (t = []),
          (r = s._getDocumentSize(e)),
          (n = r.width),
          (i = r.height),
          svgTranspiler._prefetchAssets(),
          Object.keys(s._assetsData).forEach(function (e) {
            s._assetsData[e].hasOwnProperty("assetUrl") &&
              t.push(
                s._assetsData[e].assetUrl.indexOf(".svg") > -1
                  ? svgTranspiler._preloadSvg(e, s._assetsData[e].assetUrl)
                  : svgTranspiler._imageUrlToBase64(
                      e,
                      s._assetsData[e].assetUrl
                    )
              );
          }),
          Promise.all(t).then(function () {
            return (
              (s._svgDocument = svgTranspiler.buildSvgDocument(n, i)),
              svgTranspiler._transpiler(),
              svgTranspiler._removeHiddenElements(),
              svgTranspiler._removeOverwrittenMultilayer(),
              svgTranspiler._designateSVGEffects(),
              svgTranspiler._sanitizeAttributes(s._svgDocument),
              svgTranspiler._getSvgFile()
            );
          })
        );
      },
    },
  }),
  Class(
    SVG,
    "Transpiler"
  )({
    PADDING_PERCENTAGE: 0.1,
    ROTATION_ANGLE_OFFSET: ".6",
    prototype: {
      init: function (e) {
        this.engine = e;
      },
      _removeOverwrittenMultilayer: function () {
        var e,
          t,
          n,
          i = this.engine,
          r = this;
        i._dfsTreeWalker(
          i._getObjectByName("Design"),
          "children",
          function (s) {
            s.layerData.name.indexOf("_multilayer") > -1 &&
              r._isOverwrittenByGradient(s) &&
              ((e = i._svgDocument.getElementById(s.layerData.name)),
              (t = e.parentNode),
              t.removeChild(e),
              (n = r._getColorOverlayDimensions(s)),
              t.children[0].children[0].setAttribute("width", n.width),
              t.children[0].children[0].setAttribute("height", n.height));
          }
        );
      },
      _isOverwrittenByGradient: function (e) {
        var t,
          n,
          i,
          r = this.engine;
        return (
          (t = !1),
          (n = e.parent.layerData.name),
          (i = n.replace("original", "gradientOverlay")),
          "undefined" != typeof r._getObjectByName(i) ? (t = !0) : t
        );
      },
      _getColorOverlayDimensions: function (e) {
        var t,
          n,
          i,
          r = this.engine;
        return (
          (t = e.parent.layerData.name),
          (n = t.replace("original", "colorOverlay")),
          (i = r._getObjectByName(n)),
          { width: i.width, height: i.height }
        );
      },
      _removeLayerNameDuplication: function () {
        var e = this.engine;
        e._dfsTreeWalker(
          e._getObjectByName("Design"),
          "children",
          function (t) {
            if (e._layerNames.hasOwnProperty(t.layerData.name)) {
              e._layerNames[t.layerData.name] =
                e._layerNames[t.layerData.name] + 1;
              var n = t.layerData.name + "-" + e._layerNames[t.layerData.name];
              (e._layerNames[n] = 0), (t.layerData.name = n);
            } else
              e._assetsData.hasOwnProperty(t.layerData.name) &&
                ((e._assetsData[t.layerData.name + "-1"] =
                  e._assetsData[t.layerData.name]),
                delete e._assetsData[t.layerData.name]),
                (e._layerNames[t.layerData.name] = 1),
                (t.layerData.name = t.layerData.name + "-1");
          }
        );
      },
      _getOriginalLayerName: function (e) {
        var t = e.lastIndexOf("-");
        return e.substring(0, t);
      },
      _preloadSvg: function (e, t) {
        var n = this.engine;
        return new Promise(function (i) {
          n._requestSvgAsXml(t).then(function (t) {
            n._uiJSON.disableAA &&
              t.setAttribute("shape-rendering", "crispEdges"),
              (n._assetsData[e].svgString = t.outerHTML),
              i();
          });
        });
      },
      _prefetchAssets: function () {
        var e = this.engine,
          t = this;
        e._dfsTreeWalker(
          e._getObjectByName("Design"),
          "children",
          function (e) {
            e.layerData.name.indexOf("_gradientOverlay") > -1 &&
              (e.layerData.type = "Effect"),
              t._extractAsset(e);
          }
        );
      },
      _extractAsset: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          a,
          l = this.engine,
          c = this;
        if ("Text" === e.layerData.type || "Shape" === e.layerData.type)
          c._fillAssetData(e);
        else if ("Graphic" === e.layerData.type)
          if (
            "Backgrounds" ===
            c._getOriginalLayerName(e.parent.parent.layerData.name)
          )
            for (var u = 0; u < l._uiJSON.background.length; u++)
              c._getOriginalLayerName(e.parent.layerData.name) ==
                l._uiJSON.background[u].name &&
                (e.tintedTexture
                  ? (l._assetsData[e.layerData.name] = {
                      base64: e.tintedTexture.toDataURL(),
                    })
                  : l._assetsData.hasOwnProperty(e.layerData.name) ||
                    c._fillAssetData(e));
          else c._fillAssetData(e);
        else
          "Effect" === e.layerData.type &&
            (e.layerData.name.indexOf("colorOverlay") > -1
              ? ((t = e.layerData.name.replace("_colorOverlay", "_original")),
                (n = l._getObjectByName(t).children[0]),
                (a =
                  "undefined" != typeof n &&
                  l._assetsData[n.layerData.name] &&
                  !l._assetsData[n.layerData.name].hasOwnProperty("base64")),
                a && c._fillAssetData(n))
              : e.layerData.name.indexOf("gradientOverlay") > -1 &&
                ((t = e.layerData.name.replace(
                  "_gradientOverlay",
                  "_original"
                )),
                (i = l._getObjectByName(t)),
                (n = i),
                i.children.length > 0 &&
                  (n = l._getObjectByName(t).children[0]),
                (r = e._texture.baseTexture.source.toDataURL()),
                (s = e.layerData.name.replace(
                  "_gradientOverlay",
                  "_colorOverlay"
                )),
                (o = l._getObjectByName(s)),
                "undefined" != typeof o &&
                  (r = o._texture.baseTexture.source.toDataURL()),
                "undefined" != typeof n &&
                  (l._assetsData[n.layerData.name] = { base64: r })));
      },
      _fillAssetData: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o = this.engine,
          a = this;
        return (
          (i = {
            getCanvasLayer: a._getCanvasLayer,
            getSvgLayer: a._getSvgLayer,
            getRegularLayer: a._getRegularLayer,
            getUnknownLayer: a._getUnknownLayer,
          }),
          e._texture === PIXI.Texture.EMPTY
            ? void i.getUnknownLayer(e)
            : ((t = e.layerData.name),
              (n = e._texture && a._getTextureSource(e)),
              (r =
                n && n instanceof HTMLCanvasElement
                  ? "getCanvasLayer"
                  : n && n instanceof HTMLImageElement
                  ? n.src.indexOf("data:image/svg+xml;utf8,") > -1
                    ? "getSvgLayer"
                    : "getRegularLayer"
                  : "getUnknownLayer"),
              (s = i[r].apply(a, [e])),
              void ("undefined" != typeof s && (o._assetsData[t] = s)))
        );
      },
      _getCanvasLayer: function (e) {
        var t,
          n = this;
        return (
          (t = e.parent.layerData.name),
          t.indexOf("original") > -1
            ? n._getColorOverlayBase64(e)
            : { base64: n._extractBase64(e) }
        );
      },
      _getSvgLayer: function (e) {
        var t,
          n = this;
        return (
          (t = decodeURIComponent(
            n._getTextureSource(e).src.replace("data:image/svg+xml;utf8,", "")
          )),
          "Text" === e.layerData.type
            ? { svgTextString: t }
            : ((t = n._applyViewbox(t, e)),
              t.indexOf("Gradient") > -1
                ? n._getEffectLayer(e)
                : { svgString: t })
        );
      },
      _getRegularLayer: function (e) {
        var t,
          n = this;
        return (
          (t = n._getTextureSource(e).src),
          0 == t.indexOf("http") ? { assetUrl: t } : n._getEffectLayer(e)
        );
      },
      _getUnknownLayer: function () {
        console.log("This layer has unknown type");
      },
      _extractBase64: function (e) {
        return e._texture.baseTexture.source.toDataURL();
      },
      _getTextureSource: function (e) {
        return e._texture.baseTexture.source;
      },
      _getColorOverlayBase64: function (e) {
        var t,
          n = this;
        return (
          (parentName = e.parent.layerData.name),
          (t = parentName.replace("original", "colorOverlay")),
          (colorOverlayLayer = engine._getObjectByName(t)),
          "undefined" != typeof colorOverlayLayer
            ? { base64: n._extractBase64(colorOverlayLayer) }
            : void console.log("There is no color overlay layer")
        );
      },
      _getEffectLayer: function (e) {
        var t,
          n = this;
        return (
          (t = e.parent.layerData.name),
          t.indexOf("original") > -1
            ? n._getColorOverlayBase64(e)
            : { base64: n._getTextureSource(e).src }
        );
      },
      _applyViewbox: function (e, t) {
        {
          var n,
            i,
            r,
            s,
            o,
            a,
            l,
            c,
            u,
            h,
            d,
            p,
            f = this;
          this.engine;
        }
        return (
          (n = f._svgStringToSvgElement(e)),
          (i = n.getAttribute("width")),
          (r = n.getAttribute("height")),
          (s = n.getAttribute("viewBox")),
          (o = Number(s.split(" ")[0])),
          (a = Number(s.split(" ")[1])),
          (l = Number(s.split(" ")[2])),
          (c = Number(s.split(" ")[3])),
          (u = Math.max(l / i, c / r)),
          (h = t._texture.orig),
          (d = o + (h.x - 1) * u),
          (p = a + (h.y - 1) * u),
          n.setAttribute("x", 0),
          n.setAttribute("y", 0),
          n.setAttribute("viewBox", d + " " + p + " " + l + " " + c),
          (e = n.outerHTML)
        );
      },
      _imageUrlToBase64: function (e, t) {
        var n,
          i,
          r,
          s = this.engine;
        return new Promise(function (o) {
          (n = new Image()),
            (n.crossOrigin = "anonymous"),
            (n.onload = function () {
              (i = document.createElement("canvas")),
                (r = i.getContext("2d")),
                (i.width = n.width),
                (i.height = n.height),
                r.drawImage(n, 0, 0);
              var a, l, c, u;
              (u = s._getObjectByName(e)),
                (a = u.parent.layerData.name),
                (s._assetsData[e].base64 = s._trimCanvas(i).canvas.toDataURL()),
                a.indexOf("original") > -1
                  ? ((l = a.replace("original", "colorOverlay")),
                    (c = s._getObjectByName(l)),
                    "undefined" != typeof c && c.visible
                      ? (s._assetsData[e] = {
                          base64: c._texture.baseTexture.source.toDataURL(),
                        })
                      : console.log("There is no color overlay layer"))
                  : t.indexOf("cropped_image") > -1 &&
                    (s._assetsData[e].base64 = i.toDataURL()),
                o();
            }),
            (n.src = t);
        });
      },
      _sanitizeAttributeText: function (e) {
        var t, n, i, r, s, o, a;
        return (
          (t = /([A-Z]|[a-z]|\_)+/),
          (n = /([A-Z]|[a-z]|[0-9]|\_|\-|\.)+/g),
          (i = e.match(t)[0]),
          (s = e.indexOf(i) + i.length),
          (o = e.slice(s)),
          (r = o.match(n)),
          (a = i.concat("", r))
        );
      },
      _sanitizeAttributes: function (e) {
        {
          var t,
            n,
            i,
            r,
            s = this;
          this.engine;
        }
        for (
          r = ["id", "data-name"], t = document.createTreeWalker(e, 1);
          t.nextNode();

        )
          for (var o = 0; o < r.length; o++)
            (i = t.currentNode.getAttribute(r[o])),
              t.currentNode.getAttribute(r[o]) &&
                ((n = s._sanitizeAttributeText(i)),
                t.currentNode.removeAttribute(r[o]),
                t.currentNode.setAttribute(r[o], n));
      },
      buildSvgDocument: function (e, t) {
        var n,
          i,
          r,
          s,
          o,
          a,
          l = this,
          c = this.engine;
        return (
          (a = document.createElementNS(c._SVGNAMESPACE, "svg")),
          a.setAttribute("id", "Design"),
          a.setAttribute("xmlns", c._SVGNAMESPACE),
          a.setAttribute("xmlns:xlink", "http://www.w3.org/1999/xlink"),
          a.setAttribute("width", e),
          a.setAttribute("height", t),
          a.setAttribute("viewBox", "0 0 " + e + " " + t),
          c._dfsTreeWalker(
            c._getObjectByName("Design"),
            "children",
            function (e) {
              if ("Design" !== e.layerData.name) {
                if (
                  ((n = null),
                  (i = c._SVGNAMESPACE),
                  (n = document.createElementNS(i, "g")),
                  n.setAttribute(
                    "id",
                    e.layerData.name.trim().split(" ").join("-")
                  ),
                  n.setAttribute(
                    "transform",
                    "translate(" +
                      e.position.x +
                      " " +
                      e.position.y +
                      ") scale(" +
                      e.scale.x +
                      " " +
                      e.scale.y +
                      ")"
                  ),
                  (r = e.parent.layerData.name.trim().split(" ").join("-")),
                  (s = l._getOriginalLayerName(e.layerData.name)),
                  "undefined" != typeof e.layerData.color &&
                    null !== e.layerData.color)
                )
                  for (var t = 0; t < c._uiJSON.graphic.length; t++)
                    s == c._uiJSON.graphic[t].name &&
                      ((o = a.getElementById(r.replace(" ", "-"))),
                      n.setAttribute("fill", c._uiJSON.graphic[t].color),
                      o.setAttribute("fill", c._uiJSON.graphic[t].color));
                "Design" === r
                  ? a.appendChild(n)
                  : ((o = a.getElementById(r)), o.appendChild(n));
              }
            }
          ),
          a
        );
      },
      _removeHiddenElements: function () {
        var e,
          t = this.engine;
        t._dfsTreeWalker(
          t._getObjectByName("Design"),
          "children",
          function (n) {
            n.visible === !1 &&
              -1 === n.layerData.name.indexOf("_original") &&
              ((e = t._svgDocument.getElementById(
                n.layerData.name.trim().split(" ").join("-")
              )),
              e.setAttribute("display", "none"));
          }
        );
      },
      _transpiler: function () {
        var e = this,
          t = this.engine;
        t._dfsTreeWalker(
          t._getObjectByName("Design"),
          "children",
          function (t) {
            e._nodeToSvgDocument(t);
          }
        );
      },
      _nodeToSvgDocument: function (e) {
        var t = this;
        switch (e.layerData.type) {
          case "TextBG":
            t._shapeToSvgDocument(e);
            break;
          case "Effect":
          case "Graphic":
          case "Shape":
          case "Text":
            t._assetToSvgDocument(e);
            break;
          case "Folder":
          case "Document":
            t._appendGroupToSvgDocument(e);
            break;
          case "SolidColor":
            t._solidColorToSvgDocument(e);
            break;
          default:
            console.log("Data type " + e.layerData.type + " is not supported");
        }
      },
      _assetToSvgDocument: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          n,
          a,
          l,
          c,
          u = this,
          h = this.engine;
        (i = e.layerData.name),
          (a = e.layerData.name.indexOf("gradientOverlay") > -1),
          (l = e.layerData.name.indexOf("colorOverlay") > -1),
          (a || l) &&
            ((c = (l && "_colorOverlay") || (a && "_gradientOverlay")),
            (r = e.layerData.name.replace(c, "_original")),
            (s = h._getObjectByName(r)),
            0 === s.children.length
              ? (t = s)
              : ((t = s.children[0]), (i = t.layerData.name))),
          "undefined" != typeof h._assetsData[i] &&
            ((o = h._assetsData[i]),
            (n = u._getAssetDataType(o)),
            "svgTextString" === n && e.parent.visible
              ? u._svgTextToSvgDocument(e, o)
              : "svgString" === n
              ? u._svgToSvgDocument(e)
              : u._base64ToSvgDocument(e));
      },
      _svgTextToSvgDocument: function (e, t) {
        var n,
          i,
          r,
          s,
          o,
          a,
          l,
          c,
          u = this,
          h = this.engine;
        (n = u._svgStringToSvgElement(t.svgTextString)),
          u._handleLigatures(n),
          n.getElementsByTagName("path").curvePath
            ? (n
                .getElementsByTagName("path")[0]
                .setAttribute("id", "curvePath" + h._curvesCounter),
              (i = n
                .getElementsByTagName("path")[0]
                .getAttribute("transform")
                .replace(/,/g, " ")),
              (i = i.replace(
                "rotate(90 ",
                "rotate(90" + u.constructor.ROTATION_ANGLE_OFFSET + " "
              )),
              n.getElementsByTagName("path")[0].setAttribute("transform", i),
              n
                .getElementsByTagName("textPath")[0]
                .setAttribute("xlink:href", "#curvePath" + h._curvesCounter),
              "undefined" === n.getElementsByTagName("style")[0].innerHTML &&
                n.removeChild(n.getElementsByTagName("defs")[0]),
              (a = document.createElementNS(h._SVGNAMESPACE, "g")),
              u._updateFontFace(n, e),
              (l = this._getViewboxPaddingValues(n)),
              (c = []),
              c.push(l.viewBox.x),
              c.push(l.viewBox.y),
              c.push(l.viewBox.width),
              c.push(l.viewBox.height),
              n.setAttribute("width", l.svg.width),
              n.setAttribute("height", l.svg.height),
              n.setAttribute("viewBox", c.join(" ")),
              a.setAttribute("id", e.layerData.name + "_wrapper"),
              a.setAttribute(
                "transform",
                "translate(" +
                  (e.x - e.scale.x * l.offset.x) +
                  " " +
                  (e.y - e.scale.y * l.offset.y) +
                  ") scale(" +
                  e.scale.x +
                  " " +
                  e.scale.y +
                  ") "
              ),
              a.appendChild(n),
              (n = a),
              h._curvesCounter++,
              (r = h._svgDocument.getElementById(e.layerData.name)),
              r.replaceWith(n))
            : ((s = e.layerData.name.trim().split(" ").join("-")),
              n.setAttribute("id", s),
              n.setAttribute("width", e.width),
              n.setAttribute("height", e.height),
              (o = e.parent),
              u._hasSkew(o) && u._skewText(o, n),
              u._splitMultilineText(n),
              u._updateFontFace(n, e),
              (a = document.createElementNS(h._SVGNAMESPACE, "g")),
              a.setAttribute("id", s + "_wrapper"),
              a.setAttribute(
                "transform",
                "translate(" + e.x + " " + e.y + ") scale(1 1) "
              ),
              a.appendChild(n),
              (r = h._svgDocument.getElementById(s)),
              r.replaceWith(a));
      },
      _handleLigatures: function (e) {
        var t, n, i, r, s, o;
        if (
          ((t = e.getElementsByTagName("text")[0]),
          (i = Number(t.getAttribute("letter-spacing"))),
          (o = t),
          t.hasAttribute("letter-spacing") ||
            ((n = e.getElementsByTagName("textPath")[0]),
            (i = Number(n.getAttribute("letter-spacing"))),
            (o = n)),
          i > 0 || 0 > i)
        ) {
          s = o.getElementsByTagName("tspan");
          for (var a = 0; a < s.length; a++)
            (r = o.getElementsByTagName("tspan")[a]),
              r.setAttribute(
                "style",
                "font-variant-ligatures:no-common-ligatures;font-variant-caps:normal;font-variant-numeric:normal;font-feature-settings:normal;"
              );
        }
      },
      _getViewboxPaddingValues: function (e) {
        var t, n, i, r, s, o;
        return (
          (i = e.width.baseVal.value),
          (r = e.height.baseVal.value),
          (s = e.viewBox.baseVal),
          (t = this.constructor.PADDING_PERCENTAGE * i),
          (n = this.constructor.PADDING_PERCENTAGE * r),
          (o = {
            offset: { x: t, y: n },
            svg: { width: i + 2 * t, height: r + 2 * n },
            viewBox: {
              x: s.x - t,
              y: s.y - n,
              width: s.width + 2 * t,
              height: s.height + 2 * n,
            },
          })
        );
      },
      _hasRotation: function (e) {
        return Math.abs(e.pivot.x) + Math.abs(e.pivot.y) !== 0;
      },
      _rotateSVG: function (e, t) {
        var n, i, r, s, o, a, l, c, u, h;
        (n = e.rotation),
          (i = n * (180 / Math.PI)),
          (r = e.pivot.x),
          (s = e.pivot.y),
          (o = -r),
          (a = -s),
          (l = t || engine._svgDocument.getElementById(e.layerData.name)),
          (c = l.getAttribute("transform")),
          (u = " translate(" + o + " " + a + ")"),
          (h = " rotate(" + i + " " + r + " " + s + ")"),
          l.setAttribute("transform", c + u + h);
      },
      _hasSkew: function (e) {
        return Math.abs(e.skew.x) > 0 || Math.abs(e.skew.y) > 0;
      },
      _skewText: function (e) {
        var t, n, i;
        (t = engine._svgDocument.getElementById(e.layerData.name)),
          (n = this._calculatePixiSkewMatrixValues(e.skew.x, e.skew.y)),
          (i = t.getAttribute("transform")),
          t.setAttribute("transform", i + "matrix(" + n.join() + ")");
      },
      _calculatePixiSkewMatrixValues: function (e, t) {
        var n,
          i,
          r,
          s,
          o = 180 / Math.PI,
          a = 360,
          l = [];
        return (
          (n = e * o),
          (i = t * o),
          (n = (n + a) % a),
          (i = (i + a) % a),
          (r = this._caculateSkewMatrixTransformationPair(n, e)),
          (s = this._caculateSkewMatrixTransformationPair(i, t)),
          (l[0] = s[0]),
          (l[1] = s[1]),
          (l[2] = r[1]),
          (l[3] = r[0]),
          (l[4] = 0),
          (l[5] = 0),
          l
        );
      },
      _caculateSkewMatrixTransformationPair: function (e, t) {
        var n = [];
        return (
          e >= 0 && 45 > e && ((n[1] = Math.tan(t)), (n[0] = 1)),
          e >= 45 &&
            135 > e &&
            ((n[1] = 1), (n[0] = -Math.tan(t - Math.PI / 2))),
          e >= 135 && 225 > e && ((n[1] = -Math.tan(t)), (n[0] = -1)),
          e >= 225 &&
            315 > e &&
            ((n[1] = -1), (n[0] = Math.tan(t + Math.PI / 2))),
          e >= 315 && 360 > e && ((n[1] = Math.tan(t)), (n[0] = 1)),
          n
        );
      },
      _splitMultilineText: function (e) {
        var t, n, i, r, s, o;
        if (
          ((n = e.getElementsByTagName("tspan")),
          (t = e.getElementsByTagName("text")[0]),
          n.length > 0 && "middle" === t.getAttribute("text-anchor"))
        ) {
          (textparent = t.parentElement), (s = n.length), (o = 0);
          for (var a = 0; s > a; a++)
            (i = t.cloneNode()),
              (r = n[a].cloneNode(!0)),
              (o += Number(r.getAttribute("dy"))),
              r.setAttribute("dy", o),
              i.appendChild(r),
              textparent.appendChild(i);
          t.remove();
        }
      },
      _updateFontFace: function (e, t) {
        {
          var n,
            i = this;
          this.engine;
        }
        (n = i._getFontMetadata(e, t.parent.layerData.name)),
          i._appendFontMetadata(e, n);
      },
      _getFontMetadata: function (e, t) {
        var n,
          i,
          r,
          s,
          o,
          a,
          l,
          c,
          u,
          h,
          d,
          p,
          f,
          m,
          g,
          v,
          _,
          y,
          b,
          w,
          x,
          C,
          T,
          S,
          E,
          k,
          P = this,
          I = this.engine;
        (n = !1),
          (i = !1),
          (r = e.getElementsByTagName("style")[0].innerHTML),
          (s = "src: url("),
          (o = ")}"),
          (a = r.indexOf(s)),
          (l = r.indexOf(o)),
          (c = r.substring(a + s.length, l)),
          (u = c.replace("data:application/octet-stream;base64,", ""));
        var A = function (e) {
          (h = atob(e)), (d = h.length), (p = new Uint8Array(d));
          for (var t = 0; d > t; t++) p[t] = h.charCodeAt(t);
          return p.buffer;
        };
        (f = A(u)),
          (m = opentype.parse(f)),
          (k = e.getElementsByTagName("textPath")),
          k.length > 0 &&
            (k[0].removeAttribute("alignment-baseline"),
            k[0].removeAttribute("dominant-baseline"),
            (w = Math.abs(m.ascender / m.unitsPerEm)),
            (x = Math.abs(m.descender / m.unitsPerEm)),
            (C = (w - x) / 2),
            (T = e.getElementsByTagName("text")[0].getAttribute("font-size")),
            (S = T * C),
            e.getElementsByTagName("text")[0].setAttribute("dy", S)),
          (g = m.names.fontFamily.en),
          m.names.fontSubfamily &&
            m.names.fontSubfamily.en &&
            ((m.names.fontSubfamily.en.indexOf("Bold") > -1 ||
              m.names.fontSubfamily.en.indexOf("bold") > -1) &&
              (n = !0),
            (m.names.fontSubfamily.en.indexOf("Italic") > -1 ||
              m.names.fontSubfamily.en.indexOf("italic") > -1) &&
              (i = !0)),
          (v = null),
          (_ = null),
          (y = P._getOriginalLayerName(t));
        for (var O = 0; O < I._uiJSON.text.length; O++)
          if (y === I._uiJSON.text[O].name) {
            v = I._uiJSON.text[O].font;
            for (var D = 0; D < I._uiJSON.text[O].allowedFonts.length; D++)
              v === I._uiJSON.text[O].allowedFonts[D].name &&
                ((b = I._uiJSON.text[O].allowedFonts[D].file),
                (E = b.lastIndexOf(".")),
                (_ = b.substr(E + 1)));
          }
        return {
          fontName: g,
          fileExtension: _,
          fontUrl: c,
          fontWeight: n,
          fontStyle: i,
        };
      },
      _appendFontMetadata: function (e, t) {
        var n, i, r;
        (n = e.getElementsByTagName("style")[0].innerHTML),
          (i =
            "@font-face {font-family: '" +
            t.fontName +
            "'; src: url(" +
            t.fontUrl +
            "); format (" +
            t.fileExtension +
            ")}"),
          (e.getElementsByTagName("style")[0].innerHTML = ""),
          (e.getElementsByTagName("style")[0].innerHTML = i),
          (r = t.fontName),
          (texts = e.getElementsByTagName("text"));
        for (var s = 0; s < texts.length; s++)
          t.fontWeight && texts[s].setAttribute("style", "font-weight:bold;"),
            t.fontStyle && texts[s].setAttribute("style", "font-style:italic;"),
            texts[s].setAttribute("font-family", r);
      },
      _svgStringToSvgElement: function (e) {
        var t = new DOMParser();
        return t.parseFromString(e, "image/svg+xml").firstElementChild;
      },
      _svgToSvgDocument: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          a,
          l,
          c,
          u,
          h = this,
          d = this.engine;
        (t = { width: 1e3, height: 1e3 }),
          e.layerData.name.indexOf("colorOverlay") > -1
            ? ((n = e.layerData.name.replace("_colorOverlay", "_original")),
              (i = d._getObjectByName(n).children[0]),
              "undefined" != typeof i &&
                ((r = document.createElementNS(d._SVGNAMESPACE, "g")),
                (s = i.layerData.name.trim().split(" ").join("-")),
                (o = h._svgStringToSvgElement(
                  d._assetsData[i.layerData.name].svgString
                )),
                h._removeDegeneratedArcs(o),
                o.setAttribute(
                  "id",
                  i.layerData.name.trim().split(" ").join("-")
                ),
                o.getElementsByTagName("style").length > 0 &&
                  (o = h._insertIdOnSelectors(o)),
                (o = h._removeUnsupportedTags(o)),
                i.alpha < 1 && o.setAttribute("opacity", i.alpha),
                (a = d._svgDocument.getElementById(s)),
                a.replaceWith(o),
                h._createFilterWrapper(
                  i.layerData.name.trim().split(" ").join("-")
                )))
            : ((r = document.createElementNS(d._SVGNAMESPACE, "g")),
              (l = e.layerData.name.trim().split(" ").join("-")),
              (a = d._svgDocument.getElementById(l)),
              (o = h._svgStringToSvgElement(
                d._assetsData[e.layerData.name].svgString
              )),
              h._removeDegeneratedArcs(o),
              r.setAttribute("id", l + "_wrapper"),
              r.setAttribute(
                "transform",
                "translate(" +
                  e.position.x +
                  " " +
                  e.position.y +
                  ") scale(" +
                  e.scale.x +
                  " " +
                  e.scale.y +
                  ")"
              ),
              (1 === e.scale.x && 1 === e.scale.y) ||
                "Background" !==
                  h._getOriginalLayerName(e.parent.layerData.name) ||
                ((c = e.parent.layerData.name),
                (u = d._getObjectByName(c)),
                o.setAttribute("width", u.width / e.scale.x),
                o.setAttribute("height", u.height / e.scale.y)),
              o.setAttribute("id", l),
              e.alpha < 1 && o.setAttribute("opacity", e.alpha),
              o.getElementsByTagName("style").length > 0 &&
                (o = h._insertIdOnSelectors(o)),
              (o = h._removeUnsupportedTags(o)),
              r.appendChild(o),
              a.replaceWith(r),
              h._createFilterWrapper(l));
      },
      _removeDegeneratedArcs: function (e) {
        {
          var t, n, i, r, s, o;
          this.engine;
        }
        t = e.getElementsByTagName("path");
        for (var a = 0; a < t.length; a++) {
          (o = !1), (n = t[a]), (i = n.getPathData());
          for (var l = 0; l < i.length; l++)
            (r = i[l]),
              (s = "a" === r.type && (0 === r.values[0] || 0 === r.values[1])),
              s && ((r.type = "l"), (r.values = r.values.slice(-2)), (o = !0));
          o && n.setPathData(i);
        }
      },
      _insertIdOnSelectors: function (e) {
        var t,
          n,
          i,
          r = this;
        (n = e.getAttribute("id")),
          (i = e.getElementsByTagName("style")[0]),
          (t = i.innerHTML);
        var s = function (e, t) {
          return "" === e || e.match("#" + t) ? e : "#" + t + " " + e;
        };
        return (
          -1 === t.indexOf(n) && (i.innerHTML = r._replaceSelectors(i, n, s)), e
        );
      },
      _replaceSelectors: function (e, t, n) {
        var i, r, s, o;
        for (
          styleString = e.innerHTML,
            r = styleString,
            i = 0,
            styleString = styleString.replace(/\s/g, ""),
            r = styleString,
            s = /^[^{]+/.exec(styleString),
            r = r.replace(
              s[0],
              s[0]
                .split(",")
                .map(function (e) {
                  return n(e, t);
                })
                .join(", ")
            );
          /}[^{]+/.exec(styleString) && 1e4 > i;

        )
          (o = /}[^{]+/.exec(styleString)),
            (styleString = styleString.substring(o.index + o.length)),
            (currentSelector = o[0]
              .replace("}", "")
              .split(",")
              .map(function (e) {
                return n(e, t);
              })
              .join(", ")),
            (r = r.replace(o[0], "}" + currentSelector)),
            i++;
        return r;
      },
      _removeUnsupportedTags: function (e) {
        {
          var t,
            n,
            i,
            r = this;
          this.engine;
        }
        return e.getElementsByTagName("metadata").length > 0 &&
          e.getElementsByTagName("metadata")[0].innerHTML.indexOf("xpacket") >
            -1
          ? ((t = r._removeXpacketTag(
              e.getElementsByTagName("metadata")[0].outerHTML
            )),
            (n = r._svgStringToSvgElement(t)),
            (i = e.getElementsByTagName("metadata")[0]),
            e.removeChild(i),
            e.appendChild(n),
            e)
          : e;
      },
      _removeXpacketTag: function (e) {
        var t, n, i, r;
        return (
          (t = 0),
          (n = 0),
          (t = e.indexOf("<?xpacket")),
          (n = e.indexOf("?>") + 2),
          (i = e.substring(t, n)),
          (r = e.split(i)),
          (e = r[0] + r[1]),
          (t = e.indexOf("<?xpacket")),
          (n = e.indexOf("?>") + 2),
          (i = e.substring(t, n)),
          (r = e.split(i)),
          (e = r[0] + r[1])
        );
      },
      _base64ToSvgDocument: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          a,
          l,
          c,
          u,
          h,
          d,
          p,
          f,
          m = this,
          g = this.engine;
        -1 === e.layerData.name.indexOf("colorOverlay") &&
        -1 === e.layerData.name.indexOf("gradientOverlay")
          ? ((t = e.parent.layerData.name.trim().split(" ").join("-")),
            (n = g._svgDocument.getElementById(t)),
            (i = document.createElementNS(g._SVGNAMESPACE, "image")),
            (r = e.layerData.name.trim().split(" ").join("-")),
            (s = document.createElementNS(g._SVGNAMESPACE, "g")),
            s.setAttribute("id", r + "_wrapper"),
            s.setAttribute(
              "transform",
              "translate(" + e.position.x + " " + e.position.y + ") scale(1 1)"
            ),
            (o = document.createElementNS(g._SVGNAMESPACE, "svg")),
            o.setAttribute("id", e.layerData.name.trim().split(" ").join("-")),
            o.setAttribute("width", e.width),
            o.setAttribute("height", e.height),
            e._texture._frame &&
              ((a = e._texture._frame),
              o.setAttribute(
                "viewBox",
                a.x + " " + a.y + " " + a.width + " " + a.height
              ),
              e.tintedTexture &&
                o.setAttribute("viewBox", "0 0 " + a.width + " " + a.height)),
            o.setAttribute("preserveAspectRatio", "none"),
            i.setAttribute("opacity", e.alpha),
            i.setAttribute(
              "xlink:href",
              g._assetsData[e.layerData.name].base64
            ),
            o.appendChild(i),
            s.appendChild(o),
            (l = g._svgDocument.getElementById(r)),
            l.replaceWith(s))
          : ((d = e.layerData.name.indexOf("gradientOverlay") > -1),
            (p = e.layerData.name.indexOf("colorOverlay") > -1),
            (f = (p && "_colorOverlay") || (d && "_gradientOverlay")),
            (c = e.layerData.name.replace(f, "_original")),
            (u = g._getObjectByName(c)),
            ("Folder" === u.layerData.type ||
              "Document" === u.layerData.type) &&
              (m._appendGroupToSvgDocument(u),
              (h = g._svgDocument.getElementById(
                c.trim().split(" ").join("-")
              )),
              (i = document.createElementNS(g._SVGNAMESPACE, "image")),
              (e = u.children[0]),
              (r = e.layerData.name.trim().split(" ").join("-")),
              i.setAttribute(
                "id",
                e.layerData.name.trim().split(" ").join("-")
              ),
              i.setAttribute("width", e.width),
              i.setAttribute("height", e.height),
              i.setAttribute("preserveAspectRatio", "none"),
              i.setAttribute(
                "xlink:href",
                g._assetsData[e.layerData.name].base64
              ),
              "Graphic" === e.layerData.type &&
                i.setAttribute("opacity", e.alpha),
              (l = g._svgDocument.getElementById(r)),
              l.replaceWith(i)));
      },
      _createFilterWrapper: function (e) {
        var t,
          n,
          i,
          r,
          s = this.engine;
        (t = s._svgDocument.getElementById(e)),
          (n = document.createElementNS(s._SVGNAMESPACE, "g")),
          n.setAttribute("id", e + "_filter_wrapper"),
          t.getElementsByTagName("defs").length > 0
            ? ((i = t.getElementsByTagName("defs")[0]),
              t.getElementsByTagName("defs")[0].remove(),
              (r = t.innerHTML),
              (t.innerHTML = ""),
              (n.innerHTML = r),
              t.appendChild(i),
              t.appendChild(n))
            : ((r = t.innerHTML),
              (t.innerHTML = ""),
              (n.innerHTML = r),
              t.appendChild(n));
      },
      _getAssetDataType: function (e) {
        return e.hasOwnProperty("svgTextString")
          ? "svgTextString"
          : e.hasOwnProperty("svgString")
          ? "svgString"
          : e.hasOwnProperty("base64")
          ? "base64"
          : void 0;
      },
      _appendGroupToSvgDocument: function (e) {
        var t,
          n,
          i = this.engine;
        (t = e.layerData.name.trim().split(" ").join("-")),
          (n = i._svgDocument.getElementById(t)),
          n.setAttribute(
            "transform",
            "translate(" +
              e.position.x +
              " " +
              e.position.y +
              ") scale(" +
              e.scale.x +
              " " +
              e.scale.y +
              ")"
          ),
          n.setAttribute("opacity", e.alpha),
          this._hasRotation(e) && this._rotateSVG(e, n);
      },
      _shapeToSvgDocument: function (e) {
        var t,
          n,
          i,
          r = this.engine;
        (t = document.createElementNS(r._SVGNAMESPACE, "rect")),
          t.setAttribute("x", e.x),
          t.setAttribute("y", e.y),
          t.setAttribute("width", e.width),
          t.setAttribute("height", e.height),
          t.setAttribute("fill", e.layerData.color),
          t.setAttribute("opacity", e.layerData.opacity),
          (n = e.layerData.name),
          (i = r._svgDocument.getElementById(n)),
          i.setAttribute("transform", ""),
          i.appendChild(t);
      },
      _solidColorToSvgDocument: function (e) {
        var t,
          n,
          i,
          r = this.engine;
        (t = document.createElementNS(r._SVGNAMESPACE, "rect")),
          t.setAttribute("width", "100%"),
          t.setAttribute("height", "100%"),
          t.setAttribute("fill", r._uiJSON.backgroundColor.color),
          (n = e.parent.layerData.name.trim().split(" ").join("-")),
          (i = r._svgDocument.getElementById(n)),
          i.appendChild(t);
      },
      _getSvgFile: function () {
        var e,
          t = this.engine;
        e = t._svgDocument.outerHTML;
      },
      _downloadString: function (e, t, n) {
        var i = new Blob([e], { type: t }),
          r = document.createElement("a");
        (r.download = n),
          (r.href = URL.createObjectURL(i)),
          (r.dataset.downloadurl = [t, r.download, r.href].join(":")),
          (r.style.display = "none"),
          document.body.appendChild(r),
          r.click(),
          document.body.removeChild(r),
          setTimeout(function () {
            URL.revokeObjectURL(r.href);
          }, 1500);
      },
      applySVGEffect: function (e) {
        var t = this,
          n = this.engine,
          i =
            e.children &&
            e.children[0] &&
            e.children[0].layerData &&
            e.children[0].layerData.styles &&
            e.children[0].layerData.styles.layerEffects &&
            e.children[0].layerData.styles.layerEffects.dropShadow &&
            e.children[0].layerData.styles.layerEffects.dropShadow.enabled,
          r = n._hasColorOverlay(e.children[0].layerData);
        if (r) {
          var s = t._getOriginalLayerName(e.layerData.name),
            o =
              n._getLayerFromUiJson(s, "graphic") ||
              n._getLayerFromUiJson(s, "background") ||
              n._getLayerFromUiJson(s, "text"),
            a = void 0;
          o && (a = o.color),
            "Background Color" == e.layerData.name &&
              ((o = n._uiJSON.backgroundColor), (a = o.color)),
            a && (a = n._hextoRGB(a)),
            a && a.r >= 0 && ((a.red = a.r), (a.green = a.g), (a.blue = a.b)),
            (r.color = a || r.color);
        }
        var l =
          e.children &&
          e.children[0] &&
          e.children[0].layerData &&
          e.children[0].layerData.styles &&
          e.children[0].layerData.styles.layerEffects &&
          e.children[0].layerData.styles.layerEffects.gradientFill;
        if (
          ((i = i && e.children[0].layerData.styles.layerEffects.dropShadow),
          i &&
            ((i.width = e.children[0].width),
            (i.height = e.children[0].height)),
          r)
        ) {
          var c = n._svgDocument.getElementById(
              e.layerData.name.trim().split(" ").join("-")
            ),
            u = e._colorOverride || n._rgbToHex(r.color),
            h = "screen" === r.mode && ("#000000" === u || "#000" === u);
          if (!h) {
            var d = { blendMode: r.mode, color: u },
              p = new SVG.Color(d);
            p.colorNode(c);
          }
        }
        var f = { colorOverlay: {}, shadow: i },
          m = i;
        m && !l && t.applySVGFilter(e, f);
        var g =
          e.children &&
          e.children[0] &&
          e.children[0].layerData &&
          e.children[0].layerData.styles &&
          e.children[0].layerData.styles.layerEffects &&
          e.children[0].layerData.styles.layerEffects.frameFX &&
          e.children[0].layerData.styles.layerEffects.frameFX.enabled;
        g && t.applySVGStroke(e);
      },
      applySVGFilter: function (e, t) {
        var n,
          i,
          r,
          s,
          o,
          a,
          l,
          c = this,
          n = {
            name: "filter" + e.layerData.name.trim().split(" ").join("-"),
            shadow: t.shadow,
            colorOverlay: t.colorOverlay,
          };
        for (
          i = c._createFilter(n),
            c._addFilterToSVG(i, engine._svgDocument),
            r = engine._svgDocument.getElementById(
              e.layerData.name.trim().split(" ").join("-")
            ),
            s = r.querySelectorAll("*"),
            o = null,
            a = null,
            l = 0;
          l < s.length;
          l++
        )
          s[l].id.indexOf("_filter_wrapper") > -1 &&
            (o = engine._svgDocument.getElementById(s[l].id));
        o && !c._isLayerInDocIntoDocs(o)
          ? c._assignFilter(i, o)
          : c._assignFilter(i, r);
      },
      applySVGStroke: function () {},
      applySVGGradient: function (e, t) {
        var n = this,
          i = {
            name: "gradient" + e.layerData.name.trim().split(" ").join("-"),
            type: t.type,
            stops: t.gradient,
            angle: t.angle,
          },
          r = n._createSVGGradient(i);
        n._addFilterToSVG(r, engine._svgDocument);
        var s = engine._svgDocument.getElementById(
          e.layerData.name.trim().split(" ").join("-")
        );
        n._assignGradient(r, s);
      },
      _designateSVGEffects: function () {
        var e,
          t,
          n,
          i = this,
          r = this.engine;
        (t = []),
          r._treeWalker(r._getObjectByName("Design"), "children", function (i) {
            (e = r._hasLayerEffects(i.layerData)),
              (n = /^Background/.test(i.parent.layerData.name)),
              e && !n && t.push(i.parent);
          }),
          (t = t.filter(function (e, t, n) {
            return n.indexOf(e) === t;
          })),
          (t = t.reverse()),
          t.forEach(function (e) {
            i.applySVGEffect(e);
          });
      },
      _createFilter: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          a,
          l,
          c,
          u,
          h,
          d,
          p,
          f,
          m,
          g,
          v,
          _,
          y,
          b,
          w,
          x,
          C,
          T,
          S,
          E,
          k = this.engine;
        return (
          (d = document.createElementNS(k._SVGNAMESPACE, "filter")),
          e
            ? (e.colorOverlay || (e.colorOverlay = {}),
              e.shadow || (e.shadow = {}),
              (t = e.name || "filter" + Date.now()),
              (p = e.colorOverlay.color || { red: 0, green: 0, blue: 0 }),
              (f = "rgb(" + p.red + ", " + p.green + ", " + p.blue + ")"),
              (m = "normal" === e.colorOverlay.mode ? "normal" : "screen"),
              (g = e.colorOverlay.opacity / 100 || "0"),
              (v = e.shadow.color || { red: 0, green: 0, blue: 0 }),
              (_ = "rgb(" + v.red + ", " + v.green + ", " + v.blue + ")"),
              (y = e.shadow.localLightingAngle || 0),
              (y = (180 - Math.abs(y)) * (-Math.abs(y) / y) || 0),
              (b = e.shadow.distance || 0),
              (w = {
                x: (Math.round(1e3 * Math.cos((y * Math.PI) / 180)) / 1e3) * b,
                y: (Math.round(1e3 * Math.sin((-y * Math.PI) / 180)) / 1e3) * b,
              }),
              (x = e.shadow.blur / 10 || 0),
              (C = e.shadow.opacity / 100 || 0),
              w.x > 30 &&
                ((T = 100 * ((e.shadow.width + w.x) / e.shadow.width + 0.2)),
                d.setAttribute("width", "" + T + "%"),
                d.setAttribute("filterUnits", "userSpaceOnUse")),
              w.y > 30 &&
                ((T = 100 * ((e.shadow.height + w.y) / e.shadow.height + 0.2)),
                d.setAttribute("height", "" + T + "%"),
                d.setAttribute("filterUnits", "userSpaceOnUse")),
              w.x < -30 &&
                ((T =
                  100 *
                  ((e.shadow.width + Math.abs(w.x)) / e.shadow.width + 0.2)),
                d.setAttribute("x", "" + 1.1 * w.x),
                d.setAttribute("width", "" + T + "%"),
                d.setAttribute("filterUnits", "userSpaceOnUse")),
              w.y < -30 &&
                ((T =
                  100 *
                  ((e.shadow.height + Math.abs(w.y)) / e.shadow.height + 0.2)),
                d.setAttribute("y", "" + 1.1 * w.y),
                d.setAttribute("height", "" + T + "%"),
                d.setAttribute("filterUnits", "userSpaceOnUse")),
              (n = document.createElementNS(k._SVGNAMESPACE, "feComposite")),
              n.setAttribute("id", "feComposite1"),
              n.setAttribute("k1", "0"),
              n.setAttribute("k2", "1"),
              n.setAttribute("result", "composite1"),
              n.setAttribute("operator", "arithmetic"),
              n.setAttribute("in2", "SourceGraphic"),
              (o = document.createElementNS(k._SVGNAMESPACE, "feColorMatrix")),
              o.setAttribute("id", "colormatrix1"),
              o.setAttribute("values", "1"),
              o.setAttribute("type", "saturate"),
              o.setAttribute("result", "colormatrix1"),
              o.setAttribute("in", "composite1"),
              (l = document.createElementNS(k._SVGNAMESPACE, "feFlood")),
              l.setAttribute("id", "flood1"),
              l.setAttribute("flood-color", f),
              l.setAttribute("flood-opacity", "" + g),
              l.setAttribute("result", "flood1"),
              (u = document.createElementNS(k._SVGNAMESPACE, "feBlend")),
              u.setAttribute("id", "blend1"),
              u.setAttribute("mode", m),
              u.setAttribute("in", "flood1"),
              u.setAttribute("result", "blend1"),
              u.setAttribute("in2", "colormatrix1"),
              (h = document.createElementNS(k._SVGNAMESPACE, "feBlend")),
              h.setAttribute("id", "blend2"),
              h.setAttribute("mode", "normal"),
              h.setAttribute("result", "blend2"),
              h.setAttribute("in2", "blend1"),
              (a = document.createElementNS(k._SVGNAMESPACE, "feColorMatrix")),
              a.setAttribute("id", "colormatrix2"),
              a.setAttribute("values", "1"),
              a.setAttribute("type", "saturate"),
              a.setAttribute("result", "colormatrix2"),
              a.setAttribute("in", "blend2"),
              (i = document.createElementNS(k._SVGNAMESPACE, "feComposite")),
              i.setAttribute("id", "composite2"),
              i.setAttribute("k2", "1"),
              i.setAttribute("result", "composite2"),
              i.setAttribute("operator", "in"),
              i.setAttribute("in", "colormatrix2"),
              i.setAttribute("in2", "SourceGraphic"),
              (c = document.createElementNS(k._SVGNAMESPACE, "feFlood")),
              c.setAttribute("id", "flood2"),
              c.setAttribute("flood-color", "" + _),
              c.setAttribute("flood-opacity", "" + C),
              c.setAttribute("result", "flood2"),
              (r = document.createElementNS(k._SVGNAMESPACE, "feComposite")),
              r.setAttribute("id", "composite3"),
              r.setAttribute("result", "composite3"),
              r.setAttribute("operator", "in"),
              r.setAttribute("in", "flood2"),
              r.setAttribute("in2", "composite2"),
              (S = document.createElementNS(k._SVGNAMESPACE, "feGaussianBlur")),
              S.setAttribute("id", "gaussianBlur"),
              S.setAttribute("stdDeviation", "" + x),
              S.setAttribute("result", "gaussianBlur"),
              S.setAttribute("in", "composite3"),
              (E = document.createElementNS(k._SVGNAMESPACE, "feOffset")),
              E.setAttribute("id", "offset"),
              E.setAttribute("result", "offset"),
              E.setAttribute("dx", w.x),
              E.setAttribute("dy", w.y),
              (s = document.createElementNS(k._SVGNAMESPACE, "feComposite")),
              s.setAttribute("id", "composite4"),
              s.setAttribute("result", "composite4"),
              s.setAttribute("operator", "over"),
              s.setAttribute("in", "composite2"),
              s.setAttribute("in2", "offset"),
              d.setAttribute("id", t),
              d.append(n),
              d.append(o),
              d.append(l),
              d.append(u),
              d.append(h),
              d.append(a),
              d.append(i),
              d.append(c),
              d.append(r),
              d.append(S),
              d.append(E),
              d.append(s),
              d)
            : d
        );
      },
      _createSVGGradient: function (e) {
        var t,
          n,
          i = this.engine;
        return e && e.type
          ? ((t =
              "radial" === e.type
                ? document.createElementNS(i._SVGNAMESPACE, "radialGradient")
                : document.createElementNS(i._SVGNAMESPACE, "linearGradient")),
            t.setAttribute("id", e.name),
            (n = e.stops.interpolation),
            e.stops.colors.forEach(function (e, r) {
              var s = document.createElementNS(i._SVGNAMESPACE, "stop"),
                o = "stop-color:" + i._rgbToHex(e.color);
              s.setAttribute("id", "stop" + r),
                s.setAttribute("offset", e.location / n),
                s.setAttribute("style", o),
                t.append(s);
            }),
            t)
          : document.createElementNS(i._SVGNAMESPACE, "linearGradient");
      },
      _addFilterToSVG: function (e, t) {
        var n,
          i = this.engine;
        (n = t.getElementById("globalDefs")),
          n ||
            ((n = document.createElementNS(i._SVGNAMESPACE, "defs")),
            n.setAttribute("id", "globalDefs"),
            t.prepend(n)),
          n.append(e);
      },
      _isLayerInDocIntoDocs: function (e) {
        if ("Design" === engine._svgDocument.getAttribute("id"))
          for (
            var t = e.parentElement, n = e.parentElement.getAttribute("id");
            "Design" !== n;

          ) {
            if (n.indexOf("_multilayer") > -1) return !0;
            (t = t.parentElement), (n = t.parentElement.getAttribute("id"));
          }
        return !1;
      },
      _assignFilter: function (e, t) {
        var n, i, r;
        return (
          (n = t.getAttribute("style")),
          (i = e.getAttribute("id")),
          n
            ? ((r = t.getAttribute("style")),
              (r = r + ";filter:url(#" + i + ")"),
              t.removeAttribute("style"),
              t.setAttribute("style", r),
              void 0)
            : void t.setAttribute("style", "filter:url(#" + i + ")")
        );
      },
      _assignGradient: function (e, t) {
        var n = t.getAttribute("fill"),
          i = e.getAttribute("id");
        if (!n) return void t.setAttribute("fill", "fill:url(#" + i + ")");
        var r = t.getAttribute("fill");
        (r = "fill:url(#" + i + ")"),
          t.removeAttribute("fill"),
          t.setAttribute("fill", r);
      },
    },
  }),
  Class(
    SVG,
    "Color"
  )({
    prototype: {
      _blendingColor: void 0,
      _blendingMode: void 0,
      init: function (e) {
        var t = this;
        (t._blendingColor = e.color || "#000000"),
          (t._blendingMode = e.blendMode || "normal");
      },
      _calculateScreen: function (e, t) {
        var n, i, r, s, o, a, l;
        try {
          return (
            (n = new Chameleon(e)),
            (i = new Chameleon(t)),
            (r = 1 - (1 - n.toRGB().r / 255) * (1 - i.toRGB().r / 255)),
            (o = 1 - (1 - n.toRGB().g / 255) * (1 - i.toRGB().g / 255)),
            (s = 1 - (1 - n.toRGB().b / 255) * (1 - i.toRGB().b / 255)),
            (a = {}),
            (a.r = 255 * r),
            (a.g = 255 * o),
            (a.b = 255 * s),
            (l = new Chameleon(a))
          );
        } catch (c) {
          return e;
        }
      },
      _colorBlend: function (e, t, n) {
        switch (n) {
          case "screen":
            return this._calculateScreen(e, t).toHTML();
          default:
            return t;
        }
      },
      _svgTreeWalker: function (e, t) {
        for (var n = document.createTreeWalker(e, 1); n.nextNode(); )
          t(n.currentNode);
      },
      _getFill: function (e) {
        return e.getAttribute("fill");
      },
      _setFill: function (e, t) {
        e.setAttribute("fill", t);
      },
      _removeFill: function (e) {
        return e.removeAttribute("fill");
      },
      _applyFillToNode: function (e, t) {
        this._removeFill(e), this._setFill(e, t);
      },
      _hasFill: function (e) {
        var t, n, i;
        return (t = this._getFill(e)), (n = "none" === t), (i = !!t), !n && i;
      },
      _svgNodeCase: function (e) {
        var t, n, i;
        (t = this._getFill(e)),
          (n = this._hasFill(e)),
          n
            ? ((i = this._colorBlend(
                t,
                this._blendingColor,
                this._blendingMode
              )),
              this._applyFillToNode(e, i))
            : ((i = this._colorBlend(
                "#000000",
                this._blendingColor,
                this._blendingMode
              )),
              this._applyFillToNode(e, i));
      },
      _normalNodeCase: function (e) {
        var t, n, i;
        (t = this._getFill(e)),
          (n = this._hasFill(e)),
          n &&
            ((i = this._colorBlend(t, this._blendingColor, this._blendingMode)),
            this._applyFillToNode(e, i));
      },
      _findColorsInText: function (e) {
        var t, n, i;
        return (
          (t = []),
          (n = /(stroke|fill)\s*\:\s*.*?[\;|\}]/g),
          (i = e.match(n)),
          i &&
            i.forEach(function (e) {
              var n = e.slice(e.indexOf(":") + 1, e.length - 1);
              "none" !== n && t.push(n);
            }),
          t
        );
      },
      _replaceColorsInText: function (e, t, n) {
        var i, r;
        if (t.length !== n.length) return e;
        for (i = e, r = 0; r < t.length; r++) i = i.replace(t[r], n[r]);
        return i;
      },
      _getStyleText: function (e) {
        return e.childNodes && e.childNodes[0] && e.childNodes[0].textContent;
      },
      _substituteStyleText: function (e, t) {
        e.childNodes[0].textContent = t;
      },
      _styleNodeCase: function (e) {
        var t, n, i, r, s;
        for (
          n = this._getStyleText(e),
            t = this._findColorsInText(n),
            r = [],
            i = 0;
          i < t.length;
          i++
        )
          r.push(
            this._colorBlend(t[i], this._blendingColor, this._blendingMode)
          );
        (s = this._replaceColorsInText(n, t, r)),
          this._substituteStyleText(e, s);
      },
      _strategyForTags: function (e) {
        var t;
        if (((t = e.tagName), this._blendingColor && this._blendingMode))
          switch (t) {
            case "svg":
              this._svgNodeCase(e);
              break;
            case "style":
              this._styleNodeCase(e);
              break;
            default:
              this._normalNodeCase(e);
          }
      },
      colorNode: function (e) {
        var t = this;
        t._svgTreeWalker(e, t._strategyForTags.bind(t));
      },
    },
  }),
  (FlowChecker = {}),
  Class(
    FlowChecker,
    "Base"
  )({
    enabled: /debug=true/.test(window.location.href),
    before: function () {
      throw new Error(
        'You need to implement function "before" for this flow checker'
      );
    },
    after: function () {
      throw new Error(
        'You need to implement function "after" for this flow checker'
      );
    },
  }),
  Class(FlowChecker, "Render").inherits(FlowChecker.Base)({
    _name: "Render",
    before: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c " + this._name + " Before",
          "color: blue; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._structureJSON, "layers", function (t) {
          var n = t.styles.blendOptions && t.styles.blendOptions.mode;
          e.push({
            name: t.name,
            x: t.x,
            y: t.y,
            width: t.width,
            height: t.height,
            visible: t.visible,
            blendMode: n,
            opacity: t.opacity,
            fill: t.fill,
            imageUrl:
              (t.smartObject &&
                t.smartObject.layers[0] &&
                t.smartObject.layers[0].image) ||
              t.image,
          });
        }),
          console.table(e);
      }
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c " + this._name + " After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        );
        var e,
          t = [],
          n = this._name,
          i = !1;
        engine._imageData.hasOwnProperty("sortedColumn") ||
          (engine._imageData.sortedColumn = []),
          engine._imageData.hasOwnProperty("sortedRow") ||
            (engine._imageData.sortedRow = []),
          engine._imageData.sortedColumn.indexOf(n) < 0 &&
            engine._imageData.sortedColumn.push(n),
          engine._treeWalker(engine._stage, "children", function (r) {
            engine._imageData.hasOwnProperty(r.layerData.name) ||
              (engine._imageData[r.layerData.name] = {}),
              engine._imageData.sortedRow.indexOf(r.layerData.name) < 0 &&
                engine._imageData.sortedRow.push(r.layerData.name),
              (i = r.visible),
              (r.visible = !0),
              engine._canvasRenderer.render(r),
              (e = engine._canvasRenderer.view.getContext("2d")),
              (engine._imageData[r.layerData.name][n] = {
                data: e.getImageData(
                  0,
                  0,
                  engine._canvasRenderer.view.width,
                  engine._canvasRenderer.view.height
                ),
              }),
              (r.visible = i),
              t.push({
                name: r.layerData.name,
                x: r.x,
                y: r.y,
                width: r.width,
                height: r.height,
                scaleX: r.scale.x,
                scaleY: r.scale.y,
                visible: r.visible,
                blendMode: r.blendMode,
                alpha: r.alpha,
              });
          }),
          console.table(t);
      }
    },
  }),
  Class(FlowChecker, "ApplyAdjustmentLayers").inherits(FlowChecker.Base)({
    _name: "ApplyAdjustmentLayers",
    before: function () {
      if (FlowChecker.Base.enabled)
        if (
          (console.log(
            "%c ApplyAdjustmentLayers Before",
            "color: blue; font-size: 1.2em; font-weight: bold"
          ),
          engine._adjustmentLayers.length > 0)
        )
          for (var e = 0; e < engine._adjustmentLayers.length; e++) {
            var t = engine._getObjectByName(engine._adjustmentLayers[e]);
            console.log(
              "'",
              t.layerData.name,
              "' with type '",
              t.layerData.type,
              "' has data:"
            ),
              console.log(t.layerData.curves || t.layerData.hueSaturation);
          }
        else console.log("No adjustment layers");
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c ApplyAdjustmentLayers After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        );
        for (var e = 0; e < engine._adjustmentLayers.length; e++) {
          var t = engine._getObjectByName(engine._adjustmentLayers[e]);
          console.log(
            "'",
            t.layerData.name,
            "' has texture: ",
            t.texture.baseTexture
          );
        }
      }
    },
  }),
  Class(FlowChecker, "CurvesFilmstrip").inherits(FlowChecker.Render)({
    _name: "CurvesFilmstrip",
  }),
  Class(FlowChecker, "EffectsQueue").inherits(FlowChecker.Render)({
    _name: "EffectsQueue",
  }),
  Class(FlowChecker, "HideAffectedLayers").inherits(FlowChecker.Base)({
    _name: "HideAffectedLayers",
    before: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c HideAffectedLayers Before",
          "color: blue; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._stage, "children", function (t) {
          "undefined" != typeof t.layerData.affectedBy &&
            e.push({
              layer: t.layerData.name,
              affectedBy: t.layerData.affectedBy,
            });
        }),
          console.table(e);
      }
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c HideAffectedLayers After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        ),
          console.log(
            "%c Touched by Adjustments:",
            "font-weight:bold; color:brown"
          ),
          console.table(engine._touchedByAdjustments),
          console.log(
            "%c Visibility of layers:",
            "font-weight:bold; color:brown"
          );
        var e = [];
        Object.keys(engine._touchedByAdjustments).forEach(function (t) {
          var n = engine._getObjectByName(t);
          e.push({ layer: t, visibility: n.visible });
        }),
          console.table(e);
      }
    },
  }),
  Class(FlowChecker, "PreloadAssets").inherits(FlowChecker.Base)({
    _name: "PreloadAssets",
    before: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c PreloadAssets Before",
          "color: blue; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._structureJSON, "layers", function (t) {
          e.push({
            name: t.name,
            type: t.type,
            mask: t.mask && t.mask.image,
            collada: t.transform3DFile,
            imageUrl:
              (t.smartObject &&
                t.smartObject.layers[0] &&
                t.smartObject.layers[0].image) ||
              t.image,
          });
        }),
          console.table(e);
      }
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c PreloadAssets After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        );
        var e = {
          _cachedMasks: Object.keys(engine._cachedMasks).length,
          _cachedColladaFiles: Object.keys(engine._cachedColladaFiles).length,
          _cachedImages: Object.keys(engine._cachedImages).length,
        };
        console.table(e),
          e._cachedImages > 0 &&
            (console.log("Cached Images:"),
            console.table(engine._cachedImages)),
          e._cachedMasks > 0 &&
            (console.log("Cached Masks:"), console.table(engine._cachedMasks)),
          e._cachedColladaFiles > 0 &&
            (console.log("Cached Collada Files:"),
            console.table(engine._cachedColladaFiles));
      }
    },
  }),
  Class(FlowChecker, "RestoreVisibility").inherits(FlowChecker.Base)({
    _name: "RestoreVisibility",
    before: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c RestoreVisibility Before",
          "color: blue; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._stage, "children", function (t) {
          e.push({ name: t.layerData.name, visible: t.visible });
        }),
          console.table(e);
      }
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c RestoreVisibility After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._stage, "children", function (t) {
          e.push({ name: t.layerData.name, visible: t.visible });
        }),
          console.table(e);
      }
    },
  }),
  Class(FlowChecker, "RulesSetup").inherits(FlowChecker.Render)({
    _name: "RulesSetup",
  }),
  Class(FlowChecker, "RunAssetRules").inherits(FlowChecker.Render)({
    _name: "RunAssetRules",
  }),
  Class(FlowChecker, "RunRules").inherits(FlowChecker.Render)({
    _name: "RunRules",
  }),
  Class(FlowChecker, "TagAdjustedLayers").inherits(FlowChecker.Base)({
    _name: "TagAdjustedLayers",
    before: function () {
      FlowChecker.Base.enabled &&
        (console.log(
          "%c TagAdjustedLayers Before",
          "color: blue; font-size: 1.2em; font-weight: bold"
        ),
        engine._adjustmentLayers.length > 0
          ? (console.log("Adjustment layers: "),
            console.table(engine._adjustmentLayers))
          : console.log("No adjustment layers"));
    },
    after: function () {
      if (FlowChecker.Base.enabled) {
        console.log(
          "%c TagAdjustedLayers After",
          "color: purple; font-size: 1.2em; font-weight: bold"
        );
        var e = [];
        engine._treeWalker(engine._stage, "children", function (t) {
          t.layerData &&
            t.layerData.affectedBy &&
            e.push({
              layer: t.layerData.name,
              affectedBy: t.layerData.affectedBy,
            });
        }),
          console.table(e);
      }
    },
  }),
  Class(FlowChecker, "Update").inherits(FlowChecker.Render)({
    _name: "Update",
  }),
  (Interactive = {}),
  Class(Interactive, "Guide").includes(
    CustomEventSupport,
    NodeSupport
  )({
    CENTER_GUIDELINE_WEIGHT: 4,
    ELEMENT_GUIDELINE_WEIGHT: 2,
    prototype: {
      name: null,
      canvasDimensions: null,
      layer: null,
      padding: null,
      init: function (e) {
        (this.name = e.name),
          (this.canvasDimensions = e.canvasDimensions),
          (this.axis = e.axis),
          (this.stage = e.stage),
          (this.padding = e.padding),
          (this.layer = new PIXI.Graphics()),
          (this.layer.layerData = { name: this.name, type: "Guide" });
      },
      _drawGuide: function (e, t, n, i) {
        (this.layer = new PIXI.Graphics()),
          (this.layer.layerData = { name: this.name, type: "Guide" }),
          this.layer.lineStyle(i, n),
          "x" === e &&
            (this.layer.moveTo(t, 0),
            this.layer.lineTo(t, this.canvasDimensions.height)),
          "y" === e &&
            (this.layer.moveTo(0, t),
            this.layer.lineTo(this.canvasDimensions.width, t)),
          this.render(this.stage);
      },
      updateLine: function (e, t) {
        this.destroyLayer(),
          t === e.coord
            ? this._drawGuide(
                e.axis,
                e.coord - this.padding,
                15745535,
                this.constructor.CENTER_GUIDELINE_WEIGHT
              )
            : this._drawGuide(
                e.axis,
                e.coord - this.padding,
                11069439,
                this.constructor.ELEMENT_GUIDELINE_WEIGHT
              );
      },
      updateGuide: function (e) {
        "x" === e.axis &&
          this.updateLine(e, this.canvasDimensions.width / 2 + this.padding),
          "y" === e.axis &&
            this.updateLine(e, this.canvasDimensions.height / 2 + this.padding),
          this.activate();
      },
      render: function (e) {
        return e.addChild(this.layer), this;
      },
      activate: function () {
        this.layer.visible = !0;
      },
      deactivate: function () {
        this.layer.visible = !1;
      },
      destroyLayer: function () {
        this.layer.destroy(), (this.layer = null);
      },
      destroy: function () {
        this.destroyLayer(), (this.canvasDimensions = null), (this.name = null);
      },
    },
  }),
  Class(Interactive, "InteractionControl").includes(
    NodeSupport,
    CustomEventSupport
  )({
    CORNERS: ["top-left", "top-right", "bottom-right", "bottom-left"],
    MINIMUM_LAYER_SIZE: 4,
    RESIZE_DIMENSION_THRESHOLD: 60,
    prototype: {
      allowScale: !1,
      allowMove: !1,
      targetLayer: null,
      layer: null,
      canvasDimensions: null,
      bounds: null,
      isActive: !1,
      registry: null,
      snapSupport: null,
      positionControl: null,
      hasArtificialPositioning: !1,
      init: function (e) {
        (this.allowScale = e.allowScale),
          (this.allowMove = e.allowMove),
          (this.targetLayer = e.targetLayer),
          (this.canvasDimensions = e.canvasDimensions),
          (this.registry = e.registry || {}),
          (this.snapSupport = e.snapSupport),
          (this.resizeControls = []),
          (this.lockLayerTranslation = !1),
          (this.isRuleLayer = this.targetLayer.layerData.isRuleLayer),
          (this.delta = {}),
          (this.delta.x = 0),
          (this.delta.y = 0),
          (this.hasTrimBoundsCorrection = !1),
          (this.isRotationSupported = !(
            this.isRuleLayer || this.targetLayer.layerData.hasSkew
          ));
        var t = this.targetLayer.getBounds();
        if (
          (this.isRuleLayer &&
            (t = engine._getTrimLayerDimensions(this.targetLayer)),
          null === t && void 0 !== window.newrelic)
        ) {
          var n = new Error(
            "N-gin:LayerBoundsNull" +
              JSON.stringify({
                name: this.targetLayer.layerData.name,
                type: this.targetLayer.layerData.type,
                isReady: window.engine.ready,
                processCount: window.engine._processCount,
              })
          );
          window.newrelic.noticeError(n);
        }
        return (
          (this.bounds = { x: t.x, y: t.y, width: t.width, height: t.height }),
          (this.positionControl = new Interactive.PositionControl({
            name: "positionControl",
            bounds: t,
            allowMove: this.allowMove,
            canvasDimensions: this.canvasDimensions,
            snapSupport: this.snapSupport,
            isPositioning: this.setTranslationLock.bind(this),
          })),
          this.appendChild(this.positionControl),
          this.isRotationSupported &&
            ((this.rotationControl = new Interactive.RotationControl({
              name: "rotationControl",
              bounds: t,
              canvasDimensions: this.canvasDimensions,
              isRotating: this.setTranslationLock.bind(this),
            })),
            this.appendChild(this.rotationControl)),
          this.constructor.CORNERS.forEach(function (n) {
            var i = new Interactive.ResizeControl({
              name: "resizeControl_" + n,
              bounds: t,
              corner: n,
              scale: this.targetLayer.scale,
              handlersCanvas: e.handlersCanvas,
              isResizing: this.setTranslationLock.bind(this),
            });
            this.appendChild(i), this.resizeControls.push(i);
          }, this),
          (this.layer = new PIXI.Container()),
          (this.layer.layerData = {
            name: this.targetLayer.layerData.name + "_control",
            type: this.constructor.className,
          }),
          e.isActive && engine._canvas.matches(":hover") && this.activate(),
          this.children.forEach(function (e) {
            e.rotationCanvas || e.render(this.layer);
          }, this),
          this.children.forEach(this._addEventListenersForControl, this),
          this.targetLayer.visible === !1
            ? void this.hide()
            : void (this.targetLayer.hasVisibleContent() === !1 && this.hide())
        );
      },
      _addEventListenersForControl: function (e) {
        e.bind("change", this._changeEventHandler.bind(this)),
          e.bind("move", this._moveEventHandler.bind(this)),
          e.bind("resize", this._resizeEventHandler.bind(this)),
          e.bind("doubleclick", this._doubleClickEventHandler.bind(this)),
          e.bind("rightclick", this._rightClickEventHandler.bind(this)),
          e.bind(
            "hover",
            function () {
              this.dispatch("refresh");
            }.bind(this)
          ),
          e.bind(
            "unhover",
            function () {
              this.dispatch("refresh");
            }.bind(this)
          ),
          e.bind(
            "refresh",
            function () {
              this.dispatch("refresh");
            }.bind(this)
          ),
          e.bind(
            "interactionStart",
            function () {
              this.dispatch("interactionStart");
            }.bind(this)
          ),
          e.bind(
            "interactionEnd",
            function (e, t) {
              this.deactivateResizeControls(),
                this.activateResizeControls(),
                this.dispatch("interactionEnd", t);
            }.bind(this)
          ),
          e.bind(
            "select",
            function () {
              this.dispatch("select");
            }.bind(this)
          ),
          e.bind(
            "snap",
            function (e) {
              var t = e.data || e;
              this.dispatch("snap", t);
            }.bind(this)
          ),
          e.bind(
            "unsnap",
            function (e) {
              var t = e.data || e;
              this.dispatch("unsnap", t);
            }.bind(this)
          ),
          this.isRotationSupported &&
            (e.bind(
              "rotationStart",
              function () {
                (this.prevRotation =
                  this.targetLayer.rotation +
                  this.rotationControl.getInitialEdgeAngle()),
                  this.dispatch("rotationStart");
              }.bind(this)
            ),
            e.bind(
              "rotate",
              function (e) {
                var t = e.data || e;
                this.rotate(t);
              }.bind(this)
            ));
      },
      _doubleClickEventHandler: function () {
        this.dispatch("doubleclick", {
          targetName: this.targetLayer.layerData.name,
        });
      },
      _rightClickEventHandler: function (e) {
        this.dispatch("rightclick", {
          targetName: this.targetLayer.layerData.name,
          top: e.data.originalEvent.pageY,
          left: e.data.originalEvent.pageX,
        });
      },
      _changeEventHandler: function (e) {
        var t = e.data || e;
        (this.hasTrimBoundsCorrection = !1),
          this.dispatch("change", {
            layer: this.targetLayer,
            originalBounds: this.bounds,
            originalDispatcher: t.originalDispatcher,
          });
      },
      _resizeEventHandler: function (e) {
        var t, n, i, r, s, o, a, l, c, u, h, d, p, f;
        if (
          ((t = e.data || e),
          (n = e.target.corner),
          (r = t.originalBounds),
          (s = t.originalPosition),
          (i = t.newPosition),
          (c = t.originalScale),
          (o = this.getScale(r, s, i, n)),
          (l = Math.floor(r.height * o)),
          (a = Math.floor((r.width * l) / r.height)),
          (u = { x: c.x * (a / r.width), y: c.y * (l / r.height) }),
          (h = this.constructor.MINIMUM_LAYER_SIZE),
          !(h > a || h > l))
        ) {
          (i = { x: this.targetLayer.x, y: this.targetLayer.y }),
            (this.targetLayer.scale.x = u.x),
            (this.targetLayer.scale.y = u.y),
            (d = this.targetLayer.getRotatedDiff()),
            (p = this.targetLayer.getScaledPivot());
          var m = this.targetLayer.getBounds();
          switch (
            (this.isRuleLayer &&
              ((f = engine._getTrimLayerDimensions(this.targetLayer)),
              (m = f),
              this.hasTrimBoundsCorrection ||
                ((this.delta.x = this.targetLayer.x - f.x),
                (this.delta.y = this.targetLayer.y - f.y),
                f.x || f.y || ((this.delta.x = 0), (this.delta.y = 0)))),
            n)
          ) {
            case "top-right":
              (i.y = r.y + r.height - m.height + p.y + d.height),
                (i.x = r.x + p.x + d.width);
              break;
            case "top-left":
              (i.x = r.x + r.width - m.width + p.x + d.width),
                (i.y = r.y + r.height - m.height + p.y + d.height);
              break;
            case "bottom-left":
              (i.x = r.x + r.width - m.width + p.x + d.width),
                (i.y = r.y + p.y + d.height);
              break;
            case "bottom-right":
              (i.x = r.x + p.x + d.width), (i.y = r.y + p.y + d.height);
          }
          this.isRuleLayer
            ? ((i.x = i.x + this.delta.x),
              (i.y = i.y + this.delta.y),
              this.updateLayer(u, i),
              this.updateControl(f, this.targetLayer.scale))
            : (this.updateLayer(u, i),
              this.updateControl(
                this.targetLayer.getBounds(),
                this.targetLayer.scale
              )),
            this.dispatch("refresh"),
            (this.registry.lastActivatedResizeHandler = n);
        }
      },
      _moveEventHandler: function (e) {
        var t, n, i, r, s;
        (t = e.data || e),
          (n = t.newPosition),
          (r = this.targetLayer.getRotatedDiff()),
          (n.x += this.targetLayer.pivot.x + r.width),
          (n.y += this.targetLayer.pivot.y + r.height),
          (i = { x: this.targetLayer.scale.x, y: this.targetLayer.scale.y }),
          this.isRuleLayer
            ? (this.hasTrimBoundsCorrection ||
                ((s = engine._getTrimLayerDimensions(this.targetLayer)),
                (this.delta.x = this.targetLayer.x - s.x),
                (this.delta.y = this.targetLayer.y - s.y)),
              (n.x = n.x + this.delta.x),
              (n.y = n.y + this.delta.y),
              this.updateLayer(i, n),
              (s = engine._getTrimLayerDimensions(this.targetLayer)),
              (this.hasTrimBoundsCorrection = !0),
              this.updateControl(s, this.targetLayer.scale))
            : (this.updateLayer(i, n),
              this.updateControl(
                this.targetLayer.getBounds(),
                this.targetLayer.scale
              )),
          this.dispatch("refresh");
      },
      render: function (e) {
        e.addChild(this.layer);
      },
      getScale: function (e, t, n, i) {
        var r, s, o, a, l, c;
        switch (((r = {}), i)) {
          case "top-right":
            (r.x = 1), (r.y = -1);
            break;
          case "top-left":
            (r.x = -1), (r.y = -1);
            break;
          case "bottom-left":
            (r.x = -1), (r.y = 1);
            break;
          case "bottom-right":
            (r.x = 1), (r.y = 1);
        }
        return (
          (s = r.x * (t.x - n.x)),
          (o = r.y * (t.y - n.y)),
          (a = 0 > s * o ? s + o : Math.abs(s) > Math.abs(o) ? s : o),
          (l = Math.max(e.width, e.height)),
          (c = 1 - a / l)
        );
      },
      _getOppositeQuadrant: function (e) {
        return "center" === e
          ? "bottom-right"
          : "top-left" === e
          ? "bottom-right"
          : "top-right" === e
          ? "bottom-left"
          : "bottom-left" === e
          ? "top-right"
          : "bottom-right" === e
          ? "top-left"
          : void 0;
      },
      updateLayer: function (e, t) {
        (this.targetLayer.scale.x = e.x),
          (this.targetLayer.scale.y = e.y),
          (this.targetLayer.x = t.x),
          (this.targetLayer.y = t.y);
      },
      updateControl: function (e, t) {
        (e = e || this.targetLayer.getBounds()),
          (t = t || this.targetLayer.scale),
          this.children.forEach(function (n) {
            n.updatePosition(e, t),
              "undefined" == typeof n.corner &&
                "undefined" == typeof n.initialEdge &&
                n.updateDimensions(e);
          });
      },
      disable: function () {
        this.children.forEach(function (e) {
          e.disable && e.disable();
        });
      },
      enable: function () {
        this.children.forEach(function (e) {
          e.enable && e.enable();
        });
      },
      getResizeControls: function () {
        return this.children.filter(function (e) {
          return "ResizeControl" === e.constructor.className;
        });
      },
      getResizeControlByCorner: function (e) {
        var t = this.getResizeControls();
        return t.filter(function (t) {
          return t.corner === e;
        })[0];
      },
      getResizeControlsToActivate: function () {
        var e,
          t,
          n,
          i,
          r,
          s = this.constructor.RESIZE_DIMENSION_THRESHOLD;
        return (
          (e = this.targetLayer.width < s && this.targetLayer.height < s),
          (t =
            (this.targetLayer.width > s && this.targetLayer.height < s) ||
            (this.targetLayer.height > s && this.targetLayer.width < s)),
          e === !1 && t === !1
            ? this.getResizeControls()
            : ((n = []),
              e
                ? (i = this.targetLayer.getQuadrantLocation(
                    this.canvasDimensions
                  ))
                : ((i = this.registry.lastActivatedResizeHandler),
                  n.push(this.getResizeControlByCorner(i))),
              (r = this._getOppositeQuadrant(i)),
              n.push(this.getResizeControlByCorner(r)),
              n)
        );
      },
      activateResizeControls: function () {
        var e = this.getResizeControlsToActivate();
        e.forEach(function (e) {
          e.activate();
        });
      },
      deactivateResizeControls: function () {
        var e = this.getResizeControls();
        e.forEach(function (e) {
          e.deactivate();
        });
      },
      activate: function () {
        this.positionControl.activate(),
          this.deactivateResizeControls(),
          this.activateResizeControls(),
          this.rotationControl && this.rotationControl.activate(),
          (this.isActive = !0),
          this.dispatch("activate");
      },
      deactivate: function () {
        this.children.forEach(function (e) {
          e.deactivate();
        }),
          (this.isActive = !1),
          this.dispatch("deactivate");
      },
      hide: function () {
        this.children.forEach(function (e) {
          e.hide && e.hide();
        });
      },
      show: function () {
        this.children.forEach(function (e) {
          e.show && e.show();
        });
      },
      destroy: function () {
        this.children.forEach(function (e) {
          e.unbind("change"),
            e.unbind("move"),
            e.unbind("resize"),
            e.unbind("hover"),
            e.unbind("unhover"),
            e.unbind("refresh"),
            e.unbind("interactionStart"),
            e.unbind("interactionEnd"),
            e.unbind("select"),
            e.unbind("snap"),
            e.unbind("unsnap"),
            e.unbind("doubleclick"),
            (e.eventListeners = null),
            e.destroy();
        }),
          (this.allowScale = !1),
          (this.allowMove = !1),
          (this.targetLayer = null),
          (this.canvasDimensions = null),
          this.layer.parent.removeChild(this.layer),
          this.layer.destroy(!0),
          (this.layer = null);
      },
      getFrameDimensions: function () {
        return this.positionControl.getFrameDimensions();
      },
      isDragging: function () {
        return this.positionControl.isDragging();
      },
      updateScale: function (e) {
        var t, n;
        if (
          ((t = this._getDimensionsByScale(e)),
          !(
            t.height > 1.2 * engine._canvas.height ||
            t.width > 1.2 * engine._canvas.width ||
            ((n = this.constructor.MINIMUM_LAYER_SIZE),
            t.width < n || t.height < n)
          ))
        ) {
          var i = { x: e, y: e },
            r = this.targetLayer.getBounds(),
            s = (r.height - t.height) / 2,
            o = (r.width - t.width) / 2,
            a = {
              x: Math.round(this.targetLayer.x) + Math.round(o),
              y: Math.round(this.targetLayer.y) + Math.round(s),
            };
          this.updateLayer(i, a),
            this.updateControl(
              this.targetLayer.getBounds(),
              this.targetLayer.scale
            );
        }
      },
      updateControlScale: function (e) {
        0 === this.targetLayer.rotation
          ? this.updateScale(e)
          : ((this.targetLayer.scale.x = e),
            (this.targetLayer.scale.y = e),
            this.updateControl()),
          this.dispatch("refresh");
      },
      _getDimensionsByScale: function (e) {
        var t = this.targetLayer.getBounds();
        return {
          height: (t.height / this.getCurrentScale()) * e,
          width: (t.width / this.getCurrentScale()) * e,
        };
      },
      repaintControlUI: function () {
        if (
          this.positionControl &&
          this.positionControl.layer &&
          0 !== this.resizeControls.length
        ) {
          var e = this.resizeControls[0];
          e.dispatch("interactionEnd", {
            originalDispatcher: e.constructor.className,
          }),
            this.dispatch("change", {
              layer: this.targetLayer,
              originalBounds: this.bounds,
              originalDispatcher: this.constructor.className,
            });
        }
      },
      setTranslationLock: function (e) {
        this.lockLayerTranslation = e;
      },
      getCurrentScale: function () {
        return this.targetLayer.scale.x;
      },
      disableInteractions: function () {
        this.positionControl.removeAllListeners(),
          this.resizeControls.forEach(function (e) {
            e.removeAllListeners();
          });
      },
      enableInteractions: function () {
        this.disableInteractions(),
          this.positionControl.bindMouseBehavior(),
          this.positionControl.bindMovement(),
          this.resizeControls.forEach(function (e) {
            e.bindEvents();
          });
      },
      getRotationControl: function () {
        return this.rotationControl;
      },
      rotate: function (e) {
        var t = this.targetLayer.y - e.y,
          n = this.targetLayer.x - e.x,
          i = Math.atan2(t, n);
        0 == this.targetLayer.rotation
          ? (i = 6.28319)
          : (i += this.prevRotation),
          (i = parseFloat(i.toFixed(3))),
          this.targetLayer.rotate(i),
          this.updateControl();
      },
    },
  }),
  Module(
    Interactive,
    "InteractiveSupport"
  )({
    POSITION_PADDING: 9,
    GUIDES_VERTICAL: [
      "guideVerticalTop",
      "guideVerticalCenter",
      "guideVerticalBottom",
    ],
    GUIDES_HORIZONTAL: [
      "guideHorizontalTop",
      "guideHorizontalCenter",
      "guideHorizontalBottom",
    ],
    prototype: {
      _interactionControls: [],
      _lastActiveLayer: null,
      _registry: null,
      TAP_DELAY_TIME: 300,
      hasArtificialDrag: !1,
      _setupInteractions: function (e) {
        var t, n, i;
        if (
          ((this._canvasRenderer.plugins.interaction.autoPreventDefault = !1),
          (this._canvasRenderer.view.style.touchAction = "auto"),
          this._interactive &&
            ((this._registry = this._registry || {}),
            (t = {
              width: engine._canvasRenderer.width,
              height: engine._canvasRenderer.height,
            }),
            (n = e.graphic.concat(e.text).concat(e.rulesEffects)),
            (n = n.filter(function (e) {
              return e.allowScale || e.allowMove;
            })),
            0 !== n.length))
        ) {
          (i = n.map(function (e) {
            return this._getObjectByName(e.name);
          }, this)),
            (this._interactionControls = []);
          var r = document.createElement("canvas");
          n.forEach(function (e, n) {
            var s, o, a, l;
            (s = i[n]),
              (o = s.layerData.name),
              (a = this._registry[o] || {
                lastActivatedResizeHandler: "top-left",
              }),
              (this._registry[o] = a),
              (l = this._createInteractionControl({
                layer: s,
                component: e,
                registryEntry: a,
                canvasDimensions: t,
                handlersCanvas: r,
              })),
              this._addEventListenersToControl(l),
              this._interactionControls.push(l);
          }, this),
            (this._interactionControls = this._interactionControls.sort(
              function (e, t) {
                var n, i;
                return (
                  (n = e.targetLayer.width * e.targetLayer.height),
                  (i = t.targetLayer.width * t.targetLayer.height),
                  n > i ? -1 : i > n ? 1 : 0
                );
              }
            )),
            this._interactionControls.forEach(function (e) {
              e.render(this._stage);
            }, this),
            this._interactionControls.forEach(function (e) {
              var t = e.getRotationControl();
              t && t.render(this._stage);
            }, this),
            this.constructor.GUIDES_VERTICAL.forEach(function (e) {
              this[e] = new Interactive.Guide({
                name: e,
                canvasDimensions: t,
                axis: "y",
                stage: this._stage,
                padding: this.constructor.POSITION_PADDING,
              }).render(this._stage);
            }, this),
            this.constructor.GUIDES_HORIZONTAL.forEach(function (e) {
              this[e] = new Interactive.Guide({
                name: e,
                canvasDimensions: t,
                axis: "x",
                stage: this._stage,
                padding: this.constructor.POSITION_PADDING,
              }).render(this._stage);
            }, this),
            (this._stage.interactive = !0),
            this._stage.on(
              "mousedown",
              this._clickOnCanvasEventHandler.bind(this)
            ),
            this._stage.on(
              "mouseout",
              function () {
                this._deactivateInteractions(),
                  this._refresh(),
                  this.dispatch("interaction:mouseout");
              }.bind(this)
            ),
            this._setupTouchEvents(),
            this._setupBackspaceEvents();
        }
      },
      _createInteractionControl: function (e) {
        var t, n, i, r, s, o;
        return (
          (t = e.layer),
          (n = e.component),
          (i = e.registryEntry),
          (r = e.handlersCanvas),
          (s = e.canvasDimensions),
          (o = new Interactive.InteractionControl({
            allowScale: n.allowScale,
            allowMove: n.allowMove,
            targetLayer: t,
            isActive: this._lastActiveLayer === t.layerData.name,
            snapSupport: this.validateSnap.bind(this),
            canvasDimensions: s,
            handlersCanvas: r,
            registry: i,
          }))
        );
      },
      _addEventListenersToControl: function (e) {
        var t = function (e, t, n) {
          var i;
          return function () {
            var r = this,
              s = arguments,
              o = function () {
                (i = null), n || e.apply(r, s);
              },
              a = n && !i;
            clearTimeout(i), (i = setTimeout(o, t)), a && e.apply(r, s);
          };
        };
        e.bind("refresh", t(this._refresh.bind(this), 0)),
          e.bind(
            "interactionStart",
            this._interactionStartEventHandler.bind(this)
          ),
          e.bind("interactionEnd", this._interactionEndEventHandler.bind(this)),
          e.bind("change", this._changeEventHandler.bind(this)),
          e.bind("select", this._selectEventHandler.bind(this)),
          e.bind("snap", this._snapEventHandler.bind(this)),
          e.bind("unsnap", this._unsnapEventHandler.bind(this)),
          e.bind("doubleclick", this._doubleClickEventHandler.bind(this)),
          e.bind("backspace", this._backspaceEventHandler.bind(this)),
          e.bind("rightclick", this._rightClickEventHandler.bind(this)),
          e.bind("rotationStart", this._rotationStartHandler.bind(this));
      },
      _rotationStartHandler: function () {
        var e = this._stage;
        this.touchStartHandlerDebounce &&
          engine._canvas.removeEventListener(
            "touchstart",
            this.touchStartHandlerDebounce
          ),
          this.touchMoveHandlerDebounce &&
            engine._canvas.removeEventListener(
              "touchmove",
              this.touchMoveHandlerDebounce
            ),
          this.stageTouchMoveHandlerScoped &&
            e.off("touchmove", this.stageTouchMoveHandlerScoped),
          this.touchEndHandlerDebaounce &&
            e.off("touchend", this.touchEndHandlerDebaounce),
          engine._canvas.removeEventListener(
            "touchmove",
            this.touchMoveHandlerDebounce
          ),
          this._interactionControls.forEach(function (e) {
            e.disableInteractions();
          });
      },
      _clickOnCanvasEventHandler: function (e) {
        e.target === engine._stage &&
          (this._deactivateInteractions(), this._refresh());
      },
      _getDistance: function (e, t) {
        return Math.sqrt(
          Math.pow(e.clientX - t.clientX, 2) +
            Math.pow(e.clientY - t.clientY, 2)
        );
      },
      debounce: function (e, t, n) {
        var i;
        return function () {
          var r = this,
            s = arguments,
            o = function () {
              (i = null), n || e.apply(r, s);
            },
            a = n && !i;
          clearTimeout(i), (i = setTimeout(o, t)), a && e.apply(r, s);
        };
      },
      _setupTouchEvents: function () {
        var e = this._stage;
        (this.tapTime = 0),
          (this.previousDistance = 0),
          (this.distance = 0),
          (this.touchEventsInteractions = {
            allowPixiEvent: !1,
            isLayerProcessing: !1,
            processLayer: !1,
          }),
          (this.boundArtificialDragEnd = this._artificialDragEnd.bind(this)),
          this.touchStartHandlerDebounce &&
            engine._canvas.removeEventListener(
              "touchstart",
              this.touchStartHandlerDebounce
            ),
          this.touchMoveHandlerDebounce &&
            engine._canvas.removeEventListener(
              "touchmove",
              this.touchMoveHandlerDebounce
            ),
          this.stageTouchMoveHandlerScoped &&
            e.off("touchmove", this.stageTouchMoveHandlerScoped),
          this.touchEndHandlerDebaounce &&
            e.off("touchend", this.touchEndHandlerDebaounce),
          (this.touchStartHandlerDebounce = this._touchStartHandler.bind(this)),
          (this.touchMoveHandlerDebounce = this._touchMoveHandler.bind(this)),
          (this.touchEndHandlerDebaounce = this._touchEndHandler.bind(this)),
          (this.stageTouchMoveHandlerScoped =
            this._stageTouchMoveHandler.bind(this)),
          engine._canvas.addEventListener(
            "touchstart",
            this.touchStartHandlerDebounce
          ),
          engine._canvas.addEventListener(
            "touchmove",
            this.touchMoveHandlerDebounce
          ),
          e.on("touchend", this.touchEndHandlerDebaounce),
          e.on("touchmove", this.stageTouchMoveHandlerScoped);
      },
      _setupBackspaceEvents: function () {
        (this._keyDownEventHandler = this._keyDownEventHandler.bind(this)),
          document.addEventListener("keydown", this._keyDownEventHandler),
          (this._keyUpEventHandler = this._keyUpEventHandler.bind(this)),
          document.addEventListener("keyup", this._keyUpEventHandler);
      },
      _getActiveControl: function () {
        var e = this._interactionControls.filter(function (e) {
          return e.isActive;
        });
        return e.length ? e[0] : null;
      },
      _keyUpEventHandler: function (e) {
        if (8 === e.keyCode) {
          var t = this._getActiveControl();
          null !== t &&
            (e.preventDefault(),
            e.stopPropagation(),
            t.dispatch("backspace", {
              targetName: t.targetLayer.layerData.name,
            }),
            t.dispatch("refresh"));
        }
      },
      _keyDownEventHandler: function (e) {
        8 === e.which &&
          null !== this._getActiveControl() &&
          (e.preventDefault(), e.stopPropagation());
      },
      _touchStartHandler: function (e) {
        var t = e.touches,
          n = this.getActiveLayer();
        if (2 === t.length) {
          if (
            ((this.eventWasMultiTouch = !0),
            (this.touchEventsInteractions.allowPixiEvent = !0),
            (this.touchEventsInteractions.processLayer = !1),
            (this.tapTime = 0),
            this._interactionControls.forEach(function (e) {
              e.disableInteractions();
            }),
            !n)
          )
            return;
          (this.previousDistance = this._getDistance(t[0], t[1])),
            e.stopPropagation(),
            e.preventDefault();
        } else
          (this.tapTime = new Date().getTime()),
            (this.eventWasMultiTouch = !1),
            void 0 !== n &&
              ((this.initialTouchPosition = {
                x: t[0].clientX,
                y: t[0].clientY,
              }),
              (this.activeLayerPosition = {
                x: n.targetLayer.x,
                y: n.targetLayer.y,
              }),
              window.addEventListener("touchend", this.boundArtificialDragEnd));
      },
      _artificialDragEnd: function () {
        window.removeEventListener("touchend", this.boundArtificialDragEnd);
        var e = this.getActiveLayer();
        if (e && e.hasArtificialPositioning) {
          var t = e.positionControl.onDragEndDispatcher.bind(e.positionControl);
          t(!0),
            (this.hasArtificialDrag = !1),
            (e.hasArtificialPositioning = !1),
            this._deactivateGuides();
        }
      },
      _touchMoveHandler: function (e) {
        var t,
          n,
          i,
          r = e.touches,
          s = this.getActiveLayer();
        if (2 === r.length && void 0 !== s) {
          if (
            (e.stopPropagation(),
            e.preventDefault(),
            (this.tapTime = 0),
            (this.distance = this._getDistance(r[0], r[1])),
            (this.touchEventsInteractions.processLayer = !0),
            this.touchEventsInteractions.isLayerProcessing)
          )
            return;
          if (this.previousDistance > 0) {
            var o =
              (this.distance / this.previousDistance) * s.getCurrentScale();
            s.updateControlScale(o), (this.previousDistance = this.distance);
          } else this.previousDistance = this.distance;
        } else if (1 === r.length && void 0 !== s) {
          if (s.lockLayerTranslation || this.eventWasMultiTouch) return;
          (this.hasArtificialDrag = !0),
            (s.hasArtificialPositioning = !0),
            (t = {
              x: this.transformToCanvasCoord(
                this.initialTouchPosition.x - r[0].clientX
              ),
              y: this.transformToCanvasCoord(
                this.initialTouchPosition.y - r[0].clientY
              ),
            }),
            (n = { x: s.targetLayer.x, y: s.targetLayer.y }),
            (i = {
              x: this.activeLayerPosition.x - t.x,
              y: this.activeLayerPosition.y - t.y,
            });
          var a = s.targetLayer.getRotatedDiff();
          (i.x -= s.targetLayer.pivot.x + a.width),
            (i.y -= s.targetLayer.pivot.y + a.height),
            s.positionControl.repositionElement(s.targetLayer, i, n),
            e.stopPropagation(),
            e.preventDefault();
        }
      },
      transformToCanvasCoord: function (e) {
        return (
          (e * this._canvasRenderer.width) /
          this._canvas.getBoundingClientRect().width
        );
      },
      _touchEndHandler: function (e) {
        this.touchEventsInteractions.allowPixiEvent = !1;
        var t = new Date();
        if (
          t.getTime() - this.tapTime <= this.TAP_DELAY_TIME &&
          e.target === engine._stage &&
          !this.hasArtificialDrag
        )
          return this._deactivateInteractions(), void this._refresh();
        (this.touchEventsInteractions.isLayerProcessing = !0),
          (this.previousDistance = 0),
          this._interactionControls.forEach(function (e) {
            e.enableInteractions();
          });
        var n = this.getActiveLayer();
        n &&
          (this.touchEventsInteractions.processLayer === !0 &&
            n.repaintControlUI(),
          (n = this.getActiveLayer()),
          n && n.activate(),
          (this.touchEventsInteractions.isLayerProcessing = !1));
      },
      _stageTouchMoveHandler: function (e) {
        if (this.touchEventsInteractions.allowPixiEvent !== !1) {
          var t = this.getActiveLayer(),
            n = t && t.constructor.IS_IOS === !0,
            i = t && t.constructor.AVOID_EVENTS_PROPAGATION === !0;
          n !== !0 &&
            i !== !0 &&
            (e.stopPropagation(),
            e.data.originalEvent.stopPropagation(),
            e.data.originalEvent.cancelable === !0 &&
              e.data.originalEvent.preventDefault());
        }
      },
      _interactionStartEventHandler: function (e) {
        this._interactionControls.forEach(function (t) {
          t !== e.target && t.disable();
        }),
          this.dispatch(
            "smartTemplate:interactionStart",
            e.target.targetLayer.layerData
          );
      },
      _interactionEndEventHandler: function (e, t) {
        t && "PositionControl" === t.originalDispatcher
          ? this.dispatch("interactive:move")
          : t && "ResizeControl" === t.originalDispatcher
          ? this.dispatch("interactive:resize")
          : t &&
            "RotationControl" === t.originalDispatcher &&
            this.dispatch("interactive:rotate"),
          this._interactionControls.forEach(function (e) {
            e.enable();
          });
      },
      _doubleClickEventHandler: function (e) {
        var t = e.data || e;
        this.dispatch("interactive:doubleclick", t);
      },
      _backspaceEventHandler: function (e) {
        var t = e.data || e;
        this._deactivateInteractions(),
          this._refresh(),
          this.dispatch("interactive:backspace", t);
      },
      _rightClickEventHandler: function (e) {
        var t = e.data || e;
        this.dispatch("interactive:rightclick", t);
      },
      _deactivateInteractions: function () {
        (this._lastActiveLayer = null),
          this._interactionControls.forEach(function (e) {
            return e.lockLayerTranslation === !0
              ? void (this._lastActiveLayer = e.targetLayer.layerData.name)
              : void e.deactivate();
          }, this),
          this.dispatch("interactive:deactivate");
      },
      _selectEventHandler: function (e) {
        if (!this.hasArtificialDrag) {
          var t = e.target;
          this._deactivateInteractions(),
            (this._lastActiveLayer = t.targetLayer.layerData.name),
            t.activate(),
            this.dispatch("interactive:activate", {
              targetName: t.targetLayer.layerData.name,
            }),
            this._refresh();
        }
      },
      _changeEventHandler: function (e) {
        var t, n, i, r;
        (t = e.data || e),
          (n = t.layer),
          (i = t.originalBounds),
          (r = {
            name: n.layerData.name,
            type: n.layerData.type,
            dimensions: {
              width: n.width / this._canvasRenderer.width,
              height: n.height / this._canvasRenderer.height,
            },
            scale: { x: n.scale.x, y: n.scale.y },
            position: {
              x: n.position.x / this._canvasRenderer.width,
              y: n.position.y / this._canvasRenderer.height,
            },
            rotation: n.rotation,
            originalBounds: i,
          }),
          this._deactivateGuides(),
          this.dispatch("change", {
            layer: r,
            originalDispatcher: t.originalDispatcher,
          });
      },
      _updateControls: function () {
        this._interactionControls.forEach(function (e) {
          e.updateControl();
        });
      },
      _applyInteractions: function () {
        this._uiJSON.customRules.forEach(function (e) {
          var t, n, i, r, s;
          (t = this._getObjectByName(e.layerName)),
            (n = e.dimensions),
            (i = e.originalBounds),
            e.rotation && t.rotate(e.rotation),
            0 === t.width
              ? (s = { x: 1, y: 1 })
              : ((r = Math.min(
                  (n.width * this._canvasRenderer.width) / t.width,
                  (n.height * this._canvasRenderer.height) / t.height
                )),
                (s = { x: r, y: r })),
            t.rotation && ((t.pivot.x *= s.x), (t.pivot.y *= s.y)),
            t.resize(s.x, s.y),
            t.setGlobalPosition(
              e.position.x * this._canvasRenderer.width,
              e.position.y * this._canvasRenderer.height
            );
        }, this);
      },
      _destroyInteractions: function () {
        (this._stage._events.click = null),
          (this._stage._events.mouseout = null),
          this._interactionControls.forEach(function (e) {
            e.destroy();
          }),
          document.removeEventListener("keydown", this._keyDownEventHandler),
          document.removeEventListener("keyup", this._keyUpEventHandler),
          this.callOnArray(this.constructor.GUIDES_HORIZONTAL, "destroy"),
          this.callOnArray(this.constructor.GUIDES_VERTICAL, "destroy"),
          (this.guideHorizontalCenter = null),
          (this.guideVerticalCenter = null),
          (this.guideHorizontalTop = null),
          (this.guideVerticalTop = null),
          (this.guideHorizontalBottom = null),
          (this.guideVerticalBottom = null),
          (this._interactionControls = []);
      },
      _snapEventHandler: function (e) {
        var t = e.data || e,
          n = this;
        "x" === t.axis &&
          (this.callOnArray(this.constructor.GUIDES_HORIZONTAL, "deactivate"),
          t.snaps.forEach(function (e) {
            t.snaps[0].diff === e.diff &&
              n["guideHorizontal" + n.getSnapType(e.type)].updateGuide({
                axis: "x",
                coord: e.coord,
              });
          })),
          "y" === t.axis &&
            (this.callOnArray(this.constructor.GUIDES_VERTICAL, "deactivate"),
            t.snaps.forEach(function (e) {
              t.snaps[0].diff === e.diff &&
                n["guideVertical" + n.getSnapType(e.type)].updateGuide({
                  axis: "y",
                  coord: e.coord,
                });
            }));
      },
      callOnArray: function (e, t) {
        var n = this;
        e.forEach(function (e) {
          n[e] && n[e][t]();
        });
      },
      getProperGuide: function (e, t) {
        switch (e.type) {
          case 1:
            return e.coord - t / 2;
          case 2:
            return e.coord - t;
          default:
            return e.coord;
        }
      },
      _unsnapEventHandler: function (e) {
        var t = e.data || e;
        "x" === t.axis &&
          this.callOnArray(this.constructor.GUIDES_HORIZONTAL, "deactivate"),
          "y" === t.axis &&
            this.callOnArray(this.constructor.GUIDES_VERTICAL, "deactivate");
      },
      _deactivateGuides: function () {
        this.callOnArray(this.constructor.GUIDES_VERTICAL, "deactivate"),
          this.callOnArray(this.constructor.GUIDES_HORIZONTAL, "deactivate"),
          this._refresh();
      },
      getActiveLayer: function () {
        var e = this._interactionControls.filter(function (e) {
          return e.isActive === !0;
        });
        if (
          e.length > 1 &&
          this._hasHadMultiLayerSelection !== !0 &&
          void 0 !== window.newrelic
        ) {
          var t = new Error("N-gin:MultiLayerSelection");
          window.newrelic.noticeError(t),
            (this._hasHadMultiLayerSelection = !0);
        }
        return e[0];
      },
      disableInteractions: function () {
        this._interactionControls.forEach(function (e) {
          e.deactivate();
        }),
          this._deactivateGuides(),
          this._canvasRenderer.plugins.interaction &&
            this._canvasRenderer.plugins.interaction.renderer &&
            this._canvasRenderer.plugins.interaction.destroy(),
          this._refresh();
      },
      enableInteractions: function () {
        this._canvasRenderer.plugins.interaction.renderer ||
          ((this._canvasRenderer.plugins.interaction =
            new PIXI.interaction.InteractionManager(this._canvasRenderer)),
          (this._canvasRenderer.plugins.interaction.autoPreventDefault = !1),
          (this._canvasRenderer.view.style.touchAction = "auto"));
      },
      setResizeControlDimensions: function () {
        var e = this._canvasRenderer.width / this._canvas.clientWidth;
        (Interactive.ResizeControl.HANDLERS_SCALE = e),
          (Interactive.RotationControl.HANDLERS_SCALE = e),
          this._destroyInteractions(),
          this._setupInteractions(this._uiJSON);
      },
    },
  }),
  Class(Interactive, "PositionControl").includes(
    CustomEventSupport,
    NodeSupport
  )({
    PADDING: 9,
    SNAP_TOLERANCE: 10,
    SHADOW_PADDING: 4,
    LINE_WIDTH: 2,
    DOUBLE_CLICK_INTERVAL: 400,
    prototype: {
      rectangle: null,
      allowMove: null,
      initialBounds: null,
      name: null,
      isUIEnabled: null,
      canvasDimensions: null,
      currentDimensions: { width: null, height: null },
      snapSupport: null,
      init: function (e) {
        (this.name = e.name),
          (this.selectionFrameCanvas = document.createElement("canvas")),
          (this.allowMove = e.allowMove),
          (this.canvasDimensions = e.canvasDimensions),
          (this.isPositioning = e.isPositioning),
          (this.initialBounds = {
            x: e.bounds.x - this.constructor.PADDING,
            y: e.bounds.y - this.constructor.PADDING,
            width: e.bounds.width + 2 * this.constructor.PADDING,
            height: e.bounds.height + 2 * this.constructor.PADDING,
          }),
          (this.layer = new PIXI.Container()),
          (this.layer.interactive = !0),
          (this.layer.buttonMode = !0),
          (this.layer.hitArea = new PIXI.Rectangle(
            0,
            0,
            this.initialBounds.width,
            this.initialBounds.height
          )),
          (this.layer.position.x = this.initialBounds.x),
          (this.layer.position.y = this.initialBounds.y),
          (this.layer.width = this.initialBounds.width),
          (this.layer.height = this.initialBounds.height),
          (this.layer.cursor = "move"),
          (this.lastClickTimestamp = 0),
          (this.layer.layerData = {
            name: e.name + "_dotted",
            type: "PositionControl",
          }),
          (this.snapSupport = e.snapSupport),
          this.createArea(this.initialBounds),
          (this.isUIEnabled = !0),
          this.bindMouseBehavior(),
          this.allowMove && this.bindMovement(),
          this.deactivate();
      },
      createArea: function (e) {
        var t = this,
          n = this.constructor.SHADOW_PADDING,
          i = t.selectionFrameCanvas;
        (i.width = e.width + 2 * n), (i.height = e.height + 2 * n);
        var r = i.getContext("2d");
        (r.lineWidth = t.constructor.LINE_WIDTH),
          (r.strokeStyle = "#ffffff"),
          r.rect(n, n, e.width, e.height),
          (r.shadowColor = "rgba(0, 0, 0, 0.2)"),
          (r.shadowBlur = 2),
          (r.shadowOffsetX = 2),
          (r.shadowOffsetY = 2),
          r.stroke(),
          (t.rectangle = PIXI.Sprite.from(i)),
          (t.rectangle.x -= n),
          (t.rectangle.y -= n),
          (t.rectangle.layerData = { name: t.name, type: "PositionLine" }),
          t.layer.addChild(t.rectangle);
      },
      _destroyArea: function () {
        this.layer.removeChild(this.rectangle),
          this.rectangle.destroy(!0),
          (this.rectangle = null);
      },
      destroy: function () {
        var e = this;
        (e.layer._events.pointerdown = null),
          (e.layer._events.mousedown = null),
          (e.layer._events.tap = null),
          (e.layer._events.pointerup = null),
          (e.layer._events.pointerupoutside = null),
          (e.layer._events.pointermove = null),
          (e.layer._events.rightclick = null),
          e._destroyArea(),
          (e.allowMove = null),
          (e.initialBounds = null),
          (e.name = null),
          (e.isUIEnabled = null),
          e.layer.destroy(!0),
          (e.layer = null),
          (e.selectionFrameCanvas = null);
      },
      _onMouseover: function () {
        var e = this;
        e.active ||
          e.isUIEnabled === !1 ||
          ((e.layer.visible = !0), (e.layer.alpha = 0.5), e.dispatch("hover"));
      },
      _onMouseout: function () {
        var e = this;
        e.active ||
          e.isUIEnabled === !1 ||
          (e.deactivate(), e.dispatch("unhover"));
      },
      _onClick: function () {
        var e = this;
        e.dispatch("select");
      },
      _onTap: function (e) {
        if (!(e.data.originalEvent.touches.length > 0)) {
          var t = this;
          t.dispatch("select");
        }
      },
      _checkForDoubleClick: function () {
        var e = this,
          t = Date.now(),
          n = t - e.lastClickTimestamp;
        (e.lastClickTimestamp = t),
          n <= e.constructor.DOUBLE_CLICK_INTERVAL &&
            ((e.lastClickTimestamp = 0), e.dispatch("doubleclick"));
      },
      _onRightClick: function (e) {
        var t = this;
        t.dispatch("rightclick", e.data);
      },
      bindMouseBehavior: function () {
        var e = this;
        e.layer.on("mouseover", e._onMouseover.bind(this)),
          e.layer.on("mouseout", e._onMouseout.bind(this)),
          e.layer.on("mousedown", e._onClick.bind(this)),
          e.layer.on("tap", e._onTap.bind(this)),
          e.layer.on("pointerdown", e._checkForDoubleClick.bind(this)),
          e.layer.on("rightclick", e._onRightClick.bind(this));
      },
      enable: function () {
        this.isUIEnabled = !0;
      },
      disable: function () {
        this.isUIEnabled = !1;
      },
      hide: function () {
        this.layer.visible = !1;
      },
      show: function () {
        this.layer.visible = !0;
      },
      onDragStartMobile: function (e) {
        this.active && this.onDragStart(e);
      },
      onDragStart: function (e) {
        this.isPositioning(!0);
        var t = e.target;
        t.on("pointerup", this.onDragEnd.bind(this)),
          t.on("pointerupoutside", this.onDragEnd.bind(this)),
          t.on("pointermove", this.onDragMove.bind(this)),
          (t.dragEnded = !1),
          e.data.originalEvent.preventDefault(),
          this.setInitialDragPosition(t, e.data),
          this.dispatch("interactionStart");
      },
      setInitialDragPosition: function (e, t) {
        e.dragEnded ||
          ((e.data = t),
          (e.alpha = 0.5),
          (e.dragging = !0),
          (e.localPosition = t.getLocalPosition(e)),
          (e.oldPosition = e.getGlobalPosition()),
          (e.localPosition.x *= e.scale.x),
          (e.localPosition.y *= e.scale.y),
          (e.localPosition.y -= this.constructor.PADDING),
          (e.localPosition.x -= this.constructor.PADDING));
      },
      onDragEnd: function (e) {
        var t = e.currentTarget,
          n = t.dragging;
        this.isPositioning(!1),
          (t._events.pointerup = null),
          (t._events.pointerupoutside = null),
          (t._events.pointermove = null),
          e.stopPropagation(),
          (t.alpha = 1),
          (t.dragging = !1),
          (t.data = null),
          (t.dragEnded = !0),
          this.onDragEndDispatcher(n);
      },
      onDragEndDispatcher: function (e) {
        e
          ? (this.dispatch("interactionEnd", {
              originalDispatcher: this.constructor.className,
            }),
            this.dispatch("change", {
              originalDispatcher: this.constructor.className,
            }))
          : this.dispatch("interactionEnd");
      },
      onDragMove: function (e) {
        var t, n;
        (n = e.currentTarget),
          e.data.originalEvent.preventDefault(),
          n.dragging &&
            ((t = e.data.getLocalPosition(n.parent)),
            (t.x = t.x - n.localPosition.x),
            (t.y = t.y - n.localPosition.y),
            this.repositionElement(n, t, n.oldPosition));
      },
      repositionElement: function (e, t, n) {
        var i = this.getFrameDimensions(),
          r = this.snapSupport(i, t, this.constructor.PADDING);
        r.x.length
          ? ((t.x = this.positionBySnapType(r.x[0], i.width)),
            this.dispatch("snap", { axis: "x", snaps: r.x, pos: t.x }))
          : this.dispatch("unsnap", { axis: "x" }),
          r.y.length
            ? ((t.y = this.positionBySnapType(r.y[0], i.height)),
              this.dispatch("snap", { axis: "y", snaps: r.y, pos: t.y }))
            : this.dispatch("unsnap", { axis: "y" }),
          (position = e.getGlobalPosition()),
          this.dispatch("move", { oldPosition: n, newPosition: t }),
          (e.oldPosition = position);
      },
      positionBySnapType: function (e, t) {
        switch (e.type) {
          case 1:
            return e.coord - t / 2;
          case 2:
            return e.coord - t;
          default:
            return e.coord;
        }
      },
      bindMovement: function () {
        var e = this,
          t = this.layer;
        t.on("mousedown", e.onDragStart.bind(this)),
          t.on("touchstart", e.onDragStartMobile.bind(this));
      },
      unbindMovement: function () {
        var e = this;
        e.layer.off("mousedown", e.onDragStart),
          e.layer.off("touchstart", e.onDragStartMobile),
          e.layer.off("pointerup", e.onDragEnd),
          e.layer.off("pointerupoutside", e.onDragEnd),
          e.layer.off("pointermove", e.onDragMove);
      },
      render: function (e) {
        e.addChild(this.layer);
      },
      updatePosition: function (e) {
        (this.layer.x = e.x - this.constructor.PADDING),
          (this.layer.y = e.y - this.constructor.PADDING);
      },
      updateDimensions: function (e) {
        var t = {
          width: e.width + 2 * this.constructor.PADDING,
          height: e.height + 2 * this.constructor.PADDING,
        };
        (t.width !== this.currentDimensions.width ||
          t.height !== this.currentDimensions.height) &&
          ((this.currentDimensions = t),
          (this.layer.hitArea = new PIXI.Rectangle(0, 0, t.width, t.height)),
          this._destroyArea(),
          this.createArea(t),
          this.dispatch("refresh"));
      },
      move: function (e) {
        (this.layer.x += e.x), (this.layer.y += e.y);
      },
      activate: function () {
        (this.active = !0), (this.layer.alpha = 1), this.dispatch("activate");
      },
      deactivate: function () {
        this.layer.dragging ||
          ((this.active = !1),
          (this.layer.alpha = 0),
          this.allowMove && this.unbindMovement(),
          this.dispatch("deactivate"));
      },
      getFrameDimensions: function () {
        var e = 2 * this.constructor.SHADOW_PADDING;
        return { width: this.layer.width - e, height: this.layer.height - e };
      },
      isDragging: function () {
        return this.layer.dragging;
      },
      removeAllListeners: function () {
        this.layer.removeAllListeners();
      },
    },
  }),
  Class(Interactive, "ResizeControl").includes(
    CustomEventSupport,
    NodeSupport
  )({
    PADDING: 12,
    SHADOW_PADDING: 6,
    DIMENSIONS: 12,
    HANDLERS_SCALE: 1,
    ENABLE_HITAREA: !1,
    prototype: {
      name: null,
      corner: null,
      layer: null,
      previousPosition: null,
      init: function (e) {
        (this.handlersDiameter =
          this.constructor.DIMENSIONS * this.constructor.HANDLERS_SCALE),
          (this.corner = e.corner),
          (this.name = e.name),
          (this.handlersCanvas = e.handlersCanvas),
          (this.layer = this._createCircle(this.corner)),
          this.updatePosition(e.bounds, e.scale),
          (this.isResizing = e.isResizing),
          (this.previousPosition = { x: this.layer.x, y: this.layer.y }),
          (this.layer.visible = !1),
          this.bindEvents();
      },
      bindEvents: function () {
        var e = this;
        this.layer.on("pointerdown", e._onDragStart.bind(this));
      },
      _onDragStart: function (e) {
        var t,
          n = this,
          i = n.layer;
        n.isResizing(!0),
          e.data.originalEvent.preventDefault(),
          (i.originalBounds = JSON.parse(JSON.stringify(n.bounds))),
          (i.originalScale = { x: n.scale.x, y: n.scale.y }),
          e.stopPropagation(),
          i.on("pointerup", n._onDragEnd.bind(n)),
          i.on("pointerupoutside", n._onDragEnd.bind(n)),
          i.on("pointermove", n._onDragMove.bind(n)),
          (i.data = e.data);
        var t = i.data.getLocalPosition(i.parent);
        (i.originalPosition = { x: t.x, y: t.y }),
          (i.dragging = !0),
          n.dispatch("interactionStart");
      },
      _onDragEnd: function (e) {
        var t = this,
          n = t.layer;
        t.isResizing(!1),
          (n._events.pointerup = null),
          (n._events.pointerupoutside = null),
          (n._events.pointermove = null),
          (n.dragging = !1),
          e.stopPropagation(),
          (n.data = null),
          t.dispatch("interactionEnd", {
            originalDispatcher: t.constructor.className,
          }),
          t.dispatch("change", { originalDispatcher: t.constructor.className });
      },
      _onDragMove: function (e) {
        var t,
          n = e.data.global,
          i = this,
          r = i.layer;
        if ((e.data.originalEvent.preventDefault(), r.dragging)) {
          t = r.data.getLocalPosition(r.parent);
          var s = { x: n.x, y: n.y };
          i.dispatch("resize", {
            newPosition: s,
            originalBounds: r.originalBounds,
            originalPosition: r.originalPosition,
            originalScale: r.originalScale,
          });
        }
      },
      updatePosition: function (e, t) {
        (this.bounds = e), (this.scale = t);
        var n = (shiftTop =
            this.constructor.PADDING +
            (2 * this.handlersDiameter) / 3 +
            this.constructor.SHADOW_PADDING),
          i = (shiftBottom =
            this.constructor.PADDING -
            this.handlersDiameter / 3 -
            this.constructor.SHADOW_PADDING);
        switch (
          ((e.x = Math.floor(e.x)), (e.y = Math.floor(e.y)), this.corner)
        ) {
          case "top-right":
            (this.layer.x = e.x + e.width + i), (this.layer.y = e.y - shiftTop);
            break;
          case "bottom-right":
            (this.layer.x = e.x + e.width + i),
              (this.layer.y = e.y + e.height + shiftBottom);
            break;
          case "bottom-left":
            (this.layer.x = e.x - n),
              (this.layer.y = e.y + e.height + shiftBottom);
            break;
          case "top-left":
            (this.layer.x = e.x - n), (this.layer.y = e.y - shiftTop);
        }
      },
      _createCircle: function (e) {
        var t = this.handlersDiameter / 2 + this.constructor.SHADOW_PADDING,
          n = this.handlersCanvas;
        n.width = n.height = 2 * t;
        var i = n.getContext("2d");
        i.arc(t, t, this.handlersDiameter / 2, 0, 2 * Math.PI),
          (i.shadowColor = "rgba(0, 0, 0, 0.4)"),
          (i.shadowBlur = 3),
          (i.fillStyle = "#2780d1"),
          i.fill(),
          (i.lineWidth = this.handlersDiameter / 4),
          (i.strokeStyle = "#FFFFFF"),
          i.stroke();
        var r = PIXI.Sprite.from(n);
        switch (
          ((r.interactive = !0),
          (r.buttonMode = !0),
          (r.layerData = { name: this.name, type: "Control" }),
          this.constructor.ENABLE_HITAREA === !0 &&
            (r.hitArea = new PIXI.Rectangle(-40, -40, 80, 80)),
          e)
        ) {
          case "top-right":
          case "bottom-left":
            r.cursor = "nesw-resize";
            break;
          case "top-left":
          case "bottom-right":
            r.cursor = "nwse-resize";
        }
        return r;
      },
      activate: function () {
        this.layer.visible = !0;
      },
      deactivate: function () {
        this.layer.dragging ||
          ((this.layer._events.pointerup = null),
          (this.layer._events.pointerupoutside = null),
          (this.layer._events.pointermove = null),
          (this.layer.visible = !1));
      },
      render: function (e) {
        e.addChild(this.layer);
      },
      destroy: function () {
        var e = this,
          t = e.layer;
        (t._events.pointerdown = null),
          (t._events.pointerup = null),
          (t._events.pointerupoutside = null),
          (t._events.pointermove = null),
          (e.name = null),
          (e.corner = null),
          (e.previousPosition = null),
          this.layer.destroy(!0),
          (e.layer = null);
      },
      removeAllListeners: function () {
        this.layer.removeAllListeners();
      },
    },
  });
var ROTATION_IMAGE = {};
(ROTATION_IMAGE.ROTATION_ICON =
  '<svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="none" viewBox="0 0 30 30"><g filter="url(#prefix__filter0_d)"><circle cx="15" cy="15" r="12" fill="#fff"/></g><path fill="#2780D1" d="M18.258 19.426l1.502 1.168c-.991.982-2.192 1.665-3.484 1.986l-.233-1.907c.806-.232 1.568-.66 2.215-1.247zm-4.102 1.477l.232 1.907c-1.332-.001-2.66-.366-3.858-1.082l1.178-1.494c.768.404 1.6.638 2.448.669zm-5.138-.341c-.983-.992-1.648-2.204-1.968-3.497l1.916-.233c.242.804.66 1.558 1.255 2.203l-1.203 1.526zm12.772-7.208L24.688 13l-3.772 4.818-4.723-3.783 3.69-.45c-.78-2.626-3.35-4.381-6.153-4.04-2.804.342-4.877 2.664-5.004 5.4l-1.906.232c.008-3.785 2.829-7.05 6.68-7.52 3.85-.469 7.373 2.024 8.29 5.696z"/><path fill="#fff" fill-opacity=".01" d="M2 2H28V28H2z"/><defs><filter id="prefix__filter0_d" width="30" height="30" x="0" y="0" color-interpolation-filters="sRGB" filterUnits="userSpaceOnUse"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"/><feOffset/><feGaussianBlur stdDeviation="1.5"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow"/><feBlend in="SourceGraphic" in2="effect1_dropShadow" result="shape"/></filter></defs></svg>'),
  (ROTATION_IMAGE.svg64 = btoa(ROTATION_IMAGE.ROTATION_ICON)),
  (ROTATION_IMAGE.b64Start = "data:image/svg+xml;base64,"),
  (ROTATION_IMAGE.image64 = ROTATION_IMAGE.b64Start + ROTATION_IMAGE.svg64),
  (ROTATION_IMAGE.image = new Image()),
  (ROTATION_IMAGE.image.src = ROTATION_IMAGE.image64),
  Class(Interactive, "RotationControl").includes(
    CustomEventSupport,
    NodeSupport
  )({
    CANVAS_BORDER_DISTANCE: 50,
    HANDLERS_SCALE: 1,
    ENABLE_HITAREA: !1,
    POSITION_INITIAL_ANGLES: { LEFT: 180, TOP: 270, RIGHT: 0, BOTTOM: 90 },
    prototype: {
      initialEdge: "BOTTOM",
      canvasDimensions: null,
      initialBounds: null,
      name: null,
      handlersCanvas: null,
      controlSize: 26,
      controlPadding: 18,
      init: function (e) {
        (this.canvasDimensions = e.canvasDimensions),
          (this.name = e.name),
          (this.isRotating = e.isRotating),
          (this.initialBounds = e.bounds),
          (this.rotationCanvas = document.createElement("canvas")),
          this._createControlLayer(this.initialBounds),
          this.updatePosition(this.initialBounds),
          this.deactivate(),
          this.bindEvents();
      },
      render: function (e) {
        e.addChild(this.layer);
      },
      bindEvents: function () {
        var e = this;
        this.layer.on("pointerdown", e._onDragStart.bind(e));
      },
      _onDragStart: function (e) {
        var t = this;
        (t.layer.height = 0),
          (t.layer.width = 0),
          t.isRotating(!0),
          e.data.originalEvent.preventDefault(),
          e.stopPropagation(),
          t.layer.on("pointermove", function (e) {
            e.data.originalEvent.preventDefault(),
              e.stopPropagation(),
              t.dispatch("rotate", e.data.global);
          }),
          t.layer.on("pointerup", t._onDragEnd.bind(t)),
          t.layer.on("pointerupoutside", t._onDragEnd.bind(t)),
          t.dispatch("rotationStart"),
          t.dispatch("interactionStart");
      },
      _onDragEnd: function () {
        this.isRotating(!1),
          this.layer.off("pointermove"),
          this.layer.off("pointerup"),
          this.layer.off("pointerupoutside"),
          this.dispatch("interactionEnd", {
            originalDispatcher: this.constructor.className,
          }),
          this.dispatch("change", {
            originalDispatcher: this.constructor.className,
          });
      },
      updatePosition: function (e) {
        var t, n, i, r, s, o, a;
        (t = this.controlSize * this.constructor.HANDLERS_SCALE),
          (n = this.constructor.CANVAS_BORDER_DISTANCE + t),
          (i = e.y <= n),
          (r = this.canvasDimensions.height - e.y - e.height <= n),
          (s = e.x + e.width / 2 > this.canvasDimensions.width / 2),
          (o = e.x + e.width / 2 < this.canvasDimensions.width / 2),
          (a = e.x + e.width / 2 === this.canvasDimensions.width / 2);
        var l = e.x + e.width / 2 - t / 2,
          c = e.y + e.height + this.controlPadding;
        (this.initialEdge = "BOTTOM"),
          r && i && s
            ? ((l = e.x - t - this.controlPadding),
              (c = e.y + e.height / 2),
              (this.initialEdge = "RIGHT"))
            : r && i && (o || a)
            ? ((l = e.x + e.width + this.controlPadding),
              (c = e.y + e.height / 2),
              (this.initialEdge = "LEFT"))
            : r &&
              ((l = e.x + e.width / 2 - t / 2),
              (c = e.y - t - this.controlPadding),
              (this.initialEdge = "TOP")),
          (this.layer.x = l),
          (this.layer.y = c);
      },
      getInitialEdgeAngle: function () {
        return (
          (this.constructor.POSITION_INITIAL_ANGLES[this.initialEdge] *
            Math.PI) /
          180
        );
      },
      _createControlLayer: function () {
        var e = this.rotationCanvas,
          t = e.getContext("2d"),
          n = this.controlSize * this.constructor.HANDLERS_SCALE,
          i = 44 * this.constructor.HANDLERS_SCALE;
        t.drawImage(ROTATION_IMAGE.image, 0, 0, n, n);
        var r = PIXI.Sprite.from(e);
        (r.interactive = !0),
          (r.buttonMode = !0),
          (r.hitArea = new PIXI.Rectangle(-10, -10, i, i)),
          (r.layerData = { name: this.name, type: "RotationControl" }),
          (this.layer = r);
      },
      activate: function () {
        this.layer.visible = !0;
      },
      deactivate: function () {
        this.layer.visible = !1;
      },
      destroy: function () {
        this.layer = null;
      },
      removeAllListeners: function () {
        this.layer.removeAllListeners();
      },
    },
  }),
  Module(
    Interactive,
    "SnapSupport"
  )({
    prototype: {
      snapTolerance: 6,
      stagePadding: null,
      validateSnap: function (e, t, n) {
        this.stagePadding = n;
        var i = this._getStageSnapPoints(this._interactionControls),
          r = this.calculateSnapPoints(e.width, e.height, t.x, t.y),
          s = this.inTolerance(r.x, i.x),
          o = this.inTolerance(r.y, i.y);
        return {
          x: this.uniqueSnapsArray(this._sortClosestSnap(s)),
          y: this.uniqueSnapsArray(this._sortClosestSnap(o)),
        };
      },
      _drawSnapPoints: function (e) {
        var t = new PIXI.Graphics(),
          n = this._canvas.width,
          i = this._canvas.height,
          r = this.stagePadding;
        e || (e = this._getStageSnapPoints(this._interactionControls)),
          r || (r = 9),
          t.lineStyle(2, 15158332),
          e.x.forEach(function (e) {
            t.moveTo(e - r, 0), t.lineTo(e - r, i);
          }),
          t.lineStyle(2, 3447003),
          e.y.forEach(function (e) {
            t.moveTo(0, e - r), t.lineTo(n, e - r);
          }),
          (t.layerData = { name: "snapPoints" }),
          this._stage.addChild(t),
          this._refresh();
      },
      calculateSnapPoints: function (e, t, n, i) {
        return { x: [n, n + e / 2, n + e], y: [i, i + t / 2, i + t] };
      },
      _getStageSnapPoints: function (e) {
        var t,
          n = this,
          i = [engine._canvasRenderer.width / 2 + this.stagePadding],
          r = [engine._canvasRenderer.height / 2 + this.stagePadding];
        return (
          e.forEach(function (e) {
            if (
              e.targetLayer.visible &&
              !e.isDragging() &&
              !e.hasArtificialPositioning
            ) {
              var s = e.getFrameDimensions(),
                o = e.targetLayer.getPosition();
              (t = n.calculateSnapPoints(s.width, s.height, o.x, o.y)),
                (i = i.concat(t.x)),
                (r = r.concat(t.y));
            }
          }),
          { x: i, y: r }
        );
      },
      inTolerance: function (e, t) {
        for (var n = this, i = [], r = 0; r < e.length; r++)
          for (var s = 0; s < t.length; s++)
            e[r] > t[s] - n.snapTolerance &&
              e[r] < t[s] + n.snapTolerance &&
              i.push({ coord: t[s], type: r, diff: Math.abs(e[r] - t[s]) });
        return i;
      },
      _sortClosestSnap: function (e) {
        return (e = e.sort(function (e, t) {
          e.diff > t.diff ? 1 : -1;
        }));
      },
      getSnapType: function (e) {
        switch (e) {
          case 1:
            return "Center";
          case 2:
            return "Bottom";
          default:
            return "Top";
        }
      },
      uniqueSnapsArray: function (e) {
        var t = [];
        return (
          e.forEach(function (n, i) {
            (i > 0 && n.coord === e[i - 1].coord && n.type === e[i - 1].type) ||
              t.push(n);
          }),
          t
        );
      },
    },
  }),
  (Ngin = {}),
  Module(
    Ngin,
    "AdjustmentLayers"
  )({
    prototype: {
      _applyAffectedTag: function (e, t) {
        for (
          var n = e.length - 1;
          n >= 0 &&
          ((e[n].layerData.affectedBy = t.layerData.name),
          !this._isAdjustment(e[n].layerData));
          n--
        )
          "Folder" == e[n].layerData.type &&
            this._applyAffectedTag(e[n].children, t);
      },
      _applyCurves: function (e, t) {
        if (null !== t.layerData.curves) {
          for (
            var n = this,
              i = new PIXI.CanvasRenderer(
                this._structureJSON.width,
                this._structureJSON.height,
                this._renderSettings
              ),
              r = new PIXI.Container(),
              s = 0;
            s < e.length;
            s++
          ) {
            var o = PIXI.RenderTexture.create(
              n._structureJSON.width,
              n._structureJSON.height
            );
            i.render(e[s], o);
            var a = new PIXI.Sprite(o);
            (a.blendMode = e[s].blendMode || 0),
              (a.cachedTint = e[s].cachedTint || null),
              r.addChild(a);
          }
          i.render(r);
          var l = n.glfxCanvas.texture(i.view);
          n.glfxCanvas.draw(l);
          for (var c = [], s = 0; s < t.layerData.curves[0].length; s++) {
            var u = [];
            u.push(t.layerData.curves[0][s].input / 255),
              u.push(t.layerData.curves[0][s].output / 255),
              c.push(u);
          }
          n.glfxCanvas.curves(c), n.glfxCanvas.update();
          var h = n._3DTo2DCanvas(n.glfxCanvas);
          l.destroy(),
            t.texture.destroy(),
            (t.texture = PIXI.Texture.fromCanvas(h)),
            (h = null),
            i.destroy();
        }
      },
      _applyHueSaturation: function (e, t) {
        if (null != t.layerData.hueSaturation) {
          for (
            var n = this,
              i = new PIXI.CanvasRenderer(
                this._structureJSON.width,
                this._structureJSON.height,
                this._renderSettings
              ),
              r = new PIXI.Container(),
              s = 0;
            s < e.length;
            s++
          ) {
            var o = PIXI.RenderTexture.create(
              n._structureJSON.width,
              n._structureJSON.height
            );
            i.render(e[s], o);
            var a = new PIXI.Sprite(o);
            (a.blendMode = e[s].blendMode || 0),
              (a.cachedTint = e[s].cachedTint || null),
              r.addChild(a);
          }
          i.render(r);
          var l = n.glfxCanvas.texture(i.view);
          n.glfxCanvas.draw(l);
          var c = t.layerData.hueSaturation.hue,
            u = t.layerData.hueSaturation.saturation;
          n.glfxCanvas.hueSaturation(c, u), n.glfxCanvas.update();
          var h = n._3DTo2DCanvas(n.glfxCanvas);
          l.destroy(),
            t.texture.destroy(),
            (t.texture = PIXI.Texture.fromCanvas(h)),
            (h = null),
            i.destroy();
        }
      },
      _affectedByAdjustment: function (e) {
        for (
          var t = [].concat(e.parent.children), n = [], i = 0;
          i < t.length;
          i++
        ) {
          var r = t[i];
          if (r.layerData.name == e.layerData.name) break;
          n.push(r);
        }
        return n;
      },
      _hideAffectedLayers: function (e) {
        var t = this;
        t._treeWalker(e, "children", function (e) {
          "undefined" != typeof e.layerData.affectedBy &&
            ((t._touchedByAdjustments[e.layerData.name] = e.visible),
            (e.visible = !1));
        });
      },
      _restoreOriginalVisibility: function (e) {
        var t = this;
        e.children.forEach(function (e) {
          "undefined" != typeof t._touchedByAdjustments[e.layerData.name] &&
            (e.visible = t._touchedByAdjustments[e.layerData.name]),
            e.layerData.type.match(/^(Folder|Document)$/) &&
              t._restoreOriginalVisibility(e);
        });
      },
      _isAdjustment: function (e) {
        return "Curves" == e.type || "HueSaturation" == e.type;
      },
      _tagAdjustedLayers: function () {
        for (var e = engine._adjustmentLayers, t = 0; t < e.length; t++) {
          var n = engine._getObjectByName(e[t]),
            i = engine._affectedByAdjustment(n);
          engine._applyAffectedTag(i, n);
        }
      },
      _applyAdjustmentLayers: function (e) {
        var t, n, i, r;
        (t = this), (n = Promise.resolve());
        for (
          var s = function (e, n) {
              switch (n.layerData.type) {
                case "Curves":
                  t._applyCurves(e, n);
                  break;
                case "HueSaturation":
                  t._applyHueSaturation(e, n);
                  break;
                default:
                  console.warn(
                    "Layer type " +
                      n.layerData.type +
                      " is not a supported Adjustment Layer"
                  );
              }
            },
            o = 0;
          o < e.length;
          o++
        )
          (i = t._getObjectByName(e[o])),
            (r = t._affectedByAdjustment(i)),
            s(r, i);
      },
      _getAffectingAdjustmentLayers: function (e) {
        var t, n, i;
        t = e.length;
        for (var r = 0; t > r; r++)
          (n = engine._getObjectByName(e[r])),
            void 0 !== n.layerData.affectedBy &&
              (e.push(n.layerData.affectedBy), t++);
        return (
          (i = [].concat(engine._adjustmentLayers)),
          (i = i.filter(function (t) {
            return e.indexOf(t) >= 0;
          }))
        );
      },
    },
  }),
  Module(
    Ngin,
    "AssetRuleSupport"
  )({
    prototype: {
      _fetchFromDictionary: function (e, t) {
        return t[e] ? Promise.resolve(t[e]) : Promise.reject();
      },
      _fetchFromLocalDictionary: function (e) {
        var t = this,
          n = t._assetRules || {};
        return this._fetchFromDictionary(e, n);
      },
      _fetchFromGlobalDictionary: function (e) {
        var t = this,
          n = t._globalAssetRules || {};
        return this._fetchFromDictionary(e, n);
      },
      _createAssetRuleInstance: function (e, t, n) {
        var i = 0 === n.name.indexOf("added-graphic"),
          r =
            "var parentName = this.parentName;var assetUiJson = engine._getObjectByName(parentName);var getAssetColor = function (layerName) {return styleAction._getAssetColor(assetUiJson, layerName)};" +
            (i ? "var getGraphicsRef = getUserGraphicsRef;" : ""),
          s = r + t,
          o = Class("Asset" + e + "RuleClass")({
            run: new Function(s),
            parentName: n.name,
            setParentName: function (e) {
              this.parentName = e;
            },
          });
        return o;
      },
      _cacheRule: function (e, t, n) {
        var i = this;
        if (i._assetRules[e])
          return void (i._globalAssetRules[e] = i._assetRules[e]);
        if (i._globalAssetRules[e])
          return void (i._assetRules[e] = i._globalAssetRules[e]);
        var r = { instance: i._createAssetRuleInstance(e, t, n), rule: t };
        (i._assetRules[e] = r), (i._globalAssetRules[e] = r);
      },
      _request: function (e) {
        var t;
        return new Promise(function (n, i) {
          (t = new XMLHttpRequest()),
            t.addEventListener("readystatechange", function () {
              4 === t.readyState && (200 === t.status ? n(t.response) : i());
            }),
            t.open("GET", e),
            t.send(null);
        });
      },
      _fetchFromRemote: function (e) {
        var t,
          n,
          i,
          r = this;
        return new Promise(function (s, o) {
          (n = function () {
            console.warn("Couldn't fetch asset rule"), o();
          }),
            (i = function (e) {
              s(e);
            }),
            (t = r._getGraphicAssetUrl("script.js", e)),
            r
              ._request(t)
              .then(function (e) {
                var t = e.match(Engine.scriptRedirectRegex);
                if (t) {
                  var s = r._cdnBasePath() + t[1];
                  r._request(s)
                    .then(function (e) {
                      i(e);
                    })
                    ["catch"](n);
                } else i(e);
              })
              ["catch"](n);
        });
      },
      fetchAssetRule: function (e, t) {
        var n = this,
          i = [
            "_fetchFromLocalDictionary",
            "_fetchFromGlobalDictionary",
            "_fetchFromRemote",
          ];
        return new Promise(function (r) {
          var s = function () {
            var o = i.shift();
            return o
              ? void n[o]
                  .call(n, e.id, t)
                  .then(function (i) {
                    return n._cacheRule(e.id, i, t), r(i);
                  })
                  ["catch"](function () {
                    s();
                  })
              : r("");
          };
          s();
        });
      },
      _runAssetRules: function () {
        var e = this;
        e._uiJSON.graphic.forEach(function (t) {
          var n = t.layers.filter(function (e) {
            return e.visible;
          })[0];
          if (n) {
            var i = e._assetRules[n.id];
            i &&
              i.instance &&
              (Li.Engine.error.unshift(function (e) {
                e.error.message = "Asset Rule Error: " + e.error.message;
              }),
              i.instance.setParentName(t.name),
              i.instance.run(),
              Li.Engine.error.shift());
          }
        });
      },
    },
  }),
  Module(
    Ngin,
    "Document"
  )({
    prototype: {
      _findReplaceLayer: function (e) {
        var t, n, i;
        return (
          (t = this),
          (n = !1),
          t._treeWalker(e, "children", function (e) {
            n ||
              "document" === e.layerData.type ||
              (e.layerData.smartObject && ((n = !0), (i = e)));
          }),
          i
        );
      },
      _treeWalker: function (e, t, n) {
        var i;
        if (e.hasOwnProperty(t) === !0) {
          for (i = 0; i < e[t].length; i++) n(e[t][i]);
          for (i = 0; i < e[t].length; i++) this._treeWalker(e[t][i], t, n);
        }
      },
      _dualTreeWalker: function (e, t, n, i) {
        var r;
        if (e.hasOwnProperty(n) === !0) {
          for (r = 0; r < e[n].length; r++) i(e[n][r], t);
          for (r = 0; r < e[n].length; r++)
            this._dualTreeWalker(e[n][r], t[n][r], n, i);
        }
      },
      _treeCloner: function (e) {
        var t;
        return (
          (t = new PIXI.Container()),
          (t.layerData = { name: "Root Node", type: "RootNode" }),
          (engine._affectedCurves2 = []),
          engine._dualTreeWalker(e, t, "children", function (e, t) {
            var n;
            e instanceof PIXI.Graphics || "Graphics" == e.className
              ? ((n = new PIXI.Graphics()),
                (n.blendMode = e.blendMode),
                (n.graphicsData = e.graphicsData),
                (e.className = "Graphics"))
              : e instanceof PIXI.Sprite || "Sprite" == e.className
              ? ((n = new PIXI.Sprite()),
                (n.blendMode = e.blendMode),
                (n.transformations = e.transformations),
                ("Curves" == e.layerData.type ||
                  "HueSaturation" == e.layerData.type) &&
                  engine._affectedCurves2.push(e.layerData.name),
                (n.texture =
                  e.texture === PIXI.Texture.EMPTY
                    ? PIXI.Texture.EMPTY
                    : e.texture.clone()),
                (e.className = "Sprite"))
              : (e instanceof PIXI.Container || "Container" == e.className) &&
                ((n = new PIXI.Container()),
                (e.layerData.mask || e._mask) && (n._mask = e._mask),
                (e.className = "Container")),
              (n.alpha = e.alpha),
              (n.visible = e.visible),
              (n.tint = e.tint),
              n.position.set(e.position.x, e.position.y),
              n.scale.set(e.scale.x, e.scale.y),
              (n.layerData = JSON.parse(JSON.stringify(e.layerData))),
              t.addChild(n);
          }),
          t
        );
      },
      _getLayerPath: function (e) {
        var t, n;
        for (t = e.parent, n = [e.layerData.name]; t && t.layerData; )
          n.push(t.layerData.name), (t = t.parent);
        return n.join(".");
      },
      _getLayerFromUiJson: function (e, t) {
        var n;
        return (
          (this._uiJSON[t] || []).forEach(function (t) {
            t.name === e && (n = t);
          }),
          n
        );
      },
      _containsSmartObject: function (e) {
        var t, n;
        return (t = this), (n = t._findReplaceLayer(e)), n ? !0 : !1;
      },
      _dfsTreeWalker: function (e, t, n, i) {
        var r;
        if ((i || (i = 0), e.hasOwnProperty(t) === !0))
          for (r = 0; r < e[t].length; r++)
            n(e[t][r], i + 1), this._dfsTreeWalker(e[t][r], t, n, i + 1);
      },
      _getReadableTreeStructure: function () {
        var e = this;
        e._dfsTreeWalker(e._stage, "children", function (e, t) {
          console.groupCollapsed("".padStart(4 * t) + e.layerData.name),
            console.log(e),
            console.groupEnd();
        });
      },
      _getLayerParents: function (e) {
        var t, n;
        for (t = e.parent, n = []; t && t !== engine._stage.children[0]; )
          n.push(t), (t = t.parent);
        return n;
      },
      _getUniqueParents: function (e) {
        return 0 === e.length
          ? e
          : e
              .sort(function (e, t) {
                return e.length === t.length ? 0 : e.length < t.length ? 1 : -1;
              })
              .reduce(function (e, t) {
                return e.concat(t);
              })
              .filter(function (e, t, n) {
                return n.lastIndexOf(e) === t;
              });
      },
      _docIntoDoc: function (e, t) {
        var n, i, r;
        return (
          (n = this),
          (i = t.parent),
          (r = t.children[0]),
          n
            ._getGraphicStructure(e.id)
            .then(function (i) {
              return (
                (e.structure = i),
                (e.structure.name = t.layerData.name + "_multilayer"),
                n._preloadGraphicAssets(e).then(function (i) {
                  return n._renderFolder(e.structure, t, i).then(function (t) {
                    return (e.layer = t), (i = null), (t.alpha = r.alpha), e;
                  });
                })
              );
            })
            ["catch"](function () {
              n.dispatch("docIntoDocsLoad:fail", {
                message:
                  "Sorry, this document graphic seems to be failing. Please select another graphic!",
              });
            })
        );
      },
      _getObjectByName: function (e, t) {
        var n;
        return (
          (t = t || engine._stage),
          this._treeWalker(t, "children", function (t) {
            n || (t.layerData && t.layerData.name === e && (n = t));
          }),
          n
        );
      },
      _getDocumentSize: function (e) {
        var t, n, i, r, s, o;
        return (
          (t = this),
          (n = t._uiJSON.supportedSizes),
          (i = t._uiJSON.original.size),
          (r = t._uiJSON.size),
          (s = n.filter(function (e) {
            return e.id === r;
          })[0]),
          (s = s && s.size),
          (o = s || i),
          (o = e ? o.high : o.preview)
        );
      },
    },
  }),
  Module(
    Ngin,
    "Effect"
  )({
    prototype: {
      _applyDropShadow: function (e, t, n, i) {
        var r, s, o, a, l, c, u, h, d, p, f, m, g, v, _, y, b, w, x;
        return (
          (r = this),
          (o = !(
            t.layerData &&
            t.layerData.styles &&
            t.layerData.styles.layerEffects &&
            t.layerData.styles.layerEffects.dropShadow &&
            t.layerData.styles.layerEffects.dropShadow.enabled
          ))
            ? void 0
            : ((a = t.layerData.styles.layerEffects.dropShadow),
              (l = 180 - a.localLightingAngle || 0),
              (c = Math.round(a.distance) / 2 || 0),
              (u = 0.4 * Math.round(a.blur) || 0),
              (h =
                256 * Math.floor(a.color.red) * 256 +
                  256 * Math.floor(a.color.green) +
                  Math.floor(a.color.blue) || 0),
              (d = a.opacity / 100 || 0),
              (p = n || 1),
              (g = t.rotation),
              (v = parseFloat(Math.abs(Math.cos(g)).toFixed(4))),
              (_ = parseFloat(Math.abs(Math.sin(g)).toFixed(4))),
              (y = t.width * v + t.height * _),
              (b = t.width * _ + t.height * v),
              (f = new PIXI.CanvasRenderer(y, b, r._renderSettings)),
              (w = t.x),
              (x = t.y),
              (t.x = t.pivot.x + (y - t.width) / 2),
              (t.y = t.pivot.y + (b - t.height) / 2),
              f.render(t),
              (m = new PIXI.Sprite.from(f.view)),
              (m.x = w - t.x),
              (m.y = x - t.y),
              (t.x = w),
              (t.y = x),
              (p = 1),
              (s = r._buildDropShadow(m, l, c, u, h, d, p, i)),
              (s.blendMode = Engine._blendModeTable[a.mode]),
              (s.layerData = {
                name: t.layerData.name.replace("_original", "") + "_dropShadow",
                type: "Effect",
              }),
              m.destroy(!0),
              f.destroy(),
              s)
        );
      },
      _buildDropShadow: function (e, t, n, i, r, s, o, a) {
        var l, c, u, h, d, p, f, m, g, v, _, y, b, w, x, C, T;
        return (
          (l = this),
          (b = Math.ceil(e.width)),
          (w = Math.ceil(e.height)),
          (c = Math.max(10 * n, 5 * i)),
          (u = l._webGLRenderer),
          u.resize(b + 2 * c, w + 2 * c),
          (h = e.x),
          (d = e.y),
          (e.x = c),
          (e.y = c),
          (y = o || 1),
          (p = new PIXI.Sprite(e.texture)),
          (p.x = c),
          (p.y = c),
          (p.scale.x = p.scale.y = y),
          (m = new PIXI.filters.DropShadowFilter(t, n, i, r, s)),
          (m.padding = c),
          (e.filters = [m]),
          u.render(e),
          (e.x = h),
          (e.y = d),
          (_ = document.createElement("canvas")),
          (_.width = u.width),
          (_.height = u.height),
          (f = _.getContext("2d")),
          f.drawImage(u.view, 0, 0, _.width, _.height),
          (v = PIXI.Sprite.from(_)),
          u.resize(0, 0),
          (_ = null),
          a
            ? (g = v)
            : ((g = l._globalComposer(v, p, "destination-out")), v.destroy(!0)),
          p.destroy(!0),
          (x = new PIXI.Rectangle(0, 0, g.width, g.height)),
          (C = l._getTrimBounds(g._texture.baseTexture.source)),
          (T = new PIXI.Rectangle(
            C.left,
            C.top,
            C.right - C.left,
            C.bottom - C.top
          )),
          (texture = new PIXI.Texture(
            new PIXI.BaseTexture(g._texture.baseTexture.source),
            T,
            x
          )),
          (g = new PIXI.Sprite(texture)),
          (g.x = h - c + C.left),
          (g.y = d - c + C.top),
          g
        );
      },
      _globalComposer: function (e, t, n, i) {
        var r, s, o, a, l, c, u;
        (r = Math.max(e.width + e.x, t.width + t.x)),
          (s = Math.max(e.height + e.y, t.height + t.y)),
          (u = this),
          (l = []),
          (l["source-in"] = function (e, t) {
            return t > 0 ? e : 0;
          }),
          (l["source-out"] = function (e, t) {
            return t - e;
          }),
          (l["source-atop"] = function (e) {
            return e;
          }),
          (l["destination-out"] = function (e, t) {
            return e - t;
          }),
          (l["destination-atop"] = function (e, t) {
            return t;
          }),
          (l.xor = function (e, t) {
            return e == t ? 0 : e + (t * (255 - e)) / 255;
          }),
          (l["destination-in"] = l["source-in"]),
          (l.copy = l["destination-atop"]),
          (c = l[n]),
          c ||
            (c = function (e, t) {
              return e;
            }),
          (o = new PIXI.CanvasRenderer(r, s, u._renderSettings)),
          (a = o.view.getContext("2d")),
          a.save(),
          (a.globalAlpha = 1),
          o.render(e),
          a.restore();
        var h = a.getImageData(0, 0, o.width, o.height),
          d = a.getImageData(0, 0, o.width, o.height);
        for (C = 3; C < d.data.length; C += 4) d.data[C] = 255;
        var p = document.createElement("canvas");
        (p.width = r), (p.height = s);
        var f = p.getContext("2d");
        f.putImageData(d, 0, 0),
          (o = new PIXI.CanvasRenderer(r, s, u._renderSettings)),
          (a = o.view.getContext("2d")),
          a.save(),
          (a.globalAlpha = 1),
          o.render(t),
          a.restore();
        var m = a.getImageData(0, 0, o.width, o.height),
          g = a.getImageData(0, 0, o.width, o.height);
        if ("destination-out" != n && !i)
          for (C = 3; C < g.data.length; C += 4) g.data[C] = 255;
        var v = document.createElement("canvas");
        (v.width = r), (v.height = s);
        var _ = v.getContext("2d");
        _.putImageData(g, 0, 0);
        var y = document.createElement("canvas");
        (y.width = r),
          (y.height = s),
          (a = y.getContext("2d")),
          a.save(),
          a.drawImage(p, 0, 0),
          (a.globalAlpha = 1),
          (a.globalCompositeOperation = n),
          a.drawImage(v, 0, 0),
          a.restore();
        for (
          var b = a.getImageData(0, 0, o.width, o.height),
            w = b.data,
            x = w.length,
            C = 3;
          x > C;
          C += 4
        )
          w[C] = c(h.data[C], m.data[C]);
        return (b.data = w), a.putImageData(b, 0, 0), new PIXI.Sprite.from(y);
      },
      _applyColorOverlay: function (e, t, n) {
        var i, r, s, o, a, l, c, u;
        if (
          ((i = this),
          (n = n || e.children[0]),
          (r = n.layerData),
          (s =
            r.name.replace(/_original/, "").replace(/_gradientOverlay/, "") +
            "_colorOverlay"),
          (n.visible = n.layerData.visible),
          (a = r.styles.layerEffects.solidFill),
          (o = i._getObjectByName(s, e)),
          (l = a.opacity / 100),
          (c = Engine._blendModeTable[a.mode]),
          (t.blendingMode = c),
          i._treeWalker(n, "children", function (e) {
            e.visible =
              -1 === e.layerData.name.indexOf("_multilayer") &&
              e.layerData.name.indexOf("_original") > -1
                ? !1
                : e.layerData.visible;
          }),
          "normal" === a.mode && 0 === a.opacity)
        ) {
          if (window.newrelic) {
            var h = new Error("N-gin:ApplyColorOverlay:SolidFillCase");
            window.newrelic.noticeError(h);
          }
          return (
            o
              ? i._swapTexture(o, n.texture.baseTexture.source, {
                  width: n.width,
                  height: n.height,
                })
              : ((o = PIXI.Sprite.from(n.texture)),
                (o.alpha = l * ((r.opacity || 100) / 100))),
            (o.layerData = { name: s, visible: !0, type: "Effect" }),
            (n.visible = !1),
            o
          );
        }
        if (0 === n.width) {
          if (window.newrelic) {
            var h = new Error("N-gin:ApplyColorOverlay:SizeZeroCase");
            window.newrelic.noticeError(h);
          }
          return (
            (o = new PIXI.Sprite(PIXI.Texture.EMPTY)),
            (o.layerData = { name: s, visible: !0, type: "Effect" }),
            (n.visible = !1),
            (o.alpha = l * ((r.opacity || 100) / 100)),
            o
          );
        }
        return (
          (u = i._createOverlayRenderer(n, a, t)),
          o
            ? i._swapTexture(o, u.view, { width: n.width, height: n.height })
            : (o.destroy(!0), (o = PIXI.Sprite.from(u.view))),
          u.destroy(!0),
          (u = null),
          (o.layerData = { name: s, visible: !0, type: "Effect" }),
          (n.visible = !1),
          0 === c && (o.blendMode = c),
          o
        );
      },
      _createOverlayRenderer: function (e, t, n) {
        var i, r, s, o, a, l, c;
        (i = new PIXI.CanvasRenderer(
          e.width,
          e.height,
          engine._renderSettings
        )),
          (s = parseInt(t.color.red)),
          (o = parseInt(t.color.green)),
          (a = parseInt(t.color.blue)),
          (l = e.x),
          (c = e.y),
          (e.x = 0),
          (e.y = 0),
          (r = i.view.getContext("2d")),
          r.save(),
          (r.globalAlpha = 1),
          i.render(e),
          r.restore(),
          (e.x = l),
          (e.y = c);
        for (
          var u = r.getImageData(0, 0, i.width, i.height),
            h = r.getImageData(0, 0, i.width, i.height),
            d = 3;
          d < h.data.length;
          d += 4
        )
          h.data[d] = 255;
        r.putImageData(h, 0, 0),
          r.save(),
          (r.globalAlpha = 1),
          3 == n.blendingMode && (r.globalCompositeOperation = "screen");
        var p = engine._hextoRGB(n.color);
        (r.fillStyle =
          "rgba(" + p.r + "," + p.g + "," + p.b + "," + t.opacity / 100 + ")"),
          r.fillRect(0, 0, i.width, i.height),
          r.restore();
        for (
          var f = r.getImageData(0, 0, i.width, i.height),
            m = f.data,
            g = m.length,
            d = 3;
          g > d;
          d += 4
        )
          m[d] = u.data[d];
        return (f.data = m), r.putImageData(f, 0, 0), i;
      },
      _hextoRGB: function (e) {
        var t = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
        e = e.replace(t, function (e, t, n, i) {
          return t + t + n + n + i + i;
        });
        var n = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);
        return n
          ? {
              r: parseInt(n[1], 16),
              g: parseInt(n[2], 16),
              b: parseInt(n[3], 16),
            }
          : null;
      },
      _hasColorOverlay: function (e) {
        return (
          e.styles && e.styles.layerEffects && e.styles.layerEffects.solidFill
        );
      },
      _applyGradientOverlay: function (e, t) {
        var n, i;
        if (
          ((n = t.layerData),
          (i =
            n.styles &&
            n.styles.layerEffects &&
            n.styles.layerEffects.gradientFill),
          (i = this._getLayerEffects(n).gradientFill),
          !i)
        )
          return null;
        var r, s, o, a, l, c, u, h, d, p, f, m, g;
        return (
          i.align && n.smartObjectBounds
            ? ((r = n.smartObjectBounds.width),
              (s = n.smartObjectBounds.height),
              (o = n.smartObjectBounds.width),
              (a = n.smartObjectBounds.height),
              (l = 0),
              (c = 0),
              (u = n.smartObjectBounds.x),
              (h = n.smartObjectBounds.y))
            : i.align && "Folder" !== n.type
            ? ((r = t.width),
              (s = t.height),
              (o = t.width),
              (a = t.height),
              (l = 0),
              (c = 0),
              (u = 0),
              (h = 0))
            : ((r = this._canvasRenderer.width),
              (s = this._canvasRenderer.height),
              (o = t.width),
              (a = t.height),
              (l = e.x),
              (c = e.y),
              (u = 0),
              (h = 0)),
          (r = r || 1),
          (s = s || 1),
          (d = this._createGradient(i, r, s)),
          (p = document.createElement("canvas")),
          (p.width = t.width),
          (p.height = t.height),
          (clipCtx = p.getContext("2d")),
          clipCtx.drawImage(d, l, c, o, a, u, h, o, a),
          (m = PIXI.Sprite.from(p)),
          (g = this._globalComposer(m, t, "destination-in")),
          (f =
            "screen" === i.mode
              ? this._globalComposer(t, g, "screen", !0)
              : this._globalComposer(t, g, "source-over", !0)),
          m.destroy(!0),
          g.destroy(!0),
          (f.layerData = {}),
          (f.layerData.name =
            t.layerData.name.replace("_original", "") + "_gradientOverlay"),
          (f.layerData.type = "Effect"),
          (f.layerData.visible = !0),
          f
        );
      },
      _createGradient: function (e, t, n) {
        var i = document.createElement("canvas"),
          r = i.getContext("2d");
        if (!e) return null;
        var s = e.gradient;
        (i.width = t), (i.height = n);
        var o = s.colors.map(function (e) {
          var t = {},
            n = s.transparency.filter(function (t) {
              return t.location === e.location;
            })[0],
            i = n ? n.opacity / 100 : 1;
          return (
            (t.color =
              "rgba(" +
              parseInt(e.color.red) +
              "," +
              parseInt(e.color.green) +
              "," +
              parseInt(e.color.blue) +
              "," +
              i +
              ")"),
            (t.location = e.location),
            t
          );
        });
        if ("linear" === e.type) {
          var a = t,
            l = n / t || 0;
          rangle = e.angle;
          var c = ((180 - rangle) * Math.PI) / 180,
            u = r.createLinearGradient(
              t / 2 + Math.cos(c) * a * 0.5,
              n / 2 + Math.sin(c) * a * 0.5 * l,
              t / 2 - Math.cos(c) * a * 0.5,
              n / 2 - Math.sin(c) * a * 0.5 * l
            ),
            h = e.scale / 100,
            d = (1 - h) / 2;
          o.forEach(function (e) {
            u.addColorStop((e.location / s.interpolation) * h + d, e.color);
          }),
            (r.fillStyle = u);
        } else if ("radial" === e.type) {
          var c = e.angle,
            p = c * (Math.PI / 180),
            f = Math.atan2(n, t);
          if (Math.abs(p) > Math.abs(f) && Math.abs(Math.PI - f) > Math.abs(p))
            var m = (n / 2) * (1 / Math.sin(p));
          else var m = (t / 2) * (1 / Math.cos(p));
          var h = e.scale / 100,
            g = r.createRadialGradient(
              t / 2,
              n / 2,
              0,
              t / 2,
              n / 2,
              Math.abs(m) * h
            );
          o.forEach(function (e) {
            g.addColorStop(e.location / s.interpolation, e.color);
          }),
            (r.fillStyle = g);
        }
        return (r.globalAlpha = e.opacity / 100), r.fillRect(0, 0, t, n), i;
      },
      _applyGaussianBlur: function (e, t) {
        var n, i, r, s, o;
        if (((n = this), (i = t.layerData.blur), !i)) return null;
        (r = n._webGLRenderer),
          r.resize(this._structureJSON.width, this._structureJSON.height);
        var a = new PIXI.filters.BlurFilter();
        return (
          (a.blur = i.filter.radius),
          (a.blur *= i.filter.radius <= 2 ? 0.75 : 1.5),
          (a.quality = 10),
          (t.filters = [a]),
          r.render(t),
          (s = document.createElement("canvas")),
          (s.width = r.width),
          (s.height = r.height),
          (context = s.getContext("2d")),
          context.drawImage(r.view, 0, 0, s.width, s.height),
          (o = PIXI.Sprite.from(s)),
          (o.layerData = t.layerData),
          (o.layerData.type = "Effect"),
          r.resize(0, 0),
          (s = null),
          o
        );
      },
      _createFakeContainer: function (e) {
        var t,
          n,
          i = this;
        return (t = i._getObjectByName(
          e.layerData.name.replace("_original", "") + "_original",
          e.parent
        ))
          ? t.parent
          : ((n = new PIXI.Container()),
            (n.layerData = {
              name: e.layerData.name,
              type: "Folder",
              visible: !0,
            }),
            (e.layerData.name = e.layerData.name + "_original"),
            n.addChild(e),
            e.mask && ((n.mask = e.mask), (e.mask = null)),
            (n.x = e.x),
            (n.y = e.y),
            (e.x = 0),
            (e.y = 0),
            n);
      },
      _updateLayerEffects: function (e) {
        var t, n, i;
        "SolidColor" !== e.type &&
          e.visible !== !1 &&
          ((t = this),
          (n = t._getObjectByName(e.name)),
          n.children.forEach(function (e) {
            /_original/.test(e.layerData.name) && (i = e);
          }),
          i && t._applyEffects(n, i, e));
      },
      _applyRuleEffect: function (e, t) {
        var n, i, r, s;
        for (
          n = this, i = e.layerData, r = [], s = 0, s = 0;
          s < i.params.length;
          s++
        )
          r.push(i.params[s]);
        var o = r[0].map(function (e) {
          return instanciateLayer(n._getObjectByName(e));
        });
        switch (((r[0] = makeVirtualGroup.apply(n, o)), i.ruleEffect)) {
          case "outline":
            return (i.params[2] *= t), n.applyOutline.apply(n, r);
          case "blur":
            return n.applyBlur.apply(n, r);
          case "warp":
            return n.applyWarp.apply(n, r);
          case "shadow":
            return n.applyShadow.apply(n, r);
        }
      },
      _applyRuleEffects: function (e) {
        e.visible = !0;
        var t = this,
          n = {},
          i = t.getCanvas();
        (n.x = e.scale.x * i._multisamplingFactor),
          (n.y = e.scale.y * i._multisamplingFactor);
        var r = {};
        (r.x = e.position.x),
          (r.y = e.position.y),
          e.layerData.source.forEach(function (e) {
            var i = t._getObjectByName(e);
            (i.visible = !0),
              i.resize(n.x, n.y),
              0 != i.pivot.x &&
                0 != i.pivot.y &&
                ((i.pivot.x = i.width / 2), (i.pivot.y = i.height / 2)),
              i.translate(i.x * n.x + r.x, i.y * n.y + r.y),
              t._applyEffects(i.parent, i);
          });
        var s = t._applyRuleEffect(e, n.x);
        if (s) {
          s = s && s.layer;
          var o = PIXI.BaseTexture.from(s.texture.baseTexture.source);
          return (
            (e.texture.baseTexture = o),
            (e.scale.x = 1 / i._multisamplingFactor),
            (e.scale.y = 1 / i._multisamplingFactor),
            (e.x = 0),
            (e.y = 0),
            s.parent.removeChild(s)
          );
        }
      },
      _applyEffects: function (e, t, n) {
        var i, r, s, o, a, l;
        if ((i = engine._hasLayerEffects(t.layerData))) {
          if (t.layerData.source) return void this._applyRuleEffects(t);
          e.children.forEach(function (e) {
            var t, n, i;
            (t = e.layerData.name),
              (n = t.lastIndexOf("_")),
              (i = t.substr(n + 1, t.length)),
              (e.visible = i ? "original" === i : !0);
          }),
            (r = Object.keys(Engine.supportedEffects)),
            (s = t.layerData.smartFilters || []);
          var c = {
            name: t.layerData.name,
            styles: t.layerData.styles,
            type: t.layerData.type,
            visible: t.layerData.visible,
            fill: t.layerData.fill,
            opacity: t.layerData.opacity,
            blur: s.filter(function (e) {
              return e.name.indexOf("Gaussian Blur") > -1;
            })[0],
          };
          (o = []),
            r.forEach(function (t) {
              var i = t.charAt(0).toLowerCase() + t.slice(1),
                r = Engine.supportedEffects[t];
              (a = engine._getObjectByName(e.layerData.name + "_" + i, e)),
                "original" !== i &&
                  a &&
                  ((effect = {
                    layer: a,
                    method: "_apply" + t,
                    definition: r,
                    name: t,
                    parameters: [e],
                  }),
                  "ColorOverlay" === t &&
                    effect.parameters.push({ color: n.color }),
                  o.push(effect));
            }),
            o.forEach(function (n) {
              var i, r, s, a;
              if (
                ((i = engine._resolveEffectLayer(e, o, n)),
                (r = []),
                i.forEach(function (e, t) {
                  (r[t] = e.visible), (e.visible = !0);
                }),
                (s = engine._flattenLayers(i)),
                (a = PIXI.Sprite.from(s.view)),
                s.destroy(!0),
                (s = null),
                (a.layerData = c),
                i.forEach(function (e, t) {
                  e.visible = r[t];
                }),
                "GradientOverlay" === n.name &&
                  t.layerData.smartObject &&
                  t.texture !== PIXI.Texture.EMPTY)
              ) {
                var u = engine._getTrimBounds(t.texture.baseTexture.source);
                a.layerData.smartObjectBounds = {
                  x: u.left,
                  y: u.top,
                  width: u.right - u.left,
                  height: u.bottom - u.top,
                };
              }
              n.parameters.push(a),
                (l = engine[n.method].apply(engine, n.parameters)),
                a.destroy(!0),
                (a = null),
                (l.layerData.name = l.layerData.name.replace(
                  "_original",
                  "_" + n.name.charAt(0).toLowerCase() + n.name.slice(1)
                )),
                (n.layer.texture = PIXI.Texture.from(l.texture)),
                (n.layer.blendMode = l.blendMode),
                (n.layer.x = l.x),
                (n.layer.y = l.y),
                (n.layer.width = l.width),
                (n.layer.height = l.height),
                (n.layer.visible = !0),
                (n.layer.layerData.alive = !0),
                n.definition.exclusive &&
                  (n.definition.zones.forEach(function (e) {
                    o.filter(function (e) {
                      return e !== n;
                    }).forEach(function (t) {
                      t.definition.zones.indexOf(e) > -1 &&
                        (t.layer.visible = !1);
                    });
                  }),
                  (t.visible = !1));
            });
        }
      },
      _applyEffects2: function (e) {
        var t = this;
        e.forEach(function (e) {
          var n, i, r, s;
          if (
            ((n = e.layerData.styles && e.layerData.styles.layerEffects),
            n && n.solidFill && n.solidFill.enabled)
          ) {
            (i = e.parent),
              i._colorOverride
                ? (s = i._colorOverride)
                : ([
                    "Graphics",
                    Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME,
                  ].indexOf(i.parent.layerData.name) >= 0 &&
                    (r = this._getLayerFromUiJson(i.layerData.name, "graphic")),
                  (s = r ? r.color : this._rgbToHex(n.solidFill.color)));
            var o =
                t._getObjectByName(i.layerData.name + "_original", i) ||
                i.children[0],
              a =
                t._getObjectByName(i.layerData.name + "_colorOverlay", i) ||
                i.children[1];
            i.resize(a.width / o.width, a.height / o.height);
          }
          this._applyEffects(e.parent, e, { color: s });
          var r =
            i &&
            i.layerData &&
            i.layerData.name &&
            t._getLayerFromUiJson(i.layerData.name, "graphic");
          r &&
            r.selectedLayer &&
            r.selectedLayer.id &&
            "customGraphic" === r.selectedLayer.id &&
            t._hideEffects(i);
        }, this);
      },
      _resolveEffectLayer: function (e, t, n) {
        var i,
          r,
          s = [];
        return (
          (i = e.layerData.name),
          (r = n.definition.zones),
          1 === r.length && "outer" === r[0]
            ? (s.push(engine._getObjectByName(i + "_original", e)), s)
            : (r.forEach(function (e) {
                t.filter(function (e) {
                  return e !== n;
                }).forEach(function (t) {
                  t.definition.zones.indexOf(e) > -1 &&
                    t.layer.visible &&
                    s.push(t.layer);
                });
              }),
              0 === s.length &&
                s.push(engine._getObjectByName(i + "_original", e)),
              s)
        );
      },
      _hasLayerEffects: function (e) {
        var t = [
            "solidFill",
            "dropShadow",
            "gradientFill",
            "frameFX",
            "ruleFX",
          ],
          n = ["Gaussian Blur..."],
          i = e && e.styles && e.styles.layerEffects,
          r = e && e.smartFilters,
          s = [],
          o = [];
        return (
          r &&
            r.length &&
            (o = r.filter(function (e) {
              return n.indexOf(e.name) > -1;
            })),
          i &&
            Object.keys(i).length &&
            (s = Object.keys(i).filter(function (e) {
              return t.indexOf(e) > -1;
            })),
          s.length || o.length ? !0 : !1
        );
      },
      _getLayerEffects: function (e) {
        return e && e.styles && e.styles.layerEffects;
      },
      _applyLayerEffects: function (e) {
        var t,
          n,
          i,
          r,
          s,
          o,
          a = this;
        return "SolidColor" === e.layerData.type
          ? e
          : e.visible === !1
          ? e
          : ((t = a._createFakeContainer(e)),
            (n = t.children[0]),
            (r = e.layerData.styles.layerEffects),
            (s = {
              dropShadow: r && r.dropShadow && r.dropShadow.enabled,
              gradientOverlay: r && r.gradientFill,
              colorOverlay: a._hasColorOverlay(n.layerData),
              gaussianBlur:
                e.layerData.smartFilters &&
                e.layerData.smartFilters.filter(function (e) {
                  return e.name.indexOf("Gaussian Blur") > -1;
                })[0],
            }),
            (o = o || {}),
            s.colorOverlay && (o.color = a._rgbToHex(s.colorOverlay.color)),
            Object.keys(s).forEach(function (r) {
              if (s[r]) {
                var o = a._getEmptyTexture({
                  width: n.width,
                  height: n.height,
                });
                (i = PIXI.Sprite.from(o)),
                  (i.layerData = {
                    name: t.layerData.name + "_" + r,
                    type: "Folder",
                    fill: e.layerData.fill,
                    styles: e.layerData.styles,
                    visible: e.layerData.visible,
                    opacity: e.layerData.opacity,
                    blendMode: e.blendMode,
                  }),
                  t.addChild(i);
              }
            }),
            a._applyEffects(t, n, o),
            t);
      },
      _getContrastColor: function (e) {
        var t, n, i, r, s;
        if (!e) return new Chameleon("#ffffff");
        switch (
          ((t = new Chameleon(e)),
          (n = t.getHue()),
          (i = t.getSaturation()),
          (r = t.toLAB()),
          !0)
        ) {
          case 50 < r.l:
            r.l = r.l - 25;
            break;
          case 30 < r.l && r.l <= 50:
            r.l = r.l - 30;
            break;
          case 7 < r.l && r.l <= 30:
            (r.l = 0), (r.a = 0.25 * r.a), (r.b = 0.25 * r.b);
            break;
          case 3 < r.l && r.l <= 7:
            r.l = r.l + 38;
            break;
          case 0 <= r.l && r.l <= 3:
            r.l = r.l + 45;
        }
        return (
          (s = Chameleon.LABToHSV(r.l, r.a, r.b)),
          (s.h = n),
          0 === i && (s.s = 0),
          new Chameleon(s)
        );
      },
      _applyLuminosityCorrection: function (e, t) {
        var n, i;
        (n =
          engine._uiJSON.backgroundColor &&
          engine._uiJSON.backgroundColor.color),
          e.luminosityCorrection && n
            ? ((i = engine._getContrastColor(n).toHex()), (t.tint = i))
            : (t.tint = 16777215);
      },
      _reapplyColor: function (e, t) {
        var n = this,
          i = n._getObjectByName(e.layerData.name + "_original", e);
        if (i && n._hasColorOverlay(i.layerData)) {
          var r = { color: t };
          n._applyColorOverlay(e, r);
        }
      },
      _getCurrentOverlayColor: function (e) {
        for (var t = this, n = 0; n < t._uiJSON.graphic.length; n++)
          if (e == t._uiJSON.graphic[n].name) return t._uiJSON.graphic[n].color;
      },
      _getAssetColor: function (e, t) {
        var n = engine._getLayerFromUiJson(e, "graphic"),
          i = n.layers.filter(function (e) {
            return e.visible === !0;
          })[0];
        if (i && i.layers) {
          var r = i.layers.filter(function (e) {
            return e.name === t;
          })[0];
          if (r) return r.color;
        }
      },
      _applyRuleStroke: function (e, t, n, i) {
        var r, s, o, a, l, c;
        (r = this),
          (l = new Chameleon(n)),
          (c = r._getObjectByName(e.layerData.name + "_original", e)),
          (originalVisible = c.visible),
          (c.visible = !0),
          (c.x = 0),
          (c.y = 0),
          (s = r._buildStroke(c, t, l.toHex(), i)),
          (o = e.layerData.name + "_stroke"),
          (a = r._getObjectByName(o, e)),
          (s.layerData = { name: o, type: "Effect" }),
          (offset = {}),
          (offset.x = s.x),
          (offset.y = s.y),
          (e.x += offset.x * e.scale.x),
          (e.y += offset.y * e.scale.y),
          r._reapplyColor(e, r._getCurrentOverlayColor(e.layerData.name)),
          e.children.forEach(function (e) {
            (e.x = -offset.x), (e.y = -offset.y);
          }),
          (c.visible = originalVisible),
          a && e.removeChild(a),
          e.addChild(s),
          (s.x -= s.x),
          (s.y -= s.y);
      },
      _buildStroke: function (e, t, n, i) {
        var r, s, o, a, l, c, u, h, d, p, f, m, g, v, _, y;
        (r = this),
          (s = t),
          (a = new PIXI.CanvasRenderer(
            e.width + 2 * s,
            e.height + 2 * s,
            this._renderSettings
          )),
          (o = r._webGLRenderer),
          o.resize(e.width + 2 * s, e.height + 2 * s),
          (l = e.x),
          (c = e.y),
          (e.x = s),
          (e.y = s),
          a.render(e),
          (m = document.createElement("canvas")),
          (m.width = a.width),
          (m.height = a.height),
          (d = m.getContext("2d")),
          d.drawImage(a.view, 0, 0, m.width, m.height),
          (u = PIXI.Sprite.from(m)),
          a.destroy(),
          (m = null),
          (u.x = 0),
          (u.y = 0),
          (v = 10),
          (g = Math.floor(t / v)),
          (_ = (t / v - g) * v),
          (strokeFilter = new PIXI.filters.OutlineFilter(v, n, 1)),
          (y = []),
          (strokeFilter.padding = s);
        for (var b = 0; g > b; b++) y.push(strokeFilter);
        return (
          (strokeFilter = new PIXI.filters.OutlineFilter(_, n, 1)),
          (strokeFilter.padding = s),
          y.push(strokeFilter),
          (u.filters = y),
          o.render(u),
          u.destroy(!0),
          (f = document.createElement("canvas")),
          (f.width = o.width),
          (f.height = o.height),
          (h = f.getContext("2d")),
          h.drawImage(o.view, 0, 0, f.width, f.height),
          (p = PIXI.Sprite.from(f)),
          o.resize(0, 0),
          (f = null),
          i || (p = r._globalComposer(p, e, "destination-out")),
          (e.x = l),
          (e.y = c),
          (p.x = l - s),
          (p.y = c - s),
          p
        );
      },
      _flattenLayers: function (e) {
        var t, n, i, r, s, o, a, l, c;
        (t = this),
          (minX = Math.min.apply(
            Math,
            e.map(function (e) {
              return e.x;
            })
          )),
          (minY = Math.min.apply(
            Math,
            e.map(function (e) {
              return e.y;
            })
          )),
          (n =
            Math.max.apply(
              Math,
              e.map(function (e) {
                return e.x + e.width;
              })
            ) - minX),
          (i =
            Math.max.apply(
              Math,
              e.map(function (e) {
                return e.y + e.height;
              })
            ) - minY),
          (n = Math.ceil(n)),
          (i = Math.ceil(i)),
          (r = new PIXI.CanvasRenderer(n, i, this._renderSettings)),
          (s = new PIXI.Container());
        for (var u = 0; u < e.length; u++)
          t._uiJSON.disableAA
            ? ((e[u].width = Math.ceil(e[u].width)),
              (e[u].height = Math.ceil(e[u].height)),
              (o = new PIXI.CanvasRenderer(
                e[u].width,
                e[u].height,
                t._renderSettings
              )))
            : (o = new PIXI.CanvasRenderer(
                Math.ceil(e[u].width),
                Math.ceil(e[u].height),
                t._renderSettings
              )),
            (l = e[u].x),
            (c = e[u].y),
            (e[u].x = (Math.ceil(e[u].width) - e[u].width) / 2),
            (e[u].y = (Math.ceil(e[u].height) - e[u].height) / 2),
            o.render(e[u]),
            (e[u].x = l),
            (e[u].y = c),
            (a = PIXI.Sprite.from(o.view)),
            s.addChild(a);
        return (
          (s.x = (Math.ceil(s.width) - s.width) / 2),
          (s.y = (Math.ceil(s.height) - s.height) / 2),
          r.render(s),
          o.destroy(!0),
          (o = null),
          s.destroy(!0),
          r
        );
      },
      _hideOuterEffects: function (e) {
        var t, n, i, r;
        (t = this),
          (n = Object.keys(Engine.supportedEffects)),
          n.forEach(function (n) {
            (i = n.charAt(0).toLowerCase() + n.slice(1)),
              (r = t._getObjectByName(e.layerData.name + "_" + i, e)),
              "outer" == Engine.supportedEffects[n].zones[0] &&
                r &&
                (r.visible = !1);
          });
      },
      _showOuterEffects: function (e) {
        var t, n, i, r;
        (t = this),
          (n = Object.keys(Engine.supportedEffects)),
          n.forEach(function (n) {
            (i = n.charAt(0).toLowerCase() + n.slice(1)),
              (r = t._getObjectByName(e.layerData.name + "_" + i, e)),
              "outer" == Engine.supportedEffects[n].zones[0] &&
                r &&
                (r.visible = !0);
          });
      },
      _hideAllOuterEffects: function () {
        var e;
        (e = this),
          e._treeWalker(e._stage, "children", function (t) {
            e._hideOuterEffects(t);
          });
      },
      _showAllOuterEffects: function () {
        var e;
        (e = this),
          e._treeWalker(e._stage, "children", function (t) {
            e._showOuterEffects(t);
          });
      },
      getTransformationsBounds: function () {
        var e = [];
        return (
          engine._treeWalker(engine._stage, "children", function (t) {
            var n,
              i = t.layerData;
            i &&
              Engine.validCustomGraphic.test(i.name) !== !1 &&
              i.smartObject &&
              i.smartObject.transform &&
              Object.keys(i.smartObject.transform).length &&
              ((n = engine._getTrimBounds(t.texture.baseTexture.source)),
              (n.visible = i.visible),
              e.push(n));
          }),
          e
        );
      },
      _cacheEffectsQueue: function (e, t) {
        var n, i;
        return (
          (n = e.getQueue()),
          (n = t.concat(n)),
          (i = {}),
          n.forEach(function (e) {
            var t = e
              .map(function (e) {
                return e.layerData.name;
              })
              .join(".");
            i[t] = e;
          }),
          (n = Object.keys(i).map(function (e) {
            return i[e];
          })),
          e.setQueue(n),
          [].concat(e.getQueue())
        );
      },
      getCanvas: function () {
        var e = engine.getCanvasSize();
        return (
          (canvas = {
            visible: !0,
            x: 0,
            y: 0,
            width: e.width,
            height: e.height,
            layer: engine._stage,
            _resolutionFactor:
              e.width / engine._uiJSON.original.size.high.width,
          }),
          (canvas._isHighRes = 1 === canvas._resolutionFactor),
          (canvas._multisamplingFactor = canvas._isHighRes ? 1 : 1.3),
          (strokeFilterX = new PIXI.filters.OutlineFilter(10, 0, 1)),
          (strokeFilterX.padding = 10),
          (strokeFilter10 = new PIXI.filters.OutlineFilter(10, 0, 1)),
          (strokeFilter10.padding = 10),
          canvas
        );
      },
      applyOutline: function (e, t, n) {
        (engine.newLayerSuffix += 1), canvas || this.getCanvas();
        var i,
          r,
          s,
          o,
          a,
          l = _unpackLayerOrGroup(e),
          c = [],
          u = canvas._multisamplingFactor,
          h = 10,
          d = t.replace("#", "0x"),
          p = n * u * canvas._resolutionFactor;
        if (
          ((o = Math.floor(p / h)),
          (a = (p / h - o) * h),
          (r = new PIXI.CanvasRenderer(
            engine._structureJSON.width * u,
            engine._structureJSON.height * u,
            engine._renderSettings
          )),
          (r.clearBeforeRender = !1),
          l.forEach(function (e) {
            (e.x *= u),
              (e.y *= u),
              (e.width *= u),
              (e.height *= u),
              r.render(e),
              (e.x /= u),
              (e.y /= u),
              (e.width /= u),
              (e.height /= u),
              (e.visible = !1);
          }),
          (i = _copyCanvas(r.view)),
          r.destroy(),
          !canvas._isHighRes)
        ) {
          var f = i.getContext("2d"),
            m = f.getImageData(0, 0, i.width, i.height),
            g = m.data;
          for (v = 3; v < g.length; v += 4) g[v] > 128 && (g[v] = 255);
          f.putImageData(m, 0, 0), (m = null);
        }
        (group = PIXI.Sprite.from(i)), (strokeFilter10.color = d);
        for (var v = 0; o > v; v++) c.push(strokeFilter10);
        (strokeFilterX.thickness = a),
          (strokeFilterX.color = d),
          c.push(strokeFilterX),
          (group.filters = c);
        var _ = engine.getCanvasSize(),
          y = engine._webGLRenderer;
        return (
          y.resize(
            _.width * canvas._multisamplingFactor,
            _.height * canvas._multisamplingFactor
          ),
          y.render(group),
          group.destroy(!0),
          (s = PIXI.Sprite.from(_copyCanvas(y.view))),
          y.resize(0, 0),
          (s.x /= u),
          (s.y /= u),
          (s.width /= u),
          (s.height /= u),
          (s.layerData = _getNewLayerData(l, "outline", arguments)),
          engine._getObjectByName("Rules Effects").addChild(s),
          instanciateLayer(s)
        );
      },
      applyWarp: function (e, t) {
        (engine.newLayerSuffix += 1), canvas || this.getCanvas();
        var n,
          i,
          r,
          s,
          o,
          a = _unpackLayerOrGroup(e),
          l = canvas._multisamplingFactor;
        return (
          (n = new PIXI.CanvasRenderer(
            getWidth(canvas) * l,
            getHeight(canvas) * l,
            engine._renderSettings
          )),
          (n.clearBeforeRender = !1),
          a.forEach(function (e) {
            (e.x *= l),
              (e.y *= l),
              (e.width *= l),
              (e.height *= l),
              n.render(e),
              (e.x /= l),
              (e.y /= l),
              (e.width /= l),
              (e.height /= l),
              (e.visible = !1);
          }),
          (n.clearBeforeRender = !0),
          (i = engine._trimCanvas(_copyCanvas(n.view))),
          n.destroy(),
          (r = PIXI.Sprite.from(i.canvas)),
          (r.x = i.bounds.left),
          (r.y = i.bounds.top),
          (s = engine._getTransformationTexture(r, t)),
          r.destroy(),
          (o = PIXI.Sprite.from(s)),
          (o.width /= l),
          (o.height /= l),
          (o.x = (getWidth(canvas) - o.width) / 2),
          (o.y = i.bounds.top / l),
          (o.layerData = _getNewLayerData(a, "warp", arguments)),
          getLayerByName("Rules Effects").addChild(o),
          instanciateLayer(o)
        );
      },
      applyBlur: function (e, t, n) {
        (engine.newLayerSuffix += 1), canvas || this.getCanvas();
        var i,
          r,
          s = _unpackLayerOrGroup(e),
          o = engine._getObjectByName("Rules Effects"),
          a = canvas._multisamplingFactor,
          l = [new PIXI.filters.BlurFilter(t, n)];
        return (
          (r = engine._webGLRenderer),
          r.resize(
            engine._structureJSON.width * a,
            engine._structureJSON.height * a
          ),
          (r.clearBeforeRender = !1),
          s.forEach(function (e) {
            (e.x *= a),
              (e.y *= a),
              (e.width *= a),
              (e.height *= a),
              r.render(e),
              (e.x /= a),
              (e.y /= a),
              (e.width /= a),
              (e.height /= a),
              (e.visible = !1);
          }),
          (r.clearBeforeRender = !0),
          (i = PIXI.Sprite.from(_copyCanvas(r.view))),
          (i.filters = l),
          r.render(i),
          i.destroy(!0),
          (i = PIXI.Sprite.from(_copyCanvas(r.view))),
          r.resize(0, 0),
          (i.x /= a),
          (i.y /= a),
          (i.width /= a),
          (i.height /= a),
          (i.layerData = _getNewLayerData(s, "blur", arguments)),
          o.addChild(i),
          instanciateLayer(i)
        );
      },
      applyShadow: function (e, t, n, i, r, s) {
        (engine.newLayerSuffix += 1), canvas || this.getCanvas();
        var o = _unpackLayerOrGroup(e),
          a = engine._getObjectByName("Rules Effects");
        (r = r || 90), (s = s || 1), (i = i || 0);
        var l,
          c,
          u = arguments,
          h = 100 * s,
          d = canvas._multisamplingFactor;
        return (
          (l = new PIXI.CanvasRenderer(
            getWidth(canvas) * d,
            getHeight(canvas) * d,
            engine._renderSettings
          )),
          (l.clearBeforeRender = !1),
          o.forEach(function (e) {
            engine.newLayerSuffix += 1;
            var s,
              o,
              a,
              c = e.layerData;
            (c.styles = c.styles || {}),
              (s = c.styles),
              (o = s.layerEffects),
              (s.layerEffects = {
                dropShadow: {
                  enabled: !0,
                  mode: "normal",
                  localLightingAngle: r,
                  distance: n * canvas._resolutionFactor,
                  blur: i,
                  color: _hexToRgb(t),
                  opacity: h,
                },
              }),
              (e.x *= d),
              (e.y *= d),
              (e.width *= d),
              (e.height *= d),
              (a = engine._applyDropShadow(null, e, e.scale.x)),
              (s.layerEffects = o),
              l.render(e),
              l.render(a),
              (e.x /= d),
              (e.y /= d),
              (e.width /= d),
              (e.height /= d),
              (e.visible = !1),
              (a.x /= d),
              (a.y /= d),
              (a.width /= d),
              (a.height /= d);
          }),
          (l.clearBeforeRender = !0),
          (c = PIXI.Sprite.from(_copyCanvas(l.view))),
          l.resize(0, 0),
          (c.x /= d),
          (c.y /= d),
          (c.width /= d),
          (c.height /= d),
          (c.layerData = _getNewLayerData(o, "shadow", u)),
          a.addChild(c),
          instanciateLayer(c)
        );
      },
    },
  }),
  Module(
    Ngin,
    "LanguageSupport"
  )({
    fallbackFontLanguages: {
      simplifiedChinese: {
        fontInfo: {
          name: "NotoSansSC-Regular",
          displayName: "Noto Sans SC Regular",
          development: {
            id: "b0dc804d71453006b40956876017719c",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
          staging: {
            id: "b0dc804d71453006b40956876017719c",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
          production: {
            id: "3bfd1f67914f38ab63fdaf3bf644f4a9",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
        },
        regex:
          /[\u4e07\u4e0e\u4e11\u4e13\u4e1a\u4e1b\u4e1c\u4e1d\u4e22\u4e24\u4e25\u4e27\u4e2a\u4e2c\u4e30\u4e34\u4e3a\u4e3d\u4e3e\u4e48\u4e49\u4e4c\u4e50\u4e54\u4e60\u4e61\u4e66\u4e70\u4e71\u4e89\u4e8e\u4e8f\u4e91\u4e98\u4e9a\u4ea7\u4ea9\u4eb2\u4eb5\u4eb8\u4ebf\u4ec5\u4ece\u4ed1\u4ed3\u4eea\u4eec\u4ef7\u4f17\u4f18\u4f19\u4f1a\u4f1b\u4f1e\u4f1f\u4f20\u4f24\u4f25\u4f26\u4f27\u4f2a\u4f2b\u4f53\u4f59\u4f63\u4f65\u4fa0\u4fa3\u4fa5\u4fa6\u4fa7\u4fa8\u4fa9\u4faa\u4fac\u4fe3\u4fe6\u4fe8\u4fe9\u4fea\u4fed\u503a\u503e\u506c\u507b\u507e\u507f\u50a5\u50a7\u50a8\u50a9\u513f\u5151\u5156\u515a\u5170\u5173\u5174\u5179\u517b\u517d\u5181\u5185\u5188\u518c\u5199\u519b\u519c\u51a2\u51af\u51b2\u51b3\u51b5\u51bb\u51c0\u51c4\u51c9\u51cc\u51cf\u51d1\u51db\u51e0\u51e4\u51eb\u51ed\u51ef\u51fb\u51fc\u51ff\u520d\u5212\u5218\u5219\u521a\u521b\u5220\u522b\u522c\u522d\u523d\u523f\u5240\u5242\u5250\u5251\u5265\u5267\u529d\u529e\u52a1\u52a2\u52a8\u52b1\u52b2\u52b3\u52bf\u52cb\u52d0\u52da\u5300\u5326\u532e\u533a\u533b\u534e\u534f\u5355\u5356\u5362\u5364\u5367\u536b\u5374\u537a\u5382\u5385\u5386\u5389\u538b\u538c\u538d\u5395\u53a2\u53a3\u53a6\u53a8\u53a9\u53ae\u53bf\u53c2\u53c6\u53c7\u53cc\u53d1\u53d8\u53d9\u53e0\u53f6\u53f7\u53f9\u53fd\u5401\u540e\u5413\u5415\u5417\u5423\u5428\u542c\u542f\u5434\u5452\u5453\u5455\u5456\u5457\u5458\u5459\u545b\u545c\u548f\u5494\u5499\u549b\u549d\u54a4\u54b4\u54b8\u54cc\u54cd\u54d1\u54d2\u54d3\u54d4\u54d5\u54d7\u54d9\u54dc\u54dd\u54df\u551b\u551d\u5520\u5521\u5522\u5523\u5524\u553f\u5567\u556c\u556d\u556e\u5570\u5574\u5578\u55b7\u55bd\u55be\u55eb\u5475\u55f3\u5618\u5624\u5631\u565c\u567c\u56a3\u56af\u56e2\u56ed\u56f1\u56f4\u56f5\u56fd\u56fe\u5706\u5723\u5739\u573a\u5742\u574f\u5757\u575a\u575b\u575c\u575d\u575e\u575f\u5760\u5784\u5785\u5786\u5792\u57a6\u57a7\u57a9\u57ab\u57ad\u57af\u57b1\u57b2\u57b4\u57d8\u57d9\u57da\u57dd\u57ef\u5811\u5815\u5846\u5899\u58ee\u58f0\u58f3\u58f6\u58f8\u5904\u5907\u590d\u591f\u5934\u5938\u5939\u593a\u5941\u5942\u594b\u5956\u5965\u5986\u5987\u5988\u59a9\u59aa\u59ab\u59d7\u59dc\u5a04\u5a05\u5a06\u5a07\u5a08\u5a31\u5a32\u5a34\u5a73\u5a74\u5a75\u5a76\u5aaa\u5ad2\u5ad4\u5af1\u5b37\u5b59\u5b66\u5b6a\u5b81\u5b9d\u5b9e\u5ba0\u5ba1\u5baa\u5bab\u5bbd\u5bbe\u5bdd\u5bf9\u5bfb\u5bfc\u5bff\u5c06\u5c14\u5c18\u5c27\u5c34\u5c38\u5c3d\u5c42\u5c43\u5c49\u5c4a\u5c5e\u5c61\u5c66\u5c7f\u5c81\u5c82\u5c96\u5c97\u5c98\u5c99\u5c9a\u5c9b\u5cad\u5cb3\u5cbd\u5cbf\u5cc3\u5cc4\u5ce1\u5ce3\u5ce4\u5ce5\u5ce6\u5d02\u5d03\u5d04\u5d2d\u5d58\u5d5a\u5d5b\u5d5d\u5d74\u5dc5\u5de9\u5def\u5e01\u5e05\u5e08\u5e0f\u5e10\u5e18\u5e1c\u5e26\u5e27\u5e2e\u5e31\u5e3b\u5e3c\u5e42\u5e5e\u5e72\u5e76\u5e7f\u5e84\u5e86\u5e90\u5e91\u5e93\u5e94\u5e99\u5e9e\u5e9f\u5ebc\u5eea\u5f00\u5f02\u5f03\u5f20\u5f25\u5f2a\u5f2f\u5f39\u5f3a\u5f52\u5f53\u5f55\u5f5f\u5f66\u5f7b\u5f84\u5f95\u5fa1\u5fc6\u5fcf\u5fe7\u5ffe\u6000\u6001\u6002\u6003\u6004\u6005\u6006\u601c\u603b\u603c\u603f\u604b\u6073\u6076\u6078\u6079\u607a\u607b\u607c\u607d\u60a6\u60ab\u60ac\u60ad\u60af\u60ca\u60e7\u60e8\u60e9\u60eb\u60ec\u60ed\u60ee\u60ef\u610d\u6120\u6124\u6126\u613f\u6151\u616d\u61b7\u61d1\u61d2\u61d4\u6206\u620b\u620f\u6217\u6218\u622c\u6237\u624e\u6251\u6266\u6267\u6269\u626a\u626b\u626c\u6270\u629a\u629b\u629f\u62a0\u62a1\u62a2\u62a4\u62a5\u62c5\u62df\u62e2\u62e3\u62e5\u62e6\u62e7\u62e8\u62e9\u6302\u631a\u631b\u631c\u631d\u631e\u631f\u6320\u6321\u6322\u6323\u6324\u6325\u6326\u635e\u635f\u6361\u6362\u6363\u636e\u637b\u63b3\u63b4\u63b7\u63b8\u63ba\u63bc\u63f8\u63fd\u63ff\u6400\u6401\u6402\u6405\u643a\u6444\u6445\u6446\u6447\u6448\u644a\u6484\u6491\u64b5\u64b7\u64b8\u64ba\u64de\u6512\u654c\u655b\u6570\u658b\u6593\u6597\u65a9\u65ad\u65e0\u65e7\u65f6\u65f7\u65f8\u6619\u663c\u663d\u663e\u664b\u6652\u6653\u6654\u6655\u6656\u6682\u66a7\u672d\u672f\u6734\u673a\u6740\u6742\u6743\u6761\u6765\u6768\u6769\u6770\u6781\u6784\u679e\u67a2\u67a3\u67a5\u67a7\u67a8\u67aa\u67ab\u67ad\u67dc\u67e0\u67fd\u6800\u6805\u6807\u6808\u6809\u680a\u680b\u680c\u680e\u680f\u6811\u6816\u6837\u683e\u684a\u6860\u6861\u6862\u6863\u6864\u6865\u6866\u6867\u6868\u6869\u68a6\u68bc\u68be\u68c0\u68c2\u6901\u691f\u6920\u6924\u692d\u697c\u6984\u6987\u6988\u6989\u69da\u69db\u69df\u69e0\u6a2a\u6a2f\u6a31\u6a65\u6a71\u6a79\u6a7c\u6a90\u6aa9\u6b22\u6b24\u6b27\u6b7c\u6b81\u6b87\u6b8b\u6b92\u6b93\u6b9a\u6ba1\u6bb4\u6bc1\u6bc2\u6bd5\u6bd9\u6be1\u6bf5\u6c07\u6c14\u6c22\u6c29\u6c32\u6c47\u6c49\u6c61\u6c64\u6c79\u6c93\u6c9f\u6ca1\u6ca3\u6ca4\u6ca5\u6ca6\u6ca7\u6ca8\u6ca9\u6caa\u6cb5\u6cde\u6cea\u6cf6\u6cf7\u6cf8\u6cfa\u6cfb\u6cfc\u6cfd\u6cfe\u6d01\u6d12\u6d3c\u6d43\u6d45\u6d46\u6d47\u6d48\u6d49\u6d4a\u6d4b\u6d4d\u6d4e\u6d4f\u6d50\u6d51\u6d52\u6d53\u6d54\u6d55\u6d82\u6d8c\u6d9b\u6d9d\u6d9e\u6d9f\u6da0\u6da1\u6da2\u6da3\u6da4\u6da6\u6da7\u6da8\u6da9\u6dc0\u6e0a\u6e0c\u6e0d\u6e0e\u6e10\u6e11\u6e14\u6e16\u6e17\u6e29\u6e38\u6e7e\u6e7f\u6e83\u6e85\u6e86\u6e87\u6ed7\u6eda\u6ede\u6edf\u6ee0\u6ee1\u6ee2\u6ee4\u6ee5\u6ee6\u6ee8\u6ee9\u6eea\u6f24\u6f46\u6f47\u6f4b\u6f4d\u6f5c\u6f74\u6f9c\u6fd1\u6fd2\u704f\u706d\u706f\u7075\u707e\u707f\u7080\u7089\u7096\u709c\u709d\u70b9\u70bc\u70bd\u70c1\u70c2\u70c3\u70db\u70df\u70e6\u70e7\u70e8\u70e9\u70eb\u70ec\u70ed\u7115\u7116\u7118\u7145\u7173\u7198\u7231\u7237\u724d\u7266\u7275\u727a\u728a\u729f\u72b6\u72b7\u72b8\u72b9\u72c8\u72cd\u72dd\u72de\u72ec\u72ed\u72ee\u72ef\u72f0\u72f1\u72f2\u7303\u730e\u7315\u7321\u732a\u732b\u732c\u732e\u736d\u7391\u7399\u739a\u739b\u73ae\u73af\u73b0\u73b1\u73ba\u73c9\u73cf\u73d0\u73d1\u73f0\u73f2\u740e\u740f\u7410\u743c\u7476\u7477\u7487\u748e\u74d2\u74ee\u74ef\u7535\u753b\u7545\u7572\u7574\u7596\u7597\u759f\u75a0\u75a1\u75ac\u75ae\u75af\u75b1\u75b4\u75c8\u75c9\u75d2\u75d6\u75e8\u75ea\u75eb\u75f4\u7605\u7606\u7617\u7618\u762a\u762b\u763e\u763f\u765e\u7663\u766b\u766f\u7691\u76b1\u76b2\u76cf\u76d0\u76d1\u76d6\u76d7\u76d8\u770d\u7726\u772c\u7740\u7741\u7750\u7751\u7792\u77a9\u77eb\u77f6\u77fe\u77ff\u7800\u7801\u7816\u7817\u781a\u781c\u783a\u783b\u783e\u7840\u7841\u7845\u7855\u7856\u7857\u7859\u785a\u786e\u7877\u788d\u789b\u789c\u78b1\u78b9\u78d9\u793c\u794e\u7962\u796f\u7977\u7978\u7980\u7984\u7985\u79bb\u79c3\u79c6\u79cd\u79ef\u79f0\u79fd\u79fe\u7a06\u7a0e\u7a23\u7a33\u7a51\u7a77\u7a83\u7a8d\u7a91\u7a9c\u7a9d\u7aa5\u7aa6\u7aad\u7ad6\u7ade\u7b03\u7b0b\u7b14\u7b15\u7b3a\u7b3c\u7b3e\u7b51\u7b5a\u7b5b\u7b5c\u7b5d\u7b79\u7b7e\u7b80\u7b93\u7ba6\u7ba7\u7ba8\u7ba9\u7baa\u7bab\u7bd1\u7bd3\u7bee\u7bf1\u7c16\u7c41\u7c74\u7c7b\u7c7c\u7c9c\u7c9d\u7ca4\u7caa\u7cae\u7cc1\u7cc7\u7d27\u7d77\u7e9f\u7ea0\u7ea1\u7ea2\u7ea3\u7ea4\u7ea5\u7ea6\u7ea7\u7ea8\u7ea9\u7eaa\u7eab\u7eac\u7ead\u7eae\u7eaf\u7eb0\u7eb1\u7eb2\u7eb3\u7eb4\u7eb5\u7eb6\u7eb7\u7eb8\u7eb9\u7eba\u7ebb\u7ebc\u7ebd\u7ebe\u7ebf\u7ec0\u7ec1\u7ec2\u7ec3\u7ec4\u7ec5\u7ec6\u7ec7\u7ec8\u7ec9\u7eca\u7ecb\u7ecc\u7ecd\u7ece\u7ecf\u7ed0\u7ed1\u7ed2\u7ed3\u7ed4\u7ed5\u7ed6\u7ed7\u7ed8\u7ed9\u7eda\u7edb\u7edc\u7edd\u7ede\u7edf\u7ee0\u7ee1\u7ee2\u7ee3\u7ee4\u7ee5\u7ee6\u7ee7\u7ee8\u7ee9\u7eea\u7eeb\u7eec\u7eed\u7eee\u7eef\u7ef0\u7ef1\u7ef2\u7ef3\u7ef4\u7ef5\u7ef6\u7ef7\u7ef8\u7ef9\u7efa\u7efb\u7efc\u7efd\u7efe\u7eff\u7f00\u7f01\u7f02\u7f03\u7f04\u7f05\u7f06\u7f07\u7f08\u7f09\u7f0a\u7f0b\u7f0c\u7f0d\u7f0e\u7f0f\u7f10\u7f11\u7f12\u7f13\u7f14\u7f15\u7f16\u7f17\u7f18\u7f19\u7f1a\u7f1b\u7f1c\u7f1d\u7f1e\u7f1f\u7f20\u7f21\u7f22\u7f23\u7f24\u7f25\u7f26\u7f27\u7f28\u7f29\u7f2a\u7f2b\u7f2c\u7f2d\u7f2e\u7f2f\u7f30\u7f31\u7f32\u7f33\u7f34\u7f35\u7f42\u7f51\u7f57\u7f5a\u7f62\u7f74\u7f81\u7f9f\u7fa1\u7fd8\u7fd9\u7fda\u8022\u8027\u8038\u803b\u8042\u804b\u804c\u804d\u8054\u8069\u806a\u8083\u80a0\u80a4\u80b7\u80be\u80bf\u80c0\u80c1\u80c6\u80dc\u80e7\u80e8\u80ea\u80eb\u80f6\u8109\u810d\u810f\u8110\u8111\u8113\u8114\u811a\u8131\u8136\u8138\u814a\u814c\u8158\u816d\u817b\u817c\u817d\u817e\u8191\u81dc\u8206\u8223\u8230\u8231\u823b\u8270\u8273\u8279\u827a\u8282\u8288\u8297\u829c\u82a6\u82c1\u82c7\u82c8\u82cb\u82cc\u82cd\u82ce\u82cf\u82d8\u82f9\u830e\u830f\u8311\u8314\u8315\u8327\u8346\u8350\u8359\u835a\u835b\u835c\u835e\u835f\u8360\u8361\u8363\u8364\u8365\u8366\u8367\u8368\u8369\u836a\u836b\u836c\u836d\u836e\u836f\u8385\u839c\u83b1\u83b2\u83b3\u83b4\u83b6\u83b7\u83b8\u83b9\u83ba\u83bc\u841a\u841d\u8424\u8425\u8426\u8427\u8428\u8471\u8487\u8489\u848b\u848c\u84dd\u84df\u84e0\u84e3\u84e5\u84e6\u8537\u8539\u853a\u853c\u8572\u8574\u85ae\u85c1\u85d3\u864f\u8651\u865a\u866b\u866c\u866e\u867d\u867e\u867f\u8680\u8681\u8682\u8695\u869d\u86ac\u86ca\u86ce\u86cf\u86ee\u86f0\u86f1\u86f2\u86f3\u86f4\u8715\u8717\u8721\u8747\u8748\u8749\u874e\u877c\u877e\u8780\u87a8\u87cf\u8845\u8854\u8865\u886c\u886e\u8884\u8885\u8886\u889c\u88ad\u88af\u88c5\u88c6\u88c8\u88e2\u88e3\u88e4\u88e5\u891b\u8934\u8941\u8955\u89c1\u89c2\u89c3\u89c4\u89c5\u89c6\u89c7\u89c8\u89c9\u89ca\u89cb\u89cc\u89cd\u89ce\u89cf\u89d0\u89d1\u89de\u89e6\u89ef\u8a5f\u8a89\u8a8a\u8ba0\u8ba1\u8ba2\u8ba3\u8ba4\u8ba5\u8ba6\u8ba7\u8ba8\u8ba9\u8baa\u8bab\u8bad\u8bae\u8baf\u8bb0\u8bb1\u8bb2\u8bb3\u8bb4\u8bb5\u8bb6\u8bb7\u8bb8\u8bb9\u8bba\u8bbb\u8bbc\u8bbd\u8bbe\u8bbf\u8bc0\u8bc1\u8bc2\u8bc3\u8bc4\u8bc5\u8bc6\u8bc7\u8bc8\u8bc9\u8bca\u8bcb\u8bcc\u8bcd\u8bce\u8bcf\u8bd0\u8bd1\u8bd2\u8bd3\u8bd4\u8bd5\u8bd6\u8bd7\u8bd8\u8bd9\u8bda\u8bdb\u8bdc\u8bdd\u8bde\u8bdf\u8be0\u8be1\u8be2\u8be3\u8be4\u8be5\u8be6\u8be7\u8be8\u8be9\u8bea\u8beb\u8bec\u8bed\u8bee\u8bef\u8bf0\u8bf1\u8bf2\u8bf3\u8bf4\u8bf5\u8bf6\u8bf7\u8bf8\u8bf9\u8bfa\u8bfb\u8bfc\u8bfd\u8bfe\u8bff\u8c00\u8c01\u8c02\u8c03\u8c04\u8c05\u8c06\u8c07\u8c08\u8c0a\u8c0b\u8c0c\u8c0d\u8c0e\u8c0f\u8c10\u8c11\u8c12\u8c13\u8c14\u8c15\u8c16\u8c17\u8c18\u8c19\u8c1a\u8c1b\u8c1c\u8c1d\u8c1e\u8c1f\u8c20\u8c21\u8c22\u8c23\u8c24\u8c25\u8c26\u8c27\u8c28\u8c29\u8c2a\u8c2b\u8c2c\u8c2d\u8c2e\u8c2f\u8c30\u8c31\u8c32\u8c33\u8c34\u8c35\u8c36\u8c37\u8c6e\u8d1d\u8d1e\u8d1f\u8d20\u8d21\u8d22\u8d23\u8d24\u8d25\u8d26\u8d27\u8d28\u8d29\u8d2a\u8d2b\u8d2c\u8d2d\u8d2e\u8d2f\u8d30\u8d31\u8d32\u8d33\u8d34\u8d35\u8d36\u8d37\u8d38\u8d39\u8d3a\u8d3b\u8d3c\u8d3d\u8d3e\u8d3f\u8d40\u8d41\u8d42\u8d43\u8d44\u8d45\u8d46\u8d47\u8d48\u8d49\u8d4a\u8d4b\u8d4c\u8d4d\u8d4e\u8d4f\u8d50\u8d51\u8d52\u8d53\u8d54\u8d55\u8d56\u8d57\u8d58\u8d59\u8d5a\u8d5b\u8d5c\u8d5d\u8d5e\u8d5f\u8d60\u8d61\u8d62\u8d63\u8d6a\u8d75\u8d76\u8d8b\u8db1\u8db8\u8dc3\u8dc4\u8dd6\u8dde\u8df5\u8df6\u8df7\u8df8\u8df9\u8dfb\u8e0a\u8e0c\u8e2a\u8e2c\u8e2f\u8e51\u8e52\u8e70\u8e7f\u8e8f\u8e9c\u8eaf\u8f66\u8f67\u8f68\u8f69\u8f6a\u8f6b\u8f6c\u8f6d\u8f6e\u8f6f\u8f70\u8f71\u8f72\u8f73\u8f74\u8f75\u8f76\u8f77\u8f78\u8f79\u8f7a\u8f7b\u8f7c\u8f7d\u8f7e\u8f7f\u8f80\u8f81\u8f82\u8f83\u8f84\u8f85\u8f86\u8f87\u8f88\u8f89\u8f8a\u8f8b\u8f8c\u8f8d\u8f8e\u8f8f\u8f90\u8f91\u8f92\u8f93\u8f94\u8f95\u8f96\u8f97\u8f98\u8f99\u8f9a\u8f9e\u8fa9\u8fab\u8fb9\u8fbd\u8fbe\u8fc1\u8fc7\u8fc8\u8fd0\u8fd8\u8fd9\u8fdb\u8fdc\u8fdd\u8fde\u8fdf\u8fe9\u8ff3\u8ff9\u9002\u9009\u900a\u9012\u9026\u903b\u9057\u9065\u9093\u909d\u90ac\u90ae\u90b9\u90ba\u90bb\u90c1\u90c4\u90cf\u90d0\u90d1\u90d3\u90e6\u90e7\u90f8\u915d\u9166\u9171\u917d\u917e\u917f\u91ca\u91cc\u9245\u9274\u92ae\u933e\u9486\u9487\u9488\u9489\u948a\u948b\u948c\u948d\u948e\u948f\u9490\u9491\u9492\u9493\u9494\u9495\u9496\u9497\u9498\u9499\u949a\u949b\u949d\u949e\u949f\u94a0\u94a1\u94a2\u94a3\u94a4\u94a5\u94a6\u94a7\u94a8\u94a9\u94aa\u94ab\u94ac\u94ad\u94ae\u94af\u94b0\u94b1\u94b2\u94b3\u94b4\u94b5\u94b6\u94b7\u94b8\u94b9\u94ba\u94bb\u94bc\u94bd\u94be\u94bf\u94c0\u94c1\u94c2\u94c3\u94c4\u94c5\u94c6\u94c8\u94c9\u94ca\u94cb\u94cd\u94ce\u94cf\u94d0\u94d1\u94d2\u94d5\u94d7\u94d8\u94d9\u94da\u94db\u94dc\u94dd\u94de\u94df\u94e0\u94e1\u94e2\u94e3\u94e4\u94e5\u94e6\u94e7\u94e8\u94ea\u94eb\u94ec\u94ed\u94ee\u94ef\u94f0\u94f1\u94f2\u94f3\u94f4\u94f5\u94f6\u94f7\u94f8\u94f9\u94fa\u94fb\u94fc\u94fd\u94fe\u94ff\u9500\u9501\u9502\u9503\u9504\u9505\u9506\u9507\u9508\u9509\u950a\u950b\u950c\u950d\u950e\u950f\u9510\u9511\u9512\u9513\u9514\u9515\u9516\u9517\u9519\u951a\u951c\u951e\u951f\u9520\u9521\u9522\u9523\u9524\u9525\u9526\u9528\u9529\u952b\u952c\u952d\u952e\u952f\u9530\u9531\u9532\u9533\u9534\u9535\u9536\u9537\u9538\u9539\u953a\u953b\u953c\u953d\u953e\u953f\u9540\u9541\u9542\u9543\u9546\u9547\u9548\u9549\u954a\u954c\u954d\u954e\u954f\u9550\u9551\u9552\u9555\u9556\u9557\u9559\u955a\u955b\u955c\u955d\u955e\u955f\u9560\u9561\u9562\u9563\u9564\u9565\u9566\u9567\u9568\u9569\u956a\u956b\u956c\u956d\u956e\u956f\u9570\u9571\u9572\u9573\u9574\u9576\u957f\u95e8\u95e9\u95ea\u95eb\u95ec\u95ed\u95ee\u95ef\u95f0\u95f1\u95f2\u95f3\u95f4\u95f5\u95f6\u95f7\u95f8\u95f9\u95fa\u95fb\u95fc\u95fd\u95fe\u95ff\u9600\u9601\u9602\u9603\u9604\u9605\u9606\u9607\u9608\u9609\u960a\u960b\u960c\u960d\u960e\u960f\u9610\u9611\u9612\u9613\u9614\u9615\u9616\u9617\u9618\u9619\u961a\u961b\u961f\u9633\u9634\u9635\u9636\u9645\u9646\u9647\u9648\u9649\u9655\u9667\u9668\u9669\u968f\u9690\u96b6\u96bd\u96be\u96cf\u96e0\u96f3\u96fe\u9701\u9709\u972d\u9753\u9759\u9765\u9791\u9792\u97af\u97b4\u97e6\u97e7\u97e8\u97e9\u97ea\u97eb\u97ec\u97f5\u9875\u9876\u9877\u9878\u9879\u987a\u987b\u987c\u987d\u987e\u987f\u9880\u9881\u9882\u9883\u9884\u9885\u9886\u9887\u9888\u9889\u988a\u988b\u988c\u988d\u988e\u988f\u9890\u9891\u9892\u9893\u9894\u9895\u9896\u9897\u9898\u9899\u989a\u989b\u989c\u989d\u989e\u989f\u98a0\u98a1\u98a2\u98a3\u98a4\u98a5\u98a6\u98a7\u98ce\u98cf\u98d0\u98d1\u98d2\u98d3\u98d4\u98d5\u98d6\u98d7\u98d8\u98d9\u98da\u98de\u98e8\u990d\u9964\u9965\u9966\u9967\u9968\u9969\u996a\u996b\u996c\u996d\u996e\u996f\u9970\u9971\u9972\u9973\u9974\u9975\u9976\u9977\u9978\u9979\u997a\u997b\u997c\u997d\u997e\u997f\u9980\u9981\u9982\u9983\u9984\u9985\u9986\u9987\u9988\u9989\u998a\u998b\u998c\u998d\u998e\u998f\u9990\u9991\u9992\u9993\u9994\u9995\u9a6c\u9a6d\u9a6e\u9a6f\u9a70\u9a71\u9a72\u9a73\u9a74\u9a75\u9a76\u9a77\u9a78\u9a79\u9a7a\u9a7b\u9a7c\u9a7d\u9a7e\u9a7f\u9a80\u9a81\u9a82\u9a83\u9a84\u9a85\u9a86\u9a87\u9a88\u9a89\u9a8a\u9a8b\u9a8c\u9a8d\u9a8e\u9a8f\u9a90\u9a91\u9a92\u9a93\u9a94\u9a95\u9a96\u9a97\u9a98\u9a99\u9a9a\u9a9b\u9a9c\u9a9d\u9a9e\u9a9f\u9aa0\u9aa1\u9aa2\u9aa3\u9aa4\u9aa5\u9aa6\u9aa7\u9ac5\u9acb\u9acc\u9b13\u9b47\u9b49\u9c7c\u9c7d\u9c7e\u9c7f\u9c80\u9c81\u9c82\u9c84\u9c85\u9c86\u9c87\u9c88\u9c89\u9c8a\u9c8b\u9c8c\u9c8d\u9c8e\u9c8f\u9c90\u9c91\u9c92\u9c93\u9c94\u9c95\u9c96\u9c97\u9c98\u9c99\u9c9a\u9c9b\u9c9c\u9c9d\u9c9e\u9c9f\u9ca0\u9ca1\u9ca2\u9ca3\u9ca4\u9ca5\u9ca6\u9ca7\u9ca8\u9ca9\u9caa\u9cab\u9cac\u9cad\u9cae\u9caf\u9cb0\u9cb1\u9cb2\u9cb3\u9cb4\u9cb5\u9cb6\u9cb7\u9cb8\u9cb9\u9cba\u9cbb\u9cbc\u9cbd\u9cbe\u9cbf\u9cc0\u9cc1\u9cc2\u9cc3\u9cc4\u9cc5\u9cc6\u9cc7\u9cc8\u9cc9\u9cca\u9ccb\u9ccc\u9ccd\u9cce\u9ccf\u9cd0\u9cd1\u9cd2\u9cd3\u9cd4\u9cd5\u9cd6\u9cd7\u9cd8\u9cd9\u9cdb\u9cdc\u9cdd\u9cde\u9cdf\u9ce0\u9ce1\u9ce2\u9ce3\u9e1f\u9e20\u9e21\u9e22\u9e23\u9e24\u9e25\u9e26\u9e27\u9e28\u9e29\u9e2a\u9e2b\u9e2c\u9e2d\u9e2e\u9e2f\u9e30\u9e31\u9e32\u9e33\u9e34\u9e35\u9e36\u9e37\u9e38\u9e39\u9e3a\u9e3b\u9e3c\u9e3d\u9e3e\u9e3f\u9e40\u9e41\u9e42\u9e43\u9e44\u9e45\u9e46\u9e47\u9e48\u9e49\u9e4a\u9e4b\u9e4c\u9e4d\u9e4e\u9e4f\u9e50\u9e51\u9e52\u9e53\u9e54\u9e55\u9e56\u9e57\u9e58\u9e5a\u9e5b\u9e5c\u9e5d\u9e5e\u9e5f\u9e60\u9e61\u9e62\u9e63\u9e64\u9e65\u9e66\u9e67\u9e68\u9e69\u9e6a\u9e6b\u9e6c\u9e6d\u9e6f\u9e70\u9e71\u9e72\u9e73\u9e74\u9e7e\u9ea6\u9eb8\u9ec4\u9ec9\u9ee1\u9ee9\u9eea\u9efe\u9f0b\u9f0c\u9f0d\u9f17\u9f39\u9f44\u9f50\u9f51\u9f7f\u9f80\u9f81\u9f82\u9f83\u9f84\u9f85\u9f86\u9f87\u9f88\u9f89\u9f8a\u9f8b\u9f8c\u9f99\u9f9a\u9f9b\u9f9f\u5fd7\u5236\u54a8\u53ea\u91cc\u7cfb\u8303\u677e\u6ca1\u5c1d\u5c1d\u95f9\u9762\u51c6\u949f\u522b\u95f2\u5e72\u5c3d\u810f\u62fc]/,
      },
      traditionalChinese: {
        fontInfo: {
          name: "NotoSansTC-Regular",
          displayName: "Noto Sans TC Regular",
          development: {
            id: "1c88b4d436b49b7e696660100bd00eca",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
          staging: {
            id: "1c88b4d436b49b7e696660100bd00eca",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
          production: {
            id: "6fed37347d48e4f39ce5d880d8f6f55f",
            imageExtension: ".png",
            fileExtension: ".otf",
          },
        },
        regex:
          /[\u842c\u8207\u919c\u5c08\u696d\u53e2\u6771\u7d72\u4e1f\u5169\u56b4\u55aa\u500b\u723f\u8c50\u81e8\u70ba\u9e97\u8209\u9ebc\u7fa9\u70cf\u6a02\u55ac\u7fd2\u9109\u66f8\u8cb7\u4e82\u722d\u65bc\u8667\u96f2\u4e99\u4e9e\u7522\u755d\u89aa\u893b\u56b2\u5104\u50c5\u5f9e\u4f96\u5009\u5100\u5011\u50f9\u773e\u512a\u5925\u6703\u50b4\u5098\u5049\u50b3\u50b7\u5000\u502b\u5096\u507d\u4f47\u9ad4\u9918\u50ad\u50c9\u4fe0\u4fb6\u50e5\u5075\u5074\u50d1\u5108\u5115\u5102\u4fc1\u5114\u513c\u5006\u5137\u5109\u50b5\u50be\u50af\u50c2\u50e8\u511f\u513b\u5110\u5132\u513a\u5152\u514c\u5157\u9ee8\u862d\u95dc\u8208\u8332\u990a\u7378\u56c5\u5167\u5ca1\u518a\u5beb\u8ecd\u8fb2\u585a\u99ae\u885d\u6c7a\u6cc1\u51cd\u6de8\u6dd2\u6dbc\u6de9\u6e1b\u6e4a\u51dc\u5e7e\u9cf3\u9ce7\u6191\u51f1\u64ca\u6c39\u947f\u82bb\u5283\u5289\u5247\u525b\u5275\u522a\u5225\u5257\u5244\u528a\u528c\u5274\u5291\u526e\u528d\u525d\u5287\u52f8\u8fa6\u52d9\u52f1\u52d5\u52f5\u52c1\u52de\u52e2\u52f3\u731b\u52e9\u52fb\u532d\u5331\u5340\u91ab\u83ef\u5354\u55ae\u8ce3\u76e7\u9e75\u81e5\u885b\u537b\u5df9\u5ee0\u5ef3\u66c6\u53b2\u58d3\u53ad\u5399\u5ec1\u5ec2\u53b4\u5ec8\u5eda\u5ec4\u5edd\u7e23\u53c3\u9749\u9746\u96d9\u767c\u8b8a\u6558\u758a\u8449\u865f\u6b4e\u5630\u7c72\u5f8c\u5687\u5442\u55ce\u551a\u5678\u807d\u555f\u5433\u5638\u56c8\u5614\u56a6\u5504\u54e1\u54bc\u55c6\u55da\u8a60\u54e2\u56a8\u5680\u565d\u5412\u5645\u9e79\u5471\u97ff\u555e\u5660\u5635\u55f6\u5666\u5629\u5672\u568c\u5665\u55b2\u561c\u55ca\u562e\u5562\u55e9\u5515\u559a\u547c\u5616\u55c7\u56c0\u9f67\u56c9\u563d\u562f\u5674\u560d\u56b3\u56c1\u55ec\u566f\u5653\u56b6\u56d1\u5695\u5288\u56c2\u8b14\u5718\u5712\u56ea\u570d\u5707\u570b\u5716\u5713\u8056\u58d9\u5834\u962a\u58de\u584a\u5805\u58c7\u58e2\u58e9\u5862\u58b3\u589c\u58df\u58df\u58da\u58d8\u58be\u5770\u580a\u588a\u57e1\u58b6\u58cb\u584f\u5816\u5852\u5864\u581d\u588a\u57b5\u5879\u58ae\u58ea\u7246\u58ef\u8072\u6bbc\u58fa\u58fc\u8655\u5099\u8907\u5920\u982d\u8a87\u593e\u596a\u5969\u5950\u596e\u734e\u5967\u599d\u5a66\u5abd\u5af5\u5ad7\u5aaf\u59cd\u8591\u5a41\u5a6d\u5b08\u5b0c\u5b4c\u5a1b\u5aa7\u5afb\u5aff\u5b30\u5b0b\u5b38\u5abc\u5b21\u5b2a\u5b19\u5b24\u5b6b\u5b78\u5b7f\u5be7\u5bf6\u5be6\u5bf5\u5be9\u61b2\u5bae\u5bec\u8cd3\u5be2\u5c0d\u5c0b\u5c0e\u58fd\u5c07\u723e\u5875\u582f\u5c37\u5c4d\u76e1\u5c64\u5c6d\u5c5c\u5c46\u5c6c\u5c62\u5c68\u5dbc\u6b72\u8c48\u5d87\u5d17\u5cf4\u5db4\u5d50\u5cf6\u5dba\u5dbd\u5d20\u5dcb\u5da8\u5da7\u5cfd\u5da2\u5da0\u5d22\u5dd2\u5d97\u5d0d\u5dae\u5d84\u5db8\u5d94\u5d33\u5d81\u810a\u5dd4\u978f\u5df0\u5e63\u5e25\u5e2b\u5e43\u5e33\u7c3e\u5e5f\u5e36\u5e40\u5e6b\u5e6c\u5e58\u5e57\u51aa\u8946\u5e79\u4e26\u5ee3\u838a\u6176\u5eec\u5ee1\u5eab\u61c9\u5edf\u9f90\u5ee2\u5ece\u5ee9\u958b\u7570\u68c4\u5f35\u5f4c\u5f33\u5f4e\u5f48\u5f37\u6b78\u7576\u9304\u5f60\u5f65\u5fb9\u5f91\u5fa0\u79a6\u61b6\u61fa\u6182\u613e\u61f7\u614b\u616b\u61ae\u616a\u60b5\u6134\u6190\u7e3d\u61df\u61cc\u6200\u61c7\u60e1\u615f\u61e8\u6137\u60fb\u60f1\u60f2\u6085\u6128\u61f8\u6173\u61ab\u9a5a\u61fc\u6158\u61f2\u618a\u611c\u615a\u619a\u6163\u6e63\u614d\u61a4\u6192\u9858\u61fe\u6196\u6035\u61e3\u61f6\u61cd\u6207\u6214\u6232\u6227\u6230\u6229\u6236\u7d2e\u64b2\u6261\u57f7\u64f4\u636b\u6383\u63da\u64fe\u64ab\u62cb\u6476\u6473\u6384\u6436\u8b77\u5831\u64d4\u64ec\u650f\u63c0\u64c1\u6514\u64f0\u64a5\u64c7\u639b\u646f\u6523\u6397\u64be\u64bb\u633e\u6493\u64cb\u649f\u6399\u64e0\u63ee\u648f\u6488\u640d\u64bf\u63db\u6417\u64da\u649a\u64c4\u6451\u64f2\u64a3\u647b\u645c\u6463\u652c\u64b3\u6519\u64f1\u645f\u652a\u651c\u651d\u6504\u64fa\u6416\u64ef\u6524\u6516\u6490\u6506\u64f7\u64fc\u651b\u64fb\u6522\u6575\u6582\u6578\u9f4b\u6595\u9b25\u65ac\u65b7\u7121\u820a\u6642\u66e0\u6698\u66c7\u665d\u66e8\u986f\u6649\u66ec\u66c9\u66c4\u6688\u6689\u66ab\u66d6\u5284\u8853\u6a38\u6a5f\u6bba\u96dc\u6b0a\u689d\u4f86\u694a\u69aa\u5091\u6975\u69cb\u6a05\u6a1e\u68d7\u6aea\u6898\u68d6\u69cd\u6953\u689f\u6ac3\u6ab8\u6a89\u6894\u67f5\u6a19\u68e7\u6adb\u6af3\u68df\u6ae8\u6adf\u6b04\u6a39\u68f2\u6a23\u6b12\u68ec\u690f\u6a48\u6968\u6a94\u69bf\u6a4b\u6a3a\u6a9c\u69f3\u6a01\u5922\u6aae\u68f6\u6aa2\u6b1e\u69e8\u6add\u69e7\u6b0f\u6a62\u6a13\u6b16\u6aec\u6ada\u6af8\u6a9f\u6abb\u6ab3\u6ae7\u6a6b\u6aa3\u6afb\u6aeb\u6ae5\u6ad3\u6ade\u7c37\u6a81\u6b61\u6b5f\u6b50\u6bb2\u6b7f\u6ba4\u6b98\u6b9e\u6bae\u6bab\u6baf\u6bc6\u6bc0\u8f42\u7562\u6583\u6c08\u6bff\u6c0c\u6c23\u6c2b\u6c2c\u6c33\u5f59\u6f22\u6c59\u6e6f\u6d36\u905d\u6e9d\u6c92\u7043\u6f1a\u701d\u6dea\u6ec4\u6e22\u6e88\u6eec\u6fd4\u6fd8\u6dda\u6fa9\u7027\u7018\u6ffc\u7009\u6f51\u6fa4\u6d87\u6f54\u7051\u7aaa\u6d79\u6dfa\u6f3f\u6f86\u6e5e\u6eae\u6fc1\u6e2c\u6fae\u6fdf\u700f\u6efb\u6e3e\u6ef8\u6fc3\u6f6f\u6fdc\u5857\u6e67\u6fe4\u6f87\u6df6\u6f23\u6f7f\u6e26\u6eb3\u6e19\u6ecc\u6f64\u6f97\u6f32\u6f80\u6fb1\u6df5\u6de5\u6f2c\u7006\u6f38\u6fa0\u6f01\u700b\u6ef2\u6eab\u904a\u7063\u6fd5\u6f70\u6ffa\u6f35\u6f0a\u6f77\u6efe\u6eef\u7069\u7044\u6eff\u7005\u6ffe\u6feb\u7064\u6ff1\u7058\u6fa6\u6feb\u7020\u701f\u7032\u6ff0\u6f5b\u7026\u703e\u7028\u7015\u705d\u6ec5\u71c8\u9748\u707d\u71e6\u716c\u7210\u71c9\u7152\u7197\u9ede\u7149\u71be\u720d\u721b\u70f4\u71ed\u7159\u7169\u71d2\u71c1\u71f4\u71d9\u71fc\u71b1\u7165\u71dc\u71fe\u7146\u7cca\u6e9c\u611b\u723a\u7258\u729b\u727d\u72a7\u72a2\u5f37\u72c0\u7377\u7341\u7336\u72fd\u9e85\u736e\u7370\u7368\u72f9\u7345\u736a\u7319\u7344\u733b\u736b\u7375\u737c\u7380\u8c6c\u8c93\u875f\u737b\u737a\u74a3\u74b5\u7452\u746a\u744b\u74b0\u73fe\u7472\u74bd\u7449\u73a8\u743a\u74cf\u74ab\u743f\u74a1\u7489\u7463\u74ca\u7464\u74a6\u74bf\u74d4\u74da\u7515\u750c\u96fb\u756b\u66a2\u4f58\u7587\u7664\u7642\u7627\u7658\u760d\u9b01\u7621\u760b\u76b0\u5c59\u7670\u75d9\u7662\u7602\u7646\u7613\u7647\u7661\u7649\u762e\u761e\u763a\u765f\u7671\u766e\u766d\u7669\u766c\u7672\u81d2\u769a\u76ba\u76b8\u76de\u9e7d\u76e3\u84cb\u76dc\u76e4\u7798\u7725\u77d3\u8457\u775c\u775e\u77bc\u779e\u77da\u77ef\u78ef\u792c\u7926\u78ad\u78bc\u78da\u7868\u786f\u78b8\u792a\u7931\u792b\u790e\u785c\u77fd\u78a9\u7864\u78fd\u78d1\u7904\u78ba\u9e7c\u7919\u78e7\u78e3\u583f\u955f\u6efe\u79ae\u7995\u79b0\u798e\u79b1\u798d\u7a1f\u797f\u79aa\u96e2\u79bf\u7a08\u7a2e\u7a4d\u7a31\u7a62\u7a60\u7a6d\u7a05\u7a4c\u7a69\u7a61\u7aae\u7aca\u7ac5\u7aaf\u7ac4\u7aa9\u7aba\u7ac7\u7ab6\u8c4e\u7af6\u7be4\u7b4d\u7b46\u7b67\u7b8b\u7c60\u7c69\u7bc9\u7bf3\u7be9\u7c39\u7b8f\u7c4c\u7c3d\u7c21\u7c59\u7c00\u7bcb\u7c5c\u7c6e\u7c1e\u7c2b\u7c23\u7c0d\u7c43\u7c6c\u7c6a\u7c5f\u7cf4\u985e\u79c8\u7cf6\u7cf2\u7cb5\u7cde\u7ce7\u7cdd\u9931\u7dca\u7e36\u7cf8\u7cfe\u7d06\u7d05\u7d02\u7e96\u7d07\u7d04\u7d1a\u7d08\u7e8a\u7d00\u7d09\u7def\u7d1c\u7d18\u7d14\u7d15\u7d17\u7db1\u7d0d\u7d1d\u7e31\u7db8\u7d1b\u7d19\u7d0b\u7d21\u7d35\u7d16\u7d10\u7d13\u7dda\u7d3a\u7d4f\u7d31\u7df4\u7d44\u7d33\u7d30\u7e54\u7d42\u7e10\u7d46\u7d3c\u7d40\u7d39\u7e79\u7d93\u7d3f\u7d81\u7d68\u7d50\u7d5d\u7e5e\u7d70\u7d4e\u7e6a\u7d66\u7d62\u7d73\u7d61\u7d55\u7d5e\u7d71\u7d86\u7d83\u7d79\u7e61\u7d8c\u7d8f\u7d5b\u7e7c\u7d88\u7e3e\u7dd2\u7dbe\u7dd3\u7e8c\u7dba\u7dcb\u7dbd\u7dd4\u7dc4\u7e69\u7dad\u7dbf\u7dac\u7e43\u7da2\u7daf\u7db9\u7da3\u7d9c\u7dbb\u7db0\u7da0\u7db4\u7dc7\u7dd9\u7dd7\u7dd8\u7dec\u7e9c\u7df9\u7df2\u7ddd\u7e15\u7e62\u7de6\u7d9e\u7dde\u7df6\u7dda\u7df1\u7e0b\u7de9\u7de0\u7e37\u7de8\u7de1\u7de3\u7e09\u7e1b\u7e1f\u7e1d\u7e2b\u7e17\u7e1e\u7e8f\u7e2d\u7e0a\u7e11\u7e7d\u7e39\u7e35\u7e32\u7e93\u7e2e\u7e46\u7e45\u7e88\u7e5a\u7e55\u7e52\u97c1\u7e7e\u7e70\u7e6f\u7e73\u7e98\u7f4c\u7db2\u7f85\u7f70\u7f77\u7f86\u7f88\u7fa5\u7fa8\u7ff9\u7ffd\u7fec\u802e\u802c\u8073\u6065\u8076\u807e\u8077\u8079\u806f\u8075\u8070\u8085\u8178\u819a\u8181\u814e\u816b\u8139\u8105\u81bd\u52dd\u6727\u8156\u81da\u811b\u81a0\u8108\u81be\u9ad2\u81cd\u8166\u81bf\u81e0\u8173\u812b\u8161\u81c9\u81d8\u9183\u8195\u9f76\u81a9\u9766\u8183\u9a30\u81cf\u81e2\u8f3f\u8264\u8266\u8259\u826b\u8271\u8c54\u8278\u85dd\u7bc0\u7f8b\u858c\u856a\u8606\u84ef\u8466\u85f6\u83a7\u8407\u84bc\u82e7\u8607\u6abe\u860b\u8396\u8622\u8526\u584b\u7162\u7e6d\u834a\u85a6\u8598\u83a2\u8558\u84fd\u854e\u8588\u85ba\u8569\u69ae\u8477\u6ece\u7296\u7192\u8541\u85ce\u84c0\u852d\u8552\u8452\u8464\u85e5\u849e\u84e7\u840a\u84ee\u8494\u8435\u859f\u7372\u8555\u7469\u9daf\u84f4\u8600\u863f\u87a2\u71df\u7e08\u856d\u85a9\u8525\u8546\u8562\u8523\u851e\u85cd\u858a\u863a\u8577\u93a3\u9a40\u8594\u861e\u85fa\u85f9\u8604\u860a\u85ea\u69c1\u861a\u865c\u616e\u865b\u87f2\u866f\u87e3\u96d6\u8766\u8806\u8755\u87fb\u879e\u8836\u8814\u8706\u8831\u8823\u87f6\u883b\u87c4\u86fa\u87ef\u8784\u8810\u86fb\u8778\u881f\u8805\u87c8\u87ec\u880d\u87bb\u8811\u87bf\u87ce\u8828\u91c1\u929c\u88dc\u896f\u889e\u8956\u5acb\u8918\u896a\u8972\u894f\u88dd\u8960\u890c\u8933\u895d\u8932\u8947\u8938\u8964\u7e48\u8974\u898b\u89c0\u898e\u898f\u8993\u8996\u8998\u89bd\u89ba\u89ac\u89a1\u89bf\u89a5\u89a6\u89af\u89b2\u89b7\u89f4\u89f8\u89f6\u8b8b\u8b7d\u8b04\u8a01\u8a08\u8a02\u8a03\u8a8d\u8b4f\u8a10\u8a0c\u8a0e\u8b93\u8a15\u8a16\u8a13\u8b70\u8a0a\u8a18\u8a12\u8b1b\u8af1\u8b33\u8a4e\u8a1d\u8a25\u8a31\u8a1b\u8ad6\u8a29\u8a1f\u8af7\u8a2d\u8a2a\u8a23\u8b49\u8a41\u8a36\u8a55\u8a5b\u8b58\u8a57\u8a50\u8a34\u8a3a\u8a46\u8b05\u8a5e\u8a58\u8a54\u8a56\u8b6f\u8a52\u8a86\u8a84\u8a66\u8a7f\u8a69\u8a70\u8a7c\u8aa0\u8a85\u8a75\u8a71\u8a95\u8a6c\u8a6e\u8a6d\u8a62\u8a63\u8acd\u8a72\u8a73\u8a6b\u8ae2\u8a61\u8b78\u8aa1\u8aa3\u8a9e\u8a9a\u8aa4\u8aa5\u8a98\u8aa8\u8a91\u8aaa\u8aa6\u8a92\u8acb\u8af8\u8acf\u8afe\u8b80\u8ad1\u8ab9\u8ab2\u8ac9\u8adb\u8ab0\u8ad7\u8abf\u8ac2\u8ad2\u8ac4\u8ab6\u8ac7\u8abc\u8b00\u8af6\u8adc\u8b0a\u8aeb\u8ae7\u8b14\u8b01\u8b02\u8ae4\u8aed\u8afc\u8b92\u8aee\u8af3\u8afa\u8ae6\u8b0e\u8ade\u8add\u8b28\u8b9c\u8b16\u8b1d\u8b20\u8b17\u8ae1\u8b19\u8b10\u8b39\u8b3e\u8b2b\u8b7e\u8b2c\u8b5a\u8b56\u8b59\u8b95\u8b5c\u8b4e\u8b9e\u8b74\u8b6b\u8b96\u7a40\u8c76\u8c9d\u8c9e\u8ca0\u8c9f\u8ca2\u8ca1\u8cac\u8ce2\u6557\u8cec\u8ca8\u8cea\u8ca9\u8caa\u8ca7\u8cb6\u8cfc\u8caf\u8cab\u8cb3\u8ce4\u8cc1\u8cb0\u8cbc\u8cb4\u8cba\u8cb8\u8cbf\u8cbb\u8cc0\u8cbd\u8cca\u8d04\u8cc8\u8cc4\u8cb2\u8cc3\u8cc2\u8d13\u8cc7\u8cc5\u8d10\u8cd5\u8cd1\u8cda\u8cd2\u8ce6\u8ced\u9f4e\u8d16\u8cde\u8cdc\u8d14\u8cd9\u8ce1\u8ce0\u8ce7\u8cf4\u8cf5\u8d05\u8cfb\u8cfa\u8cfd\u8cfe\u8d17\u8b9a\u8d07\u8d08\u8d0d\u8d0f\u8d1b\u8d6c\u8d99\u8d95\u8da8\u8db2\u8e89\u8e8d\u8e4c\u8e60\u8e92\u8e10\u8e82\u8e7a\u8e55\u8e9a\u8e8b\u8e34\u8e8a\u8e64\u8e93\u8e91\u8ea1\u8e63\u8e95\u8ea5\u8eaa\u8ea6\u8ec0\u8eca\u8ecb\u8ecc\u8ed2\u8ed1\u8ed4\u8f49\u8edb\u8f2a\u8edf\u8f5f\u8ef2\u8efb\u8f64\u8ef8\u8ef9\u8efc\u8ee4\u8eeb\u8f62\u8efa\u8f15\u8efe\u8f09\u8f0a\u8f4e\u8f08\u8f07\u8f05\u8f03\u8f12\u8f14\u8f1b\u8f26\u8f29\u8f1d\u8f25\u8f1e\u8f2c\u8f1f\u8f1c\u8f33\u8f3b\u8f2f\u8f40\u8f38\u8f61\u8f45\u8f44\u8f3e\u8f46\u8f4d\u8f54\u8fad\u8faf\u8fae\u908a\u907c\u9054\u9077\u904e\u9081\u904b\u9084\u9019\u9032\u9060\u9055\u9023\u9072\u9087\u9015\u8de1\u9069\u9078\u905c\u905e\u9090\u908f\u907a\u9059\u9127\u913a\u9114\u90f5\u9112\u9134\u9130\u9b31\u90e4\u90df\u9136\u912d\u9106\u9148\u9116\u9132\u919e\u91b1\u91ac\u91c5\u91c3\u91c0\u91cb\u88cf\u949c\u9452\u947e\u93e8\u91d3\u91d4\u91dd\u91d8\u91d7\u91d9\u91d5\u91f7\u91fa\u91e7\u91e4\u9212\u91e9\u91e3\u9346\u91f9\u935a\u91f5\u9203\u9223\u9208\u9226\u920d\u9214\u937e\u9209\u92c7\u92fc\u9211\u9210\u9470\u6b3d\u921e\u93a2\u9264\u9227\u9201\u9225\u9204\u9215\u9200\u923a\u9322\u9266\u9257\u9237\u7f3d\u9233\u9255\u923d\u9238\u925e\u947d\u926c\u926d\u9240\u923f\u923e\u9435\u9251\u9234\u9460\u925b\u925a\u9230\u9249\u9248\u924d\u9239\u9438\u9276\u92ac\u92a0\u927a\u92aa\u92cf\u92e3\u9403\u928d\u943a\u9285\u92c1\u92b1\u92a6\u93a7\u9358\u9296\u9291\u92cc\u92a9\u929b\u93f5\u9293\u927f\u929a\u927b\u9298\u931a\u92ab\u9278\u92a5\u93df\u9283\u940b\u92a8\u9280\u92a3\u9444\u9412\u92ea\u92d9\u9338\u92f1\u93c8\u93d7\u92b7\u9396\u92f0\u92e5\u92e4\u934b\u92ef\u92e8\u93fd\u92bc\u92dd\u92d2\u92c5\u92f6\u9426\u9427\u92b3\u92bb\u92c3\u92df\u92e6\u9312\u9306\u937a\u932f\u9328\u9321\u9301\u9315\u9329\u932b\u932e\u947c\u9318\u9310\u9326\u9341\u9308\u9307\u931f\u9320\u9375\u92f8\u9333\u9319\u9365\u9348\u9347\u93d8\u9376\u9354\u9364\u936c\u937e\u935b\u93aa\u9360\u9370\u9384\u934d\u9382\u93e4\u93a1\u93cc\u93ae\u939b\u9398\u9477\u942b\u93b3\u93bf\u93a6\u93ac\u938a\u93b0\u9394\u93e2\u93dc\u93cd\u93f0\u93de\u93e1\u93d1\u93c3\u93c7\u93d0\u9414\u9481\u9410\u93f7\u9465\u9413\u946d\u9420\u9479\u93f9\u9419\u944a\u9433\u9436\u9432\u942e\u943f\u9454\u9463\u945e\u9472\u9577\u9580\u9582\u9583\u9586\u9588\u9589\u554f\u95d6\u958f\u95c8\u9591\u958e\u9593\u9594\u958c\u60b6\u9598\u9b27\u95a8\u805e\u95e5\u95a9\u95ad\u95d3\u95a5\u95a3\u95a1\u95ab\u9b2e\u95b1\u95ac\u95cd\u95be\u95b9\u95b6\u9b29\u95bf\u95bd\u95bb\u95bc\u95e1\u95cc\u95c3\u95e0\u95ca\u95cb\u95d4\u95d0\u95d2\u95d5\u95de\u95e4\u968a\u967d\u9670\u9663\u968e\u969b\u9678\u96b4\u9673\u9658\u965d\u9689\u9695\u96aa\u96a8\u96b1\u96b8\u96cb\u96e3\u96db\u8b8e\u9742\u9727\u973d\u9ef4\u9744\u975a\u975c\u9768\u97c3\u97bd\u97c9\u97dd\u97cb\u97cc\u97cd\u97d3\u97d9\u97de\u97dc\u97fb\u9801\u9802\u9803\u9807\u9805\u9806\u9808\u980a\u9811\u9867\u9813\u980e\u9812\u980c\u980f\u9810\u9871\u9818\u9817\u9838\u9821\u9830\u9832\u981c\u6f41\u71b2\u9826\u9824\u983b\u982e\u9839\u9837\u9834\u7a4e\u9846\u984c\u9852\u984e\u9853\u984f\u984d\u9873\u9862\u985b\u9859\u9865\u7e87\u986b\u986c\u9870\u9874\u98a8\u98ba\u98ad\u98ae\u98af\u98b6\u98b8\u98bc\u98bb\u98c0\u98c4\u98c6\u98c6\u98db\u9957\u995c\u98e3\u9951\u98e5\u9933\u98e9\u993c\u98ea\u98eb\u98ed\u98ef\u98f2\u991e\u98fe\u98fd\u98fc\u98ff\u98f4\u990c\u9952\u9909\u9904\u990e\u9903\u990f\u9905\u9911\u9916\u9913\u9918\u9912\u9915\u991c\u991b\u9921\u9928\u9937\u994b\u9936\u993f\u995e\u9941\u9943\u993a\u993e\u9948\u9949\u9945\u994a\u994c\u9962\u99ac\u99ad\u99b1\u99b4\u99b3\u9a45\u99b9\u99c1\u9a62\u99d4\u99db\u99df\u99d9\u99d2\u9a36\u99d0\u99dd\u99d1\u99d5\u9a5b\u99d8\u9a4d\u7f75\u99f0\u9a55\u9a4a\u99f1\u99ed\u99e2\u9a6b\u9a6a\u9a01\u9a57\u9a02\u99f8\u99ff\u9a0f\u9a0e\u9a0d\u9a05\u9a0c\u9a4c\u9a42\u9a19\u9a2d\u9a24\u9a37\u9a16\u9a41\u9a2e\u9a2b\u9a38\u9a43\u9a3e\u9a44\u9a4f\u9a5f\u9a65\u9a66\u9a64\u9acf\u9ad6\u9ad5\u9b22\u9b58\u9b4e\u9b5a\u9b5b\u9b62\u9b77\u9b68\u9b6f\u9b74\u9b7a\u9b81\u9b83\u9bf0\u9c78\u9b8b\u9b93\u9b92\u9b8a\u9b91\u9c5f\u9b8d\u9b90\u9bad\u9b9a\u9bb3\u9baa\u9b9e\u9ba6\u9c02\u9b9c\u9c60\u9c6d\u9bab\u9bae\u9bba\u9bd7\u9c58\u9bc1\u9c7a\u9c31\u9c39\u9bc9\u9c23\u9c37\u9bc0\u9bca\u9bc7\u9bb6\u9bfd\u9bd2\u9bd6\u9bea\u9bd5\u9beb\u9be1\u9be4\u9be7\u9bdd\u9be2\u9bf0\u9bdb\u9be8\u9bf5\u9bf4\u9bd4\u9c5d\u9c08\u9c0f\u9c68\u9bf7\u9c2e\u9c03\u9c13\u9c77\u9c0d\u9c12\u9c09\u9c01\u9c42\u9bff\u9c20\u9f07\u9c2d\u9c28\u9c25\u9c29\u9c1f\u9c1c\u9c33\u9c3e\u9c48\u9c49\u9c3b\u9c35\u9c45\u9c3c\u9c56\u9c54\u9c57\u9c52\u9c6f\u9c64\u9c67\u9c63\u9ce5\u9ce9\u96de\u9cf6\u9cf4\u9cf2\u9dd7\u9d09\u9dac\u9d07\u9d06\u9d23\u9d87\u9e15\u9d28\u9d1e\u9d26\u9d12\u9d1f\u9d1d\u9d1b\u9d2c\u9d15\u9de5\u9dd9\u9d2f\u9d30\u9d42\u9d34\u9d43\u9d3f\u9e1e\u9d3b\u9d50\u9d53\u9e1d\u9d51\u9d60\u9d5d\u9d52\u9df3\u9d5c\u9d61\u9d72\u9d93\u9d6a\u9da4\u9d6f\u9d6c\u9d6e\u9d89\u9d8a\u9d77\u9deb\u9d98\u9da1\u9d9a\u9dbb\u9dbf\u9da5\u9da9\u9dca\u9dc2\u9db2\u9db9\u9dba\u9dc1\u9dbc\u9db4\u9dd6\u9e1a\u9dd3\u9dda\u9def\u9de6\u9df2\u9df8\u9dfa\u9e07\u9df9\u9e0c\u9e0f\u9e1b\u9e18\u9e7a\u9ea5\u9ea9\u9ec3\u9ecc\u9ef6\u9ef7\u9ef2\u9efd\u9eff\u9f02\u9f09\u9780\u9f34\u9f47\u9f4a\u9f4f\u9f52\u9f54\u9f55\u9f57\u9f5f\u9f61\u9f59\u9f60\u9f5c\u9f66\u9f6c\u9f6a\u9f72\u9f77\u9f8d\u9f94\u9f95\u9f9c\u8a8c\u88fd\u8c18\u96bb\u88e1\u4fc2\u7bc4\u9b06\u5187\u5690\u5617\u9b28\u9eb5\u6e96\u9418\u5f46\u9592\u4e7e\u5118\u81df\u62da]|[\u3400-\u4dbe\u4e00-\u9ffe\uf900-\ufafe]|[\ud840-\ud868\ud86a-\ud86c][\udc00-\udfff]|\ud869[\udc00-\udede\udf00-\udfff]|\ud86d[\udc00-\udf3e\udf40-\udfff]|\ud86e[\udc00-\udc1e]|\ud87e[\udc00-\ude1e]/,
      },
      cyrillic: {
        fontInfo: {
          name: "Roboto-Regular",
          displayName: "Roboto Regular",
          development: {
            id: "cfc3fd6e903ee7a70bfc30ca78364e35",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
          staging: {
            id: "cfc3fd6e903ee7a70bfc30ca78364e35",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
          production: {
            id: "1edfd96d4060fbd49380318b0e93d8ed",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
        },
        regex:
          /[\u0400\u0401\u0402\u0403\u0404\u0405\u0406\u0407\u0408\u0409\u040a\u040b\u040c\u040d\u040e\u040f\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e\u044f\u0450\u0451\u0452\u0453\u0454\u0455\u0456\u0457\u0458\u0459\u045a\u045b\u045c\u045d\u045e\u045f\u0460\u0461\u0462\u0463\u0464\u0465\u0466\u0467\u0468\u0469\u046a\u046b\u046c\u046d\u046e\u046f\u0470\u0471\u0472\u0473\u0474\u0475\u0476\u0477\u0478\u0479\u047a\u047b\u047c\u047d\u047e\u047f\u0480\u0481\u0482\u048a\u048b\u048c\u048d\u048e\u048f\u0490\u0491\u0492\u0493\u0494\u0495\u0496\u0497\u0498\u0499\u049a\u049b\u049c\u049d\u049e\u049f\u04a0\u04a1\u04a2\u04a3\u04a4\u04a5\u04a6\u04a7\u04a8\u04a9\u04aa\u04ab\u04ac\u04ad\u04ae\u04af\u04b0\u04b1\u04b2\u04b3\u04b4\u04b5\u04b6\u04b7\u04b8\u04b9\u04ba\u04bb\u04bc\u04bd\u04be\u04bf\u04c0\u04c1\u04c2\u04c3\u04c4\u04c5\u04c6\u04c7\u04c8\u04c9\u04ca\u04cb\u04cc\u04cd\u04ce\u04cf\u04d0\u04d1\u04d2\u04d3\u04d4\u04d5\u04d6\u04d7\u04d8\u04d9\u04da\u04db\u04dc\u04dd\u04de\u04df\u04e0\u04e1\u04e2\u04e3\u04e4\u04e5\u04e6\u04e7\u04e8\u04e9\u04ea\u04eb\u04ec\u04ed\u04ee\u04ef\u04f0\u04f1\u04f2\u04f3\u04f4\u04f5\u04f6\u04f7\u04f8\u04f9\u04fa\u04fb\u04fc\u04fd\u04fe\u04ff]/,
      },
      hebrew: {
        fontInfo: {
          name: "Rubik-Regular",
          displayName: "Rubik Regular",
          development: {
            id: "e171b0dde84c3d37c5bc8e877a660f34",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
          staging: {
            id: "e171b0dde84c3d37c5bc8e877a660f34",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
          production: {
            id: "d5f1abb5a6d9d90bbbab6b9bf9b9fa90",
            imageExtension: ".png",
            fileExtension: ".ttf",
          },
        },
        regex:
          /[\u05d0\u05d1\u05d2\u05d3\u05d4\u05d5\u05d6\u05d7\u05d8\u05d9\u05da\u05db\u05dc\u05dd\u05de\u05df\u05e0\u05e1\u05e2\u05e3\u05e4\u05e5\u05e6\u05e7\u05e8\u05e9\u05ea\u05f0\u05f1\u05f2\u05f3\u05f4\u05d9\u05b4\u05f2\u05b7\ufb20\ufb21\ufb22\ufb23\ufb24\ufb25\ufb26\ufb27\ufb28\ufb29\u05e9\u05c1\u05e9\u05c2\u05e9\u05bc\u05c1\u05e9\u05bc\u05c2\u05d0\u05b7\u05d0\u05b8\u05d0\u05bc\u05d1\u05bc\u05d2\u05bc\u05d3\u05bc\u05d4\u05bc\u05d5\u05bc\u05d6\u05bc\u05d8\u05bc\u05d9\u05bc\u05da\u05bc\u05db\u05bc\u05dc\u05bc\u05de\u05bc\u05e0\u05bc\u05e1\u05bc\u05e3\u05bc\u05e4\u05bc\u05e6\u05bc\u05e7\u05bc\u05e8\u05bc\u05e9\u05bc\u05ea\u05bc\u05d5\u05b9\u05d1\u05bf\u05db\u05bf\u05e4\u05bf\u05d0\u05dc]/,
      },
    },
    prototype: {
      _anyIdeogramMatchRegex: function (e, t) {
        return (
          e.filter(function (e) {
            return t.test(e);
          }).length > 0
        );
      },
      determineLanguage: function (e) {
        var t, n, i, r;
        return (
          (t = this),
          (n = e.split("")),
          (r = t.constructor.fallbackFontLanguages),
          (i = Object.keys(r).filter(function (e) {
            var i = r[e].regex;
            return t._anyIdeogramMatchRegex(n, i);
          })[0]),
          "undefined" == typeof i && (i = "latin"),
          i
        );
      },
      getFallbackFontInfo: function (e) {
        var t, n, i;
        return (
          (t = this),
          (n = {}),
          (i = t.constructor.fallbackFontLanguages),
          (n.name = i[e].fontInfo.name),
          (n.displayName = i[e].fontInfo.displayName),
          (n.visible = !0),
          (n.file = t._composeFilePath(e)),
          (n.image = t._composeImagePath(e)),
          n
        );
      },
      _composeFilePath: function (e) {
        var t, n;
        return (
          (t = this),
          (n = "/fonts/"),
          n +
            t._getFallbackFontProperty(e, "id") +
            t._getFallbackFontProperty(e, "fileExtension")
        );
      },
      _composeImagePath: function (e) {
        var t, n;
        return (
          (t = this),
          (n = "/fonts/"),
          n +
            t._getFallbackFontProperty(e, "id") +
            t._getFallbackFontProperty(e, "imageExtension")
        );
      },
      _getFallbackFontProperty: function (e, t) {
        var n, i, r;
        return (
          (n = this),
          (i = n.constructor.fallbackFontLanguages),
          (r = n._config.environment),
          i[e].fontInfo[r][t]
        );
      },
    },
  }),
  Module(
    Ngin,
    "Loader"
  )({
    prototype: {
      _cdnBasePath: function () {
        return (
          (this._CDNRoundRobin = (this._CDNRoundRobin % 3) + 1),
          1 === this._CDNRoundRobin
            ? this._CDNPath.replace(/#/, "")
            : this._CDNPath.replace(/#/, "-" + this._CDNRoundRobin)
        );
      },
      _getAssetUrl: function (e) {
        var t, n;
        return (
          (t = this),
          (n = [
            t._cdnBasePath(),
            t._config.smartTemplatesPath,
            t._config.smartTemplateId,
          ]),
          t._config.sizePath && n.push(t._config.sizePath),
          n.push(t._config.highResPrefix),
          n.push(e),
          n
            .filter(function (e) {
              return e.length > 0;
            })
            .join("/")
        );
      },
      _getGraphicAssetUrl: function (e, t) {
        var n, i;
        return (
          (n = this),
          (i = [n._cdnBasePath(), n._config.imageLibraryPath, t, e]),
          i
            .filter(function (e) {
              return e.length > 0;
            })
            .join("/")
        );
      },
      _getStaticAssetUrl: function (e) {
        var t, n;
        return (
          (t = this),
          (n = [
            t._cdnBasePath(),
            t._config.smartTemplatesPath,
            t._config.smartTemplateId,
          ]),
          n.push(e),
          n
            .filter(function (e) {
              return e.length > 0;
            })
            .join("/")
        );
      },
      _loadFont: function (e) {
        var t, n, i, r, s;
        if (((t = this), !e)) return Promise.resolve();
        var o = (e.allowedFonts || []).filter(function (t) {
          return t.name === e.font;
        })[0];
        return (
          (s = t.determineLanguage(e.contents)),
          "latin" !== s && ((o = t.getFallbackFontInfo(s)), (e.font = o.name)),
          o && o.file
            ? ((n = t._cdnBasePath() + o.file),
              t._fontToBase64(n).then(function (e) {
                t._fontTags[o.name] ||
                  ((i = document.createElement("style")),
                  (r = ("a" + performance.now()).replace(".", "")),
                  (i.innerHTML =
                    "@font-face {font-family: '" +
                    r +
                    "'; src: url(" +
                    e +
                    ")}"),
                  (t._fontTags[o.name] = { style: i, name: r }));
              }))
            : (console.log("Font info for " + e.font + " does not exist"),
              Promise.resolve(e.font))
        );
      },
      _fontToBase64: function (e) {
        var t = new XMLHttpRequest();
        return new Promise(function (n) {
          (t.onload = function () {
            var e = new FileReader();
            (e.onloadend = function () {
              n(e.result);
            }),
              e.readAsDataURL(t.response);
          }),
            t.open("GET", e),
            (t.responseType = "blob"),
            t.send();
        });
      },
      _getImageUrl: function (e) {
        var t;
        return (
          (t = this),
          new Promise(function (n, i) {
            var r, s, o, a;
            if (!e.nounAssetId)
              return (
                "customBg" === e.id || "customGraphic" === e.id
                  ? (o = [e.image])
                  : t._uiJSON.highResolution
                  ? ((r = e.path.split("/")),
                    (s = r.pop()),
                    r.push(t._config.highResPrefix),
                    r.push(s),
                    (r = r.join("/")),
                    (o = [t._cdnBasePath(), r]))
                  : (o = [t._cdnBasePath(), e.path]),
                (o = o
                  .filter(function (e) {
                    return e && e.length > 0;
                  })
                  .join("/")),
                void n(o)
              );
            var l = t._uiJSON.userData || {};
            (a = new XMLHttpRequest()),
              a.open(
                "get",
                t._config.basePath + "/api/v4/image/" + e.nounAssetId,
                !0
              ),
              a.setRequestHeader("x-user-data", JSON.stringify(l)),
              (a.onreadystatechange = function () {
                4 === a.readyState &&
                  (a.status >= 400 &&
                    a.status <= 500 &&
                    t.dispatch("nounProject:fail", {
                      nounAssetId: e.nounAssetId,
                      graphicId: e.id,
                      graphicName: e.name,
                      status: a.status,
                    }),
                  (o = JSON.parse(a.response).url),
                  n(o));
              }),
              (a.onerror = function (e) {
                i(e);
              }),
              a.send();
          })
        );
      },
      _loadVectorImage: function (e, t, n) {
        var i = this;
        return Promise.all([
          i._requestSvgAsXml(e),
          i._getSvgDimensions(e, t, n),
        ])
          .then(function (e) {
            return (
              i._uiJSON.disableAA &&
                e[0].setAttribute("shape-rendering", "crispEdges"),
              i._renderSvg(e[0], e[1])
            );
          })
          ["catch"](function () {
            return i._loadBitmapImage(Engine.transparentPixel);
          });
      },
      _loadBitmapImage: function (e) {
        var t, n;
        return (
          (n = this),
          (t = new Image()),
          /data:image/.test(e) === !1 && (t.crossOrigin = "Anonymous"),
          new Promise(function (i) {
            console.log("image", e);
            t.addEventListener("load", function () {
              i(t);
            }),
              t.addEventListener("error", function () {
                throw (
                  ((t = new Image()),
                  t.addEventListener("load", function () {
                    i(t);
                  }),
                  (t.src = Engine.transparentPixel),
                  engine.dispatch("imageLoad:fail", {
                    message:
                      "Sorry, this graphic seems to be failing. Please select another graphic!",
                  }),
                  n._createImageError(e))
                );
              }),
              (t.src = e);
          })
        );
      },
      _preloadAssets: function (e) {
        var t, n, i, r, s, o;
        (t = this),
          (n = []),
          (i = []),
          (r = []),
          (s = []),
          (o = !1),
          t._treeWalker(e, "layers", function (e) {
            var a, l, c;
            if ("Graphic" === e.type || "Shape" == e.type) {
              if (
                ((a = e.smartObject),
                (l = a && a.layers[0]),
                l && /_system/.test(l.name))
              )
                return;
              (c = l && l.image ? e.smartObject.layers[0].image : e.image),
                (o = o || !!e.watermarked),
                n.push({
                  layerReference: e,
                  shortPath: c,
                  fullPath: t._getAssetUrl(c),
                  watermarked: e.watermarked,
                });
            }
            if (
              (e.mask &&
                s.push({
                  shortPath: e.mask.image,
                  fullPath: t._getAssetUrl(e.mask.image),
                }),
              e.transform3DFile)
            ) {
              var u, h;
              switch (
                ((u = /(?:\.([^.]+))?$/), (h = u.exec(e.transform3DFile)[1]))
              ) {
                case "dae":
                  i.push({
                    shortPath: e.transform3DFile,
                    fullPath: t._getStaticAssetUrl(e.transform3DFile),
                  });
                  break;
                case "msh":
                  r.push({
                    shortPath: e.transform3DFile,
                    fullPath: t._getStaticAssetUrl(e.transform3DFile),
                  });
                  break;
                default:
                  t.dispatch("transform3DFileExtension:error", {
                    transform3DFile: e.transform3DFile,
                    smartTemplateId: t._uiJSON.id,
                  });
              }
            }
          });
        var a, l;
        return (
          (a = t._getAssetUrl("assets/checksum")),
          (l = []),
          n.forEach(function (e) {
            console.log("CHECKSUM", e);
            "Graphic" === e.layerReference.type &&
              -1 === e.layerReference.name.indexOf("Sbox") &&
              -1 === e.layerReference.name.indexOf("Watermark") &&
              (t._assetsData[e.layerReference.name] = {
                assetUrl: e.fullPath.replace(
                  "https://nice-assets-3.s3-accelerate.amazonaws.com/",
                  "http://localhost:9999"
                ),
              });
            var n = {
              width: e.layerReference.width,
              height: e.layerReference.height,
            };
            l.push(
              e.watermarked ||
                "watermark" !== !e.layerReference.name.toLowerCase()
                ? t._loadImageOnCanvas(
                    e.fullPath.replace(
                      "https://nice-assets-3.s3-accelerate.amazonaws.com/",
                      "http://localhost:9999"
                    ),
                    n
                  )
                : t._resourceToCanvas({
                    type: e.fullPath.indexOf(".svg") > -1 ? "svg" : "bitmap",
                    url: e.fullPath.replace(
                      "https://nice-assets-3.s3-accelerate.amazonaws.com/",
                      "http://localhost:9999"
                    ),
                    viewport: { width: n.width, height: n.height },
                  })
            );
          }),
          s.forEach(function (e) {
            l.push(
              t._loadImageOnCanvas(e.fullPath).then(function (n) {
                t._cachedMasks[e.shortPath] = n;
              })
            );
          }),
          i.forEach(function (e) {
            var n = t._fetchColladaFile(e).then(function (n) {
              t._cachedColladaFiles[e.shortPath] = n;
            });
            l.push(n);
          }),
          r.forEach(function (e) {
            var n = t._fetchMeshFile(e).then(function (n) {
              t._cachedMeshFiles[e.shortPath] = n;
            });
            l.push(n);
          }),
          l.push(t._fetchOptions(t)),
          l.push(t._fetchRules(t)),
          t._uiJSON.highResolution || o === !1
            ? Promise.all(l).then(function (e) {
                var i, r;
                (i = e.slice(0, n.length)),
                  i.forEach(function (e, i) {
                    (r = n[i].shortPath), (t._cachedImages[r] = e);
                  });
              })
            : (l.push(t._getChecksum(a)),
              Promise.all(l).then(function (e) {
                var i, r;
                return (
                  (i = e.pop()),
                  (r = e.slice(0, n.length)),
                  t._setImages(i, r, n)
                );
              }))
        );
      },
      _preloadGraphicAssets: function (e) {
        var t, n, i;
        return (
          (t = this),
          (n = []),
          (i = []),
          t._treeWalker(e.structure, "layers", function (i) {
            ("Shape" === i.type || "Graphic" === i.type) &&
              n.push({
                layerReference: i,
                shortPath: i.image,
                fullPath: t._getGraphicAssetUrl(i.image, e.id),
              });
          }),
          n.forEach(function (e) {
            i.push(
              t._resourceToCanvas({
                type: e.fullPath.indexOf(".svg") > -1 ? "svg" : "bitmap",
                url: e.fullPath,
                viewport: {
                  width: e.layerReference.width,
                  height: e.layerReference.height,
                },
              })
            );
          }),
          Promise.all(i).then(function (e) {
            var t = {};
            return (
              n.forEach(function (n, i) {
                t[n.shortPath] = e[i];
              }),
              t
            );
          })
        );
      },
      _fetchColladaFile: function (e) {
        var t = new XMLHttpRequest();
        return new Promise(function (n, i) {
          t.open("GET", e.fullPath),
            (t.responseType = "arraybuffer"),
            t.addEventListener("readystatechange", function () {
              if (4 === t.readyState) {
                if (200 === t.status) {
                  var e =
                    "data:application/octet-stream;base64," +
                    btoa(
                      new Uint8Array(t.response).reduce(function (e, t) {
                        return e + String.fromCharCode(t);
                      }, "")
                    );
                  return n(e);
                }
                i(new Error("Collada loader: Error loading collada file"));
              }
            }),
            t.send();
        });
      },
      _fetchMeshFile: function (e) {
        var t = new XMLHttpRequest();
        return new Promise(function (n, i) {
          t.open("GET", e.fullPath),
            (t.responseType = "arraybuffer"),
            t.addEventListener("readystatechange", function () {
              if (4 === t.readyState) {
                if (200 === t.status) return n(t.response);
                i(new Error("Mesh loader: Error loading mesh file"));
              }
            }),
            t.send();
        });
      },
      _getChecksum: function (e) {
        return new Promise(function (t, n) {
          console.log("_getChecksum", e);
          var i = new XMLHttpRequest();
          (i.responseType = "arraybuffer"),
            (i.onreadystatechange = function () {
              4 === i.readyState &&
                (200 === i.status
                  ? t(new Uint8ClampedArray(i.response))
                  : n(new Error("error fetching checksum")));
            }),
            i.open("GET", e, !0),
            i.send(null);
        });
      },
      _restore: function (e, t) {
        var n, i, r;
        return (
          (n = t.getContext("2d")),
          (i = n.getImageData(0, 0, t.width, t.height)),
          (r = 0),
          i.data.forEach(function (t, n) {
            n % 4 === 0 && (i.data[n + 3] = e[r++]);
          }),
          n.putImageData(i, 0, 0),
          r
        );
      },
      _setImages: function (e, t, n) {
        var i, r, s, o;
        return (
          (i = this),
          (r = t.filter(function (e, t) {
            return "watermark" === n[t].layerReference.name.toLowerCase();
          })[0]),
          (s = e.slice(0, r.width * r.height)),
          (o = i._restore(e, r)),
          new Promise(function (a) {
            i._bounce(t, n, r, s, e, o, a);
          })
        );
      },
      _bounce: function (e, t, n, i, r, s, o) {
        var a, l, c, u, h, d;
        return (a = e.shift())
          ? ((l = t.shift()),
            (c = l.shortPath),
            l.watermarked
              ? ((u = engine._placeInCenter(
                  n,
                  { width: a.width, height: a.height },
                  r
                )),
                engine._resetAlpha(u, n, i),
                (h = foobar(a, u, r, s)),
                (a.width = 0),
                (a.height = 0),
                (u.width = 0),
                (u.height = 0),
                (u = null),
                (d = { type: "bitmap", url: h.canvas.toDataURL() }),
                (h.canvas.width = 0),
                (h.canvas.height = 0),
                void engine._resourceToCanvas(d).then(function (s) {
                  (engine._cachedImages[c] = s),
                    setTimeout(function () {
                      engine._bounce(e, t, n, i, r, h.index, o);
                    }, 0);
                }))
              : ((d = { type: "bitmap", url: a.toDataURL() }),
                a !== n && ((a.width = 0), (a.height = 0)),
                void engine._resourceToCanvas(d).then(function (a) {
                  (engine._cachedImages[c] = a),
                    setTimeout(function () {
                      engine._bounce(e, t, n, i, r, s, o);
                    }, 0);
                })))
          : void o();
      },
      _getGraphicStructure: function (e) {
        var t, n;
        return (
          (t = this._cdnBasePath() + "/image_library/" + e + "/structure.json"),
          new Promise(function (e, i) {
            (n = new XMLHttpRequest()),
              n.open("GET", t, !0),
              n.addEventListener("readystatechange", function () {
                4 === n.readyState &&
                  (200 === n.status
                    ? e(JSON.parse(n.response))
                    : i(new Error("Error loading document's structure")));
              }),
              n.send(null);
          })
        );
      },
      _fetchOptions: function () {
        var e = this;
        return new Promise(function (t) {
          var n = new XMLHttpRequest();
          n.addEventListener("readystatechange", function () {
            4 === n.readyState &&
              (200 === n.status
                ? (e._optionsJson = JSON.parse(n.response))
                : console.warn("Couldn't fetch options"),
              t());
          }),
            n.open("GET", e._optionsPath),
            n.send(null);
        });
      },
      _resetAlpha: function (e, t, n) {
        var i, r, s, o, a, l, c, u, h, d, p, f, m, g, v, _;
        (i = e.getContext("2d")),
          (r = t.getContext("2d")),
          (s = i.getImageData(0, 0, e.width, e.height)),
          (o = r.getImageData(0, 0, t.width, t.height)),
          (l = 0),
          (c = o.data.length),
          (a = []);
        for (var y = 0; c > y; y++)
          y % 4 === 0 &&
            (a.push(o.data[y]),
            a.push(o.data[y + 1]),
            a.push(o.data[y + 2]),
            a.push(n[l++]));
        (u = e.width / 2),
          (h = e.height / 2),
          (d = t.width / 2),
          (p = t.height / 2),
          (f = {
            x: Math.abs(Math.min(0, Math.floor(u - d))),
            y: Math.abs(Math.min(0, Math.floor(h - p))),
            width: Math.min(t.width, e.width),
            height: Math.min(t.height, e.height),
          }),
          (g = {
            x: Math.max(0, Math.floor(u - d)),
            y: Math.max(0, Math.floor(h - p)),
          }),
          (m = []),
          (v = new Uint8ClampedArray(a)),
          (_ = new ImageData(v, t.width, t.height)),
          r.putImageData(_, 0, 0),
          (m = r.getImageData(f.x, f.y, f.width, f.height)),
          i.putImageData(m, g.x, g.y);
      },
      _applyColor: function (e, t) {
        Engine.validHexColor.test("" + t) &&
          (e.tint = parseInt(t.split("#")[1], 16));
      },
      _createImageError: function (e) {
        var t;
        return (
          (t = new Error("image loader: Error loading image")),
          (t.imageUrl = /^data/.test(e) ? e.substring(0, 64) : e),
          t
        );
      },
    },
  }),
  Module(
    Ngin,
    "PixiWrapper"
  )({
    prototype: {
      _canvasRenderer: null,
      _refresh: function () {
        console.log("Refreshing"),
          this._removeWatermark && this._removeWatermark(),
          this._treeWalker(this._stage, "children", function (e) {
            if (e.x || e.y) {
              var t = {
                x: (Math.ceil(e.width) - e.width) / 2,
                y: (Math.ceil(e.height) - e.height) / 2,
              };
              (e.position.x = Math.floor(e.x) + t.x),
                (e.position.y = Math.floor(e.y) + t.y);
            }
          }),
          this._canvasRenderer.render(this._stage);
      },
      process: function (e, t) {
        var n, i, r, s, o;
        return (
          (n = this),
          (r = []),
          (i = {}),
          (n._affectedCurves = []),
          (n.ready = !1),
          (n.hasTransformed = !1),
          (o = []),
          n._destroyInteractions(),
          (n._stage = n._originalTree),
          t
            ? ((i.text = e.text.filter(function (e, t) {
                var i, r, s, a;
                return n._getObjectByName(e.name)
                  ? 0 === n._processCount
                    ? !0
                    : ((i = e.contents !== n._uiJSON.text[t].contents),
                      (r = e.font !== n._uiJSON.text[t].font),
                      (s = e.color !== n._uiJSON.text[t].color),
                      (a = e.visible !== n._uiJSON.text[t].visible),
                      (textBGColorChange =
                        e.bgColor !== n._uiJSON.text[t].bgColor),
                      (textBGPaddingChange =
                        e.bgPaddingFraction !==
                        n._uiJSON.text[t].bgPaddingFraction),
                      (textBGOpacityChange =
                        e.bgOpacity !== n._uiJSON.text[t].bgOpacity),
                      i ||
                        r ||
                        s ||
                        a ||
                        textBGColorChange ||
                        textBGPaddingChange ||
                        textBGOpacityChange)
                  : (o.push(e), !0);
              })),
              (i.graphic = e.graphic.filter(function (e, t) {
                var i, r, s, o;
                return n._getObjectByName(e.name)
                  ? 0 === n._processCount && e.layers.length > 0
                    ? ((e.graphicChanged = !0), (e.colorChanged = !0), !0)
                    : ((i = e.color !== n._uiJSON.graphic[t].color),
                      (r = e.layers.filter(function (e) {
                        return e.visible;
                      })[0]),
                      (s = n._uiJSON.graphic[t].layers.filter(function (e) {
                        return e.visible;
                      })[0]),
                      (o =
                        void 0 === r
                          ? void 0 === s
                            ? !1
                            : !0
                          : void 0 === s
                          ? !0
                          : "customGraphic" === r.id && "customGraphic" === s.id
                          ? r.image !== s.image
                          : r.id !== s.id),
                      (e.colorChanged = i),
                      (e.graphicChanged = o),
                      i || o)
                  : ((e.graphicChanged = !0), (e.colorChanged = !0), !0);
              })),
              (i.background = e.background.filter(function (e, t) {
                var i, r, s, o;
                return 0 === n._processCount && e.layers.length > 0
                  ? ((e.graphicChanged = !0), (e.colorChanged = !0), !0)
                  : ((i = e.color !== n._uiJSON.background[t].color),
                    (r = e.layers.filter(function (e) {
                      return e.visible;
                    })[0]),
                    (s = n._uiJSON.background[t].layers.filter(function (e) {
                      return e.visible;
                    })[0]),
                    (o =
                      void 0 === r
                        ? void 0 === s
                          ? !1
                          : !0
                        : void 0 === s
                        ? !0
                        : "customBg" === r.id && "customBg" === s.id
                        ? r.image !== s.image
                        : r.id !== s.id),
                    (e.colorChanged = i),
                    (e.graphicChanged = o),
                    i || o);
              })),
              (i.customGraphic = e.customGraphic.filter(function (e, t) {
                var i, r;
                return (
                  (i =
                    (null === e.layers[0].image ||
                      "assets" !== e.layers[0].image.substr(0, 6)) &&
                    e.layers[0].image !==
                      n._uiJSON.customGraphic[t].layers[0].image),
                  (r = e.visible !== n._uiJSON.customGraphic[t].visible),
                  i || r
                );
              })),
              n._uiJSON.backgroundColor &&
                e.backgroundColor &&
                e.backgroundColor.color !== n._uiJSON.backgroundColor.color &&
                (i.backgroundColor = e.backgroundColor))
            : ((i.text = e.text),
              e.text.forEach(function (e) {
                n._getObjectByName(e.name) || o.push(e);
              }),
              (i.graphic = e.graphic.map(function (e) {
                return (e.graphicChanged = !0), (e.colorChanged = !0), e;
              })),
              (i.background = e.background.map(function (e) {
                return (e.graphicChanged = !0), e;
              })),
              (i.backgroundColor = e.backgroundColor),
              (i.customGraphic = e.customGraphic.filter(function (e) {
                return (
                  null !== e.layers[0].image &&
                  "assets" !== e.layers[0].image.substr(0, 6)
                );
              })),
              (i.backgroundColor = e.backgroundColor)),
          (n._uiJSON = e),
          n
            ._processNewUserAddedTexts(o, e)
            .then(function () {
              return n.matchGraphicsTreeWithRecord(e);
            })
            .then(function () {
              return n._updateOriginalTree(i).then(function () {
                return n
                  ._getSwapTree(i)
                  .then(function (e) {
                    (n._stage = e),
                      n._uiJSON.text.forEach(function (e) {
                        n.addBackgroundLayer(e);
                      }),
                      n._applyDesign(),
                      n.centerPristineGraphics(),
                      (n._rulesTree = n._stage),
                      n._setupInteractions(n._uiJSON),
                      (n._affectedCurves = n._affectedCurves2),
                      (n._originalEQ = n._cacheEffectsQueue(
                        n._effectsQ,
                        n._originalEQ
                      )),
                      FlowChecker.EffectsQueue.before(),
                      n._effectsQ.process(),
                      FlowChecker.EffectsQueue.after(),
                      FlowChecker.ApplyAdjustmentLayers.before();
                    var t = n._getAffectingAdjustmentLayers(n._affectedCurves);
                    n._applyAdjustmentLayers(t),
                      FlowChecker.CurvesFilmstrip.after(),
                      FlowChecker.ApplyAdjustmentLayers.after(),
                      FlowChecker.HideAffectedLayers.before(),
                      n._hideAffectedLayers(n._stage),
                      FlowChecker.HideAffectedLayers.after(),
                      n._refresh(),
                      FlowChecker.RestoreVisibility.before(),
                      n._restoreOriginalVisibility(n._stage),
                      FlowChecker.RestoreVisibility.after(),
                      (n._debugTable = n._openDebugFilmStrip()),
                      n._processCount++,
                      (n.ready = !0),
                      n.dispatch("process");
                  })
                  .then(function () {
                    return n._uiJSON.format && "svg" === n._uiJSON.format
                      ? ((s = new SVG.Exporter(n)),
                        s["export"](n._uiJSON.highResolution))
                      : void 0;
                  })
                  .then(function () {
                    n._uiJSON.noText === !0 && n.turnOffText();
                  })
                  .then(function () {
                    return n.getImage(n._uiJSON.format);
                  });
              });
            })
        );
      },
      _processNewUserAddedTexts: function (e) {
        var t = this;
        return 0 === e.length
          ? Promise.resolve()
          : t._getObjectByName("User Added Text")
          ? t._renderNewUserAddedTexts(e)
          : t._createUserAddedTextFolder().then(function () {
              return t._renderNewUserAddedTexts(e);
            });
      },
      _createUserAddedTextFolder: function () {
        var e = this,
          t = e._getObjectByName("Design"),
          n = {
            id: 9973053924,
            name: "User Added Text",
            type: "Folder",
            opacity: 100,
            visible: !0,
            styles: { blendOptions: { mode: "passThrough" } },
            layers: [],
          };
        return e._renderLayer(n, t).then(function () {
          return e._rulesTree
            ? ((e._stage = e._rulesTree),
              (t = e._getObjectByName("Design")),
              e._renderLayer(n, t).then(function () {
                return (e._stage = e._originalTree), Promise.resolve();
              }))
            : Promise.resolve();
        });
      },
      _renderNewUserAddedTexts: function (e) {
        var t = this;
        return e.reduce(function (e, n) {
          return e.then(function () {
            return t._renderUserAddedText(n);
          });
        }, Promise.resolve());
      },
      _renderUserAddedText: function (e) {
        var t = this,
          n = t._getObjectByName("User Added Text"),
          i = JSON.parse(JSON.stringify(e));
        return (
          (i.visible = !0),
          (t._originalRulesValues[e.name] = {
            x: 0,
            y: -1e4,
            width: 1,
            height: 1,
          }),
          t._renderLayer(i, n).then(function () {
            return t._rulesTree
              ? ((t._stage = t._rulesTree),
                (i = JSON.parse(JSON.stringify(e))),
                (i.visible = !0),
                (n = t._getObjectByName("User Added Text")),
                t._renderLayer(i, n).then(function () {
                  t._stage = t._originalTree;
                }))
              : Promise.resolve();
          })
        );
      },
    },
  }),
  Module(
    Ngin,
    "Renderer"
  )({
    prototype: {
      _renderTextLayer: function (e, t) {
        var n,
          i = this;
        return i._loadFont(e).then(function () {
          return i._createTextLayer(e).then(function (e) {
            t.addChild(e),
              e.visible && ((n = i._applyLayerEffects(e)), t.addChild(n));
          });
        });
      },
      _renderAdjustment: function (e, t) {
        var n = PIXI.Texture.EMPTY,
          i = new PIXI.Sprite(n);
        (i.layerData = e), t.addChild(i);
      },
      _renderGraphic: function (e, t, n) {
        var i, r, s, o, a, l, c, u, h, d;
        if (
          ((i = this),
          (n = n || i._cachedImages),
          (r = Promise.resolve()),
          i._uiJSON.highResolution && "Watermark" === e.name)
        )
          return r;
        if (
          ((o = new PIXI.Sprite()),
          (o.layerData = e),
          (o.visible = e.visible),
          (a = e.styles.blendOptions),
          (l = e.styles && e.styles.layerEffects),
          (h = e.smartObject),
          (c = 1),
          (u = 1),
          e.hasOwnProperty("opacity") === !0 &&
            "number" == typeof e.opacity &&
            (c = e.opacity / 100),
          e.hasOwnProperty("fill") === !0 &&
            "number" == typeof e.fill &&
            (u = e.fill / 100),
          a && a.mode && (o.blendMode = Engine._blendModeTable[a.mode]),
          (o.alpha = c * u),
          h &&
            i._isLinkedToCustomGraphic(e) === !1 &&
            Engine.validReplaceColor.test(e.name) === !1)
        ) {
          var p, f;
          return (
            h &&
              h.transform &&
              h.transform.transformPoints &&
              ((p = h.transform.transformPoints),
              (f = { width: p[2] - p[0], height: p[5] - p[3] }),
              (s = i._getEmptyTexture(f)),
              (o.texture = PIXI.Texture.from(s)),
              (o.width = f.width),
              (o.height = f.height)),
            (o.transformations = new Transformations.Pipeline({ effects: [] })),
            t.addChild(o),
            i._hasLayerEffects(e) &&
              ((d = i._applyLayerEffects(o)), t.addChild(d)),
            r
          );
        }
        var m, g;
        return (
          (g =
            h && h.layers[0] && h.layers[0].image
              ? h.layers[0].image
              : e.image),
          (m = i._resetEffects(e, h, o)),
          o.transformations.process(n[g]).then(function (n) {
            o.transformations.effects.length && (i.hasTransformed = !0),
              m === !1 &&
                ((o.x = e.x),
                (o.y = e.y),
                (o.width = e.width),
                (o.height = e.height)),
              (o.texture = PIXI.Texture.fromCanvas(n)),
              (n = null),
              t.addChild(o),
              i._hasLayerEffects(e) &&
                ((d = i._applyLayerEffects(o)), t.addChild(d));
          })
        );
      },
      _resetEffects: function (e, t, n) {
        var i, r, s;
        return (
          (s = this),
          (i = []),
          (r = !1),
          e.transform3DFile &&
            e.transform3DFile.indexOf(".dae") > -1 &&
            i.push({
              name: "Liquify",
              config: {
                colladaURI: s._cachedColladaFiles[e.transform3DFile],
                viewport: { width: t.width, height: t.height },
              },
            }),
          t &&
            (t.transform &&
              t.transform.meshPoints &&
              i.push({
                name: "MeshWarp",
                config: {
                  viewport: { width: t.width, height: t.height },
                  meshPoints: t.transform.meshPoints,
                },
              }),
            t.transform &&
              t.transform.transformPoints &&
              (i.push({
                name: "Perspective",
                config: {
                  viewport: {
                    width: s._structureJSON.width,
                    height: s._structureJSON.height,
                  },
                  bounds: t.transform.transformPoints,
                },
              }),
              (r = !0))),
          e.transform3DFile &&
            e.transform3DFile.indexOf(".msh") > -1 &&
            i.push({
              name: "MeshLiquify",
              config: {
                meshURI: s._cachedMeshFiles[e.transform3DFile],
                viewport: {
                  width: s._structureJSON.width,
                  height: s._structureJSON.height,
                },
              },
            }),
          (n.transformations = new Transformations.Pipeline({ effects: i })),
          r
        );
      },
      _renderLayer: function (e, t, n) {
        var i, r;
        switch (
          ((i = this),
          this._isAdjustment(e) && this._adjustmentLayers.push(e.name),
          e.type)
        ) {
          case "Graphic":
          case "Shape":
            r = i._renderGraphic(e, t, n);
            break;
          case "Text":
            r = i._renderTextLayer(e, t);
            break;
          case "Folder":
            r = i._renderFolder(e, t, n);
            break;
          case "SolidColor":
            i._renderSolidColor(e, t), (r = Promise.resolve());
            break;
          case "Curves":
          case "HueSaturation":
            i._renderAdjustment(e, t), (r = Promise.resolve());
            break;
          default:
            console.log("Layer: " + e.type + " - Not implemented yet"),
              (r = Promise.resolve());
        }
        return r;
      },
      _renderFolder: function (e, t, n) {
        var i, r, s, o, a, l;
        return (
          (i = this),
          (r = e.layers.reverse()),
          (s = new PIXI.Container()),
          (s.visible = e.visible),
          (l = Promise.resolve()),
          (s.height = e.height),
          (s.width = e.width),
          (o = 1),
          (a = 1),
          e.hasOwnProperty("opacity") === !0 &&
            "number" == typeof e.opacity &&
            (o = e.opacity / 100),
          e.hasOwnProperty("fill") === !0 &&
            "number" == typeof e.fill &&
            (a = e.fill / 100),
          (s.alpha = o * a),
          (s.layerData = e),
          e.mask && (s.mask = PIXI.Sprite.from(i._cachedMasks[e.mask.image])),
          r.forEach(function (e) {
            l = l.then(function () {
              return i._renderLayer(e, s, n);
            });
          }),
          (l = l.then(function () {
            t.addChild(s);
          })),
          i._hasLayerEffects(e) &&
            (l = l.then(function () {
              i._resetPosition(s);
              var n = i._applyLayerEffects(s, { color: e.color });
              e.mask ||
                i._containsSmartObject(n) ||
                ((n.x += e.x), (n.y += e.y)),
                t.addChild(n);
            })),
          (l = l.then(function () {
            return s;
          }))
        );
      },
      _renderSvg: function (e, t) {
        var n, i;
        return (
          (n = function (e) {
            return btoa(
              encodeURIComponent(e).replace(/%([0-9A-F]{2})/g, function (e, t) {
                return String.fromCharCode("0x" + t);
              })
            );
          }),
          e.setAttribute("width", t.width),
          e.setAttribute("height", t.height),
          (i = n(new XMLSerializer().serializeToString(e))),
          new engine._loadBitmapImage("data:image/svg+xml;base64," + i)
        );
      },
      _renderSolidColor: function (e, t) {
        var n, i, r, s, o;
        (n = this),
          (i = new PIXI.Graphics()),
          (r = e.color),
          (i.visible = e.visible),
          (i.layerData = e),
          (s = Engine.validHexColor.test("" + r)),
          "safeboxes" === t.layerData.name.toLowerCase()
            ? ((o = { width: e.width, height: e.height }),
              (i.x = e.x),
              (i.y = e.y),
              n._fillSolidColor(i, e, o))
            : s &&
              ((o = {
                width: n._canvasRenderer.width,
                height: n._canvasRenderer.height,
              }),
              n._fillSolidColor(i, e, o)),
          t.addChild(i);
      },
      getImage: function (e) {
        return e && "svg" === e.toLowerCase()
          ? this._svgDocument.outerHTML
          : this._canvasRenderer.view.toDataURL();
      },
      updateBackgroundColor: function (e) {
        var t, n, i, r, s, o, a;
        return (
          (t = this),
          (n = {
            width: t._structureJSON.width,
            height: t._structureJSON.height,
          }),
          (r = t._getObjectByName(e.name))
            ? ((i = !Engine.validHexColor.test("" + e.color)),
              (s = t._getObjectByName("Background")),
              (o = t._uiJSON.background[0].layers.filter(function (e) {
                return e.visible;
              })[0]),
              (r.parent.visible = !i),
              o &&
                ((s.children[0].tint = 16777215),
                o.luminosityCorrection &&
                  (s.children[0].tint = t._getContrastColor(e.color).toHex())),
              (a = [s.layerData.affectedBy].filter(function (e) {
                return e;
              })),
              (t._affectedCurves = t._affectedCurves.concat(
                t._getAffectingAdjustmentLayers(a)
              )),
              t._fillSolidColor(r, e, n),
              Promise.resolve())
            : (console.error("Layer not found, changes were not made"),
              Promise.reject())
        );
      },
      _updateTextLayer: function (e, t) {
        var n, i, r, s, o, a, l;
        return (
          (l = this._uiJSON.highResolution),
          (n = e.layerData.path),
          n
            ? ((i = {
                type: "text",
                isArc: !0,
                contents: t.contents,
                diameter: e.layerData.path.diameter,
                startAngle: e.layerData.path.startAngle,
                justification: e.layerData.justification,
                textInside: !1,
                outwardFacing: e.layerData.flip,
                fontFamily: t.font,
                fontSize: e.layerData.fontSize,
                letterSpacing: e.layerData.kerning,
                color: t.color,
                sizeConstant: 1,
                center: e.layerData.path.center,
                capitalization: t.capitalization,
              }),
              engine
                ._textToSvg(i)
                .then(function (e) {
                  return (
                    (e = e.svg),
                    engine
                      ._measureSvgText(e)
                      .then(function (t) {
                        var n, i, a, c, u, h;
                        return (
                          l ? ((u = 5400), (h = 4500)) : ((u = 1e3), (h = 834)),
                          (s = Math.min(u / t.width, h / t.height)),
                          (s = Math.min(1, s)),
                          (r = {
                            x: 0 - t.x * s,
                            y: 0 - t.y * s,
                            dimensions: {
                              x: t.x * s,
                              y: t.y * s,
                              width: t.width * s,
                              height: t.height * s,
                            },
                          }),
                          (a = t.width * s),
                          (c = t.height * s),
                          (i = e.getElementsByTagName("g")[0]),
                          i.setAttribute(
                            "transform",
                            "scale(" + s + " " + s + ")"
                          ),
                          (n = e.getElementsByTagName("text")[0]),
                          n.setAttribute(
                            "transform",
                            "translate(" +
                              Math.floor(r.x + t.width) +
                              ", " +
                              Math.floor(r.y + t.height) +
                              ")"
                          ),
                          e.setAttribute("width", 3.5 * a),
                          e.setAttribute("height", 3.5 * c),
                          (o = e),
                          e
                        );
                      })
                      .then(function (e) {
                        return engine._resourceToCanvas({
                          type: "svg",
                          svg: e,
                        });
                      })
                  );
                })
                .then(function (n) {
                  return new Promise(function (e) {
                    var t,
                      i,
                      r = 500,
                      s = function () {
                        var l, c;
                        (l = engine._drawImageOnCanvas(n)),
                          (c = engine._getTrimBounds(n)),
                          r > 0 && c.right - c.left === 0
                            ? setTimeout(function () {
                                s();
                              }, 10)
                            : ((t = c.right - c.left),
                              (i = c.bottom - c.top),
                              o.setAttribute("width", t),
                              o.setAttribute("height", i),
                              o.setAttribute(
                                "viewBox",
                                c.left + " " + c.top + " " + t + " " + i
                              ),
                              (a = c),
                              e(o)),
                          r--;
                      };
                    s();
                  })
                    .then(function (e) {
                      return engine._resourceToCanvas({ type: "svg", svg: e });
                    })
                    .then(function (n) {
                      var i;
                      return (
                        (i = new PIXI.Texture(new PIXI.BaseTexture(n))),
                        engine._swapTexture(e, i),
                        (e.visible = t.visible),
                        (e.alpha =
                          1 *
                          ((t.opacity || 100) / 100) *
                          ((t.fill || 100) / 100)),
                        (e.scale.x = e.scale.y = 1 / s),
                        (e.parent.x = a.left - r.x - r.dimensions.width),
                        (e.parent.y = a.top - r.y - r.dimensions.height),
                        e
                      );
                    });
                }))
            : engine
                ._drawText(
                  e.layerData.fontSize,
                  t.font,
                  t.color,
                  t.contents,
                  t.justification,
                  t.kerning,
                  e.layerData.position,
                  t.capitalization,
                  e.layerData.lineSpacing
                )
                .then(function (e) {
                  return engine
                    ._measureSvgText(e)
                    .then(function (t) {
                      var n, i, a, c, u, h;
                      return (
                        l ? ((u = 5400), (h = 4500)) : ((u = 1e3), (h = 834)),
                        (s = Math.min(u / t.width, h / t.height)),
                        (s = Math.min(1, s)),
                        (r = {
                          x: 0 - t.x * s,
                          y: 0 - t.y * s,
                          dimensions: {
                            x: t.x * s,
                            y: t.y * s,
                            width: t.width * s,
                            height: t.height * s,
                          },
                        }),
                        (a = t.width * s),
                        (c = t.height * s),
                        (i = e.getElementsByTagName("g")[0]),
                        i.setAttribute(
                          "transform",
                          "scale(" + s + " " + s + ")"
                        ),
                        (n = e.getElementsByTagName("text")[0]),
                        n.setAttribute(
                          "transform",
                          "translate(" +
                            Math.floor(r.x + 1.5 * t.width) +
                            ", " +
                            Math.floor(r.y + 1.5 * t.height) +
                            ")"
                        ),
                        e.setAttribute("width", 3.5 * a),
                        e.setAttribute("height", 3.5 * c),
                        (o = e),
                        e
                      );
                    })
                    .then(function (e) {
                      return engine._resourceToCanvas({ type: "svg", svg: e });
                    });
                })
                .then(function (n) {
                  return new Promise(function (e) {
                    var i,
                      r,
                      s,
                      c,
                      u,
                      h = 500;
                    (s = 2),
                      (c = 1),
                      l &&
                        -1 === t.name.indexOf("added-text") &&
                        ((u =
                          engine._uiJSON.original.size.preview.width /
                          engine._uiJSON.original.size.high.width),
                        (s /= u),
                        (c /= u));
                    var d = function () {
                      var t;
                      (t = engine._getTrimBounds(n)),
                        h > 0 && t.right - t.left === 0
                          ? setTimeout(function () {
                              d();
                            }, 10)
                          : ((i = t.right - t.left + s),
                            (r = t.bottom - t.top + s),
                            o.setAttribute("width", i),
                            o.setAttribute("height", r),
                            o.setAttribute(
                              "viewBox",
                              t.left - c + " " + (t.top - c) + " " + i + " " + r
                            ),
                            (a = t),
                            e(o)),
                        h--;
                    };
                    d();
                  })
                    .then(function (e) {
                      return engine._resourceToCanvas({ type: "svg", svg: e });
                    })
                    .then(function (n) {
                      var i;
                      return (
                        (i = new PIXI.Texture(new PIXI.BaseTexture(n))),
                        engine._swapTexture(e, i),
                        (e.visible = t.visible),
                        (e.alpha =
                          1 *
                          ((t.opacity || 100) / 100) *
                          ((t.fill || 100) / 100)),
                        (e.scale.x = e.scale.y = 1 / s),
                        (e.parent.x =
                          a.left +
                          e.layerData.position.x -
                          r.x -
                          1.5 * r.dimensions.width),
                        (e.parent.y =
                          a.top +
                          e.layerData.position.y -
                          r.y -
                          1.5 * r.dimensions.height),
                        e
                      );
                    });
                })
        );
      },
      updateText: function (e) {
        var t, n;
        return (
          (t = this),
          (n = t._getObjectByName(e.name + "_original"))
            ? ((n.visible = e.visible),
              (n.parent.visible = e.visible),
              e.visible === !1
                ? ((n.visible = !1), Promise.resolve(n))
                : t._loadFont(e).then(function () {
                    return t._updateTextLayer(n, e);
                  }))
            : (console.warn(
                e.name + ": Layer not found, changes were not made"
              ),
              Promise.resolve())
        );
      },
      _updateSmartObjects: function (e, t, n) {
        var i, r, s, o, a, l;
        (i = this),
          (r = t.layerData),
          (s = r.smartObject),
          (o = s.smartObjectId),
          (a = []),
          (l = []),
          o
            ? i._treeWalker(i._stage, "children", function (e) {
                var t = e.layerData;
                t.smartObject &&
                  t.smartObject.smartObjectId === r.smartObject.smartObjectId &&
                  a.push(e);
              })
            : a.push(t),
          a.forEach(function (e) {
            "undefined" != typeof e.layerData.affectedBy &&
              i._affectedCurves.push(e.layerData.affectedBy),
              l.push(i._updateSmartObject(e, n));
          });
        var c, u, h;
        (c = a.length), (u = []);
        for (var d = 0; c > d; d++)
          (h = i._getLayerParents(a[d])), h.length > 0 && u.push(h);
        return (
          (u = i._getUniqueParents(u)),
          (u = u.filter(function (t) {
            return t !== e;
          })),
          Promise.all(l).then(function () {
            a.concat(u).forEach(function (e) {
              var t, n;
              (t = i._hasColorOverlay(e.layerData)),
                t && (n = i._rgbToHex(t.color)),
                i._applyEffects(e.parent, e, { color: n });
            });
          })
        );
      },
      _updateSmartObject: function (e, t) {
        var n, i;
        return (
          (n = this),
          (i = e.layerData.smartObject),
          t instanceof PIXI.Texture ||
            (t.width !== i.width &&
              t.height !== i.height &&
              ((t = n._resizeToFitViewport(t, {
                width: i.width,
                height: i.height,
              })),
              (t = n._placeInCenter(t, { width: i.width, height: i.height })))),
          e.transformations.process(t).then(function (t) {
            e.transformations.effects.length && (n.hasTransformed = !0),
              n._swapTexture(e, t),
              (t = null);
          })
        );
      },
      _updateCustomGraphicReplacements: function (e, t, n) {
        var i, r, s, o, a, l;
        (i = this),
          (r = t.layerData),
          (s = r.smartObject),
          (o = s.smartObjectId),
          (a = []),
          (l = []),
          o
            ? i._treeWalker(i._stage, "children", function (e) {
                var t = e.layerData;
                t.smartObject &&
                  t.smartObject.smartObjectId === r.smartObject.smartObjectId &&
                  a.push(e);
              })
            : a.push(t),
          a.forEach(function (e) {
            (e.layerData.resizeToFill = t.layerData.resizeToFill),
              "undefined" != typeof e.layerData.affectedBy &&
                i._affectedCurves.push(e.layerData.affectedBy),
              l.push(i._updateCustomGraphicReplacement(e, n));
          });
        var c, u, h;
        (c = a.length), (u = []);
        for (var d = 0; c > d; d++)
          (h = i._getLayerParents(a[d])), h.length > 0 && u.push(h);
        return (
          (u = i._getUniqueParents(u)),
          (u = u.filter(function (t) {
            return t !== e;
          })),
          Promise.all(l).then(function () {
            a.concat(u).forEach(function (e) {
              var t, n;
              (t = i._hasColorOverlay(e.layerData)),
                t && (n = i._rgbToHex(t.color)),
                i._applyEffects(e.parent, e, { color: n });
            });
          })
        );
      },
      _updateCustomGraphicReplacement: function (e, t) {
        var n, i, r;
        return (
          (n = this),
          (i = e.layerData.smartObject),
          (r = "_resizeToFitViewport"),
          e.layerData.resizeToFill === !0 && (r = "_resizeToFillViewport"),
          (t = n[r](t, { width: i.width, height: i.height })),
          (t = n._placeInCenter(t, { width: i.width, height: i.height })),
          e.transformations.process(t).then(function (t) {
            e.transformations.effects.length && (n.hasTransformed = !0),
              n._swapTexture(e, t),
              (t = null);
          })
        );
      },
      updateCustomGraphic: function (e) {
        var t, n, i, r, s, o, a, l;
        return (
          (t = this),
          (n = t._getObjectByName(e.name))
            ? (n.children[0].layerData.name.indexOf("_original") > -1 &&
                ((container = n), (n = container.children[0])),
              (i = t._findReplaceLayer(n)),
              (r = i.layerData),
              (s = r.smartObject),
              (l = {}),
              (r.resizeToFill = e.resizeToFill),
              (r.visible = e.layers[0].visible),
              (i.viewport = e.layers[0].viewport),
              e.layers[0].image && e.visible !== !1
                ? (a = t._loadImageOnCanvas(e.layers[0].image))
                : ((o = t._cachedImages[s.layers[0].image]),
                  (a = Promise.resolve(o))),
              a.then(function (e) {
                return t
                  ._updateCustomGraphicReplacements(n, i, e)
                  .then(function () {
                    return n;
                  });
              }))
            : void console.warn("Layer not found, changes were not made")
        );
      },
      updateGraphic: function (e) {
        var t, n, i, r, s, o, a, l, c, u, h, d, p, f;
        return (
          (l = function (e, t, n) {
            (e.visible = !1),
              (t.width = n.width),
              (t.height = n.height),
              t.texture.destroy(),
              (t.texture = PIXI.Texture.EMPTY);
          }),
          (t = this),
          (n = t._getObjectByName("Graphics")),
          (i = t._getObjectByName(Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME)),
          (s = t._getObjectByName(e.name, n) || t._getObjectByName(e.name, i)),
          (r = s),
          s.children[0].layerData.name.indexOf("_original") > -1 &&
            (s = r.children[0]),
          (o = t._findReplaceLayer(s))
            ? ((a = e.layers.filter(function (e) {
                return e.visible;
              })[0]),
              (p = t._getObjectByName(s.layerData.name + "_multilayer", s)),
              (c = o.layerData),
              (u = c.smartObject.transform.transformPoints),
              (h = { width: u[2] - u[0], height: u[5] - u[3] }),
              (d = { x: u[0], y: u[1] }),
              p &&
                (t.dispatch("multilayerDestroy", {
                  path: [p.layerData.name, s.layerData.name].join("."),
                }),
                p.destroy()),
              a
                ? ((r.visible = !0),
                  a.type && "document" === a.type
                    ? ((f = {}),
                      (f.id = a.id),
                      (f.viewport = h),
                      o.texture.destroy(),
                      (o.texture = PIXI.Texture.EMPTY),
                      (o.scale.x = o.scale.y = 1),
                      t
                        .fetchAssetRule(f, e)
                        .then(function () {
                          return t._docIntoDoc(f, s);
                        })
                        .then(function (e) {
                          if ("undefined" == typeof e)
                            return l(r, o, h), Promise.resolve(r);
                          var n, i, a;
                          if (
                            ((n = Math.min(
                              e.viewport.width / e.structure.width,
                              e.viewport.height / e.structure.height
                            )),
                            (e.layer.width = Math.floor(e.layer.width * n)),
                            (e.layer.height = Math.floor(e.layer.height * n)),
                            (e.localBounds = e.layer.getLocalBounds()),
                            (i =
                              d.x +
                              (h.width - Math.floor(e.structure.width * n)) /
                                2),
                            (a =
                              d.y +
                              (h.height - Math.floor(e.structure.height * n)) /
                                2),
                            (r.x = i + Math.floor(n * e.localBounds.x)),
                            (r.y = a + Math.floor(n * e.localBounds.y)),
                            t._treeWalker(e.layer, "children", function (t) {
                              if (
                                (t.children.length > 0 &&
                                  /_original/.test(
                                    t.children[0].layerData.name
                                  ) &&
                                  ((t.isFakeContainer = !0),
                                  (t.x -= e.localBounds.x),
                                  (t.y -= e.localBounds.y)),
                                0 === t.children.length)
                              ) {
                                var n, i;
                                for (n = t.parent, i = !0; n !== e.layer; )
                                  n.isFakeContainer === !0 && (i = !1),
                                    (n = n.parent);
                                i &&
                                  ((t.x -= e.localBounds.x),
                                  (t.y -= e.localBounds.y));
                              }
                            }),
                            (e.layer.x = 0),
                            (e.layer.y = 0),
                            s && s.mask)
                          ) {
                            var c = s.getBounds(),
                              u = t._clip(
                                t._cachedMasks[s.layerData.mask.image],
                                {
                                  x: c.x,
                                  y: c.y,
                                  width: s.width,
                                  height: s.height,
                                }
                              );
                            t._swapTexture(s.mask, u);
                          }
                          return (
                            (e.layer.scale.x = 1),
                            (e.layer.scale.y = 1),
                            e.layer.resize(n, n),
                            r
                          );
                        }))
                    : t._getImageUrl(a).then(function (e) {
                        return (
                          (t._assetsData[s.children[0].layerData.name] = {
                            assetUrl: e,
                          }),
                          t
                            ._resourceToCanvas({
                              type: e.indexOf(".svg") > -1 ? "svg" : "bitmap",
                              url: e,
                              viewport: { width: 1e3, height: 1e3 },
                            })
                            .then(function (e) {
                              var n, i, c, d, p;
                              return (
                                (p = Math.min(
                                  h.width / e.width,
                                  h.height / e.height
                                )),
                                0 === e.height || 0 === e.width
                                  ? (t.dispatch("imageLoad:empty", {
                                      message:
                                        "Sorry, this graphic seems to be failing. Please select another graphic!",
                                      graphic: a,
                                    }),
                                    l(r, o, h),
                                    Promise.resolve(r))
                                  : ((n = t._getTrimBounds(e)),
                                    n.right - n.left && n.bottom - n.top
                                      ? ((i = new PIXI.Rectangle(
                                          0,
                                          0,
                                          e.width,
                                          e.height
                                        )),
                                        (c = new PIXI.Rectangle(
                                          n.left,
                                          n.top,
                                          n.right - n.left,
                                          n.bottom - n.top
                                        )),
                                        (d = new PIXI.Texture(
                                          new PIXI.BaseTexture(e),
                                          c,
                                          i
                                        )),
                                        t
                                          ._updateSmartObjects(s, o, d)
                                          .then(function () {
                                            if (
                                              ((r.scale = { x: 1, y: 1 }),
                                              o.resize(p, p),
                                              (r.x =
                                                u[0] +
                                                (h.width - e.width * p) / 2 +
                                                n.left * p),
                                              (r.y =
                                                u[1] +
                                                (h.height - e.height * p) / 2 +
                                                n.top * p),
                                              s && s.mask)
                                            ) {
                                              var i = s.getBounds(),
                                                a = t._clip(
                                                  t._cachedMasks[
                                                    s.layerData.mask.image
                                                  ],
                                                  {
                                                    x: i.x,
                                                    y: i.y,
                                                    width: s.width,
                                                    height: s.height,
                                                  }
                                                );
                                              t._swapTexture(s.mask, a);
                                            }
                                            return r;
                                          }))
                                      : (l(r, o, h), Promise.resolve(r)))
                              );
                            })
                        );
                      }))
                : (l(r, o, h), Promise.resolve(r)))
            : Promise.resolve()
        );
      },
      _clip: function (e, t) {
        var n = document.createElement("canvas"),
          i = n.getContext("2d");
        return (
          (n.width = t.width),
          (n.height = t.height),
          i.drawImage(e, t.x, t.y, t.width, t.height, 0, 0, t.width, t.height),
          n
        );
      },
      updateBackground: function (e) {
        var t, n, i, r, s, o;
        if (
          ((t = this),
          (n = t._getObjectByName(e.name)),
          (i = e.layers.filter(function (e) {
            return e.visible;
          })[0]),
          e.graphicChanged)
        ) {
          if (
            ((r = n.children[0].layerData),
            (s = r.smartObject.transform.transformPoints),
            (o = { width: s[2] - s[0], height: s[5] - s[3] }),
            i)
          )
            return (
              (n.visible = !0),
              t
                ._getImageUrl(i)
                .then(function (e) {
                  return (
                    (t._assetsData[n.children[0].layerData.name] = {
                      assetUrl: e,
                    }),
                    t._resourceToCanvas({
                      type: e.indexOf(".svg") > -1 ? "svg" : "bitmap",
                      url: e,
                      viewport: { width: 1e3, height: 1e3 },
                    })
                  );
                })
                .then(function (e) {
                  var r, s, a, l, c;
                  return (
                    (c = Math.max(o.width / e.width, o.height / e.height)),
                    (r = t._getTrimBounds(e)),
                    (s = new PIXI.Rectangle(0, 0, e.width, e.height)),
                    (a = new PIXI.Rectangle(
                      r.left,
                      r.top,
                      r.right - r.left,
                      r.bottom - r.top
                    )),
                    e instanceof HTMLCanvasElement == !1 &&
                      (e = t._drawImageOnCanvas(e)),
                    (l = new PIXI.Texture(new PIXI.BaseTexture(e), a, s)),
                    t
                      ._updateSmartObjects(n, n.children[0], l)
                      .then(function () {
                        return (
                          (n.scale = { x: 1, y: 1 }),
                          (n.children[0].scale.x = c),
                          (n.children[0].scale.y = c),
                          (n.x = (o.width - e.width * c) / 2 + r.left * c),
                          (n.y = (o.height - e.height * c) / 2 + r.top * c),
                          t._applyLuminosityCorrection(i, n.children[0]),
                          n
                        );
                      })
                  );
                })
            );
          t._swapTexture(n.children[0], PIXI.Texture.EMPTY, o),
            (n.visible = !1);
        }
        return Promise.resolve(n);
      },
      _swapTexture: function (e, t, n) {
        (e.width = (n || t).width),
          (e.height = (n || t).height),
          e.texture.destroy(),
          (e.texture = PIXI.Texture.from(t));
      },
      _resetPosition: function (e) {
        var t = this;
        return (
          t._treeWalker(e, "children", function (e) {
            (e.x = 0), (e.y = 0);
          }),
          (e.x = 0),
          (e.y = 0),
          e
        );
      },
      _getCurrentTextContents: function (e) {
        for (var t = this, n = 0; n < t._uiJSON.text.length; n++)
          if (e == t._uiJSON.text[n].name) return t._uiJSON.text[n].contents;
      },
      _isLinkedToCustomGraphic: function (e) {
        var t, n, i, r;
        return (
          (t = this),
          (n = !1),
          (i = e.smartObject),
          (r = i.smartObjectId),
          Engine.validCustomGraphic.test(e.name)
            ? !0
            : (r &&
                t._treeWalker(t._structureJSON, "layers", function (e) {
                  var t, i;
                  (t = e.smartObject),
                    t &&
                      Engine.validCustomGraphic.test(e.name) !== !1 &&
                      ((i = t.smartObjectId), i && r === i && (n = !0));
                }),
              n)
        );
      },
      _circlePath: function (e, t, n) {
        return (
          "M " +
          e +
          " " +
          t +
          " m -" +
          n +
          ", 0 a " +
          n +
          "," +
          n +
          " 0 1,0 " +
          2 * n +
          ",0 a " +
          n +
          "," +
          n +
          " 0 1,0 -" +
          2 * n +
          ",0"
        );
      },
      _drawArcText: function (e) {
        var t = this,
          n = "http://www.w3.org/2000/svg",
          i = { LEFT: "start", CENTER: "middle", RIGHT: "end" },
          r = [];
        "undefined" == typeof e.width && (e.width = t._structureJSON.width),
          "undefined" == typeof e.height &&
            (e.height = t._structureJSON.height),
          (e.scale = 1);
        var s = document.createElementNS(n, "svg"),
          o = document.createElementNS(n, "path"),
          a = document.createElementNS(n, "text"),
          l = document.createElementNS(n, "textPath");
        return (
          s.appendChild(o),
          s.appendChild(a).appendChild(l),
          s.setAttribute("width", e.width * e.scale),
          s.setAttribute("height", e.height * e.scale),
          s.setAttribute("transform", "scale(" + e.scale + ")"),
          o.setAttribute("id", "curvePath"),
          o.setAttribute(
            "d",
            t._circlePath(e.center.x, e.center.y, e.diameter / 2)
          ),
          o.setAttribute("fill", "none"),
          r.push(
            "rotate(90," +
              (e.scale * e.width) / 2 +
              "," +
              (e.scale * e.height) / 2 +
              ")"
          ),
          a.setAttribute("fill", e.color),
          a.setAttribute("font-size", e.fontSize),
          a.setAttribute("font-family", e.fontFamily),
          (l.innerHTML = e.contents
            .replace(/&/g, "&amp;")
            .replace(/\</g, "&lt;")
            .replace(/\>/g, "&gt;")),
          l.setAttribute("text-anchor", i[e.justification]),
          l.setAttribute("alignment-baseline", "central"),
          l.setAttribute("dominant-baseline", "central"),
          l.setAttribute("startOffset", "50%"),
          l.setAttribute("letter-spacing", e.kerning / 50),
          l.setAttributeNS(
            "http://www.w3.org/1999/xlink",
            "xlink:href",
            "#" + o.id
          ),
          (e.startAngle = (e.startAngle + 360) % 360),
          (e.startAngle <= 90 || e.startAngle >= 270) &&
            (r.push("scale(-1,1)"), r.push("translate(-" + e.width + ")")),
          o.setAttribute("transform", r.join(",")),
          t
            ._renderSvg(s, {
              width: e.width * e.scale,
              height: e.height * e.scale,
            })
            .then(function (e) {
              return t._drawImageOnCanvas(e);
            })
        );
      },
      _drawText: function (e, t, n, i, r, s, o, a, l) {
        var c, u, h, d, p, f, m, g, v, _, y;
        return (
          (c = this),
          (u = c._fontTags[t]),
          (h = "http://www.w3.org/2000/svg"),
          (d = document.createElementNS(h, "defs")),
          (p = document.createElementNS(h, "style")),
          (g = document.createElementNS(h, "text")),
          (v = document.createElementNS(h, "g")),
          (_ = document.createElementNS(h, "svg")),
          c._uiJSON.disableAA &&
            (_.insertAdjacentHTML(
              "beforeend",
              '                    <defs>                    <filter id="crispify">                    <feComponentTransfer>                    <feFuncA type="discrete" tableValues="0 1"/>                    </feComponentTransfer>                    </filter>                    </defs>'
            ),
            _.setAttribute("filter", "url(#crispify)")),
          (y = { LEFT: "start", CENTER: "middle", RIGHT: "end" }),
          (i = i
            .replace(/&/g, "&amp;")
            .replace(/\</g, "&lt;")
            .replace(/\>/g, "&gt;")),
          a && "ALLCAPS" === a && (i = i.toUpperCase()),
          g.setAttribute("fill", n),
          g.setAttribute("font-size", parseFloat(e)),
          g.setAttribute("font-family", (u && u.name) || ""),
          g.setAttribute("letter-spacing", (s * parseFloat(e)) / 1e3),
          (f = i.split("\r")),
          f.forEach(function (t, n) {
            (m = document.createElementNS(h, "tspan")),
              m.setAttribute("x", 0),
              m.setAttribute("dy", 0 === n ? 0 : l || 1.2 * parseFloat(e)),
              (m.innerHTML = t ? t : ""),
              g.appendChild(m);
          }),
          _.appendChild(v),
          v.appendChild(g),
          g.setAttribute("alignment-baseline", "alphabetic"),
          g.setAttribute("text-anchor", y[r]),
          g.setAttribute("x", 0),
          g.setAttribute("y", 0),
          _.setAttribute("width", 100),
          _.setAttribute("height", 100),
          (p.innerHTML = u && u.style.innerHTML),
          d.appendChild(p),
          _.insertBefore(d, v),
          Promise.resolve(_)
        );
      },
      _createTextLayer: function (e) {
        var t, n, i, r, s;
        return e.path
          ? ((t = new Image()),
            (n = {
              type: "text",
              isArc: !0,
              contents: e.contents,
              diameter: e.path.diameter,
              startAngle: e.path.startAngle,
              justification: e.justification,
              textInside: !1,
              outwardFacing: e.flip,
              fontFamily: e.font,
              fontSize: e.fontSize,
              letterSpacing: e.kerning,
              color: e.color,
              sizeConstant: 1,
              center: e.path.center,
              capitalization: e.capitalization,
            }),
            engine._resourceToCanvas(n).then(function (t) {
              var n, i, r, s, o;
              return (
                (n = new PIXI.Rectangle(0, 0, t.width, t.height)),
                (i = engine._getTrimBounds(t)),
                (r = new PIXI.Rectangle(
                  i.left,
                  i.top,
                  i.right - i.left,
                  i.bottom - i.top
                )),
                (s = new PIXI.Texture(new PIXI.BaseTexture(t), r, n)),
                (o = new PIXI.Sprite(s)),
                (o.visible = e.visible),
                (o.layerData = e),
                (o.alpha =
                  1 * ((e.opacity || 100) / 100) * ((e.fill || 100) / 100)),
                (o.x = i.left),
                (o.y = i.top),
                o
              );
            }))
          : engine
              ._drawText(
                e.fontSize,
                e.fontFamily,
                e.color,
                e.contents,
                e.justification,
                e.kerning,
                e.position,
                e.capitalization,
                e.lineSpacing
              )
              .then(function (e) {
                return engine
                  ._measureSvgText(e)
                  .then(function (t) {
                    var n, s, o, a, l, c, u;
                    return (
                      engine._uiJSON.highResolution === !0
                        ? ((c = 5400), (u = 4500))
                        : ((c = 1e3), (u = 834)),
                      (l = Math.min(c / t.width, u / t.height)),
                      (l = Math.min(1, l)),
                      (i = {
                        x: 0 - t.x * l,
                        y: 0 - t.y * l,
                        dimensions: {
                          x: t.x * l,
                          y: t.y * l,
                          width: t.width * l,
                          height: t.height * l,
                        },
                      }),
                      (s = t.width * l),
                      (o = t.height * l),
                      (a = e.getElementsByTagName("g")[0]),
                      a.setAttribute("transform", "scale(" + l + " " + l + ")"),
                      (n = e.getElementsByTagName("text")[0]),
                      n.setAttribute(
                        "transform",
                        "translate(" +
                          (i.x + 1.5 * t.width) +
                          ", " +
                          (i.y + 1.5 * t.height) +
                          ")"
                      ),
                      e.setAttribute("width", 3.5 * s),
                      e.setAttribute("height", 3.5 * o),
                      (r = e),
                      e
                    );
                  })
                  .then(function (e) {
                    return engine._resourceToCanvas({ type: "svg", svg: e });
                  });
              })
              .then(function (t) {
                return new Promise(function (e) {
                  var n, i;
                  (s = engine._getTrimBounds(t)),
                    (n = s.right - s.left),
                    (i = s.bottom - s.top),
                    r.setAttribute("width", n),
                    r.setAttribute("height", i),
                    r.setAttribute(
                      "viewBox",
                      s.left + " " + s.top + " " + n + " " + i
                    ),
                    e(r);
                })
                  .then(function (e) {
                    return engine._resourceToCanvas({ type: "svg", svg: e });
                  })
                  .then(function (t) {
                    var n, r;
                    return (
                      (n = new PIXI.Texture(new PIXI.BaseTexture(t))),
                      (r = new PIXI.Sprite(n)),
                      (r.visible = e.visible),
                      (r.layerData = e),
                      (r.alpha =
                        1 *
                        ((e.opacity || 100) / 100) *
                        ((e.fill || 100) / 100)),
                      (r.x =
                        s.left + e.position.x - i.x - 1.5 * i.dimensions.width),
                      (r.y =
                        s.top + e.position.y - i.y - 1.5 * i.dimensions.height),
                      r
                    );
                  });
              });
      },
      update: function (e) {
        var t, n;
        return (
          (t = this),
          (n = []),
          FlowChecker.Update.before(),
          e.text.forEach(function (e) {
            var i = t._getObjectByName(e.name);
            void 0 !== i.layerData.affectedBy &&
              t._affectedCurves.push(i.layerData.affectedBy),
              n.push(
                t.updateText(e).then(function () {
                  return t._updateLayerEffects(e);
                })
              );
          }),
          e.graphic.forEach(function (e) {
            var i = t._getObjectByName(e.name);
            void 0 !== i.layerData.affectedBy &&
              t._affectedCurves.push(i.layerData.affectedBy),
              n.push(
                e.graphicChanged
                  ? t.updateGraphic(e).then(function () {
                      return t._updateLayerEffects(e);
                    })
                  : t._updateLayerEffects(e)
              );
          }),
          e.background.forEach(function (e) {
            var i;
            (i = t._getObjectByName(e.name)),
              void 0 !== i.layerData.affectedBy &&
                t._affectedCurves.push(i.layerData.affectedBy),
              n.push(
                t.updateBackground(e).then(function () {
                  return t._updateLayerEffects(e);
                })
              );
          }),
          e.customGraphic.forEach(function (e) {
            var i = t._getObjectByName(e.name);
            void 0 !== i.layerData.affectedBy &&
              t._affectedCurves.push(i.layerData.affectedBy),
              n.push(
                t.updateCustomGraphic(e).then(function () {
                  return t._updateLayerEffects(e);
                })
              );
          }),
          e.backgroundColor &&
            n.push(
              t.updateBackgroundColor(e.backgroundColor).then(function () {
                return t._updateLayerEffects(e.backgroundColor);
              })
            ),
          Promise.all(n)
        );
      },
      destroy: function (e) {
        var t = this;
        t._stage &&
          (t._stage.children[0] && t._stage.children[0].destroy(e),
          t._stage.destroy(e)),
          (Engine.prototype._adjustmentLayers = []),
          (Engine.prototype._touchedByAdjustments = {}),
          (Engine.prototype._cachedImages = {}),
          (Engine.prototype._cachedColladaFiles = {}),
          (Engine.prototype._cachedMeshFiles = {}),
          (Engine.prototype._cachedMasks = {}),
          (Engine.prototype._affectedCurves = []),
          (t.eventListeners = null),
          (t.guideHorizontal = null),
          (t.guideVertical = null),
          (t._affectedCurves = null),
          (t._affectedCurves2 = null),
          (t._canvas = null),
          (t._debugTable = null),
          (t._effectsQ = null),
          (t._optionsJson = null),
          (t._originalRulesValues = null),
          (t._renderSettings = null),
          (t._runRules = null),
          (t._structureJSON = null),
          (t._uiJSON = null),
          t._rulesTree && t._rulesTree.destroy(e),
          t._tmpRenderer && t._tmpRenderer.destroy(e),
          (t._tmpRenderer = null),
          t._canvasRenderer && t._canvasRenderer.destroy(e),
          (t._canvasRenderer = null);
      },
      _measureSvg: function (e) {
        var t, n, i, r;
        return (
          (t = e.getAttribute("width")),
          (n = e.getAttribute("height")),
          t && n
            ? Promise.resolve({ width: parseFloat(t), height: parseFloat(n) })
            : ((r = document.createElement("div")),
              r.appendChild(e),
              (r.style.position = "absolute"),
              (r.style.visibility = "hidden"),
              document.body.appendChild(r),
              new Promise(function (e) {
                setTimeout(function () {
                  (i = r.children[0].getBBox()), r.remove(), e(i);
                }, 0);
              }))
        );
      },
      _measureSvgText: function (e) {
        var t, n, i, r, s, o;
        return (
          (t = 30),
          (r = e.getElementsByTagName("text")[0]),
          (o = r.getAttribute("font-family")),
          r.setAttribute("font-family", ""),
          (i = document.createElement("div")),
          i.appendChild(e),
          (i.style.width = 0),
          (i.style.height = 0),
          (i.style.overflow = "hidden"),
          document.body.appendChild(i),
          (s = r.getBBox()),
          new Promise(function (e) {
            var a = function () {
              (n = r.getBBox()),
                0 === t || "" === o || n.width !== s.width
                  ? (i.remove(), e(n))
                  : setTimeout(function () {
                      a();
                    }, 0),
                t--;
            };
            setTimeout(function () {
              r.setAttribute("font-family", o), a();
            }, 0);
          })
        );
      },
      _textToSvg: function (e) {
        if ("text" !== e.type) return Promise.resolve(e);
        var t = { LEFT: "start", CENTER: "middle", RIGHT: "end" },
          n = this,
          i = "http://www.w3.org/2000/svg",
          r = {},
          s = document.createElementNS(i, "defs"),
          o = document.createElementNS(i, "style"),
          a = document.createElementNS(i, "text");
        (r.svg = document.createElementNS(i, "svg")),
          (r.type = "svg"),
          n._uiJSON.disableAA &&
            (r.svg.insertAdjacentHTML(
              "beforeend",
              '                    <defs>                    <filter id="crispify">                    <feComponentTransfer>                    <feFuncA type="discrete" tableValues="0 1"/>                    </feComponentTransfer>                    </filter>                    </defs>'
            ),
            r.svg.setAttribute("filter", "url(#crispify)")),
          (r.viewport = e.viewport);
        var l = n._fontTags[e.fontFamily];
        return (
          (e.contents = e.contents
            .replace(/&/g, "&amp;")
            .replace(/\</g, "&lt;")
            .replace(/\>/g, "&gt;")),
          e.capitalization &&
            "ALLCAPS" === e.capitalization &&
            (e.contents = e.contents.toUpperCase()),
          a.setAttribute("fill", e.color),
          a.setAttribute("font-size", e.fontSize),
          a.setAttribute("font-family", (l && l.name) || ""),
          e.isArc
            ? Ngin.SVGText.prototype.getDeltas(e).then(function (c) {
                var u = c.middle;
                e.contents.toLowerCase() === e.contents && (u = c.lower),
                  e.contents.toUpperCase() === e.contents && (u = c.upper);
                var h = [],
                  d = document.createElementNS(i, "path"),
                  p = document.createElementNS(i, "textPath"),
                  f = document.createElementNS(i, "g");
                return (
                  r.svg.appendChild(f),
                  f.appendChild(d),
                  f.appendChild(a).appendChild(p),
                  d.setAttribute("id", "curvePath"),
                  d.setAttribute(
                    "d",
                    n._circlePath(e.center.x, e.center.y, e.diameter / 2)
                  ),
                  d.setAttribute("fill", "none"),
                  (p.innerHTML =
                    '<tspan dy="' +
                    (u * e.fontSize) / 50 +
                    '">' +
                    e.contents +
                    "</tspan>"),
                  p.setAttribute("text-anchor", t[e.justification]),
                  p.setAttribute("alignment-baseline", ""),
                  p.setAttribute("dominant-baseline", ""),
                  p.setAttribute("startOffset", "50%"),
                  p.setAttribute(
                    "letter-spacing",
                    (e.letterSpacing * parseFloat(e.fontSize)) / 1e3
                  ),
                  p.setAttributeNS(
                    "http://www.w3.org/1999/xlink",
                    "xlink:href",
                    "#" + d.id
                  ),
                  (e.startAngle = (e.startAngle + 360) % 360),
                  e.startAngle <= 90 || e.startAngle >= 270
                    ? (h.push(
                        "rotate(" +
                          (e.startAngle + 90) +
                          "," +
                          e.center.x +
                          "," +
                          e.center.y +
                          ")"
                      ),
                      h.push("scale(-1,1)"),
                      h.push("translate(" + -2 * e.center.x + ",0)"))
                    : h.push(
                        "rotate(" +
                          (e.startAngle - 90) +
                          "," +
                          e.center.x +
                          "," +
                          e.center.y +
                          ")"
                      ),
                  d.setAttribute("transform", h.join(",")),
                  r.svg.setAttribute("width", n._structureJSON.width),
                  r.svg.setAttribute("height", n._structureJSON.height),
                  (o.innerHTML = l && l.style.innerHTML),
                  s.appendChild(o),
                  r.svg.appendChild(s),
                  r
                );
              })
            : (a.setAttribute(
                "letter-spacing",
                (e.letterSpacing * parseFloat(e.fontSize)) / 1e3
              ),
              (a.innerHTML = e.contents),
              a.setAttribute("alignment-baseline", "alphabetic"),
              a.setAttribute("text-anchor", t[e.justification]),
              r.svg.appendChild(a),
              a.setAttribute("x", anchor.x),
              a.setAttribute("y", anchor.y),
              r.svg.setAttribute("width", n._structureJSON.width),
              r.svg.setAttribute("height", n._structureJSON.height),
              (o.innerHTML = l && l.style.innerHTML),
              s.appendChild(o),
              r.svg.appendChild(s),
              Promise.resolve(r))
        );
      },
      _svgToBitmap: function (e) {
        if ("svg" !== e.type) return Promise.resolve(e);
        var t = {};
        (t.type = "bitmap"), (t.viewport = e.viewport);
        var n;
        if ("undefined" == typeof e.url) {
          var i = new XMLSerializer().serializeToString(e.svg);
          n = Promise.resolve(
            "data:image/svg+xml;utf8," + encodeURIComponent(i)
          );
        } else
          n =
            0 == e.url.indexOf("data:image/svg+xml")
              ? Promise.resolve(e.url)
              : engine._requestSvgAsXml(e.url).then(function (t) {
                  engine._uiJSON.disableAA &&
                    t.setAttribute("shape-rendering", "crispEdges");
                  var n = t.getAttribute("viewBox");
                  return (
                    n &&
                      ((n = n.split(" ")),
                      t.setAttribute("width", 10 * parseFloat(n[2])),
                      t.setAttribute("height", 10 * parseFloat(n[3]))),
                    (e.svg = t),
                    engine._measureSvg(t).then(function (t) {
                      if (e.viewport && (t.width > 1e3 || t.height > 1e3)) {
                        var n = Math.min(
                          e.viewport.width / t.width,
                          e.viewport.height / t.height
                        );
                        e.svg.setAttribute("width", t.width * n),
                          e.svg.setAttribute("height", t.height * n);
                      } else e.svg.setAttribute("width", t.width), e.svg.setAttribute("height", t.height);
                      var i = new XMLSerializer().serializeToString(e.svg);
                      return "data:image/svg+xml;utf8," + encodeURIComponent(i);
                    })
                  );
                });
        return (n = n.then(engine._loadBitmapImage).then(function (e) {
          return (t.img = e), t;
        }));
      },
      _requestSvgAsXml: function (e) {
        return new Promise(function (t, n) {
          var i;
          (i = new XMLHttpRequest()),
            i.open("get", e, !0),
            (i.onreadystatechange = function () {
              if (4 === i.readyState)
                if (200 === i.status) {
                  var e = i.responseXML.getElementsByTagName("svg")[0];
                  e.setAttribute("preserveAspectRatio", "none");
                  for (
                    var n = e.getElementsByTagName("foreignObject"), r = 0;
                    r < n.length;
                    r++
                  )
                    n[r].remove();
                  t(e);
                } else {
                  var s = document.createElement("svg");
                  s.setAttribute("width", 0), s.setAttribute("height", 0), t(s);
                }
            }),
            (i.onerror = n),
            i.send();
        });
      },
      _getSvgDimensions: function (e, t, n) {
        return new Promise(function (i, r) {
          var s, o, a;
          (a = {}),
            (s = new Image()),
            /data:image/.test(e) === !1 && (s.crossOrigin = "Anonymous"),
            (o = document.createElement("div")),
            (s.style.position = "absolute"),
            (s.style.visibility = "hidden"),
            o.appendChild(s),
            document.body.appendChild(o),
            (s.onload = function () {
              var e;
              (e = Math.min(t.width / s.width, t.height / s.height)),
                "resizeToFill" === n &&
                  (e = Math.max(t.width / s.width, t.height / s.height)),
                (a.width = s.width * e),
                (a.height = s.height * e),
                o.remove(),
                s.remove(),
                i(a);
            }),
            (s.onerror = function (e) {
              o.remove(), s.remove(), r(e);
            }),
            (s.src = e);
        });
      },
      turnOffText: function () {
        var e = this,
          t = {};
        return (
          e._uiJSON.text.forEach(function (n) {
            var i = e._getObjectByName(n.name);
            (t[n.name] = i.visible), (i.visible = !1);
          }),
          e._refresh(),
          t
        );
      },
      turnOnText: function (e) {
        engine._uiJSON.text.forEach(function (t) {
          var n = engine._getObjectByName(t.name);
          n.visible = e[t.name] || !1;
        }),
          engine._refresh();
      },
      addBackgroundLayer: function (e) {
        if ("undefined" != typeof e.bgOpacity) {
          var t, n, i, r, s, o, a, l;
          (t = this),
            (n = t._getObjectByName(e.name + "_original")),
            (l = t._getObjectByName(e.name + "_bg")),
            l && t.removeBackgroundLayer(e),
            parseInt(e.bgOpacity) &&
              ((i = n.height * e.bgPaddingFraction),
              (n.x = i),
              (n.y = i),
              (r = n.width + 2 * i),
              (s = n.height + 2 * i),
              (o = {
                color: parseInt(e.bgColor.replace("#", ""), 16),
                opacity: e.bgOpacity,
                width: r,
                height: s,
              }),
              (a = t._createRectangleLayer(o)),
              (a.layerData = {
                paddingFraction: e.bgPaddingFraction,
                color: e.bgColor,
                opacity: e.bgOpacity,
                name: e.name + "_bg",
                type: "TextBG",
                visible: !0,
                width: r,
                height: s,
              }),
              n.parent.addChildAt(a, 0));
        }
      },
      removeBackgroundLayer: function (e) {
        var t, n;
        (t = this),
          (parent = t._getObjectByName(e.name)),
          (hasBGChild = !1),
          parent.children.forEach(function (e) {
            hasBGChild = hasBGChild || e.layerData.name.indexOf("_bg") > 0;
          }),
          hasBGChild &&
            ((n = t._getObjectByName(e.name + "_original")),
            (n.x = 0),
            (n.y = 0),
            parent.children.forEach(function (e, t) {
              if (e.layerData.name.indexOf("_bg") > 0) {
                var n = parent.removeChildAt(t);
                n.destroy({ children: !0, texture: !0, baseTexture: !0 });
              }
            }));
      },
      _createRectangleLayer: function (e) {
        var t;
        return (
          (t = new PIXI.Graphics()),
          (t.alpha = e.opacity),
          t.beginFill(e.color),
          t.lineStyle(0, e.color),
          t.drawRect(0, 0, e.width, e.height),
          t.endFill(),
          t
        );
      },
    },
  }),
  Module(
    Ngin,
    "Rules"
  )({
    _RULES_EFFECTS_FOLDER_ID: 2234626524,
    _RULES_EFFECTS_FOLDER_NAME: "Rules Effects",
    prototype: {
      addRuleEffectsFolder: function () {
        var e = this._structureJSON.layers.filter(function (e) {
          return "Design" === e.name;
        })[0];
        e.layers.splice(0, 0, {
          id: Ngin.Rules._RULES_EFFECTS_FOLDER_ID,
          name: Ngin.Rules._RULES_EFFECTS_FOLDER_NAME,
          type: "Folder",
          opacity: 100,
          visible: !0,
          styles: { blendOptions: { mode: "passThrough" } },
          layers: [],
        });
      },
      _renderTextForFitting: function (e, t) {
        var n, i, r, s, o;
        return (
          (n = 8),
          engine._uiJSON.highResolution === !0 && (n = 4.2 * n),
          (i = e.width + 2 * n),
          (r = e.height + 2 * n),
          t
            ? ((i = engine._canvasRenderer.width),
              (r = engine._canvasRenderer.height))
            : ((e.x += n), (e.y += n)),
          (s = this._webGLRenderer),
          s.resize(i, r),
          (strokeFilter = new PIXI.filters.OutlineFilter(n, 0, 1)),
          (strokeFilter.padding = n),
          (e.filters = [strokeFilter]),
          s.render(e),
          t || ((e.x -= n), (e.y -= n)),
          (e.filters = []),
          (o = { view: _copyCanvas(s.view) }),
          s.resize(1, 1),
          o
        );
      },
      flattenRuleGroup: function (e) {
        var t = new PIXI.Container();
        return (
          e.forEach(function (e) {
            var n = new PIXI.Sprite.from(e.layer.children[0].texture);
            n.layerData = { name: "fitting_layer_" + Date.now() };
            var i = e.layer.getBounds().width / n.getBounds().width;
            n.resize(i, i),
              n.translate(e.layer.getBounds().x, e.layer.getBounds().y),
              t.addChild(n);
          }),
          t
        );
      },
      getDocumentDimensions: function () {
        return {
          width: this._canvasRenderer.width,
          height: this._canvasRenderer.height,
        };
      },
      _hideEffects: function (e) {
        var t, n;
        if (
          ((t = this), (n = t._getObjectByName(e.layerData.name + "_original")))
        )
          for (var i = 0; i < e.children.length; i++)
            e.children[i].visible =
              e.children[i].layerData.name === e.layerData.name + "_original";
      },
      _getTransformationPoints: function (e) {
        var t = {};
        return (
          (t.Bulge = [
            { x: 0, y: 0 },
            { x: 100, y: 100 },
            { x: 200, y: 100 },
            { x: 300, y: 0 },
            { x: 0, y: 100 },
            { x: 100, y: 100 },
            { x: 200, y: 100 },
            { x: 300, y: 100 },
            { x: 0, y: 200 },
            { x: 100, y: 200 },
            { x: 200, y: 200 },
            { x: 300, y: 200 },
            { x: 0, y: 300 },
            { x: 100, y: 200 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
          ]),
          (t["Straight Low Arch"] = [
            { x: 0, y: 0 },
            { x: 100, y: 0 },
            { x: 200, y: 0 },
            { x: 300, y: 0 },
            { x: 0, y: 100 },
            { x: 100, y: 80 },
            { x: 200, y: 80 },
            { x: 300, y: 100 },
            { x: 0, y: 200 },
            { x: 100, y: 120 },
            { x: 200, y: 120 },
            { x: 300, y: 200 },
            { x: 0, y: 300 },
            { x: 100, y: 160 },
            { x: 200, y: 160 },
            { x: 300, y: 300 },
          ]),
          (t["Open Low Arch"] = [
            { x: 40, y: 0 },
            { x: 120, y: 0 },
            { x: 180, y: 0 },
            { x: 260, y: 0 },
            { x: 27, y: 100 },
            { x: 100, y: 90 },
            { x: 200, y: 90 },
            { x: 273, y: 100 },
            { x: 13, y: 200 },
            { x: 100, y: 150 },
            { x: 200, y: 150 },
            { x: 287, y: 200 },
            { x: 0, y: 300 },
            { x: 100, y: 200 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
          ]),
          (t["Closed Low Arch"] = [
            { x: 0, y: 0 },
            { x: 100, y: 0 },
            { x: 200, y: 0 },
            { x: 300, y: 0 },
            { x: 20, y: 100 },
            { x: 100, y: 80 },
            { x: 200, y: 80 },
            { x: 280, y: 100 },
            { x: 40, y: 200 },
            { x: 100, y: 120 },
            { x: 200, y: 120 },
            { x: 260, y: 200 },
            { x: 60, y: 300 },
            { x: 120, y: 160 },
            { x: 180, y: 160 },
            { x: 240, y: 300 },
          ]),
          (t["Straight Up Arch"] = [
            { x: 0, y: 84 },
            { x: 100, y: -16 },
            { x: 200, y: -16 },
            { x: 300, y: 84 },
            { x: 0, y: 156 },
            { x: 100, y: 54 },
            { x: 200, y: 54 },
            { x: 300, y: 156 },
            { x: 0, y: 228 },
            { x: 100, y: 128 },
            { x: 200, y: 128 },
            { x: 300, y: 228 },
            { x: 0, y: 300 },
            { x: 100, y: 200 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
          ]),
          (t["Open Up Arch"] = [
            { x: 40, y: 84 },
            { x: 120, y: -16 },
            { x: 180, y: -16 },
            { x: 260, y: 84 },
            { x: 27, y: 156 },
            { x: 100, y: 54 },
            { x: 200, y: 54 },
            { x: 273, y: 156 },
            { x: 13, y: 228 },
            { x: 100, y: 128 },
            { x: 200, y: 128 },
            { x: 287, y: 228 },
            { x: 0, y: 300 },
            { x: 100, y: 200 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
          ]),
          (t["Closed Up Arch"] = [
            { x: 0, y: 84 },
            { x: 100, y: -16 },
            { x: 200, y: -16 },
            { x: 300, y: 84 },
            { x: 20, y: 156 },
            { x: 100, y: 54 },
            { x: 200, y: 54 },
            { x: 280, y: 156 },
            { x: 40, y: 228 },
            { x: 100, y: 128 },
            { x: 200, y: 128 },
            { x: 260, y: 228 },
            { x: 60, y: 300 },
            { x: 120, y: 200 },
            { x: 180, y: 200 },
            { x: 240, y: 300 },
          ]),
          t[e] || [
            { x: 0, y: 0 },
            { x: 100, y: 100 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
            { x: 0, y: 0 },
            { x: 100, y: 100 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
            { x: 0, y: 0 },
            { x: 100, y: 100 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
            { x: 0, y: 0 },
            { x: 100, y: 100 },
            { x: 200, y: 200 },
            { x: 300, y: 300 },
          ]
        );
      },
      _adjustTransformationPoints: function (e, t) {
        for (var n = 0; n < e.length; n++)
          (e[n].x = (e[n].x * t.width) / 300),
            (e[n].y = (e[n].y * t.height) / 300);
        return e;
      },
      _getTransformationTexture: function (e, t) {
        if (e && e.visible && t) {
          var n = this,
            i = new PIXI.CanvasRenderer(e.width, e.height, n._renderSettings),
            r = e.x,
            s = e.y,
            o = e.getBounds();
          (e.x -= o.x), (e.y -= o.y), i.render(e), (e.x = r), (e.y = s);
          var a = document.createElement("canvas");
          (a.width = e.width),
            (a.height = e.height),
            (context = a.getContext("2d")),
            context.drawImage(i.view, 0, 0);
          var l = n._getTransformationPoints(t);
          l = n._adjustTransformationPoints(l, a);
          var c = new Transformations.MeshWarp({
              viewport: { width: 1e3, height: 1e3 },
              meshPoints: l,
            }),
            u = c._warp(a),
            h = u.viewport;
          (i = n._webGLRenderer),
            i.resize(h.width, h.height),
            i.render(u.meshPlane),
            u.meshPlane.texture.baseTexture.destroy(),
            u.meshPlane.texture.destroy(),
            u.meshPlane.destroy();
          var d = document.createElement("canvas");
          (d.width = h.width),
            (d.height = h.height),
            (context = d.getContext("2d")),
            context.drawImage(i.view, 0, 0),
            i.resize(0, 0);
          var p = new PIXI.Texture.from(d);
          return (e.texture = p), p;
        }
      },
      _resizeCanvas: function (e, t, n) {
        (t = Math.ceil(t)), (n = Math.ceil(n));
        var i = document.createElement("canvas"),
          r = i.getContext("2d");
        return (
          (i.width = t),
          (i.height = n),
          r.drawImage(e, 0, 0, e.width, e.height, 0, 0, t, n),
          i
        );
      },
      _getSwapTree: function () {
        var e = this._treeCloner(this._originalTree);
        return (this._rulesTree = e), Promise.resolve(e);
      },
      _applyDesignOld: function () {
        0 === this._getDirtyCustomRules().length &&
          ((this._originalEQ = []),
          FlowChecker.RulesSetup.before(),
          this._rulesSetup(),
          FlowChecker.RulesSetup.after(),
          this._hideAllOuterEffects(),
          this._applyOptions(),
          FlowChecker.RunAssetRules.before(),
          this._runAssetRules(),
          FlowChecker.RunAssetRules.after(),
          FlowChecker.RunRules.before(),
          this._runRules(),
          FlowChecker.RunRules.after(),
          this._showAllOuterEffects(),
          this._storeRulesValues()),
          this._uiJSON.customRules.length > 0 &&
            (this._applyInteractions(),
            FlowChecker.RulesSetup.before(),
            this._rulesSetup(),
            FlowChecker.RulesSetup.after(),
            FlowChecker.RunAssetRules.before(),
            this._runAssetRules(),
            FlowChecker.RunAssetRules.after());
      },
      _applyDesign: function () {
        (this._originalEQ = []),
          FlowChecker.RulesSetup.before(),
          this._rulesSetup(),
          FlowChecker.RulesSetup.after(),
          this._hideAllOuterEffects(),
          this._applyOptions(),
          FlowChecker.RunAssetRules.before(),
          this._runAssetRules(),
          FlowChecker.RunAssetRules.after(),
          FlowChecker.RunRules.before(),
          this._runRules(),
          FlowChecker.RunRules.after(),
          this._showAllOuterEffects(),
          this._addRulesEffectsToUIJson(),
          this._applyInteractions();
      },
      _getDirtyCustomRules: function () {
        return this._uiJSON.customRules.filter(function (e) {
          return !(0 === e.layerName.indexOf("added-text") && e.isPristine);
        });
      },
      _updateOriginalTree: function (e) {
        return (this._stage = this._originalTree), this.update(e);
      },
      _rulesSetup: function () {
        var e, t, n;
        (e = this),
          e._treeWalker(e._stage, "children", function (i) {
            if (((i.layers = i.getChildren()), i.layers)) {
              for (n = i.layers.length, t = 0; t < i.layers.length; t++) {
                if (n != i.layers.length) {
                  e.dispatch("rulesSetup:warning", {
                    warning: "rulesSetup",
                    message: "A PSD asset has an integer layer name.",
                  });
                  break;
                }
                i.layers[i.layers[t].layerData.name] = i.layers[t];
              }
              var r =
                i.layerData &&
                i.layerData.name &&
                e._getLayerFromUiJson(i.layerData.name, "graphic");
              r &&
                r.selectedLayer &&
                r.selectedLayer.id &&
                "customGraphic" === r.selectedLayer.id &&
                e._hideEffects(i),
                (i.layers.getByName = function (e) {
                  return this[e];
                });
            }
          }),
          rule._setDocument();
      },
      _addRulesEffectsToUIJson: function () {
        var e, t;
        (e = this),
          (e._uiJSON.rulesEffects = []),
          (t = e._getObjectByName("Rules Effects")),
          t.children &&
            t.children.forEach(function (t) {
              e._uiJSON.rulesEffects.push(t.layerData);
            });
      },
      _fetchRules: function () {
        var e = this;
        return new Promise(function (t, n) {
          var i;
          i = function () {
            var s;
            if (4 === r.readyState) {
              if (200 !== r.status)
                return (
                  (e._runRules = function () {}),
                  console.warn("Couldn't fetch rules"),
                  void t()
                );
              var o = r.response;
              if (
                (r.removeEventListener("readystatechange", i),
                (s = o.match(Engine.scriptRedirectRegex)),
                !s)
              ) {
                var a =
                  "var initializeAll = mapper.initializeAll.bind(mapper);var instanciateLayer = mapper.instanciateLayer.bind(mapper);var blankVisibility = mapper.blankVisibility.bind(mapper);var getWidth = mapper.getWidth.bind(mapper);var getHeight = mapper.getHeight.bind(mapper);var getSafeboxRef = mapper.getSafeboxRef.bind(mapper);var getGraphicsRef = mapper.getGraphicsRef.bind(mapper);var getTextsRef = mapper.getTextsRef.bind(mapper);var getTexts = mapper.getTexts.bind(mapper);var getGraphics = mapper.getGraphics.bind(mapper);var getSafebox = mapper.getSafebox.bind(mapper);var initializeTexts = mapper.initializeTexts.bind(mapper);var initializeGraphics = mapper.initializeGraphics.bind(mapper);var initializeSafeboxes = mapper.initializeSafeboxes.bind(mapper);var initialize = mapper.initialize.bind(mapper);var initializeAll = mapper.initializeAll.bind(mapper);var moveToPosition = mapper.moveToPosition.bind(mapper);var resizeLayer = mapper.resizeLayer.bind(mapper);var resizeTextLayer = mapper.resizeTextLayer.bind(mapper);var resizeArcTextLayer = mapper.resizeArcTextLayer.bind(mapper);var getProportion = mapper.getProportion.bind(mapper);var alignLeft = mapper.alignLeft.bind(mapper);var alignRight = mapper.alignRight.bind(mapper);var alignHorizontalCenter = mapper.alignHorizontalCenter.bind(mapper);var alignTop = mapper.alignTop.bind(mapper);var alignBottom = mapper.alignBottom.bind(mapper);var alignVerticalCenter = mapper.alignVerticalCenter.bind(mapper);var leftMostAlign = mapper.leftMostAlign.bind(mapper);var rightMostAlign = mapper.rightMostAlign.bind(mapper);var alignLeftEdge = mapper.alignLeftEdge.bind(mapper);var alignRightEdge = mapper.alignRightEdge.bind(mapper);var resizeObj = mapper.resizeObj.bind(mapper);var resizeToFill = mapper.resizeToFill.bind(mapper);var resizeToFit = mapper.resizeToFit.bind(mapper);var resizeWithLimits = mapper.resizeWithLimits.bind(mapper);var resizeWithRatio = mapper.resizeWithRatio.bind(mapper);var fitCenter = mapper.fitCenter.bind(mapper);var makeVirtualGroup = mapper.makeVirtualGroup.bind(mapper);var setVirtualBounds = mapper.setVirtualBounds.bind(mapper);var addCustomText = mapper.addCustomText.bind(mapper);var lowerText = mapper.lowerText.bind(mapper);var makeGroup = mapper.makeGroup.bind(mapper);var _sweepPixelMatrix = mapper._sweepPixelMatrix.bind(mapper);var _detectFit = mapper._detectFit.bind(mapper);var resizeSingleLineTexts = mapper.resizeSingleLineTexts.bind(mapper);var resizeMultilineTexts = mapper.resizeMultilineTexts.bind(mapper);var resizeGraphics = mapper.resizeGraphics.bind(mapper);var getGap = mapper.getGap.bind(mapper);var alignMultipleLayers = mapper.alignMultipleLayers.bind(mapper);var alignVerticalSerie = mapper.alignVerticalSerie.bind(mapper);var linkLayerVisibility = mapper.linkLayerVisibility.bind(mapper);var alignTopEdge = mapper.alignTopEdge.bind(mapper);var alignBottomEdge = mapper.alignBottomEdge.bind(mapper);var makeVirtualGroup = mapper.makeVirtualGroup.bind(mapper);var applyOutline = engine.applyOutline.bind(engine);var blur = engine.applyBlur.bind(engine);var warp = engine.applyWarp.bind(engine);var createShadow = engine.applyShadow.bind(engine);var getCanvas = engine.getCanvas.bind(engine);engine.newLayerSuffix = 0;" +
                  o;
                return (
                  Class("RuleClass")({ run: new Function(a) }),
                  (e._runRules = function () {
                    Li.Engine.error.unshift(function (e) {
                      e.error.message = "Rules Error: " + e.error.message;
                    }),
                      RuleClass.run(),
                      Li.Engine.error.shift();
                  }),
                  void t()
                );
              }
              (e._scriptPath = e._cdnBasePath() + s[1]),
                e._fetchRules().then(t, n);
            }
          };
          var r = new XMLHttpRequest();
          r.addEventListener("readystatechange", i),
            r.open("GET", e._scriptPath + "?" + new Date().getTime()),
            r.send(null);
        });
      },
      getCanvasSize: function () {
        return {
          width: this._structureJSON.width,
          height: this._structureJSON.height,
        };
      },
      _getColorOverrides: function () {
        var e, t, n;
        return (
          (e = this._stage),
          (t = this._treeCloner(this._originalTree)),
          (n = {}),
          (this._stage = t),
          this._rulesSetup(),
          this._applyOptions(),
          this._runAssetRules(),
          this._runRules(),
          this._treeWalker(
            t,
            "children",
            function (e) {
              var t;
              e._colorOverride &&
                ((t = this._getLayerPath(e)), (n[t] = e._colorOverride));
            }.bind(this)
          ),
          t.destroy(!0),
          (this._stage = e),
          n
        );
      },
      _applyOptions: function () {
        var e = this;
        if (
          "undefined" != typeof e._optionsJson &&
          0 !== Object.keys(e._optionsJson).length
        ) {
          var t, n;
          (t = Object.keys(e._optionsJson.admin)),
            (n = e._optionsJson.client.dictionary),
            (window.valueOptions = e._mapAlternateValues(t, n, e._uiJSON));
        }
      },
      _mapAlternateValues: function (e, t, n) {
        var i = {};
        return (
          (e || []).map(function (e) {
            var r, s, o, a;
            (r = e.match(/[A-Z]?[a-z]+|[0-9]+/g)),
              (s = r[0]),
              (a = r[1].toLowerCase()),
              (o = r[2]),
              o
                ? n[s][o] &&
                  (n[s][o][a] || []).map(function (n, r) {
                    n.visible && t[s][o] && (i[e] = t[s][o][a][r].value);
                  })
                : n[s] &&
                  (n[s][a] || []).map(function (n, r) {
                    n.visible && t[s] && (i[e] = t[s][a][r].value);
                  });
          }),
          i
        );
      },
    },
  }),
  Class(
    Ngin,
    "SVGText"
  )({
    prototype: {
      lowercaseSVGTemplate:
        '<svg xmlns="http://www.w3.org/2000/svg"  id="svgtest" width="1000" height="300"> <defs> <style type="text/css"></style> </defs> <text id="text1" fill="##000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="0" > <tspan id="span1" x="0" dy="0">wasxmnouc</tspan> </text> <text id="text2" fill="##000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="150"> <tspan id="span2" x="0" dy="0">wasxmnouc</tspan> </text> <text id="text3" fill="#000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="300"> <tspan id="span3" x="0" dy="0">wasxmnouc</tspan> </text> </svg>',
      uppercaseSVGTemplate:
        '<svg xmlns="http://www.w3.org/2000/svg"  id="svgtest" width="1000" height="300"> <defs> <style type="text/css"></style> </defs> <text id="text1" fill="##000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="0" > <tspan id="span1" x="0" dy="0">WASXZMNOUC</tspan> </text> <text id="text2" fill="##000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="150"> <tspan id="span2" x="0" dy="0">WASXZMNOUC</tspan> </text> <text id="text3" fill="#000000" font-size="50" font-family="Bradley Hand" letter-spacing="0" dominant-baseline="" text-anchor="left" x="0" y="300"> <tspan id="span3" x="0" dy="0">WASXZMNOUC</tspan> </text> </svg>',
      getDeltas: function (e) {
        var t = this;
        return new Promise(function (n) {
          var i = engine._fontTags[e.fontFamily];
          if (!i) return void n({ lower: 0, upper: 0, middle: 0 });
          var r = [
            (function () {
              return t.getLowerDelta(e, i).then(function (e) {
                return e;
              });
            })(),
            (function () {
              return t.getUpperDelta(e, i).then(function (e) {
                return e;
              });
            })(),
          ];
          Promise.all(r).then(function (e) {
            n({ lower: e[0], upper: e[1], middle: e[0] + (e[1] - e[0]) / 2 });
          });
        });
      },
      getLowerDelta: function (e, t) {
        var n = this;
        return new Promise(function (e) {
          n.measureText(n.lowercaseSVGTemplate, t).then(function (t) {
            e(t);
          });
        });
      },
      getUpperDelta: function (e, t) {
        var n = this;
        return new Promise(function (e) {
          n.measureText(n.uppercaseSVGTemplate, t).then(function (t) {
            e(t);
          });
        });
      },
      _tryDraw: function (e) {
        return new Promise(function (t) {
          var n = 500,
            i = function r() {
              var i, s;
              (i = engine._drawImageOnCanvas(e)),
                (s = engine._getTrimBounds(i)),
                n > 0 && s.right - s.left === 0
                  ? setTimeout(function () {
                      r();
                    }, 10)
                  : t({ canvas: i }),
                n--;
            };
          i();
        });
      },
      _checkDimensions: function (e) {
        var t = 30,
          n = e.getAttribute("font-family"),
          i = e.getBBox();
        return (
          e.setAttribute("font-family", ""),
          new Promise(function (r) {
            var s = function () {
              (dimensions = e.getBBox()),
                0 === t || "" === n || dimensions.width !== i.width
                  ? r(dimensions)
                  : setTimeout(function () {
                      s();
                    }, 0),
                t--;
            };
            setTimeout(function () {
              e.setAttribute("font-family", n), s();
            }, 0);
          })
        );
      },
      measureText: function (e, t) {
        var n = this,
          i = document.createElement("div");
        i.innerHTML = e;
        var r = i.childNodes[0];
        return (
          (r.getElementsByTagName("style")[0].innerHTML = t.style.innerText),
          [].forEach.call(r.getElementsByTagName("text"), function (e) {
            e.setAttribute("font-family", t.name);
          }),
          document.body.appendChild(r),
          n._checkDimensions(r, r.getElementById("text1")).then(function () {
            var e = r.getElementById("text1").getBBox(),
              t = r.getElementById("text2").getBBox();
            document.body.removeChild(r);
            var i = new XMLSerializer().serializeToString(r),
              s = "data:image/svg+xml;utf8," + encodeURIComponent(i),
              o = document.createElement("img");
            return new Promise(function (i) {
              (o.onload = function () {
                n._tryDraw(o).then(function (n) {
                  var r = document.createElement("canvas"),
                    s = r.getContext("2d");
                  (r.width = e.width),
                    (r.height = e.height),
                    s.clearRect(0, 0, r.width, r.height),
                    s.drawImage(
                      n.canvas,
                      0,
                      0,
                      e.width + e.x,
                      e.height + e.y,
                      0,
                      0,
                      e.width + e.x,
                      e.height + e.y
                    );
                  var o = engine._getTrimBounds(r),
                    a = o.bottom - o.top;
                  s.clearRect(0, 0, r.width, r.height),
                    s.drawImage(
                      n.canvas,
                      t.x,
                      t.y,
                      t.width,
                      t.height,
                      0,
                      0,
                      t.width,
                      t.height
                    );
                  var l = engine._getTrimBounds(r),
                    c = l.bottom - l.top;
                  r.remove(),
                    (r = null),
                    (s = null),
                    n.canvas.remove(),
                    (n.canvas = null),
                    i(c / 2 - a);
                });
              }),
                (o.crossOrigin = "Anonymous"),
                (o.src = s);
            });
          })
        );
      },
    },
  }),
  Module(
    Ngin,
    "UserGraphic"
  )({
    _USER_GRAPHIC_FOLDER_ID: 2234626523,
    _USER_GRAPHIC_FOLDER_NAME: "User Added Graphics",
    prototype: {
      addUserGraphicsFolder: function () {
        var e = this._structureJSON.layers.filter(function (e) {
          return "Design" === e.name;
        })[0];
        e.layers.splice(0, 0, {
          id: Ngin.UserGraphic._USER_GRAPHIC_FOLDER_ID,
          name: Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME,
          type: "Folder",
          opacity: 100,
          visible: !0,
          styles: { blendOptions: { mode: "passThrough" } },
          layers: [],
        });
      },
      matchGraphicsTreeWithRecord: function (e) {
        var t = this,
          n = t._getUserGraphics(),
          i = n.length,
          r = e.graphic.filter(function (e) {
            return 0 === e.name.indexOf("added-graphic");
          }),
          s = r.length,
          o = s - i;
        return o > 0
          ? r.slice(s - o).reduce(function (e, n) {
              return e.then(function () {
                return t._addLayer(n);
              });
            }, Promise.resolve())
          : (0 > o &&
              n.slice(i + o).forEach(function (e) {
                t._removeLayer(e);
              }),
            Promise.resolve());
      },
      _addLayer: function (e) {
        var t = this,
          n = t._getObjectByName(Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME),
          i = JSON.parse(JSON.stringify(e.structure));
        return (
          (i.visible = !0),
          t._renderLayer(i, n).then(function () {
            return t._rulesTree
              ? ((t._stage = t._rulesTree),
                (i = JSON.parse(JSON.stringify(e.structure))),
                (i.visible = !0),
                (n = t._getObjectByName(
                  Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME
                )),
                t._renderLayer(i, n).then(function () {
                  t._stage = t._originalTree;
                }))
              : void 0;
          })
        );
      },
      _removeLayer: function (e) {
        var t = e.layerData.name;
        e.destroy(!0),
          (this._stage = this._rulesTree),
          (e = this._getObjectByName(t)),
          e.destroy(!0),
          (this._stage = this._originalTree),
          this._effectsQ.setQueue(
            this._effectsQ.getQueue().filter(function (e) {
              return -1 === e[0].layerData.name.indexOf(t);
            })
          ),
          (engine._originalEQ = this._originalEQ.filter(function (e) {
            return -1 === e[0].layerData.name.indexOf(t);
          }));
      },
      centerPristineGraphics: function () {
        var e = this;
        e.getCanvas(),
          this._getPristineGraphics().forEach(function (t) {
            var n = instanciateLayer(t),
              i = e._getRecordFromLayer(t),
              r = {
                x: i.x * e._canvasRenderer.width,
                y: i.y * e._canvasRenderer.height,
                width: i.width * e._canvasRenderer.width,
                height: i.height * e._canvasRenderer.height,
                visible: !0,
              };
            resizeWithLimits(n, 1e5, 1, r.width, r.height),
              alignHorizontalCenter(n, r, 0),
              alignVerticalCenter(n, r, 0);
          });
      },
      _getPristineGraphics: function () {
        var e = this;
        return e._getUserGraphics().filter(function (t) {
          return e._isPristine(t);
        });
      },
      _isPristine: function (e) {
        return !this._getLayerCustomRule(e);
      },
      _getLayerCustomRule: function (e) {
        return this._uiJSON.customRules.filter(function (t) {
          return t.layerName === e.layerData.name;
        })[0];
      },
      _getUserGraphics: function () {
        return this._getObjectByName(Ngin.UserGraphic._USER_GRAPHIC_FOLDER_NAME)
          .children;
      },
      _getRecordFromLayer: function (e) {
        return this._uiJSON.graphic.filter(function (t) {
          return e.layerData.name === t.name;
        })[0];
      },
    },
  }),
  Module("NoWatermarkSupport")({
    prototype: {
      _removeWatermark: function () {
        if (this._uiJSON.hasOwnProperty("_internalRemoveWatermark") !== !1) {
          var e = this._getObjectByName("Watermark");
          e && (e.visible = !1);
        }
      },
    },
  }),
  Class("Engine").includes(
    Ngin.AdjustmentLayers,
    Ngin.Document,
    Ngin.Effect,
    Ngin.LanguageSupport,
    Ngin.Loader,
    Ngin.PixiWrapper,
    Ngin.Renderer,
    Ngin.Rules,
    Ngin.AssetRuleSupport,
    Ngin.UserGraphic,
    NoWatermarkSupport,
    CustomEventSupport,
    Interactive.InteractiveSupport,
    Interactive.SnapSupport
  )({
    _blendModeTable: {
      normal: PIXI.BLEND_MODES.NORMAL,
      overlay: PIXI.BLEND_MODES.OVERLAY,
      multiply: PIXI.BLEND_MODES.MULTIPLY,
      softLight: PIXI.BLEND_MODES.SOFT_LIGHT,
      linearDodge: PIXI.BLEND_MODES.ADD,
      screen: PIXI.BLEND_MODES.SCREEN,
      darken: PIXI.BLEND_MODES.DARKEN,
      lighten: PIXI.BLEND_MODES.LIGHTEN,
      colorDodge: PIXI.BLEND_MODES.COLOR_DODGE,
      colorBurn: PIXI.BLEND_MODES.COLOR_BURN,
      hardLight: PIXI.BLEND_MODES.HARD_LIGHT,
      difference: PIXI.BLEND_MODES.DIFFERENCE,
      exclusion: PIXI.BLEND_MODES.EXCLUSION,
      hue: PIXI.BLEND_MODES.HUE,
      saturation: PIXI.BLEND_MODES.SATURATION,
      color: PIXI.BLEND_MODES.COLOR,
      luminosity: PIXI.BLEND_MODES.LUMINOSITY,
    },
    supportedEffects: {
      Original: { zones: ["inner"], exclusive: !1 },
      DropShadow: { zones: ["outer"], exclusive: !1 },
      GradientOverlay: { zones: ["inner"], exclusive: !0 },
      ColorOverlay: { zones: ["inner"], exclusive: !0 },
      GaussianBlur: { zones: ["inner", "outer"], exclusive: !0 },
    },
    validHexColor: /^#[0-9a-f]{6,6}/i,
    validCustomGraphic: /replace\d?.userimage/,
    validReplaceColor: /replace\d?.color/,
    transparentPixel:
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII",
    scriptRedirectRegex: /^\/\/ @follow: (.*)$/m,
    _webGLRenderer: null,
    prototype: {
      _config: {
        environment: "development",
        smartTemplatesPath: "smart_templates",
        imageLibraryPath: "image_library",
        highResPrefix: "",
        sizePath: "",
        development: {
          basePath: "https://smart-templates.us",
          cdnPath: "https://nice-assets-staging#.s3-accelerate.amazonaws.com",
        },
        staging: {
          basePath: "https://smart-templates.us",
          cdnPath: "https://nice-assets-staging#.s3-accelerate.amazonaws.com",
        },
        production: {
          basePath: "https://nicev2.placeit.net",
          cdnPath: "https://nice-assets#.s3-accelerate.amazonaws.com",
        },
        // production: {
        //   // basePath: "http://localhost:9999",
        //   // cdnPath: "http://localhost:9999",
        // },
      },
      _fontTags: {},
      _adjustmentLayers: [],
      _affectedCurves: [],
      _touchedByAdjustments: {},
      _CDNRoundRobin: 0,
      _CDNPath: null,
      _cachedImages: {},
      _cachedColladaFiles: {},
      _cachedMeshFiles: {},
      _cachedMasks: {},
      _processCount: 0,
      ready: !1,
      _effectsQ: null,
      _originalEQ: null,
      hasTransformed: !1,
      _imageData: {},
      _originalTree: null,
      _affectedCurves2: [],
      _originalRulesValues: {},
      _assetsData: {},
      _assetRules: {},
      init: function (e) {
        if ((e.ui.disableAA && this._disablePixiAA(), !e.ui))
          throw new Error("ui.json not provided");
        if (!e.structure) throw new Error("structure.json not provided");
        return (
          (this._uiJSON = e.ui),
          (this._structureJSON = e.structure),
          (this._config.environment = e.environment),
          (this._interactive = e.interactive || !1),
          (this._CDNPath = this._config[e.environment].cdnPath),
          (this._config.basePath = this._config[e.environment].basePath),
          (this._config.smartTemplateId = this._uiJSON.id),
          this.addUserGraphicsFolder(),
          this.addRuleEffectsFolder(),
          (this._uiJSON.customRules = this._uiJSON.customRules || []),
          (this._globalAssetRules = e.globalAssetRules || {}),
          (this._config.sizePath = this._uiJSON.size
            ? "sizes/" + this._uiJSON.size
            : ""),
          this._uiJSON.highResolution &&
            (this._config.highResPrefix = "highres"),
          (this._scriptPath = this._getStaticAssetUrl("script.js")),
          (this._optionsPath = this._getStaticAssetUrl("options.json")),
          (this._renderSettings = {
            antialias: !e.ui.disableAA,
            transparent: !0,
            resolution: 1,
            preserveDrawingBuffer: !0,
          }),
          PIXI.utils.skipHello(),
          (this._stage = new PIXI.Container()),
          (this._originalTree = this._stage),
          Engine._webGLRenderer ||
            (Engine._webGLRenderer = new PIXI.WebGLRenderer(
              this._structureJSON.width,
              this._structureJSON.height,
              this._renderSettings
            )),
          (this._webGLRenderer = Engine._webGLRenderer),
          (this.glfxCanvas = fx.canvas()),
          (this._canvasRenderer = new PIXI.CanvasRenderer(
            this._structureJSON.width,
            this._structureJSON.height,
            this._renderSettings
          )),
          (this._tmpRenderer = new PIXI.CanvasRenderer(
            this._structureJSON.width,
            this._structureJSON.height,
            this._renderSettings
          )),
          (this._originalRulesValues = {}),
          (this._assetsData = {}),
          (this._stage.layerData = { name: "Root Node", type: "RootNode" }),
          this._treeWalker(this._structureJSON, "layers", function (e) {
            (e.hasOwnProperty("opacity") === !1 ||
              "number" != typeof e.opacity) &&
              (e.opacity = 100),
              (e.hasOwnProperty("fill") === !1 || "number" != typeof e.fill) &&
                (e.fill = 100);
          }),
          (this._effectsQ = new Effects.Queue({ engine: this })),
          (this._originalEQ = []),
          this.bind("multilayerDestroy", function (e) {
            var t, n, i, r;
            (t = e.data || e),
              (n = t.path),
              (i = engine._originalEQ),
              (r = {}),
              i.forEach(function (e) {
                var t = e
                  .map(function (e) {
                    return e.layerData.name;
                  })
                  .join(".");
                r[t] = e;
              }),
              (i = Object.keys(r)
                .map(function (e) {
                  return -1 === e.indexOf(n) ? r[e] : void 0;
                })
                .filter(function (e) {
                  return void 0 !== e;
                })),
              (engine._originalEQ = i);
          }),
          this
        );
      },
      bootstrap: function () {
        var e = this;
        return (
          FlowChecker.PreloadAssets.before(),
          e
            ._preloadAssets(e._structureJSON)
            .then(function () {
              return (
                FlowChecker.PreloadAssets.after(),
                FlowChecker.Render.before(),
                e._renderFolder(e._structureJSON, e._stage)
              );
            })
            .then(function () {
              FlowChecker.Render.after(),
                FlowChecker.TagAdjustedLayers.before();
            })
            .then(e._tagAdjustedLayers.bind(e))
            .then(FlowChecker.TagAdjustedLayers.after)
            .then(function () {
              return (e._canvas = e._canvasRenderer.view), e._canvas;
            })
        );
      },
      _rgbToHex: function (e) {
        return (
          "#" +
          (
            (1 << 24) +
            (Math.round(e.red) << 16) +
            (Math.round(e.green) << 8) +
            Math.round(e.blue)
          )
            .toString(16)
            .slice(1)
        );
      },
      _createCloneSprite: function (e) {
        var t, n, i, r, s;
        return (
          (t = new PIXI.CanvasRenderer(e.width, e.height, {
            transparent: !0,
            antialias: !this._uiJSON.disableAA,
            resolution: 1,
            clearBeforeRender: !1,
          })),
          (i = e.visible),
          (e.visible = !0),
          (r = e.x),
          (s = e.y),
          (e.x = 0),
          (e.y = 0),
          t.render(e),
          (n = new PIXI.Sprite.from(t.view)),
          (n.x = r),
          (n.y = s),
          (e.x = r),
          (e.y = s),
          (t = null),
          (e.visible = i),
          n
        );
      },
      _getTrimBounds: function (e) {
        function t(e, t, n) {
          for (var i = 0; t > i; ++i)
            if (0 !== e.data[n * t * 4 + 4 * i + 3]) return !1;
          return !0;
        }
        function n(e, t, n, i, r) {
          for (var s = i; r > s; ++s)
            if (0 !== e.data[s * t * 4 + 4 * n + 3]) return !1;
          return !0;
        }
        if (0 === e.width) return { top: 0, left: 0, right: 0, bottom: 0 };
        e instanceof HTMLCanvasElement == !1 &&
          (e = engine._drawImageOnCanvas(e));
        for (
          var i = e.getContext("2d"),
            r = e.width,
            s = i.getImageData(0, 0, e.width, e.height),
            o = 0,
            a = s.height,
            l = 0,
            c = s.width;
          a > o && t(s, r, o);

        )
          ++o;
        for (; a - 1 > o && t(s, r, a - 1); ) --a;
        for (; c > l && n(s, r, l, o, a); ) ++l;
        for (; c - 1 > l && n(s, r, c - 1, o, a); ) --c;
        return { top: o, bottom: a, left: l, right: c };
      },
      _trimCanvas: function (e) {
        var t = e.getContext("2d"),
          n = this._getTrimBounds(e);
        if (n.right - n.left === 0)
          return {
            canvas: e,
            bounds: { top: 0, left: 0, right: e.width, bottom: e.height },
          };
        var i = t.getImageData(
            n.left,
            n.top,
            n.right - n.left,
            n.bottom - n.top
          ),
          r = e.ownerDocument.createElement("canvas"),
          s = r.getContext("2d");
        return (
          (r.width = i.width),
          (r.height = i.height),
          s.putImageData(i, 0, 0),
          { canvas: r, bounds: n }
        );
      },
      _getTrimLayerDimensions: function (e) {
        var t, n;
        return (
          (n = {}),
          this._tmpRenderer.render(e),
          (t = this._getTrimBounds(this._tmpRenderer.view)),
          (n.x = t.left),
          (n.y = t.top),
          (n.width = t.right - t.left),
          (n.height = t.bottom - t.top),
          n.width || ((n.x = 0), (n.y = 0)),
          n
        );
      },
      hasVisibleContent: function (e) {
        return e.hasVisibleContent();
      },
      _3DTo2DCanvas: function (e) {
        var t, n, i, r, s, o, a;
        return (
          (t = this),
          (n = e.getContext("webgl") || e.getContext("experimental-webgl")),
          (i = new Uint8Array(4 * e.width * e.height)),
          n.readPixels(0, 0, e.width, e.height, n.RGBA, n.UNSIGNED_BYTE, i),
          (a = t._flipY(e, i)),
          (r = document.createElement("canvas")),
          (r.width = e.width),
          (r.height = e.height),
          (o = r.getContext("2d")),
          (s = o.getImageData(0, 0, e.width, e.height)),
          s.data.set(a),
          o.putImageData(s, 0, 0),
          (e = null),
          (i = null),
          r
        );
      },
      _flipY: function (e, t) {
        for (
          var n = new Uint8Array(4 * e.width * e.height), i = 0;
          i < e.height;
          i++
        )
          for (var r = 0; r < e.width; r++) {
            var s, o, a, l;
            (a = e.width * i + r),
              (l = e.width * (e.height - 1 - i) + r),
              (s = 4 * a),
              (o = 4 * l),
              (n[o] = t[s]),
              (n[o + 1] = t[s + 1]),
              (n[o + 2] = t[s + 2]),
              (n[o + 3] = t[s + 3]);
          }
        return n;
      },
      _placeInCenter: function (e, t) {
        var n, i;
        return (
          (n = document.createElement("canvas")),
          (n.width = t.width),
          (n.height = t.height),
          (i = n.getContext("2d")),
          i.drawImage(
            e,
            Math.floor((n.width - e.width) / 2),
            Math.floor((n.height - e.height) / 2),
            e.width,
            e.height
          ),
          n
        );
      },
      _resizeToFitViewport: function (e, t) {
        var n, i;
        (n = document.createElement("canvas")), (i = n.getContext("2d"));
        var r, s, o;
        return (
          (r = Math.min(t.width / e.width, t.height / e.height)),
          (s = Math.floor(e.width * r)),
          (o = Math.floor(e.height * r)),
          (n.width = s),
          (n.height = o),
          i.drawImage(
            e,
            0,
            0,
            e.width,
            e.height,
            Math.floor((n.width - s) / 2),
            Math.floor((n.height - o) / 2),
            s,
            o
          ),
          n
        );
      },
      _resizeToFillViewport: function (e, t) {
        var n, i;
        (n = document.createElement("canvas")), (i = n.getContext("2d"));
        var r, s, o;
        return (
          (r = Math.max(t.width / e.width, t.height / e.height)),
          (s = Math.floor(e.width * r)),
          (o = Math.floor(e.height * r)),
          (n.width = s),
          (n.height = o),
          i.drawImage(
            e,
            0,
            0,
            e.width,
            e.height,
            Math.floor((n.width - s) / 2),
            Math.floor((n.height - o) / 2),
            s,
            o
          ),
          n
        );
      },
      _resizeToFit: function (e, t) {
        var n, i;
        return (
          (n = e.getBounds()),
          (i = Math.min(t.width / n.width, t.height / n.height)),
          (e.scale.x = e.scale.y = i),
          e
        );
      },
      _resizeToFill: function (e, t) {
        var n, i;
        return (
          (n = e.getBounds()),
          (i = Math.max(t.width / n.width, t.height / n.height)),
          (e.scale.x = e.scale.y = i),
          e
        );
      },
      _getEmptyTexture: function (e) {
        var t = document.createElement("canvas");
        return (t.width = e.width), (t.height = e.height), t;
      },
      _fillSolidColor: function (e, t, n) {
        var i, r, s, o;
        (i = t.color || "#ffffff"),
          (r = t.opacity),
          (s = n.width),
          (o = n.height),
          e.lineStyle(0),
          e.beginFill(parseInt(i.split("#")[1], 16), r / 100),
          e.drawRect(0, 0, s, o),
          e.endFill();
      },
      _openDebugFilmStrip: function () {
        var e = this;
        if (Object.getOwnPropertyNames(e._imageData).length) {
          var t,
            n,
            i,
            r,
            s,
            o,
            a,
            l,
            c,
            u,
            h = function (e, t) {
              if (!e || !t) return "";
              var n, i, r;
              return (
                (n = window.document.createElement("canvas")),
                (n.width = e.width),
                (n.height = e.height),
                (i = n.getContext("2d")),
                (r = i.createImageData(e.width, e.height)),
                pixelmatch(e.data, t.data, r.data, e.width, e.height, {
                  threshold: 0.01,
                }),
                i.putImageData(r, 0, 0),
                n.toDataURL()
              );
            },
            d = function (e) {
              if (!e) return "";
              var t, n;
              return (
                (t = document.createElement("canvas")),
                (t.width = e.width),
                (t.height = e.height),
                (n = t.getContext("2d")),
                n.putImageData(e, 0, 0),
                t.toDataURL()
              );
            },
            p = function (e) {
              var t = window.document.createElement("img");
              return (t.src = e), t;
            },
            f = function (e) {
              var t = window.document.createElement("th");
              return (
                (t.textContent = e), (t.style.border = "1px solid black"), t
              );
            },
            m = function (e) {
              var t = window.document.createElement("td");
              return (
                (t.textContent = e), (t.style.border = "1px solid black"), t
              );
            },
            g = function () {
              return window.document.createElement("tr");
            };
          (t = window.open("", "debugWindow" + Date.now(), "")),
            (i = e._imageData.sortedColumn),
            (r = e._imageData.sortedRow),
            (n = window.document.createElement("table")),
            (n.style.border = "1px solid black"),
            (u = g("Layer Name")),
            u.appendChild(f());
          for (var v = 0; v < i.length; v++)
            u.appendChild(f(i[v])),
              i[v + 1] && u.appendChild(f(i[v] + " to " + i[v + 1] + " diff"));
          n.appendChild(u);
          for (var v = 0; v < r.length; v++) {
            s = g();
            var _ = r[v];
            (o = m(_)), s.appendChild(o);
            for (var y = null, b = 0; b < i.length; b++) {
              var w = r[v],
                x = i[b];
              (diffCell = m()),
                (o = m()),
                (a = e._imageData[w][x] && e._imageData[w][x].data),
                (c = p(d(a))),
                y &&
                  ((l = e._imageData[w][y] && e._imageData[w][y].data),
                  (diffImg = p(h(l, a))),
                  diffCell.appendChild(diffImg),
                  s.appendChild(diffCell)),
                (y = x),
                o.appendChild(c),
                s.appendChild(o);
            }
            n.appendChild(s);
          }
          return (
            t &&
              ((t.document.body.innerHTML = ""),
              t.document.body.appendChild(n),
              (t.document.body.bgColor = "#dddddd")),
            n
          );
        }
      },
      _drawImageOnCanvas: function (e) {
        var t, n;
        return (
          (t = document.createElement("canvas")),
          (t.width = e.width),
          (t.height = e.height),
          (n = t.getContext("2d")),
          n.drawImage(e, 0, 0, t.width, t.height),
          (e = null),
          t
        );
      },
      _loadImageOnCanvas: function (e, t, n) {
        var i,
          r = this;
        return (
          (i =
            e.indexOf(".svg") > 0
              ? r._loadVectorImage(e, t, n || "resizeToFit")
              : r._loadBitmapImage(e)),
          i.then(r._drawImageOnCanvas)
        );
      },
      _bitmapToCanvas: function (e) {
        if ("bitmap" !== e.type) return Promise.resolve(e);
        var t = {};
        (t.type = "canvas"), (t.viewport = e.viewport);
        var n;
        return (
          (n =
            "undefined" == typeof e.url
              ? Promise.resolve(e.img)
              : engine._loadBitmapImage(e.url)),
          (n = n
            .then(function (t) {
              return (
                e.viewport ||
                  (e.viewport = {
                    width: engine._structureJSON.width,
                    height: engine._structureJSON.height,
                  }),
                engine._resizeToFitViewport(t, e.viewport)
              );
            })
            .then(function (e) {
              return (t.element = e), t;
            }))
        );
      },
      _bitmapToImage: function (e) {
        if ("bitmap" !== e.type) return Promise.resolve(e);
        var t = {};
        (t.type = "image"), (t.viewport = e.viewport);
        var n;
        return (
          (n =
            "undefined" == typeof e.url
              ? Promise.resolve(e.img)
              : engine._loadBitmapImage(e.url)),
          (n = n.then(function (e) {
            return (t.image = e), t;
          }))
        );
      },
      _resourceToCanvas: function (e) {
        var t = this;
        return t
          ._textToSvg(e)
          .then(t._svgToBitmap)
          .then(t._bitmapToImage)
          .then(function (e) {
            return "image" !== e.type ? Promise.resolve(e) : e.image;
          });
      },
      _disablePixiAA: function () {
        (PIXI.settings.SCALE_MODE = PIXI.SCALE_MODES.NEAREST),
          (PIXI.settings.MIPMAP_TEXTURES = !1),
          (PIXI.glCore.GLTexture.prototype.enableLinearScaling =
            PIXI.glCore.GLTexture.prototype.enableNearestScaling);
        var e = PIXI.filters.OutlineFilter;
        (PIXI.filters.OutlineFilter = function () {
          var t = new e(arguments[0], arguments[1], arguments[2]);
          return (
            (t.fragmentSrc = t.fragmentSrc.replace(
              "max(maxAlpha, ownColor.a);",
              "ceil(max(maxAlpha, ownColor.a) - 0.5);"
            )),
            t
          );
        }),
          Object.assign(PIXI.filters.OutlineFilter, e);
      },
    },
  });
/*
 * glfx.js
 * http://evanw.github.com/glfx.js/
 *
 * Copyright 2011 Evan Wallace
 * Released under the MIT license
 */
var fx = (function () {
  function e(e, t, n) {
    return Math.max(e, Math.min(t, n));
  }
  function t(e) {
    return {
      _: e,
      loadContentsOf: function (e) {
        (H = this._.gl), this._.loadContentsOf(e);
      },
      destroy: function () {
        (H = this._.gl), this._.destroy();
      },
    };
  }
  function n(e) {
    return t(z.fromElement(e));
  }
  function i(e, t) {
    var n = H.UNSIGNED_BYTE;
    if (
      H.getExtension("OES_texture_float") &&
      H.getExtension("OES_texture_float_linear")
    ) {
      var i = new z(100, 100, H.RGBA, H.FLOAT);
      try {
        i.drawTo(function () {
          n = H.FLOAT;
        });
      } catch (r) {}
      i.destroy();
    }
    this._.texture && this._.texture.destroy(),
      this._.spareTexture && this._.spareTexture.destroy(),
      (this.width = e),
      (this.height = t),
      (this._.texture = new z(e, t, H.RGBA, n)),
      (this._.spareTexture = new z(e, t, H.RGBA, n)),
      (this._.extraTexture = this._.extraTexture || new z(0, 0, H.RGBA, n)),
      (this._.flippedShader =
        this._.flippedShader ||
        new $(
          null,
          "        uniform sampler2D texture;        varying vec2 texCoord;        void main() {            gl_FragColor = texture2D(texture, vec2(texCoord.x, 1.0 - texCoord.y));        }    "
        )),
      (this._.isInitialized = !0);
  }
  function r(e, t, n) {
    return (
      (this._.isInitialized &&
        e._.width == this.width &&
        e._.height == this.height) ||
        i.call(this, t ? t : e._.width, n ? n : e._.height),
      e._.use(),
      this._.texture.drawTo(function () {
        $.getDefaultShader().drawRect();
      }),
      this
    );
  }
  function s() {
    return this._.texture.use(), this._.flippedShader.drawRect(), this;
  }
  function o(e, t, n, i) {
    (n || this._.texture).use(),
      this._.spareTexture.drawTo(function () {
        e.uniforms(t).drawRect();
      }),
      this._.spareTexture.swapWith(i || this._.texture);
  }
  function a(e) {
    return (
      e.parentNode.insertBefore(this, e), e.parentNode.removeChild(e), this
    );
  }
  function l() {
    var e = new z(
      this._.texture.width,
      this._.texture.height,
      H.RGBA,
      H.UNSIGNED_BYTE
    );
    return (
      this._.texture.use(),
      e.drawTo(function () {
        $.getDefaultShader().drawRect();
      }),
      t(e)
    );
  }
  function c() {
    var e = this._.texture.width,
      t = this._.texture.height,
      n = new Uint8Array(e * t * 4);
    return (
      this._.texture.drawTo(function () {
        H.readPixels(0, 0, e, t, H.RGBA, H.UNSIGNED_BYTE, n);
      }),
      n
    );
  }
  function u(e) {
    return function () {
      return (H = this._.gl), e.apply(this, arguments);
    };
  }
  function h(e, t, n, i, r, s, o, a) {
    var l = n - r,
      c = i - s,
      u = o - r,
      h = a - s,
      d = e - n + r - o,
      p = t - i + s - a,
      f = l * h - u * c,
      m = (d * h - u * p) / f,
      g = (l * p - d * c) / f;
    return [
      n - e + m * n,
      i - t + m * i,
      m,
      o - e + g * o,
      a - t + g * a,
      g,
      e,
      t,
      1,
    ];
  }
  function d(e) {
    var t = e[0],
      n = e[1],
      i = e[2],
      r = e[3],
      s = e[4],
      o = e[5],
      a = e[6],
      l = e[7],
      c = e[8],
      u = t * s * c - t * o * l - n * r * c + n * o * a + i * r * l - i * s * a;
    return [
      (s * c - o * l) / u,
      (i * l - n * c) / u,
      (n * o - i * s) / u,
      (o * a - r * c) / u,
      (t * c - i * a) / u,
      (i * r - t * o) / u,
      (r * l - s * a) / u,
      (n * a - t * l) / u,
      (t * s - n * r) / u,
    ];
  }
  function p(e, t) {
    return [
      e[0] * t[0] + e[1] * t[3] + e[2] * t[6],
      e[0] * t[1] + e[1] * t[4] + e[2] * t[7],
      e[0] * t[2] + e[1] * t[5] + e[2] * t[8],
      e[3] * t[0] + e[4] * t[3] + e[5] * t[6],
      e[3] * t[1] + e[4] * t[4] + e[5] * t[7],
      e[3] * t[2] + e[4] * t[5] + e[5] * t[8],
      e[6] * t[0] + e[7] * t[3] + e[8] * t[6],
      e[6] * t[1] + e[7] * t[4] + e[8] * t[7],
      e[6] * t[2] + e[7] * t[5] + e[8] * t[8],
    ];
  }
  function f(e) {
    var t = e.length;
    (this.xa = []),
      (this.ya = []),
      (this.u = []),
      (this.y2 = []),
      e.sort(function (e, t) {
        return e[0] - t[0];
      });
    for (var n = 0; t > n; n++) this.xa.push(e[n][0]), this.ya.push(e[n][1]);
    (this.u[0] = 0), (this.y2[0] = 0);
    for (var n = 1; t - 1 > n; ++n) {
      var i = this.xa[n + 1] - this.xa[n - 1],
        r = (this.xa[n] - this.xa[n - 1]) / i,
        s = r * this.y2[n - 1] + 2;
      this.y2[n] = (r - 1) / s;
      var o =
        (this.ya[n + 1] - this.ya[n]) / (this.xa[n + 1] - this.xa[n]) -
        (this.ya[n] - this.ya[n - 1]) / (this.xa[n] - this.xa[n - 1]);
      this.u[n] = ((6 * o) / i - r * this.u[n - 1]) / s;
    }
    this.y2[t - 1] = 0;
    for (var n = t - 2; n >= 0; --n)
      this.y2[n] = this.y2[n] * this.y2[n + 1] + this.u[n];
  }
  function m(e, t) {
    return new $(
      null,
      e +
        "    uniform sampler2D texture;    uniform vec2 texSize;    varying vec2 texCoord;    void main() {        vec2 coord = texCoord * texSize;        " +
        t +
        "        gl_FragColor = texture2D(texture, coord / texSize);        vec2 clampedCoord = clamp(coord, vec2(0.0), texSize);        if (coord != clampedCoord) {            /* fade to transparent if we are outside the image */            gl_FragColor.a *= max(0.0, 1.0 - length(coord - clampedCoord));        }    }"
    );
  }
  function g(t, n) {
    return (
      (H.brightnessContrast =
        H.brightnessContrast ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float brightness;        uniform float contrast;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color.rgb += brightness;            if (contrast > 0.0) {                color.rgb = (color.rgb - 0.5) / (1.0 - contrast) + 0.5;            } else {                color.rgb = (color.rgb - 0.5) * (1.0 + contrast) + 0.5;            }            gl_FragColor = color;        }    "
        )),
      o.call(this, H.brightnessContrast, {
        brightness: e(-1, t, 1),
        contrast: e(-1, n, 1),
      }),
      this
    );
  }
  function v(e, t, n) {
    for (var i = [n], r = 1; r < t.length; r++) {
      i.push([]);
      for (var s = 1; r >= s; s++)
        i[s][r] =
          ((e - t[r - s]) * i[s - 1][r] - (e - t[r]) * i[s - 1][r - 1]) /
          (t[r] - t[r - s]);
    }
    return (
      window.dataPoints.push([e, i[s - 1][r - 1]].join(", ")), i[s - 1][r - 1]
    );
  }
  function _(t) {
    for (var n = [], i = [], r = 0; r < t.length; r++)
      n.push(t[r][0]), i.push(t[r][1]);
    for (var s = (new f(t), []), r = 0; 256 > r; r++)
      s.push(e(0, Math.round(256 * v(r / 255, n, i)), 255));
    return s;
  }
  function y(e, t, n) {
    (e = _(e)), 1 == arguments.length ? (t = n = e) : ((t = _(t)), (n = _(n)));
    for (var i = [], r = 0; 256 > r; r++)
      i.splice(i.length, 0, e[r], t[r], n[r], 255);
    return (
      this._.extraTexture.initFromBytes(256, 1, i),
      this._.extraTexture.use(1),
      (H.curves =
        H.curves ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform sampler2D map;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color.r = texture2D(map, vec2(color.r)).r;            color.g = texture2D(map, vec2(color.g)).g;            color.b = texture2D(map, vec2(color.b)).b;            gl_FragColor = color;        }    "
        )),
      H.curves.textures({ map: 1 }),
      o.call(this, H.curves, {}),
      this
    );
  }
  function b(e) {
    H.denoise =
      H.denoise ||
      new $(
        null,
        "        uniform sampler2D texture;        uniform float exponent;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec4 center = texture2D(texture, texCoord);            vec4 color = vec4(0.0);            float total = 0.0;            for (float x = -4.0; x <= 4.0; x += 1.0) {                for (float y = -4.0; y <= 4.0; y += 1.0) {                    vec4 sample = texture2D(texture, texCoord + vec2(x, y) / texSize);                    float weight = 1.0 - abs(dot(sample.rgb - center.rgb, vec3(0.25)));                    weight = pow(weight, exponent);                    color += sample * weight;                    total += weight;                }            }            gl_FragColor = color / total;        }    "
      );
    for (var t = 0; 2 > t; t++)
      o.call(this, H.denoise, {
        exponent: Math.max(0, e),
        texSize: [this.width, this.height],
      });
    return this;
  }
  function w(t, n) {
    return (
      (t /= 360),
      (n /= 100),
      (H.hueSaturation =
        H.hueSaturation ||
        new $(
          null,
          "        varying vec2 texCoord;        uniform sampler2D texture;        uniform float hue;        uniform float saturation;        float Hue_2_RGB(float v1, float v2, float vH )        {            float ret;           if ( vH < 0.0 ) {             vH += 1.0;         }           if ( vH > 1.0 ){             vH -= 1.0;         }           if ( ( 6.0 * vH ) < 1.0 ){             ret = ( v1 + ( v2 - v1 ) * 6.0 * vH );         }           else if ( ( 2.0 * vH ) < 1.0 ){             ret = ( v2 );         }           else if ( ( 3.0 * vH ) < 2.0 ){             ret = ( v1 + ( v2 - v1 ) * ( ( 2.0 / 3.0 ) - vH ) * 6.0 );         }           else{             ret = v1;         }           return ret;        }        void main (void)        {            vec4  color;            float Cmax, Cmin;            float D;            float H, S, L;            float R, G, B;            color = texture2D(texture, texCoord);            R = color.r;            G = color.g;            B = color.b;            Cmax = max (R, max (G, B));            Cmin = min (R, min (G, B));            L = (Cmax + Cmin) / 2.0;            float slope, sat;          if (Cmax == Cmin)          {                H = 0.0;                S = 0.0;          }          else          {            D = Cmax - Cmin;            if (L < 0.5)            {              S = D / (Cmax + Cmin);            }            else            {              S = D / (2.0 - (Cmax + Cmin));            }            if (R == Cmax)            {              H = (G - B) / D;                } else {              if (G == Cmax)              {                 H = 2.0 + (B - R) /D;              }              else              {                H = 4.0 + (R - G) / D;              }            }            H = H / 6.0;            H += hue;            L += 0.0;            if (saturation > 0.0)            {                sat = saturation + 1.0;                slope = 9.67262*(sat+0.337078)*(sat*sat-3.19448*sat+2.75115)*(sat*sat-1.71953*sat+0.858425);                S = slope * S;            }            else            {                S *= (1.0 + saturation);            }        }        if (H < 0.0)        {            H = H + 1.0;        }        H = clamp(H, 0.0, 1.0);        S = clamp(S, 0.0, 1.0);        L = clamp(L, 0.0, 1.0);        float var_2, var_1;        if (S == 0.0)        {           R = L;           G = L;           B = L;        }        else        {           if ( L < 0.5 )           {           var_2 = L * ( 1.0 + S );           }           else           {           var_2 = ( L + S ) - ( S * L );           }           var_1 = 2.0 * L - var_2;           R = Hue_2_RGB( var_1, var_2, H + ( 1.0 / 3.0 ) );           G = Hue_2_RGB( var_1, var_2, H );           B = Hue_2_RGB( var_1, var_2, H - ( 1.0 / 3.0 ) );        }         gl_FragColor = vec4(R,G,B, color.a);        }    "
        )),
      o.call(this, H.hueSaturation, {
        hue: e(-1, t, 1),
        saturation: e(-1, n, 1),
      }),
      this
    );
  }
  function x(t) {
    return (
      (H.noise =
        H.noise ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        float rand(vec2 co) {            return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);        }        void main() {            vec4 color = texture2D(texture, texCoord);                        float diff = (rand(texCoord) - 0.5) * amount;            color.r += diff;            color.g += diff;            color.b += diff;                        gl_FragColor = color;        }    "
        )),
      o.call(this, H.noise, { amount: e(0, t, 1) }),
      this
    );
  }
  function C(t) {
    return (
      (H.sepia =
        H.sepia ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            float r = color.r;            float g = color.g;            float b = color.b;                        color.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));            color.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));            color.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));                        gl_FragColor = color;        }    "
        )),
      o.call(this, H.sepia, { amount: e(0, t, 1) }),
      this
    );
  }
  function T(e, t) {
    return (
      (H.unsharpMask =
        H.unsharpMask ||
        new $(
          null,
          "        uniform sampler2D blurredTexture;        uniform sampler2D originalTexture;        uniform float strength;        uniform float threshold;        varying vec2 texCoord;        void main() {            vec4 blurred = texture2D(blurredTexture, texCoord);            vec4 original = texture2D(originalTexture, texCoord);            gl_FragColor = mix(blurred, original, 1.0 + strength);        }    "
        )),
      this._.extraTexture.ensureFormat(this._.texture),
      this._.texture.use(),
      this._.extraTexture.drawTo(function () {
        $.getDefaultShader().drawRect();
      }),
      this._.extraTexture.use(1),
      this.triangleBlur(e),
      H.unsharpMask.textures({ originalTexture: 1 }),
      o.call(this, H.unsharpMask, { strength: t }),
      this._.extraTexture.unuse(1),
      this
    );
  }
  function S(t) {
    return (
      (H.vibrance =
        H.vibrance ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            float average = (color.r + color.g + color.b) / 3.0;            float mx = max(color.r, max(color.g, color.b));            float amt = (mx - average) * (-amount * 3.0);            color.rgb = mix(color.rgb, vec3(mx), amt);            gl_FragColor = color;        }    "
        )),
      o.call(this, H.vibrance, { amount: e(-1, t, 1) }),
      this
    );
  }
  function E(t, n) {
    return (
      (H.vignette =
        H.vignette ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float size;        uniform float amount;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);                        float dist = distance(texCoord, vec2(0.5, 0.5));            color.rgb *= smoothstep(0.8, size * 0.799, dist * (amount + size));                        gl_FragColor = color;        }    "
        )),
      o.call(this, H.vignette, { size: e(0, t, 1), amount: e(0, n, 1) }),
      this
    );
  }
  function k(t, n, i) {
    H.lensBlurPrePass =
      H.lensBlurPrePass ||
      new $(
        null,
        "        uniform sampler2D texture;        uniform float power;        varying vec2 texCoord;        void main() {            vec4 color = texture2D(texture, texCoord);            color = pow(color, vec4(power));            gl_FragColor = vec4(color);        }    "
      );
    var r =
      "        uniform sampler2D texture0;        uniform sampler2D texture1;        uniform vec2 delta0;        uniform vec2 delta1;        uniform float power;        varying vec2 texCoord;        " +
      W +
      "        vec4 sample(vec2 delta) {            /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(delta, 151.7182), 0.0);                        vec4 color = vec4(0.0);            float total = 0.0;            for (float t = 0.0; t <= 30.0; t++) {                float percent = (t + offset) / 30.0;                color += texture2D(texture0, texCoord + delta * percent);                total += 1.0;            }            return color / total;        }    ";
    (H.lensBlur0 =
      H.lensBlur0 ||
      new $(
        null,
        r +
          "        void main() {            gl_FragColor = sample(delta0);        }    "
      )),
      (H.lensBlur1 =
        H.lensBlur1 ||
        new $(
          null,
          r +
            "        void main() {            gl_FragColor = (sample(delta0) + sample(delta1)) * 0.5;        }    "
        )),
      (H.lensBlur2 =
        H.lensBlur2 ||
        new $(
          null,
          r +
            "        void main() {            vec4 color = (sample(delta0) + 2.0 * texture2D(texture1, texCoord)) / 3.0;            gl_FragColor = pow(color, vec4(power));        }    "
        ).textures({ texture1: 1 }));
    for (var s = [], a = 0; 3 > a; a++) {
      var l = i + (a * Math.PI * 2) / 3;
      s.push([(t * Math.sin(l)) / this.width, (t * Math.cos(l)) / this.height]);
    }
    var c = Math.pow(10, e(-1, n, 1));
    return (
      o.call(this, H.lensBlurPrePass, { power: c }),
      this._.extraTexture.ensureFormat(this._.texture),
      o.call(
        this,
        H.lensBlur0,
        { delta0: s[0] },
        this._.texture,
        this._.extraTexture
      ),
      o.call(
        this,
        H.lensBlur1,
        { delta0: s[1], delta1: s[2] },
        this._.extraTexture,
        this._.extraTexture
      ),
      o.call(this, H.lensBlur0, { delta0: s[1] }),
      this._.extraTexture.use(1),
      o.call(this, H.lensBlur2, { power: 1 / c, delta0: s[2] }),
      this
    );
  }
  function P(e, t, n, i, r, s) {
    H.tiltShift =
      H.tiltShift ||
      new $(
        null,
        "        uniform sampler2D texture;        uniform float blurRadius;        uniform float gradientRadius;        uniform vec2 start;        uniform vec2 end;        uniform vec2 delta;        uniform vec2 texSize;        varying vec2 texCoord;        " +
          W +
          "        void main() {            vec4 color = vec4(0.0);            float total = 0.0;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));            float radius = smoothstep(0.0, 1.0, abs(dot(texCoord * texSize - start, normal)) / gradientRadius) * blurRadius;            for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec4 sample = texture2D(texture, texCoord + delta / texSize * percent * radius);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    "
      );
    var a = n - e,
      l = i - t,
      c = Math.sqrt(a * a + l * l);
    return (
      o.call(this, H.tiltShift, {
        blurRadius: r,
        gradientRadius: s,
        start: [e, t],
        end: [n, i],
        delta: [a / c, l / c],
        texSize: [this.width, this.height],
      }),
      o.call(this, H.tiltShift, {
        blurRadius: r,
        gradientRadius: s,
        start: [e, t],
        end: [n, i],
        delta: [-l / c, a / c],
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function I(e) {
    return (
      (H.triangleBlur =
        H.triangleBlur ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        " +
            W +
            "        void main() {            vec4 color = vec4(0.0);            float total = 0.0;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec4 sample = texture2D(texture, texCoord + delta * percent);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    "
        )),
      o.call(this, H.triangleBlur, { delta: [e / this.width, 0] }),
      o.call(this, H.triangleBlur, { delta: [0, e / this.height] }),
      this
    );
  }
  function A(e, t, n) {
    return (
      (H.zoomBlur =
        H.zoomBlur ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 center;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        " +
            W +
            "        void main() {            vec4 color = vec4(0.0);            float total = 0.0;            vec2 toCenter = center - texCoord * texSize;                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = 0.0; t <= 40.0; t++) {                float percent = (t + offset) / 40.0;                float weight = 4.0 * (percent - percent * percent);                vec4 sample = texture2D(texture, texCoord + toCenter * percent * strength / texSize);                                /* switch to pre-multiplied alpha to correctly blur transparent images */                sample.rgb *= sample.a;                                color += sample * weight;                total += weight;            }                        gl_FragColor = color / total;                        /* switch back from pre-multiplied alpha */            gl_FragColor.rgb /= gl_FragColor.a + 0.00001;        }    "
        )),
      o.call(this, H.zoomBlur, {
        center: [e, t],
        strength: n,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function O(e, t, n, i) {
    return (
      (H.colorHalftone =
        H.colorHalftone ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 center;        uniform float angle;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;                float pattern(float angle) {            float s = sin(angle), c = cos(angle);            vec2 tex = texCoord * texSize - center;            vec2 point = vec2(                c * tex.x - s * tex.y,                s * tex.x + c * tex.y            ) * scale;            return (sin(point.x) * sin(point.y)) * 4.0;        }                void main() {            vec4 color = texture2D(texture, texCoord);            vec3 cmy = 1.0 - color.rgb;            float k = min(cmy.x, min(cmy.y, cmy.z));            cmy = (cmy - k) / (1.0 - k);            cmy = clamp(cmy * 10.0 - 3.0 + vec3(pattern(angle + 0.26179), pattern(angle + 1.30899), pattern(angle)), 0.0, 1.0);            k = clamp(k * 10.0 - 5.0 + pattern(angle + 0.78539), 0.0, 1.0);            gl_FragColor = vec4(1.0 - cmy - k, color.a);        }    "
        )),
      o.call(this, H.colorHalftone, {
        center: [e, t],
        angle: n,
        scale: Math.PI / i,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function D(e, t, n, i) {
    return (
      (H.dotScreen =
        H.dotScreen ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 center;        uniform float angle;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;                float pattern() {            float s = sin(angle), c = cos(angle);            vec2 tex = texCoord * texSize - center;            vec2 point = vec2(                c * tex.x - s * tex.y,                s * tex.x + c * tex.y            ) * scale;            return (sin(point.x) * sin(point.y)) * 4.0;        }                void main() {            vec4 color = texture2D(texture, texCoord);            float average = (color.r + color.g + color.b) / 3.0;            gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);        }    "
        )),
      o.call(this, H.dotScreen, {
        center: [e, t],
        angle: n,
        scale: Math.PI / i,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function M(e) {
    return (
      (H.edgeWork1 =
        H.edgeWork1 ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        " +
            W +
            "        void main() {            vec2 color = vec2(0.0);            vec2 total = vec2(0.0);                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec3 sample = texture2D(texture, texCoord + delta * percent).rgb;                float average = (sample.r + sample.g + sample.b) / 3.0;                color.x += average * weight;                total.x += weight;                if (abs(t) < 15.0) {                    weight = weight * 2.0 - 1.0;                    color.y += average * weight;                    total.y += weight;                }            }            gl_FragColor = vec4(color / total, 0.0, 1.0);        }    "
        )),
      (H.edgeWork2 =
        H.edgeWork2 ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 delta;        varying vec2 texCoord;        " +
            W +
            "        void main() {            vec2 color = vec2(0.0);            vec2 total = vec2(0.0);                        /* randomize the lookup values to hide the fixed number of samples */            float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);                        for (float t = -30.0; t <= 30.0; t++) {                float percent = (t + offset - 0.5) / 30.0;                float weight = 1.0 - abs(percent);                vec2 sample = texture2D(texture, texCoord + delta * percent).xy;                color.x += sample.x * weight;                total.x += weight;                if (abs(t) < 15.0) {                    weight = weight * 2.0 - 1.0;                    color.y += sample.y * weight;                    total.y += weight;                }            }            float c = clamp(10000.0 * (color.y / total.y - color.x / total.x) + 0.5, 0.0, 1.0);            gl_FragColor = vec4(c, c, c, 1.0);        }    "
        )),
      o.call(this, H.edgeWork1, { delta: [e / this.width, 0] }),
      o.call(this, H.edgeWork2, { delta: [0, e / this.height] }),
      this
    );
  }
  function R(e, t, n) {
    return (
      (H.hexagonalPixelate =
        H.hexagonalPixelate ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform vec2 center;        uniform float scale;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec2 tex = (texCoord * texSize - center) / scale;            tex.y /= 0.866025404;            tex.x -= tex.y * 0.5;                        vec2 a;            if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) a = vec2(floor(tex.x), floor(tex.y));            else a = vec2(ceil(tex.x), ceil(tex.y));            vec2 b = vec2(ceil(tex.x), floor(tex.y));            vec2 c = vec2(floor(tex.x), ceil(tex.y));                        vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);            vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);            vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);            vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);                        float alen = length(TEX - A);            float blen = length(TEX - B);            float clen = length(TEX - C);                        vec2 choice;            if (alen < blen) {                if (alen < clen) choice = a;                else choice = c;            } else {                if (blen < clen) choice = b;                else choice = c;            }                        choice.x += choice.y * 0.5;            choice.y *= 0.866025404;            choice *= scale / texSize;            gl_FragColor = texture2D(texture, choice + center / texSize);        }    "
        )),
      o.call(this, H.hexagonalPixelate, {
        center: [e, t],
        scale: n,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function L(e) {
    return (
      (H.ink =
        H.ink ||
        new $(
          null,
          "        uniform sampler2D texture;        uniform float strength;        uniform vec2 texSize;        varying vec2 texCoord;        void main() {            vec2 dx = vec2(1.0 / texSize.x, 0.0);            vec2 dy = vec2(0.0, 1.0 / texSize.y);            vec4 color = texture2D(texture, texCoord);            float bigTotal = 0.0;            float smallTotal = 0.0;            vec3 bigAverage = vec3(0.0);            vec3 smallAverage = vec3(0.0);            for (float x = -2.0; x <= 2.0; x += 1.0) {                for (float y = -2.0; y <= 2.0; y += 1.0) {                    vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;                    bigAverage += sample;                    bigTotal += 1.0;                    if (abs(x) + abs(y) < 2.0) {                        smallAverage += sample;                        smallTotal += 1.0;                    }                }            }            vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);            gl_FragColor = vec4(color.rgb - dot(edge, edge) * strength * 100000.0, color.a);        }    "
        )),
      o.call(this, H.ink, {
        strength: e * e * e * e * e,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function N(t, n, i, r) {
    return (
      (H.bulgePinch =
        H.bulgePinch ||
        m(
          "        uniform float radius;        uniform float strength;        uniform vec2 center;    ",
          "        coord -= center;        float distance = length(coord);        if (distance < radius) {            float percent = distance / radius;            if (strength > 0.0) {                coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);            } else {                coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);            }        }        coord += center;    "
        )),
      o.call(this, H.bulgePinch, {
        radius: i,
        strength: e(-1, r, 1),
        center: [t, n],
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  function U(e, t, n) {
    if (
      ((H.matrixWarp =
        H.matrixWarp ||
        m(
          "        uniform mat3 matrix;        uniform bool useTextureSpace;    ",
          "        if (useTextureSpace) coord = coord / texSize * 2.0 - 1.0;        vec3 warp = matrix * vec3(coord, 1.0);        coord = warp.xy / warp.z;        if (useTextureSpace) coord = (coord * 0.5 + 0.5) * texSize;    "
        )),
      (e = Array.prototype.concat.apply([], e)),
      4 == e.length)
    )
      e = [e[0], e[1], 0, e[2], e[3], 0, 0, 0, 1];
    else if (9 != e.length) throw "can only warp with 2x2 or 3x3 matrix";
    return (
      o.call(this, H.matrixWarp, {
        matrix: t ? d(e) : e,
        texSize: [this.width, this.height],
        useTextureSpace: 0 | n,
      }),
      this
    );
  }
  function B(e, t) {
    var n = h.apply(null, t),
      i = h.apply(null, e),
      r = p(d(n), i);
    return this.matrixWarp(r);
  }
  function F(e, t, n, i) {
    return (
      (H.swirl =
        H.swirl ||
        m(
          "        uniform float radius;        uniform float angle;        uniform vec2 center;    ",
          "        coord -= center;        float distance = length(coord);        if (distance < radius) {            float percent = (radius - distance) / radius;            float theta = percent * percent * angle;            float s = sin(theta);            float c = cos(theta);            coord = vec2(                coord.x * c - coord.y * s,                coord.x * s + coord.y * c            );        }        coord += center;    "
        )),
      o.call(this, H.swirl, {
        radius: n,
        center: [e, t],
        angle: i,
        texSize: [this.width, this.height],
      }),
      this
    );
  }
  var j = {};
  !(function () {
    function e(e) {
      if (!e.getExtension("OES_texture_float")) return !1;
      var t = e.createFramebuffer(),
        n = e.createTexture();
      e.bindTexture(e.TEXTURE_2D, n),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.NEAREST),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.NEAREST),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
        e.texImage2D(
          e.TEXTURE_2D,
          0,
          e.RGBA,
          1,
          1,
          0,
          e.RGBA,
          e.UNSIGNED_BYTE,
          null
        ),
        e.bindFramebuffer(e.FRAMEBUFFER, t),
        e.framebufferTexture2D(
          e.FRAMEBUFFER,
          e.COLOR_ATTACHMENT0,
          e.TEXTURE_2D,
          n,
          0
        );
      var i = [2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        r = e.createTexture();
      e.bindTexture(e.TEXTURE_2D, r),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE),
        e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE),
        e.texImage2D(
          e.TEXTURE_2D,
          0,
          e.RGBA,
          2,
          2,
          0,
          e.RGBA,
          e.FLOAT,
          new Float32Array(i)
        );
      var s = e.createProgram(),
        o = e.createShader(e.VERTEX_SHADER),
        a = e.createShader(e.FRAGMENT_SHADER);
      e.shaderSource(
        o,
        "      attribute vec2 vertex;      void main() {        gl_Position = vec4(vertex, 0.0, 1.0);      }    "
      ),
        e.shaderSource(
          a,
          "      uniform sampler2D texture;      void main() {        gl_FragColor = texture2D(texture, vec2(0.5));      }    "
        ),
        e.compileShader(o),
        e.compileShader(a),
        e.attachShader(s, o),
        e.attachShader(s, a),
        e.linkProgram(s);
      var l = e.createBuffer();
      e.bindBuffer(e.ARRAY_BUFFER, l),
        e.bufferData(e.ARRAY_BUFFER, new Float32Array([0, 0]), e.STREAM_DRAW),
        e.enableVertexAttribArray(0),
        e.vertexAttribPointer(0, 2, e.FLOAT, !1, 0, 0);
      var c = new Uint8Array(4);
      return (
        e.useProgram(s),
        e.viewport(0, 0, 1, 1),
        e.bindTexture(e.TEXTURE_2D, r),
        e.drawArrays(e.POINTS, 0, 1),
        e.readPixels(0, 0, 1, 1, e.RGBA, e.UNSIGNED_BYTE, c),
        127 === c[0] || 128 === c[0]
      );
    }
    function t() {}
    function n(e) {
      return (
        void 0 === e.$OES_texture_float_linear$ &&
          Object.defineProperty(e, "$OES_texture_float_linear$", {
            enumerable: !1,
            configurable: !1,
            writable: !1,
            value: new t(),
          }),
        e.$OES_texture_float_linear$
      );
    }
    function i(e) {
      return "OES_texture_float_linear" === e ? n(this) : a.call(this, e);
    }
    function r() {
      var e = l.call(this);
      return (
        -1 === e.indexOf("OES_texture_float_linear") &&
          e.push("OES_texture_float_linear"),
        e
      );
    }
    try {
      var s = document.createElement("canvas").getContext("experimental-webgl");
    } catch (o) {}
    if (
      s &&
      -1 === s.getSupportedExtensions().indexOf("OES_texture_float_linear") &&
      e(s)
    ) {
      var a = WebGLRenderingContext.prototype.getExtension,
        l = WebGLRenderingContext.prototype.getSupportedExtensions;
      (WebGLRenderingContext.prototype.getExtension = i),
        (WebGLRenderingContext.prototype.getSupportedExtensions = r);
    }
  })();
  var H;
  (j.canvas = function () {
    var e = document.createElement("canvas");
    try {
      H = e.getContext("experimental-webgl", { premultipliedAlpha: !1 });
    } catch (t) {
      H = null;
    }
    if (!H) throw "This browser does not support WebGL";
    return (
      (e._ = {
        gl: H,
        isInitialized: !1,
        texture: null,
        spareTexture: null,
        flippedShader: null,
      }),
      (e.texture = u(n)),
      (e.draw = u(r)),
      (e.update = u(s)),
      (e.replace = u(a)),
      (e.contents = u(l)),
      (e.getPixelArray = u(c)),
      (e.brightnessContrast = u(g)),
      (e.hexagonalPixelate = u(R)),
      (e.hueSaturation = u(w)),
      (e.colorHalftone = u(O)),
      (e.triangleBlur = u(I)),
      (e.unsharpMask = u(T)),
      (e.perspective = u(B)),
      (e.matrixWarp = u(U)),
      (e.bulgePinch = u(N)),
      (e.tiltShift = u(P)),
      (e.dotScreen = u(D)),
      (e.edgeWork = u(M)),
      (e.lensBlur = u(k)),
      (e.zoomBlur = u(A)),
      (e.noise = u(x)),
      (e.denoise = u(b)),
      (e.curves = u(y)),
      (e.swirl = u(F)),
      (e.ink = u(L)),
      (e.vignette = u(E)),
      (e.vibrance = u(S)),
      (e.sepia = u(C)),
      e
    );
  }),
    (j.splineInterpolate = _);
  var $ = (function () {
    function e(e) {
      return "[object Array]" == Object.prototype.toString.call(e);
    }
    function t(e) {
      return "[object Number]" == Object.prototype.toString.call(e);
    }
    function n(e, t) {
      var n = H.createShader(e);
      if (
        (H.shaderSource(n, t),
        H.compileShader(n),
        !H.getShaderParameter(n, H.COMPILE_STATUS))
      )
        throw "compile error: " + H.getShaderInfoLog(n);
      return n;
    }
    function i(e, t) {
      if (
        ((this.vertexAttribute = null),
        (this.texCoordAttribute = null),
        (this.program = H.createProgram()),
        (e = e || r),
        (t = t || s),
        (t = "precision highp float;" + t),
        H.attachShader(this.program, n(H.VERTEX_SHADER, e)),
        H.attachShader(this.program, n(H.FRAGMENT_SHADER, t)),
        H.linkProgram(this.program),
        !H.getProgramParameter(this.program, H.LINK_STATUS))
      )
        throw "link error: " + H.getProgramInfoLog(this.program);
    }
    var r =
        "    attribute vec2 vertex;    attribute vec2 _texCoord;    varying vec2 texCoord;    void main() {        texCoord = _texCoord;        gl_Position = vec4(vertex * 2.0 - 1.0, 0.0, 1.0);    }",
      s =
        "    uniform sampler2D texture;    varying vec2 texCoord;    void main() {        gl_FragColor = texture2D(texture, texCoord);    }";
    return (
      (i.prototype.destroy = function () {
        H.deleteProgram(this.program), (this.program = null);
      }),
      (i.prototype.uniforms = function (n) {
        H.useProgram(this.program);
        for (var i in n)
          if (n.hasOwnProperty(i)) {
            var r = H.getUniformLocation(this.program, i);
            if (null !== r) {
              var s = n[i];
              if (e(s))
                switch (s.length) {
                  case 1:
                    H.uniform1fv(r, new Float32Array(s));
                    break;
                  case 2:
                    H.uniform2fv(r, new Float32Array(s));
                    break;
                  case 3:
                    H.uniform3fv(r, new Float32Array(s));
                    break;
                  case 4:
                    H.uniform4fv(r, new Float32Array(s));
                    break;
                  case 9:
                    H.uniformMatrix3fv(r, !1, new Float32Array(s));
                    break;
                  case 16:
                    H.uniformMatrix4fv(r, !1, new Float32Array(s));
                    break;
                  default:
                    throw (
                      "dont't know how to load uniform \"" +
                      i +
                      '" of length ' +
                      s.length
                    );
                }
              else {
                if (!t(s))
                  throw (
                    'attempted to set uniform "' +
                    i +
                    '" to invalid value ' +
                    (s || "undefined").toString()
                  );
                H.uniform1f(r, s);
              }
            }
          }
        return this;
      }),
      (i.prototype.textures = function (e) {
        H.useProgram(this.program);
        for (var t in e)
          e.hasOwnProperty(t) &&
            H.uniform1i(H.getUniformLocation(this.program, t), e[t]);
        return this;
      }),
      (i.prototype.drawRect = function (e, t, n, i) {
        var r,
          s = H.getParameter(H.VIEWPORT);
        (t = t !== r ? (t - s[1]) / s[3] : 0),
          (e = e !== r ? (e - s[0]) / s[2] : 0),
          (n = n !== r ? (n - s[0]) / s[2] : 1),
          (i = i !== r ? (i - s[1]) / s[3] : 1),
          null == H.vertexBuffer && (H.vertexBuffer = H.createBuffer()),
          H.bindBuffer(H.ARRAY_BUFFER, H.vertexBuffer),
          H.bufferData(
            H.ARRAY_BUFFER,
            new Float32Array([e, t, e, i, n, t, n, i]),
            H.STATIC_DRAW
          ),
          null == H.texCoordBuffer &&
            ((H.texCoordBuffer = H.createBuffer()),
            H.bindBuffer(H.ARRAY_BUFFER, H.texCoordBuffer),
            H.bufferData(
              H.ARRAY_BUFFER,
              new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]),
              H.STATIC_DRAW
            )),
          null == this.vertexAttribute &&
            ((this.vertexAttribute = H.getAttribLocation(
              this.program,
              "vertex"
            )),
            H.enableVertexAttribArray(this.vertexAttribute)),
          null == this.texCoordAttribute &&
            ((this.texCoordAttribute = H.getAttribLocation(
              this.program,
              "_texCoord"
            )),
            H.enableVertexAttribArray(this.texCoordAttribute)),
          H.useProgram(this.program),
          H.bindBuffer(H.ARRAY_BUFFER, H.vertexBuffer),
          H.vertexAttribPointer(this.vertexAttribute, 2, H.FLOAT, !1, 0, 0),
          H.bindBuffer(H.ARRAY_BUFFER, H.texCoordBuffer),
          H.vertexAttribPointer(this.texCoordAttribute, 2, H.FLOAT, !1, 0, 0),
          H.drawArrays(H.TRIANGLE_STRIP, 0, 4);
      }),
      (i.getDefaultShader = function () {
        return (H.defaultShader = H.defaultShader || new i()), H.defaultShader;
      }),
      i
    );
  })();
  f.prototype.interpolate = function (e) {
    for (var t = this.ya.length, n = 0, i = t - 1; i - n > 1; ) {
      var r = (i + n) >> 1;
      this.xa[r] > e ? (i = r) : (n = r);
    }
    var s = this.xa[i] - this.xa[n],
      o = (this.xa[i] - e) / s,
      a = (e - this.xa[n]) / s;
    return (
      o * this.ya[n] +
      a * this.ya[i] +
      (((o * o * o - o) * this.y2[n] + (a * a * a - a) * this.y2[i]) * s * s) /
        6
    );
  };
  var z = (function () {
      function e(e, t, n, i) {
        (this.gl = H),
          (this.id = H.createTexture()),
          (this.width = e),
          (this.height = t),
          (this.format = n),
          (this.type = i),
          H.bindTexture(H.TEXTURE_2D, this.id),
          H.texParameteri(H.TEXTURE_2D, H.TEXTURE_MAG_FILTER, H.LINEAR),
          H.texParameteri(H.TEXTURE_2D, H.TEXTURE_MIN_FILTER, H.LINEAR),
          H.texParameteri(H.TEXTURE_2D, H.TEXTURE_WRAP_S, H.CLAMP_TO_EDGE),
          H.texParameteri(H.TEXTURE_2D, H.TEXTURE_WRAP_T, H.CLAMP_TO_EDGE),
          e &&
            t &&
            H.texImage2D(
              H.TEXTURE_2D,
              0,
              this.format,
              e,
              t,
              0,
              this.format,
              this.type,
              null
            );
      }
      function t(e) {
        null == n && (n = document.createElement("canvas")),
          (n.width = e.width),
          (n.height = e.height);
        var t = n.getContext("2d");
        return t.clearRect(0, 0, n.width, n.height), t;
      }
      (e.fromElement = function (t) {
        var n = new e(0, 0, H.RGBA, H.UNSIGNED_BYTE);
        return n.loadContentsOf(t), n;
      }),
        (e.prototype.loadContentsOf = function (e) {
          (this.width = e.width || e.videoWidth),
            (this.height = e.height || e.videoHeight),
            H.bindTexture(H.TEXTURE_2D, this.id),
            H.texImage2D(
              H.TEXTURE_2D,
              0,
              this.format,
              this.format,
              this.type,
              e
            );
        }),
        (e.prototype.initFromBytes = function (e, t, n) {
          (this.width = e),
            (this.height = t),
            (this.format = H.RGBA),
            (this.type = H.UNSIGNED_BYTE),
            H.bindTexture(H.TEXTURE_2D, this.id),
            H.texImage2D(
              H.TEXTURE_2D,
              0,
              H.RGBA,
              e,
              t,
              0,
              H.RGBA,
              this.type,
              new Uint8Array(n)
            );
        }),
        (e.prototype.destroy = function () {
          H.deleteTexture(this.id), (this.id = null);
        }),
        (e.prototype.use = function (e) {
          H.activeTexture(H.TEXTURE0 + (e || 0)),
            H.bindTexture(H.TEXTURE_2D, this.id);
        }),
        (e.prototype.unuse = function (e) {
          H.activeTexture(H.TEXTURE0 + (e || 0)),
            H.bindTexture(H.TEXTURE_2D, null);
        }),
        (e.prototype.ensureFormat = function (e, t, n, i) {
          if (1 == arguments.length) {
            var r = arguments[0];
            (e = r.width), (t = r.height), (n = r.format), (i = r.type);
          }
          (e != this.width ||
            t != this.height ||
            n != this.format ||
            i != this.type) &&
            ((this.width = e),
            (this.height = t),
            (this.format = n),
            (this.type = i),
            H.bindTexture(H.TEXTURE_2D, this.id),
            H.texImage2D(
              H.TEXTURE_2D,
              0,
              this.format,
              e,
              t,
              0,
              this.format,
              this.type,
              null
            ));
        }),
        (e.prototype.drawTo = function (e) {
          if (
            ((H.framebuffer = H.framebuffer || H.createFramebuffer()),
            H.bindFramebuffer(H.FRAMEBUFFER, H.framebuffer),
            H.framebufferTexture2D(
              H.FRAMEBUFFER,
              H.COLOR_ATTACHMENT0,
              H.TEXTURE_2D,
              this.id,
              0
            ),
            H.checkFramebufferStatus(H.FRAMEBUFFER) !== H.FRAMEBUFFER_COMPLETE)
          )
            throw new Error("incomplete framebuffer");
          H.viewport(0, 0, this.width, this.height),
            e(),
            H.bindFramebuffer(H.FRAMEBUFFER, null);
        });
      var n = null;
      return (
        (e.prototype.fillUsingCanvas = function (e) {
          return (
            e(t(this)),
            (this.format = H.RGBA),
            (this.type = H.UNSIGNED_BYTE),
            H.bindTexture(H.TEXTURE_2D, this.id),
            H.texImage2D(H.TEXTURE_2D, 0, H.RGBA, H.RGBA, H.UNSIGNED_BYTE, n),
            this
          );
        }),
        (e.prototype.toImage = function (e) {
          this.use(), $.getDefaultShader().drawRect();
          var i = this.width * this.height * 4,
            r = new Uint8Array(i),
            s = t(this),
            o = s.createImageData(this.width, this.height);
          H.readPixels(
            0,
            0,
            this.width,
            this.height,
            H.RGBA,
            H.UNSIGNED_BYTE,
            r
          );
          for (var a = 0; i > a; a++) o.data[a] = r[a];
          s.putImageData(o, 0, 0), (e.src = n.toDataURL());
        }),
        (e.prototype.swapWith = function (e) {
          var t;
          (t = e.id),
            (e.id = this.id),
            (this.id = t),
            (t = e.width),
            (e.width = this.width),
            (this.width = t),
            (t = e.height),
            (e.height = this.height),
            (this.height = t),
            (t = e.format),
            (e.format = this.format),
            (this.format = t);
        }),
        e
      );
    })(),
    W =
      "    float random(vec3 scale, float seed) {        /* use the fragment position for a different seed per-pixel */        return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);    }";
  return (window.dataPoints = []), j;
})();
!(function (e, t) {
  "object" == typeof exports && "undefined" != typeof module
    ? t(exports)
    : "function" == typeof define && define.amd
    ? define(["exports"], t)
    : t((e.opentype = {}));
})(this, function (e) {
  "use strict";
  function t() {
    (this.table = new Uint16Array(16)), (this.trans = new Uint16Array(288));
  }
  function n(e, n) {
    (this.source = e),
      (this.sourceIndex = 0),
      (this.tag = 0),
      (this.bitcount = 0),
      (this.dest = n),
      (this.destLen = 0),
      (this.ltree = new t()),
      (this.dtree = new t());
  }
  function i(e, t, n, i) {
    var r, s;
    for (r = 0; n > r; ++r) e[r] = 0;
    for (r = 0; 30 - n > r; ++r) e[r + n] = (r / n) | 0;
    for (s = i, r = 0; 30 > r; ++r) (t[r] = s), (s += 1 << e[r]);
  }
  function r(e, t, n, i) {
    var r, s;
    for (r = 0; 16 > r; ++r) e.table[r] = 0;
    for (r = 0; i > r; ++r) e.table[t[n + r]]++;
    for (r = s = e.table[0] = 0; 16 > r; ++r) (Qn[r] = s), (s += e.table[r]);
    for (r = 0; i > r; ++r) t[n + r] && (e.trans[Qn[t[n + r]]++] = r);
  }
  function s(e) {
    e.bitcount-- || ((e.tag = e.source[e.sourceIndex++]), (e.bitcount = 7));
    var t = 1 & e.tag;
    return (e.tag >>>= 1), t;
  }
  function o(e, t, n) {
    if (!t) return n;
    for (; e.bitcount < 24; )
      (e.tag |= e.source[e.sourceIndex++] << e.bitcount), (e.bitcount += 8);
    var i = e.tag & (65535 >>> (16 - t));
    return (e.tag >>>= t), (e.bitcount -= t), i + n;
  }
  function a(e, t) {
    for (; e.bitcount < 24; )
      (e.tag |= e.source[e.sourceIndex++] << e.bitcount), (e.bitcount += 8);
    for (
      var n = 0, i = 0, r = 0, s = e.tag;
      (i = 2 * i + (1 & s)),
        (s >>>= 1),
        ++r,
        (n += t.table[r]),
        0 <= (i -= t.table[r]);

    );
    return (e.tag = s), (e.bitcount -= r), t.trans[n + i];
  }
  function l(e, t, n) {
    var i, s, l, c, u, h;
    for (i = o(e, 5, 257), s = o(e, 5, 1), l = o(e, 4, 4), c = 0; 19 > c; ++c)
      Jn[c] = 0;
    for (c = 0; l > c; ++c) {
      var d = o(e, 3, 0);
      Jn[Yn[c]] = d;
    }
    for (r(Kn, Jn, 0, 19), u = 0; i + s > u; ) {
      var p = a(e, Kn);
      switch (p) {
        case 16:
          var f = Jn[u - 1];
          for (h = o(e, 2, 3); h; --h) Jn[u++] = f;
          break;
        case 17:
          for (h = o(e, 3, 3); h; --h) Jn[u++] = 0;
          break;
        case 18:
          for (h = o(e, 7, 11); h; --h) Jn[u++] = 0;
          break;
        default:
          Jn[u++] = p;
      }
    }
    r(t, Jn, 0, i), r(n, Jn, i, s);
  }
  function c(e, t, n) {
    for (;;) {
      var i,
        r,
        s,
        l,
        c = a(e, t);
      if (256 === c) return Hn;
      if (256 > c) e.dest[e.destLen++] = c;
      else
        for (
          i = o(e, Gn[(c -= 257)], Vn[c]),
            r = a(e, n),
            l = s = e.destLen - o(e, qn[r], Xn[r]);
          s + i > l;
          ++l
        )
          e.dest[e.destLen++] = e.dest[l];
    }
  }
  function u(e) {
    for (var t, n; 8 < e.bitcount; ) e.sourceIndex--, (e.bitcount -= 8);
    if (
      (t =
        256 * (t = e.source[e.sourceIndex + 1]) + e.source[e.sourceIndex]) !==
      (65535 &
        ~(256 * e.source[e.sourceIndex + 3] + e.source[e.sourceIndex + 2]))
    )
      return $n;
    for (e.sourceIndex += 4, n = t; n; --n)
      e.dest[e.destLen++] = e.source[e.sourceIndex++];
    return (e.bitcount = 0), Hn;
  }
  function h(e, t, n, i, r) {
    return (
      Math.pow(1 - r, 3) * e +
      3 * Math.pow(1 - r, 2) * r * t +
      3 * (1 - r) * Math.pow(r, 2) * n +
      Math.pow(r, 3) * i
    );
  }
  function d() {
    (this.x1 = Number.NaN),
      (this.y1 = Number.NaN),
      (this.x2 = Number.NaN),
      (this.y2 = Number.NaN);
  }
  function p() {
    (this.commands = []),
      (this.fill = "black"),
      (this.stroke = null),
      (this.strokeWidth = 1);
  }
  function f(e) {
    throw new Error(e);
  }
  function m(e, t) {
    e || f(t);
  }
  function g(e) {
    return function () {
      return e;
    };
  }
  function v(e) {
    return e >= -128 && 127 >= e;
  }
  function _(e, t, n) {
    for (var i = 0, r = e.length; r > t && 64 > i && 0 === e[t]; ) ++t, ++i;
    return n.push(128 | (i - 1)), t;
  }
  function y(e, t, n) {
    for (var i = 0, r = e.length, s = t; r > s && 64 > i; ) {
      var o = e[s];
      if (!v(o)) break;
      if (0 === o && r > s + 1 && 0 === e[s + 1]) break;
      ++s, ++i;
    }
    n.push(i - 1);
    for (var a = t; s > a; ++a) n.push((e[a] + 256) & 255);
    return s;
  }
  function b(e, t, n) {
    for (var i = 0, r = e.length, s = t; r > s && 64 > i; ) {
      var o = e[s];
      if (0 === o) break;
      if (v(o) && r > s + 1 && v(e[s + 1])) break;
      ++s, ++i;
    }
    n.push(64 | (i - 1));
    for (var a = t; s > a; ++a) {
      var l = e[a];
      n.push(((l + 65536) >> 8) & 255, (l + 256) & 255);
    }
    return s;
  }
  function w(e, t, n) {
    for (var i = 0; i < t.length; i += 1) {
      var r = t[i];
      this[r.name] = r.value;
    }
    if (((this.tableName = e), (this.fields = t), n))
      for (var s = Object.keys(n), o = 0; o < s.length; o += 1) {
        var a = s[o],
          l = n[a];
        void 0 !== this[a] && (this[a] = l);
      }
  }
  function x(e, t, n) {
    void 0 === n && (n = t.length);
    var i = new Array(t.length + 1);
    i[0] = { name: e + "Count", type: "USHORT", value: n };
    for (var r = 0; r < t.length; r++)
      i[r + 1] = { name: e + r, type: "USHORT", value: t[r] };
    return i;
  }
  function C(e, t, n) {
    var i = t.length,
      r = new Array(i + 1);
    r[0] = { name: e + "Count", type: "USHORT", value: i };
    for (var s = 0; i > s; s++)
      r[s + 1] = { name: e + s, type: "TABLE", value: n(t[s], s) };
    return r;
  }
  function T(e, t, n) {
    var i = t.length,
      r = [];
    r[0] = { name: e + "Count", type: "USHORT", value: i };
    for (var s = 0; i > s; s++) r = r.concat(n(t[s], s));
    return r;
  }
  function S(e) {
    1 === e.format
      ? w.call(
          this,
          "coverageTable",
          [{ name: "coverageFormat", type: "USHORT", value: 1 }].concat(
            x("glyph", e.glyphs)
          )
        )
      : ei.assert(!1, "Can't create coverage table format 2 yet.");
  }
  function E(e) {
    w.call(
      this,
      "scriptListTable",
      T("scriptRecord", e, function (e, t) {
        var n = e.script,
          i = n.defaultLangSys;
        return (
          ei.assert(
            !!i,
            "Unable to write GSUB: script " +
              e.tag +
              " has no default language system."
          ),
          [
            { name: "scriptTag" + t, type: "TAG", value: e.tag },
            {
              name: "script" + t,
              type: "TABLE",
              value: new w(
                "scriptTable",
                [
                  {
                    name: "defaultLangSys",
                    type: "TABLE",
                    value: new w(
                      "defaultLangSys",
                      [
                        { name: "lookupOrder", type: "USHORT", value: 0 },
                        {
                          name: "reqFeatureIndex",
                          type: "USHORT",
                          value: i.reqFeatureIndex,
                        },
                      ].concat(x("featureIndex", i.featureIndexes))
                    ),
                  },
                ].concat(
                  T("langSys", n.langSysRecords, function (e, t) {
                    var n = e.langSys;
                    return [
                      { name: "langSysTag" + t, type: "TAG", value: e.tag },
                      {
                        name: "langSys" + t,
                        type: "TABLE",
                        value: new w(
                          "langSys",
                          [
                            { name: "lookupOrder", type: "USHORT", value: 0 },
                            {
                              name: "reqFeatureIndex",
                              type: "USHORT",
                              value: n.reqFeatureIndex,
                            },
                          ].concat(x("featureIndex", n.featureIndexes))
                        ),
                      },
                    ];
                  })
                )
              ),
            },
          ]
        );
      })
    );
  }
  function k(e) {
    w.call(
      this,
      "featureListTable",
      T("featureRecord", e, function (e, t) {
        var n = e.feature;
        return [
          { name: "featureTag" + t, type: "TAG", value: e.tag },
          {
            name: "feature" + t,
            type: "TABLE",
            value: new w(
              "featureTable",
              [
                {
                  name: "featureParams",
                  type: "USHORT",
                  value: n.featureParams,
                },
              ].concat(x("lookupListIndex", n.lookupListIndexes))
            ),
          },
        ];
      })
    );
  }
  function P(e, t) {
    w.call(
      this,
      "lookupListTable",
      C("lookup", e, function (e) {
        var n = t[e.lookupType];
        return (
          ei.assert(
            !!n,
            "Unable to write GSUB lookup type " + e.lookupType + " tables."
          ),
          new w(
            "lookupTable",
            [
              { name: "lookupType", type: "USHORT", value: e.lookupType },
              { name: "lookupFlag", type: "USHORT", value: e.lookupFlag },
            ].concat(C("subtable", e.subtables, n))
          )
        );
      })
    );
  }
  function I(e, t) {
    return e.getUint8(t);
  }
  function A(e, t) {
    return e.getUint16(t, !1);
  }
  function O(e, t) {
    return e.getUint32(t, !1);
  }
  function D(e, t) {
    return e.getInt16(t, !1) + e.getUint16(t + 2, !1) / 65535;
  }
  function M(e, t) {
    (this.data = e), (this.offset = t), (this.relativeOffset = 0);
  }
  function R(e) {
    this.font = e;
  }
  function L(e) {
    this.cmap = e;
  }
  function N(e, t) {
    (this.encoding = e), (this.charset = t);
  }
  function U(e) {
    switch (e.version) {
      case 1:
        this.names = vi.slice();
        break;
      case 2:
        this.names = new Array(e.numberOfGlyphs);
        for (var t = 0; t < e.numberOfGlyphs; t++)
          this.names[t] =
            e.glyphNameIndex[t] < vi.length
              ? vi[e.glyphNameIndex[t]]
              : e.names[e.glyphNameIndex[t] - vi.length];
        break;
      case 2.5:
        this.names = new Array(e.numberOfGlyphs);
        for (var n = 0; n < e.numberOfGlyphs; n++)
          this.names[n] = vi[n + e.glyphNameIndex[n]];
        break;
      case 3:
      default:
        this.names = [];
    }
  }
  function B(e) {
    this.bindConstructorValues(e);
  }
  function F(e, t, n) {
    Object.defineProperty(e, t, {
      get: function () {
        return e.path, e[n];
      },
      set: function (t) {
        e[n] = t;
      },
      enumerable: !0,
      configurable: !0,
    });
  }
  function j(e, t) {
    if (((this.font = e), (this.glyphs = {}), Array.isArray(t)))
      for (var n = 0; n < t.length; n++) this.glyphs[n] = t[n];
    this.length = (t && t.length) || 0;
  }
  function H(e, t) {
    if (e === t) return !0;
    if (Array.isArray(e) && Array.isArray(t)) {
      if (e.length !== t.length) return !1;
      for (var n = 0; n < e.length; n += 1) if (!H(e[n], t[n])) return !1;
      return !0;
    }
    return !1;
  }
  function $(e) {
    return e.length < 1240 ? 107 : e.length < 33900 ? 1131 : 32768;
  }
  function z(e, t, n) {
    var i,
      r,
      s = [],
      o = [],
      a = di.getCard16(e, t);
    if (0 !== a) {
      var l = di.getByte(e, t + 2);
      i = t + (a + 1) * l + 2;
      for (var c = t + 3, u = 0; a + 1 > u; u += 1)
        s.push(di.getOffset(e, c, l)), (c += l);
      r = i + s[a];
    } else r = t + 2;
    for (var h = 0; h < s.length - 1; h += 1) {
      var d = di.getBytes(e, i + s[h], i + s[h + 1]);
      n && (d = n(d)), o.push(d);
    }
    return { objects: o, startOffset: t, endOffset: r };
  }
  function W(e, t) {
    if (28 === t) return (e.parseByte() << 8) | e.parseByte();
    if (29 === t)
      return (
        (e.parseByte() << 24) |
        (e.parseByte() << 16) |
        (e.parseByte() << 8) |
        e.parseByte()
      );
    if (30 === t)
      return (function (e) {
        for (
          var t = "",
            n = [
              "0",
              "1",
              "2",
              "3",
              "4",
              "5",
              "6",
              "7",
              "8",
              "9",
              ".",
              "E",
              "E-",
              null,
              "-",
            ];
          ;

        ) {
          var i = e.parseByte(),
            r = i >> 4,
            s = 15 & i;
          if (15 === r) break;
          if (((t += n[r]), 15 === s)) break;
          t += n[s];
        }
        return parseFloat(t);
      })(e);
    if (t >= 32 && 246 >= t) return t - 139;
    if (t >= 247 && 250 >= t) return 256 * (t - 247) + e.parseByte() + 108;
    if (t >= 251 && 254 >= t) return 256 * -(t - 251) - e.parseByte() - 108;
    throw new Error("Invalid b0 " + t);
  }
  function G(e, t, n) {
    t = void 0 !== t ? t : 0;
    var i = new di.Parser(e, t),
      r = [],
      s = [];
    for (n = void 0 !== n ? n : e.length; i.relativeOffset < n; ) {
      var o = i.parseByte();
      21 >= o
        ? (12 === o && (o = 1200 + i.parseByte()), r.push([o, s]), (s = []))
        : s.push(W(i, o));
    }
    return (function (e) {
      for (var t = {}, n = 0; n < e.length; n += 1) {
        var i = e[n][0],
          r = e[n][1],
          s = void 0;
        if (
          ((s = 1 === r.length ? r[0] : r), t.hasOwnProperty(i) && !isNaN(t[i]))
        )
          throw new Error("Object " + t + " already has key " + i);
        t[i] = s;
      }
      return t;
    })(r);
  }
  function V(e, t) {
    return (t = 390 >= t ? fi[t] : e[t - 391]);
  }
  function q(e, t, n) {
    for (var i, r = {}, s = 0; s < t.length; s += 1) {
      var o = t[s];
      if (Array.isArray(o.type)) {
        var a = [];
        a.length = o.type.length;
        for (var l = 0; l < o.type.length; l++)
          void 0 === (i = void 0 !== e[o.op] ? e[o.op][l] : void 0) &&
            (i =
              void 0 !== o.value && void 0 !== o.value[l] ? o.value[l] : null),
            "SID" === o.type[l] && (i = V(n, i)),
            (a[l] = i);
        r[o.name] = a;
      } else
        void 0 === (i = e[o.op]) && (i = void 0 !== o.value ? o.value : null),
          "SID" === o.type && (i = V(n, i)),
          (r[o.name] = i);
    }
    return r;
  }
  function X(e, t, n, i) {
    return q(G(e, t, n), wi, i);
  }
  function Y(e, t, n, i) {
    for (var r, s, o = [], a = 0; a < n.length; a += 1) {
      var l = new DataView(new Uint8Array(n[a]).buffer),
        c = ((s = i), q(G((r = l), 0, r.byteLength), bi, s));
      (c._subrs = []), (c._subrsBias = 0);
      var u = c["private"][0],
        h = c["private"][1];
      if (0 !== u && 0 !== h) {
        var d = X(e, h + t, u, i);
        if (
          ((c._defaultWidthX = d.defaultWidthX),
          (c._nominalWidthX = d.nominalWidthX),
          0 !== d.subrs)
        ) {
          var p = z(e, h + d.subrs + t);
          (c._subrs = p.objects), (c._subrsBias = $(c._subrs));
        }
        c._privateDict = d;
      }
      o.push(c);
    }
    return o;
  }
  function K(e, t, n) {
    function i(e, t) {
      _ && f.closePath(), f.moveTo(e, t), (_ = !0);
    }
    function r() {
      m.length % 2 != 0 && !v && (C = m.shift() + d),
        (g += m.length >> 1),
        (m.length = 0),
        (v = !0);
    }
    var s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      f = new p(),
      m = [],
      g = 0,
      v = !1,
      _ = !1,
      y = 0,
      b = 0;
    if (e.isCIDFont) {
      var w = e.tables.cff.topDict._fdSelect[t.index],
        x = e.tables.cff.topDict._fdArray[w];
      (c = x._subrs),
        (u = x._subrsBias),
        (h = x._defaultWidthX),
        (d = x._nominalWidthX);
    } else (c = e.tables.cff.topDict._subrs), (u = e.tables.cff.topDict._subrsBias), (h = e.tables.cff.topDict._defaultWidthX), (d = e.tables.cff.topDict._nominalWidthX);
    var C = h;
    return (
      (function T(n) {
        for (var h, p, w, x, S, E, k, P, I, A, O, D, M = 0; M < n.length; ) {
          var R = n[M];
          switch (((M += 1), R)) {
            case 1:
            case 3:
              r();
              break;
            case 4:
              1 < m.length && !v && ((C = m.shift() + d), (v = !0)),
                (b += m.pop()),
                i(y, b);
              break;
            case 5:
              for (; 0 < m.length; )
                (y += m.shift()), (b += m.shift()), f.lineTo(y, b);
              break;
            case 6:
              for (
                ;
                0 < m.length &&
                ((y += m.shift()), f.lineTo(y, b), 0 !== m.length);

              )
                (b += m.shift()), f.lineTo(y, b);
              break;
            case 7:
              for (
                ;
                0 < m.length &&
                ((b += m.shift()), f.lineTo(y, b), 0 !== m.length);

              )
                (y += m.shift()), f.lineTo(y, b);
              break;
            case 8:
              for (; 0 < m.length; )
                (s = y + m.shift()),
                  (o = b + m.shift()),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (y = a + m.shift()),
                  (b = l + m.shift()),
                  f.curveTo(s, o, a, l, y, b);
              break;
            case 10:
              (S = m.pop() + u), (E = c[S]) && T(E);
              break;
            case 11:
              return;
            case 12:
              switch (((R = n[M]), (M += 1), R)) {
                case 35:
                  (s = y + m.shift()),
                    (o = b + m.shift()),
                    (a = s + m.shift()),
                    (l = o + m.shift()),
                    (k = a + m.shift()),
                    (P = l + m.shift()),
                    (I = k + m.shift()),
                    (A = P + m.shift()),
                    (O = I + m.shift()),
                    (D = A + m.shift()),
                    (y = O + m.shift()),
                    (b = D + m.shift()),
                    m.shift(),
                    f.curveTo(s, o, a, l, k, P),
                    f.curveTo(I, A, O, D, y, b);
                  break;
                case 34:
                  (s = y + m.shift()),
                    (o = b),
                    (a = s + m.shift()),
                    (l = o + m.shift()),
                    (k = a + m.shift()),
                    (P = l),
                    (I = k + m.shift()),
                    (A = l),
                    (O = I + m.shift()),
                    (D = b),
                    (y = O + m.shift()),
                    f.curveTo(s, o, a, l, k, P),
                    f.curveTo(I, A, O, D, y, b);
                  break;
                case 36:
                  (s = y + m.shift()),
                    (o = b + m.shift()),
                    (a = s + m.shift()),
                    (l = o + m.shift()),
                    (k = a + m.shift()),
                    (P = l),
                    (I = k + m.shift()),
                    (A = l),
                    (O = I + m.shift()),
                    (D = A + m.shift()),
                    (y = O + m.shift()),
                    f.curveTo(s, o, a, l, k, P),
                    f.curveTo(I, A, O, D, y, b);
                  break;
                case 37:
                  (s = y + m.shift()),
                    (o = b + m.shift()),
                    (a = s + m.shift()),
                    (l = o + m.shift()),
                    (k = a + m.shift()),
                    (P = l + m.shift()),
                    (I = k + m.shift()),
                    (A = P + m.shift()),
                    (O = I + m.shift()),
                    (D = A + m.shift()),
                    Math.abs(O - y) > Math.abs(D - b)
                      ? (y = O + m.shift())
                      : (b = D + m.shift()),
                    f.curveTo(s, o, a, l, k, P),
                    f.curveTo(I, A, O, D, y, b);
                  break;
                default:
                  console.log(
                    "Glyph " + t.index + ": unknown operator 1200" + R
                  ),
                    (m.length = 0);
              }
              break;
            case 14:
              0 < m.length && !v && ((C = m.shift() + d), (v = !0)),
                _ && (f.closePath(), (_ = !1));
              break;
            case 18:
              r();
              break;
            case 19:
            case 20:
              r(), (M += (g + 7) >> 3);
              break;
            case 21:
              2 < m.length && !v && ((C = m.shift() + d), (v = !0)),
                (b += m.pop()),
                i((y += m.pop()), b);
              break;
            case 22:
              1 < m.length && !v && ((C = m.shift() + d), (v = !0)),
                i((y += m.pop()), b);
              break;
            case 23:
              r();
              break;
            case 24:
              for (; 2 < m.length; )
                (s = y + m.shift()),
                  (o = b + m.shift()),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (y = a + m.shift()),
                  (b = l + m.shift()),
                  f.curveTo(s, o, a, l, y, b);
              (y += m.shift()), (b += m.shift()), f.lineTo(y, b);
              break;
            case 25:
              for (; 6 < m.length; )
                (y += m.shift()), (b += m.shift()), f.lineTo(y, b);
              (s = y + m.shift()),
                (o = b + m.shift()),
                (a = s + m.shift()),
                (l = o + m.shift()),
                (y = a + m.shift()),
                (b = l + m.shift()),
                f.curveTo(s, o, a, l, y, b);
              break;
            case 26:
              for (m.length % 2 && (y += m.shift()); 0 < m.length; )
                (s = y),
                  (o = b + m.shift()),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (y = a),
                  (b = l + m.shift()),
                  f.curveTo(s, o, a, l, y, b);
              break;
            case 27:
              for (m.length % 2 && (b += m.shift()); 0 < m.length; )
                (s = y + m.shift()),
                  (o = b),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (y = a + m.shift()),
                  (b = l),
                  f.curveTo(s, o, a, l, y, b);
              break;
            case 28:
              (h = n[M]),
                (p = n[M + 1]),
                m.push(((h << 24) | (p << 16)) >> 16),
                (M += 2);
              break;
            case 29:
              (S = m.pop() + e.gsubrsBias), (E = e.gsubrs[S]) && T(E);
              break;
            case 30:
              for (
                ;
                0 < m.length &&
                ((s = y),
                (o = b + m.shift()),
                (a = s + m.shift()),
                (l = o + m.shift()),
                (y = a + m.shift()),
                (b = l + (1 === m.length ? m.shift() : 0)),
                f.curveTo(s, o, a, l, y, b),
                0 !== m.length);

              )
                (s = y + m.shift()),
                  (o = b),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (b = l + m.shift()),
                  (y = a + (1 === m.length ? m.shift() : 0)),
                  f.curveTo(s, o, a, l, y, b);
              break;
            case 31:
              for (
                ;
                0 < m.length &&
                ((s = y + m.shift()),
                (o = b),
                (a = s + m.shift()),
                (l = o + m.shift()),
                (b = l + m.shift()),
                (y = a + (1 === m.length ? m.shift() : 0)),
                f.curveTo(s, o, a, l, y, b),
                0 !== m.length);

              )
                (s = y),
                  (o = b + m.shift()),
                  (a = s + m.shift()),
                  (l = o + m.shift()),
                  (y = a + m.shift()),
                  (b = l + (1 === m.length ? m.shift() : 0)),
                  f.curveTo(s, o, a, l, y, b);
              break;
            default:
              32 > R
                ? console.log("Glyph " + t.index + ": unknown operator " + R)
                : 247 > R
                ? m.push(R - 139)
                : 251 > R
                ? ((h = n[M]), (M += 1), m.push(256 * (R - 247) + h + 108))
                : 255 > R
                ? ((h = n[M]), (M += 1), m.push(256 * -(R - 251) - h - 108))
                : ((h = n[M]),
                  (p = n[M + 1]),
                  (w = n[M + 2]),
                  (x = n[M + 3]),
                  (M += 4),
                  m.push(((h << 24) | (p << 16) | (w << 8) | x) / 65536));
          }
        }
      })(n),
      (t.advanceWidth = C),
      f
    );
  }
  function J(e, t) {
    var n,
      i = fi.indexOf(e);
    return (
      i >= 0 && (n = i),
      0 <= (i = t.indexOf(e))
        ? (n = i + fi.length)
        : ((n = fi.length + t.length), t.push(e)),
      n
    );
  }
  function Q(e, t, n) {
    for (var i = {}, r = 0; r < e.length; r += 1) {
      var s = e[r],
        o = t[s.name];
      void 0 === o ||
        H(o, s.value) ||
        ("SID" === s.type && (o = J(o, n)),
        (i[s.op] = { name: s.name, type: s.type, value: o }));
    }
    return i;
  }
  function Z(e, t) {
    var n = new ci.Record("Top DICT", [
      { name: "dict", type: "DICT", value: {} },
    ]);
    return (n.dict = Q(bi, e, t)), n;
  }
  function et(e) {
    var t = new ci.Record("Top DICT INDEX", [
      { name: "topDicts", type: "INDEX", value: [] },
    ]);
    return (t.topDicts = [{ name: "topDict_0", type: "TABLE", value: e }]), t;
  }
  function tt(e) {
    var t = [],
      n = e.path;
    t.push({ name: "width", type: "NUMBER", value: e.advanceWidth });
    for (var i = 0, r = 0, s = 0; s < n.commands.length; s += 1) {
      var o = void 0,
        a = void 0,
        l = n.commands[s];
      if (
        ("Q" === l.type &&
          (l = {
            type: "C",
            x: l.x,
            y: l.y,
            x1: (1 / 3) * i + (2 / 3) * l.x1,
            y1: (1 / 3) * r + (2 / 3) * l.y1,
            x2: (1 / 3) * l.x + (2 / 3) * l.x1,
            y2: (1 / 3) * l.y + (2 / 3) * l.y1,
          }),
        "M" === l.type)
      )
        (o = Math.round(l.x - i)),
          (a = Math.round(l.y - r)),
          t.push({ name: "dx", type: "NUMBER", value: o }),
          t.push({ name: "dy", type: "NUMBER", value: a }),
          t.push({ name: "rmoveto", type: "OP", value: 21 }),
          (i = Math.round(l.x)),
          (r = Math.round(l.y));
      else if ("L" === l.type)
        (o = Math.round(l.x - i)),
          (a = Math.round(l.y - r)),
          t.push({ name: "dx", type: "NUMBER", value: o }),
          t.push({ name: "dy", type: "NUMBER", value: a }),
          t.push({ name: "rlineto", type: "OP", value: 5 }),
          (i = Math.round(l.x)),
          (r = Math.round(l.y));
      else if ("C" === l.type) {
        var c = Math.round(l.x1 - i),
          u = Math.round(l.y1 - r),
          h = Math.round(l.x2 - l.x1),
          d = Math.round(l.y2 - l.y1);
        (o = Math.round(l.x - l.x2)),
          (a = Math.round(l.y - l.y2)),
          t.push({ name: "dx1", type: "NUMBER", value: c }),
          t.push({ name: "dy1", type: "NUMBER", value: u }),
          t.push({ name: "dx2", type: "NUMBER", value: h }),
          t.push({ name: "dy2", type: "NUMBER", value: d }),
          t.push({ name: "dx", type: "NUMBER", value: o }),
          t.push({ name: "dy", type: "NUMBER", value: a }),
          t.push({ name: "rrcurveto", type: "OP", value: 8 }),
          (i = Math.round(l.x)),
          (r = Math.round(l.y));
      }
    }
    return t.push({ name: "endchar", type: "OP", value: 14 }), t;
  }
  function nt(e, t, n) {
    switch (e) {
      case 0:
        if (65535 === t) return "und";
        if (n) return n[t];
        break;
      case 1:
        return Ii[t];
      case 3:
        return Oi[t];
    }
  }
  function it(e, t, n) {
    switch (e) {
      case 0:
        return Di;
      case 1:
        return Ri[n] || Mi[t];
      case 3:
        if (1 === t || 10 === t) return Di;
    }
  }
  function rt(e) {
    var t = {};
    for (var n in e) t[e[n]] = parseInt(n);
    return t;
  }
  function st(e, t, n, i, r, s) {
    return new ci.Record("NameRecord", [
      { name: "platformID", type: "USHORT", value: e },
      { name: "encodingID", type: "USHORT", value: t },
      { name: "languageID", type: "USHORT", value: n },
      { name: "nameID", type: "USHORT", value: i },
      { name: "length", type: "USHORT", value: r },
      { name: "offset", type: "USHORT", value: s },
    ]);
  }
  function ot(e, t) {
    var n = (function (e, t) {
      var n = e.length,
        i = t.length - n + 1;
      e: for (var r = 0; i > r; r++)
        for (; i > r; r++) {
          for (var s = 0; n > s; s++) if (t[r + s] !== e[s]) continue e;
          return r;
        }
      return -1;
    })(e, t);
    if (0 > n) {
      n = t.length;
      for (var i = 0, r = e.length; r > i; ++i) t.push(e[i]);
    }
    return n;
  }
  function at(e) {
    return (Math.log(e) / Math.log(2)) | 0;
  }
  function lt(e) {
    for (; e.length % 4 != 0; ) e.push(0);
    for (var t = 0, n = 0; n < e.length; n += 4)
      t += (e[n] << 24) + (e[n + 1] << 16) + (e[n + 2] << 8) + e[n + 3];
    return (t %= Math.pow(2, 32));
  }
  function ct(e, t, n, i) {
    return new ci.Record("Table Record", [
      { name: "tag", type: "TAG", value: void 0 !== e ? e : "" },
      { name: "checkSum", type: "ULONG", value: void 0 !== t ? t : 0 },
      { name: "offset", type: "ULONG", value: void 0 !== n ? n : 0 },
      { name: "length", type: "ULONG", value: void 0 !== i ? i : 0 },
    ]);
  }
  function ut(e) {
    var t = new ci.Table("sfnt", [
      { name: "version", type: "TAG", value: "OTTO" },
      { name: "numTables", type: "USHORT", value: 0 },
      { name: "searchRange", type: "USHORT", value: 0 },
      { name: "entrySelector", type: "USHORT", value: 0 },
      { name: "rangeShift", type: "USHORT", value: 0 },
    ]);
    (t.tables = e), (t.numTables = e.length);
    var n = Math.pow(2, at(t.numTables));
    (t.searchRange = 16 * n),
      (t.entrySelector = at(n)),
      (t.rangeShift = 16 * t.numTables - t.searchRange);
    for (
      var i = [], r = [], s = t.sizeOf() + ct().sizeOf() * t.numTables;
      s % 4 != 0;

    )
      (s += 1), r.push({ name: "padding", type: "BYTE", value: 0 });
    for (var o = 0; o < e.length; o += 1) {
      var a = e[o];
      ei.argument(
        4 === a.tableName.length,
        "Table name" + a.tableName + " is invalid."
      );
      var l = a.sizeOf(),
        c = ct(a.tableName, lt(a.encode()), s, l);
      for (
        i.push({ name: c.tag + " Table Record", type: "RECORD", value: c }),
          r.push({ name: a.tableName + " table", type: "RECORD", value: a }),
          s += l,
          ei.argument(
            !isNaN(s),
            "Something went wrong calculating the offset."
          );
        s % 4 != 0;

      )
        (s += 1), r.push({ name: "padding", type: "BYTE", value: 0 });
    }
    return (
      i.sort(function (e, t) {
        return e.value.tag > t.value.tag ? 1 : -1;
      }),
      (t.fields = t.fields.concat(i)),
      (t.fields = t.fields.concat(r)),
      t
    );
  }
  function ht(e, t, n) {
    for (var i = 0; i < t.length; i += 1) {
      var r = e.charToGlyphIndex(t[i]);
      if (r > 0) return e.glyphs.get(r).getMetrics();
    }
    return n;
  }
  function dt(e, t) {
    for (var n = 0, i = e.length - 1; i >= n; ) {
      var r = (n + i) >>> 1,
        s = e[r].tag;
      if (s === t) return r;
      t > s ? (n = r + 1) : (i = r - 1);
    }
    return -n - 1;
  }
  function pt(e, t) {
    for (var n = 0, i = e.length - 1; i >= n; ) {
      var r = (n + i) >>> 1,
        s = e[r];
      if (s === t) return r;
      t > s ? (n = r + 1) : (i = r - 1);
    }
    return -n - 1;
  }
  function ft(e, t) {
    for (var n, i = 0, r = e.length - 1; r >= i; ) {
      var s = (i + r) >>> 1,
        o = (n = e[s]).start;
      if (o === t) return n;
      t > o ? (i = s + 1) : (r = s - 1);
    }
    return i > 0 ? (t > (n = e[i - 1]).end ? 0 : n) : void 0;
  }
  function mt(e, t) {
    (this.font = e), (this.tableName = t);
  }
  function gt(e) {
    mt.call(this, e, "gpos");
  }
  function vt(e) {
    mt.call(this, e, "gsub");
  }
  function _t(e, t) {
    var n = e.length;
    if (n !== t.length) return !1;
    for (var i = 0; n > i; i++) if (e[i] !== t[i]) return !1;
    return !0;
  }
  function yt(e, t, n) {
    for (var i = e.subtables, r = 0; r < i.length; r++) {
      var s = i[r];
      if (s.substFormat === t) return s;
    }
    return n ? (i.push(n), n) : void 0;
  }
  function bt(e) {
    for (
      var t = new ArrayBuffer(e.length), n = new Uint8Array(t), i = 0;
      i < e.length;
      ++i
    )
      n[i] = e[i];
    return t;
  }
  function wt(e, t) {
    if (!e) throw t;
  }
  function xt(e, t, n, i, r) {
    var s;
    return (s =
      (t & i) > 0
        ? ((s = e.parseByte()), 0 == (t & r) && (s = -s), n + s)
        : (t & r) > 0
        ? n
        : n + e.parseShort());
  }
  function Ct(e, t, n) {
    var i,
      r,
      s = new di.Parser(t, n);
    if (
      ((e.numberOfContours = s.parseShort()),
      (e._xMin = s.parseShort()),
      (e._yMin = s.parseShort()),
      (e._xMax = s.parseShort()),
      (e._yMax = s.parseShort()),
      0 < e.numberOfContours)
    ) {
      for (
        var o = (e.endPointIndices = []), a = 0;
        a < e.numberOfContours;
        a += 1
      )
        o.push(s.parseUShort());
      (e.instructionLength = s.parseUShort()), (e.instructions = []);
      for (var l = 0; l < e.instructionLength; l += 1)
        e.instructions.push(s.parseByte());
      var c = o[o.length - 1] + 1;
      i = [];
      for (var u = 0; c > u; u += 1)
        if (((r = s.parseByte()), i.push(r), (8 & r) > 0))
          for (var h = s.parseByte(), d = 0; h > d; d += 1) i.push(r), (u += 1);
      if ((ei.argument(i.length === c, "Bad flags."), 0 < o.length)) {
        var p,
          f = [];
        if (c > 0) {
          for (var m = 0; c > m; m += 1)
            (r = i[m]),
              ((p = {}).onCurve = !!(1 & r)),
              (p.lastPointOfContour = 0 <= o.indexOf(m)),
              f.push(p);
          for (var g = 0, v = 0; c > v; v += 1)
            (r = i[v]), ((p = f[v]).x = xt(s, r, g, 2, 16)), (g = p.x);
          for (var _ = 0, y = 0; c > y; y += 1)
            (r = i[y]), ((p = f[y]).y = xt(s, r, _, 4, 32)), (_ = p.y);
        }
        e.points = f;
      } else e.points = [];
    } else if (0 === e.numberOfContours) e.points = [];
    else {
      (e.isComposite = !0), (e.points = []), (e.components = []);
      for (var b = !0; b; ) {
        i = s.parseUShort();
        var w = {
          glyphIndex: s.parseUShort(),
          xScale: 1,
          scale01: 0,
          scale10: 0,
          yScale: 1,
          dx: 0,
          dy: 0,
        };
        (1 & i) > 0
          ? (2 & i) > 0
            ? ((w.dx = s.parseShort()), (w.dy = s.parseShort()))
            : (w.matchedPoints = [s.parseUShort(), s.parseUShort()])
          : (2 & i) > 0
          ? ((w.dx = s.parseChar()), (w.dy = s.parseChar()))
          : (w.matchedPoints = [s.parseByte(), s.parseByte()]),
          (8 & i) > 0
            ? (w.xScale = w.yScale = s.parseF2Dot14())
            : (64 & i) > 0
            ? ((w.xScale = s.parseF2Dot14()), (w.yScale = s.parseF2Dot14()))
            : (128 & i) > 0 &&
              ((w.xScale = s.parseF2Dot14()),
              (w.scale01 = s.parseF2Dot14()),
              (w.scale10 = s.parseF2Dot14()),
              (w.yScale = s.parseF2Dot14())),
          e.components.push(w),
          (b = !!(32 & i));
      }
      if (256 & i) {
        (e.instructionLength = s.parseUShort()), (e.instructions = []);
        for (var x = 0; x < e.instructionLength; x += 1)
          e.instructions.push(s.parseByte());
      }
    }
  }
  function Tt(e, t) {
    for (var n = [], i = 0; i < e.length; i += 1) {
      var r = e[i],
        s = {
          x: t.xScale * r.x + t.scale01 * r.y + t.dx,
          y: t.scale10 * r.x + t.yScale * r.y + t.dy,
          onCurve: r.onCurve,
          lastPointOfContour: r.lastPointOfContour,
        };
      n.push(s);
    }
    return n;
  }
  function St(e) {
    var t = new p();
    if (!e) return t;
    for (
      var n = (function (e) {
          for (var t = [], n = [], i = 0; i < e.length; i += 1) {
            var r = e[i];
            n.push(r), r.lastPointOfContour && (t.push(n), (n = []));
          }
          return (
            ei.argument(
              0 === n.length,
              "There are still points left in the current contour."
            ),
            t
          );
        })(e),
        i = 0;
      i < n.length;
      ++i
    ) {
      var r = n[i],
        s = null,
        o = r[r.length - 1],
        a = r[0];
      if (o.onCurve) t.moveTo(o.x, o.y);
      else if (a.onCurve) t.moveTo(a.x, a.y);
      else {
        var l = { x: 0.5 * (o.x + a.x), y: 0.5 * (o.y + a.y) };
        t.moveTo(l.x, l.y);
      }
      for (var c = 0; c < r.length; ++c)
        if (((s = o), (o = a), (a = r[(c + 1) % r.length]), o.onCurve))
          t.lineTo(o.x, o.y);
        else {
          var u = a;
          s.onCurve || { x: 0.5 * (o.x + s.x), y: 0.5 * (o.y + s.y) },
            a.onCurve || (u = { x: 0.5 * (o.x + a.x), y: 0.5 * (o.y + a.y) }),
            t.quadraticCurveTo(o.x, o.y, u.x, u.y);
        }
      t.closePath();
    }
    return t;
  }
  function Et(e, t) {
    if (t.isComposite)
      for (var n = 0; n < t.components.length; n += 1) {
        var i = t.components[n],
          r = e.get(i.glyphIndex);
        if ((r.getPath(), r.points)) {
          var s = void 0;
          if (void 0 === i.matchedPoints) s = Tt(r.points, i);
          else {
            if (
              i.matchedPoints[0] > t.points.length - 1 ||
              i.matchedPoints[1] > r.points.length - 1
            )
              throw Error("Matched points out of range in " + t.name);
            var o = t.points[i.matchedPoints[0]],
              a = r.points[i.matchedPoints[1]],
              l = {
                xScale: i.xScale,
                scale01: i.scale01,
                scale10: i.scale10,
                yScale: i.yScale,
                dx: 0,
                dy: 0,
              };
            (a = Tt([a], l)[0]),
              (l.dx = o.x - a.x),
              (l.dy = o.y - a.y),
              (s = Tt(r.points, l));
          }
          t.points = t.points.concat(s);
        }
      }
    return St(t.points);
  }
  function kt(e) {
    (this.font = e),
      (this.getCommands = function (e) {
        return Yi.getPath(e).commands;
      }),
      (this._fpgmState = this._prepState = void 0),
      (this._errorState = 0);
  }
  function Pt(e) {
    return e;
  }
  function It(e) {
    return Math.sign(e) * Math.round(Math.abs(e));
  }
  function At(e) {
    return (Math.sign(e) * Math.round(Math.abs(2 * e))) / 2;
  }
  function Ot(e) {
    return Math.sign(e) * (Math.round(Math.abs(e) + 0.5) - 0.5);
  }
  function Dt(e) {
    return Math.sign(e) * Math.ceil(Math.abs(e));
  }
  function Mt(e) {
    return Math.sign(e) * Math.floor(Math.abs(e));
  }
  function Rt(e, t) {
    (this.x = e),
      (this.y = t),
      (this.axis = void 0),
      (this.slope = t / e),
      (this.normalSlope = -e / t),
      Object.freeze(this);
  }
  function Lt(e, t) {
    var n = Math.sqrt(e * e + t * t);
    return (
      (t /= n),
      1 === (e /= n) && 0 === t ? Ji : 0 === e && 1 === t ? Qi : new Rt(e, t)
    );
  }
  function Nt(e, t, n, i) {
    (this.x = this.xo = Math.round(64 * e) / 64),
      (this.y = this.yo = Math.round(64 * t) / 64),
      (this.lastPointOfContour = n),
      (this.onCurve = i),
      (this.prevPointOnContour = void 0),
      (this.nextPointOnContour = void 0),
      (this.xTouched = !1),
      (this.yTouched = !1),
      Object.preventExtensions(this);
  }
  function Ut(e, t) {
    switch (((this.env = e), (this.stack = []), (this.prog = t), e)) {
      case "glyf":
        (this.zp0 = this.zp1 = this.zp2 = 1),
          (this.rp0 = this.rp1 = this.rp2 = 0);
      case "prep":
        (this.fv = this.pv = this.dpv = Ji), (this.round = It);
    }
  }
  function Bt(e) {
    for (
      var t = (e.tZone = new Array(e.gZone.length)), n = 0;
      n < t.length;
      n++
    )
      t[n] = new Nt(0, 0);
  }
  function Ft(e, t) {
    var n,
      i = e.prog,
      r = e.ip,
      s = 1;
    do
      if (88 === (n = i[++r])) s++;
      else if (89 === n) s--;
      else if (64 === n) r += i[r + 1] + 1;
      else if (65 === n) r += 2 * i[r + 1] + 1;
      else if (n >= 176 && 183 >= n) r += n - 176 + 1;
      else if (n >= 184 && 191 >= n) r += 2 * (n - 184 + 1);
      else if (t && 1 === s && 27 === n) break;
    while (s > 0);
    e.ip = r;
  }
  function jt(t, n) {
    e.DEBUG && console.log(n.step, "SVTCA[" + t.axis + "]"),
      (n.fv = n.pv = n.dpv = t);
  }
  function Ht(t, n) {
    e.DEBUG && console.log(n.step, "SPVTCA[" + t.axis + "]"),
      (n.pv = n.dpv = t);
  }
  function $t(t, n) {
    e.DEBUG && console.log(n.step, "SFVTCA[" + t.axis + "]"), (n.fv = t);
  }
  function zt(t, n) {
    var i,
      r,
      s = n.stack,
      o = s.pop(),
      a = s.pop(),
      l = n.z2[o],
      c = n.z1[a];
    e.DEBUG && console.log("SPVTL[" + t + "]", o, a),
      (r = t ? ((i = l.y - c.y), c.x - l.x) : ((i = c.x - l.x), c.y - l.y)),
      (n.pv = n.dpv = Lt(i, r));
  }
  function Wt(t, n) {
    var i,
      r,
      s = n.stack,
      o = s.pop(),
      a = s.pop(),
      l = n.z2[o],
      c = n.z1[a];
    e.DEBUG && console.log("SFVTL[" + t + "]", o, a),
      (r = t ? ((i = l.y - c.y), c.x - l.x) : ((i = c.x - l.x), c.y - l.y)),
      (n.fv = Lt(i, r));
  }
  function Gt(t) {
    e.DEBUG && console.log(t.step, "POP[]"), t.stack.pop();
  }
  function Vt(t, n) {
    var i = n.stack.pop(),
      r = n.z0[i],
      s = n.fv,
      o = n.pv;
    e.DEBUG && console.log(n.step, "MDAP[" + t + "]", i);
    var a = o.distance(r, Zi);
    t && (a = n.round(a)),
      s.setRelative(r, Zi, a, o),
      s.touch(r),
      (n.rp0 = n.rp1 = i);
  }
  function qt(t, n) {
    var i,
      r,
      s,
      o = n.z2,
      a = o.length - 2;
    e.DEBUG && console.log(n.step, "IUP[" + t.axis + "]");
    for (var l = 0; a > l; l++)
      (i = o[l]),
        t.touched(i) ||
          ((r = i.prevTouched(t)) !== i &&
            (r === (s = i.nextTouched(t)) &&
              t.setRelative(i, i, t.distance(r, r, !1, !0), t, !0),
            t.interpolate(i, r, s, t)));
  }
  function Xt(t, n) {
    for (
      var i = n.stack,
        r = t ? n.rp1 : n.rp2,
        s = (t ? n.z0 : n.z1)[r],
        o = n.fv,
        a = n.pv,
        l = n.loop,
        c = n.z2;
      l--;

    ) {
      var u = i.pop(),
        h = c[u],
        d = a.distance(s, s, !1, !0);
      o.setRelative(h, h, d, a),
        o.touch(h),
        e.DEBUG &&
          console.log(
            n.step,
            (1 < n.loop ? "loop " + (n.loop - l) + ": " : "") +
              "SHP[" +
              (t ? "rp1" : "rp2") +
              "]",
            u
          );
    }
    n.loop = 1;
  }
  function Yt(t, n) {
    var i = n.stack,
      r = t ? n.rp1 : n.rp2,
      s = (t ? n.z0 : n.z1)[r],
      o = n.fv,
      a = n.pv,
      l = i.pop(),
      c = n.z2[n.contours[l]],
      u = c;
    e.DEBUG && console.log(n.step, "SHC[" + t + "]", l);
    for (
      var h = a.distance(s, s, !1, !0);
      u !== s && o.setRelative(u, u, h, a), (u = u.nextPointOnContour) !== c;

    );
  }
  function Kt(t, n) {
    var i,
      r,
      s = n.stack,
      o = t ? n.rp1 : n.rp2,
      a = (t ? n.z0 : n.z1)[o],
      l = n.fv,
      c = n.pv,
      u = s.pop();
    switch ((e.DEBUG && console.log(n.step, "SHZ[" + t + "]", u), u)) {
      case 0:
        i = n.tZone;
        break;
      case 1:
        i = n.gZone;
        break;
      default:
        throw new Error("Invalid zone");
    }
    for (var h = c.distance(a, a, !1, !0), d = i.length - 2, p = 0; d > p; p++)
      (r = i[p]), l.setRelative(r, r, h, c);
  }
  function Jt(t, n) {
    var i = n.stack,
      r = i.pop() / 64,
      s = i.pop(),
      o = n.z1[s],
      a = n.z0[n.rp0],
      l = n.fv,
      c = n.pv;
    l.setRelative(o, a, r, c),
      l.touch(o),
      e.DEBUG && console.log(n.step, "MSIRP[" + t + "]", r, s),
      (n.rp1 = n.rp0),
      (n.rp2 = s),
      t && (n.rp0 = s);
  }
  function Qt(t, n) {
    var i = n.stack,
      r = i.pop(),
      s = i.pop(),
      o = n.z0[s],
      a = n.fv,
      l = n.pv,
      c = n.cvt[r];
    e.DEBUG && console.log(n.step, "MIAP[" + t + "]", r, "(", c, ")", s);
    var u = l.distance(o, Zi);
    t && (Math.abs(u - c) < n.cvCutIn && (u = c), (u = n.round(u))),
      a.setRelative(o, Zi, u, l),
      0 === n.zp0 && ((o.xo = o.x), (o.yo = o.y)),
      a.touch(o),
      (n.rp0 = n.rp1 = s);
  }
  function Zt(t, n) {
    var i = n.stack,
      r = i.pop(),
      s = n.z2[r];
    e.DEBUG && console.log(n.step, "GC[" + t + "]", r),
      i.push(64 * n.dpv.distance(s, Zi, t, !1));
  }
  function en(t, n) {
    var i = n.stack,
      r = i.pop(),
      s = i.pop(),
      o = n.z1[r],
      a = n.z0[s],
      l = n.dpv.distance(a, o, t, t);
    e.DEBUG && console.log(n.step, "MD[" + t + "]", r, s, "->", l),
      n.stack.push(Math.round(64 * l));
  }
  function tn(t, n) {
    var i = n.stack,
      r = i.pop(),
      s = n.fv,
      o = n.pv,
      a = n.ppem,
      l = n.deltaBase + 16 * (t - 1),
      c = n.deltaShift,
      u = n.z0;
    e.DEBUG && console.log(n.step, "DELTAP[" + t + "]", r, i);
    for (var h = 0; r > h; h++) {
      var d = i.pop(),
        p = i.pop();
      if (l + ((240 & p) >> 4) === a) {
        var f = (15 & p) - 8;
        f >= 0 && f++,
          e.DEBUG && console.log(n.step, "DELTAPFIX", d, "by", f * c);
        var m = u[d];
        s.setRelative(m, m, f * c, o);
      }
    }
  }
  function nn(t, n) {
    var i = n.stack,
      r = i.pop();
    e.DEBUG && console.log(n.step, "ROUND[]"), i.push(64 * n.round(r / 64));
  }
  function rn(t, n) {
    var i = n.stack,
      r = i.pop(),
      s = n.ppem,
      o = n.deltaBase + 16 * (t - 1),
      a = n.deltaShift;
    e.DEBUG && console.log(n.step, "DELTAC[" + t + "]", r, i);
    for (var l = 0; r > l; l++) {
      var c = i.pop(),
        u = i.pop();
      if (o + ((240 & u) >> 4) === s) {
        var h = (15 & u) - 8;
        h >= 0 && h++;
        var d = h * a;
        e.DEBUG && console.log(n.step, "DELTACFIX", c, "by", d),
          (n.cvt[c] += d);
      }
    }
  }
  function sn(t, n) {
    var i,
      r,
      s = n.stack,
      o = s.pop(),
      a = s.pop(),
      l = n.z2[o],
      c = n.z1[a];
    e.DEBUG && console.log(n.step, "SDPVTL[" + t + "]", o, a),
      (r = t ? ((i = l.y - c.y), c.x - l.x) : ((i = c.x - l.x), c.y - l.y)),
      (n.dpv = Lt(i, r));
  }
  function on(t, n) {
    var i = n.stack,
      r = n.prog,
      s = n.ip;
    e.DEBUG && console.log(n.step, "PUSHB[" + t + "]");
    for (var o = 0; t > o; o++) i.push(r[++s]);
    n.ip = s;
  }
  function an(t, n) {
    var i = n.ip,
      r = n.prog,
      s = n.stack;
    e.DEBUG && console.log(n.ip, "PUSHW[" + t + "]");
    for (var o = 0; t > o; o++) {
      var a = (r[++i] << 8) | r[++i];
      32768 & a && (a = -(1 + (65535 ^ a))), s.push(a);
    }
    n.ip = i;
  }
  function ln(t, n, i, r, s, o) {
    var a,
      l,
      c,
      u,
      h = o.stack,
      d = t && h.pop(),
      p = h.pop(),
      f = o.rp0,
      m = o.z0[f],
      g = o.z1[p],
      v = o.minDis,
      _ = o.fv,
      y = o.dpv;
    (c = 0 <= (l = a = y.distance(g, m, !0, !0)) ? 1 : -1),
      (l = Math.abs(l)),
      t && ((u = o.cvt[d]), r && Math.abs(l - u) < o.cvCutIn && (l = u)),
      i && v > l && (l = v),
      r && (l = o.round(l)),
      _.setRelative(g, m, c * l, y),
      _.touch(g),
      e.DEBUG &&
        console.log(
          o.step,
          (t ? "MIRP[" : "MDRP[") +
            (n ? "M" : "m") +
            (i ? ">" : "_") +
            (r ? "R" : "_") +
            (0 === s ? "Gr" : 1 === s ? "Bl" : 2 === s ? "Wh" : "") +
            "]",
          t ? d + "(" + o.cvt[d] + "," + u + ")" : "",
          p,
          "(d =",
          a,
          "->",
          c * l,
          ")"
        ),
      (o.rp1 = o.rp0),
      (o.rp2 = p),
      n && (o.rp0 = p);
  }
  function cn(e) {
    (this["char"] = e), (this.state = {}), (this.activeState = null);
  }
  function un(e, t, n) {
    (this.contextName = n), (this.startIndex = e), (this.endOffset = t);
  }
  function hn(e, t, n) {
    (this.contextName = e),
      (this.openRange = null),
      (this.ranges = []),
      (this.checkStart = t),
      (this.checkEnd = n);
  }
  function dn(e, t) {
    (this.context = e),
      (this.index = t),
      (this.length = e.length),
      (this.current = e[t]),
      (this.backtrack = e.slice(0, t)),
      (this.lookahead = e.slice(t + 1));
  }
  function pn(e) {
    (this.eventId = e), (this.subscribers = []);
  }
  function fn(e) {
    (this.tokens = []),
      (this.registeredContexts = {}),
      (this.contextCheckers = []),
      (this.events = {}),
      (this.registeredModifiers = []),
      function (e) {
        var t = this,
          n = [
            "start",
            "end",
            "next",
            "newToken",
            "contextStart",
            "contextEnd",
            "insertToken",
            "removeToken",
            "removeRange",
            "replaceToken",
            "replaceRange",
            "composeRUD",
            "updateContextsRanges",
          ];
        n.forEach(function (e) {
          Object.defineProperty(t.events, e, { value: new pn(e) });
        }),
          e &&
            n.forEach(function (n) {
              var i = e[n];
              "function" == typeof i && t.events[n].subscribe(i);
            }),
          [
            "insertToken",
            "removeToken",
            "removeRange",
            "replaceToken",
            "replaceRange",
            "composeRUD",
          ].forEach(function (e) {
            t.events[e].subscribe(t.updateContextsRanges);
          });
      }.call(this, e);
  }
  function mn(e) {
    return /[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(e);
  }
  function gn(e) {
    return /[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(
      e
    );
  }
  function vn(e) {
    return /[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(
      e
    );
  }
  function _n(e) {
    var t = this.features.arab,
      n = this.tokenizer.getRangeTokens(e);
    if (1 !== n.length) {
      var i = function (e, n, i) {
          if (t.hasOwnProperty(e)) {
            var r,
              s = t[e].lookup(i) || null,
              o = ((r = s),
              1 === r.length && 12 === r[0].id && r[0].substitution)[0];
            return o >= 0 ? n.setState(e, o) : void 0;
          }
        },
        r = new dn(n, 0),
        s = new dn(
          n.map(function (e) {
            return e["char"];
          }),
          0
        );
      n.forEach(function (e, t) {
        if (!vn(e["char"])) {
          r.setCurrentIndex(t), s.setCurrentIndex(t);
          var n = 0;
          switch (
            ((function (e) {
              for (
                var t = [].concat(e.backtrack), n = t.length - 1;
                n >= 0;
                n--
              ) {
                var i = t[n],
                  r = gn(i),
                  s = vn(i);
                if (!r && !s) return !0;
                if (r) return !1;
              }
              return !1;
            })(s) && (n |= 1),
            (function (e) {
              if (gn(e.current)) return !1;
              for (var t = 0; t < e.lookahead.length; t++)
                if (!vn(e.lookahead[t])) return !0;
              return !1;
            })(s) && (n |= 2),
            n)
          ) {
            case 0:
              return;
            case 1:
              i("fina", e, r);
              break;
            case 2:
              i("init", e, r);
              break;
            case 3:
              i("medi", e, r);
          }
        }
      });
    }
  }
  function yn(e) {
    (this.baseDir = e || "ltr"),
      (this.tokenizer = new fn()),
      (this.features = []);
  }
  function bn() {
    if (-1 === this.tokenizer.registeredModifiers.indexOf("glyphIndex"))
      throw new Error(
        "glyphIndex modifier is required to apply arabic presentation features."
      );
  }
  function wn() {
    var e = this;
    this.features.hasOwnProperty("arab") &&
      this.features.arab.hasOwnProperty("rlig") &&
      (bn.call(this),
      this.tokenizer.getContextRanges("arabicWord").forEach(function (t) {
        (function (e) {
          var t = this.features.arab;
          if (t.hasOwnProperty("rlig"))
            for (
              var n = this.tokenizer.getRangeTokens(e), i = 0;
              i < n.length;
              i++
            ) {
              var r = new dn(n, i),
                s = t.rlig.lookup(r) || null,
                o = 1 === s.length && 63 === s[0].id && s[0].substitution,
                a = 1 === s.length && 41 === s[0].id && s[0].substitution[0],
                l = n[i];
              if (a) {
                l.setState("rlig", [a.ligGlyph]);
                for (var c = 0; c < a.components.length; c++) {
                  var u = a.components[c],
                    h = r.get(c + 1);
                  h.activeState.value === u && (h.state.deleted = !0);
                }
              } else if (o) {
                var d =
                  o && 1 === o.length && 12 === o[0].id && o[0].substitution;
                d && d >= 0 && l.setState("rlig", d);
              }
            }
        }.call(e, t));
      }));
  }
  function xn(e, t) {
    (this.font = e), (this.features = {}), (ir = t || ir);
  }
  function Cn(e, t, n, i) {
    (this.tag = e),
      (this.featureRef = t),
      (this.lookups = n.lookups),
      (this.script = i);
  }
  function Tn(e) {
    this.table = e;
  }
  function Sn(e) {
    this.ligatureSets = e;
  }
  function En(e, t, n) {
    (this.lookups = e),
      (this.subtable = n),
      (this.lookupTable = t),
      n.hasOwnProperty("coverage") && (this.coverage = new Tn(n.coverage)),
      n.hasOwnProperty("inputCoverage") &&
        (this.inputCoverage = n.inputCoverage.map(function (e) {
          return new Tn(e);
        })),
      n.hasOwnProperty("backtrackCoverage") &&
        (this.backtrackCoverage = n.backtrackCoverage.map(function (e) {
          return new Tn(e);
        })),
      n.hasOwnProperty("lookaheadCoverage") &&
        (this.lookaheadCoverage = n.lookaheadCoverage.map(function (e) {
          return new Tn(e);
        })),
      n.hasOwnProperty("ligatureSets") &&
        (this.ligatureSets = new Sn(n.ligatureSets));
  }
  function kn(e, t) {
    (this.index = e),
      (this.subtables = t[e].subtables.map(function (n) {
        return new En(t, t[e], n);
      }));
  }
  function Pn(e, t) {
    this.lookups = t.map(function (t) {
      return new kn(t, e);
    });
  }
  function In(e, t) {
    for (var n = [], i = 0; i < e.length; i++) {
      var r = e[i],
        s = t.current.activeState.value;
      s = Array.isArray(s) ? s[0] : s;
      var o = r.lookup(s);
      -1 !== o && n.push(o);
    }
    return n.length !== e.length ? -1 : n;
  }
  function An(e) {
    (e = e || {}).empty ||
      (wt(
        e.familyName,
        "When creating a new Font object, familyName is required."
      ),
      wt(
        e.styleName,
        "When creating a new Font object, styleName is required."
      ),
      wt(
        e.unitsPerEm,
        "When creating a new Font object, unitsPerEm is required."
      ),
      wt(e.ascender, "When creating a new Font object, ascender is required."),
      wt(
        e.descender,
        "When creating a new Font object, descender is required."
      ),
      wt(e.descender < 0, "Descender should be negative (e.g. -512)."),
      (this.names = {
        fontFamily: { en: e.familyName || " " },
        fontSubfamily: { en: e.styleName || " " },
        fullName: { en: e.fullName || e.familyName + " " + e.styleName },
        postScriptName: {
          en:
            e.postScriptName || (e.familyName + e.styleName).replace(/\s/g, ""),
        },
        designer: { en: e.designer || " " },
        designerURL: { en: e.designerURL || " " },
        manufacturer: { en: e.manufacturer || " " },
        manufacturerURL: { en: e.manufacturerURL || " " },
        license: { en: e.license || " " },
        licenseURL: { en: e.licenseURL || " " },
        version: { en: e.version || "Version 0.1" },
        description: { en: e.description || " " },
        copyright: { en: e.copyright || " " },
        trademark: { en: e.trademark || " " },
      }),
      (this.unitsPerEm = e.unitsPerEm || 1e3),
      (this.ascender = e.ascender),
      (this.descender = e.descender),
      (this.createdTimestamp = e.createdTimestamp),
      (this.tables = {
        os2: {
          usWeightClass: e.weightClass || this.usWeightClasses.MEDIUM,
          usWidthClass: e.widthClass || this.usWidthClasses.MEDIUM,
          fsSelection: e.fsSelection || this.fsSelectionValues.REGULAR,
        },
      })),
      (this.supported = !0),
      (this.glyphs = new yi.GlyphSet(this, e.glyphs || [])),
      (this.encoding = new R(this)),
      (this.position = new gt(this)),
      (this.substitution = new vt(this)),
      (this.tables = this.tables || {}),
      Object.defineProperty(this, "hinting", {
        get: function () {
          return this._hinting
            ? this._hinting
            : "truetype" === this.outlinesFormat
            ? (this._hinting = new kt(this))
            : void 0;
        },
      });
  }
  function On(e, t) {
    var n = JSON.stringify(e),
      i = 256;
    for (var r in t) {
      var s = parseInt(r);
      if (s && !(256 > s)) {
        if (JSON.stringify(t[r]) === n) return s;
        s >= i && (i = s + 1);
      }
    }
    return (t[i] = e), i;
  }
  function Dn(e, t, n, i) {
    for (
      var r = [
          { name: "nameID_" + e, type: "USHORT", value: On(t.name, i) },
          { name: "flags_" + e, type: "USHORT", value: 0 },
        ],
        s = 0;
      s < n.length;
      ++s
    ) {
      var o = n[s].tag;
      r.push({
        name: "axis_" + e + " " + o,
        type: "FIXED",
        value: t.coordinates[o] << 16,
      });
    }
    return r;
  }
  function Mn(e, t, n, i) {
    var r = {},
      s = new di.Parser(e, t);
    (r.name = i[s.parseUShort()] || {}),
      s.skip("uShort", 1),
      (r.coordinates = {});
    for (var o = 0; o < n.length; ++o) r.coordinates[n[o].tag] = s.parseFixed();
    return r;
  }
  function Rn(e, t) {
    require("fs").readFile(e, function (e, n) {
      return e ? t(e.message) : void t(null, bt(n));
    });
  }
  function Ln(e, t) {
    var n = new XMLHttpRequest();
    n.open("get", e, !0),
      (n.responseType = "arraybuffer"),
      (n.onload = function () {
        return n.response
          ? t(null, n.response)
          : t("Font could not be loaded: " + n.statusText);
      }),
      (n.onerror = function () {
        t("Font could not be loaded");
      }),
      n.send();
  }
  function Nn(e, t) {
    for (var n = [], i = 12, r = 0; t > r; r += 1) {
      var s = di.getTag(e, i),
        o = di.getULong(e, i + 4),
        a = di.getULong(e, i + 8),
        l = di.getULong(e, i + 12);
      n.push({ tag: s, checksum: o, offset: a, length: l, compression: !1 }),
        (i += 16);
    }
    return n;
  }
  function Un(e, t) {
    if ("WOFF" !== t.compression) return { data: e, offset: t.offset };
    var n = new Uint8Array(e.buffer, t.offset + 2, t.compressedLength - 2),
      i = new Uint8Array(t.length);
    if ((Zn(n, i), i.byteLength !== t.length))
      throw new Error(
        "Decompression error: " +
          t.tag +
          " decompressed length doesn't match recorded length"
      );
    return { data: new DataView(i.buffer, 0), offset: 0 };
  }
  function Bn(e) {
    var t,
      n,
      i,
      r,
      s,
      o,
      a,
      l,
      c,
      u,
      h,
      d,
      p,
      f,
      m = new An({ empty: !0 }),
      g = new DataView(e, 0),
      v = [],
      _ = di.getTag(g, 0);
    if (_ === String.fromCharCode(0, 1, 0, 0) || "true" === _ || "typ1" === _)
      (m.outlinesFormat = "truetype"), (v = Nn(g, (i = di.getUShort(g, 4))));
    else if ("OTTO" === _)
      (m.outlinesFormat = "cff"), (v = Nn(g, (i = di.getUShort(g, 4))));
    else {
      if ("wOFF" !== _) throw new Error("Unsupported OpenType signature " + _);
      var y = di.getTag(g, 4);
      if (y === String.fromCharCode(0, 1, 0, 0)) m.outlinesFormat = "truetype";
      else {
        if ("OTTO" !== y) throw new Error("Unsupported OpenType flavor " + _);
        m.outlinesFormat = "cff";
      }
      v = (function (e, t) {
        for (var n = [], i = 44, r = 0; t > r; r += 1) {
          var s = di.getTag(e, i),
            o = di.getULong(e, i + 4),
            a = di.getULong(e, i + 8),
            l = di.getULong(e, i + 12),
            c = void 0;
          (c = l > a && "WOFF"),
            n.push({
              tag: s,
              offset: o,
              compression: c,
              compressedLength: a,
              length: l,
            }),
            (i += 20);
        }
        return n;
      })(g, (i = di.getUShort(g, 12)));
    }
    for (var b = 0; i > b; b += 1) {
      var w = v[b],
        x = void 0;
      switch (w.tag) {
        case "cmap":
          (x = Un(g, w)),
            (m.tables.cmap = pi.parse(x.data, x.offset)),
            (m.encoding = new L(m.tables.cmap));
          break;
        case "cvt ":
          (x = Un(g, w)),
            (f = new di.Parser(x.data, x.offset)),
            (m.tables.cvt = f.parseShortList(w.length / 2));
          break;
        case "fvar":
          s = w;
          break;
        case "fpgm":
          (x = Un(g, w)),
            (f = new di.Parser(x.data, x.offset)),
            (m.tables.fpgm = f.parseByteList(w.length));
          break;
        case "head":
          (x = Un(g, w)),
            (m.tables.head = Ci.parse(x.data, x.offset)),
            (m.unitsPerEm = m.tables.head.unitsPerEm),
            (t = m.tables.head.indexToLocFormat);
          break;
        case "hhea":
          (x = Un(g, w)),
            (m.tables.hhea = Ti.parse(x.data, x.offset)),
            (m.ascender = m.tables.hhea.ascender),
            (m.descender = m.tables.hhea.descender),
            (m.numberOfHMetrics = m.tables.hhea.numberOfHMetrics);
          break;
        case "hmtx":
          c = w;
          break;
        case "ltag":
          (x = Un(g, w)), (n = Ei.parse(x.data, x.offset));
          break;
        case "maxp":
          (x = Un(g, w)),
            (m.tables.maxp = ki.parse(x.data, x.offset)),
            (m.numGlyphs = m.tables.maxp.numGlyphs);
          break;
        case "name":
          d = w;
          break;
        case "OS/2":
          (x = Un(g, w)), (m.tables.os2 = Ui.parse(x.data, x.offset));
          break;
        case "post":
          (x = Un(g, w)),
            (m.tables.post = Bi.parse(x.data, x.offset)),
            (m.glyphNames = new U(m.tables.post));
          break;
        case "prep":
          (x = Un(g, w)),
            (f = new di.Parser(x.data, x.offset)),
            (m.tables.prep = f.parseByteList(w.length));
          break;
        case "glyf":
          o = w;
          break;
        case "loca":
          h = w;
          break;
        case "CFF ":
          r = w;
          break;
        case "kern":
          u = w;
          break;
        case "GPOS":
          a = w;
          break;
        case "GSUB":
          l = w;
          break;
        case "meta":
          p = w;
      }
    }
    var C = Un(g, d);
    if (
      ((m.tables.name = Li.parse(C.data, C.offset, n)),
      (m.names = m.tables.name),
      o && h)
    ) {
      var T = 0 === t,
        S = Un(g, h),
        E = cr.parse(S.data, S.offset, m.numGlyphs, T),
        k = Un(g, o);
      m.glyphs = Yi.parse(k.data, k.offset, E, m);
    } else {
      if (!r) throw new Error("Font doesn't contain TrueType or CFF outlines.");
      var P = Un(g, r);
      xi.parse(P.data, P.offset, m);
    }
    var I = Un(g, c);
    if (
      (Si.parse(I.data, I.offset, m.numberOfHMetrics, m.numGlyphs, m.glyphs),
      (function (e) {
        for (
          var t, n = e.tables.cmap.glyphIndexMap, i = Object.keys(n), r = 0;
          r < i.length;
          r += 1
        ) {
          var s = i[r],
            o = n[s];
          (t = e.glyphs.get(o)).addUnicode(parseInt(s));
        }
        for (var a = 0; a < e.glyphs.length; a += 1)
          (t = e.glyphs.get(a)),
            e.cffEncoding
              ? (t.name = e.isCIDFont ? "gid" + a : e.cffEncoding.charset[a])
              : e.glyphNames.names &&
                (t.name = e.glyphNames.glyphIndexToName(a));
      })(m),
      u)
    ) {
      var A = Un(g, u);
      m.kerningPairs = lr.parse(A.data, A.offset);
    } else m.kerningPairs = {};
    if (a) {
      var O = Un(g, a);
      (m.tables.gpos = ar.parse(O.data, O.offset)), m.position.init();
    }
    if (l) {
      var D = Un(g, l);
      m.tables.gsub = $i.parse(D.data, D.offset);
    }
    if (s) {
      var M = Un(g, s);
      m.tables.fvar = rr.parse(M.data, M.offset, m.names);
    }
    if (p) {
      var R = Un(g, p);
      (m.tables.meta = zi.parse(R.data, R.offset)), (m.metas = m.tables.meta);
    }
    return m;
  }
  var Fn, jn;
  String.prototype.codePointAt ||
    ((Fn = (function () {
      try {
        var e = {},
          t = Object.defineProperty,
          n = t(e, e, e) && t;
      } catch (e) {}
      return n;
    })()),
    (jn = function (e) {
      if (null == this) throw TypeError();
      var t = String(this),
        n = t.length,
        i = e ? Number(e) : 0;
      if ((i != i && (i = 0), !(0 > i || i >= n))) {
        var r,
          s = t.charCodeAt(i);
        return s >= 55296 &&
          56319 >= s &&
          n > i + 1 &&
          56320 <= (r = t.charCodeAt(i + 1)) &&
          57343 >= r
          ? 1024 * (s - 55296) + r - 56320 + 65536
          : s;
      }
    }),
    Fn
      ? Fn(String.prototype, "codePointAt", {
          value: jn,
          configurable: !0,
          writable: !0,
        })
      : (String.prototype.codePointAt = jn));
  var Hn = 0,
    $n = -3,
    zn = new t(),
    Wn = new t(),
    Gn = new Uint8Array(30),
    Vn = new Uint16Array(30),
    qn = new Uint8Array(30),
    Xn = new Uint16Array(30),
    Yn = new Uint8Array([
      16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15,
    ]),
    Kn = new t(),
    Jn = new Uint8Array(320),
    Qn = new Uint16Array(16);
  !(function (e, t) {
    var n;
    for (n = 0; 7 > n; ++n) e.table[n] = 0;
    for (
      e.table[7] = 24, e.table[8] = 152, e.table[9] = 112, n = 0;
      24 > n;
      ++n
    )
      e.trans[n] = 256 + n;
    for (n = 0; 144 > n; ++n) e.trans[24 + n] = n;
    for (n = 0; 8 > n; ++n) e.trans[168 + n] = 280 + n;
    for (n = 0; 112 > n; ++n) e.trans[176 + n] = 144 + n;
    for (n = 0; 5 > n; ++n) t.table[n] = 0;
    for (t.table[5] = 32, n = 0; 32 > n; ++n) t.trans[n] = n;
  })(zn, Wn),
    i(Gn, Vn, 4, 3),
    i(qn, Xn, 2, 1),
    (Gn[28] = 0),
    (Vn[28] = 258);
  var Zn = function (e, t) {
    var i,
      r,
      a = new n(e, t);
    do {
      switch (((i = s(a)), o(a, 2, 0))) {
        case 0:
          r = u(a);
          break;
        case 1:
          r = c(a, zn, Wn);
          break;
        case 2:
          l(a, a.ltree, a.dtree), (r = c(a, a.ltree, a.dtree));
          break;
        default:
          r = $n;
      }
      if (r !== Hn) throw new Error("Data error");
    } while (!i);
    return a.destLen < a.dest.length
      ? "function" == typeof a.dest.slice
        ? a.dest.slice(0, a.destLen)
        : a.dest.subarray(0, a.destLen)
      : a.dest;
  };
  (d.prototype.isEmpty = function () {
    return isNaN(this.x1) || isNaN(this.y1) || isNaN(this.x2) || isNaN(this.y2);
  }),
    (d.prototype.addPoint = function (e, t) {
      "number" == typeof e &&
        ((isNaN(this.x1) || isNaN(this.x2)) && ((this.x1 = e), (this.x2 = e)),
        e < this.x1 && (this.x1 = e),
        e > this.x2 && (this.x2 = e)),
        "number" == typeof t &&
          ((isNaN(this.y1) || isNaN(this.y2)) && ((this.y1 = t), (this.y2 = t)),
          t < this.y1 && (this.y1 = t),
          t > this.y2 && (this.y2 = t));
    }),
    (d.prototype.addX = function (e) {
      this.addPoint(e, null);
    }),
    (d.prototype.addY = function (e) {
      this.addPoint(null, e);
    }),
    (d.prototype.addBezier = function (e, t, n, i, r, s, o, a) {
      var l = this,
        c = [e, t],
        u = [n, i],
        d = [r, s],
        p = [o, a];
      this.addPoint(e, t), this.addPoint(o, a);
      for (var f = 0; 1 >= f; f++) {
        var m = 6 * c[f] - 12 * u[f] + 6 * d[f],
          g = -3 * c[f] + 9 * u[f] - 9 * d[f] + 3 * p[f],
          v = 3 * u[f] - 3 * c[f];
        if (0 !== g) {
          var _ = Math.pow(m, 2) - 4 * v * g;
          if (!(0 > _)) {
            var y = (-m + Math.sqrt(_)) / (2 * g);
            y > 0 &&
              1 > y &&
              (0 === f && l.addX(h(c[f], u[f], d[f], p[f], y)),
              1 === f && l.addY(h(c[f], u[f], d[f], p[f], y)));
            var b = (-m - Math.sqrt(_)) / (2 * g);
            b > 0 &&
              1 > b &&
              (0 === f && l.addX(h(c[f], u[f], d[f], p[f], b)),
              1 === f && l.addY(h(c[f], u[f], d[f], p[f], b)));
          }
        } else {
          if (0 === m) continue;
          var w = -v / m;
          w > 0 &&
            1 > w &&
            (0 === f && l.addX(h(c[f], u[f], d[f], p[f], w)),
            1 === f && l.addY(h(c[f], u[f], d[f], p[f], w)));
        }
      }
    }),
    (d.prototype.addQuad = function (e, t, n, i, r, s) {
      var o = e + (2 / 3) * (n - e),
        a = t + (2 / 3) * (i - t),
        l = o + (1 / 3) * (r - e),
        c = a + (1 / 3) * (s - t);
      this.addBezier(e, t, o, a, l, c, r, s);
    }),
    (p.prototype.moveTo = function (e, t) {
      this.commands.push({ type: "M", x: e, y: t });
    }),
    (p.prototype.lineTo = function (e, t) {
      this.commands.push({ type: "L", x: e, y: t });
    }),
    (p.prototype.curveTo = p.prototype.bezierCurveTo =
      function (e, t, n, i, r, s) {
        this.commands.push({
          type: "C",
          x1: e,
          y1: t,
          x2: n,
          y2: i,
          x: r,
          y: s,
        });
      }),
    (p.prototype.quadTo = p.prototype.quadraticCurveTo =
      function (e, t, n, i) {
        this.commands.push({ type: "Q", x1: e, y1: t, x: n, y: i });
      }),
    (p.prototype.close = p.prototype.closePath =
      function () {
        this.commands.push({ type: "Z" });
      }),
    (p.prototype.extend = function (e) {
      if (e.commands) e = e.commands;
      else if (e instanceof d) {
        var t = e;
        return (
          this.moveTo(t.x1, t.y1),
          this.lineTo(t.x2, t.y1),
          this.lineTo(t.x2, t.y2),
          this.lineTo(t.x1, t.y2),
          void this.close()
        );
      }
      Array.prototype.push.apply(this.commands, e);
    }),
    (p.prototype.getBoundingBox = function () {
      for (
        var e = new d(), t = 0, n = 0, i = 0, r = 0, s = 0;
        s < this.commands.length;
        s++
      ) {
        var o = this.commands[s];
        switch (o.type) {
          case "M":
            e.addPoint(o.x, o.y), (t = i = o.x), (n = r = o.y);
            break;
          case "L":
            e.addPoint(o.x, o.y), (i = o.x), (r = o.y);
            break;
          case "Q":
            e.addQuad(i, r, o.x1, o.y1, o.x, o.y), (i = o.x), (r = o.y);
            break;
          case "C":
            e.addBezier(i, r, o.x1, o.y1, o.x2, o.y2, o.x, o.y),
              (i = o.x),
              (r = o.y);
            break;
          case "Z":
            (i = t), (r = n);
            break;
          default:
            throw new Error("Unexpected path command " + o.type);
        }
      }
      return e.isEmpty() && e.addPoint(0, 0), e;
    }),
    (p.prototype.draw = function (e) {
      e.beginPath();
      for (var t = 0; t < this.commands.length; t += 1) {
        var n = this.commands[t];
        "M" === n.type
          ? e.moveTo(n.x, n.y)
          : "L" === n.type
          ? e.lineTo(n.x, n.y)
          : "C" === n.type
          ? e.bezierCurveTo(n.x1, n.y1, n.x2, n.y2, n.x, n.y)
          : "Q" === n.type
          ? e.quadraticCurveTo(n.x1, n.y1, n.x, n.y)
          : "Z" === n.type && e.closePath();
      }
      this.fill && ((e.fillStyle = this.fill), e.fill()),
        this.stroke &&
          ((e.strokeStyle = this.stroke),
          (e.lineWidth = this.strokeWidth),
          e.stroke());
    }),
    (p.prototype.toPathData = function (e) {
      function t() {
        for (
          var t, n = arguments, i = "", r = 0;
          r < arguments.length;
          r += 1
        ) {
          var s = n[r];
          s >= 0 && r > 0 && (i += " "),
            (t = s),
            (i += Math.round(t) === t ? "" + Math.round(t) : t.toFixed(e));
        }
        return i;
      }
      e = void 0 !== e ? e : 2;
      for (var n = "", i = 0; i < this.commands.length; i += 1) {
        var r = this.commands[i];
        "M" === r.type
          ? (n += "M" + t(r.x, r.y))
          : "L" === r.type
          ? (n += "L" + t(r.x, r.y))
          : "C" === r.type
          ? (n += "C" + t(r.x1, r.y1, r.x2, r.y2, r.x, r.y))
          : "Q" === r.type
          ? (n += "Q" + t(r.x1, r.y1, r.x, r.y))
          : "Z" === r.type && (n += "Z");
      }
      return n;
    }),
    (p.prototype.toSVG = function (e) {
      var t = '<path d="';
      return (
        (t += this.toPathData(e)),
        (t += '"'),
        this.fill &&
          "black" !== this.fill &&
          (t +=
            null === this.fill ? ' fill="none"' : ' fill="' + this.fill + '"'),
        this.stroke &&
          (t +=
            ' stroke="' +
            this.stroke +
            '" stroke-width="' +
            this.strokeWidth +
            '"'),
        (t += "/>")
      );
    }),
    (p.prototype.toDOMElement = function (e) {
      var t = this.toPathData(e),
        n = document.createElementNS("http://www.w3.org/2000/svg", "path");
      return n.setAttribute("d", t), n;
    });
  var ei = { fail: f, argument: m, assert: m },
    ti = 2147483648,
    ni = {},
    ii = {},
    ri = {};
  (ii.BYTE = function (e) {
    return (
      ei.argument(
        e >= 0 && 255 >= e,
        "Byte value should be between 0 and 255."
      ),
      [e]
    );
  }),
    (ri.BYTE = g(1)),
    (ii.CHAR = function (e) {
      return [e.charCodeAt(0)];
    }),
    (ri.CHAR = g(1)),
    (ii.CHARARRAY = function (e) {
      for (var t = [], n = 0; n < e.length; n += 1) t[n] = e.charCodeAt(n);
      return t;
    }),
    (ri.CHARARRAY = function (e) {
      return e.length;
    }),
    (ii.USHORT = function (e) {
      return [(e >> 8) & 255, 255 & e];
    }),
    (ri.USHORT = g(2)),
    (ii.SHORT = function (e) {
      return e >= 32768 && (e = -(65536 - e)), [(e >> 8) & 255, 255 & e];
    }),
    (ri.SHORT = g(2)),
    (ii.UINT24 = function (e) {
      return [(e >> 16) & 255, (e >> 8) & 255, 255 & e];
    }),
    (ri.UINT24 = g(3)),
    (ii.ULONG = function (e) {
      return [(e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, 255 & e];
    }),
    (ri.ULONG = g(4)),
    (ii.LONG = function (e) {
      return (
        e >= ti && (e = -(2 * ti - e)),
        [(e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, 255 & e]
      );
    }),
    (ri.LONG = g(4)),
    (ii.FIXED = ii.ULONG),
    (ri.FIXED = ri.ULONG),
    (ii.FWORD = ii.SHORT),
    (ri.FWORD = ri.SHORT),
    (ii.UFWORD = ii.USHORT),
    (ri.UFWORD = ri.USHORT),
    (ii.LONGDATETIME = function (e) {
      return [
        0,
        0,
        0,
        0,
        (e >> 24) & 255,
        (e >> 16) & 255,
        (e >> 8) & 255,
        255 & e,
      ];
    }),
    (ri.LONGDATETIME = g(8)),
    (ii.TAG = function (e) {
      return (
        ei.argument(
          4 === e.length,
          "Tag should be exactly 4 ASCII characters."
        ),
        [e.charCodeAt(0), e.charCodeAt(1), e.charCodeAt(2), e.charCodeAt(3)]
      );
    }),
    (ri.TAG = g(4)),
    (ii.Card8 = ii.BYTE),
    (ri.Card8 = ri.BYTE),
    (ii.Card16 = ii.USHORT),
    (ri.Card16 = ri.USHORT),
    (ii.OffSize = ii.BYTE),
    (ri.OffSize = ri.BYTE),
    (ii.SID = ii.USHORT),
    (ri.SID = ri.USHORT),
    (ii.NUMBER = function (e) {
      return e >= -107 && 107 >= e
        ? [e + 139]
        : e >= 108 && 1131 >= e
        ? [247 + ((e -= 108) >> 8), 255 & e]
        : e >= -1131 && -108 >= e
        ? [251 + ((e = -e - 108) >> 8), 255 & e]
        : e >= -32768 && 32767 >= e
        ? ii.NUMBER16(e)
        : ii.NUMBER32(e);
    }),
    (ri.NUMBER = function (e) {
      return ii.NUMBER(e).length;
    }),
    (ii.NUMBER16 = function (e) {
      return [28, (e >> 8) & 255, 255 & e];
    }),
    (ri.NUMBER16 = g(3)),
    (ii.NUMBER32 = function (e) {
      return [29, (e >> 24) & 255, (e >> 16) & 255, (e >> 8) & 255, 255 & e];
    }),
    (ri.NUMBER32 = g(5)),
    (ii.REAL = function (e) {
      var t = e.toString(),
        n = /\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);
      if (n) {
        var i = parseFloat("1e" + ((n[2] ? +n[2] : 0) + n[1].length));
        t = (Math.round(e * i) / i).toString();
      }
      for (var r = "", s = 0, o = t.length; o > s; s += 1) {
        var a = t[s];
        r +=
          "e" === a
            ? "-" === t[++s]
              ? "c"
              : "b"
            : "." === a
            ? "a"
            : "-" === a
            ? "e"
            : a;
      }
      for (
        var l = [30], c = 0, u = (r += 1 & r.length ? "f" : "ff").length;
        u > c;
        c += 2
      )
        l.push(parseInt(r.substr(c, 2), 16));
      return l;
    }),
    (ri.REAL = function (e) {
      return ii.REAL(e).length;
    }),
    (ii.NAME = ii.CHARARRAY),
    (ri.NAME = ri.CHARARRAY),
    (ii.STRING = ii.CHARARRAY),
    (ri.STRING = ri.CHARARRAY),
    (ni.UTF8 = function (e, t, n) {
      for (var i = [], r = n, s = 0; r > s; s++, t += 1) i[s] = e.getUint8(t);
      return String.fromCharCode.apply(null, i);
    }),
    (ni.UTF16 = function (e, t, n) {
      for (var i = [], r = n / 2, s = 0; r > s; s++, t += 2)
        i[s] = e.getUint16(t);
      return String.fromCharCode.apply(null, i);
    }),
    (ii.UTF16 = function (e) {
      for (var t = [], n = 0; n < e.length; n += 1) {
        var i = e.charCodeAt(n);
        (t[t.length] = (i >> 8) & 255), (t[t.length] = 255 & i);
      }
      return t;
    }),
    (ri.UTF16 = function (e) {
      return 2 * e.length;
    });
  var si = {
    "x-mac-croatian":
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\u0160\u2122\xb4\xa8\u2260\u017d\xd8\u221e\xb1\u2264\u2265\u2206\xb5\u2202\u2211\u220f\u0161\u222b\xaa\xba\u03a9\u017e\xf8\xbf\xa1\xac\u221a\u0192\u2248\u0106\xab\u010c\u2026 \xc0\xc3\xd5\u0152\u0153\u0110\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\uf8ff\xa9\u2044\u20ac\u2039\u203a\xc6\xbb\u2013\xb7\u201a\u201e\u2030\xc2\u0107\xc1\u010d\xc8\xcd\xce\xcf\xcc\xd3\xd4\u0111\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u03c0\xcb\u02da\xb8\xca\xe6\u02c7",
    "x-mac-cyrillic":
      "\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041a\u041b\u041c\u041d\u041e\u041f\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042a\u042b\u042c\u042d\u042e\u042f\u2020\xb0\u0490\xa3\xa7\u2022\xb6\u0406\xae\xa9\u2122\u0402\u0452\u2260\u0403\u0453\u221e\xb1\u2264\u2265\u0456\xb5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040a\u045a\u0458\u0405\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \u040b\u045b\u040c\u045c\u0455\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u201e\u040e\u045e\u040f\u045f\u2116\u0401\u0451\u044f\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043a\u043b\u043c\u043d\u043e\u043f\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044a\u044b\u044c\u044d\u044e",
    "x-mac-gaelic":
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u1e02\xb1\u2264\u2265\u1e03\u010a\u010b\u1e0a\u1e0b\u1e1e\u1e1f\u0120\u0121\u1e40\xe6\xf8\u1e41\u1e56\u1e57\u027c\u0192\u017f\u1e60\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\u1e61\u1e9b\xff\u0178\u1e6a\u20ac\u2039\u203a\u0176\u0177\u1e6b\xb7\u1ef2\u1ef3\u204a\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\u2663\xd2\xda\xdb\xd9\u0131\xdd\xfd\u0174\u0175\u1e84\u1e85\u1e80\u1e81\u1e82\u1e83",
    "x-mac-greek":
      "\xc4\xb9\xb2\xc9\xb3\xd6\xdc\u0385\xe0\xe2\xe4\u0384\xa8\xe7\xe9\xe8\xea\xeb\xa3\u2122\xee\xef\u2022\xbd\u2030\xf4\xf6\xa6\u20ac\xf9\xfb\xfc\u2020\u0393\u0394\u0398\u039b\u039e\u03a0\xdf\xae\xa9\u03a3\u03aa\xa7\u2260\xb0\xb7\u0391\xb1\u2264\u2265\xa5\u0392\u0395\u0396\u0397\u0399\u039a\u039c\u03a6\u03ab\u03a8\u03a9\u03ac\u039d\xac\u039f\u03a1\u2248\u03a4\xab\xbb\u2026 \u03a5\u03a7\u0386\u0388\u0153\u2013\u2015\u201c\u201d\u2018\u2019\xf7\u0389\u038a\u038c\u038e\u03ad\u03ae\u03af\u03cc\u038f\u03cd\u03b1\u03b2\u03c8\u03b4\u03b5\u03c6\u03b3\u03b7\u03b9\u03be\u03ba\u03bb\u03bc\u03bd\u03bf\u03c0\u03ce\u03c1\u03c3\u03c4\u03b8\u03c9\u03c2\u03c7\u03c5\u03b6\u03ca\u03cb\u0390\u03b0\xad",
    "x-mac-icelandic":
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\xdd\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\xd0\xf0\xde\xfe\xfd\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7",
    "x-mac-inuit":
      "\u1403\u1404\u1405\u1406\u140a\u140b\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144e\u144f\u1450\u1451\u1455\u1456\u1466\u146d\u146e\u146f\u1470\u1472\u1473\u1483\u148b\u148c\u148d\u148e\u1490\u1491\xb0\u14a1\u14a5\u14a6\u2022\xb6\u14a7\xae\xa9\u2122\u14a8\u14aa\u14ab\u14bb\u14c2\u14c3\u14c4\u14c5\u14c7\u14c8\u14d0\u14ef\u14f0\u14f1\u14f2\u14f4\u14f5\u1505\u14d5\u14d6\u14d7\u14d8\u14da\u14db\u14ea\u1528\u1529\u152a\u152b\u152d\u2026 \u152e\u153e\u1555\u1556\u1557\u2013\u2014\u201c\u201d\u2018\u2019\u1558\u1559\u155a\u155d\u1546\u1547\u1548\u1549\u154b\u154c\u1550\u157f\u1580\u1581\u1582\u1583\u1584\u1585\u158f\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15a0\u15a1\u15a2\u15a3\u15a4\u15a5\u15a6\u157c\u0141\u0142",
    "x-mac-ce":
      "\xc4\u0100\u0101\xc9\u0104\xd6\xdc\xe1\u0105\u010c\xe4\u010d\u0106\u0107\xe9\u0179\u017a\u010e\xed\u010f\u0112\u0113\u0116\xf3\u0117\xf4\xf6\xf5\xfa\u011a\u011b\xfc\u2020\xb0\u0118\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\u0119\xa8\u2260\u0123\u012e\u012f\u012a\u2264\u2265\u012b\u0136\u2202\u2211\u0142\u013b\u013c\u013d\u013e\u0139\u013a\u0145\u0146\u0143\xac\u221a\u0144\u0147\u2206\xab\xbb\u2026 \u0148\u0150\xd5\u0151\u014c\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\u014d\u0154\u0155\u0158\u2039\u203a\u0159\u0156\u0157\u0160\u201a\u201e\u0161\u015a\u015b\xc1\u0164\u0165\xcd\u017d\u017e\u016a\xd3\xd4\u016b\u016e\xda\u016f\u0170\u0171\u0172\u0173\xdd\xfd\u0137\u017b\u0141\u017c\u0122\u02c7",
    macintosh:
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\ufb01\ufb02\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7",
    "x-mac-romanian":
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\u0102\u0218\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\u0103\u0219\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u2044\u20ac\u2039\u203a\u021a\u021b\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\u0131\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7",
    "x-mac-turkish":
      "\xc4\xc5\xc7\xc9\xd1\xd6\xdc\xe1\xe0\xe2\xe4\xe3\xe5\xe7\xe9\xe8\xea\xeb\xed\xec\xee\xef\xf1\xf3\xf2\xf4\xf6\xf5\xfa\xf9\xfb\xfc\u2020\xb0\xa2\xa3\xa7\u2022\xb6\xdf\xae\xa9\u2122\xb4\xa8\u2260\xc6\xd8\u221e\xb1\u2264\u2265\xa5\xb5\u2202\u2211\u220f\u03c0\u222b\xaa\xba\u03a9\xe6\xf8\xbf\xa1\xac\u221a\u0192\u2248\u2206\xab\xbb\u2026 \xc0\xc3\xd5\u0152\u0153\u2013\u2014\u201c\u201d\u2018\u2019\xf7\u25ca\xff\u0178\u011e\u011f\u0130\u0131\u015e\u015f\u2021\xb7\u201a\u201e\u2030\xc2\xca\xc1\xcb\xc8\xcd\xce\xcf\xcc\xd3\xd4\uf8ff\xd2\xda\xdb\xd9\uf8a0\u02c6\u02dc\xaf\u02d8\u02d9\u02da\xb8\u02dd\u02db\u02c7",
  };
  ni.MACSTRING = function (e, t, n, i) {
    var r = si[i];
    if (void 0 !== r) {
      for (var s = "", o = 0; n > o; o++) {
        var a = e.getUint8(t + o);
        s += 127 >= a ? String.fromCharCode(a) : r[127 & a];
      }
      return s;
    }
  };
  var oi,
    ai = "function" == typeof WeakMap && new WeakMap();
  (ii.MACSTRING = function (e, t) {
    var n = (function (e) {
      if (!oi) for (var t in ((oi = {}), si)) oi[t] = new String(t);
      var n = oi[e];
      if (void 0 !== n) {
        if (ai) {
          var i = ai.get(n);
          if (void 0 !== i) return i;
        }
        var r = si[e];
        if (void 0 !== r) {
          for (var s = {}, o = 0; o < r.length; o++)
            s[r.charCodeAt(o)] = o + 128;
          return ai && ai.set(n, s), s;
        }
      }
    })(t);
    if (void 0 !== n) {
      for (var i = [], r = 0; r < e.length; r++) {
        var s = e.charCodeAt(r);
        if (s >= 128 && void 0 === (s = n[s])) return;
        i[r] = s;
      }
      return i;
    }
  }),
    (ri.MACSTRING = function (e, t) {
      var n = ii.MACSTRING(e, t);
      return void 0 !== n ? n.length : 0;
    }),
    (ii.VARDELTAS = function (e) {
      for (var t = 0, n = []; t < e.length; ) {
        var i = e[t];
        t =
          0 === i
            ? _(e, t, n)
            : i >= -128 && 127 >= i
            ? y(e, t, n)
            : b(e, t, n);
      }
      return n;
    }),
    (ii.INDEX = function (e) {
      for (var t = 1, n = [t], i = [], r = 0; r < e.length; r += 1) {
        var s = ii.OBJECT(e[r]);
        Array.prototype.push.apply(i, s), (t += s.length), n.push(t);
      }
      if (0 === i.length) return [0, 0];
      for (
        var o = [],
          a = (1 + Math.floor(Math.log(t) / Math.log(2)) / 8) | 0,
          l = [void 0, ii.BYTE, ii.USHORT, ii.UINT24, ii.ULONG][a],
          c = 0;
        c < n.length;
        c += 1
      ) {
        var u = l(n[c]);
        Array.prototype.push.apply(o, u);
      }
      return Array.prototype.concat(ii.Card16(e.length), ii.OffSize(a), o, i);
    }),
    (ri.INDEX = function (e) {
      return ii.INDEX(e).length;
    }),
    (ii.DICT = function (e) {
      for (var t = [], n = Object.keys(e), i = n.length, r = 0; i > r; r += 1) {
        var s = parseInt(n[r], 0),
          o = e[s];
        t = (t = t.concat(ii.OPERAND(o.value, o.type))).concat(ii.OPERATOR(s));
      }
      return t;
    }),
    (ri.DICT = function (e) {
      return ii.DICT(e).length;
    }),
    (ii.OPERATOR = function (e) {
      return 1200 > e ? [e] : [12, e - 1200];
    }),
    (ii.OPERAND = function (e, t) {
      var n = [];
      if (Array.isArray(t))
        for (var i = 0; i < t.length; i += 1)
          ei.argument(
            e.length === t.length,
            "Not enough arguments given for type" + t
          ),
            (n = n.concat(ii.OPERAND(e[i], t[i])));
      else if ("SID" === t) n = n.concat(ii.NUMBER(e));
      else if ("offset" === t) n = n.concat(ii.NUMBER32(e));
      else if ("number" === t) n = n.concat(ii.NUMBER(e));
      else {
        if ("real" !== t) throw new Error("Unknown operand type " + t);
        n = n.concat(ii.REAL(e));
      }
      return n;
    }),
    (ii.OP = ii.BYTE),
    (ri.OP = ri.BYTE);
  var li = "function" == typeof WeakMap && new WeakMap();
  (ii.CHARSTRING = function (e) {
    if (li) {
      var t = li.get(e);
      if (void 0 !== t) return t;
    }
    for (var n = [], i = e.length, r = 0; i > r; r += 1) {
      var s = e[r];
      n = n.concat(ii[s.type](s.value));
    }
    return li && li.set(e, n), n;
  }),
    (ri.CHARSTRING = function (e) {
      return ii.CHARSTRING(e).length;
    }),
    (ii.OBJECT = function (e) {
      var t = ii[e.type];
      return (
        ei.argument(void 0 !== t, "No encoding function for type " + e.type),
        t(e.value)
      );
    }),
    (ri.OBJECT = function (e) {
      var t = ri[e.type];
      return (
        ei.argument(void 0 !== t, "No sizeOf function for type " + e.type),
        t(e.value)
      );
    }),
    (ii.TABLE = function (e) {
      for (
        var t = [], n = e.fields.length, i = [], r = [], s = 0;
        n > s;
        s += 1
      ) {
        var o = e.fields[s],
          a = ii[o.type];
        ei.argument(
          void 0 !== a,
          "No encoding function for field type " + o.type + " (" + o.name + ")"
        );
        var l = e[o.name];
        void 0 === l && (l = o.value);
        var c = a(l);
        "TABLE" === o.type
          ? (r.push(t.length), (t = t.concat([0, 0])), i.push(c))
          : (t = t.concat(c));
      }
      for (var u = 0; u < i.length; u += 1) {
        var h = r[u],
          d = t.length;
        ei.argument(65536 > d, "Table " + e.tableName + " too big."),
          (t[h] = d >> 8),
          (t[h + 1] = 255 & d),
          (t = t.concat(i[u]));
      }
      return t;
    }),
    (ri.TABLE = function (e) {
      for (var t = 0, n = e.fields.length, i = 0; n > i; i += 1) {
        var r = e.fields[i],
          s = ri[r.type];
        ei.argument(
          void 0 !== s,
          "No sizeOf function for field type " + r.type + " (" + r.name + ")"
        );
        var o = e[r.name];
        void 0 === o && (o = r.value),
          (t += s(o)),
          "TABLE" === r.type && (t += 2);
      }
      return t;
    }),
    (ii.RECORD = ii.TABLE),
    (ri.RECORD = ri.TABLE),
    (ii.LITERAL = function (e) {
      return e;
    }),
    (ri.LITERAL = function (e) {
      return e.length;
    }),
    (w.prototype.encode = function () {
      return ii.TABLE(this);
    }),
    (w.prototype.sizeOf = function () {
      return ri.TABLE(this);
    });
  var ci = {
      Table: w,
      Record: w,
      Coverage: ((S.prototype = Object.create(w.prototype)).constructor = S),
      ScriptList: ((E.prototype = Object.create(w.prototype)).constructor = E),
      FeatureList: ((k.prototype = Object.create(w.prototype)).constructor = k),
      LookupList: ((P.prototype = Object.create(w.prototype)).constructor = P),
      ushortList: x,
      tableList: C,
      recordList: T,
    },
    ui = {
      byte: 1,
      uShort: 2,
      short: 2,
      uLong: 4,
      fixed: 4,
      longDateTime: 8,
      tag: 4,
    };
  (M.prototype.parseByte = function () {
    var e = this.data.getUint8(this.offset + this.relativeOffset);
    return (this.relativeOffset += 1), e;
  }),
    (M.prototype.parseChar = function () {
      var e = this.data.getInt8(this.offset + this.relativeOffset);
      return (this.relativeOffset += 1), e;
    }),
    (M.prototype.parseCard8 = M.prototype.parseByte),
    (M.prototype.parseCard16 = M.prototype.parseUShort =
      function () {
        var e = this.data.getUint16(this.offset + this.relativeOffset);
        return (this.relativeOffset += 2), e;
      }),
    (M.prototype.parseSID = M.prototype.parseUShort),
    (M.prototype.parseOffset16 = M.prototype.parseUShort),
    (M.prototype.parseShort = function () {
      var e = this.data.getInt16(this.offset + this.relativeOffset);
      return (this.relativeOffset += 2), e;
    }),
    (M.prototype.parseF2Dot14 = function () {
      var e = this.data.getInt16(this.offset + this.relativeOffset) / 16384;
      return (this.relativeOffset += 2), e;
    }),
    (M.prototype.parseOffset32 = M.prototype.parseULong =
      function () {
        var e = O(this.data, this.offset + this.relativeOffset);
        return (this.relativeOffset += 4), e;
      }),
    (M.prototype.parseFixed = function () {
      var e = D(this.data, this.offset + this.relativeOffset);
      return (this.relativeOffset += 4), e;
    }),
    (M.prototype.parseString = function (e) {
      var t = this.data,
        n = this.offset + this.relativeOffset,
        i = "";
      this.relativeOffset += e;
      for (var r = 0; e > r; r++) i += String.fromCharCode(t.getUint8(n + r));
      return i;
    }),
    (M.prototype.parseTag = function () {
      return this.parseString(4);
    }),
    (M.prototype.parseLongDateTime = function () {
      var e = O(this.data, this.offset + this.relativeOffset + 4);
      return (e -= 2082844800), (this.relativeOffset += 8), e;
    }),
    (M.prototype.parseVersion = function (e) {
      var t = A(this.data, this.offset + this.relativeOffset),
        n = A(this.data, this.offset + this.relativeOffset + 2);
      return (
        (this.relativeOffset += 4), void 0 === e && (e = 4096), t + n / e / 10
      );
    }),
    (M.prototype.skip = function (e, t) {
      void 0 === t && (t = 1), (this.relativeOffset += ui[e] * t);
    }),
    (M.prototype.parseULongList = function (e) {
      void 0 === e && (e = this.parseULong());
      for (
        var t = new Array(e),
          n = this.data,
          i = this.offset + this.relativeOffset,
          r = 0;
        e > r;
        r++
      )
        (t[r] = n.getUint32(i)), (i += 4);
      return (this.relativeOffset += 4 * e), t;
    }),
    (M.prototype.parseOffset16List = M.prototype.parseUShortList =
      function (e) {
        void 0 === e && (e = this.parseUShort());
        for (
          var t = new Array(e),
            n = this.data,
            i = this.offset + this.relativeOffset,
            r = 0;
          e > r;
          r++
        )
          (t[r] = n.getUint16(i)), (i += 2);
        return (this.relativeOffset += 2 * e), t;
      }),
    (M.prototype.parseShortList = function (e) {
      for (
        var t = new Array(e),
          n = this.data,
          i = this.offset + this.relativeOffset,
          r = 0;
        e > r;
        r++
      )
        (t[r] = n.getInt16(i)), (i += 2);
      return (this.relativeOffset += 2 * e), t;
    }),
    (M.prototype.parseByteList = function (e) {
      for (
        var t = new Array(e),
          n = this.data,
          i = this.offset + this.relativeOffset,
          r = 0;
        e > r;
        r++
      )
        t[r] = n.getUint8(i++);
      return (this.relativeOffset += e), t;
    }),
    (M.prototype.parseList = function (e, t) {
      t || ((t = e), (e = this.parseUShort()));
      for (var n = new Array(e), i = 0; e > i; i++) n[i] = t.call(this);
      return n;
    }),
    (M.prototype.parseList32 = function (e, t) {
      t || ((t = e), (e = this.parseULong()));
      for (var n = new Array(e), i = 0; e > i; i++) n[i] = t.call(this);
      return n;
    }),
    (M.prototype.parseRecordList = function (e, t) {
      t || ((t = e), (e = this.parseUShort()));
      for (var n = new Array(e), i = Object.keys(t), r = 0; e > r; r++) {
        for (var s = {}, o = 0; o < i.length; o++) {
          var a = i[o],
            l = t[a];
          s[a] = l.call(this);
        }
        n[r] = s;
      }
      return n;
    }),
    (M.prototype.parseRecordList32 = function (e, t) {
      t || ((t = e), (e = this.parseULong()));
      for (var n = new Array(e), i = Object.keys(t), r = 0; e > r; r++) {
        for (var s = {}, o = 0; o < i.length; o++) {
          var a = i[o],
            l = t[a];
          s[a] = l.call(this);
        }
        n[r] = s;
      }
      return n;
    }),
    (M.prototype.parseStruct = function (e) {
      if ("function" == typeof e) return e.call(this);
      for (var t = Object.keys(e), n = {}, i = 0; i < t.length; i++) {
        var r = t[i],
          s = e[r];
        n[r] = s.call(this);
      }
      return n;
    }),
    (M.prototype.parseValueRecord = function (e) {
      if ((void 0 === e && (e = this.parseUShort()), 0 !== e)) {
        var t = {};
        return (
          1 & e && (t.xPlacement = this.parseShort()),
          2 & e && (t.yPlacement = this.parseShort()),
          4 & e && (t.xAdvance = this.parseShort()),
          8 & e && (t.yAdvance = this.parseShort()),
          16 & e && ((t.xPlaDevice = void 0), this.parseShort()),
          32 & e && ((t.yPlaDevice = void 0), this.parseShort()),
          64 & e && ((t.xAdvDevice = void 0), this.parseShort()),
          128 & e && ((t.yAdvDevice = void 0), this.parseShort()),
          t
        );
      }
    }),
    (M.prototype.parseValueRecordList = function () {
      for (
        var e = this.parseUShort(),
          t = this.parseUShort(),
          n = new Array(t),
          i = 0;
        t > i;
        i++
      )
        n[i] = this.parseValueRecord(e);
      return n;
    }),
    (M.prototype.parsePointer = function (e) {
      var t = this.parseOffset16();
      return t > 0 ? new M(this.data, this.offset + t).parseStruct(e) : void 0;
    }),
    (M.prototype.parsePointer32 = function (e) {
      var t = this.parseOffset32();
      return t > 0 ? new M(this.data, this.offset + t).parseStruct(e) : void 0;
    }),
    (M.prototype.parseListOfLists = function (e) {
      for (
        var t = this,
          n = this.parseOffset16List(),
          i = n.length,
          r = this.relativeOffset,
          s = new Array(i),
          o = 0;
        i > o;
        o++
      ) {
        var a = n[o];
        if (0 !== a)
          if (((t.relativeOffset = a), e)) {
            for (
              var l = t.parseOffset16List(), c = new Array(l.length), u = 0;
              u < l.length;
              u++
            )
              (t.relativeOffset = a + l[u]), (c[u] = e.call(t));
            s[o] = c;
          } else s[o] = t.parseUShortList();
        else s[o] = void 0;
      }
      return (this.relativeOffset = r), s;
    }),
    (M.prototype.parseCoverage = function () {
      var e = this.offset + this.relativeOffset,
        t = this.parseUShort(),
        n = this.parseUShort();
      if (1 === t) return { format: 1, glyphs: this.parseUShortList(n) };
      if (2 !== t)
        throw new Error(
          "0x" + e.toString(16) + ": Coverage format must be 1 or 2."
        );
      for (var i = new Array(n), r = 0; n > r; r++)
        i[r] = {
          start: this.parseUShort(),
          end: this.parseUShort(),
          index: this.parseUShort(),
        };
      return { format: 2, ranges: i };
    }),
    (M.prototype.parseClassDef = function () {
      var e = this.offset + this.relativeOffset,
        t = this.parseUShort();
      if (1 === t)
        return {
          format: 1,
          startGlyph: this.parseUShort(),
          classes: this.parseUShortList(),
        };
      if (2 === t)
        return {
          format: 2,
          ranges: this.parseRecordList({
            start: M.uShort,
            end: M.uShort,
            classId: M.uShort,
          }),
        };
      throw new Error(
        "0x" + e.toString(16) + ": ClassDef format must be 1 or 2."
      );
    }),
    (M.list = function (e, t) {
      return function () {
        return this.parseList(e, t);
      };
    }),
    (M.list32 = function (e, t) {
      return function () {
        return this.parseList32(e, t);
      };
    }),
    (M.recordList = function (e, t) {
      return function () {
        return this.parseRecordList(e, t);
      };
    }),
    (M.recordList32 = function (e, t) {
      return function () {
        return this.parseRecordList32(e, t);
      };
    }),
    (M.pointer = function (e) {
      return function () {
        return this.parsePointer(e);
      };
    }),
    (M.pointer32 = function (e) {
      return function () {
        return this.parsePointer32(e);
      };
    }),
    (M.tag = M.prototype.parseTag),
    (M["byte"] = M.prototype.parseByte),
    (M.uShort = M.offset16 = M.prototype.parseUShort),
    (M.uShortList = M.prototype.parseUShortList),
    (M.uLong = M.offset32 = M.prototype.parseULong),
    (M.uLongList = M.prototype.parseULongList),
    (M.struct = M.prototype.parseStruct),
    (M.coverage = M.prototype.parseCoverage),
    (M.classDef = M.prototype.parseClassDef);
  var hi = {
    reserved: M.uShort,
    reqFeatureIndex: M.uShort,
    featureIndexes: M.uShortList,
  };
  (M.prototype.parseScriptList = function () {
    return (
      this.parsePointer(
        M.recordList({
          tag: M.tag,
          script: M.pointer({
            defaultLangSys: M.pointer(hi),
            langSysRecords: M.recordList({
              tag: M.tag,
              langSys: M.pointer(hi),
            }),
          }),
        })
      ) || []
    );
  }),
    (M.prototype.parseFeatureList = function () {
      return (
        this.parsePointer(
          M.recordList({
            tag: M.tag,
            feature: M.pointer({
              featureParams: M.offset16,
              lookupListIndexes: M.uShortList,
            }),
          })
        ) || []
      );
    }),
    (M.prototype.parseLookupList = function (e) {
      return (
        this.parsePointer(
          M.list(
            M.pointer(function () {
              var t = this.parseUShort();
              ei.argument(
                t >= 1 && 9 >= t,
                "GPOS/GSUB lookup type " + t + " unknown."
              );
              var n = this.parseUShort(),
                i = 16 & n;
              return {
                lookupType: t,
                lookupFlag: n,
                subtables: this.parseList(M.pointer(e[t])),
                markFilteringSet: i ? this.parseUShort() : void 0,
              };
            })
          )
        ) || []
      );
    }),
    (M.prototype.parseFeatureVariationsList = function () {
      return (
        this.parsePointer32(function () {
          var e = this.parseUShort(),
            t = this.parseUShort();
          return (
            ei.argument(
              1 === e && 1 > t,
              "GPOS/GSUB feature variations table unknown."
            ),
            this.parseRecordList32({
              conditionSetOffset: M.offset32,
              featureTableSubstitutionOffset: M.offset32,
            })
          );
        }) || []
      );
    });
  var di = {
      getByte: I,
      getCard8: I,
      getUShort: A,
      getCard16: A,
      getShort: function (e, t) {
        return e.getInt16(t, !1);
      },
      getULong: O,
      getFixed: D,
      getTag: function (e, t) {
        for (var n = "", i = t; t + 4 > i; i += 1)
          n += String.fromCharCode(e.getInt8(i));
        return n;
      },
      getOffset: function (e, t, n) {
        for (var i = 0, r = 0; n > r; r += 1)
          (i <<= 8), (i += e.getUint8(t + r));
        return i;
      },
      getBytes: function (e, t, n) {
        for (var i = [], r = t; n > r; r += 1) i.push(e.getUint8(r));
        return i;
      },
      bytesToString: function (e) {
        for (var t = "", n = 0; n < e.length; n += 1)
          t += String.fromCharCode(e[n]);
        return t;
      },
      Parser: M,
    },
    pi = {
      parse: function (e, t) {
        var n = {};
        (n.version = di.getUShort(e, t)),
          ei.argument(0 === n.version, "cmap table version should be 0."),
          (n.numTables = di.getUShort(e, t + 2));
        for (var i = -1, r = n.numTables - 1; r >= 0; r -= 1) {
          var s = di.getUShort(e, t + 4 + 8 * r),
            o = di.getUShort(e, t + 4 + 8 * r + 2);
          if (
            (3 === s && (0 === o || 1 === o || 10 === o)) ||
            (0 === s && (0 === o || 1 === o || 2 === o || 3 === o || 4 === o))
          ) {
            i = di.getULong(e, t + 4 + 8 * r + 4);
            break;
          }
        }
        if (-1 === i) throw new Error("No valid cmap sub-tables found.");
        var a = new di.Parser(e, t + i);
        if (((n.format = a.parseUShort()), 12 === n.format))
          !(function (e, t) {
            var n;
            t.parseUShort(),
              (e.length = t.parseULong()),
              (e.language = t.parseULong()),
              (e.groupCount = n = t.parseULong()),
              (e.glyphIndexMap = {});
            for (var i = 0; n > i; i += 1)
              for (
                var r = t.parseULong(),
                  s = t.parseULong(),
                  o = t.parseULong(),
                  a = r;
                s >= a;
                a += 1
              )
                (e.glyphIndexMap[a] = o), o++;
          })(n, a);
        else {
          if (4 !== n.format)
            throw new Error(
              "Only format 4 and 12 cmap tables are supported (found format " +
                n.format +
                ")."
            );
          !(function (e, t, n, i, r) {
            var s;
            (e.length = t.parseUShort()),
              (e.language = t.parseUShort()),
              (e.segCount = s = t.parseUShort() >> 1),
              t.skip("uShort", 3),
              (e.glyphIndexMap = {});
            for (
              var o = new di.Parser(n, i + r + 14),
                a = new di.Parser(n, i + r + 16 + 2 * s),
                l = new di.Parser(n, i + r + 16 + 4 * s),
                c = new di.Parser(n, i + r + 16 + 6 * s),
                u = i + r + 16 + 8 * s,
                h = 0;
              s - 1 > h;
              h += 1
            )
              for (
                var d = void 0,
                  p = o.parseUShort(),
                  f = a.parseUShort(),
                  m = l.parseShort(),
                  g = c.parseUShort(),
                  v = f;
                p >= v;
                v += 1
              )
                0 !== g
                  ? ((u = c.offset + c.relativeOffset - 2),
                    (u += g),
                    (u += 2 * (v - f)),
                    0 !== (d = di.getUShort(n, u)) && (d = (d + m) & 65535))
                  : (d = (v + m) & 65535),
                  (e.glyphIndexMap[v] = d);
          })(n, a, e, t, i);
        }
        return n;
      },
      make: function (e) {
        var t,
          n = !0;
        for (t = e.length - 1; t > 0; t -= 1)
          if (65535 < e.get(t).unicode) {
            console.log("Adding CMAP format 12 (needed!)"), (n = !1);
            break;
          }
        var i = [
          { name: "version", type: "USHORT", value: 0 },
          { name: "numTables", type: "USHORT", value: n ? 1 : 2 },
          { name: "platformID", type: "USHORT", value: 3 },
          { name: "encodingID", type: "USHORT", value: 1 },
          { name: "offset", type: "ULONG", value: n ? 12 : 20 },
        ];
        n ||
          (i = i.concat([
            { name: "cmap12PlatformID", type: "USHORT", value: 3 },
            { name: "cmap12EncodingID", type: "USHORT", value: 10 },
            { name: "cmap12Offset", type: "ULONG", value: 0 },
          ])),
          (i = i.concat([
            { name: "format", type: "USHORT", value: 4 },
            { name: "cmap4Length", type: "USHORT", value: 0 },
            { name: "language", type: "USHORT", value: 0 },
            { name: "segCountX2", type: "USHORT", value: 0 },
            { name: "searchRange", type: "USHORT", value: 0 },
            { name: "entrySelector", type: "USHORT", value: 0 },
            { name: "rangeShift", type: "USHORT", value: 0 },
          ]));
        var r,
          s,
          o,
          a = new ci.Table("cmap", i);
        for (a.segments = [], t = 0; t < e.length; t += 1) {
          for (var l = e.get(t), c = 0; c < l.unicodes.length; c += 1)
            (r = a),
              (s = l.unicodes[c]),
              (o = t),
              r.segments.push({
                end: s,
                start: s,
                delta: -(s - o),
                offset: 0,
                glyphIndex: o,
              });
          a.segments = a.segments.sort(function (e, t) {
            return e.start - t.start;
          });
        }
        a.segments.push({ end: 65535, start: 65535, delta: 1, offset: 0 });
        var u = a.segments.length,
          h = 0,
          d = [],
          p = [],
          f = [],
          m = [],
          g = [],
          v = [];
        for (t = 0; u > t; t += 1) {
          var _ = a.segments[t];
          _.end <= 65535 && _.start <= 65535
            ? ((d = d.concat({
                name: "end_" + t,
                type: "USHORT",
                value: _.end,
              })),
              (p = p.concat({
                name: "start_" + t,
                type: "USHORT",
                value: _.start,
              })),
              (f = f.concat({
                name: "idDelta_" + t,
                type: "SHORT",
                value: _.delta,
              })),
              (m = m.concat({
                name: "idRangeOffset_" + t,
                type: "USHORT",
                value: _.offset,
              })),
              void 0 !== _.glyphId &&
                (g = g.concat({
                  name: "glyph_" + t,
                  type: "USHORT",
                  value: _.glyphId,
                })))
            : (h += 1),
            n ||
              void 0 === _.glyphIndex ||
              (v = (v = (v = v.concat({
                name: "cmap12Start_" + t,
                type: "ULONG",
                value: _.start,
              })).concat({
                name: "cmap12End_" + t,
                type: "ULONG",
                value: _.end,
              })).concat({
                name: "cmap12Glyph_" + t,
                type: "ULONG",
                value: _.glyphIndex,
              }));
        }
        if (
          ((a.segCountX2 = 2 * (u - h)),
          (a.searchRange =
            2 * Math.pow(2, Math.floor(Math.log(u - h) / Math.log(2)))),
          (a.entrySelector = Math.log(a.searchRange / 2) / Math.log(2)),
          (a.rangeShift = a.segCountX2 - a.searchRange),
          (a.fields = a.fields.concat(d)),
          a.fields.push({ name: "reservedPad", type: "USHORT", value: 0 }),
          (a.fields = a.fields.concat(p)),
          (a.fields = a.fields.concat(f)),
          (a.fields = a.fields.concat(m)),
          (a.fields = a.fields.concat(g)),
          (a.cmap4Length =
            14 +
            2 * d.length +
            2 +
            2 * p.length +
            2 * f.length +
            2 * m.length +
            2 * g.length),
          !n)
        ) {
          var y = 16 + 4 * v.length;
          (a.cmap12Offset = 20 + a.cmap4Length),
            (a.fields = a.fields.concat([
              { name: "cmap12Format", type: "USHORT", value: 12 },
              { name: "cmap12Reserved", type: "USHORT", value: 0 },
              { name: "cmap12Length", type: "ULONG", value: y },
              { name: "cmap12Language", type: "ULONG", value: 0 },
              { name: "cmap12nGroups", type: "ULONG", value: v.length / 3 },
            ])),
            (a.fields = a.fields.concat(v));
        }
        return a;
      },
    },
    fi = [
      ".notdef",
      "space",
      "exclam",
      "quotedbl",
      "numbersign",
      "dollar",
      "percent",
      "ampersand",
      "quoteright",
      "parenleft",
      "parenright",
      "asterisk",
      "plus",
      "comma",
      "hyphen",
      "period",
      "slash",
      "zero",
      "one",
      "two",
      "three",
      "four",
      "five",
      "six",
      "seven",
      "eight",
      "nine",
      "colon",
      "semicolon",
      "less",
      "equal",
      "greater",
      "question",
      "at",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "bracketleft",
      "backslash",
      "bracketright",
      "asciicircum",
      "underscore",
      "quoteleft",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "braceleft",
      "bar",
      "braceright",
      "asciitilde",
      "exclamdown",
      "cent",
      "sterling",
      "fraction",
      "yen",
      "florin",
      "section",
      "currency",
      "quotesingle",
      "quotedblleft",
      "guillemotleft",
      "guilsinglleft",
      "guilsinglright",
      "fi",
      "fl",
      "endash",
      "dagger",
      "daggerdbl",
      "periodcentered",
      "paragraph",
      "bullet",
      "quotesinglbase",
      "quotedblbase",
      "quotedblright",
      "guillemotright",
      "ellipsis",
      "perthousand",
      "questiondown",
      "grave",
      "acute",
      "circumflex",
      "tilde",
      "macron",
      "breve",
      "dotaccent",
      "dieresis",
      "ring",
      "cedilla",
      "hungarumlaut",
      "ogonek",
      "caron",
      "emdash",
      "AE",
      "ordfeminine",
      "Lslash",
      "Oslash",
      "OE",
      "ordmasculine",
      "ae",
      "dotlessi",
      "lslash",
      "oslash",
      "oe",
      "germandbls",
      "onesuperior",
      "logicalnot",
      "mu",
      "trademark",
      "Eth",
      "onehalf",
      "plusminus",
      "Thorn",
      "onequarter",
      "divide",
      "brokenbar",
      "degree",
      "thorn",
      "threequarters",
      "twosuperior",
      "registered",
      "minus",
      "eth",
      "multiply",
      "threesuperior",
      "copyright",
      "Aacute",
      "Acircumflex",
      "Adieresis",
      "Agrave",
      "Aring",
      "Atilde",
      "Ccedilla",
      "Eacute",
      "Ecircumflex",
      "Edieresis",
      "Egrave",
      "Iacute",
      "Icircumflex",
      "Idieresis",
      "Igrave",
      "Ntilde",
      "Oacute",
      "Ocircumflex",
      "Odieresis",
      "Ograve",
      "Otilde",
      "Scaron",
      "Uacute",
      "Ucircumflex",
      "Udieresis",
      "Ugrave",
      "Yacute",
      "Ydieresis",
      "Zcaron",
      "aacute",
      "acircumflex",
      "adieresis",
      "agrave",
      "aring",
      "atilde",
      "ccedilla",
      "eacute",
      "ecircumflex",
      "edieresis",
      "egrave",
      "iacute",
      "icircumflex",
      "idieresis",
      "igrave",
      "ntilde",
      "oacute",
      "ocircumflex",
      "odieresis",
      "ograve",
      "otilde",
      "scaron",
      "uacute",
      "ucircumflex",
      "udieresis",
      "ugrave",
      "yacute",
      "ydieresis",
      "zcaron",
      "exclamsmall",
      "Hungarumlautsmall",
      "dollaroldstyle",
      "dollarsuperior",
      "ampersandsmall",
      "Acutesmall",
      "parenleftsuperior",
      "parenrightsuperior",
      "266 ff",
      "onedotenleader",
      "zerooldstyle",
      "oneoldstyle",
      "twooldstyle",
      "threeoldstyle",
      "fouroldstyle",
      "fiveoldstyle",
      "sixoldstyle",
      "sevenoldstyle",
      "eightoldstyle",
      "nineoldstyle",
      "commasuperior",
      "threequartersemdash",
      "periodsuperior",
      "questionsmall",
      "asuperior",
      "bsuperior",
      "centsuperior",
      "dsuperior",
      "esuperior",
      "isuperior",
      "lsuperior",
      "msuperior",
      "nsuperior",
      "osuperior",
      "rsuperior",
      "ssuperior",
      "tsuperior",
      "ff",
      "ffi",
      "ffl",
      "parenleftinferior",
      "parenrightinferior",
      "Circumflexsmall",
      "hyphensuperior",
      "Gravesmall",
      "Asmall",
      "Bsmall",
      "Csmall",
      "Dsmall",
      "Esmall",
      "Fsmall",
      "Gsmall",
      "Hsmall",
      "Ismall",
      "Jsmall",
      "Ksmall",
      "Lsmall",
      "Msmall",
      "Nsmall",
      "Osmall",
      "Psmall",
      "Qsmall",
      "Rsmall",
      "Ssmall",
      "Tsmall",
      "Usmall",
      "Vsmall",
      "Wsmall",
      "Xsmall",
      "Ysmall",
      "Zsmall",
      "colonmonetary",
      "onefitted",
      "rupiah",
      "Tildesmall",
      "exclamdownsmall",
      "centoldstyle",
      "Lslashsmall",
      "Scaronsmall",
      "Zcaronsmall",
      "Dieresissmall",
      "Brevesmall",
      "Caronsmall",
      "Dotaccentsmall",
      "Macronsmall",
      "figuredash",
      "hypheninferior",
      "Ogoneksmall",
      "Ringsmall",
      "Cedillasmall",
      "questiondownsmall",
      "oneeighth",
      "threeeighths",
      "fiveeighths",
      "seveneighths",
      "onethird",
      "twothirds",
      "zerosuperior",
      "foursuperior",
      "fivesuperior",
      "sixsuperior",
      "sevensuperior",
      "eightsuperior",
      "ninesuperior",
      "zeroinferior",
      "oneinferior",
      "twoinferior",
      "threeinferior",
      "fourinferior",
      "fiveinferior",
      "sixinferior",
      "seveninferior",
      "eightinferior",
      "nineinferior",
      "centinferior",
      "dollarinferior",
      "periodinferior",
      "commainferior",
      "Agravesmall",
      "Aacutesmall",
      "Acircumflexsmall",
      "Atildesmall",
      "Adieresissmall",
      "Aringsmall",
      "AEsmall",
      "Ccedillasmall",
      "Egravesmall",
      "Eacutesmall",
      "Ecircumflexsmall",
      "Edieresissmall",
      "Igravesmall",
      "Iacutesmall",
      "Icircumflexsmall",
      "Idieresissmall",
      "Ethsmall",
      "Ntildesmall",
      "Ogravesmall",
      "Oacutesmall",
      "Ocircumflexsmall",
      "Otildesmall",
      "Odieresissmall",
      "OEsmall",
      "Oslashsmall",
      "Ugravesmall",
      "Uacutesmall",
      "Ucircumflexsmall",
      "Udieresissmall",
      "Yacutesmall",
      "Thornsmall",
      "Ydieresissmall",
      "001.000",
      "001.001",
      "001.002",
      "001.003",
      "Black",
      "Bold",
      "Book",
      "Light",
      "Medium",
      "Regular",
      "Roman",
      "Semibold",
    ],
    mi = [
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "space",
      "exclam",
      "quotedbl",
      "numbersign",
      "dollar",
      "percent",
      "ampersand",
      "quoteright",
      "parenleft",
      "parenright",
      "asterisk",
      "plus",
      "comma",
      "hyphen",
      "period",
      "slash",
      "zero",
      "one",
      "two",
      "three",
      "four",
      "five",
      "six",
      "seven",
      "eight",
      "nine",
      "colon",
      "semicolon",
      "less",
      "equal",
      "greater",
      "question",
      "at",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "bracketleft",
      "backslash",
      "bracketright",
      "asciicircum",
      "underscore",
      "quoteleft",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "braceleft",
      "bar",
      "braceright",
      "asciitilde",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "exclamdown",
      "cent",
      "sterling",
      "fraction",
      "yen",
      "florin",
      "section",
      "currency",
      "quotesingle",
      "quotedblleft",
      "guillemotleft",
      "guilsinglleft",
      "guilsinglright",
      "fi",
      "fl",
      "",
      "endash",
      "dagger",
      "daggerdbl",
      "periodcentered",
      "",
      "paragraph",
      "bullet",
      "quotesinglbase",
      "quotedblbase",
      "quotedblright",
      "guillemotright",
      "ellipsis",
      "perthousand",
      "",
      "questiondown",
      "",
      "grave",
      "acute",
      "circumflex",
      "tilde",
      "macron",
      "breve",
      "dotaccent",
      "dieresis",
      "",
      "ring",
      "cedilla",
      "",
      "hungarumlaut",
      "ogonek",
      "caron",
      "emdash",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "AE",
      "",
      "ordfeminine",
      "",
      "",
      "",
      "",
      "Lslash",
      "Oslash",
      "OE",
      "ordmasculine",
      "",
      "",
      "",
      "",
      "",
      "ae",
      "",
      "",
      "",
      "dotlessi",
      "",
      "",
      "lslash",
      "oslash",
      "oe",
      "germandbls",
    ],
    gi = [
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "space",
      "exclamsmall",
      "Hungarumlautsmall",
      "",
      "dollaroldstyle",
      "dollarsuperior",
      "ampersandsmall",
      "Acutesmall",
      "parenleftsuperior",
      "parenrightsuperior",
      "twodotenleader",
      "onedotenleader",
      "comma",
      "hyphen",
      "period",
      "fraction",
      "zerooldstyle",
      "oneoldstyle",
      "twooldstyle",
      "threeoldstyle",
      "fouroldstyle",
      "fiveoldstyle",
      "sixoldstyle",
      "sevenoldstyle",
      "eightoldstyle",
      "nineoldstyle",
      "colon",
      "semicolon",
      "commasuperior",
      "threequartersemdash",
      "periodsuperior",
      "questionsmall",
      "",
      "asuperior",
      "bsuperior",
      "centsuperior",
      "dsuperior",
      "esuperior",
      "",
      "",
      "isuperior",
      "",
      "",
      "lsuperior",
      "msuperior",
      "nsuperior",
      "osuperior",
      "",
      "",
      "rsuperior",
      "ssuperior",
      "tsuperior",
      "",
      "ff",
      "fi",
      "fl",
      "ffi",
      "ffl",
      "parenleftinferior",
      "",
      "parenrightinferior",
      "Circumflexsmall",
      "hyphensuperior",
      "Gravesmall",
      "Asmall",
      "Bsmall",
      "Csmall",
      "Dsmall",
      "Esmall",
      "Fsmall",
      "Gsmall",
      "Hsmall",
      "Ismall",
      "Jsmall",
      "Ksmall",
      "Lsmall",
      "Msmall",
      "Nsmall",
      "Osmall",
      "Psmall",
      "Qsmall",
      "Rsmall",
      "Ssmall",
      "Tsmall",
      "Usmall",
      "Vsmall",
      "Wsmall",
      "Xsmall",
      "Ysmall",
      "Zsmall",
      "colonmonetary",
      "onefitted",
      "rupiah",
      "Tildesmall",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "",
      "exclamdownsmall",
      "centoldstyle",
      "Lslashsmall",
      "",
      "",
      "Scaronsmall",
      "Zcaronsmall",
      "Dieresissmall",
      "Brevesmall",
      "Caronsmall",
      "",
      "Dotaccentsmall",
      "",
      "",
      "Macronsmall",
      "",
      "",
      "figuredash",
      "hypheninferior",
      "",
      "",
      "Ogoneksmall",
      "Ringsmall",
      "Cedillasmall",
      "",
      "",
      "",
      "onequarter",
      "onehalf",
      "threequarters",
      "questiondownsmall",
      "oneeighth",
      "threeeighths",
      "fiveeighths",
      "seveneighths",
      "onethird",
      "twothirds",
      "",
      "",
      "zerosuperior",
      "onesuperior",
      "twosuperior",
      "threesuperior",
      "foursuperior",
      "fivesuperior",
      "sixsuperior",
      "sevensuperior",
      "eightsuperior",
      "ninesuperior",
      "zeroinferior",
      "oneinferior",
      "twoinferior",
      "threeinferior",
      "fourinferior",
      "fiveinferior",
      "sixinferior",
      "seveninferior",
      "eightinferior",
      "nineinferior",
      "centinferior",
      "dollarinferior",
      "periodinferior",
      "commainferior",
      "Agravesmall",
      "Aacutesmall",
      "Acircumflexsmall",
      "Atildesmall",
      "Adieresissmall",
      "Aringsmall",
      "AEsmall",
      "Ccedillasmall",
      "Egravesmall",
      "Eacutesmall",
      "Ecircumflexsmall",
      "Edieresissmall",
      "Igravesmall",
      "Iacutesmall",
      "Icircumflexsmall",
      "Idieresissmall",
      "Ethsmall",
      "Ntildesmall",
      "Ogravesmall",
      "Oacutesmall",
      "Ocircumflexsmall",
      "Otildesmall",
      "Odieresissmall",
      "OEsmall",
      "Oslashsmall",
      "Ugravesmall",
      "Uacutesmall",
      "Ucircumflexsmall",
      "Udieresissmall",
      "Yacutesmall",
      "Thornsmall",
      "Ydieresissmall",
    ],
    vi = [
      ".notdef",
      ".null",
      "nonmarkingreturn",
      "space",
      "exclam",
      "quotedbl",
      "numbersign",
      "dollar",
      "percent",
      "ampersand",
      "quotesingle",
      "parenleft",
      "parenright",
      "asterisk",
      "plus",
      "comma",
      "hyphen",
      "period",
      "slash",
      "zero",
      "one",
      "two",
      "three",
      "four",
      "five",
      "six",
      "seven",
      "eight",
      "nine",
      "colon",
      "semicolon",
      "less",
      "equal",
      "greater",
      "question",
      "at",
      "A",
      "B",
      "C",
      "D",
      "E",
      "F",
      "G",
      "H",
      "I",
      "J",
      "K",
      "L",
      "M",
      "N",
      "O",
      "P",
      "Q",
      "R",
      "S",
      "T",
      "U",
      "V",
      "W",
      "X",
      "Y",
      "Z",
      "bracketleft",
      "backslash",
      "bracketright",
      "asciicircum",
      "underscore",
      "grave",
      "a",
      "b",
      "c",
      "d",
      "e",
      "f",
      "g",
      "h",
      "i",
      "j",
      "k",
      "l",
      "m",
      "n",
      "o",
      "p",
      "q",
      "r",
      "s",
      "t",
      "u",
      "v",
      "w",
      "x",
      "y",
      "z",
      "braceleft",
      "bar",
      "braceright",
      "asciitilde",
      "Adieresis",
      "Aring",
      "Ccedilla",
      "Eacute",
      "Ntilde",
      "Odieresis",
      "Udieresis",
      "aacute",
      "agrave",
      "acircumflex",
      "adieresis",
      "atilde",
      "aring",
      "ccedilla",
      "eacute",
      "egrave",
      "ecircumflex",
      "edieresis",
      "iacute",
      "igrave",
      "icircumflex",
      "idieresis",
      "ntilde",
      "oacute",
      "ograve",
      "ocircumflex",
      "odieresis",
      "otilde",
      "uacute",
      "ugrave",
      "ucircumflex",
      "udieresis",
      "dagger",
      "degree",
      "cent",
      "sterling",
      "section",
      "bullet",
      "paragraph",
      "germandbls",
      "registered",
      "copyright",
      "trademark",
      "acute",
      "dieresis",
      "notequal",
      "AE",
      "Oslash",
      "infinity",
      "plusminus",
      "lessequal",
      "greaterequal",
      "yen",
      "mu",
      "partialdiff",
      "summation",
      "product",
      "pi",
      "integral",
      "ordfeminine",
      "ordmasculine",
      "Omega",
      "ae",
      "oslash",
      "questiondown",
      "exclamdown",
      "logicalnot",
      "radical",
      "florin",
      "approxequal",
      "Delta",
      "guillemotleft",
      "guillemotright",
      "ellipsis",
      "nonbreakingspace",
      "Agrave",
      "Atilde",
      "Otilde",
      "OE",
      "oe",
      "endash",
      "emdash",
      "quotedblleft",
      "quotedblright",
      "quoteleft",
      "quoteright",
      "divide",
      "lozenge",
      "ydieresis",
      "Ydieresis",
      "fraction",
      "currency",
      "guilsinglleft",
      "guilsinglright",
      "fi",
      "fl",
      "daggerdbl",
      "periodcentered",
      "quotesinglbase",
      "quotedblbase",
      "perthousand",
      "Acircumflex",
      "Ecircumflex",
      "Aacute",
      "Edieresis",
      "Egrave",
      "Iacute",
      "Icircumflex",
      "Idieresis",
      "Igrave",
      "Oacute",
      "Ocircumflex",
      "apple",
      "Ograve",
      "Uacute",
      "Ucircumflex",
      "Ugrave",
      "dotlessi",
      "circumflex",
      "tilde",
      "macron",
      "breve",
      "dotaccent",
      "ring",
      "cedilla",
      "hungarumlaut",
      "ogonek",
      "caron",
      "Lslash",
      "lslash",
      "Scaron",
      "scaron",
      "Zcaron",
      "zcaron",
      "brokenbar",
      "Eth",
      "eth",
      "Yacute",
      "yacute",
      "Thorn",
      "thorn",
      "minus",
      "multiply",
      "onesuperior",
      "twosuperior",
      "threesuperior",
      "onehalf",
      "onequarter",
      "threequarters",
      "franc",
      "Gbreve",
      "gbreve",
      "Idotaccent",
      "Scedilla",
      "scedilla",
      "Cacute",
      "cacute",
      "Ccaron",
      "ccaron",
      "dcroat",
    ];
  (R.prototype.charToGlyphIndex = function (e) {
    var t = e.codePointAt(0),
      n = this.font.glyphs;
    if (n)
      for (var i = 0; i < n.length; i += 1)
        for (var r = n.get(i), s = 0; s < r.unicodes.length; s += 1)
          if (r.unicodes[s] === t) return i;
    return null;
  }),
    (L.prototype.charToGlyphIndex = function (e) {
      return this.cmap.glyphIndexMap[e.codePointAt(0)] || 0;
    }),
    (N.prototype.charToGlyphIndex = function (e) {
      var t = e.codePointAt(0),
        n = this.encoding[t];
      return this.charset.indexOf(n);
    }),
    (U.prototype.nameToGlyphIndex = function (e) {
      return this.names.indexOf(e);
    }),
    (U.prototype.glyphIndexToName = function (e) {
      return this.names[e];
    });
  var _i = {
    line: function (e, t, n, i, r) {
      e.beginPath(), e.moveTo(t, n), e.lineTo(i, r), e.stroke();
    },
  };
  (B.prototype.bindConstructorValues = function (e) {
    var t, n;
    (this.index = e.index || 0),
      (this.name = e.name || null),
      (this.unicode = e.unicode || void 0),
      (this.unicodes = e.unicodes || void 0 !== e.unicode ? [e.unicode] : []),
      e.xMin && (this.xMin = e.xMin),
      e.yMin && (this.yMin = e.yMin),
      e.xMax && (this.xMax = e.xMax),
      e.yMax && (this.yMax = e.yMax),
      e.advanceWidth && (this.advanceWidth = e.advanceWidth),
      Object.defineProperty(
        this,
        "path",
        ((t = e.path),
        (n = t || new p()),
        {
          configurable: !0,
          get: function () {
            return "function" == typeof n && (n = n()), n;
          },
          set: function (e) {
            n = e;
          },
        })
      );
  }),
    (B.prototype.addUnicode = function (e) {
      0 === this.unicodes.length && (this.unicode = e), this.unicodes.push(e);
    }),
    (B.prototype.getBoundingBox = function () {
      return this.path.getBoundingBox();
    }),
    (B.prototype.getPath = function (e, t, n, i, r) {
      var s, o;
      (e = void 0 !== e ? e : 0),
        (t = void 0 !== t ? t : 0),
        (n = void 0 !== n ? n : 72),
        i || (i = {});
      var a = i.xScale,
        l = i.yScale;
      if (
        (i.hinting &&
          r &&
          r.hinting &&
          (o = this.path && r.hinting.exec(this, n)),
        o)
      )
        (s = r.hinting.getCommands(o)),
          (e = Math.round(e)),
          (t = Math.round(t)),
          (a = l = 1);
      else {
        s = this.path.commands;
        var c = (1 / this.path.unitsPerEm) * n;
        void 0 === a && (a = c), void 0 === l && (l = c);
      }
      for (var u = new p(), h = 0; h < s.length; h += 1) {
        var d = s[h];
        "M" === d.type
          ? u.moveTo(e + d.x * a, t + -d.y * l)
          : "L" === d.type
          ? u.lineTo(e + d.x * a, t + -d.y * l)
          : "Q" === d.type
          ? u.quadraticCurveTo(
              e + d.x1 * a,
              t + -d.y1 * l,
              e + d.x * a,
              t + -d.y * l
            )
          : "C" === d.type
          ? u.curveTo(
              e + d.x1 * a,
              t + -d.y1 * l,
              e + d.x2 * a,
              t + -d.y2 * l,
              e + d.x * a,
              t + -d.y * l
            )
          : "Z" === d.type && u.closePath();
      }
      return u;
    }),
    (B.prototype.getContours = function () {
      if (void 0 === this.points) return [];
      for (var e = [], t = [], n = 0; n < this.points.length; n += 1) {
        var i = this.points[n];
        t.push(i), i.lastPointOfContour && (e.push(t), (t = []));
      }
      return (
        ei.argument(
          0 === t.length,
          "There are still points left in the current contour."
        ),
        e
      );
    }),
    (B.prototype.getMetrics = function () {
      for (
        var e = this.path.commands, t = [], n = [], i = 0;
        i < e.length;
        i += 1
      ) {
        var r = e[i];
        "Z" !== r.type && (t.push(r.x), n.push(r.y)),
          ("Q" !== r.type && "C" !== r.type) || (t.push(r.x1), n.push(r.y1)),
          "C" === r.type && (t.push(r.x2), n.push(r.y2));
      }
      var s = {
        xMin: Math.min.apply(null, t),
        yMin: Math.min.apply(null, n),
        xMax: Math.max.apply(null, t),
        yMax: Math.max.apply(null, n),
        leftSideBearing: this.leftSideBearing,
      };
      return (
        isFinite(s.xMin) || (s.xMin = 0),
        isFinite(s.xMax) || (s.xMax = this.advanceWidth),
        isFinite(s.yMin) || (s.yMin = 0),
        isFinite(s.yMax) || (s.yMax = 0),
        (s.rightSideBearing =
          this.advanceWidth - s.leftSideBearing - (s.xMax - s.xMin)),
        s
      );
    }),
    (B.prototype.draw = function (e, t, n, i, r) {
      this.getPath(t, n, i, r).draw(e);
    }),
    (B.prototype.drawPoints = function (e, t, n, i) {
      function r(t, n, i, r) {
        var s = 2 * Math.PI;
        e.beginPath();
        for (var o = 0; o < t.length; o += 1)
          e.moveTo(n + t[o].x * r, i + t[o].y * r),
            e.arc(n + t[o].x * r, i + t[o].y * r, 2, 0, s, !1);
        e.closePath(), e.fill();
      }
      (t = void 0 !== t ? t : 0),
        (n = void 0 !== n ? n : 0),
        (i = void 0 !== i ? i : 24);
      for (
        var s = (1 / this.path.unitsPerEm) * i,
          o = [],
          a = [],
          l = this.path,
          c = 0;
        c < l.commands.length;
        c += 1
      ) {
        var u = l.commands[c];
        void 0 !== u.x && o.push({ x: u.x, y: -u.y }),
          void 0 !== u.x1 && a.push({ x: u.x1, y: -u.y1 }),
          void 0 !== u.x2 && a.push({ x: u.x2, y: -u.y2 });
      }
      (e.fillStyle = "blue"),
        r(o, t, n, s),
        (e.fillStyle = "red"),
        r(a, t, n, s);
    }),
    (B.prototype.drawMetrics = function (e, t, n, i) {
      var r;
      (t = void 0 !== t ? t : 0),
        (n = void 0 !== n ? n : 0),
        (i = void 0 !== i ? i : 24),
        (r = (1 / this.path.unitsPerEm) * i),
        (e.lineWidth = 1),
        (e.strokeStyle = "black"),
        _i.line(e, t, -1e4, t, 1e4),
        _i.line(e, -1e4, n, 1e4, n);
      var s = this.xMin || 0,
        o = this.yMin || 0,
        a = this.xMax || 0,
        l = this.yMax || 0,
        c = this.advanceWidth || 0;
      (e.strokeStyle = "blue"),
        _i.line(e, t + s * r, -1e4, t + s * r, 1e4),
        _i.line(e, t + a * r, -1e4, t + a * r, 1e4),
        _i.line(e, -1e4, n + -o * r, 1e4, n + -o * r),
        _i.line(e, -1e4, n + -l * r, 1e4, n + -l * r),
        (e.strokeStyle = "green"),
        _i.line(e, t + c * r, -1e4, t + c * r, 1e4);
    }),
    (j.prototype.get = function (e) {
      return (
        "function" == typeof this.glyphs[e] &&
          (this.glyphs[e] = this.glyphs[e]()),
        this.glyphs[e]
      );
    }),
    (j.prototype.push = function (e, t) {
      (this.glyphs[e] = t), this.length++;
    });
  var yi = {
      GlyphSet: j,
      glyphLoader: function (e, t) {
        return new B({ index: t, font: e });
      },
      ttfGlyphLoader: function (e, t, n, i, r, s) {
        return function () {
          var o = new B({ index: t, font: e });
          return (
            (o.path = function () {
              n(o, i, r);
              var t = s(e.glyphs, o);
              return (t.unitsPerEm = e.unitsPerEm), t;
            }),
            F(o, "xMin", "_xMin"),
            F(o, "xMax", "_xMax"),
            F(o, "yMin", "_yMin"),
            F(o, "yMax", "_yMax"),
            o
          );
        };
      },
      cffGlyphLoader: function (e, t, n, i) {
        return function () {
          var r = new B({ index: t, font: e });
          return (
            (r.path = function () {
              var t = n(e, r, i);
              return (t.unitsPerEm = e.unitsPerEm), t;
            }),
            r
          );
        };
      },
    },
    bi = [
      { name: "version", op: 0, type: "SID" },
      { name: "notice", op: 1, type: "SID" },
      { name: "copyright", op: 1200, type: "SID" },
      { name: "fullName", op: 2, type: "SID" },
      { name: "familyName", op: 3, type: "SID" },
      { name: "weight", op: 4, type: "SID" },
      { name: "isFixedPitch", op: 1201, type: "number", value: 0 },
      { name: "italicAngle", op: 1202, type: "number", value: 0 },
      { name: "underlinePosition", op: 1203, type: "number", value: -100 },
      { name: "underlineThickness", op: 1204, type: "number", value: 50 },
      { name: "paintType", op: 1205, type: "number", value: 0 },
      { name: "charstringType", op: 1206, type: "number", value: 2 },
      {
        name: "fontMatrix",
        op: 1207,
        type: ["real", "real", "real", "real", "real", "real"],
        value: [0.001, 0, 0, 0.001, 0, 0],
      },
      { name: "uniqueId", op: 13, type: "number" },
      {
        name: "fontBBox",
        op: 5,
        type: ["number", "number", "number", "number"],
        value: [0, 0, 0, 0],
      },
      { name: "strokeWidth", op: 1208, type: "number", value: 0 },
      { name: "xuid", op: 14, type: [], value: null },
      { name: "charset", op: 15, type: "offset", value: 0 },
      { name: "encoding", op: 16, type: "offset", value: 0 },
      { name: "charStrings", op: 17, type: "offset", value: 0 },
      { name: "private", op: 18, type: ["number", "offset"], value: [0, 0] },
      { name: "ros", op: 1230, type: ["SID", "SID", "number"] },
      { name: "cidFontVersion", op: 1231, type: "number", value: 0 },
      { name: "cidFontRevision", op: 1232, type: "number", value: 0 },
      { name: "cidFontType", op: 1233, type: "number", value: 0 },
      { name: "cidCount", op: 1234, type: "number", value: 8720 },
      { name: "uidBase", op: 1235, type: "number" },
      { name: "fdArray", op: 1236, type: "offset" },
      { name: "fdSelect", op: 1237, type: "offset" },
      { name: "fontName", op: 1238, type: "SID" },
    ],
    wi = [
      { name: "subrs", op: 19, type: "offset", value: 0 },
      { name: "defaultWidthX", op: 20, type: "number", value: 0 },
      { name: "nominalWidthX", op: 21, type: "number", value: 0 },
    ],
    xi = {
      parse: function (e, t, n) {
        n.tables.cff = {};
        var i,
          r,
          s,
          o = z(
            e,
            z(
              e,
              ((i = e),
              (r = t),
              ((s = {}).formatMajor = di.getCard8(i, r)),
              (s.formatMinor = di.getCard8(i, r + 1)),
              (s.size = di.getCard8(i, r + 2)),
              (s.offsetSize = di.getCard8(i, r + 3)),
              (s.startOffset = r),
              (s.endOffset = r + 4),
              s).endOffset,
              di.bytesToString
            ).endOffset
          ),
          a = z(e, o.endOffset, di.bytesToString),
          l = z(e, a.endOffset);
        (n.gsubrs = l.objects), (n.gsubrsBias = $(n.gsubrs));
        var c = Y(e, t, o.objects, a.objects);
        if (1 !== c.length)
          throw new Error(
            "CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = " +
              c.length
          );
        var u = c[0];
        if (
          ((n.tables.cff.topDict = u)._privateDict &&
            ((n.defaultWidthX = u._privateDict.defaultWidthX),
            (n.nominalWidthX = u._privateDict.nominalWidthX)),
          void 0 !== u.ros[0] && void 0 !== u.ros[1] && (n.isCIDFont = !0),
          n.isCIDFont)
        ) {
          var h = u.fdArray,
            d = u.fdSelect;
          if (0 === h || 0 === d)
            throw new Error(
              "Font is marked as a CID font, but FDArray and/or FDSelect information is missing"
            );
          var p = Y(e, t, z(e, (h += t)).objects, a.objects);
          (u._fdArray = p),
            (d += t),
            (u._fdSelect = (function (e, t, n, i) {
              var r,
                s = [],
                o = new di.Parser(e, t),
                a = o.parseCard8();
              if (0 === a)
                for (var l = 0; n > l; l++) {
                  if (i <= (r = o.parseCard8()))
                    throw new Error(
                      "CFF table CID Font FDSelect has bad FD index value " +
                        r +
                        " (FD count " +
                        i +
                        ")"
                    );
                  s.push(r);
                }
              else {
                if (3 !== a)
                  throw new Error(
                    "CFF Table CID Font FDSelect table has unsupported format " +
                      a
                  );
                var c,
                  u = o.parseCard16(),
                  h = o.parseCard16();
                if (0 !== h)
                  throw new Error(
                    "CFF Table CID Font FDSelect format 3 range has bad initial GID " +
                      h
                  );
                for (var d = 0; u > d; d++) {
                  if (((r = o.parseCard8()), (c = o.parseCard16()), r >= i))
                    throw new Error(
                      "CFF table CID Font FDSelect has bad FD index value " +
                        r +
                        " (FD count " +
                        i +
                        ")"
                    );
                  if (c > n)
                    throw new Error(
                      "CFF Table CID Font FDSelect format 3 range has bad GID " +
                        c
                    );
                  for (; c > h; h++) s.push(r);
                  h = c;
                }
                if (c !== n)
                  throw new Error(
                    "CFF Table CID Font FDSelect format 3 range has bad final GID " +
                      c
                  );
              }
              return s;
            })(e, d, n.numGlyphs, p.length));
        }
        var f = t + u["private"][1],
          m = X(e, f, u["private"][0], a.objects);
        if (
          ((n.defaultWidthX = m.defaultWidthX),
          (n.nominalWidthX = m.nominalWidthX),
          0 !== m.subrs)
        ) {
          var g = z(e, f + m.subrs);
          (n.subrs = g.objects), (n.subrsBias = $(n.subrs));
        } else (n.subrs = []), (n.subrsBias = 0);
        var v = z(e, t + u.charStrings);
        n.nGlyphs = v.objects.length;
        var _ = (function (e, t, n, i) {
          var r,
            s,
            o = new di.Parser(e, t);
          n -= 1;
          var a = [".notdef"],
            l = o.parseCard8();
          if (0 === l)
            for (var c = 0; n > c; c += 1) (r = o.parseSID()), a.push(V(i, r));
          else if (1 === l)
            for (; a.length <= n; ) {
              (r = o.parseSID()), (s = o.parseCard8());
              for (var u = 0; s >= u; u += 1) a.push(V(i, r)), (r += 1);
            }
          else {
            if (2 !== l) throw new Error("Unknown charset format " + l);
            for (; a.length <= n; ) {
              (r = o.parseSID()), (s = o.parseCard16());
              for (var h = 0; s >= h; h += 1) a.push(V(i, r)), (r += 1);
            }
          }
          return a;
        })(e, t + u.charset, n.nGlyphs, a.objects);
        (n.cffEncoding =
          0 === u.encoding
            ? new N(mi, _)
            : 1 === u.encoding
            ? new N(gi, _)
            : (function (e, t, n) {
                var i,
                  r = {},
                  s = new di.Parser(e, t),
                  o = s.parseCard8();
                if (0 === o)
                  for (var a = s.parseCard8(), l = 0; a > l; l += 1)
                    r[(i = s.parseCard8())] = l;
                else {
                  if (1 !== o) throw new Error("Unknown encoding format " + o);
                  var c = s.parseCard8();
                  i = 1;
                  for (var u = 0; c > u; u += 1)
                    for (
                      var h = s.parseCard8(), d = s.parseCard8(), p = h;
                      h + d >= p;
                      p += 1
                    )
                      (r[p] = i), (i += 1);
                }
                return new N(r, n);
              })(e, t + u.encoding, _)),
          (n.encoding = n.encoding || n.cffEncoding),
          (n.glyphs = new yi.GlyphSet(n));
        for (var y = 0; y < n.nGlyphs; y += 1) {
          var b = v.objects[y];
          n.glyphs.push(y, yi.cffGlyphLoader(n, y, K, b));
        }
      },
      make: function (e, t) {
        for (
          var n,
            i = new ci.Table("CFF ", [
              { name: "header", type: "RECORD" },
              { name: "nameIndex", type: "RECORD" },
              { name: "topDictIndex", type: "RECORD" },
              { name: "stringIndex", type: "RECORD" },
              { name: "globalSubrIndex", type: "RECORD" },
              { name: "charsets", type: "RECORD" },
              { name: "charStringsIndex", type: "RECORD" },
              { name: "privateDict", type: "RECORD" },
            ]),
            r = 1 / t.unitsPerEm,
            s = {
              version: t.version,
              fullName: t.fullName,
              familyName: t.familyName,
              weight: t.weightName,
              fontBBox: t.fontBBox || [0, 0, 0, 0],
              fontMatrix: [r, 0, 0, r, 0, 0],
              charset: 999,
              encoding: 0,
              charStrings: 999,
              private: [0, 999],
            },
            o = [],
            a = 1;
          a < e.length;
          a += 1
        )
          (n = e.get(a)), o.push(n.name);
        var l = [];
        (i.header = new ci.Record("Header", [
          { name: "major", type: "Card8", value: 1 },
          { name: "minor", type: "Card8", value: 0 },
          { name: "hdrSize", type: "Card8", value: 4 },
          { name: "major", type: "Card8", value: 1 },
        ])),
          (i.nameIndex = (function (e) {
            var t = new ci.Record("Name INDEX", [
              { name: "names", type: "INDEX", value: [] },
            ]);
            t.names = [];
            for (var n = 0; n < e.length; n += 1)
              t.names.push({ name: "name_" + n, type: "NAME", value: e[n] });
            return t;
          })([t.postScriptName]));
        var c,
          u,
          h,
          d = Z(s, l);
        (i.topDictIndex = et(d)),
          (i.globalSubrIndex = new ci.Record("Global Subr INDEX", [
            { name: "subrs", type: "INDEX", value: [] },
          ])),
          (i.charsets = (function (e, t) {
            for (
              var n = new ci.Record("Charsets", [
                  { name: "format", type: "Card8", value: 0 },
                ]),
                i = 0;
              i < e.length;
              i += 1
            ) {
              var r = J(e[i], t);
              n.fields.push({ name: "glyph_" + i, type: "SID", value: r });
            }
            return n;
          })(o, l)),
          (i.charStringsIndex = (function (e) {
            for (
              var t = new ci.Record("CharStrings INDEX", [
                  { name: "charStrings", type: "INDEX", value: [] },
                ]),
                n = 0;
              n < e.length;
              n += 1
            ) {
              var i = e.get(n),
                r = tt(i);
              t.charStrings.push({
                name: i.name,
                type: "CHARSTRING",
                value: r,
              });
            }
            return t;
          })(e)),
          (i.privateDict =
            ((c = {}),
            (u = l),
            ((h = new ci.Record("Private DICT", [
              { name: "dict", type: "DICT", value: {} },
            ])).dict = Q(wi, c, u)),
            h)),
          (i.stringIndex = (function (e) {
            var t = new ci.Record("String INDEX", [
              { name: "strings", type: "INDEX", value: [] },
            ]);
            t.strings = [];
            for (var n = 0; n < e.length; n += 1)
              t.strings.push({
                name: "string_" + n,
                type: "STRING",
                value: e[n],
              });
            return t;
          })(l));
        var p =
          i.header.sizeOf() +
          i.nameIndex.sizeOf() +
          i.topDictIndex.sizeOf() +
          i.stringIndex.sizeOf() +
          i.globalSubrIndex.sizeOf();
        return (
          (s.charset = p),
          (s.encoding = 0),
          (s.charStrings = s.charset + i.charsets.sizeOf()),
          (s["private"][1] = s.charStrings + i.charStringsIndex.sizeOf()),
          (d = Z(s, l)),
          (i.topDictIndex = et(d)),
          i
        );
      },
    },
    Ci = {
      parse: function (e, t) {
        var n = {},
          i = new di.Parser(e, t);
        return (
          (n.version = i.parseVersion()),
          (n.fontRevision = Math.round(1e3 * i.parseFixed()) / 1e3),
          (n.checkSumAdjustment = i.parseULong()),
          (n.magicNumber = i.parseULong()),
          ei.argument(
            1594834165 === n.magicNumber,
            "Font header has wrong magic number."
          ),
          (n.flags = i.parseUShort()),
          (n.unitsPerEm = i.parseUShort()),
          (n.created = i.parseLongDateTime()),
          (n.modified = i.parseLongDateTime()),
          (n.xMin = i.parseShort()),
          (n.yMin = i.parseShort()),
          (n.xMax = i.parseShort()),
          (n.yMax = i.parseShort()),
          (n.macStyle = i.parseUShort()),
          (n.lowestRecPPEM = i.parseUShort()),
          (n.fontDirectionHint = i.parseShort()),
          (n.indexToLocFormat = i.parseShort()),
          (n.glyphDataFormat = i.parseShort()),
          n
        );
      },
      make: function (e) {
        var t = Math.round(new Date().getTime() / 1e3) + 2082844800,
          n = t;
        return (
          e.createdTimestamp && (n = e.createdTimestamp + 2082844800),
          new ci.Table(
            "head",
            [
              { name: "version", type: "FIXED", value: 65536 },
              { name: "fontRevision", type: "FIXED", value: 65536 },
              { name: "checkSumAdjustment", type: "ULONG", value: 0 },
              { name: "magicNumber", type: "ULONG", value: 1594834165 },
              { name: "flags", type: "USHORT", value: 0 },
              { name: "unitsPerEm", type: "USHORT", value: 1e3 },
              { name: "created", type: "LONGDATETIME", value: n },
              { name: "modified", type: "LONGDATETIME", value: t },
              { name: "xMin", type: "SHORT", value: 0 },
              { name: "yMin", type: "SHORT", value: 0 },
              { name: "xMax", type: "SHORT", value: 0 },
              { name: "yMax", type: "SHORT", value: 0 },
              { name: "macStyle", type: "USHORT", value: 0 },
              { name: "lowestRecPPEM", type: "USHORT", value: 0 },
              { name: "fontDirectionHint", type: "SHORT", value: 2 },
              { name: "indexToLocFormat", type: "SHORT", value: 0 },
              { name: "glyphDataFormat", type: "SHORT", value: 0 },
            ],
            e
          )
        );
      },
    },
    Ti = {
      parse: function (e, t) {
        var n = {},
          i = new di.Parser(e, t);
        return (
          (n.version = i.parseVersion()),
          (n.ascender = i.parseShort()),
          (n.descender = i.parseShort()),
          (n.lineGap = i.parseShort()),
          (n.advanceWidthMax = i.parseUShort()),
          (n.minLeftSideBearing = i.parseShort()),
          (n.minRightSideBearing = i.parseShort()),
          (n.xMaxExtent = i.parseShort()),
          (n.caretSlopeRise = i.parseShort()),
          (n.caretSlopeRun = i.parseShort()),
          (n.caretOffset = i.parseShort()),
          (i.relativeOffset += 8),
          (n.metricDataFormat = i.parseShort()),
          (n.numberOfHMetrics = i.parseUShort()),
          n
        );
      },
      make: function (e) {
        return new ci.Table(
          "hhea",
          [
            { name: "version", type: "FIXED", value: 65536 },
            { name: "ascender", type: "FWORD", value: 0 },
            { name: "descender", type: "FWORD", value: 0 },
            { name: "lineGap", type: "FWORD", value: 0 },
            { name: "advanceWidthMax", type: "UFWORD", value: 0 },
            { name: "minLeftSideBearing", type: "FWORD", value: 0 },
            { name: "minRightSideBearing", type: "FWORD", value: 0 },
            { name: "xMaxExtent", type: "FWORD", value: 0 },
            { name: "caretSlopeRise", type: "SHORT", value: 1 },
            { name: "caretSlopeRun", type: "SHORT", value: 0 },
            { name: "caretOffset", type: "SHORT", value: 0 },
            { name: "reserved1", type: "SHORT", value: 0 },
            { name: "reserved2", type: "SHORT", value: 0 },
            { name: "reserved3", type: "SHORT", value: 0 },
            { name: "reserved4", type: "SHORT", value: 0 },
            { name: "metricDataFormat", type: "SHORT", value: 0 },
            { name: "numberOfHMetrics", type: "USHORT", value: 0 },
          ],
          e
        );
      },
    },
    Si = {
      parse: function (e, t, n, i, r) {
        for (var s, o, a = new di.Parser(e, t), l = 0; i > l; l += 1) {
          n > l && ((s = a.parseUShort()), (o = a.parseShort()));
          var c = r.get(l);
          (c.advanceWidth = s), (c.leftSideBearing = o);
        }
      },
      make: function (e) {
        for (var t = new ci.Table("hmtx", []), n = 0; n < e.length; n += 1) {
          var i = e.get(n),
            r = i.advanceWidth || 0,
            s = i.leftSideBearing || 0;
          t.fields.push({
            name: "advanceWidth_" + n,
            type: "USHORT",
            value: r,
          }),
            t.fields.push({
              name: "leftSideBearing_" + n,
              type: "SHORT",
              value: s,
            });
        }
        return t;
      },
    },
    Ei = {
      make: function (e) {
        for (
          var t = new ci.Table("ltag", [
              { name: "version", type: "ULONG", value: 1 },
              { name: "flags", type: "ULONG", value: 0 },
              { name: "numTags", type: "ULONG", value: e.length },
            ]),
            n = "",
            i = 12 + 4 * e.length,
            r = 0;
          r < e.length;
          ++r
        ) {
          var s = n.indexOf(e[r]);
          0 > s && ((s = n.length), (n += e[r])),
            t.fields.push({
              name: "offset " + r,
              type: "USHORT",
              value: i + s,
            }),
            t.fields.push({
              name: "length " + r,
              type: "USHORT",
              value: e[r].length,
            });
        }
        return (
          t.fields.push({ name: "stringPool", type: "CHARARRAY", value: n }), t
        );
      },
      parse: function (e, t) {
        var n = new di.Parser(e, t),
          i = n.parseULong();
        ei.argument(1 === i, "Unsupported ltag table version."),
          n.skip("uLong", 1);
        for (var r = n.parseULong(), s = [], o = 0; r > o; o++) {
          for (
            var a = "", l = t + n.parseUShort(), c = n.parseUShort(), u = l;
            l + c > u;
            ++u
          )
            a += String.fromCharCode(e.getInt8(u));
          s.push(a);
        }
        return s;
      },
    },
    ki = {
      parse: function (e, t) {
        var n = {},
          i = new di.Parser(e, t);
        return (
          (n.version = i.parseVersion()),
          (n.numGlyphs = i.parseUShort()),
          1 === n.version &&
            ((n.maxPoints = i.parseUShort()),
            (n.maxContours = i.parseUShort()),
            (n.maxCompositePoints = i.parseUShort()),
            (n.maxCompositeContours = i.parseUShort()),
            (n.maxZones = i.parseUShort()),
            (n.maxTwilightPoints = i.parseUShort()),
            (n.maxStorage = i.parseUShort()),
            (n.maxFunctionDefs = i.parseUShort()),
            (n.maxInstructionDefs = i.parseUShort()),
            (n.maxStackElements = i.parseUShort()),
            (n.maxSizeOfInstructions = i.parseUShort()),
            (n.maxComponentElements = i.parseUShort()),
            (n.maxComponentDepth = i.parseUShort())),
          n
        );
      },
      make: function (e) {
        return new ci.Table("maxp", [
          { name: "version", type: "FIXED", value: 20480 },
          { name: "numGlyphs", type: "USHORT", value: e },
        ]);
      },
    },
    Pi = [
      "copyright",
      "fontFamily",
      "fontSubfamily",
      "uniqueID",
      "fullName",
      "version",
      "postScriptName",
      "trademark",
      "manufacturer",
      "designer",
      "description",
      "manufacturerURL",
      "designerURL",
      "license",
      "licenseURL",
      "reserved",
      "preferredFamily",
      "preferredSubfamily",
      "compatibleFullName",
      "sampleText",
      "postScriptFindFontName",
      "wwsFamily",
      "wwsSubfamily",
    ],
    Ii = {
      0: "en",
      1: "fr",
      2: "de",
      3: "it",
      4: "nl",
      5: "sv",
      6: "es",
      7: "da",
      8: "pt",
      9: "no",
      10: "he",
      11: "ja",
      12: "ar",
      13: "fi",
      14: "el",
      15: "is",
      16: "mt",
      17: "tr",
      18: "hr",
      19: "zh-Hant",
      20: "ur",
      21: "hi",
      22: "th",
      23: "ko",
      24: "lt",
      25: "pl",
      26: "hu",
      27: "es",
      28: "lv",
      29: "se",
      30: "fo",
      31: "fa",
      32: "ru",
      33: "zh",
      34: "nl-BE",
      35: "ga",
      36: "sq",
      37: "ro",
      38: "cz",
      39: "sk",
      40: "si",
      41: "yi",
      42: "sr",
      43: "mk",
      44: "bg",
      45: "uk",
      46: "be",
      47: "uz",
      48: "kk",
      49: "az-Cyrl",
      50: "az-Arab",
      51: "hy",
      52: "ka",
      53: "mo",
      54: "ky",
      55: "tg",
      56: "tk",
      57: "mn-CN",
      58: "mn",
      59: "ps",
      60: "ks",
      61: "ku",
      62: "sd",
      63: "bo",
      64: "ne",
      65: "sa",
      66: "mr",
      67: "bn",
      68: "as",
      69: "gu",
      70: "pa",
      71: "or",
      72: "ml",
      73: "kn",
      74: "ta",
      75: "te",
      76: "si",
      77: "my",
      78: "km",
      79: "lo",
      80: "vi",
      81: "id",
      82: "tl",
      83: "ms",
      84: "ms-Arab",
      85: "am",
      86: "ti",
      87: "om",
      88: "so",
      89: "sw",
      90: "rw",
      91: "rn",
      92: "ny",
      93: "mg",
      94: "eo",
      128: "cy",
      129: "eu",
      130: "ca",
      131: "la",
      132: "qu",
      133: "gn",
      134: "ay",
      135: "tt",
      136: "ug",
      137: "dz",
      138: "jv",
      139: "su",
      140: "gl",
      141: "af",
      142: "br",
      143: "iu",
      144: "gd",
      145: "gv",
      146: "ga",
      147: "to",
      148: "el-polyton",
      149: "kl",
      150: "az",
      151: "nn",
    },
    Ai = {
      0: 0,
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0,
      8: 0,
      9: 0,
      10: 5,
      11: 1,
      12: 4,
      13: 0,
      14: 6,
      15: 0,
      16: 0,
      17: 0,
      18: 0,
      19: 2,
      20: 4,
      21: 9,
      22: 21,
      23: 3,
      24: 29,
      25: 29,
      26: 29,
      27: 29,
      28: 29,
      29: 0,
      30: 0,
      31: 4,
      32: 7,
      33: 25,
      34: 0,
      35: 0,
      36: 0,
      37: 0,
      38: 29,
      39: 29,
      40: 0,
      41: 5,
      42: 7,
      43: 7,
      44: 7,
      45: 7,
      46: 7,
      47: 7,
      48: 7,
      49: 7,
      50: 4,
      51: 24,
      52: 23,
      53: 7,
      54: 7,
      55: 7,
      56: 7,
      57: 27,
      58: 7,
      59: 4,
      60: 4,
      61: 4,
      62: 4,
      63: 26,
      64: 9,
      65: 9,
      66: 9,
      67: 13,
      68: 13,
      69: 11,
      70: 10,
      71: 12,
      72: 17,
      73: 16,
      74: 14,
      75: 15,
      76: 18,
      77: 19,
      78: 20,
      79: 22,
      80: 30,
      81: 0,
      82: 0,
      83: 0,
      84: 4,
      85: 28,
      86: 28,
      87: 28,
      88: 0,
      89: 0,
      90: 0,
      91: 0,
      92: 0,
      93: 0,
      94: 0,
      128: 0,
      129: 0,
      130: 0,
      131: 0,
      132: 0,
      133: 0,
      134: 0,
      135: 7,
      136: 4,
      137: 26,
      138: 0,
      139: 0,
      140: 0,
      141: 0,
      142: 0,
      143: 28,
      144: 0,
      145: 0,
      146: 0,
      147: 0,
      148: 6,
      149: 0,
      150: 0,
      151: 0,
    },
    Oi = {
      1078: "af",
      1052: "sq",
      1156: "gsw",
      1118: "am",
      5121: "ar-DZ",
      15361: "ar-BH",
      3073: "ar",
      2049: "ar-IQ",
      11265: "ar-JO",
      13313: "ar-KW",
      12289: "ar-LB",
      4097: "ar-LY",
      6145: "ary",
      8193: "ar-OM",
      16385: "ar-QA",
      1025: "ar-SA",
      10241: "ar-SY",
      7169: "aeb",
      14337: "ar-AE",
      9217: "ar-YE",
      1067: "hy",
      1101: "as",
      2092: "az-Cyrl",
      1068: "az",
      1133: "ba",
      1069: "eu",
      1059: "be",
      2117: "bn",
      1093: "bn-IN",
      8218: "bs-Cyrl",
      5146: "bs",
      1150: "br",
      1026: "bg",
      1027: "ca",
      3076: "zh-HK",
      5124: "zh-MO",
      2052: "zh",
      4100: "zh-SG",
      1028: "zh-TW",
      1155: "co",
      1050: "hr",
      4122: "hr-BA",
      1029: "cs",
      1030: "da",
      1164: "prs",
      1125: "dv",
      2067: "nl-BE",
      1043: "nl",
      3081: "en-AU",
      10249: "en-BZ",
      4105: "en-CA",
      9225: "en-029",
      16393: "en-IN",
      6153: "en-IE",
      8201: "en-JM",
      17417: "en-MY",
      5129: "en-NZ",
      13321: "en-PH",
      18441: "en-SG",
      7177: "en-ZA",
      11273: "en-TT",
      2057: "en-GB",
      1033: "en",
      12297: "en-ZW",
      1061: "et",
      1080: "fo",
      1124: "fil",
      1035: "fi",
      2060: "fr-BE",
      3084: "fr-CA",
      1036: "fr",
      5132: "fr-LU",
      6156: "fr-MC",
      4108: "fr-CH",
      1122: "fy",
      1110: "gl",
      1079: "ka",
      3079: "de-AT",
      1031: "de",
      5127: "de-LI",
      4103: "de-LU",
      2055: "de-CH",
      1032: "el",
      1135: "kl",
      1095: "gu",
      1128: "ha",
      1037: "he",
      1081: "hi",
      1038: "hu",
      1039: "is",
      1136: "ig",
      1057: "id",
      1117: "iu",
      2141: "iu-Latn",
      2108: "ga",
      1076: "xh",
      1077: "zu",
      1040: "it",
      2064: "it-CH",
      1041: "ja",
      1099: "kn",
      1087: "kk",
      1107: "km",
      1158: "quc",
      1159: "rw",
      1089: "sw",
      1111: "kok",
      1042: "ko",
      1088: "ky",
      1108: "lo",
      1062: "lv",
      1063: "lt",
      2094: "dsb",
      1134: "lb",
      1071: "mk",
      2110: "ms-BN",
      1086: "ms",
      1100: "ml",
      1082: "mt",
      1153: "mi",
      1146: "arn",
      1102: "mr",
      1148: "moh",
      1104: "mn",
      2128: "mn-CN",
      1121: "ne",
      1044: "nb",
      2068: "nn",
      1154: "oc",
      1096: "or",
      1123: "ps",
      1045: "pl",
      1046: "pt",
      2070: "pt-PT",
      1094: "pa",
      1131: "qu-BO",
      2155: "qu-EC",
      3179: "qu",
      1048: "ro",
      1047: "rm",
      1049: "ru",
      9275: "smn",
      4155: "smj-NO",
      5179: "smj",
      3131: "se-FI",
      1083: "se",
      2107: "se-SE",
      8251: "sms",
      6203: "sma-NO",
      7227: "sms",
      1103: "sa",
      7194: "sr-Cyrl-BA",
      3098: "sr",
      6170: "sr-Latn-BA",
      2074: "sr-Latn",
      1132: "nso",
      1074: "tn",
      1115: "si",
      1051: "sk",
      1060: "sl",
      11274: "es-AR",
      16394: "es-BO",
      13322: "es-CL",
      9226: "es-CO",
      5130: "es-CR",
      7178: "es-DO",
      12298: "es-EC",
      17418: "es-SV",
      4106: "es-GT",
      18442: "es-HN",
      2058: "es-MX",
      19466: "es-NI",
      6154: "es-PA",
      15370: "es-PY",
      10250: "es-PE",
      20490: "es-PR",
      3082: "es",
      1034: "es",
      21514: "es-US",
      14346: "es-UY",
      8202: "es-VE",
      2077: "sv-FI",
      1053: "sv",
      1114: "syr",
      1064: "tg",
      2143: "tzm",
      1097: "ta",
      1092: "tt",
      1098: "te",
      1054: "th",
      1105: "bo",
      1055: "tr",
      1090: "tk",
      1152: "ug",
      1058: "uk",
      1070: "hsb",
      1056: "ur",
      2115: "uz-Cyrl",
      1091: "uz",
      1066: "vi",
      1106: "cy",
      1160: "wo",
      1157: "sah",
      1144: "ii",
      1130: "yo",
    },
    Di = "utf-16",
    Mi = {
      0: "macintosh",
      1: "x-mac-japanese",
      2: "x-mac-chinesetrad",
      3: "x-mac-korean",
      6: "x-mac-greek",
      7: "x-mac-cyrillic",
      9: "x-mac-devanagai",
      10: "x-mac-gurmukhi",
      11: "x-mac-gujarati",
      12: "x-mac-oriya",
      13: "x-mac-bengali",
      14: "x-mac-tamil",
      15: "x-mac-telugu",
      16: "x-mac-kannada",
      17: "x-mac-malayalam",
      18: "x-mac-sinhalese",
      19: "x-mac-burmese",
      20: "x-mac-khmer",
      21: "x-mac-thai",
      22: "x-mac-lao",
      23: "x-mac-georgian",
      24: "x-mac-armenian",
      25: "x-mac-chinesesimp",
      26: "x-mac-tibetan",
      27: "x-mac-mongolian",
      28: "x-mac-ethiopic",
      29: "x-mac-ce",
      30: "x-mac-vietnamese",
      31: "x-mac-extarabic",
    },
    Ri = {
      15: "x-mac-icelandic",
      17: "x-mac-turkish",
      18: "x-mac-croatian",
      24: "x-mac-ce",
      25: "x-mac-ce",
      26: "x-mac-ce",
      27: "x-mac-ce",
      28: "x-mac-ce",
      30: "x-mac-icelandic",
      37: "x-mac-romanian",
      38: "x-mac-ce",
      39: "x-mac-ce",
      40: "x-mac-ce",
      143: "x-mac-inuit",
      146: "x-mac-gaelic",
    },
    Li = {
      parse: function (e, t, n) {
        for (
          var i = {},
            r = new di.Parser(e, t),
            s = r.parseUShort(),
            o = r.parseUShort(),
            a = r.offset + r.parseUShort(),
            l = 0;
          o > l;
          l++
        ) {
          var c = r.parseUShort(),
            u = r.parseUShort(),
            h = r.parseUShort(),
            d = r.parseUShort(),
            p = Pi[d] || d,
            f = r.parseUShort(),
            m = r.parseUShort(),
            g = nt(c, h, n),
            v = it(c, u, h);
          if (void 0 !== v && void 0 !== g) {
            var _ = void 0;
            if (
              (_ =
                v === Di ? ni.UTF16(e, a + m, f) : ni.MACSTRING(e, a + m, f, v))
            ) {
              var y = i[p];
              void 0 === y && (y = i[p] = {}), (y[g] = _);
            }
          }
        }
        return 1 === s && r.parseUShort(), i;
      },
      make: function (e, t) {
        var n,
          i = [],
          r = {},
          s = rt(Pi);
        for (var o in e) {
          var a = s[o];
          if ((void 0 === a && (a = o), (n = parseInt(a)), isNaN(n)))
            throw new Error(
              'Name table entry "' +
                o +
                '" does not exist, see nameTableNames for complete list.'
            );
          (r[n] = e[o]), i.push(n);
        }
        for (
          var l = rt(Ii), c = rt(Oi), u = [], h = [], d = 0;
          d < i.length;
          d++
        ) {
          var p = r[(n = i[d])];
          for (var f in p) {
            var m = p[f],
              g = 1,
              v = l[f],
              _ = Ai[v],
              y = it(g, _, v),
              b = ii.MACSTRING(m, y);
            void 0 === b &&
              ((g = 0),
              (v = t.indexOf(f)) < 0 && ((v = t.length), t.push(f)),
              (_ = 4),
              (b = ii.UTF16(m)));
            var w = ot(b, h);
            u.push(st(g, _, v, n, b.length, w));
            var x = c[f];
            if (void 0 !== x) {
              var C = ii.UTF16(m),
                T = ot(C, h);
              u.push(st(3, 1, x, n, C.length, T));
            }
          }
        }
        u.sort(function (e, t) {
          return (
            e.platformID - t.platformID ||
            e.encodingID - t.encodingID ||
            e.languageID - t.languageID ||
            e.nameID - t.nameID
          );
        });
        for (
          var S = new ci.Table("name", [
              { name: "format", type: "USHORT", value: 0 },
              { name: "count", type: "USHORT", value: u.length },
              {
                name: "stringOffset",
                type: "USHORT",
                value: 6 + 12 * u.length,
              },
            ]),
            E = 0;
          E < u.length;
          E++
        )
          S.fields.push({ name: "record_" + E, type: "RECORD", value: u[E] });
        return S.fields.push({ name: "strings", type: "LITERAL", value: h }), S;
      },
    },
    Ni = [
      { begin: 0, end: 127 },
      { begin: 128, end: 255 },
      { begin: 256, end: 383 },
      { begin: 384, end: 591 },
      { begin: 592, end: 687 },
      { begin: 688, end: 767 },
      { begin: 768, end: 879 },
      { begin: 880, end: 1023 },
      { begin: 11392, end: 11519 },
      { begin: 1024, end: 1279 },
      { begin: 1328, end: 1423 },
      { begin: 1424, end: 1535 },
      { begin: 42240, end: 42559 },
      { begin: 1536, end: 1791 },
      { begin: 1984, end: 2047 },
      { begin: 2304, end: 2431 },
      { begin: 2432, end: 2559 },
      { begin: 2560, end: 2687 },
      { begin: 2688, end: 2815 },
      { begin: 2816, end: 2943 },
      { begin: 2944, end: 3071 },
      { begin: 3072, end: 3199 },
      { begin: 3200, end: 3327 },
      { begin: 3328, end: 3455 },
      { begin: 3584, end: 3711 },
      { begin: 3712, end: 3839 },
      { begin: 4256, end: 4351 },
      { begin: 6912, end: 7039 },
      { begin: 4352, end: 4607 },
      { begin: 7680, end: 7935 },
      { begin: 7936, end: 8191 },
      { begin: 8192, end: 8303 },
      { begin: 8304, end: 8351 },
      { begin: 8352, end: 8399 },
      { begin: 8400, end: 8447 },
      { begin: 8448, end: 8527 },
      { begin: 8528, end: 8591 },
      { begin: 8592, end: 8703 },
      { begin: 8704, end: 8959 },
      { begin: 8960, end: 9215 },
      { begin: 9216, end: 9279 },
      { begin: 9280, end: 9311 },
      { begin: 9312, end: 9471 },
      { begin: 9472, end: 9599 },
      { begin: 9600, end: 9631 },
      { begin: 9632, end: 9727 },
      { begin: 9728, end: 9983 },
      { begin: 9984, end: 10175 },
      { begin: 12288, end: 12351 },
      { begin: 12352, end: 12447 },
      { begin: 12448, end: 12543 },
      { begin: 12544, end: 12591 },
      { begin: 12592, end: 12687 },
      { begin: 43072, end: 43135 },
      { begin: 12800, end: 13055 },
      { begin: 13056, end: 13311 },
      { begin: 44032, end: 55215 },
      { begin: 55296, end: 57343 },
      { begin: 67840, end: 67871 },
      { begin: 19968, end: 40959 },
      { begin: 57344, end: 63743 },
      { begin: 12736, end: 12783 },
      { begin: 64256, end: 64335 },
      { begin: 64336, end: 65023 },
      { begin: 65056, end: 65071 },
      { begin: 65040, end: 65055 },
      { begin: 65104, end: 65135 },
      { begin: 65136, end: 65279 },
      { begin: 65280, end: 65519 },
      { begin: 65520, end: 65535 },
      { begin: 3840, end: 4095 },
      { begin: 1792, end: 1871 },
      { begin: 1920, end: 1983 },
      { begin: 3456, end: 3583 },
      { begin: 4096, end: 4255 },
      { begin: 4608, end: 4991 },
      { begin: 5024, end: 5119 },
      { begin: 5120, end: 5759 },
      { begin: 5760, end: 5791 },
      { begin: 5792, end: 5887 },
      { begin: 6016, end: 6143 },
      { begin: 6144, end: 6319 },
      { begin: 10240, end: 10495 },
      { begin: 40960, end: 42127 },
      { begin: 5888, end: 5919 },
      { begin: 66304, end: 66351 },
      { begin: 66352, end: 66383 },
      { begin: 66560, end: 66639 },
      { begin: 118784, end: 119039 },
      { begin: 119808, end: 120831 },
      { begin: 1044480, end: 1048573 },
      { begin: 65024, end: 65039 },
      { begin: 917504, end: 917631 },
      { begin: 6400, end: 6479 },
      { begin: 6480, end: 6527 },
      { begin: 6528, end: 6623 },
      { begin: 6656, end: 6687 },
      { begin: 11264, end: 11359 },
      { begin: 11568, end: 11647 },
      { begin: 19904, end: 19967 },
      { begin: 43008, end: 43055 },
      { begin: 65536, end: 65663 },
      { begin: 65856, end: 65935 },
      { begin: 66432, end: 66463 },
      { begin: 66464, end: 66527 },
      { begin: 66640, end: 66687 },
      { begin: 66688, end: 66735 },
      { begin: 67584, end: 67647 },
      { begin: 68096, end: 68191 },
      { begin: 119552, end: 119647 },
      { begin: 73728, end: 74751 },
      { begin: 119648, end: 119679 },
      { begin: 7040, end: 7103 },
      { begin: 7168, end: 7247 },
      { begin: 7248, end: 7295 },
      { begin: 43136, end: 43231 },
      { begin: 43264, end: 43311 },
      { begin: 43312, end: 43359 },
      { begin: 43520, end: 43615 },
      { begin: 65936, end: 65999 },
      { begin: 66e3, end: 66047 },
      { begin: 66208, end: 66271 },
      { begin: 127024, end: 127135 },
    ],
    Ui = {
      parse: function (e, t) {
        var n = {},
          i = new di.Parser(e, t);
        (n.version = i.parseUShort()),
          (n.xAvgCharWidth = i.parseShort()),
          (n.usWeightClass = i.parseUShort()),
          (n.usWidthClass = i.parseUShort()),
          (n.fsType = i.parseUShort()),
          (n.ySubscriptXSize = i.parseShort()),
          (n.ySubscriptYSize = i.parseShort()),
          (n.ySubscriptXOffset = i.parseShort()),
          (n.ySubscriptYOffset = i.parseShort()),
          (n.ySuperscriptXSize = i.parseShort()),
          (n.ySuperscriptYSize = i.parseShort()),
          (n.ySuperscriptXOffset = i.parseShort()),
          (n.ySuperscriptYOffset = i.parseShort()),
          (n.yStrikeoutSize = i.parseShort()),
          (n.yStrikeoutPosition = i.parseShort()),
          (n.sFamilyClass = i.parseShort()),
          (n.panose = []);
        for (var r = 0; 10 > r; r++) n.panose[r] = i.parseByte();
        return (
          (n.ulUnicodeRange1 = i.parseULong()),
          (n.ulUnicodeRange2 = i.parseULong()),
          (n.ulUnicodeRange3 = i.parseULong()),
          (n.ulUnicodeRange4 = i.parseULong()),
          (n.achVendID = String.fromCharCode(
            i.parseByte(),
            i.parseByte(),
            i.parseByte(),
            i.parseByte()
          )),
          (n.fsSelection = i.parseUShort()),
          (n.usFirstCharIndex = i.parseUShort()),
          (n.usLastCharIndex = i.parseUShort()),
          (n.sTypoAscender = i.parseShort()),
          (n.sTypoDescender = i.parseShort()),
          (n.sTypoLineGap = i.parseShort()),
          (n.usWinAscent = i.parseUShort()),
          (n.usWinDescent = i.parseUShort()),
          1 <= n.version &&
            ((n.ulCodePageRange1 = i.parseULong()),
            (n.ulCodePageRange2 = i.parseULong())),
          2 <= n.version &&
            ((n.sxHeight = i.parseShort()),
            (n.sCapHeight = i.parseShort()),
            (n.usDefaultChar = i.parseUShort()),
            (n.usBreakChar = i.parseUShort()),
            (n.usMaxContent = i.parseUShort())),
          n
        );
      },
      make: function (e) {
        return new ci.Table(
          "OS/2",
          [
            { name: "version", type: "USHORT", value: 3 },
            { name: "xAvgCharWidth", type: "SHORT", value: 0 },
            { name: "usWeightClass", type: "USHORT", value: 0 },
            { name: "usWidthClass", type: "USHORT", value: 0 },
            { name: "fsType", type: "USHORT", value: 0 },
            { name: "ySubscriptXSize", type: "SHORT", value: 650 },
            { name: "ySubscriptYSize", type: "SHORT", value: 699 },
            { name: "ySubscriptXOffset", type: "SHORT", value: 0 },
            { name: "ySubscriptYOffset", type: "SHORT", value: 140 },
            { name: "ySuperscriptXSize", type: "SHORT", value: 650 },
            { name: "ySuperscriptYSize", type: "SHORT", value: 699 },
            { name: "ySuperscriptXOffset", type: "SHORT", value: 0 },
            { name: "ySuperscriptYOffset", type: "SHORT", value: 479 },
            { name: "yStrikeoutSize", type: "SHORT", value: 49 },
            { name: "yStrikeoutPosition", type: "SHORT", value: 258 },
            { name: "sFamilyClass", type: "SHORT", value: 0 },
            { name: "bFamilyType", type: "BYTE", value: 0 },
            { name: "bSerifStyle", type: "BYTE", value: 0 },
            { name: "bWeight", type: "BYTE", value: 0 },
            { name: "bProportion", type: "BYTE", value: 0 },
            { name: "bContrast", type: "BYTE", value: 0 },
            { name: "bStrokeVariation", type: "BYTE", value: 0 },
            { name: "bArmStyle", type: "BYTE", value: 0 },
            { name: "bLetterform", type: "BYTE", value: 0 },
            { name: "bMidline", type: "BYTE", value: 0 },
            { name: "bXHeight", type: "BYTE", value: 0 },
            { name: "ulUnicodeRange1", type: "ULONG", value: 0 },
            { name: "ulUnicodeRange2", type: "ULONG", value: 0 },
            { name: "ulUnicodeRange3", type: "ULONG", value: 0 },
            { name: "ulUnicodeRange4", type: "ULONG", value: 0 },
            { name: "achVendID", type: "CHARARRAY", value: "XXXX" },
            { name: "fsSelection", type: "USHORT", value: 0 },
            { name: "usFirstCharIndex", type: "USHORT", value: 0 },
            { name: "usLastCharIndex", type: "USHORT", value: 0 },
            { name: "sTypoAscender", type: "SHORT", value: 0 },
            { name: "sTypoDescender", type: "SHORT", value: 0 },
            { name: "sTypoLineGap", type: "SHORT", value: 0 },
            { name: "usWinAscent", type: "USHORT", value: 0 },
            { name: "usWinDescent", type: "USHORT", value: 0 },
            { name: "ulCodePageRange1", type: "ULONG", value: 0 },
            { name: "ulCodePageRange2", type: "ULONG", value: 0 },
            { name: "sxHeight", type: "SHORT", value: 0 },
            { name: "sCapHeight", type: "SHORT", value: 0 },
            { name: "usDefaultChar", type: "USHORT", value: 0 },
            { name: "usBreakChar", type: "USHORT", value: 0 },
            { name: "usMaxContext", type: "USHORT", value: 0 },
          ],
          e
        );
      },
      unicodeRanges: Ni,
      getUnicodeRange: function (e) {
        for (var t = 0; t < Ni.length; t += 1) {
          var n = Ni[t];
          if (e >= n.begin && e < n.end) return t;
        }
        return -1;
      },
    },
    Bi = {
      parse: function (e, t) {
        var n = {},
          i = new di.Parser(e, t);
        switch (
          ((n.version = i.parseVersion()),
          (n.italicAngle = i.parseFixed()),
          (n.underlinePosition = i.parseShort()),
          (n.underlineThickness = i.parseShort()),
          (n.isFixedPitch = i.parseULong()),
          (n.minMemType42 = i.parseULong()),
          (n.maxMemType42 = i.parseULong()),
          (n.minMemType1 = i.parseULong()),
          (n.maxMemType1 = i.parseULong()),
          n.version)
        ) {
          case 1:
            n.names = vi.slice();
            break;
          case 2:
            (n.numberOfGlyphs = i.parseUShort()),
              (n.glyphNameIndex = new Array(n.numberOfGlyphs));
            for (var r = 0; r < n.numberOfGlyphs; r++)
              n.glyphNameIndex[r] = i.parseUShort();
            n.names = [];
            for (var s = 0; s < n.numberOfGlyphs; s++)
              if (n.glyphNameIndex[s] >= vi.length) {
                var o = i.parseChar();
                n.names.push(i.parseString(o));
              }
            break;
          case 2.5:
            (n.numberOfGlyphs = i.parseUShort()),
              (n.offset = new Array(n.numberOfGlyphs));
            for (var a = 0; a < n.numberOfGlyphs; a++)
              n.offset[a] = i.parseChar();
        }
        return n;
      },
      make: function () {
        return new ci.Table("post", [
          { name: "version", type: "FIXED", value: 196608 },
          { name: "italicAngle", type: "FIXED", value: 0 },
          { name: "underlinePosition", type: "FWORD", value: 0 },
          { name: "underlineThickness", type: "FWORD", value: 0 },
          { name: "isFixedPitch", type: "ULONG", value: 0 },
          { name: "minMemType42", type: "ULONG", value: 0 },
          { name: "maxMemType42", type: "ULONG", value: 0 },
          { name: "minMemType1", type: "ULONG", value: 0 },
          { name: "maxMemType1", type: "ULONG", value: 0 },
        ]);
      },
    },
    Fi = new Array(9);
  (Fi[1] = function () {
    var e = this.offset + this.relativeOffset,
      t = this.parseUShort();
    return 1 === t
      ? {
          substFormat: 1,
          coverage: this.parsePointer(M.coverage),
          deltaGlyphId: this.parseUShort(),
        }
      : 2 === t
      ? {
          substFormat: 2,
          coverage: this.parsePointer(M.coverage),
          substitute: this.parseOffset16List(),
        }
      : void ei.assert(
          !1,
          "0x" + e.toString(16) + ": lookup type 1 format must be 1 or 2."
        );
  }),
    (Fi[2] = function () {
      var e = this.parseUShort();
      return (
        ei.argument(
          1 === e,
          "GSUB Multiple Substitution Subtable identifier-format must be 1"
        ),
        {
          substFormat: e,
          coverage: this.parsePointer(M.coverage),
          sequences: this.parseListOfLists(),
        }
      );
    }),
    (Fi[3] = function () {
      var e = this.parseUShort();
      return (
        ei.argument(
          1 === e,
          "GSUB Alternate Substitution Subtable identifier-format must be 1"
        ),
        {
          substFormat: e,
          coverage: this.parsePointer(M.coverage),
          alternateSets: this.parseListOfLists(),
        }
      );
    }),
    (Fi[4] = function () {
      var e = this.parseUShort();
      return (
        ei.argument(1 === e, "GSUB ligature table identifier-format must be 1"),
        {
          substFormat: e,
          coverage: this.parsePointer(M.coverage),
          ligatureSets: this.parseListOfLists(function () {
            return {
              ligGlyph: this.parseUShort(),
              components: this.parseUShortList(this.parseUShort() - 1),
            };
          }),
        }
      );
    });
  var ji = { sequenceIndex: M.uShort, lookupListIndex: M.uShort };
  (Fi[5] = function () {
    var e = this.offset + this.relativeOffset,
      t = this.parseUShort();
    if (1 === t)
      return {
        substFormat: t,
        coverage: this.parsePointer(M.coverage),
        ruleSets: this.parseListOfLists(function () {
          var e = this.parseUShort(),
            t = this.parseUShort();
          return {
            input: this.parseUShortList(e - 1),
            lookupRecords: this.parseRecordList(t, ji),
          };
        }),
      };
    if (2 === t)
      return {
        substFormat: t,
        coverage: this.parsePointer(M.coverage),
        classDef: this.parsePointer(M.classDef),
        classSets: this.parseListOfLists(function () {
          var e = this.parseUShort(),
            t = this.parseUShort();
          return {
            classes: this.parseUShortList(e - 1),
            lookupRecords: this.parseRecordList(t, ji),
          };
        }),
      };
    if (3 === t) {
      var n = this.parseUShort(),
        i = this.parseUShort();
      return {
        substFormat: t,
        coverages: this.parseList(n, M.pointer(M.coverage)),
        lookupRecords: this.parseRecordList(i, ji),
      };
    }
    ei.assert(
      !1,
      "0x" + e.toString(16) + ": lookup type 5 format must be 1, 2 or 3."
    );
  }),
    (Fi[6] = function () {
      var e = this.offset + this.relativeOffset,
        t = this.parseUShort();
      return 1 === t
        ? {
            substFormat: 1,
            coverage: this.parsePointer(M.coverage),
            chainRuleSets: this.parseListOfLists(function () {
              return {
                backtrack: this.parseUShortList(),
                input: this.parseUShortList(this.parseShort() - 1),
                lookahead: this.parseUShortList(),
                lookupRecords: this.parseRecordList(ji),
              };
            }),
          }
        : 2 === t
        ? {
            substFormat: 2,
            coverage: this.parsePointer(M.coverage),
            backtrackClassDef: this.parsePointer(M.classDef),
            inputClassDef: this.parsePointer(M.classDef),
            lookaheadClassDef: this.parsePointer(M.classDef),
            chainClassSet: this.parseListOfLists(function () {
              return {
                backtrack: this.parseUShortList(),
                input: this.parseUShortList(this.parseShort() - 1),
                lookahead: this.parseUShortList(),
                lookupRecords: this.parseRecordList(ji),
              };
            }),
          }
        : 3 === t
        ? {
            substFormat: 3,
            backtrackCoverage: this.parseList(M.pointer(M.coverage)),
            inputCoverage: this.parseList(M.pointer(M.coverage)),
            lookaheadCoverage: this.parseList(M.pointer(M.coverage)),
            lookupRecords: this.parseRecordList(ji),
          }
        : void ei.assert(
            !1,
            "0x" + e.toString(16) + ": lookup type 6 format must be 1, 2 or 3."
          );
    }),
    (Fi[7] = function () {
      var e = this.parseUShort();
      ei.argument(
        1 === e,
        "GSUB Extension Substitution subtable identifier-format must be 1"
      );
      var t = this.parseUShort(),
        n = new M(this.data, this.offset + this.parseULong());
      return { substFormat: 1, lookupType: t, extension: Fi[t].call(n) };
    }),
    (Fi[8] = function () {
      var e = this.parseUShort();
      return (
        ei.argument(
          1 === e,
          "GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"
        ),
        {
          substFormat: e,
          coverage: this.parsePointer(M.coverage),
          backtrackCoverage: this.parseList(M.pointer(M.coverage)),
          lookaheadCoverage: this.parseList(M.pointer(M.coverage)),
          substitutes: this.parseUShortList(),
        }
      );
    });
  var Hi = new Array(9);
  (Hi[1] = function (e) {
    return 1 === e.substFormat
      ? new ci.Table("substitutionTable", [
          { name: "substFormat", type: "USHORT", value: 1 },
          {
            name: "coverage",
            type: "TABLE",
            value: new ci.Coverage(e.coverage),
          },
          { name: "deltaGlyphID", type: "USHORT", value: e.deltaGlyphId },
        ])
      : new ci.Table(
          "substitutionTable",
          [
            { name: "substFormat", type: "USHORT", value: 2 },
            {
              name: "coverage",
              type: "TABLE",
              value: new ci.Coverage(e.coverage),
            },
          ].concat(ci.ushortList("substitute", e.substitute))
        );
  }),
    (Hi[3] = function (e) {
      return (
        ei.assert(1 === e.substFormat, "Lookup type 3 substFormat must be 1."),
        new ci.Table(
          "substitutionTable",
          [
            { name: "substFormat", type: "USHORT", value: 1 },
            {
              name: "coverage",
              type: "TABLE",
              value: new ci.Coverage(e.coverage),
            },
          ].concat(
            ci.tableList("altSet", e.alternateSets, function (e) {
              return new ci.Table(
                "alternateSetTable",
                ci.ushortList("alternate", e)
              );
            })
          )
        )
      );
    }),
    (Hi[4] = function (e) {
      return (
        ei.assert(1 === e.substFormat, "Lookup type 4 substFormat must be 1."),
        new ci.Table(
          "substitutionTable",
          [
            { name: "substFormat", type: "USHORT", value: 1 },
            {
              name: "coverage",
              type: "TABLE",
              value: new ci.Coverage(e.coverage),
            },
          ].concat(
            ci.tableList("ligSet", e.ligatureSets, function (e) {
              return new ci.Table(
                "ligatureSetTable",
                ci.tableList("ligature", e, function (e) {
                  return new ci.Table(
                    "ligatureTable",
                    [
                      { name: "ligGlyph", type: "USHORT", value: e.ligGlyph },
                    ].concat(
                      ci.ushortList(
                        "component",
                        e.components,
                        e.components.length + 1
                      )
                    )
                  );
                })
              );
            })
          )
        )
      );
    });
  var $i = {
      parse: function (e, t) {
        var n = new M(e, (t = t || 0)),
          i = n.parseVersion(1);
        return (
          ei.argument(1 === i || 1.1 === i, "Unsupported GSUB table version."),
          1 === i
            ? {
                version: i,
                scripts: n.parseScriptList(),
                features: n.parseFeatureList(),
                lookups: n.parseLookupList(Fi),
              }
            : {
                version: i,
                scripts: n.parseScriptList(),
                features: n.parseFeatureList(),
                lookups: n.parseLookupList(Fi),
                variations: n.parseFeatureVariationsList(),
              }
        );
      },
      make: function (e) {
        return new ci.Table("GSUB", [
          { name: "version", type: "ULONG", value: 65536 },
          {
            name: "scripts",
            type: "TABLE",
            value: new ci.ScriptList(e.scripts),
          },
          {
            name: "features",
            type: "TABLE",
            value: new ci.FeatureList(e.features),
          },
          {
            name: "lookups",
            type: "TABLE",
            value: new ci.LookupList(e.lookups, Hi),
          },
        ]);
      },
    },
    zi = {
      parse: function (e, t) {
        var n = new di.Parser(e, t),
          i = n.parseULong();
        ei.argument(1 === i, "Unsupported META table version."),
          n.parseULong(),
          n.parseULong();
        for (var r = n.parseULong(), s = {}, o = 0; r > o; o++) {
          var a = n.parseTag(),
            l = n.parseULong(),
            c = n.parseULong(),
            u = ni.UTF8(e, t + l, c);
          s[a] = u;
        }
        return s;
      },
      make: function (e) {
        var t = Object.keys(e).length,
          n = "",
          i = 16 + 12 * t,
          r = new ci.Table("meta", [
            { name: "version", type: "ULONG", value: 1 },
            { name: "flags", type: "ULONG", value: 0 },
            { name: "offset", type: "ULONG", value: i },
            { name: "numTags", type: "ULONG", value: t },
          ]);
        for (var s in e) {
          var o = n.length;
          (n += e[s]),
            r.fields.push({ name: "tag " + s, type: "TAG", value: s }),
            r.fields.push({ name: "offset " + s, type: "ULONG", value: i + o }),
            r.fields.push({
              name: "length " + s,
              type: "ULONG",
              value: e[s].length,
            });
        }
        return (
          r.fields.push({ name: "stringPool", type: "CHARARRAY", value: n }), r
        );
      },
    },
    Wi = {
      make: ut,
      fontToTable: function (e) {
        for (
          var t,
            n = [],
            i = [],
            r = [],
            s = [],
            o = [],
            a = [],
            l = [],
            c = 0,
            u = 0,
            h = 0,
            d = 0,
            p = 0,
            f = 0;
          f < e.glyphs.length;
          f += 1
        ) {
          var m = e.glyphs.get(f),
            g = 0 | m.unicode;
          if (isNaN(m.advanceWidth))
            throw new Error(
              "Glyph " + m.name + " (" + f + "): advanceWidth is not a number."
            );
          (t > g || void 0 === t) && g > 0 && (t = g), g > c && (c = g);
          var v = Ui.getUnicodeRange(g);
          if (32 > v) u |= 1 << v;
          else if (64 > v) h |= 1 << (v - 32);
          else if (96 > v) d |= 1 << (v - 64);
          else {
            if (!(123 > v))
              throw new Error(
                "Unicode ranges bits > 123 are reserved for internal usage"
              );
            p |= 1 << (v - 96);
          }
          if (".notdef" !== m.name) {
            var _ = m.getMetrics();
            n.push(_.xMin),
              i.push(_.yMin),
              r.push(_.xMax),
              s.push(_.yMax),
              a.push(_.leftSideBearing),
              l.push(_.rightSideBearing),
              o.push(m.advanceWidth);
          }
        }
        var y = {
          xMin: Math.min.apply(null, n),
          yMin: Math.min.apply(null, i),
          xMax: Math.max.apply(null, r),
          yMax: Math.max.apply(null, s),
          advanceWidthMax: Math.max.apply(null, o),
          advanceWidthAvg: (function (e) {
            for (var t = 0, n = 0; n < e.length; n += 1) t += e[n];
            return t / e.length;
          })(o),
          minLeftSideBearing: Math.min.apply(null, a),
          maxLeftSideBearing: Math.max.apply(null, a),
          minRightSideBearing: Math.min.apply(null, l),
        };
        (y.ascender = e.ascender), (y.descender = e.descender);
        var b = Ci.make({
            flags: 3,
            unitsPerEm: e.unitsPerEm,
            xMin: y.xMin,
            yMin: y.yMin,
            xMax: y.xMax,
            yMax: y.yMax,
            lowestRecPPEM: 3,
            createdTimestamp: e.createdTimestamp,
          }),
          w = Ti.make({
            ascender: y.ascender,
            descender: y.descender,
            advanceWidthMax: y.advanceWidthMax,
            minLeftSideBearing: y.minLeftSideBearing,
            minRightSideBearing: y.minRightSideBearing,
            xMaxExtent: y.maxLeftSideBearing + (y.xMax - y.xMin),
            numberOfHMetrics: e.glyphs.length,
          }),
          x = ki.make(e.glyphs.length),
          C = Ui.make({
            xAvgCharWidth: Math.round(y.advanceWidthAvg),
            usWeightClass: e.tables.os2.usWeightClass,
            usWidthClass: e.tables.os2.usWidthClass,
            usFirstCharIndex: t,
            usLastCharIndex: c,
            ulUnicodeRange1: u,
            ulUnicodeRange2: h,
            ulUnicodeRange3: d,
            ulUnicodeRange4: p,
            fsSelection: e.tables.os2.fsSelection,
            sTypoAscender: y.ascender,
            sTypoDescender: y.descender,
            sTypoLineGap: 0,
            usWinAscent: y.yMax,
            usWinDescent: Math.abs(y.yMin),
            ulCodePageRange1: 1,
            sxHeight: ht(e, "xyvw", { yMax: Math.round(y.ascender / 2) }).yMax,
            sCapHeight: ht(e, "HIKLEFJMNTZBDPRAGOQSUVWXY", y).yMax,
            usDefaultChar: e.hasChar(" ") ? 32 : 0,
            usBreakChar: e.hasChar(" ") ? 32 : 0,
          }),
          T = Si.make(e.glyphs),
          S = pi.make(e.glyphs),
          E = e.getEnglishName("fontFamily"),
          k = e.getEnglishName("fontSubfamily"),
          P = E + " " + k,
          I = e.getEnglishName("postScriptName");
        I || (I = E.replace(/\s/g, "") + "-" + k);
        var A = {};
        for (var O in e.names) A[O] = e.names[O];
        A.uniqueID ||
          (A.uniqueID = { en: e.getEnglishName("manufacturer") + ":" + P }),
          A.postScriptName || (A.postScriptName = { en: I }),
          A.preferredFamily || (A.preferredFamily = e.names.fontFamily),
          A.preferredSubfamily ||
            (A.preferredSubfamily = e.names.fontSubfamily);
        var D = [],
          M = Li.make(A, D),
          R = 0 < D.length ? Ei.make(D) : void 0,
          L = Bi.make(),
          N = xi.make(e.glyphs, {
            version: e.getEnglishName("version"),
            fullName: P,
            familyName: E,
            weightName: k,
            postScriptName: I,
            unitsPerEm: e.unitsPerEm,
            fontBBox: [0, y.yMin, y.ascender, y.advanceWidthMax],
          }),
          U =
            e.metas && 0 < Object.keys(e.metas).length
              ? zi.make(e.metas)
              : void 0,
          B = [b, w, x, C, M, S, L, N, T];
        R && B.push(R),
          e.tables.gsub && B.push($i.make(e.tables.gsub)),
          U && B.push(U);
        for (
          var F = ut(B), j = lt(F.encode()), H = F.fields, $ = !1, z = 0;
          z < H.length;
          z += 1
        )
          if ("head table" === H[z].name) {
            (H[z].value.checkSumAdjustment = 2981146554 - j), ($ = !0);
            break;
          }
        if (!$)
          throw new Error("Could not find head table with checkSum to adjust.");
        return F;
      },
      computeCheckSum: lt,
    };
  ((gt.prototype = mt.prototype =
    {
      searchTag: dt,
      binSearch: pt,
      getTable: function (e) {
        var t = this.font.tables[this.tableName];
        return (
          !t &&
            e &&
            (t = this.font.tables[this.tableName] = this.createDefaultTable()),
          t
        );
      },
      getScriptNames: function () {
        var e = this.getTable();
        return e
          ? e.scripts.map(function (e) {
              return e.tag;
            })
          : [];
      },
      getDefaultScriptName: function () {
        var e = this.getTable();
        if (e) {
          for (var t = !1, n = 0; n < e.scripts.length; n++) {
            var i = e.scripts[n].tag;
            if ("DFLT" === i) return i;
            "latn" === i && (t = !0);
          }
          return t ? "latn" : void 0;
        }
      },
      getScriptTable: function (e, t) {
        var n = this.getTable(t);
        if (n) {
          e = e || "DFLT";
          var i = n.scripts,
            r = dt(n.scripts, e);
          if (r >= 0) return i[r].script;
          if (t) {
            var s = {
              tag: e,
              script: {
                defaultLangSys: {
                  reserved: 0,
                  reqFeatureIndex: 65535,
                  featureIndexes: [],
                },
                langSysRecords: [],
              },
            };
            return i.splice(-1 - r, 0, s), s.script;
          }
        }
      },
      getLangSysTable: function (e, t, n) {
        var i = this.getScriptTable(e, n);
        if (i) {
          if (!t || "dflt" === t || "DFLT" === t) return i.defaultLangSys;
          var r = dt(i.langSysRecords, t);
          if (r >= 0) return i.langSysRecords[r].langSys;
          if (n) {
            var s = {
              tag: t,
              langSys: {
                reserved: 0,
                reqFeatureIndex: 65535,
                featureIndexes: [],
              },
            };
            return i.langSysRecords.splice(-1 - r, 0, s), s.langSys;
          }
        }
      },
      getFeatureTable: function (e, t, n, i) {
        var r = this.getLangSysTable(e, t, i);
        if (r) {
          for (
            var s,
              o = r.featureIndexes,
              a = this.font.tables[this.tableName].features,
              l = 0;
            l < o.length;
            l++
          )
            if ((s = a[o[l]]).tag === n) return s.feature;
          if (i) {
            var c = a.length;
            return (
              ei.assert(
                0 === c || n >= a[c - 1].tag,
                "Features must be added in alphabetical order."
              ),
              (s = { tag: n, feature: { params: 0, lookupListIndexes: [] } }),
              a.push(s),
              o.push(c),
              s.feature
            );
          }
        }
      },
      getLookupTables: function (e, t, n, i, r) {
        var s = this.getFeatureTable(e, t, n, r),
          o = [];
        if (s) {
          for (
            var a,
              l = s.lookupListIndexes,
              c = this.font.tables[this.tableName].lookups,
              u = 0;
            u < l.length;
            u++
          )
            (a = c[l[u]]).lookupType === i && o.push(a);
          if (0 === o.length && r) {
            a = {
              lookupType: i,
              lookupFlag: 0,
              subtables: [],
              markFilteringSet: void 0,
            };
            var h = c.length;
            return c.push(a), l.push(h), [a];
          }
        }
        return o;
      },
      getGlyphClass: function (e, t) {
        switch (e.format) {
          case 1:
            return e.startGlyph <= t && t < e.startGlyph + e.classes.length
              ? e.classes[t - e.startGlyph]
              : 0;
          case 2:
            var n = ft(e.ranges, t);
            return n ? n.classId : 0;
        }
      },
      getCoverageIndex: function (e, t) {
        switch (e.format) {
          case 1:
            var n = pt(e.glyphs, t);
            return n >= 0 ? n : -1;
          case 2:
            var i = ft(e.ranges, t);
            return i ? i.index + t - i.start : -1;
        }
      },
      expandCoverage: function (e) {
        if (1 === e.format) return e.glyphs;
        for (var t = [], n = e.ranges, i = 0; i < n.length; i++)
          for (var r = n[i], s = r.start, o = r.end, a = s; o >= a; a++)
            t.push(a);
        return t;
      },
    }).init = function () {
    var e = this.getDefaultScriptName();
    this.defaultKerningTables = this.getKerningTables(e);
  }),
    (gt.prototype.getKerningValue = function (e, t, n) {
      for (var i = 0; i < e.length; i++)
        for (var r = e[i].subtables, s = 0; s < r.length; s++) {
          var o = r[s],
            a = this.getCoverageIndex(o.coverage, t);
          if (!(0 > a))
            switch (o.posFormat) {
              case 1:
                for (var l = o.pairSets[a], c = 0; c < l.length; c++) {
                  var u = l[c];
                  if (u.secondGlyph === n)
                    return (u.value1 && u.value1.xAdvance) || 0;
                }
                break;
              case 2:
                var h = this.getGlyphClass(o.classDef1, t),
                  d = this.getGlyphClass(o.classDef2, n),
                  p = o.classRecords[h][d];
                return (p.value1 && p.value1.xAdvance) || 0;
            }
        }
      return 0;
    }),
    (gt.prototype.getKerningTables = function (e, t) {
      return this.font.tables.gpos
        ? this.getLookupTables(e, t, "kern", 2)
        : void 0;
    }),
    ((vt.prototype = mt.prototype).createDefaultTable = function () {
      return {
        version: 1,
        scripts: [
          {
            tag: "DFLT",
            script: {
              defaultLangSys: {
                reserved: 0,
                reqFeatureIndex: 65535,
                featureIndexes: [],
              },
              langSysRecords: [],
            },
          },
        ],
        features: [],
        lookups: [],
      };
    }),
    (vt.prototype.getSingle = function (e, t, n) {
      for (
        var i = [], r = this.getLookupTables(t, n, e, 1), s = 0;
        s < r.length;
        s++
      )
        for (var o = r[s].subtables, a = 0; a < o.length; a++) {
          var l = o[a],
            c = this.expandCoverage(l.coverage),
            u = void 0;
          if (1 === l.substFormat) {
            var h = l.deltaGlyphId;
            for (u = 0; u < c.length; u++) {
              var d = c[u];
              i.push({ sub: d, by: d + h });
            }
          } else {
            var p = l.substitute;
            for (u = 0; u < c.length; u++) i.push({ sub: c[u], by: p[u] });
          }
        }
      return i;
    }),
    (vt.prototype.getAlternates = function (e, t, n) {
      for (
        var i = [], r = this.getLookupTables(t, n, e, 3), s = 0;
        s < r.length;
        s++
      )
        for (var o = r[s].subtables, a = 0; a < o.length; a++)
          for (
            var l = o[a],
              c = this.expandCoverage(l.coverage),
              u = l.alternateSets,
              h = 0;
            h < c.length;
            h++
          )
            i.push({ sub: c[h], by: u[h] });
      return i;
    }),
    (vt.prototype.getLigatures = function (e, t, n) {
      for (
        var i = [], r = this.getLookupTables(t, n, e, 4), s = 0;
        s < r.length;
        s++
      )
        for (var o = r[s].subtables, a = 0; a < o.length; a++)
          for (
            var l = o[a],
              c = this.expandCoverage(l.coverage),
              u = l.ligatureSets,
              h = 0;
            h < c.length;
            h++
          )
            for (var d = c[h], p = u[h], f = 0; f < p.length; f++) {
              var m = p[f];
              i.push({ sub: [d].concat(m.components), by: m.ligGlyph });
            }
      return i;
    }),
    (vt.prototype.addSingle = function (e, t, n, i) {
      var r = yt(this.getLookupTables(n, i, e, 1, !0)[0], 2, {
        substFormat: 2,
        coverage: { format: 1, glyphs: [] },
        substitute: [],
      });
      ei.assert(
        1 === r.coverage.format,
        "Ligature: unable to modify coverage table format " + r.coverage.format
      );
      var s = t.sub,
        o = this.binSearch(r.coverage.glyphs, s);
      0 > o &&
        ((o = -1 - o),
        r.coverage.glyphs.splice(o, 0, s),
        r.substitute.splice(o, 0, 0)),
        (r.substitute[o] = t.by);
    }),
    (vt.prototype.addAlternate = function (e, t, n, i) {
      var r = yt(this.getLookupTables(n, i, e, 3, !0)[0], 1, {
        substFormat: 1,
        coverage: { format: 1, glyphs: [] },
        alternateSets: [],
      });
      ei.assert(
        1 === r.coverage.format,
        "Ligature: unable to modify coverage table format " + r.coverage.format
      );
      var s = t.sub,
        o = this.binSearch(r.coverage.glyphs, s);
      0 > o &&
        ((o = -1 - o),
        r.coverage.glyphs.splice(o, 0, s),
        r.alternateSets.splice(o, 0, 0)),
        (r.alternateSets[o] = t.by);
    }),
    (vt.prototype.addLigature = function (e, t, n, i) {
      var r = this.getLookupTables(n, i, e, 4, !0)[0],
        s = r.subtables[0];
      s ||
        ((s = {
          substFormat: 1,
          coverage: { format: 1, glyphs: [] },
          ligatureSets: [],
        }),
        (r.subtables[0] = s)),
        ei.assert(
          1 === s.coverage.format,
          "Ligature: unable to modify coverage table format " +
            s.coverage.format
        );
      var o = t.sub[0],
        a = t.sub.slice(1),
        l = { ligGlyph: t.by, components: a },
        c = this.binSearch(s.coverage.glyphs, o);
      if (c >= 0) {
        for (var u = s.ligatureSets[c], h = 0; h < u.length; h++)
          if (_t(u[h].components, a)) return;
        u.push(l);
      } else
        (c = -1 - c),
          s.coverage.glyphs.splice(c, 0, o),
          s.ligatureSets.splice(c, 0, [l]);
    }),
    (vt.prototype.getFeature = function (e, t, n) {
      if (/ss\d\d/.test(e)) return this.getSingle(e, t, n);
      switch (e) {
        case "aalt":
        case "salt":
          return this.getSingle(e, t, n).concat(this.getAlternates(e, t, n));
        case "dlig":
        case "liga":
        case "rlig":
          return this.getLigatures(e, t, n);
      }
    }),
    (vt.prototype.add = function (e, t, n, i) {
      if (/ss\d\d/.test(e)) return this.addSingle(e, t, n, i);
      switch (e) {
        case "aalt":
        case "salt":
          return "number" == typeof t.by
            ? this.addSingle(e, t, n, i)
            : this.addAlternate(e, t, n, i);
        case "dlig":
        case "liga":
        case "rlig":
          return this.addLigature(e, t, n, i);
      }
    });
  var Gi,
    Vi,
    qi,
    Xi,
    Yi = {
      getPath: St,
      parse: function (e, t, n, i) {
        for (var r = new yi.GlyphSet(i), s = 0; s < n.length - 1; s += 1) {
          var o = n[s];
          o !== n[s + 1]
            ? r.push(s, yi.ttfGlyphLoader(i, s, Ct, e, t + o, Et))
            : r.push(s, yi.glyphLoader(i, s));
        }
        return r;
      },
    },
    Ki = function (e) {
      var t = this.srPeriod,
        n = this.srPhase,
        i = 1;
      return (
        0 > e && ((e = -e), (i = -1)),
        (e += this.srThreshold - n),
        (e = Math.trunc(e / t) * t),
        (e += n) < 0 ? n * i : e * i
      );
    },
    Ji = {
      x: 1,
      y: 0,
      axis: "x",
      distance: function (e, t, n, i) {
        return (n ? e.xo : e.x) - (i ? t.xo : t.x);
      },
      interpolate: function (e, t, n, i) {
        var r, s, o, a, l, c, u;
        return i && i !== this
          ? ((r = i.distance(e, t, !0, !0)),
            (s = i.distance(e, n, !0, !0)),
            (l = i.distance(t, t, !1, !0)),
            (c = i.distance(n, n, !1, !0)),
            0 !== (u = (o = Math.abs(r)) + (a = Math.abs(s)))
              ? Ji.setRelative(e, e, (l * a + c * o) / u, i, !0)
              : Ji.setRelative(e, e, (l + c) / 2, i, !0),
            void 0)
          : ((r = e.xo - t.xo),
            (s = e.xo - n.xo),
            (l = t.x - t.xo),
            (c = n.x - n.xo),
            0 === (u = (o = Math.abs(r)) + (a = Math.abs(s)))
              ? void (e.x = e.xo + (l + c) / 2)
              : void (e.x = e.xo + (l * a + c * o) / u));
      },
      normalSlope: Number.NEGATIVE_INFINITY,
      setRelative: function (e, t, n, i, r) {
        if (i && i !== this) {
          var s = r ? t.xo : t.x,
            o = r ? t.yo : t.y,
            a = s + n * i.x,
            l = o + n * i.y;
          e.x = a + (e.y - l) / i.normalSlope;
        } else e.x = (r ? t.xo : t.x) + n;
      },
      slope: 0,
      touch: function (e) {
        e.xTouched = !0;
      },
      touched: function (e) {
        return e.xTouched;
      },
      untouch: function (e) {
        e.xTouched = !1;
      },
    },
    Qi = {
      x: 0,
      y: 1,
      axis: "y",
      distance: function (e, t, n, i) {
        return (n ? e.yo : e.y) - (i ? t.yo : t.y);
      },
      interpolate: function (e, t, n, i) {
        var r, s, o, a, l, c, u;
        return i && i !== this
          ? ((r = i.distance(e, t, !0, !0)),
            (s = i.distance(e, n, !0, !0)),
            (l = i.distance(t, t, !1, !0)),
            (c = i.distance(n, n, !1, !0)),
            0 !== (u = (o = Math.abs(r)) + (a = Math.abs(s)))
              ? Qi.setRelative(e, e, (l * a + c * o) / u, i, !0)
              : Qi.setRelative(e, e, (l + c) / 2, i, !0),
            void 0)
          : ((r = e.yo - t.yo),
            (s = e.yo - n.yo),
            (l = t.y - t.yo),
            (c = n.y - n.yo),
            0 === (u = (o = Math.abs(r)) + (a = Math.abs(s)))
              ? void (e.y = e.yo + (l + c) / 2)
              : void (e.y = e.yo + (l * a + c * o) / u));
      },
      normalSlope: 0,
      setRelative: function (e, t, n, i, r) {
        if (i && i !== this) {
          var s = r ? t.xo : t.x,
            o = r ? t.yo : t.y,
            a = s + n * i.x,
            l = o + n * i.y;
          e.y = l + i.normalSlope * (e.x - a);
        } else e.y = (r ? t.yo : t.y) + n;
      },
      slope: Number.POSITIVE_INFINITY,
      touch: function (e) {
        e.yTouched = !0;
      },
      touched: function (e) {
        return e.yTouched;
      },
      untouch: function (e) {
        e.yTouched = !1;
      },
    };
  Object.freeze(Ji),
    Object.freeze(Qi),
    (Rt.prototype.distance = function (e, t, n, i) {
      return (
        this.x * Ji.distance(e, t, n, i) + this.y * Qi.distance(e, t, n, i)
      );
    }),
    (Rt.prototype.interpolate = function (e, t, n, i) {
      var r, s, o, a, l, c, u;
      (o = i.distance(e, t, !0, !0)),
        (a = i.distance(e, n, !0, !0)),
        (r = i.distance(t, t, !1, !0)),
        (s = i.distance(n, n, !1, !0)),
        0 !== (u = (l = Math.abs(o)) + (c = Math.abs(a)))
          ? this.setRelative(e, e, (r * c + s * l) / u, i, !0)
          : this.setRelative(e, e, (r + s) / 2, i, !0);
    }),
    (Rt.prototype.setRelative = function (e, t, n, i, r) {
      i = i || this;
      var s = r ? t.xo : t.x,
        o = r ? t.yo : t.y,
        a = s + n * i.x,
        l = o + n * i.y,
        c = i.normalSlope,
        u = this.slope,
        h = e.x,
        d = e.y;
      (e.x = (u * h - c * a + l - d) / (u - c)), (e.y = u * (e.x - h) + d);
    }),
    (Rt.prototype.touch = function (e) {
      (e.xTouched = !0), (e.yTouched = !0);
    }),
    (Nt.prototype.nextTouched = function (e) {
      for (var t = this.nextPointOnContour; !e.touched(t) && t !== this; )
        t = t.nextPointOnContour;
      return t;
    }),
    (Nt.prototype.prevTouched = function (e) {
      for (var t = this.prevPointOnContour; !e.touched(t) && t !== this; )
        t = t.prevPointOnContour;
      return t;
    });
  var Zi = Object.freeze(new Nt(0, 0)),
    er = {
      cvCutIn: 17 / 16,
      deltaBase: 9,
      deltaShift: 0.125,
      loop: 1,
      minDis: 1,
      autoFlip: !0,
    };
  (kt.prototype.exec = function (t, n) {
    if ("number" != typeof n) throw new Error("Point size is not a number!");
    if (!(2 < this._errorState)) {
      var i = this.font,
        r = this._prepState;
      if (!r || r.ppem !== n) {
        var s = this._fpgmState;
        if (!s) {
          (Ut.prototype = er),
            ((s = this._fpgmState = new Ut("fpgm", i.tables.fpgm)).funcs = []),
            (s.font = i),
            e.DEBUG && (console.log("---EXEC FPGM---"), (s.step = -1));
          try {
            Vi(s);
          } catch (t) {
            return (
              console.log("Hinting error in FPGM:" + t),
              void (this._errorState = 3)
            );
          }
        }
        (Ut.prototype = s),
          ((r = this._prepState = new Ut("prep", i.tables.prep)).ppem = n);
        var o = i.tables.cvt;
        if (o)
          for (
            var a = (r.cvt = new Array(o.length)), l = n / i.unitsPerEm, c = 0;
            c < o.length;
            c++
          )
            a[c] = o[c] * l;
        else r.cvt = [];
        e.DEBUG && (console.log("---EXEC PREP---"), (r.step = -1));
        try {
          Vi(r);
        } catch (t) {
          this._errorState < 2 && console.log("Hinting error in PREP:" + t),
            (this._errorState = 2);
        }
      }
      if (!(1 < this._errorState))
        try {
          return qi(t, r);
        } catch (t) {
          return (
            this._errorState < 1 &&
              (console.log("Hinting error:" + t),
              console.log("Note: further hinting errors are silenced")),
            void (this._errorState = 1)
          );
        }
    }
  }),
    (qi = function (t, n) {
      var i,
        r,
        s,
        o = n.ppem / n.font.unitsPerEm,
        a = o,
        l = t.components;
      if (((Ut.prototype = n), l)) {
        var c = n.font;
        (r = []), (i = []);
        for (var u = 0; u < l.length; u++) {
          var h = l[u],
            d = c.glyphs.get(h.glyphIndex);
          (s = new Ut("glyf", d.instructions)),
            e.DEBUG &&
              (console.log("---EXEC COMP " + u + "---"), (s.step = -1)),
            Xi(d, s, o, a);
          for (
            var p = Math.round(h.dx * o),
              f = Math.round(h.dy * a),
              m = s.gZone,
              g = s.contours,
              v = 0;
            v < m.length;
            v++
          ) {
            var _ = m[v];
            (_.xTouched = _.yTouched = !1),
              (_.xo = _.x = _.x + p),
              (_.yo = _.y = _.y + f);
          }
          var y = r.length;
          r.push.apply(r, m);
          for (var b = 0; b < g.length; b++) i.push(g[b] + y);
        }
        t.instructions &&
          !s.inhibitGridFit &&
          (((s = new Ut("glyf", t.instructions)).gZone =
            s.z0 =
            s.z1 =
            s.z2 =
              r),
          (s.contours = i),
          r.push(new Nt(0, 0), new Nt(Math.round(t.advanceWidth * o), 0)),
          e.DEBUG && (console.log("---EXEC COMPOSITE---"), (s.step = -1)),
          Vi(s),
          (r.length -= 2));
      } else
        (s = new Ut("glyf", t.instructions)),
          e.DEBUG && (console.log("---EXEC GLYPH---"), (s.step = -1)),
          Xi(t, s, o, a),
          (r = s.gZone);
      return r;
    }),
    (Xi = function (t, n, i, r) {
      for (
        var s,
          o,
          a,
          l = t.points || [],
          c = l.length,
          u = (n.gZone = n.z0 = n.z1 = n.z2 = []),
          h = (n.contours = []),
          d = 0;
        c > d;
        d++
      )
        (s = l[d]),
          (u[d] = new Nt(s.x * i, s.y * r, s.lastPointOfContour, s.onCurve));
      for (var p = 0; c > p; p++)
        (s = u[p]),
          o || ((o = s), h.push(p)),
          s.lastPointOfContour
            ? (((s.nextPointOnContour = o).prevPointOnContour = s),
              (o = void 0))
            : ((a = u[p + 1]),
              ((s.nextPointOnContour = a).prevPointOnContour = s));
      if (!n.inhibitGridFit) {
        if (e.DEBUG) {
          console.log("PROCESSING GLYPH", n.stack);
          for (var f = 0; c > f; f++) console.log(f, u[f].x, u[f].y);
        }
        if (
          (u.push(new Nt(0, 0), new Nt(Math.round(t.advanceWidth * i), 0)),
          Vi(n),
          (u.length -= 2),
          e.DEBUG)
        ) {
          console.log("FINISHED GLYPH", n.stack);
          for (var m = 0; c > m; m++) console.log(m, u[m].x, u[m].y);
        }
      }
    }),
    (Vi = function (t) {
      var n = t.prog;
      if (n) {
        var i,
          r = n.length;
        for (t.ip = 0; t.ip < r; t.ip++) {
          if ((e.DEBUG && t.step++, !(i = Gi[n[t.ip]])))
            throw new Error(
              "unknown instruction: 0x" + Number(n[t.ip]).toString(16)
            );
          i(t);
        }
      }
    }),
    (Gi = [
      jt.bind(void 0, Qi),
      jt.bind(void 0, Ji),
      Ht.bind(void 0, Qi),
      Ht.bind(void 0, Ji),
      $t.bind(void 0, Qi),
      $t.bind(void 0, Ji),
      zt.bind(void 0, 0),
      zt.bind(void 0, 1),
      Wt.bind(void 0, 0),
      Wt.bind(void 0, 1),
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "SPVFS[]", i, r),
          (t.pv = t.dpv = Lt(r, i));
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "SPVFS[]", i, r), (t.fv = Lt(r, i));
      },
      function (t) {
        var n = t.stack,
          i = t.pv;
        e.DEBUG && console.log(t.step, "GPV[]"),
          n.push(16384 * i.x),
          n.push(16384 * i.y);
      },
      function (t) {
        var n = t.stack,
          i = t.fv;
        e.DEBUG && console.log(t.step, "GFV[]"),
          n.push(16384 * i.x),
          n.push(16384 * i.y);
      },
      function (t) {
        (t.fv = t.pv), e.DEBUG && console.log(t.step, "SFVTPV[]");
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop(),
          s = n.pop(),
          o = n.pop(),
          a = n.pop(),
          l = t.z0,
          c = t.z1,
          u = l[i],
          h = l[r],
          d = c[s],
          p = c[o],
          f = t.z2[a];
        e.DEBUG && console.log("ISECT[], ", i, r, s, o, a);
        var m = u.x,
          g = u.y,
          v = h.x,
          _ = h.y,
          y = d.x,
          b = d.y,
          w = p.x,
          x = p.y,
          C = (m - v) * (b - x) - (g - _) * (y - w),
          T = m * _ - g * v,
          S = y * x - b * w;
        (f.x = (T * (y - w) - S * (m - v)) / C),
          (f.y = (T * (b - x) - S * (g - _)) / C);
      },
      function (t) {
        (t.rp0 = t.stack.pop()),
          e.DEBUG && console.log(t.step, "SRP0[]", t.rp0);
      },
      function (t) {
        (t.rp1 = t.stack.pop()),
          e.DEBUG && console.log(t.step, "SRP1[]", t.rp1);
      },
      function (t) {
        (t.rp2 = t.stack.pop()),
          e.DEBUG && console.log(t.step, "SRP2[]", t.rp2);
      },
      function (t) {
        var n = t.stack.pop();
        switch ((e.DEBUG && console.log(t.step, "SZP0[]", n), (t.zp0 = n))) {
          case 0:
            t.tZone || Bt(t), (t.z0 = t.tZone);
            break;
          case 1:
            t.z0 = t.gZone;
            break;
          default:
            throw new Error("Invalid zone pointer");
        }
      },
      function (t) {
        var n = t.stack.pop();
        switch ((e.DEBUG && console.log(t.step, "SZP1[]", n), (t.zp1 = n))) {
          case 0:
            t.tZone || Bt(t), (t.z1 = t.tZone);
            break;
          case 1:
            t.z1 = t.gZone;
            break;
          default:
            throw new Error("Invalid zone pointer");
        }
      },
      function (t) {
        var n = t.stack.pop();
        switch ((e.DEBUG && console.log(t.step, "SZP2[]", n), (t.zp2 = n))) {
          case 0:
            t.tZone || Bt(t), (t.z2 = t.tZone);
            break;
          case 1:
            t.z2 = t.gZone;
            break;
          default:
            throw new Error("Invalid zone pointer");
        }
      },
      function (t) {
        var n = t.stack.pop();
        switch (
          (e.DEBUG && console.log(t.step, "SZPS[]", n),
          (t.zp0 = t.zp1 = t.zp2 = n),
          n)
        ) {
          case 0:
            t.tZone || Bt(t), (t.z0 = t.z1 = t.z2 = t.tZone);
            break;
          case 1:
            t.z0 = t.z1 = t.z2 = t.gZone;
            break;
          default:
            throw new Error("Invalid zone pointer");
        }
      },
      function (t) {
        (t.loop = t.stack.pop()),
          e.DEBUG && console.log(t.step, "SLOOP[]", t.loop);
      },
      function (t) {
        e.DEBUG && console.log(t.step, "RTG[]"), (t.round = It);
      },
      function (t) {
        e.DEBUG && console.log(t.step, "RTHG[]"), (t.round = Ot);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SMD[]", n), (t.minDis = n / 64);
      },
      function (t) {
        e.DEBUG && console.log(t.step, "ELSE[]"), Ft(t, !1);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "JMPR[]", n), (t.ip += n - 1);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SCVTCI[]", n), (t.cvCutIn = n / 64);
      },
      void 0,
      void 0,
      function (t) {
        var n = t.stack;
        e.DEBUG && console.log(t.step, "DUP[]"), n.push(n[n.length - 1]);
      },
      Gt,
      function (t) {
        e.DEBUG && console.log(t.step, "CLEAR[]"), (t.stack.length = 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "SWAP[]"), n.push(i), n.push(r);
      },
      function (t) {
        var n = t.stack;
        e.DEBUG && console.log(t.step, "DEPTH[]"), n.push(n.length);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "CINDEX[]", i), n.push(n[n.length - i]);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "MINDEX[]", i),
          n.push(n.splice(n.length - i, 1)[0]);
      },
      void 0,
      void 0,
      void 0,
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "LOOPCALL[]", i, r);
        var s = t.ip,
          o = t.prog;
        t.prog = t.funcs[i];
        for (var a = 0; r > a; a++)
          Vi(t),
            e.DEBUG &&
              console.log(
                ++t.step,
                r > a + 1 ? "next loopcall" : "done loopcall",
                a
              );
        (t.ip = s), (t.prog = o);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "CALL[]", n);
        var i = t.ip,
          r = t.prog;
        (t.prog = t.funcs[n]),
          Vi(t),
          (t.ip = i),
          (t.prog = r),
          e.DEBUG && console.log(++t.step, "returning from", n);
      },
      function (t) {
        if ("fpgm" !== t.env) throw new Error("FDEF not allowed here");
        var n = t.stack,
          i = t.prog,
          r = t.ip,
          s = n.pop(),
          o = r;
        for (e.DEBUG && console.log(t.step, "FDEF[]", s); 45 !== i[++r]; );
        (t.ip = r), (t.funcs[s] = i.slice(o + 1, r));
      },
      void 0,
      Vt.bind(void 0, 0),
      Vt.bind(void 0, 1),
      qt.bind(void 0, Qi),
      qt.bind(void 0, Ji),
      Xt.bind(void 0, 0),
      Xt.bind(void 0, 1),
      Yt.bind(void 0, 0),
      Yt.bind(void 0, 1),
      Kt.bind(void 0, 0),
      Kt.bind(void 0, 1),
      function (t) {
        for (
          var n = t.stack, i = t.loop, r = t.fv, s = n.pop() / 64, o = t.z2;
          i--;

        ) {
          var a = n.pop(),
            l = o[a];
          e.DEBUG &&
            console.log(
              t.step,
              (1 < t.loop ? "loop " + (t.loop - i) + ": " : "") + "SHPIX[]",
              a,
              s
            ),
            r.setRelative(l, l, s),
            r.touch(l);
        }
        t.loop = 1;
      },
      function (t) {
        for (
          var n = t.stack,
            i = t.rp1,
            r = t.rp2,
            s = t.loop,
            o = t.z0[i],
            a = t.z1[r],
            l = t.fv,
            c = t.dpv,
            u = t.z2;
          s--;

        ) {
          var h = n.pop(),
            d = u[h];
          e.DEBUG &&
            console.log(
              t.step,
              (1 < t.loop ? "loop " + (t.loop - s) + ": " : "") + "IP[]",
              h,
              i,
              "<->",
              r
            ),
            l.interpolate(d, o, a, c),
            l.touch(d);
        }
        t.loop = 1;
      },
      Jt.bind(void 0, 0),
      Jt.bind(void 0, 1),
      function (t) {
        for (
          var n = t.stack,
            i = t.rp0,
            r = t.z0[i],
            s = t.loop,
            o = t.fv,
            a = t.pv,
            l = t.z1;
          s--;

        ) {
          var c = n.pop(),
            u = l[c];
          e.DEBUG &&
            console.log(
              t.step,
              (1 < t.loop ? "loop " + (t.loop - s) + ": " : "") + "ALIGNRP[]",
              c
            ),
            o.setRelative(u, r, 0, a),
            o.touch(u);
        }
        t.loop = 1;
      },
      function (t) {
        e.DEBUG && console.log(t.step, "RTDG[]"), (t.round = At);
      },
      Qt.bind(void 0, 0),
      Qt.bind(void 0, 1),
      function (t) {
        var n = t.prog,
          i = t.ip,
          r = t.stack,
          s = n[++i];
        e.DEBUG && console.log(t.step, "NPUSHB[]", s);
        for (var o = 0; s > o; o++) r.push(n[++i]);
        t.ip = i;
      },
      function (t) {
        var n = t.ip,
          i = t.prog,
          r = t.stack,
          s = i[++n];
        e.DEBUG && console.log(t.step, "NPUSHW[]", s);
        for (var o = 0; s > o; o++) {
          var a = (i[++n] << 8) | i[++n];
          32768 & a && (a = -(1 + (65535 ^ a))), r.push(a);
        }
        t.ip = n;
      },
      function (t) {
        var n = t.stack,
          i = t.store;
        i || (i = t.store = []);
        var r = n.pop(),
          s = n.pop();
        e.DEBUG && console.log(t.step, "WS", r, s), (i[s] = r);
      },
      function (t) {
        var n = t.stack,
          i = t.store,
          r = n.pop();
        e.DEBUG && console.log(t.step, "RS", r);
        var s = (i && i[r]) || 0;
        n.push(s);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "WCVTP", i, r), (t.cvt[r] = i / 64);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "RCVT", i), n.push(64 * t.cvt[i]);
      },
      Zt.bind(void 0, 0),
      Zt.bind(void 0, 1),
      void 0,
      en.bind(void 0, 0),
      en.bind(void 0, 1),
      function (t) {
        e.DEBUG && console.log(t.step, "MPPEM[]"), t.stack.push(t.ppem);
      },
      void 0,
      function (t) {
        e.DEBUG && console.log(t.step, "FLIPON[]"), (t.autoFlip = !0);
      },
      void 0,
      void 0,
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "LT[]", i, r), n.push(i > r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "LTEQ[]", i, r), n.push(i >= r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "GT[]", i, r), n.push(r > i ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "GTEQ[]", i, r), n.push(r >= i ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "EQ[]", i, r), n.push(i === r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "NEQ[]", i, r), n.push(i !== r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "ODD[]", i),
          n.push(Math.trunc(i) % 2 ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "EVEN[]", i),
          n.push(Math.trunc(i) % 2 ? 0 : 1);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "IF[]", n),
          n || (Ft(t, !0), e.DEBUG && console.log(t.step, "EIF[]"));
      },
      function (t) {
        e.DEBUG && console.log(t.step, "EIF[]");
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "AND[]", i, r), n.push(i && r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "OR[]", i, r), n.push(i || r ? 1 : 0);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "NOT[]", i), n.push(i ? 0 : 1);
      },
      tn.bind(void 0, 1),
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SDB[]", n), (t.deltaBase = n);
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SDS[]", n),
          (t.deltaShift = Math.pow(0.5, n));
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "ADD[]", i, r), n.push(r + i);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "SUB[]", i, r), n.push(r - i);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "DIV[]", i, r), n.push((64 * r) / i);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "MUL[]", i, r), n.push((r * i) / 64);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "ABS[]", i), n.push(Math.abs(i));
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "NEG[]", i), n.push(-i);
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "FLOOR[]", i),
          n.push(64 * Math.floor(i / 64));
      },
      function (t) {
        var n = t.stack,
          i = n.pop();
        e.DEBUG && console.log(t.step, "CEILING[]", i),
          n.push(64 * Math.ceil(i / 64));
      },
      nn.bind(void 0, 0),
      nn.bind(void 0, 1),
      nn.bind(void 0, 2),
      nn.bind(void 0, 3),
      void 0,
      void 0,
      void 0,
      void 0,
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "WCVTF[]", i, r),
          (t.cvt[r] = (i * t.ppem) / t.font.unitsPerEm);
      },
      tn.bind(void 0, 2),
      tn.bind(void 0, 3),
      rn.bind(void 0, 1),
      rn.bind(void 0, 2),
      rn.bind(void 0, 3),
      function (t) {
        var n,
          i = t.stack.pop();
        switch (
          (e.DEBUG && console.log(t.step, "SROUND[]", i),
          (t.round = Ki),
          192 & i)
        ) {
          case 0:
            n = 0.5;
            break;
          case 64:
            n = 1;
            break;
          case 128:
            n = 2;
            break;
          default:
            throw new Error("invalid SROUND value");
        }
        switch (((t.srPeriod = n), 48 & i)) {
          case 0:
            t.srPhase = 0;
            break;
          case 16:
            t.srPhase = 0.25 * n;
            break;
          case 32:
            t.srPhase = 0.5 * n;
            break;
          case 48:
            t.srPhase = 0.75 * n;
            break;
          default:
            throw new Error("invalid SROUND value");
        }
        (i &= 15), (t.srThreshold = 0 === i ? 0 : (i / 8 - 0.5) * n);
      },
      function (t) {
        var n,
          i = t.stack.pop();
        switch (
          (e.DEBUG && console.log(t.step, "S45ROUND[]", i),
          (t.round = Ki),
          192 & i)
        ) {
          case 0:
            n = Math.sqrt(2) / 2;
            break;
          case 64:
            n = Math.sqrt(2);
            break;
          case 128:
            n = 2 * Math.sqrt(2);
            break;
          default:
            throw new Error("invalid S45ROUND value");
        }
        switch (((t.srPeriod = n), 48 & i)) {
          case 0:
            t.srPhase = 0;
            break;
          case 16:
            t.srPhase = 0.25 * n;
            break;
          case 32:
            t.srPhase = 0.5 * n;
            break;
          case 48:
            t.srPhase = 0.75 * n;
            break;
          default:
            throw new Error("invalid S45ROUND value");
        }
        (i &= 15), (t.srThreshold = 0 === i ? 0 : (i / 8 - 0.5) * n);
      },
      void 0,
      void 0,
      function (t) {
        e.DEBUG && console.log(t.step, "ROFF[]"), (t.round = Pt);
      },
      void 0,
      function (t) {
        e.DEBUG && console.log(t.step, "RUTG[]"), (t.round = Dt);
      },
      function (t) {
        e.DEBUG && console.log(t.step, "RDTG[]"), (t.round = Mt);
      },
      Gt,
      Gt,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SCANCTRL[]", n);
      },
      sn.bind(void 0, 0),
      sn.bind(void 0, 1),
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = 0;
        e.DEBUG && console.log(t.step, "GETINFO[]", i),
          1 & i && (r = 35),
          32 & i && (r |= 4096),
          n.push(r);
      },
      void 0,
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop(),
          s = n.pop();
        e.DEBUG && console.log(t.step, "ROLL[]"),
          n.push(r),
          n.push(i),
          n.push(s);
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "MAX[]", i, r), n.push(Math.max(r, i));
      },
      function (t) {
        var n = t.stack,
          i = n.pop(),
          r = n.pop();
        e.DEBUG && console.log(t.step, "MIN[]", i, r), n.push(Math.min(r, i));
      },
      function (t) {
        var n = t.stack.pop();
        e.DEBUG && console.log(t.step, "SCANTYPE[]", n);
      },
      function (t) {
        var n = t.stack.pop(),
          i = t.stack.pop();
        switch ((e.DEBUG && console.log(t.step, "INSTCTRL[]", n, i), n)) {
          case 1:
            return void (t.inhibitGridFit = !!i);
          case 2:
            return void (t.ignoreCvt = !!i);
          default:
            throw new Error("invalid INSTCTRL[] selector");
        }
      },
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      void 0,
      on.bind(void 0, 1),
      on.bind(void 0, 2),
      on.bind(void 0, 3),
      on.bind(void 0, 4),
      on.bind(void 0, 5),
      on.bind(void 0, 6),
      on.bind(void 0, 7),
      on.bind(void 0, 8),
      an.bind(void 0, 1),
      an.bind(void 0, 2),
      an.bind(void 0, 3),
      an.bind(void 0, 4),
      an.bind(void 0, 5),
      an.bind(void 0, 6),
      an.bind(void 0, 7),
      an.bind(void 0, 8),
      ln.bind(void 0, 0, 0, 0, 0, 0),
      ln.bind(void 0, 0, 0, 0, 0, 1),
      ln.bind(void 0, 0, 0, 0, 0, 2),
      ln.bind(void 0, 0, 0, 0, 0, 3),
      ln.bind(void 0, 0, 0, 0, 1, 0),
      ln.bind(void 0, 0, 0, 0, 1, 1),
      ln.bind(void 0, 0, 0, 0, 1, 2),
      ln.bind(void 0, 0, 0, 0, 1, 3),
      ln.bind(void 0, 0, 0, 1, 0, 0),
      ln.bind(void 0, 0, 0, 1, 0, 1),
      ln.bind(void 0, 0, 0, 1, 0, 2),
      ln.bind(void 0, 0, 0, 1, 0, 3),
      ln.bind(void 0, 0, 0, 1, 1, 0),
      ln.bind(void 0, 0, 0, 1, 1, 1),
      ln.bind(void 0, 0, 0, 1, 1, 2),
      ln.bind(void 0, 0, 0, 1, 1, 3),
      ln.bind(void 0, 0, 1, 0, 0, 0),
      ln.bind(void 0, 0, 1, 0, 0, 1),
      ln.bind(void 0, 0, 1, 0, 0, 2),
      ln.bind(void 0, 0, 1, 0, 0, 3),
      ln.bind(void 0, 0, 1, 0, 1, 0),
      ln.bind(void 0, 0, 1, 0, 1, 1),
      ln.bind(void 0, 0, 1, 0, 1, 2),
      ln.bind(void 0, 0, 1, 0, 1, 3),
      ln.bind(void 0, 0, 1, 1, 0, 0),
      ln.bind(void 0, 0, 1, 1, 0, 1),
      ln.bind(void 0, 0, 1, 1, 0, 2),
      ln.bind(void 0, 0, 1, 1, 0, 3),
      ln.bind(void 0, 0, 1, 1, 1, 0),
      ln.bind(void 0, 0, 1, 1, 1, 1),
      ln.bind(void 0, 0, 1, 1, 1, 2),
      ln.bind(void 0, 0, 1, 1, 1, 3),
      ln.bind(void 0, 1, 0, 0, 0, 0),
      ln.bind(void 0, 1, 0, 0, 0, 1),
      ln.bind(void 0, 1, 0, 0, 0, 2),
      ln.bind(void 0, 1, 0, 0, 0, 3),
      ln.bind(void 0, 1, 0, 0, 1, 0),
      ln.bind(void 0, 1, 0, 0, 1, 1),
      ln.bind(void 0, 1, 0, 0, 1, 2),
      ln.bind(void 0, 1, 0, 0, 1, 3),
      ln.bind(void 0, 1, 0, 1, 0, 0),
      ln.bind(void 0, 1, 0, 1, 0, 1),
      ln.bind(void 0, 1, 0, 1, 0, 2),
      ln.bind(void 0, 1, 0, 1, 0, 3),
      ln.bind(void 0, 1, 0, 1, 1, 0),
      ln.bind(void 0, 1, 0, 1, 1, 1),
      ln.bind(void 0, 1, 0, 1, 1, 2),
      ln.bind(void 0, 1, 0, 1, 1, 3),
      ln.bind(void 0, 1, 1, 0, 0, 0),
      ln.bind(void 0, 1, 1, 0, 0, 1),
      ln.bind(void 0, 1, 1, 0, 0, 2),
      ln.bind(void 0, 1, 1, 0, 0, 3),
      ln.bind(void 0, 1, 1, 0, 1, 0),
      ln.bind(void 0, 1, 1, 0, 1, 1),
      ln.bind(void 0, 1, 1, 0, 1, 2),
      ln.bind(void 0, 1, 1, 0, 1, 3),
      ln.bind(void 0, 1, 1, 1, 0, 0),
      ln.bind(void 0, 1, 1, 1, 0, 1),
      ln.bind(void 0, 1, 1, 1, 0, 2),
      ln.bind(void 0, 1, 1, 1, 0, 3),
      ln.bind(void 0, 1, 1, 1, 1, 0),
      ln.bind(void 0, 1, 1, 1, 1, 1),
      ln.bind(void 0, 1, 1, 1, 1, 2),
      ln.bind(void 0, 1, 1, 1, 1, 3),
    ]),
    (cn.prototype.setState = function (e, t) {
      return (
        (this.state[e] = t),
        (this.activeState = { key: e, value: this.state[e] }),
        this.activeState
      );
    }),
    (cn.prototype.getState = function (e) {
      return this.state[e] || null;
    }),
    (fn.prototype.inboundIndex = function (e) {
      return e >= 0 && e < this.tokens.length;
    }),
    (fn.prototype.composeRUD = function (e) {
      var t = this,
        n = e.map(function (e) {
          return t[e[0]].apply(t, e.slice(1).concat(!0));
        }),
        i = function (e) {
          return "object" == typeof e && e.hasOwnProperty("FAIL");
        };
      return n.every(i)
        ? {
            FAIL: "composeRUD: one or more operations hasn't completed successfully",
            report: n.filter(i),
          }
        : void this.dispatch("composeRUD", [
            n.filter(function (e) {
              return !i(e);
            }),
          ]);
    }),
    (fn.prototype.replaceRange = function (e, t, n, i) {
      t = null !== t ? t : this.tokens.length;
      var r = n.every(function (e) {
        return e instanceof cn;
      });
      if (!isNaN(e) && this.inboundIndex(e) && r) {
        var s = this.tokens.splice.apply(this.tokens, [e, t].concat(n));
        return i || this.dispatch("replaceToken", [e, t, n]), [s, n];
      }
      return { FAIL: "replaceRange: invalid tokens or startIndex." };
    }),
    (fn.prototype.replaceToken = function (e, t, n) {
      if (!isNaN(e) && this.inboundIndex(e) && t instanceof cn) {
        var i = this.tokens.splice(e, 1, t);
        return n || this.dispatch("replaceToken", [e, t]), [i[0], t];
      }
      return { FAIL: "replaceToken: invalid token or index." };
    }),
    (fn.prototype.removeRange = function (e, t, n) {
      t = isNaN(t) ? this.tokens.length : t;
      var i = this.tokens.splice(e, t);
      return n || this.dispatch("removeRange", [i, e, t]), i;
    }),
    (fn.prototype.removeToken = function (e, t) {
      if (isNaN(e) || !this.inboundIndex(e))
        return { FAIL: "removeToken: invalid token index." };
      var n = this.tokens.splice(e, 1);
      return t || this.dispatch("removeToken", [n, e]), n;
    }),
    (fn.prototype.insertToken = function (e, t, n) {
      return e.every(function (e) {
        return e instanceof cn;
      })
        ? (this.tokens.splice.apply(this.tokens, [t, 0].concat(e)),
          n || this.dispatch("insertToken", [e, t]),
          e)
        : { FAIL: "insertToken: invalid token(s)." };
    }),
    (fn.prototype.registerModifier = function (e, t, n) {
      this.events.newToken.subscribe(function (i, r) {
        var s = [i, r],
          o = [i, r];
        if (null === t || !0 === t.apply(this, s)) {
          var a = n.apply(this, o);
          i.setState(e, a);
        }
      }),
        this.registeredModifiers.push(e);
    }),
    (pn.prototype.subscribe = function (e) {
      return "function" == typeof e
        ? this.subscribers.push(e) - 1
        : { FAIL: "invalid '" + this.eventId + "' event handler" };
    }),
    (pn.prototype.unsubscribe = function (e) {
      this.subscribers.splice(e, 1);
    }),
    (dn.prototype.setCurrentIndex = function (e) {
      (this.index = e),
        (this.current = this.context[e]),
        (this.backtrack = this.context.slice(0, e)),
        (this.lookahead = this.context.slice(e + 1));
    }),
    (dn.prototype.get = function (e) {
      switch (!0) {
        case 0 === e:
          return this.current;
        case 0 > e && Math.abs(e) <= this.backtrack.length:
          return this.backtrack.slice(e)[0];
        case e > 0 && e <= this.lookahead.length:
          return this.lookahead[e - 1];
        default:
          return null;
      }
    }),
    (fn.prototype.rangeToText = function (e) {
      return e instanceof un
        ? this.getRangeTokens(e)
            .map(function (e) {
              return e["char"];
            })
            .join("")
        : void 0;
    }),
    (fn.prototype.getText = function () {
      return this.tokens
        .map(function (e) {
          return e["char"];
        })
        .join("");
    }),
    (fn.prototype.getContext = function (e) {
      var t = this.registeredContexts[e];
      return t || null;
    }),
    (fn.prototype.on = function (e, t) {
      var n = this.events[e];
      return n ? n.subscribe(t) : null;
    }),
    (fn.prototype.dispatch = function (e, t) {
      var n = this,
        i = this.events[e];
      i instanceof pn &&
        i.subscribers.forEach(function (e) {
          e.apply(n, t || []);
        });
    }),
    (fn.prototype.registerContextChecker = function (e, t, n) {
      if (this.getContext(e))
        return { FAIL: "context name '" + e + "' is already registered." };
      if ("function" != typeof t)
        return { FAIL: "missing context start check." };
      if ("function" != typeof n) return { FAIL: "missing context end check." };
      var i = new hn(e, t, n);
      return (this.registeredContexts[e] = i), this.contextCheckers.push(i), i;
    }),
    (fn.prototype.getRangeTokens = function (e) {
      var t = e.startIndex + e.endOffset;
      return [].concat(this.tokens.slice(e.startIndex, t));
    }),
    (fn.prototype.getContextRanges = function (e) {
      var t = this.getContext(e);
      return t
        ? t.ranges
        : { FAIL: "context checker '" + e + "' is not registered." };
    }),
    (fn.prototype.resetContextsRanges = function () {
      var e = this.registeredContexts;
      for (var t in e) e.hasOwnProperty(t) && (e[t].ranges = []);
    }),
    (fn.prototype.updateContextsRanges = function () {
      this.resetContextsRanges();
      for (
        var e = this.tokens.map(function (e) {
            return e["char"];
          }),
          t = 0;
        t < e.length;
        t++
      ) {
        var n = new dn(e, t);
        this.runContextCheck(n);
      }
      this.dispatch("updateContextsRanges", [this.registeredContexts]);
    }),
    (fn.prototype.setEndOffset = function (e, t) {
      var n = new un(this.getContext(t).openRange.startIndex, e, t),
        i = this.getContext(t).ranges;
      return (
        (n.rangeId = t + "." + i.length),
        i.push(n),
        (this.getContext(t).openRange = null),
        n
      );
    }),
    (fn.prototype.runContextCheck = function (e) {
      var t = this,
        n = e.index;
      this.contextCheckers.forEach(function (i) {
        var r = i.contextName,
          s = t.getContext(r).openRange;
        if (
          (!s &&
            i.checkStart(e) &&
            ((s = new un(n, null, r)),
            (t.getContext(r).openRange = s),
            t.dispatch("contextStart", [r, n])),
          s && i.checkEnd(e))
        ) {
          var o = n - s.startIndex + 1,
            a = t.setEndOffset(o, r);
          t.dispatch("contextEnd", [r, a]);
        }
      });
    }),
    (fn.prototype.tokenize = function (e) {
      (this.tokens = []), this.resetContextsRanges();
      var t = Array.from(e);
      this.dispatch("start");
      for (var n = 0; n < t.length; n++) {
        var i = t[n],
          r = new dn(t, n);
        this.dispatch("next", [r]), this.runContextCheck(r);
        var s = new cn(i);
        this.tokens.push(s), this.dispatch("newToken", [s, r]);
      }
      return this.dispatch("end", [this.tokens]), this.tokens;
    });
  var tr = {
      arabicWordStartCheck: function (e) {
        var t = e.current,
          n = e.get(-1);
        return (null === n && mn(t)) || (!mn(n) && mn(t));
      },
      arabicWordEndCheck: function (e) {
        var t = e.get(1);
        return null === t || !mn(t);
      },
    },
    nr = {
      arabicSentenceStartCheck: function (e) {
        var t = e.current,
          n = e.get(-1);
        return (mn(t) || vn(t)) && !mn(n);
      },
      arabicSentenceEndCheck: function (e) {
        var t = e.get(1);
        switch (!0) {
          case null === t:
            return !0;
          case !mn(t) && !vn(t):
            var n = /\s/.test(t);
            if (!n) return !0;
            if (
              n &&
              !e.lookahead.some(function (e) {
                return mn(e) || vn(e);
              })
            )
              return !0;
            break;
          default:
            return !1;
        }
      },
    };
  (yn.prototype.setText = function (e) {
    this.text = e;
  }),
    (yn.prototype.contextChecks = {
      arabicWordCheck: tr,
      arabicSentenceCheck: nr,
    }),
    (yn.prototype.subscribeArabicForms = function (e) {
      var t = this;
      this.tokenizer.events.contextEnd.subscribe(function (n, i) {
        return "arabicWord" === n ? _n.call(t.tokenizer, i, e) : void 0;
      });
    }),
    (yn.prototype.applyFeatures = function (e) {
      for (var t = 0; t < e.length; t++) {
        var n = e[t];
        if (n) {
          var i = n.script;
          this.features[i] || (this.features[i] = {}),
            (this.features[i][n.tag] = n);
        }
      }
    }),
    (yn.prototype.registerModifier = function (e, t, n) {
      this.tokenizer.registerModifier(e, t, n);
    }),
    (yn.prototype.processText = function (e) {
      (this.text && this.text === e) ||
        (this.setText(e),
        function () {
          return (
            function () {
              var e = this.contextChecks.arabicWordCheck;
              return this.tokenizer.registerContextChecker(
                "arabicWord",
                e.arabicWordStartCheck,
                e.arabicWordEndCheck
              );
            }.call(this),
            function () {
              var e = this.contextChecks.arabicSentenceCheck;
              return this.tokenizer.registerContextChecker(
                "arabicSentence",
                e.arabicSentenceStartCheck,
                e.arabicSentenceEndCheck
              );
            }.call(this),
            this.tokenizer.tokenize(this.text)
          );
        }.call(this),
        function () {
          var e = this;
          this.features.hasOwnProperty("arab") &&
            (bn.call(this),
            this.tokenizer.getContextRanges("arabicWord").forEach(function (t) {
              _n.call(e, t);
            }));
        }.call(this),
        wn.call(this),
        function () {
          var e = this;
          this.tokenizer
            .getContextRanges("arabicSentence")
            .forEach(function (t) {
              var n = e.tokenizer.getRangeTokens(t);
              e.tokenizer.replaceRange(t.startIndex, t.endOffset, n.reverse());
            });
        }.call(this));
    }),
    (yn.prototype.getBidiText = function (e) {
      return this.processText(e), this.tokenizer.getText();
    }),
    (yn.prototype.getTextGlyphs = function (e) {
      this.processText(e);
      for (var t = [], n = 0; n < this.tokenizer.tokens.length; n++) {
        var i = this.tokenizer.tokens[n];
        if (!i.state.deleted) {
          var r = i.activeState.value;
          t.push(Array.isArray(r) ? r[0] : r);
        }
      }
      return t;
    });
  var ir = "ltr";
  (Sn.prototype.lookup = function (e, t) {
    for (
      var n = this.ligatureSets[t],
        i = function (e, t) {
          if (e.length > t.length) return null;
          for (var n = 0; n < e.length; n++) if (e[n] !== t[n]) return !1;
          return !0;
        },
        r = 0;
      r < n.length;
      r++
    ) {
      var s = n[r],
        o = e.lookahead.map(function (e) {
          return e.activeState.value;
        });
      if (("rtl" === ir && o.reverse(), i(s.components, o))) return s;
    }
    return null;
  }),
    (kn.prototype.lookup = function (e) {
      for (var t = [], n = 0; n < this.subtables.length; n++) {
        var i = this.subtables[n].lookup(e);
        (null !== i || i.length) && (t = t.concat(i));
      }
      return t;
    }),
    (En.prototype.lookup = function (e) {
      var t = [],
        n = this.lookupTable.lookupType,
        i = this.subtable.substFormat;
      if (1 === n && 2 === i) {
        var r = function (e) {
          var t = e.current.activeState.value;
          t = Array.isArray(t) ? t[0] : t;
          var n = this.coverage.lookup(t);
          return -1 === n ? [] : [this.subtable.substitute[n]];
        }.call(this, e);
        0 < r.length && t.push({ id: 12, substitution: r });
      }
      if (6 === n && 3 === i) {
        var s = function (e) {
          var t =
            this.inputCoverage.length +
            this.lookaheadCoverage.length +
            this.backtrackCoverage.length;
          if (e.context.length < t) return [];
          var n = In(this.inputCoverage, e);
          if (-1 === n) return [];
          var i = this.inputCoverage.length - 1;
          if (e.lookahead.length < this.lookaheadCoverage.length) return [];
          for (var r = e.lookahead.slice(i); r.length && vn(r[0]["char"]); )
            r.shift();
          var s = new dn(r, 0),
            o = In(this.lookaheadCoverage, s),
            a = [].concat(e.backtrack);
          for (a.reverse(); a.length && vn(a[0]["char"]); ) a.shift();
          if (a.length < this.backtrackCoverage.length) return [];
          var l = new dn(a, 0),
            c = In(this.backtrackCoverage, l),
            u = [];
          if (
            n.length === this.inputCoverage.length &&
            o.length === this.lookaheadCoverage.length &&
            c.length === this.backtrackCoverage.length
          )
            for (var h = this.subtable.lookupRecords, d = 0; d < h.length; d++)
              for (var p = h[d], f = 0; f < n.length; f++) {
                var m = new dn([e.get(f)], 0),
                  g = new kn(p.lookupListIndex, this.lookups).lookup(m);
                u = u.concat(g);
              }
          return u;
        }.call(this, e);
        0 < s.length && t.push({ id: 63, substitution: s });
      }
      if (4 === n && 1 === i) {
        var o = function (e) {
          var t = e.current.activeState.value,
            n = this.coverage.lookup(t);
          if (-1 === n) return [];
          var i = this.ligatureSets.lookup(e, n);
          return i ? [i] : [];
        }.call(this, e);
        0 < o.length && t.push({ id: 41, substitution: o });
      }
      return t;
    }),
    (Tn.prototype.lookup = function (e) {
      if (!e) return -1;
      switch (this.table.format) {
        case 1:
          return this.table.glyphs.indexOf(e);
        case 2:
          for (var t = this.table.ranges, n = 0; n < t.length; n++) {
            var i = t[n];
            if (e >= i.start && e <= i.end) {
              var r = e - i.start;
              return i.index + r;
            }
          }
          break;
        default:
          return -1;
      }
      return -1;
    }),
    (Cn.prototype.lookup = function (e) {
      for (var t = [], n = 0; n < this.lookups.length; n++) {
        var i = this.lookups[n].lookup(e);
        (null !== i || i.length) && (t = t.concat(i));
      }
      return t;
    }),
    (xn.prototype.getScriptFeaturesIndexes = function (e) {
      if (!e) return [];
      if (!this.font.tables.gsub) return [];
      for (var t = this.font.tables.gsub.scripts, n = 0; n < t.length; n++) {
        var i = t[n];
        if (i.tag === e) return i.script.defaultLangSys.featureIndexes;
        var r = i.langSysRecords;
        if (r)
          for (var s = 0; s < r.length; s++) {
            var o = r[s];
            if (o.tag === e) return o.langSys.featureIndexes;
          }
      }
      return [];
    }),
    (xn.prototype.mapTagsToFeatures = function (e, t) {
      for (var n = {}, i = 0; i < e.length; i++) {
        var r = e[i].feature,
          s = e[i].tag,
          o = new Pn(this.font.tables.gsub.lookups, r.lookupListIndexes);
        n[s] = new Cn(s, r, o, t);
      }
      this.features[t].tags = n;
    }),
    (xn.prototype.getScriptFeatures = function (e) {
      var t = this.features[e];
      if (this.features.hasOwnProperty(e)) return t;
      var n = this.getScriptFeaturesIndexes(e);
      if (!n) return null;
      var i = this.font.tables.gsub;
      return (
        (t = n.map(function (e) {
          return i.features[e];
        })),
        (this.features[e] = t),
        this.mapTagsToFeatures(t, e),
        t
      );
    }),
    (xn.prototype.getFeature = function (e) {
      return this.font
        ? (this.features.hasOwnProperty(e.script) ||
            this.getScriptFeatures(e.script),
          this.features[e.script].tags[e.tag] || null)
        : { FAIL: "No font was found" };
    }),
    (An.prototype.hasChar = function (e) {
      return null !== this.encoding.charToGlyphIndex(e);
    }),
    (An.prototype.charToGlyphIndex = function (e) {
      return this.encoding.charToGlyphIndex(e);
    }),
    (An.prototype.charToGlyph = function (e) {
      var t = this.charToGlyphIndex(e),
        n = this.glyphs.get(t);
      return n || (n = this.glyphs.get(0)), n;
    }),
    (An.prototype.stringToGlyphs = function (e, t) {
      var n = this;
      t = t || this.defaultRenderOptions;
      var i = new yn();
      i.registerModifier("glyphIndex", null, function (e) {
        return n.charToGlyphIndex(e["char"]);
      });
      var r = new xn(this);
      i.applyFeatures(
        ["init", "medi", "fina", "rlig"].map(function (e) {
          var t = { tag: e, script: "arab" },
            n = r.getFeature(t);
          return n ? n : void 0;
        })
      );
      var s = i.getTextGlyphs(e),
        o = s.length;
      if (t.features) {
        var a = t.script || this.substitution.getDefaultScriptName(),
          l = [];
        t.features.liga &&
          (l = l.concat(this.substitution.getFeature("liga", a, t.language))),
          t.features.rlig &&
            (l = l.concat(this.substitution.getFeature("rlig", a, t.language)));
        for (var c = 0; o > c; c += 1)
          for (var u = 0; u < l.length; u++) {
            for (
              var h = l[u], d = h.sub, p = d.length, f = 0;
              p > f && d[f] === s[c + f];

            )
              f++;
            f === p && (s.splice(c, p, h.by), (o = o - p + 1));
          }
      }
      for (var m = new Array(o), g = this.glyphs.get(0), v = 0; o > v; v += 1)
        m[v] = n.glyphs.get(s[v]) || g;
      return m;
    }),
    (An.prototype.nameToGlyphIndex = function (e) {
      return this.glyphNames.nameToGlyphIndex(e);
    }),
    (An.prototype.nameToGlyph = function (e) {
      var t = this.nameToGlyphIndex(e),
        n = this.glyphs.get(t);
      return n || (n = this.glyphs.get(0)), n;
    }),
    (An.prototype.glyphIndexToName = function (e) {
      return this.glyphNames.glyphIndexToName
        ? this.glyphNames.glyphIndexToName(e)
        : "";
    }),
    (An.prototype.getKerningValue = function (e, t) {
      (e = e.index || e), (t = t.index || t);
      var n = this.position.defaultKerningTables;
      return n
        ? this.position.getKerningValue(n, e, t)
        : this.kerningPairs[e + "," + t] || 0;
    }),
    (An.prototype.defaultRenderOptions = {
      kerning: !0,
      features: { liga: !0, rlig: !0 },
    }),
    (An.prototype.forEachGlyph = function (e, t, n, i, r, s) {
      (t = void 0 !== t ? t : 0),
        (n = void 0 !== n ? n : 0),
        (i = void 0 !== i ? i : 72),
        (r = r || this.defaultRenderOptions);
      var o,
        a = (1 / this.unitsPerEm) * i,
        l = this.stringToGlyphs(e, r);
      if (r.kerning) {
        var c = r.script || this.position.getDefaultScriptName();
        o = this.position.getKerningTables(c, r.language);
      }
      for (var u = 0; u < l.length; u += 1) {
        var h = l[u];
        s.call(this, h, t, n, i, r),
          h.advanceWidth && (t += h.advanceWidth * a),
          r.kerning &&
            u < l.length - 1 &&
            (t +=
              (o
                ? this.position.getKerningValue(o, h.index, l[u + 1].index)
                : this.getKerningValue(h, l[u + 1])) * a),
          r.letterSpacing
            ? (t += r.letterSpacing * i)
            : r.tracking && (t += (r.tracking / 1e3) * i);
      }
      return t;
    }),
    (An.prototype.getPath = function (e, t, n, i, r) {
      var s = new p();
      return (
        this.forEachGlyph(e, t, n, i, r, function (e, t, n, i) {
          var o = e.getPath(t, n, i, r, this);
          s.extend(o);
        }),
        s
      );
    }),
    (An.prototype.getPaths = function (e, t, n, i, r) {
      var s = [];
      return (
        this.forEachGlyph(e, t, n, i, r, function (e, t, n, i) {
          var o = e.getPath(t, n, i, r, this);
          s.push(o);
        }),
        s
      );
    }),
    (An.prototype.getAdvanceWidth = function (e, t, n) {
      return this.forEachGlyph(e, 0, 0, t, n, function () {});
    }),
    (An.prototype.draw = function (e, t, n, i, r, s) {
      this.getPath(t, n, i, r, s).draw(e);
    }),
    (An.prototype.drawPoints = function (e, t, n, i, r, s) {
      this.forEachGlyph(t, n, i, r, s, function (t, n, i, r) {
        t.drawPoints(e, n, i, r);
      });
    }),
    (An.prototype.drawMetrics = function (e, t, n, i, r, s) {
      this.forEachGlyph(t, n, i, r, s, function (t, n, i, r) {
        t.drawMetrics(e, n, i, r);
      });
    }),
    (An.prototype.getEnglishName = function (e) {
      var t = this.names[e];
      return t ? t.en : void 0;
    }),
    (An.prototype.validate = function () {
      function e(e) {
        var n = t.getEnglishName(e);
        n && n.trim().length;
      }
      var t = this;
      e("fontFamily"),
        e("weightName"),
        e("manufacturer"),
        e("copyright"),
        e("version"),
        this.unitsPerEm;
    }),
    (An.prototype.toTables = function () {
      return Wi.fontToTable(this);
    }),
    (An.prototype.toBuffer = function () {
      return (
        console.warn(
          "Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."
        ),
        this.toArrayBuffer()
      );
    }),
    (An.prototype.toArrayBuffer = function () {
      for (
        var e = this.toTables().encode(),
          t = new ArrayBuffer(e.length),
          n = new Uint8Array(t),
          i = 0;
        i < e.length;
        i++
      )
        n[i] = e[i];
      return t;
    }),
    (An.prototype.download = function (e) {
      var t = this.getEnglishName("fontFamily"),
        n = this.getEnglishName("fontSubfamily");
      e = e || t.replace(/\s/g, "") + "-" + n + ".otf";
      var i = this.toArrayBuffer();
      if ("undefined" != typeof window)
        if (((window.URL = window.URL || window.webkitURL), window.URL)) {
          var r = new DataView(i),
            s = new Blob([r], { type: "font/opentype" }),
            o = document.createElement("a");
          (o.href = window.URL.createObjectURL(s)), (o.download = e);
          var a = document.createEvent("MouseEvents");
          a.initEvent("click", !0, !1), o.dispatchEvent(a);
        } else
          console.warn(
            "Font file could not be downloaded. Try using a different browser."
          );
      else {
        var l = require("fs"),
          c = (function (e) {
            for (
              var t = new Buffer(e.byteLength), n = new Uint8Array(e), i = 0;
              i < t.length;
              ++i
            )
              t[i] = n[i];
            return t;
          })(i);
        l.writeFileSync(e, c);
      }
    }),
    (An.prototype.fsSelectionValues = {
      ITALIC: 1,
      UNDERSCORE: 2,
      NEGATIVE: 4,
      OUTLINED: 8,
      STRIKEOUT: 16,
      BOLD: 32,
      REGULAR: 64,
      USER_TYPO_METRICS: 128,
      WWS: 256,
      OBLIQUE: 512,
    }),
    (An.prototype.usWidthClasses = {
      ULTRA_CONDENSED: 1,
      EXTRA_CONDENSED: 2,
      CONDENSED: 3,
      SEMI_CONDENSED: 4,
      MEDIUM: 5,
      SEMI_EXPANDED: 6,
      EXPANDED: 7,
      EXTRA_EXPANDED: 8,
      ULTRA_EXPANDED: 9,
    }),
    (An.prototype.usWeightClasses = {
      THIN: 100,
      EXTRA_LIGHT: 200,
      LIGHT: 300,
      NORMAL: 400,
      MEDIUM: 500,
      SEMI_BOLD: 600,
      BOLD: 700,
      EXTRA_BOLD: 800,
      BLACK: 900,
    });
  var rr = {
      make: function (e, t) {
        var n,
          i,
          r,
          s,
          o = new ci.Table("fvar", [
            { name: "version", type: "ULONG", value: 65536 },
            { name: "offsetToData", type: "USHORT", value: 0 },
            { name: "countSizePairs", type: "USHORT", value: 2 },
            { name: "axisCount", type: "USHORT", value: e.axes.length },
            { name: "axisSize", type: "USHORT", value: 20 },
            {
              name: "instanceCount",
              type: "USHORT",
              value: e.instances.length,
            },
            {
              name: "instanceSize",
              type: "USHORT",
              value: 4 + 4 * e.axes.length,
            },
          ]);
        o.offsetToData = o.sizeOf();
        for (var a = 0; a < e.axes.length; a++)
          o.fields = o.fields.concat(
            ((n = a),
            (i = e.axes[a]),
            (r = t),
            (s = On(i.name, r)),
            [
              { name: "tag_" + n, type: "TAG", value: i.tag },
              { name: "minValue_" + n, type: "FIXED", value: i.minValue << 16 },
              {
                name: "defaultValue_" + n,
                type: "FIXED",
                value: i.defaultValue << 16,
              },
              { name: "maxValue_" + n, type: "FIXED", value: i.maxValue << 16 },
              { name: "flags_" + n, type: "USHORT", value: 0 },
              { name: "nameID_" + n, type: "USHORT", value: s },
            ])
          );
        for (var l = 0; l < e.instances.length; l++)
          o.fields = o.fields.concat(Dn(l, e.instances[l], e.axes, t));
        return o;
      },
      parse: function (e, t, n) {
        var i = new di.Parser(e, t),
          r = i.parseULong();
        ei.argument(65536 === r, "Unsupported fvar table version.");
        var s = i.parseOffset16();
        i.skip("uShort", 1);
        for (
          var o,
            a,
            l,
            c,
            u,
            h = i.parseUShort(),
            d = i.parseUShort(),
            p = i.parseUShort(),
            f = i.parseUShort(),
            m = [],
            g = 0;
          h > g;
          g++
        )
          m.push(
            ((o = e),
            (a = t + s + g * d),
            (l = n),
            (u = c = void 0),
            (c = {}),
            (u = new di.Parser(o, a)),
            (c.tag = u.parseTag()),
            (c.minValue = u.parseFixed()),
            (c.defaultValue = u.parseFixed()),
            (c.maxValue = u.parseFixed()),
            u.skip("uShort", 1),
            (c.name = l[u.parseUShort()] || {}),
            c)
          );
        for (var v = [], _ = t + s + h * d, y = 0; p > y; y++)
          v.push(Mn(e, _ + y * f, m, n));
        return { axes: m, instances: v };
      },
    },
    sr = new Array(10);
  (sr[1] = function () {
    var e = this.offset + this.relativeOffset,
      t = this.parseUShort();
    return 1 === t
      ? {
          posFormat: 1,
          coverage: this.parsePointer(M.coverage),
          value: this.parseValueRecord(),
        }
      : 2 === t
      ? {
          posFormat: 2,
          coverage: this.parsePointer(M.coverage),
          values: this.parseValueRecordList(),
        }
      : void ei.assert(
          !1,
          "0x" + e.toString(16) + ": GPOS lookup type 1 format must be 1 or 2."
        );
  }),
    (sr[2] = function () {
      var e = this.offset + this.relativeOffset,
        t = this.parseUShort();
      ei.assert(
        1 === t || 2 === t,
        "0x" + e.toString(16) + ": GPOS lookup type 2 format must be 1 or 2."
      );
      var n = this.parsePointer(M.coverage),
        i = this.parseUShort(),
        r = this.parseUShort();
      if (1 === t)
        return {
          posFormat: t,
          coverage: n,
          valueFormat1: i,
          valueFormat2: r,
          pairSets: this.parseList(
            M.pointer(
              M.list(function () {
                return {
                  secondGlyph: this.parseUShort(),
                  value1: this.parseValueRecord(i),
                  value2: this.parseValueRecord(r),
                };
              })
            )
          ),
        };
      if (2 === t) {
        var s = this.parsePointer(M.classDef),
          o = this.parsePointer(M.classDef),
          a = this.parseUShort(),
          l = this.parseUShort();
        return {
          posFormat: t,
          coverage: n,
          valueFormat1: i,
          valueFormat2: r,
          classDef1: s,
          classDef2: o,
          class1Count: a,
          class2Count: l,
          classRecords: this.parseList(
            a,
            M.list(l, function () {
              return {
                value1: this.parseValueRecord(i),
                value2: this.parseValueRecord(r),
              };
            })
          ),
        };
      }
    }),
    (sr[3] = function () {
      return { error: "GPOS Lookup 3 not supported" };
    }),
    (sr[4] = function () {
      return { error: "GPOS Lookup 4 not supported" };
    }),
    (sr[5] = function () {
      return { error: "GPOS Lookup 5 not supported" };
    }),
    (sr[6] = function () {
      return { error: "GPOS Lookup 6 not supported" };
    }),
    (sr[7] = function () {
      return { error: "GPOS Lookup 7 not supported" };
    }),
    (sr[8] = function () {
      return { error: "GPOS Lookup 8 not supported" };
    }),
    (sr[9] = function () {
      return { error: "GPOS Lookup 9 not supported" };
    });
  var or = new Array(10),
    ar = {
      parse: function (e, t) {
        var n = new M(e, (t = t || 0)),
          i = n.parseVersion(1);
        return (
          ei.argument(
            1 === i || 1.1 === i,
            "Unsupported GPOS table version " + i
          ),
          1 === i
            ? {
                version: i,
                scripts: n.parseScriptList(),
                features: n.parseFeatureList(),
                lookups: n.parseLookupList(sr),
              }
            : {
                version: i,
                scripts: n.parseScriptList(),
                features: n.parseFeatureList(),
                lookups: n.parseLookupList(sr),
                variations: n.parseFeatureVariationsList(),
              }
        );
      },
      make: function (e) {
        return new ci.Table("GPOS", [
          { name: "version", type: "ULONG", value: 65536 },
          {
            name: "scripts",
            type: "TABLE",
            value: new ci.ScriptList(e.scripts),
          },
          {
            name: "features",
            type: "TABLE",
            value: new ci.FeatureList(e.features),
          },
          {
            name: "lookups",
            type: "TABLE",
            value: new ci.LookupList(e.lookups, or),
          },
        ]);
      },
    },
    lr = {
      parse: function (e, t) {
        var n = new di.Parser(e, t),
          i = n.parseUShort();
        if (0 === i)
          return (function (e) {
            var t = {};
            e.skip("uShort");
            var n = e.parseUShort();
            ei.argument(0 === n, "Unsupported kern sub-table version."),
              e.skip("uShort", 2);
            var i = e.parseUShort();
            e.skip("uShort", 3);
            for (var r = 0; i > r; r += 1) {
              var s = e.parseUShort(),
                o = e.parseUShort(),
                a = e.parseShort();
              t[s + "," + o] = a;
            }
            return t;
          })(n);
        if (1 === i)
          return (function (e) {
            var t = {};
            e.skip("uShort"),
              1 < e.parseULong() &&
                console.warn("Only the first kern subtable is supported."),
              e.skip("uLong");
            var n = 255 & e.parseUShort();
            if ((e.skip("uShort"), 0 === n)) {
              var i = e.parseUShort();
              e.skip("uShort", 3);
              for (var r = 0; i > r; r += 1) {
                var s = e.parseUShort(),
                  o = e.parseUShort(),
                  a = e.parseShort();
                t[s + "," + o] = a;
              }
            }
            return t;
          })(n);
        throw new Error("Unsupported kern table version (" + i + ").");
      },
    },
    cr = {
      parse: function (e, t, n, i) {
        for (
          var r = new di.Parser(e, t),
            s = i ? r.parseUShort : r.parseULong,
            o = [],
            a = 0;
          n + 1 > a;
          a += 1
        ) {
          var l = s.call(r);
          i && (l *= 2), o.push(l);
        }
        return o;
      },
    };
  (e.Font = An),
    (e.Glyph = B),
    (e.Path = p),
    (e.BoundingBox = d),
    (e._parse = di),
    (e.parse = Bn),
    (e.load = function (e, t) {
      ("undefined" == typeof window ? Rn : Ln)(e, function (e, n) {
        if (e) return t(e);
        var i;
        try {
          i = Bn(n);
        } catch (e) {
          return t(e, null);
        }
        return t(null, i);
      });
    }),
    (e.loadSync = function (e) {
      return Bn(bt(require("fs").readFileSync(e)));
    }),
    Object.defineProperty(e, "__esModule", { value: !0 });
}),
  (SVGPathElement.prototype.getPathData &&
    SVGPathElement.prototype.setPathData) ||
    !(function () {
      var e = {
          Z: "Z",
          M: "M",
          L: "L",
          C: "C",
          Q: "Q",
          A: "A",
          H: "H",
          V: "V",
          S: "S",
          T: "T",
          z: "Z",
          m: "m",
          l: "l",
          c: "c",
          q: "q",
          a: "a",
          h: "h",
          v: "v",
          s: "s",
          t: "t",
        },
        t = function (e) {
          (this._string = e),
            (this._currentIndex = 0),
            (this._endIndex = this._string.length),
            (this._prevCommand = null),
            this._skipOptionalSpaces();
        },
        n = -1 !== window.navigator.userAgent.indexOf("MSIE ");
      t.prototype = {
        parseSegment: function () {
          var t = this._string[this._currentIndex],
            n = e[t] ? e[t] : null;
          if (null === n) {
            if (null === this._prevCommand) return null;
            if (
              ((n =
                ("+" === t ||
                  "-" === t ||
                  "." === t ||
                  (t >= "0" && "9" >= t)) &&
                "Z" !== this._prevCommand
                  ? "M" === this._prevCommand
                    ? "L"
                    : "m" === this._prevCommand
                    ? "l"
                    : this._prevCommand
                  : null),
              null === n)
            )
              return null;
          } else this._currentIndex += 1;
          this._prevCommand = n;
          var i = null,
            r = n.toUpperCase();
          return (
            "H" === r || "V" === r
              ? (i = [this._parseNumber()])
              : "M" === r || "L" === r || "T" === r
              ? (i = [this._parseNumber(), this._parseNumber()])
              : "S" === r || "Q" === r
              ? (i = [
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                ])
              : "C" === r
              ? (i = [
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                ])
              : "A" === r
              ? (i = [
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseNumber(),
                  this._parseArcFlag(),
                  this._parseArcFlag(),
                  this._parseNumber(),
                  this._parseNumber(),
                ])
              : "Z" === r && (this._skipOptionalSpaces(), (i = [])),
            null === i || i.indexOf(null) >= 0 ? null : { type: n, values: i }
          );
        },
        hasMoreData: function () {
          return this._currentIndex < this._endIndex;
        },
        peekSegmentType: function () {
          var t = this._string[this._currentIndex];
          return e[t] ? e[t] : null;
        },
        initialCommandIsMoveTo: function () {
          if (!this.hasMoreData()) return !0;
          var e = this.peekSegmentType();
          return "M" === e || "m" === e;
        },
        _isCurrentSpace: function () {
          var e = this._string[this._currentIndex];
          return (
            " " >= e &&
            (" " === e || "\n" === e || "	" === e || "\r" === e || "\f" === e)
          );
        },
        _skipOptionalSpaces: function () {
          for (
            ;
            this._currentIndex < this._endIndex && this._isCurrentSpace();

          )
            this._currentIndex += 1;
          return this._currentIndex < this._endIndex;
        },
        _skipOptionalSpacesOrDelimiter: function () {
          return this._currentIndex < this._endIndex &&
            !this._isCurrentSpace() &&
            "," !== this._string[this._currentIndex]
            ? !1
            : (this._skipOptionalSpaces() &&
                this._currentIndex < this._endIndex &&
                "," === this._string[this._currentIndex] &&
                ((this._currentIndex += 1), this._skipOptionalSpaces()),
              this._currentIndex < this._endIndex);
        },
        _parseNumber: function () {
          var e = 0,
            t = 0,
            n = 1,
            i = 0,
            r = 1,
            s = 1,
            o = this._currentIndex;
          if (
            (this._skipOptionalSpaces(),
            this._currentIndex < this._endIndex &&
            "+" === this._string[this._currentIndex]
              ? (this._currentIndex += 1)
              : this._currentIndex < this._endIndex &&
                "-" === this._string[this._currentIndex] &&
                ((this._currentIndex += 1), (r = -1)),
            this._currentIndex === this._endIndex ||
              ((this._string[this._currentIndex] < "0" ||
                this._string[this._currentIndex] > "9") &&
                "." !== this._string[this._currentIndex]))
          )
            return null;
          for (
            var a = this._currentIndex;
            this._currentIndex < this._endIndex &&
            this._string[this._currentIndex] >= "0" &&
            this._string[this._currentIndex] <= "9";

          )
            this._currentIndex += 1;
          if (this._currentIndex !== a)
            for (var l = this._currentIndex - 1, c = 1; l >= a; )
              (t += c * (this._string[l] - "0")), (l -= 1), (c *= 10);
          if (
            this._currentIndex < this._endIndex &&
            "." === this._string[this._currentIndex]
          ) {
            if (
              ((this._currentIndex += 1),
              this._currentIndex >= this._endIndex ||
                this._string[this._currentIndex] < "0" ||
                this._string[this._currentIndex] > "9")
            )
              return null;
            for (
              ;
              this._currentIndex < this._endIndex &&
              this._string[this._currentIndex] >= "0" &&
              this._string[this._currentIndex] <= "9";

            )
              (n *= 10),
                (i += (this._string.charAt(this._currentIndex) - "0") / n),
                (this._currentIndex += 1);
          }
          if (
            this._currentIndex !== o &&
            this._currentIndex + 1 < this._endIndex &&
            ("e" === this._string[this._currentIndex] ||
              "E" === this._string[this._currentIndex]) &&
            "x" !== this._string[this._currentIndex + 1] &&
            "m" !== this._string[this._currentIndex + 1]
          ) {
            if (
              ((this._currentIndex += 1),
              "+" === this._string[this._currentIndex]
                ? (this._currentIndex += 1)
                : "-" === this._string[this._currentIndex] &&
                  ((this._currentIndex += 1), (s = -1)),
              this._currentIndex >= this._endIndex ||
                this._string[this._currentIndex] < "0" ||
                this._string[this._currentIndex] > "9")
            )
              return null;
            for (
              ;
              this._currentIndex < this._endIndex &&
              this._string[this._currentIndex] >= "0" &&
              this._string[this._currentIndex] <= "9";

            )
              (e *= 10),
                (e += this._string[this._currentIndex] - "0"),
                (this._currentIndex += 1);
          }
          var u = t + i;
          return (
            (u *= r),
            e && (u *= Math.pow(10, s * e)),
            o === this._currentIndex
              ? null
              : (this._skipOptionalSpacesOrDelimiter(), u)
          );
        },
        _parseArcFlag: function () {
          if (this._currentIndex >= this._endIndex) return null;
          var e = null,
            t = this._string[this._currentIndex];
          if (((this._currentIndex += 1), "0" === t)) e = 0;
          else {
            if ("1" !== t) return null;
            e = 1;
          }
          return this._skipOptionalSpacesOrDelimiter(), e;
        },
      };
      var i = function (e) {
          if (!e || 0 === e.length) return [];
          var n = new t(e),
            i = [];
          if (n.initialCommandIsMoveTo())
            for (; n.hasMoreData(); ) {
              var r = n.parseSegment();
              if (null === r) break;
              i.push(r);
            }
          return i;
        },
        r = SVGPathElement.prototype.setAttribute,
        s = SVGPathElement.prototype.removeAttribute,
        o = window.Symbol ? Symbol() : "__cachedPathData",
        a = window.Symbol ? Symbol() : "__cachedNormalizedPathData",
        l = function (e, t, n, i, r, s, o, a, c, u) {
          var h,
            d,
            p,
            f,
            m = function (e) {
              return (Math.PI * e) / 180;
            },
            g = function (e, t, n) {
              var i = e * Math.cos(n) - t * Math.sin(n),
                r = e * Math.sin(n) + t * Math.cos(n);
              return { x: i, y: r };
            },
            v = m(o),
            _ = [];
          if (u) (h = u[0]), (d = u[1]), (p = u[2]), (f = u[3]);
          else {
            var y = g(e, t, -v);
            (e = y.x), (t = y.y);
            var b = g(n, i, -v);
            (n = b.x), (i = b.y);
            var w = (e - n) / 2,
              x = (t - i) / 2,
              C = (w * w) / (r * r) + (x * x) / (s * s);
            C > 1 && ((C = Math.sqrt(C)), (r = C * r), (s = C * s));
            var T;
            T = a === c ? -1 : 1;
            var S = r * r,
              E = s * s,
              k = S * E - S * x * x - E * w * w,
              P = S * x * x + E * w * w,
              I = T * Math.sqrt(Math.abs(k / P));
            (p = (I * r * x) / s + (e + n) / 2),
              (f = (I * -s * w) / r + (t + i) / 2),
              (h = Math.asin(parseFloat(((t - f) / s).toFixed(9)))),
              (d = Math.asin(parseFloat(((i - f) / s).toFixed(9)))),
              p > e && (h = Math.PI - h),
              p > n && (d = Math.PI - d),
              0 > h && (h = 2 * Math.PI + h),
              0 > d && (d = 2 * Math.PI + d),
              c && h > d && (h -= 2 * Math.PI),
              !c && d > h && (d -= 2 * Math.PI);
          }
          var A = d - h;
          if (Math.abs(A) > (120 * Math.PI) / 180) {
            var O = d,
              D = n,
              M = i;
            (d =
              c && d > h
                ? h + ((120 * Math.PI) / 180) * 1
                : h + ((120 * Math.PI) / 180) * -1),
              (n = p + r * Math.cos(d)),
              (i = f + s * Math.sin(d)),
              (_ = l(n, i, D, M, r, s, o, 0, c, [d, O, p, f]));
          }
          A = d - h;
          var R = Math.cos(h),
            L = Math.sin(h),
            N = Math.cos(d),
            U = Math.sin(d),
            B = Math.tan(A / 4),
            F = (4 / 3) * r * B,
            j = (4 / 3) * s * B,
            H = [e, t],
            $ = [e + F * L, t - j * R],
            z = [n + F * U, i - j * N],
            W = [n, i];
          if ((($[0] = 2 * H[0] - $[0]), ($[1] = 2 * H[1] - $[1]), u))
            return [$, z, W].concat(_);
          _ = [$, z, W].concat(_);
          for (var G = [], V = 0; V < _.length; V += 3) {
            var r = g(_[V][0], _[V][1], v),
              s = g(_[V + 1][0], _[V + 1][1], v),
              q = g(_[V + 2][0], _[V + 2][1], v);
            G.push([r.x, r.y, s.x, s.y, q.x, q.y]);
          }
          return G;
        },
        c = function (e) {
          return e.map(function (e) {
            return {
              type: e.type,
              values: Array.prototype.slice.call(e.values),
            };
          });
        },
        u = function (e) {
          var t = [],
            n = null,
            i = null,
            r = null,
            s = null;
          return (
            e.forEach(function (e) {
              var o = e.type;
              if ("M" === o) {
                var a = e.values[0],
                  l = e.values[1];
                t.push({ type: "M", values: [a, l] }),
                  (r = a),
                  (s = l),
                  (n = a),
                  (i = l);
              } else if ("m" === o) {
                var a = n + e.values[0],
                  l = i + e.values[1];
                t.push({ type: "M", values: [a, l] }),
                  (r = a),
                  (s = l),
                  (n = a),
                  (i = l);
              } else if ("L" === o) {
                var a = e.values[0],
                  l = e.values[1];
                t.push({ type: "L", values: [a, l] }), (n = a), (i = l);
              } else if ("l" === o) {
                var a = n + e.values[0],
                  l = i + e.values[1];
                t.push({ type: "L", values: [a, l] }), (n = a), (i = l);
              } else if ("C" === o) {
                var c = e.values[0],
                  u = e.values[1],
                  h = e.values[2],
                  d = e.values[3],
                  a = e.values[4],
                  l = e.values[5];
                t.push({ type: "C", values: [c, u, h, d, a, l] }),
                  (n = a),
                  (i = l);
              } else if ("c" === o) {
                var c = n + e.values[0],
                  u = i + e.values[1],
                  h = n + e.values[2],
                  d = i + e.values[3],
                  a = n + e.values[4],
                  l = i + e.values[5];
                t.push({ type: "C", values: [c, u, h, d, a, l] }),
                  (n = a),
                  (i = l);
              } else if ("Q" === o) {
                var c = e.values[0],
                  u = e.values[1],
                  a = e.values[2],
                  l = e.values[3];
                t.push({ type: "Q", values: [c, u, a, l] }), (n = a), (i = l);
              } else if ("q" === o) {
                var c = n + e.values[0],
                  u = i + e.values[1],
                  a = n + e.values[2],
                  l = i + e.values[3];
                t.push({ type: "Q", values: [c, u, a, l] }), (n = a), (i = l);
              } else if ("A" === o) {
                var a = e.values[5],
                  l = e.values[6];
                t.push({
                  type: "A",
                  values: [
                    e.values[0],
                    e.values[1],
                    e.values[2],
                    e.values[3],
                    e.values[4],
                    a,
                    l,
                  ],
                }),
                  (n = a),
                  (i = l);
              } else if ("a" === o) {
                var a = n + e.values[5],
                  l = i + e.values[6];
                t.push({
                  type: "A",
                  values: [
                    e.values[0],
                    e.values[1],
                    e.values[2],
                    e.values[3],
                    e.values[4],
                    a,
                    l,
                  ],
                }),
                  (n = a),
                  (i = l);
              } else if ("H" === o) {
                var a = e.values[0];
                t.push({ type: "H", values: [a] }), (n = a);
              } else if ("h" === o) {
                var a = n + e.values[0];
                t.push({ type: "H", values: [a] }), (n = a);
              } else if ("V" === o) {
                var l = e.values[0];
                t.push({ type: "V", values: [l] }), (i = l);
              } else if ("v" === o) {
                var l = i + e.values[0];
                t.push({ type: "V", values: [l] }), (i = l);
              } else if ("S" === o) {
                var h = e.values[0],
                  d = e.values[1],
                  a = e.values[2],
                  l = e.values[3];
                t.push({ type: "S", values: [h, d, a, l] }), (n = a), (i = l);
              } else if ("s" === o) {
                var h = n + e.values[0],
                  d = i + e.values[1],
                  a = n + e.values[2],
                  l = i + e.values[3];
                t.push({ type: "S", values: [h, d, a, l] }), (n = a), (i = l);
              } else if ("T" === o) {
                var a = e.values[0],
                  l = e.values[1];
                t.push({ type: "T", values: [a, l] }), (n = a), (i = l);
              } else if ("t" === o) {
                var a = n + e.values[0],
                  l = i + e.values[1];
                t.push({ type: "T", values: [a, l] }), (n = a), (i = l);
              } else
                ("Z" === o || "z" === o) &&
                  (t.push({ type: "Z", values: [] }), (n = r), (i = s));
            }),
            t
          );
        },
        h = function (e) {
          var t = [],
            n = null,
            i = null,
            r = null,
            s = null,
            o = null,
            a = null,
            c = null;
          return (
            e.forEach(function (e) {
              if ("M" === e.type) {
                var u = e.values[0],
                  h = e.values[1];
                t.push({ type: "M", values: [u, h] }),
                  (a = u),
                  (c = h),
                  (s = u),
                  (o = h);
              } else if ("C" === e.type) {
                var d = e.values[0],
                  p = e.values[1],
                  f = e.values[2],
                  m = e.values[3],
                  u = e.values[4],
                  h = e.values[5];
                t.push({ type: "C", values: [d, p, f, m, u, h] }),
                  (i = f),
                  (r = m),
                  (s = u),
                  (o = h);
              } else if ("L" === e.type) {
                var u = e.values[0],
                  h = e.values[1];
                t.push({ type: "L", values: [u, h] }), (s = u), (o = h);
              } else if ("H" === e.type) {
                var u = e.values[0];
                t.push({ type: "L", values: [u, o] }), (s = u);
              } else if ("V" === e.type) {
                var h = e.values[0];
                t.push({ type: "L", values: [s, h] }), (o = h);
              } else if ("S" === e.type) {
                var g,
                  v,
                  f = e.values[0],
                  m = e.values[1],
                  u = e.values[2],
                  h = e.values[3];
                "C" === n || "S" === n
                  ? ((g = s + (s - i)), (v = o + (o - r)))
                  : ((g = s), (v = o)),
                  t.push({ type: "C", values: [g, v, f, m, u, h] }),
                  (i = f),
                  (r = m),
                  (s = u),
                  (o = h);
              } else if ("T" === e.type) {
                var d,
                  p,
                  u = e.values[0],
                  h = e.values[1];
                "Q" === n || "T" === n
                  ? ((d = s + (s - i)), (p = o + (o - r)))
                  : ((d = s), (p = o));
                var g = s + (2 * (d - s)) / 3,
                  v = o + (2 * (p - o)) / 3,
                  _ = u + (2 * (d - u)) / 3,
                  y = h + (2 * (p - h)) / 3;
                t.push({ type: "C", values: [g, v, _, y, u, h] }),
                  (i = d),
                  (r = p),
                  (s = u),
                  (o = h);
              } else if ("Q" === e.type) {
                var d = e.values[0],
                  p = e.values[1],
                  u = e.values[2],
                  h = e.values[3],
                  g = s + (2 * (d - s)) / 3,
                  v = o + (2 * (p - o)) / 3,
                  _ = u + (2 * (d - u)) / 3,
                  y = h + (2 * (p - h)) / 3;
                t.push({ type: "C", values: [g, v, _, y, u, h] }),
                  (i = d),
                  (r = p),
                  (s = u),
                  (o = h);
              } else if ("A" === e.type) {
                var b = Math.abs(e.values[0]),
                  w = Math.abs(e.values[1]),
                  x = e.values[2],
                  C = e.values[3],
                  T = e.values[4],
                  u = e.values[5],
                  h = e.values[6];
                if (0 === b || 0 === w)
                  t.push({ type: "C", values: [s, o, u, h, u, h] }),
                    (s = u),
                    (o = h);
                else if (s !== u || o !== h) {
                  var S = l(s, o, u, h, b, w, x, C, T);
                  S.forEach(function (e) {
                    t.push({ type: "C", values: e });
                  }),
                    (s = u),
                    (o = h);
                }
              } else "Z" === e.type && (t.push(e), (s = a), (o = c));
              n = e.type;
            }),
            t
          );
        };
      (SVGPathElement.prototype.setAttribute = function (e, t) {
        "d" === e && ((this[o] = null), (this[a] = null)), r.call(this, e, t);
      }),
        (SVGPathElement.prototype.removeAttribute = function (e) {
          "d" === e && ((this[o] = null), (this[a] = null)), s.call(this, e);
        }),
        (SVGPathElement.prototype.getPathData = function (e) {
          if (e && e.normalize) {
            if (this[a]) return c(this[a]);
            var t;
            this[o]
              ? (t = c(this[o]))
              : ((t = i(this.getAttribute("d") || "")), (this[o] = c(t)));
            var n = h(u(t));
            return (this[a] = c(n)), n;
          }
          if (this[o]) return c(this[o]);
          var t = i(this.getAttribute("d") || "");
          return (this[o] = c(t)), t;
        }),
        (SVGPathElement.prototype.setPathData = function (e) {
          if (0 === e.length)
            n ? this.setAttribute("d", "") : this.removeAttribute("d");
          else {
            for (var t = "", i = 0, r = e.length; r > i; i += 1) {
              var s = e[i];
              i > 0 && (t += " "),
                (t += s.type),
                s.values &&
                  s.values.length > 0 &&
                  (t += " " + s.values.join(" "));
            }
            this.setAttribute("d", t);
          }
        }),
        (SVGRectElement.prototype.getPathData = function (e) {
          var t = this.x.baseVal.value,
            n = this.y.baseVal.value,
            i = this.width.baseVal.value,
            r = this.height.baseVal.value,
            s = this.hasAttribute("rx")
              ? this.rx.baseVal.value
              : this.ry.baseVal.value,
            o = this.hasAttribute("ry")
              ? this.ry.baseVal.value
              : this.rx.baseVal.value;
          s > i / 2 && (s = i / 2), o > r / 2 && (o = r / 2);
          var a = [
            { type: "M", values: [t + s, n] },
            { type: "H", values: [t + i - s] },
            { type: "A", values: [s, o, 0, 0, 1, t + i, n + o] },
            { type: "V", values: [n + r - o] },
            { type: "A", values: [s, o, 0, 0, 1, t + i - s, n + r] },
            { type: "H", values: [t + s] },
            { type: "A", values: [s, o, 0, 0, 1, t, n + r - o] },
            { type: "V", values: [n + o] },
            { type: "A", values: [s, o, 0, 0, 1, t + s, n] },
            { type: "Z", values: [] },
          ];
          return (
            (a = a.filter(function (e) {
              return "A" !== e.type || (0 !== e.values[0] && 0 !== e.values[1])
                ? !0
                : !1;
            })),
            e && e.normalize === !0 && (a = h(a)),
            a
          );
        }),
        (SVGCircleElement.prototype.getPathData = function (e) {
          var t = this.cx.baseVal.value,
            n = this.cy.baseVal.value,
            i = this.r.baseVal.value,
            r = [
              { type: "M", values: [t + i, n] },
              { type: "A", values: [i, i, 0, 0, 1, t, n + i] },
              { type: "A", values: [i, i, 0, 0, 1, t - i, n] },
              { type: "A", values: [i, i, 0, 0, 1, t, n - i] },
              { type: "A", values: [i, i, 0, 0, 1, t + i, n] },
              { type: "Z", values: [] },
            ];
          return e && e.normalize === !0 && (r = h(r)), r;
        }),
        (SVGEllipseElement.prototype.getPathData = function (e) {
          var t = this.cx.baseVal.value,
            n = this.cy.baseVal.value,
            i = this.rx.baseVal.value,
            r = this.ry.baseVal.value,
            s = [
              { type: "M", values: [t + i, n] },
              { type: "A", values: [i, r, 0, 0, 1, t, n + r] },
              { type: "A", values: [i, r, 0, 0, 1, t - i, n] },
              { type: "A", values: [i, r, 0, 0, 1, t, n - r] },
              { type: "A", values: [i, r, 0, 0, 1, t + i, n] },
              { type: "Z", values: [] },
            ];
          return e && e.normalize === !0 && (s = h(s)), s;
        }),
        (SVGLineElement.prototype.getPathData = function () {
          return [
            {
              type: "M",
              values: [this.x1.baseVal.value, this.y1.baseVal.value],
            },
            {
              type: "L",
              values: [this.x2.baseVal.value, this.y2.baseVal.value],
            },
          ];
        }),
        (SVGPolylineElement.prototype.getPathData = function () {
          for (var e = [], t = 0; t < this.points.numberOfItems; t += 1) {
            var n = this.points.getItem(t);
            e.push({ type: 0 === t ? "M" : "L", values: [n.x, n.y] });
          }
          return e;
        }),
        (SVGPolygonElement.prototype.getPathData = function () {
          for (var e = [], t = 0; t < this.points.numberOfItems; t += 1) {
            var n = this.points.getItem(t);
            e.push({ type: 0 === t ? "M" : "L", values: [n.x, n.y] });
          }
          return e.push({ type: "Z", values: [] }), e;
        });
    })(),
  (function (e) {
    if ("object" == typeof exports && "undefined" != typeof module)
      module.exports = e();
    else if ("function" == typeof define && define.amd) define([], e);
    else {
      var t;
      (t =
        "undefined" != typeof window
          ? window
          : "undefined" != typeof global
          ? global
          : "undefined" != typeof self
          ? self
          : this),
        (t.pixelmatch = e());
    }
  })(function () {
    return (function () {
      function e(t, n, i) {
        function r(o, a) {
          if (!n[o]) {
            if (!t[o]) {
              var l = "function" == typeof require && require;
              if (!a && l) return l(o, !0);
              if (s) return s(o, !0);
              var c = new Error("Cannot find module '" + o + "'");
              throw ((c.code = "MODULE_NOT_FOUND"), c);
            }
            var u = (n[o] = { exports: {} });
            t[o][0].call(
              u.exports,
              function (e) {
                var n = t[o][1][e];
                return r(n || e);
              },
              u,
              u.exports,
              e,
              t,
              n,
              i
            );
          }
          return n[o].exports;
        }
        for (
          var s = "function" == typeof require && require, o = 0;
          o < i.length;
          o++
        )
          r(i[o]);
        return r;
      }
      return e;
    })()(
      {
        1: [
          function (e, t) {
            "use strict";
            function n(e, t, n, s, o, a) {
              if (e.length !== t.length)
                throw new Error("Image sizes do not match.");
              a || (a = {});
              for (
                var h = void 0 === a.threshold ? 0.1 : a.threshold,
                  d = 35215 * h * h,
                  p = 0,
                  f = 0;
                o > f;
                f++
              )
                for (var m = 0; s > m; m++) {
                  var g = 4 * (f * s + m),
                    v = r(e, t, g, g);
                  if (v > d)
                    a.includeAA ||
                    (!i(e, m, f, s, o, t) && !i(t, m, f, s, o, e))
                      ? (n && c(n, g, 255, 0, 0), p++)
                      : n && c(n, g, 255, 255, 0);
                  else if (n) {
                    var _ = l(u(e, g), 0.1);
                    c(n, g, _, _, _);
                  }
                }
              return p;
            }
            function i(e, t, n, s, o, a) {
              for (
                var l,
                  c,
                  u,
                  h,
                  d = Math.max(t - 1, 0),
                  p = Math.max(n - 1, 0),
                  f = Math.min(t + 1, s - 1),
                  m = Math.min(n + 1, o - 1),
                  g = 4 * (n * s + t),
                  v = 0,
                  _ = 0,
                  y = 0,
                  b = 0,
                  w = 0,
                  x = d;
                f >= x;
                x++
              )
                for (var C = p; m >= C; C++)
                  if (x !== t || C !== n) {
                    var T = r(e, e, g, 4 * (C * s + x), !0);
                    if ((0 === T ? v++ : 0 > T ? y++ : T > 0 && _++, v > 2))
                      return !1;
                    a &&
                      (b > T && ((b = T), (l = x), (c = C)),
                      T > w && ((w = T), (u = x), (h = C)));
                  }
              return a
                ? 0 === y || 0 === _
                  ? !1
                  : (!i(e, l, c, s, o) && !i(a, l, c, s, o)) ||
                    (!i(e, u, h, s, o) && !i(a, u, h, s, o))
                : !0;
            }
            function r(e, t, n, i, r) {
              var c = e[n + 3] / 255,
                u = t[i + 3] / 255,
                h = l(e[n + 0], c),
                d = l(e[n + 1], c),
                p = l(e[n + 2], c),
                f = l(t[i + 0], u),
                m = l(t[i + 1], u),
                g = l(t[i + 2], u),
                v = s(h, d, p) - s(f, m, g);
              if (r) return v;
              var _ = o(h, d, p) - o(f, m, g),
                y = a(h, d, p) - a(f, m, g);
              return 0.5053 * v * v + 0.299 * _ * _ + 0.1957 * y * y;
            }
            function s(e, t, n) {
              return 0.29889531 * e + 0.58662247 * t + 0.11448223 * n;
            }
            function o(e, t, n) {
              return 0.59597799 * e - 0.2741761 * t - 0.32180189 * n;
            }
            function a(e, t, n) {
              return 0.21147017 * e - 0.52261711 * t + 0.31114694 * n;
            }
            function l(e, t) {
              return 255 + (e - 255) * t;
            }
            function c(e, t, n, i, r) {
              (e[t + 0] = n), (e[t + 1] = i), (e[t + 2] = r), (e[t + 3] = 255);
            }
            function u(e, t) {
              var n = e[t + 3] / 255,
                i = l(e[t + 0], n),
                r = l(e[t + 1], n),
                o = l(e[t + 2], n);
              return s(i, r, o);
            }
            t.exports = n;
          },
          {},
        ],
      },
      {},
      [1]
    )(1);
  });
